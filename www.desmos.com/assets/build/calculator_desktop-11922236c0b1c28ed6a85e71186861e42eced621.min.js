var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function n(e,t){var n,r,i,o,a,s,c,l,u,d,p=t&&t.split("/"),h=m.map,f=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=p.concat(e.split("/")),l=0;l<e.length;l+=1)if("."===(d=e[l]))e.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||f)&&h){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),p)for(u=p.length;u>0;u-=1)if((i=h[p.slice(0,u).join("/")])&&(i=i[r])){o=i,a=l;break}if(o)break;!s&&f&&f[r]&&(s=f[r],c=l)}!o&&s&&(o=s,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function r(t,n){return function(){return u.apply(e,v.call(arguments,0).concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function o(e){return function(t){h[e]=t}}function a(n){if(t(f,n)){var r=f[n];delete f[n],g[n]=!0,l.apply(e,r)}if(!t(h,n)&&!t(g,n))throw new Error("No "+n);return h[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function c(e){return function(){return m&&m.config&&m.config[e]||{}}}var l,u,d,p,h={},f={},m={},g={},y=Object.prototype.hasOwnProperty,v=[].slice;d=function(e,t){var r,o=s(e),c=o[0];return e=o[1],c&&(c=n(c,t),r=a(c)),c?e=r&&r.normalize?r.normalize(e,i(t)):n(e,t):(e=n(e,t),o=s(e),c=o[0],e=o[1],c&&(r=a(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:r}},p={require:function(e){return r(e)},exports:function(e){var t=h[e];return void 0!==t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:c(e)}}},l=function(n,i,s,c){var l,u,m,y,v,b,x=[];if(c=c||n,"function"==typeof s){for(i=!i.length&&s.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(y=d(i[v],c),"require"===(u=y.f))x[v]=p.require(n);else if("exports"===u)x[v]=p.exports(n),b=!0;else if("module"===u)l=x[v]=p.module(n);else if(t(h,u)||t(f,u)||t(g,u))x[v]=a(u);else{if(!y.p)throw new Error(n+" missing "+u);y.p.load(y.n,r(c,!0),o(u),{}),x[v]=h[u]}m=s.apply(h[n],x),n&&(l&&l.exports!==e&&l.exports!==h[n]?h[n]=l.exports:m===e&&b||(h[n]=m))}else n&&(h[n]=s)},requirejs=require=u=function(t,n,r,i,o){return"string"==typeof t?p[t]?p[t](n):a(d(t,n).f):(t.splice||(m=t,n.splice?(t=n,n=r,r=null):t=e),n=n||function(){},"function"==typeof r&&(r=i,i=o),i?l(e,t,n,r):setTimeout(function(){l(e,t,n,r)},4),u)},u.config=function(e){return m=e,m.deps&&u(m.deps,m.callback),u},define=function(e,n,r){n.splice||(r=n,n=[]),t(h,e)||t(f,e)||(f[e]=[e,n,r])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("core/vendor/almond",function(){}),define("testbridge",["require"],function(e){function t(){window.consoleOverride=!0;var e=window.console.log;window.console.log=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(window.console,[].concat([t.join(" ")],t))}}var n={ready:function(){try{window.TestBridge=n,parent.USING_SELENIUM&&t()}catch(e){}}};return n}),define("ipad.ghostevents",["require"],function(e){function t(e){r&&o.evtInScope(e)&&(e.stopPropagation(),e.stopImmediatePropagation())}function n(e){r&&o.evtInScope(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}var r=!1,i=null,o={isGhostEvent:function(e){return!1},evtInScope:function(e){return!1}};return document.addEventListener("mousedown",function(e){o.evtInScope(e)&&(i=document.activeElement,r=o.isGhostEvent(e),t(e))},!0),document.addEventListener("mouseup",t,!0),document.addEventListener("click",function(e){n(e),r&&document.activeElement!==i&&(document.activeElement&&document.activeElement.blur(),i&&i.focus()),r=!1},!0),document.addEventListener("focus",n,!0),document.addEventListener("blur",n,!0),o}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=ie.type(e);return"function"!==n&&!ie.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t,n){if(ie.isFunction(t))return ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ie.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ie.filter(t,e,n);t=ie.filter(t,e)}return ie.grep(e,function(e){return J.call(t,e)>-1!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return ie.each(e.match(be)||[],function(e,n){t[n]=!0}),t}function a(){X.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),ie.ready()}function s(){this.expando=ie.expando+s.uid++}function c(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ke,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Me.test(n)?ie.parseJSON(n):n)}catch(e){}Se.set(e,t,n)}else n=void 0;return n}function l(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return ie.css(e,t,"")},c=s(),l=n&&n[3]||(ie.cssNumber[t]?"":"px"),u=(ie.cssNumber[t]||"px"!==l&&+c)&&Ie.exec(ie.css(e,t));if(u&&u[3]!==l){l=l||u[3],n=n||[],u=+c||1;do{o=o||".5",u/=o,ie.style(e,t,u+l)}while(o!==(o=s()/c)&&1!==o&&--a)}return n&&(u=+u||+c||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=u,r.end=i)),i}function u(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],n):n}function d(e,t){for(var n=0,r=e.length;n<r;n++)_e.set(e[n],"globalEval",!t||_e.get(t[n],"globalEval"))}function p(e,t,n,r,i){for(var o,a,s,c,l,p,h=t.createDocumentFragment(),f=[],m=0,g=e.length;m<g;m++)if((o=e[m])||0===o)if("object"===ie.type(o))ie.merge(f,o.nodeType?[o]:o);else if(Fe.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(Pe.exec(o)||["",""])[1].toLowerCase(),c=Oe[s]||Oe._default,a.innerHTML=c[1]+ie.htmlPrefilter(o)+c[2],p=c[0];p--;)a=a.lastChild;ie.merge(f,a.childNodes),a=h.firstChild,a.textContent=""}else f.push(t.createTextNode(o));for(h.textContent="",m=0;o=f[m++];)if(r&&ie.inArray(o,r)>-1)i&&i.push(o);else if(l=ie.contains(o.ownerDocument,o),a=u(h.appendChild(o),"script"),l&&d(a),n)for(p=0;o=a[p++];)Ae.test(o.type||"")&&n.push(o);return h}function h(){return!0}function f(){return!1}function m(){try{return X.activeElement}catch(e){}}function g(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)g(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=f;else if(!i)return e;return 1===o&&(a=i,i=function(e){return ie().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=ie.guid++)),e.each(function(){ie.event.add(this,t,i,r,n)})}function y(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function v(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=Ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function x(e,t){var n,r,i,o,a,s,c,l;if(1===t.nodeType){if(_e.hasData(e)&&(o=_e.access(e),a=_e.set(t,o),l=o.events)){delete a.handle,a.events={};for(i in l)for(n=0,r=l[i].length;n<r;n++)ie.event.add(t,i,l[i][n])}Se.hasData(e)&&(s=Se.access(e),c=ie.extend({},s),Se.set(t,c))}}function E(e,t){var n=t.nodeName.toLowerCase();"input"===n&&De.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function w(e,t,n,r){t=Q.apply([],t);var i,o,a,s,c,l,d=0,h=e.length,f=h-1,m=t[0],g=ie.isFunction(m);if(g||h>1&&"string"==typeof m&&!re.checkClone&&Ve.test(m))return e.each(function(i){var o=e.eq(i);g&&(t[0]=m.call(this,i,o.html())),w(o,t,n,r)});if(h&&(i=p(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=ie.map(u(i,"script"),v),s=a.length;d<h;d++)c=i,d!==f&&(c=ie.clone(c,!0,!0),s&&ie.merge(a,u(c,"script"))),n.call(e[d],c,d);if(s)for(l=a[a.length-1].ownerDocument,ie.map(a,b),d=0;d<s;d++)c=a[d],Ae.test(c.type||"")&&!_e.access(c,"globalEval")&&ie.contains(l,c)&&(c.src?ie._evalUrl&&ie._evalUrl(c.src):ie.globalEval(c.textContent.replace(Ge,"")))}return e}function _(e,t,n){for(var r,i=t?ie.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ie.cleanData(u(r)),r.parentNode&&(n&&ie.contains(r.ownerDocument,r)&&d(u(r,"script")),r.parentNode.removeChild(r));return e}function S(e,t){var n=ie(t.createElement(e)).appendTo(t.body),r=ie.css(n[0],"display");return n.detach(),r}function M(e){var t=X,n=He[e];return n||(n=S(e,t),"none"!==n&&n||(ze=(ze||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=ze[0].contentDocument,t.write(),t.close(),n=S(e,t),ze.detach()),He[e]=n),n}function k(e,t,n){var r,i,o,a,s=e.style;return n=n||Ye(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||ie.contains(e.ownerDocument,e)||(a=ie.style(e,t)),n&&!re.pixelMarginRight()&&Ke.test(a)&&We.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0!==a?a+"":a}function C(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function I(e){if(e in tt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=et.length;n--;)if((e=et[n]+t)in tt)return e}function T(e,t,n){var r=Ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function L(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=ie.css(e,n+Te[o],!0,i)),r?("content"===n&&(a-=ie.css(e,"padding"+Te[o],!0,i)),"margin"!==n&&(a-=ie.css(e,"border"+Te[o]+"Width",!0,i))):(a+=ie.css(e,"padding"+Te[o],!0,i),"padding"!==n&&(a+=ie.css(e,"border"+Te[o]+"Width",!0,i)));return a}function D(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ye(e),a="border-box"===ie.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(i=k(e,t,o),(i<0||null==i)&&(i=e.style[t]),Ke.test(i))return i;r=a&&(re.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+L(e,t,n||(a?"border":"content"),r,o)+"px"}function P(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)r=e[a],r.style&&(o[a]=_e.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Le(r)&&(o[a]=_e.access(r,"olddisplay",M(r.nodeName)))):(i=Le(r),"none"===n&&i||_e.set(r,"olddisplay",i?n:ie.css(r,"display"))));for(a=0;a<s;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function A(e,t,n,r,i){return new A.prototype.init(e,t,n,r,i)}function O(){return e.setTimeout(function(){nt=void 0}),nt=ie.now()}function F(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Te[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function N(e,t,n){for(var r,i=(B.tweeners[t]||[]).concat(B.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function q(e,t,n){var r,i,o,a,s,c,l,u=this,d={},p=e.style,h=e.nodeType&&Le(e),f=_e.get(e,"fxshow");n.queue||(s=ie._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,c=s.empty.fire,s.empty.fire=function(){s.unqueued||c()}),s.unqueued++,u.always(function(){u.always(function(){s.unqueued--,ie.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=ie.css(e,"display"),"inline"===("none"===l?_e.get(e,"olddisplay")||M(e.nodeName):l)&&"none"===ie.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],it.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!f||void 0===f[r])continue;h=!0}d[r]=f&&f[r]||ie.style(e,r)}else l=void 0;if(ie.isEmptyObject(d))"inline"===("none"===l?M(e.nodeName):l)&&(p.display=l);else{f?"hidden"in f&&(h=f.hidden):f=_e.access(e,"fxshow",{}),o&&(f.hidden=!h),h?ie(e).show():u.done(function(){ie(e).hide()}),u.done(function(){var t;_e.remove(e,"fxshow");for(t in d)ie.style(e,t,d[t])});for(r in d)a=N(h?f[r]:0,r,u),r in f||(f[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function R(e,t){var n,r,i,o,a;for(n in e)if(r=ie.camelCase(n),i=t[r],o=e[n],ie.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ie.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function B(e,t,n){var r,i,o=0,a=B.prefilters.length,s=ie.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=nt||O(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,c=l.tweens.length;a<c;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),o<1&&c?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{},easing:ie.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||O(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ie.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),u=l.props;for(R(u,l.opts.specialEasing);o<a;o++)if(r=B.prefilters[o].call(l,e,u,l.opts))return ie.isFunction(r.stop)&&(ie._queueHooks(l.elem,l.opts.queue).stop=ie.proxy(r.stop,r)),r;return ie.map(u,N,l),ie.isFunction(l.opts.start)&&l.opts.start.call(e,l),ie.fx.timer(ie.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function j(e){return e.getAttribute&&e.getAttribute("class")||""}function V(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(be)||[];if(ie.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function U(e,t,n,r){function i(s){var c;return o[s]=!0,ie.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(c=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),c}var o={},a=e===St;return i(t.dataTypes[0])||!o["*"]&&i("*")}function G(e,t){var n,r,i=ie.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&ie.extend(!0,e,r),e}function z(e,t,n){for(var r,i,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){c.unshift(i);break}if(c[0]in n)o=c[0];else{for(i in n){if(!c[0]||e.converters[i+" "+c[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}function H(e,t,n,r){var i,o,a,s,c,l={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=u.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=l[c+" "+o]||l["* "+o]))for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[c+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}function W(e,t,n,r){var i;if(ie.isArray(t))ie.each(t,function(t,i){n||It.test(e)?r(e,i):W(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(i in t)W(e+"["+i+"]",t[i],n,r)}function K(e){return ie.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],X=e.document,$=Y.slice,Q=Y.concat,Z=Y.push,J=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,re={},ie=function(e,t){return new ie.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:"2.2.4",constructor:ie,selector:"",length:0,toArray:function(){return $.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:$.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ie.each(this,e)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:Z,sort:Y.sort,splice:Y.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,c=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||ie.isFunction(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(l&&r&&(ie.isPlainObject(r)||(i=ie.isArray(r)))?(i?(i=!1,o=n&&ie.isArray(n)?n:[]):o=n&&ie.isPlainObject(n)?n:{},a[t]=ie.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},ie.extend({expando:"jQuery"+("2.2.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ie.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=ie.trim(e))&&(1===e.indexOf("use strict")?(t=X.createElement("script"),t.text=e,X.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(ae,"ms-").replace(se,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,i=0;if(n(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ie.merge(r,"string"==typeof e?[e]:e):Z.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:J.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,r){var i,o,a=0,s=[];if(n(e))for(i=e.length;a<i;a++)null!=(o=t(e[a],a,r))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,r))&&s.push(o);return Q.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),ie.isFunction(e))return r=$.call(arguments,2),i=function(){return e.apply(t||this,r.concat($.call(arguments)))},i.guid=e.guid=e.guid||ie.guid++,i},now:Date.now,support:re}),"function"==typeof Symbol&&(ie.fn[Symbol.iterator]=Y[Symbol.iterator]),ie.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var le=function(e){function t(e,t,n,r){var i,o,a,s,l,d,p,h,f=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:R)!==L&&T(t),t=t||L,P)){if(11!==m&&(d=me.exec(e)))if(i=d[1]){if(9===m){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&N(t,a)&&a.id===i)return n.push(a),n}else{if(d[2])return $.apply(n,t.getElementsByTagName(e)),n;if((i=d[3])&&b.getElementsByClassName&&t.getElementsByClassName)return $.apply(n,t.getElementsByClassName(i)),n}if(b.qsa&&!G[e+" "]&&(!A||!A.test(e))){if(1!==m)f=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ye,"\\$&"):t.setAttribute("id",s=q),p=_(e),o=p.length,l=ue.test(s)?"#"+s:"[id='"+s+"']";o--;)p[o]=l+" "+u(p[o]);h=p.join(","),f=ge.test(e)&&c(t.parentNode)||t}if(h)try{return $.apply(n,f.querySelectorAll(h)),n}catch(e){}finally{s===q&&t.removeAttribute("id")}}}return M(e.replace(oe,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[q]=!0,e}function i(e){var t=L.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)x.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||H)-(~e.sourceIndex||H);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function l(){}function u(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=j++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,c,l,u=[B,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[q]||(t[q]={}),c=l[t.uniqueID]||(l[t.uniqueID]={}),(s=c[r])&&s[0]===B&&s[1]===o)return u[2]=s[2];if(c[r]=u,u[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function h(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function f(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,l=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function m(e,t,n,i,o,a){return i&&!i[q]&&(i=m(i)),o&&!o[q]&&(o=m(o,a)),r(function(r,a,s,c){var l,u,d,p=[],m=[],g=a.length,y=r||h(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?y:f(y,p,e,s,c),b=n?o||(r?e:g||i)?[]:a:v;if(n&&n(v,b,s,c),i)for(l=f(b,m),i(l,[],s,c),u=l.length;u--;)(d=l[u])&&(b[m[u]]=!(v[m[u]]=d));if(r){if(o||e){if(o){for(l=[],u=b.length;u--;)(d=b[u])&&l.push(v[u]=d);o(null,b=[],l,c)}for(u=b.length;u--;)(d=b[u])&&(l=o?Z(r,d):p[u])>-1&&(r[l]=!(a[l]=d))}}else b=f(b===a?b.splice(g,b.length):b),o?o(null,a,b,c):$.apply(a,b)})}function g(e){for(var t,n,r,i=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,c=d(function(e){return e===t},a,!0),l=d(function(e){return Z(t,e)>-1},a,!0),h=[function(e,n,r){var i=!o&&(r||n!==k)||((t=n).nodeType?c(e,n,r):l(e,n,r));return t=null,i}];s<i;s++)if(n=x.relative[e[s].type])h=[d(p(h),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[q]){for(r=++s;r<i&&!x.relative[e[r].type];r++);return m(s>1&&p(h),s>1&&u(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(oe,"$1"),n,s<r&&g(e.slice(s,r)),r<i&&g(e=e.slice(r)),r<i&&u(e))}h.push(n)}return p(h)}function y(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,c,l){var u,d,p,h=0,m="0",g=r&&[],y=[],v=k,b=r||o&&x.find.TAG("*",l),E=B+=null==v?1:Math.random()||.1,w=b.length;for(l&&(k=a===L||a||l);m!==w&&null!=(u=b[m]);m++){if(o&&u){for(d=0,a||u.ownerDocument===L||(T(u),s=!P);p=e[d++];)if(p(u,a||L,s)){c.push(u);break}l&&(B=E)}i&&((u=!p&&u)&&h--,r&&g.push(u))}if(h+=m,i&&m!==h){for(d=0;p=n[d++];)p(g,y,a,s);if(r){if(h>0)for(;m--;)g[m]||y[m]||(y[m]=Y.call(c));y=f(y)}$.apply(c,y),l&&!r&&y.length>0&&h+n.length>1&&t.uniqueSort(c)}return l&&(B=E,k=v),g};return i?r(a):a}var v,b,x,E,w,_,S,M,k,C,I,T,L,D,P,A,O,F,N,q="sizzle"+1*new Date,R=e.document,B=0,j=0,V=n(),U=n(),G=n(),z=function(e,t){return e===t&&(I=!0),0},H=1<<31,W={}.hasOwnProperty,K=[],Y=K.pop,X=K.push,$=K.push,Q=K.slice,Z=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",ie=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ce=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),le=new RegExp(re),ue=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ye=/'|\\/g,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=function(){T()};try{$.apply(K=Q.call(R.childNodes),R.childNodes),K[R.childNodes.length].nodeType}catch(e){$={apply:K.length?function(e,t){X.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}b=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:R;return r!==L&&9===r.nodeType&&r.documentElement?(L=r,D=L.documentElement,P=!w(L),(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",xe,!1):n.attachEvent&&n.attachEvent("onunload",xe)),b.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),b.getElementsByTagName=i(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),b.getElementsByClassName=fe.test(L.getElementsByClassName),b.getById=i(function(e){return D.appendChild(e).id=q,!L.getElementsByName||!L.getElementsByName(q).length}),b.getById?(x.find.ID=function(e,t){if(void 0!==t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}},x.filter.ID=function(e){var t=e.replace(ve,be);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(ve,be);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=b.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):b.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=b.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&P)return t.getElementsByClassName(e)},O=[],A=[],(b.qsa=fe.test(L.querySelectorAll))&&(i(function(e){D.appendChild(e).innerHTML="<a id='"+q+"'></a><select id='"+q+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&A.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||A.push("\\["+ee+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+q+"-]").length||A.push("~="),e.querySelectorAll(":checked").length||A.push(":checked"),e.querySelectorAll("a#"+q+"+*").length||A.push(".#.+[+~]")}),i(function(e){var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&A.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),A.push(",.*:")})),(b.matchesSelector=fe.test(F=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&i(function(e){b.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),O.push("!=",re)}),A=A.length&&new RegExp(A.join("|")),O=O.length&&new RegExp(O.join("|")),t=fe.test(D.compareDocumentPosition),N=t||fe.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},z=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!b.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===R&&N(R,e)?-1:t===L||t.ownerDocument===R&&N(R,t)?1:C?Z(C,e)-Z(C,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],c=[t];if(!i||!o)return e===L?-1:t===L?1:i?-1:o?1:C?Z(C,e)-Z(C,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;s[r]===c[r];)r++;return r?a(s[r],c[r]):s[r]===R?-1:c[r]===R?1:0},L):L},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==L&&T(e),n=n.replace(ce,"='$1']"),b.matchesSelector&&P&&!G[n+" "]&&(!O||!O.test(n))&&(!A||!A.test(n)))try{var r=F.call(e,n);if(r||b.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&T(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&T(e);var n=x.attrHandle[t.toLowerCase()],r=n&&W.call(x.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==r?r:b.attributes||!P?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(I=!b.detectDuplicates,C=!b.sortStable&&e.slice(0),e.sort(z),I){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return C=null,e},E=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=E(t);return n},x=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&le.test(n)&&(t=_(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&V(e,function(e){
return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ie," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,d,p,h,f,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!c&&!s,b=!1;if(g){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&v){for(p=g,d=p[q]||(p[q]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),l=u[e]||[],h=l[0]===B&&l[1],b=h&&l[2],p=h&&g.childNodes[h];p=++h&&p&&p[m]||(b=h=0)||f.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[B,h,b];break}}else if(v&&(p=t,d=p[q]||(p[q]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),l=u[e]||[],h=l[0]===B&&l[1],b=h),!1===b)for(;(p=++h&&p&&p[m]||(b=h=0)||f.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++b||(v&&(d=p[q]||(p[q]={}),u=d[p.uniqueID]||(d[p.uniqueID]={}),u[e]=[B,b]),p!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[q]?o(n):o.length>1?(i=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=Z(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=S(e.replace(oe,"$1"));return i[q]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ve,be),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:r(function(e){return ue.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,be).toLowerCase(),function(t){var n;do{if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},x.pseudos.nth=x.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[v]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(v);for(v in{submit:!0,reset:!0})x.pseudos[v]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(v);return l.prototype=x.filters=x.pseudos,x.setFilters=new l,_=t.tokenize=function(e,n){var r,i,o,a,s,c,l,u=U[e+" "];if(u)return n?0:u.slice(0);for(s=e,c=[],l=x.preFilter;s;){r&&!(i=ae.exec(s))||(i&&(s=s.slice(i[0].length)||s),c.push(o=[])),r=!1,(i=se.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(oe," ")}),s=s.slice(r.length));for(a in x.filter)!(i=de[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):U(e,c).slice(0)},S=t.compile=function(e,t){var n,r=[],i=[],o=G[e+" "];if(!o){for(t||(t=_(e)),n=t.length;n--;)o=g(t[n]),o[q]?r.push(o):i.push(o);o=G(e,y(i,r)),o.selector=e}return o},M=t.select=function(e,t,n,r){var i,o,a,s,l,d="function"==typeof e&&e,p=!r&&_(e=d.selector||e);if(n=n||[],1===p.length){if(o=p[0]=p[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&b.getById&&9===t.nodeType&&P&&x.relative[o[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(ve,be),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(a=o[i],!x.relative[s=a.type]);)if((l=x.find[s])&&(r=l(a.matches[0].replace(ve,be),ge.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&u(o)))return $.apply(n,r),n;break}}return(d||S(e,p))(r,t,!P,n,!t||ge.test(e)&&c(t.parentNode)||t),n},b.sortStable=q.split("").sort(z).join("")===q,b.detectDuplicates=!!I,T(),b.sortDetached=i(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),b.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(J,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=le,ie.expr=le.selectors,ie.expr[":"]=ie.expr.pseudos,ie.uniqueSort=ie.unique=le.uniqueSort,ie.text=le.getText,ie.isXMLDoc=le.isXML,ie.contains=le.contains;var ue=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&ie(e).is(n))break;r.push(e)}return r},de=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},pe=ie.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;t<n;t++)if(ie.contains(i[t],this))return!0}));for(t=0;t<n;t++)ie.find(e,i[t],r);return r=this.pushStack(n>1?ie.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&pe.test(e)?ie(e):e||[],!1).length}});var me,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ie.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||me,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ge.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:X,!0)),he.test(r[1])&&ie.isPlainObject(t))for(r in t)ie.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=X.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?void 0!==n.ready?n.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))}).prototype=ie.fn,me=ie(X);var ye=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};ie.fn.extend({has:function(e){var t=ie(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ie.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=pe.test(e)||"string"!=typeof e?ie(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ie.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?J.call(ie(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.uniqueSort(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ue(e,"parentNode")},parentsUntil:function(e,t,n){return ue(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ue(e,"nextSibling")},prevAll:function(e){return ue(e,"previousSibling")},nextUntil:function(e,t,n){return ue(e,"nextSibling",n)},prevUntil:function(e,t,n){return ue(e,"previousSibling",n)},siblings:function(e){return de((e.parentNode||{}).firstChild,e)},children:function(e){return de(e.firstChild)},contents:function(e){return e.contentDocument||ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(n,r){var i=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ie.filter(r,i)),this.length>1&&(ve[e]||ie.uniqueSort(i),ye.test(e)&&i.reverse()),this.pushStack(i)}});var be=/\S+/g;ie.Callbacks=function(e){e="string"==typeof e?o(e):ie.extend({},e);var t,n,r,i,a=[],s=[],c=-1,l=function(){for(i=e.once,r=t=!0;s.length;c=-1)for(n=s.shift();++c<a.length;)!1===a[c].apply(n[0],n[1])&&e.stopOnFalse&&(c=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},u={add:function(){return a&&(n&&!t&&(c=a.length-1,s.push(n)),function t(n){ie.each(n,function(n,r){ie.isFunction(r)?e.unique&&u.has(r)||a.push(r):r&&r.length&&"string"!==ie.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return ie.each(arguments,function(e,t){for(var n;(n=ie.inArray(t,a,n))>-1;)a.splice(n,1),n<=c&&c--}),this},has:function(e){return e?ie.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=s=[],n||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(n){ie.each(t,function(t,o){var a=ie.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,r):r}},i={};return r.pipe=r.then,ie.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=$.call(arguments),a=o.length,s=1!==a||e&&ie.isFunction(e.promise)?a:0,c=1===s?e:ie.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?$.call(arguments):i,r===t?c.notifyWith(n,r):--s||c.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&ie.isFunction(o[i].promise)?o[i].promise().progress(l(i,n,t)).done(l(i,r,o)).fail(c.reject):--s;return s||c.resolveWith(r,o),c.promise()}});var xe;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){(!0===e?--ie.readyWait:ie.isReady)||(ie.isReady=!0,!0!==e&&--ie.readyWait>0||(xe.resolveWith(X,[ie]),ie.fn.triggerHandler&&(ie(X).triggerHandler("ready"),ie(X).off("ready"))))}}),ie.ready.promise=function(t){return xe||(xe=ie.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?e.setTimeout(ie.ready):(X.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),xe.promise(t)},ie.ready.promise();var Ee=function(e,t,n,r,i,o,a){var s=0,c=e.length,l=null==n;if("object"===ie.type(n)){i=!0;for(s in n)Ee(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,ie.isFunction(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(ie(e),n)})),t))for(;s<c;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):c?t(e[0],n):o},we=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!we(e))return{};var t=e[this.expando];return t||(t={},we(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,ie.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{ie.isArray(t)?r=t.concat(t.map(ie.camelCase)):(i=ie.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(be)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===t||ie.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ie.isEmptyObject(t)}};var _e=new s,Se=new s,Me=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/[A-Z]/g;ie.extend({hasData:function(e){return Se.hasData(e)||_e.hasData(e)},data:function(e,t,n){return Se.access(e,t,n)},removeData:function(e,t){Se.remove(e,t)},_data:function(e,t,n){return _e.access(e,t,n)},_removeData:function(e,t){_e.remove(e,t)}}),ie.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Se.get(o),1===o.nodeType&&!_e.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=ie.camelCase(r.slice(5)),c(o,r,i[r])));_e.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Se.set(this,e)}):Ee(this,function(t){var n,r;if(o&&void 0===t){if(void 0!==(n=Se.get(o,e)||Se.get(o,e.replace(ke,"-$&").toLowerCase())))return n;if(r=ie.camelCase(e),void 0!==(n=Se.get(o,r)))return n;if(void 0!==(n=c(o,r,void 0)))return n}else r=ie.camelCase(e),this.each(function(){var n=Se.get(this,r);Se.set(this,r,t),e.indexOf("-")>-1&&void 0!==n&&Se.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Se.remove(this,e)})}}),ie.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=_e.get(e,t),n&&(!r||ie.isArray(n)?r=_e.access(e,t,ie.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,i=n.shift(),o=ie._queueHooks(e,t),a=function(){ie.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return _e.get(e,n)||_e.access(e,n,{empty:ie.Callbacks("once memory").add(function(){_e.remove(e,[t+"queue",n])})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ie.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=_e.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ie=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),Te=["Top","Right","Bottom","Left"],Le=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},De=/^(?:checkbox|radio)$/i,Pe=/<([\w:-]+)/,Ae=/^$|\/(?:java|ecma)script/i,Oe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Oe.optgroup=Oe.option,Oe.tbody=Oe.tfoot=Oe.colgroup=Oe.caption=Oe.thead,Oe.th=Oe.td;var Fe=/<|&#?\w+;/;!function(){var e=X.createDocumentFragment(),t=e.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),re.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ne=/^key/,qe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Re=/^([^.]*)(?:\.(.+)|)/;ie.event={global:{},add:function(e,t,n,r,i){var o,a,s,c,l,u,d,p,h,f,m,g=_e.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=ie.guid++),(c=g.events)||(c=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==ie&&ie.event.triggered!==t.type?ie.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(be)||[""],l=t.length;l--;)s=Re.exec(t[l])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h&&(d=ie.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,d=ie.event.special[h]||{},u=ie.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:f.join(".")},o),(p=c[h])||(p=c[h]=[],p.delegateCount=0,d.setup&&!1!==d.setup.call(e,r,f,a)||e.addEventListener&&e.addEventListener(h,a)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,u):p.push(u),ie.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,c,l,u,d,p,h,f,m,g=_e.hasData(e)&&_e.get(e);if(g&&(c=g.events)){for(t=(t||"").match(be)||[""],l=t.length;l--;)if(s=Re.exec(t[l])||[],h=m=s[1],f=(s[2]||"").split(".").sort(),h){for(d=ie.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,p=c[h]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)u=p[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(p.splice(o,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));a&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||ie.removeEvent(e,h,g.handle),delete c[h])}else for(h in c)ie.event.remove(e,h+t[l],n,r,!0);ie.isEmptyObject(c)&&_e.remove(e,"handle events")}},dispatch:function(e){e=ie.event.fix(e);var t,n,r,i,o,a=[],s=$.call(arguments),c=(_e.get(this,"events")||{})[e.type]||[],l=ie.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(a=ie.event.handlers.call(this,e,c),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((ie.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,c=e.target;if(s&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?ie(i,this).index(c)>-1:ie.find(i,this,null,[c]).length),r[i]&&r.push(o);r.length&&a.push({elem:c,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||X,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[ie.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=qe.test(i)?this.mouseHooks:Ne.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ie.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=X),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==m()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===m()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ie.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ie.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ie.Event=function(e,t){if(!(this instanceof ie.Event))return new ie.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?h:f):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),this[ie.expando]=!0},ie.Event.prototype={constructor:ie.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||ie.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ie.fn.extend({on:function(e,t,n,r){return g(this,e,t,n,r)},one:function(e,t,n,r){return g(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=f),this.each(function(){ie.event.remove(this,e,n,t)})}});var Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,je=/<script|<style|<link/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^true\/(.*)/,Ge=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ie.extend({htmlPrefilter:function(e){return e.replace(Be,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),c=ie.contains(e.ownerDocument,e);if(!(re.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(a=u(s),o=u(e),r=0,i=o.length;r<i;r++)E(o[r],a[r]);if(t)if(n)for(o=o||u(e),a=a||u(s),r=0,i=o.length;r<i;r++)x(o[r],a[r]);else x(e,s);return a=u(s,"script"),a.length>0&&d(a,!c&&u(e,"script")),s},cleanData:function(e){for(var t,n,r,i=ie.event.special,o=0;void 0!==(n=e[o]);o++)if(we(n)){if(t=n[_e.expando]){if(t.events)for(r in t.events)i[r]?ie.event.remove(n,r):ie.removeEvent(n,r,t.handle);n[_e.expando]=void 0}n[Se.expando]&&(n[Se.expando]=void 0)}}}),ie.fn.extend({domManip:w,detach:function(e){return _(this,e,!0)},remove:function(e){return _(this,e)},text:function(e){return Ee(this,function(e){return void 0===e?ie.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){y(this,e).appendChild(e)}})},prepend:function(){return w(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return w(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ie.cleanData(u(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return Ee(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!je.test(e)&&!Oe[(Pe.exec(e)||["",""])[1].toLowerCase()]){e=ie.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(ie.cleanData(u(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return w(this,arguments,function(t){var n=this.parentNode;ie.inArray(this,e)<0&&(ie.cleanData(u(this)),n&&n.replaceChild(t,this))},e)}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n,r=[],i=ie(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),ie(i[a])[t](n),Z.apply(r,n.get());return this.pushStack(r)}});var ze,He={HTML:"block",BODY:"block"},We=/^margin/,Ke=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),Ye=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Xe=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},$e=X.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",$e.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",i="4px"===t.marginRight,$e.removeChild(a)}var n,r,i,o,a=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ie.extend(re,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},pixelMarginRight:function(){return null==r&&t(),i},reliableMarginLeft:function(){return null==r&&t(),o},reliableMarginRight:function(){var t,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",$e.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),$e.removeChild(a),s.removeChild(n),t}}))}();var Qe=/^(none|table(?!-c[ea]).+)/,Ze={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:"0",fontWeight:"400"},et=["Webkit","O","Moz","ms"],tt=X.createElement("div").style;ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=k(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ie.camelCase(t),c=e.style;if(t=ie.cssProps[s]||(ie.cssProps[s]=I(s)||s),a=ie.cssHooks[t]||ie.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];o=typeof n,"string"===o&&(i=Ie.exec(n))&&i[1]&&(n=l(e,t,i),o="number"),null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(ie.cssNumber[s]?"":"px")),re.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=ie.camelCase(t);return t=ie.cssProps[s]||(ie.cssProps[s]=I(s)||s),a=ie.cssHooks[t]||ie.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=k(e,t,r)),"normal"===i&&t in Je&&(i=Je[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){if(n)return Qe.test(ie.css(e,"display"))&&0===e.offsetWidth?Xe(e,Ze,function(){return D(e,t,r)}):D(e,t,r)},set:function(e,n,r){var i,o=r&&Ye(e),a=r&&L(e,t,r,"border-box"===ie.css(e,"boxSizing",!1,o),o);return a&&(i=Ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=ie.css(e,t)),T(e,n,a)}}}),ie.cssHooks.marginLeft=C(re.reliableMarginLeft,function(e,t){if(t)return(parseFloat(k(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ie.cssHooks.marginRight=C(re.reliableMarginRight,function(e,t){if(t)return Xe(e,{display:"inline-block"},k,[e,"marginRight"])}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Te[r]+t]=o[r]||o[r-2]||o[0];return i}},We.test(e)||(ie.cssHooks[e+t].set=T)}),ie.fn.extend({css:function(e,t){return Ee(this,function(e,t,n){var r,i,o={},a=0;if(ie.isArray(t)){for(r=Ye(e),i=t.length;a<i;a++)o[t[a]]=ie.css(e,t[a],!1,r);return o}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Le(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=A,A.prototype={constructor:A,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||ie.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,
this.unit=o||(ie.cssNumber[n]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,n=A.propHooks[this.prop];return this.options.duration?this.pos=t=ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ie.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ie.cssProps[e.prop]]&&!ie.cssHooks[e.prop]?e.elem[e.prop]=e.now:ie.style(e.elem,e.prop,e.now+e.unit)}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ie.fx=A.prototype.init,ie.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;ie.Animation=ie.extend(B,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return l(n.elem,e,Ie.exec(t),n),n}]},tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.match(be);for(var n,r=0,i=e.length;r<i;r++)n=e[r],B.tweeners[n]=B.tweeners[n]||[],B.tweeners[n].unshift(t)},prefilters:[q],prefilter:function(e,t){t?B.prefilters.unshift(e):B.prefilters.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return r.duration=ie.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ie.isEmptyObject(e),o=ie.speed(t,n,r),a=function(){var t=B(this,ie.extend({},e),o);(i||_e.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ie.timers,a=_e.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||ie.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=_e.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ie.timers,a=r?r.length:0;for(n.finish=!0,ie.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(F(t,!0),e,r,i)}}),ie.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e,t=0,n=ie.timers;for(nt=ie.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||ie.fx.stop(),nt=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){rt||(rt=e.setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){e.clearInterval(rt),rt=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(t,n){return t=ie.fx?ie.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=X.createElement("input"),t=X.createElement("select"),n=t.appendChild(X.createElement("option"));e.type="checkbox",re.checkOn=""!==e.value,re.optSelected=n.selected,t.disabled=!0,re.optDisabled=!n.disabled,e=X.createElement("input"),e.value="t",e.type="radio",re.radioValue="t"===e.value}();var at,st=ie.expr.attrHandle;ie.fn.extend({attr:function(e,t){return Ee(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?ie.prop(e,t,n):(1===o&&ie.isXMLDoc(e)||(t=t.toLowerCase(),i=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?at:void 0)),void 0!==n?null===n?void ie.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=ie.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!re.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(be);if(o&&1===e.nodeType)for(;n=o[i++];)r=ie.propFix[n]||n,ie.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),at={set:function(e,t,n){return!1===t?ie.removeAttr(e,n):e.setAttribute(n,n),n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=st[t]||ie.find.attr;st[t]=function(e,t,r){var i,o;return r||(o=st[t],st[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,st[t]=o),i}});var ct=/^(?:input|select|textarea|button)$/i,lt=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return Ee(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ie.propFix[e]||e]})}}),ie.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ie.isXMLDoc(e)||(t=ie.propFix[t]||t,i=ie.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||lt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this});var ut=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,c=0;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,j(this)))});if("string"==typeof e&&e)for(t=e.match(be)||[];n=this[c++];)if(i=j(n),r=1===n.nodeType&&(" "+i+" ").replace(ut," ")){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=ie.trim(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,c=0;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,j(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(be)||[];n=this[c++];)if(i=j(n),r=1===n.nodeType&&(" "+i+" ").replace(ut," ")){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=ie.trim(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each(function(n){ie(this).toggleClass(e.call(this,n,j(this),t),t)}):this.each(function(){var t,r,i,o;if("string"===n)for(r=0,i=ie(this),o=e.match(be)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==n||(t=j(this),t&&_e.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":_e.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+j(n)+" ").replace(ut," ").indexOf(t)>-1)return!0;return!1}});var dt=/\r/g,pt=/[\x20\t\r\n\f]+/g;ie.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ie.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ie(this).val()):e,null==i?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(e){return null==e?"":e+""})),(t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(dt,""):null==n?"":n)}}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e)).replace(pt," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,c=i<0?s:o?i:0;c<s;c++)if(n=r[c],(n.selected||c===i)&&(re.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ie.nodeName(n.parentNode,"optgroup"))){if(t=ie(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=ie.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=ie.inArray(ie.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){if(ie.isArray(t))return e.checked=ie.inArray(ie(e).val(),t)>-1}},re.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ht=/^(?:focusinfocus|focusoutblur)$/;ie.extend(ie.event,{trigger:function(t,n,r,i){var o,a,s,c,l,u,d,p=[r||X],h=ne.call(t,"type")?t.type:t,f=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||X,3!==r.nodeType&&8!==r.nodeType&&!ht.test(h+ie.event.triggered)&&(h.indexOf(".")>-1&&(f=h.split("."),h=f.shift(),f.sort()),l=h.indexOf(":")<0&&"on"+h,t=t[ie.expando]?t:new ie.Event(h,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),d=ie.event.special[h]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!ie.isWindow(r)){for(c=d.delegateType||h,ht.test(c+h)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||X)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?c:d.bindType||h,u=(_e.get(a,"events")||{})[t.type]&&_e.get(a,"handle"),u&&u.apply(a,n),(u=l&&a[l])&&u.apply&&we(a)&&(t.result=u.apply(a,n),!1===t.result&&t.preventDefault());return t.type=h,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),n)||!we(r)||l&&ie.isFunction(r[h])&&!ie.isWindow(r)&&(s=r[l],s&&(r[l]=null),ie.event.triggered=h,r[h](),ie.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(e,t,n){var r=ie.extend(new ie.Event,n,{type:e,isSimulated:!0});ie.event.trigger(r,null,t)}}),ie.fn.extend({trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ie.event.trigger(e,t,n,!0)}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),re.focusin="onfocusin"in e,re.focusin||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e))};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=_e.access(r,t);i||r.addEventListener(e,n,!0),_e.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=_e.access(r,t)-1;i?_e.access(r,t,i):(r.removeEventListener(e,n,!0),_e.remove(r,t))}}});var ft=e.location,mt=ie.now(),gt=/\?/;ie.parseJSON=function(e){return JSON.parse(e+"")},ie.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var yt=/#.*$/,vt=/([?&])_=[^&]*/,bt=/^(.*?):[ \t]*([^\r\n]*)$/gm,xt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Et=/^(?:GET|HEAD)$/,wt=/^\/\//,_t={},St={},Mt="*/".concat("*"),kt=X.createElement("a");kt.href=ft.href,ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ft.href,type:"GET",isLocal:xt.test(ft.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?G(G(e,ie.ajaxSettings),t):G(ie.ajaxSettings,e)},ajaxPrefilter:V(_t),ajaxTransport:V(St),ajax:function(t,n){function r(t,n,r,s){var l,d,v,b,E,_=n;2!==x&&(x=2,c&&e.clearTimeout(c),i=void 0,a=s||"",w.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=z(p,w,r)),b=H(p,b,w,l),l?(p.ifModified&&(E=w.getResponseHeader("Last-Modified"),E&&(ie.lastModified[o]=E),(E=w.getResponseHeader("etag"))&&(ie.etag[o]=E)),204===t||"HEAD"===p.type?_="nocontent":304===t?_="notmodified":(_=b.state,d=b.data,v=b.error,l=!v)):(v=_,!t&&_||(_="error",t<0&&(t=0))),w.status=t,w.statusText=(n||_)+"",l?m.resolveWith(h,[d,_,w]):m.rejectWith(h,[w,_,v]),w.statusCode(y),y=void 0,u&&f.trigger(l?"ajaxSuccess":"ajaxError",[w,p,l?d:v]),g.fireWith(h,[w,_]),u&&(f.trigger("ajaxComplete",[w,p]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,c,l,u,d,p=ie.ajaxSetup({},n),h=p.context||p,f=p.context&&(h.nodeType||h.jquery)?ie(h):ie.event,m=ie.Deferred(),g=ie.Callbacks("once memory"),y=p.statusCode||{},v={},b={},x=0,E="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=bt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(x<2)for(t in e)y[t]=[y[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||E;return i&&i.abort(t),r(0,t),this}};if(m.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,p.url=((t||p.url||ft.href)+"").replace(yt,"").replace(wt,ft.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=ie.trim(p.dataType||"*").toLowerCase().match(be)||[""],null==p.crossDomain){l=X.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=kt.protocol+"//"+kt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ie.param(p.data,p.traditional)),U(_t,p,n,w),2===x)return w;u=ie.event&&p.global,u&&0==ie.active++&&ie.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Et.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(gt.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=vt.test(o)?o.replace(vt,"$1_="+mt++):o+(gt.test(o)?"&":"?")+"_="+mt++)),p.ifModified&&(ie.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ie.lastModified[o]),ie.etag[o]&&w.setRequestHeader("If-None-Match",ie.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&w.setRequestHeader("Content-Type",p.contentType),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Mt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)w.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(h,w,p)||2===x))return w.abort();E="abort";for(d in{success:1,error:1,complete:1})w[d](p[d]);if(i=U(St,p,n,w)){if(w.readyState=1,u&&f.trigger("ajaxSend",[w,p]),2===x)return w;p.async&&p.timeout>0&&(c=e.setTimeout(function(){w.abort("timeout")},p.timeout));try{x=1,i.send(v,r)}catch(e){if(!(x<2))throw e;r(-1,e)}}else r(-1,"No Transport");return w},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,i){return ie.isFunction(n)&&(i=i||r,r=n,n=void 0),ie.ajax(ie.extend({url:e,type:t,dataType:i,data:n,success:r},ie.isPlainObject(e)&&e))}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ie.fn.extend({wrapAll:function(e){var t;return ie.isFunction(e)?this.each(function(t){ie(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ie(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ie.isFunction(e)?this.each(function(t){ie(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return!ie.expr.filters.visible(e)},ie.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Ct=/%20/g,It=/\[\]$/,Tt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],i=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){i(this.name,this.value)});else for(n in e)W(n,e[n],t,i);return r.join("&").replace(Ct,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&Dt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!De.test(e))}).map(function(e,t){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(e){return{name:t.name,value:e.replace(Tt,"\r\n")}}):{name:t.name,value:n.replace(Tt,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Pt={0:200,1223:204},At=ie.ajaxSettings.xhr();re.cors=!!At&&"withCredentials"in At,re.ajax=At=!!At,ie.ajaxTransport(function(t){var n,r;if(re.cors||At&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Pt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=ie("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),X.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ot=[],Ft=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||ie.expando+"_"+mt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Ft.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ft.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ft,"$1"+i):!1!==t.jsonp&&(t.url+=(gt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||ie.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?ie(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ot.push(i)),a&&ie.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),ie.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var r=he.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p([e],t,i),i&&i.length&&ie(i).remove(),ie.merge([],r.childNodes))};var Nt=ie.fn.load;ie.fn.load=function(e,t,n){if("string"!=typeof e&&Nt)return Nt.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=ie.trim(e.slice(s)),e=e.slice(0,s)),ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&ie.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?ie("<div>").append(ie.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length},ie.offset={setOffset:function(e,t,n){var r,i,o,a,s,c,l,u=ie.css(e,"position"),d=ie(e),p={};"static"===u&&(e.style.position="relative"),s=d.offset(),o=ie.css(e,"top"),c=ie.css(e,"left"),l=("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1,l?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(c)||0),ie.isFunction(t)&&(t=t.call(e,n,ie.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):d.css(p)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,ie.contains(t,r)?(i=r.getBoundingClientRect(),n=K(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===ie.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(r=e.offset()),r.top+=ie.css(e[0],"borderTopWidth",!0),r.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-ie.css(n,"marginTop",!0),left:t.left-r.left-ie.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||$e})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ie.fn[e]=function(r){return Ee(this,function(e,r,i){var o=K(e);if(void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=C(re.pixelPosition,function(e,n){if(n)return n=k(e,t),Ke.test(n)?ie(e).position()[t]+"px":n})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return Ee(this,function(t,n,r){var i;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ie.css(t,n,a):ie.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),ie.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var qt=e.jQuery,Rt=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=Rt),t&&e.jQuery===ie&&(e.jQuery=qt),ie},t||(e.jQuery=e.$=ie),ie}),define("keys",["require"],function(e){return new function(){var e={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},t={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN};this.isUndo=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&90==e.which&&!e.shiftKey},this.isRedo=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&(89==e.which||90==e.which&&e.shiftKey)},this.isSelectAll=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&65==e.which},this.isBacktick=function(e){return!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||192!=e.which)},this.isHelp=function(e){return!e.altKey&&(e.ctrlKey||e.metaKey)&&191==e.which},this.lookup=function(n){return e[n.which]||t[n.key]},this.lookupChar=function(e){return String.fromCharCode(e.which)}}}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("underscore",t):function(){var n=e._,r=t();e._=r,r.noConflict=function(){return e._=n,r}}()}(this,function(){function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)}function t(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}}function n(e,n,r){return null==e?Le:Bt(e)?t(e,n,r):_e(e)&&!qt(e)?Fe(e):Ae(e)}function r(e,t){return n(e,t,1/0)}function i(t,i,o){return e.iteratee!==r?e.iteratee(t,i):n(t,i,o)}function o(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}function a(e){if(!_e(e))return{};if(tt)return tt(e);it.prototype=e;var t=new it;return it.prototype=null,t}function s(e){return function(t){return null==t?void 0:t[e]}}function c(e,t){return null!=e&&Ze.call(e,t)}function l(e,t){for(var n=t.length,r=0;r<n;r++){if(null==e)return;e=e[t[r]]}return n?e:void 0}function u(e){var t=st(e);return"number"==typeof t&&t>=0&&t<=at}function d(e,n,r){n=t(n,r);var i,o;if(u(e))for(i=0,o=e.length;i<o;i++)n(e[i],i,e);else{var a=re(e);for(i=0,o=a.length;i<o;i++)n(e[a[i]],a[i],e)}return e}function p(e,t,n){t=i(t,n);for(var r=!u(e)&&re(e),o=(r||e).length,a=Array(o),s=0;s<o;s++){var c=r?r[s]:s;a[s]=t(e[c],c,e)}return a}function h(e){var n=function(t,n,r,i){var o=!u(t)&&re(t),a=(o||t).length,s=e>0?0:a-1;for(i||(r=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var c=o?o[s]:s;r=n(r,t[c],c,t)}return r};return function(e,r,i,o){var a=arguments.length>=3;return n(e,t(r,o,4),i,a)}}function f(e,t,n){var r=u(e)?xt:de,i=r(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function m(e,t,n){var r=[];return t=i(t,n),d(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function g(e,t,n){return m(e,Z(i(t)),n)}function y(e,t,n){t=i(t,n);for(var r=!u(e)&&re(e),o=(r||e).length,a=0;a<o;a++){var s=r?r[a]:a;if(!t(e[s],s,e))return!1}return!0}function v(e,t,n){t=i(t,n);for(var r=!u(e)&&re(e),o=(r||e).length,a=0;a<o;a++){var s=r?r[a]:a;if(t(e[s],s,e))return!0}return!1}function b(e,t,n,r){return u(e)||(e=oe(e)),("number"!=typeof n||r)&&(n=0),wt(e,t,n)>=0}function x(e,t){return p(e,Ae(t))}function E(e,t){return m(e,Fe(t))}function w(e,t){return f(e,Fe(t))}function _(e,t,n){var r,o,a=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=u(e)?e:oe(e);for(var c=0,l=e.length;c<l;c++)null!=(r=e[c])&&r>a&&(a=r)}else t=i(t,n),d(e,function(e,n,r){((o=t(e,n,r))>s||o===-1/0&&a===-1/0)&&(a=e,s=o)});return a}function S(e,t,n){var r,o,a=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=u(e)?e:oe(e);for(var c=0,l=e.length;c<l;c++)null!=(r=e[c])&&r<a&&(a=r)}else t=i(t,n),d(e,function(e,n,r){((o=t(e,n,r))<s||o===1/0&&a===1/0)&&(a=e,s=o)});return a}function M(e){return k(e,1/0)}function k(e,t,n){if(null==t||n)return u(e)||(e=oe(e)),e[qe(e.length-1)];var r=u(e)?fe(e):oe(e),i=st(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=qe(a,o),c=r[a];r[a]=r[s],r[s]=c}return r.slice(0,t)}function C(e,t,n){var r=0;return t=i(t,n),x(p(e,function(e,n,i){return{value:e,index:r++,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")}function I(e,t){return function(n,r,o){var a=t?[[],[]]:{};return r=i(r,o),d(n,function(t,i){var o=r(t,i,n);e(a,t,o)}),a}}function T(e){return e?qt(e)?$e.call(e):jt(e)?e.match(ft):u(e)?p(e,Le):oe(e):[]}function L(e){return null==e?0:u(e)?e.length:re(e).length}function D(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:P(e,e.length-t)}function P(e,t,n){return $e.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function A(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:O(e,Math.max(0,e.length-t))}function O(e,t,n){return $e.call(e,null==t||n?1:t)}function F(e){return m(e,Boolean)}function N(e,t,n,r){r=r||[];for(var i=r.length,o=0,a=st(e);o<a;o++){var s=e[o];if(u(s)&&(qt(s)||Rt(s)))if(t)for(var c=0,l=s.length;c<l;)r[i++]=s[c++];else N(s,t,n,r),i=r.length;else n||(r[i++]=s)}return r}function q(e,t){return N(e,t,!1)}function R(e,t,n,r){ke(t)||(r=n,n=t,t=!1),null!=n&&(n=i(n,r));for(var o=[],a=[],s=0,c=st(e);s<c;s++){var l=e[s],u=n?n(l,s,e):l;t&&!n?(s&&a===u||o.push(l),a=u):n?b(a,u)||(a.push(u),o.push(l)):b(o,l)||o.push(l)}return o}function B(e){for(var t=[],n=arguments.length,r=0,i=st(e);r<i;r++){var o=e[r];if(!b(t,o)){
var a;for(a=1;a<n&&b(arguments[a],o);a++);a===n&&t.push(o)}}return t}function j(e){for(var t=e&&_(e,st).length||0,n=Array(t),r=0;r<t;r++)n[r]=x(e,r);return n}function V(e,t){for(var n={},r=0,i=st(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function U(e){return function(t,n,r){n=i(n,r);for(var o=st(t),a=e>0?0:o-1;a>=0&&a<o;a+=e)if(n(t[a],a,t))return a;return-1}}function G(e,t,n,r){n=i(n,r,1);for(var o=n(t),a=0,s=st(e);a<s;){var c=Math.floor((a+s)/2);n(e[c])<o?a=c+1:s=c}return a}function z(e,t,n){return function(r,i,o){var a=0,s=st(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t($e.call(r,a,s),Me),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}function H(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}function W(e,t){if(null==t||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push($e.call(e,r,r+=t));return n}function K(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=a(e.prototype),s=e.apply(o,i);return _e(s)?s:o}function Y(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return c(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n}function X(e,t,n){var r,i,o,a,s=0;n||(n={});var c=function(){s=!1===n.leading?0:Qt(),r=null,a=e.apply(i,o),r||(i=o=null)},l=function(){var l=Qt();s||!1!==n.leading||(s=l);var u=t-(l-s);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=l,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(c,u)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l}function $(e,t,n){var r,i,a=function(t,n){r=null,n&&(i=e.apply(t,n))},s=o(function(o){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(a,t),s&&(i=e.apply(this,o))}else r=Ct(a,t,this,o);return i});return s.cancel=function(){clearTimeout(r),r=null},s}function Q(e,t){return Mt(t,e)}function Z(e){return function(){return!e.apply(this,arguments)}}function J(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function ee(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function te(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}function ne(e,t){var n=Dt.length,r=e.constructor,i=Bt(r)&&r.prototype||Ke,o="constructor";for(c(e,o)&&!b(t,o)&&t.push(o);n--;)(o=Dt[n])in e&&e[o]!==i[o]&&!b(t,o)&&t.push(o)}function re(e){if(!_e(e))return[];if(et)return et(e);var t=[];for(var n in e)c(e,n)&&t.push(n);return Lt&&ne(e,t),t}function ie(e){if(!_e(e))return[];var t=[];for(var n in e)t.push(n);return Lt&&ne(e,t),t}function oe(e){for(var t=re(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function ae(e,t,n){t=i(t,n);for(var r=re(e),o=r.length,a={},s=0;s<o;s++){var c=r[s];a[c]=t(e[c],c,e)}return a}function se(e){for(var t=re(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function ce(e){for(var t={},n=re(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function le(e){var t=[];for(var n in e)Bt(e[n])&&t.push(n);return t.sort()}function ue(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,c=0;c<s;c++){var l=a[c];t&&void 0!==n[l]||(n[l]=o[l])}return n}}function de(e,t,n){t=i(t,n);for(var r,o=re(e),a=0,s=o.length;a<s;a++)if(r=o[a],t(e[r],r,e))return r}function pe(e,t,n){return t in n}function he(e,t){var n=a(e);return t&&At(n,t),n}function fe(e){return _e(e)?qt(e)?e.slice():Pt({},e):e}function me(e,t){return t(e),e}function ge(e,t){var n=re(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0}function ye(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&ve(e,t,n,r)}function ve(t,n,r,i){t instanceof e&&(t=t._wrapped),n instanceof e&&(n=n._wrapped);var o=Qe.call(t);if(o!==Qe.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return Ye.valueOf.call(t)===Ye.valueOf.call(n)}var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof n)return!1;var s=t.constructor,l=n.constructor;if(s!==l&&!(Bt(s)&&s instanceof s&&Bt(l)&&l instanceof l)&&"constructor"in t&&"constructor"in n)return!1}r=r||[],i=i||[];for(var u=r.length;u--;)if(r[u]===t)return i[u]===n;if(r.push(t),i.push(n),a){if((u=t.length)!==n.length)return!1;for(;u--;)if(!ye(t[u],n[u],r,i))return!1}else{var d,p=re(t);if(u=p.length,re(n).length!==u)return!1;for(;u--;)if(d=p[u],!c(n,d)||!ye(t[d],n[d],r,i))return!1}return r.pop(),i.pop(),!0}function be(e,t){return ye(e,t)}function xe(e){return null==e||(u(e)&&(qt(e)||jt(e)||Rt(e))?0===e.length:0===re(e).length)}function Ee(e){return!(!e||1!==e.nodeType)}function we(e){return function(t){return Qe.call(t)==="[object "+e+"]"}}function _e(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function Se(e){return!Ht(e)&&rt(e)&&!nt(parseFloat(e))}function Me(e){return Vt(e)&&nt(e)}function ke(e){return!0===e||!1===e||"[object Boolean]"===Qe.call(e)}function Ce(e){return null===e}function Ie(e){return void 0===e}function Te(e,t){if(!qt(t))return c(e,t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(null==e||!Ze.call(e,i))return!1;e=e[i]}return!!n}function Le(e){return e}function De(e){return function(){return e}}function Pe(){}function Ae(e){return qt(e)?function(t){return l(t,e)}:s(e)}function Oe(e){return null==e?function(){}:function(t){return qt(t)?l(e,t):e[t]}}function Fe(e){return e=At({},e),function(t){return ge(t,e)}}function Ne(e,n,r){var i=Array(Math.max(0,e));n=t(n,r,1);for(var o=0;o<e;o++)i[o]=n(o);return i}function qe(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}function Re(e){var t=function(t){return e[t]},n="(?:"+re(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}}function Be(e,t,n){qt(t)||(t=[t]);var r=t.length;if(!r)return Bt(n)?n.call(e):n;for(var i=0;i<r;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=n,i=r),e=Bt(o)?o.call(e):o}return e}function je(e){var t=++nn+"";return e?e+t:t}function Ve(t,n,r){!n&&r&&(n=r),n=Nt({},n,e.templateSettings);var i=RegExp([(n.escape||on).source,(n.interpolate||on).source,(n.evaluate||on).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,n,r,i,s){return a+=t.slice(o,s).replace(sn,cn),o=s+e.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";var s;try{s=new Function(n.variable||"obj","_",a)}catch(e){throw e.source=a,e}var c=function(t){return s.call(this,t,e)};return c.source="function("+(n.variable||"obj")+"){\n"+a+"}",c}function Ue(t){var n=e(t);return n._chain=!0,n}function Ge(t,n){return t._chain?e(n).chain():n}function ze(t){return d(le(t),function(n){var r=e[n]=t[n];e.prototype[n]=function(){var t=[this._wrapped];return Xe.apply(t,arguments),Ge(this,r.apply(e,t))}}),e}var He="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},We=Array.prototype,Ke=Object.prototype,Ye="undefined"!=typeof Symbol?Symbol.prototype:null,Xe=We.push,$e=We.slice,Qe=Ke.toString,Ze=Ke.hasOwnProperty,Je=Array.isArray,et=Object.keys,tt=Object.create,nt=He.isNaN,rt=He.isFinite,it=function(){},ot=e.VERSION="1.10.2";e.iteratee=r;var at=Math.pow(2,53)-1,st=s("length"),ct=h(1),lt=h(-1),ut=o(function(e,t,n){var r,i;return Bt(t)?i=t:qt(t)&&(r=t.slice(0,-1),t=t[t.length-1]),p(e,function(e){var o=i;if(!o){if(r&&r.length&&(e=l(e,r)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)})}),dt=I(function(e,t,n){c(e,n)?e[n].push(t):e[n]=[t]}),pt=I(function(e,t,n){e[n]=t}),ht=I(function(e,t,n){c(e,n)?e[n]++:e[n]=1}),ft=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,mt=I(function(e,t,n){e[n?0:1].push(t)},!0),gt=o(function(e,t){return vt(e,t)}),yt=o(function(e){return R(N(e,!0,!0))}),vt=o(function(e,t){return t=N(t,!0,!0),m(e,function(e){return!b(t,e)})}),bt=o(j),xt=U(1),Et=U(-1),wt=z(1,xt,G),_t=z(-1,Et),St=o(function(e,t,n){if(!Bt(e))throw new TypeError("Bind must be called on a function");var r=o(function(i){return K(e,r,t,this,n.concat(i))});return r}),Mt=o(function(e,t){var n=Mt.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return K(e,r,this,this,a)};return r});Mt.placeholder=e;var kt=o(function(e,t){t=N(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=St(e[r],e)}}),Ct=o(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),It=Mt(Ct,e,1),Tt=Mt(te,2),Lt=!{toString:null}.propertyIsEnumerable("toString"),Dt=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Pt=ue(ie),At=ue(re),Ot=o(function(e,n){var r={},i=n[0];if(null==e)return r;Bt(i)?(n.length>1&&(i=t(i,n[1])),n=ie(e)):(i=pe,n=N(n,!1,!1),e=Object(e));for(var o=0,a=n.length;o<a;o++){var s=n[o],c=e[s];i(c,s,e)&&(r[s]=c)}return r}),Ft=o(function(e,t){var n,r=t[0];return Bt(r)?(r=Z(r),t.length>1&&(n=t[1])):(t=p(N(t,!1,!1),String),r=function(e,n){return!b(t,n)}),Ot(e,r,n)}),Nt=ue(ie,!0),qt=Je||we("Array"),Rt=we("Arguments"),Bt=we("Function"),jt=we("String"),Vt=we("Number"),Ut=we("Date"),Gt=we("RegExp"),zt=we("Error"),Ht=we("Symbol"),Wt=we("Map"),Kt=we("WeakMap"),Yt=we("Set"),Xt=we("WeakSet");!function(){Rt(arguments)||(Rt=function(e){return c(e,"callee")})}();var $t=He.document&&He.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof $t&&(Bt=function(e){return"function"==typeof e||!1});var Qt=Date.now||function(){return(new Date).getTime()},Zt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Jt=ce(Zt),en=Re(Zt),tn=Re(Jt),nn=0,rn=e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},on=/(.)^/,an={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},sn=/\\|'|\r|\n|\u2028|\u2029/g,cn=function(e){return"\\"+an[e]};d(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=We[t];e.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],Ge(this,e)}}),d(["concat","join","slice"],function(t){var n=We[t];e.prototype[t]=function(){return Ge(this,n.apply(this._wrapped,arguments))}}),e.prototype.value=function(){return this._wrapped},e.prototype.valueOf=e.prototype.toJSON=e.prototype.value,e.prototype.toString=function(){return String(this._wrapped)};var ln={default:e,VERSION:ot,iteratee:r,restArguments:o,each:d,forEach:d,map:p,collect:p,reduce:ct,foldl:ct,inject:ct,reduceRight:lt,foldr:lt,find:f,detect:f,filter:m,select:m,reject:g,every:y,all:y,some:v,any:v,contains:b,includes:b,include:b,invoke:ut,pluck:x,where:E,findWhere:w,max:_,min:S,shuffle:M,sample:k,sortBy:C,groupBy:dt,indexBy:pt,countBy:ht,toArray:T,size:L,partition:mt,first:D,head:D,take:D,initial:P,last:A,rest:O,tail:O,drop:O,compact:F,flatten:q,without:gt,uniq:R,unique:R,union:yt,intersection:B,difference:vt,unzip:j,zip:bt,object:V,findIndex:xt,findLastIndex:Et,sortedIndex:G,indexOf:wt,lastIndexOf:_t,range:H,chunk:W,bind:St,partial:Mt,bindAll:kt,memoize:Y,delay:Ct,defer:It,throttle:X,debounce:$,wrap:Q,negate:Z,compose:J,after:ee,before:te,once:Tt,keys:re,allKeys:ie,values:oe,mapObject:ae,pairs:se,invert:ce,functions:le,methods:le,extend:Pt,extendOwn:At,assign:At,findKey:de,pick:Ot,omit:Ft,defaults:Nt,create:he,clone:fe,tap:me,isMatch:ge,isEqual:be,isEmpty:xe,isElement:Ee,isArray:qt,isObject:_e,isArguments:Rt,isFunction:Bt,isString:jt,isNumber:Vt,isDate:Ut,isRegExp:Gt,isError:zt,isSymbol:Ht,isMap:Wt,isWeakMap:Kt,isSet:Yt,isWeakSet:Xt,isFinite:Se,isNaN:Me,isBoolean:ke,isNull:Ce,isUndefined:Ie,has:Te,identity:Le,constant:De,noop:Pe,property:Ae,propertyOf:Oe,matcher:Fe,matches:Fe,times:Ne,random:qe,now:Qt,escape:en,unescape:tn,result:Be,uniqueId:je,templateSettings:rn,template:Ve,chain:Ue,mixin:ze},un=ze(ln);return un._=un,un}),define("lib/inject-css",["require","underscore"],function(e){"use strict";function t(e,t){var o=r[e];if(!o){o=document.createElement("style"),r[e]=o;var a=n.sortedIndex(i,e),s=r[i[a]];s?document.head.insertBefore(o,s):document.head.appendChild(o),i.splice(a,0,e)}o.textContent=t}var n=e("underscore"),r={},i=[];return t}),define("vendor/css",{}),define("lib/prefix-css",["require","vendor/css"],function(e){"use strict";function t(e,t){if(t){var i="."+t;return n(i),r(e,i)}return e}function n(e){if(!/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/.test(e))throw new Error("Illegal css selector prefix "+e)}function r(e,t){var n=s.parse(e),r=Object.assign({},n,{stylesheet:i(n.stylesheet,t)});return s.stringify(r)}function i(e,t){return Object.assign({},e,{rules:o(e.rules,t)})}function o(e,t){return e.map(function(e){return e.rules?Object.assign({},e,{rules:o(e.rules,t)}):e.selectors?Object.assign({},e,{selectors:a(e.selectors,t)}):e})}function a(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if("html"===i)n.push(i);else if(/dcg(-mq)?-aria-alert/.test(i))n.push(i);else if(/^html body( |$)/.test(i))n.push("html"+t+" body"+i.slice("html body".length)),n.push("html body "+t+i.slice("html body".length));else{if(/^html/.test(i))throw new Error("Cannot correctly prefix selector "+i);n.push(t+" "+i)}}return n}var s=e("vendor/css");return t}),define("loadcss",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("loadcss!touchtracking",function(){}),define("touchtracking",["require","jquery","ipad.ghostevents","keys","loadcss!./touchtracking"],function(e){function t(e,t){var r=N?{passive:!1}:void 0;document.addEventListener(e,function(e){t(n.event.fix(e))},r)}var n=e("jquery"),r=e("ipad.ghostevents"),i=e("keys");e("loadcss!./touchtracking"),void 0==window._touchtracking_id_counter&&(window._touchtracking_id_counter=0),window._touchtracking_id_counter+=1;var o="touchtracking_id_"+window._touchtracking_id_counter,a=function(e){n(e).addClass("dcg-tap-container"),n(e).addClass(o)},s=function(e){n(e).addClass("dcg-no-touchtracking")};r.evtInScope=function(e){return _(e.target)},r.isGhostEvent=function(e){return!window.PointerEvent&&(!(u!==c&&u!==l&&!k())&&(e.target!==g&&((!e.target||!n.contains(e.target,g))&&(!g||!n.contains(g,e.target)))))};var c=1,l=4,u=0,d={},p={},h=[],f=0,m=null,g=null,y=null,v=[],b=function(e){for(var t=[];e;)t.push(e),e=e.parentNode;return t},x=function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(t.push(i),n(i).is(".dcg-tap-container, .dcg-no-touchtracking"))return n(i).is(".dcg-tap-container."+o)?t:[]}return[]},E=function(e,t){g=null,u=e,h=b(u===c?t.originalEvent.touches[0].target:t.target),n(x(h)).addClass("dcg-depressed").each(function(){var e=n(this);S(e)&&e.addClass("dcg-focus-by-tap")}),n(h).each(function(){var e=n(this);e.data({originalScrollTop:e.scrollTop(),originalScrollLeft:e.scrollLeft()})}),p={}},w=function(e){return e.is("input, textarea, select")||e.hasClass("dcg-mathquill-input-span")||e.is("[contenteditable=true]")},_=function(e){return!!n(e).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container."+o)},S=function(e){return 3!==u&&!w(e)&&_(e)},M=function(e){g=null,n(".dcg-depressed").removeClass("dcg-depressed");var t=n(document.activeElement);if(S(t))try{t.blur()}catch(e){}if(n(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),n(h).each(function(){var e=n(this),t=e.data("originalScrollTop")-e.scrollTop(),r=e.data("originalScrollLeft")-e.scrollLeft();(t||r)&&(p.scroll=!0)}),1===p["dcg-tapstart"]&&1===p["dcg-tapend"]&&!p["dcg-tapcancel"]&&!p.scroll){var r="mouse"===e.device?e.clientX:e.originalEvent.changedTouches[0].clientX,i="mouse"===e.device?e.clientY:e.originalEvent.changedTouches[0].clientY;if(e&&!e.device&&0===r&&0===i){var o=e.target.getBoundingClientRect();r=(o.left+o.right)/2,i=(o.top+o.bottom)/2,e.device="keyboard"}for(var a=!1,s=0;s<h.length&&!a;s++){var d,y=n(h[s]);if("function"==typeof y[0].getBoundingClientRect&&(d=y[0].getBoundingClientRect()),"true"===y.attr("tapboundary")&&(a=!0),d){if(r<d.left||i<d.top)continue;if(r>d.right)continue;if(i>d.bottom)continue}g=y[0],I("dcg-tap",e,g);break}}u!==c&&u!==l||(m=setTimeout(function(){m=null,f=(new Date).getTime()},1e3)),h=[],u=0},k=function(){return m||(new Date).getTime()-f<500},C=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push({identifier:r.identifier,x:r.pageX,y:r.pageY,screenX:r.screenX,screenY:r.screenY,pageX:r.pageX,pageY:r.pageY,clientX:r.clientX,clientY:r.clientY})}return t},I=function(e,t,r){if("dcg-tapstart"===e)d[t.identifier]={type:e,pageX:t.originalEvent.changedTouches[0].pageX,pageY:t.originalEvent.changedTouches[0].pageY};else if("dcg-tapmove"===e){var i=t.originalEvent.changedTouches[0],o=d[t.identifier];if(o&&i.pageX===o.pageX&&i.pageY===o.pageY)return;if((u===c||u===l)&&o&&"dcg-tapstart"===o.type&&Math.abs(o.pageX-i.pageX)+Math.abs(o.pageY-i.pageY)<2)return;d[t.identifier]={type:e,pageX:t.originalEvent.changedTouches[0].pageX,pageY:t.originalEvent.changedTouches[0].pageY}}void 0===p[e.toLowerCase()]?p[e.toLowerCase()]=1:p[e.toLowerCase()]++;var a=n.event.fix(t.originalEvent);a.type=e,a.device=u===c||u===l?"touch":3===u?"keyboard":"mouse",a.touches=C(t.originalEvent.touches),a.changedTouches=C(t.originalEvent.changedTouches),a.target=r||t.target;var s="keyboard"!==a.device&&p["dcg-longhold"]>0;a.wasLongheld=function(){return s},a.preventTap=function(){p["dcg-tapcancel"]=1},clearTimeout(y),"dcg-tapstart"===a.type&&"keyboard"!==a.device&&1===a.touches.length&&(y=setTimeout(function(){I("dcg-longhold",t,r)},500)),a.target&&n.nodeName(a.target,"a")&&"dcg-tap"===a.type&&"keyboard"===a.device&&a.target.click&&a.target.click(),n(a.target).trigger(a)},T=function(e){var t=h,r=!!h.length,i=n(".dcg-tap-container."+o+" .dcg-hovered"),a=n.makeArray(i.filter(function(){return _(this)})),s=[],c=[],l=[];x(b(e)).forEach(function(e){r&&-1===t.indexOf(e)||(-1===a.indexOf(e)&&l.push(e),s.push(e))});for(var u=0;u<a.length;u++)e=a[u],-1===s.indexOf(e)&&c.push(e);n(c).removeClass("dcg-hovered").trigger("tipsyhide"),n(l).addClass("dcg-hovered").trigger("tipsyshow")},L=function(e){for(var t=0;t<v.length;t++)if(v[t].pointerId===e)return!0;return!1},D=function(e){for(var t=0;t<v.length;t++)if(v[t].pointerId===e)return v.splice(t,1)[0]},P=function(e){0===u&&E(l,e),T(null),v.push(e.originalEvent),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=v,e.originalEvent.changedTouches=[e.originalEvent],I("dcg-tapstart",e)},A=function(e){D(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=v,e.originalEvent.changedTouches=[e.originalEvent],I("dcg-tapcancel",e),0===v.length&&M(e)},O=function(e){D(e.originalEvent.pointerId),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=v,e.originalEvent.changedTouches=[e.originalEvent],I("dcg-tapend",e),0===v.length&&M(e)},F=function(e){return"touch"===e.originalEvent.pointerType||2===e.originalEvent.pointerType};n(document).on("pointerdown MSPointerDown",function(e){2!==u&&u!==c&&F(e)&&(L(e.originalEvent.pointerId)||P(e))}),n(document).on("pointermove MSPointerMove",function(e){2!==u&&u!==c&&F(e)&&(L(e.originalEvent.pointerId)||P(e),D(e.originalEvent.pointerId),v.push(e.originalEvent),e.originalEvent.identifier=e.originalEvent.pointerId,e.originalEvent.touches=v,e.originalEvent.changedTouches=[e.originalEvent],I("dcg-tapmove",e))}),n(document).on("pointercancel MSPointerCancel",function(e){if(u===l&&F(e)&&L(e.originalEvent.pointerId)){A(e);for(var t;t=v.pop();){var e=n.Event(t,{originalEvent:t});A(e)}}}),n(document).on("pointerup MSPointerUp",function(e){if(u===l&&F(e)&&L(e.originalEvent.pointerId)){O(e);for(var t;t=v.pop();){var e=n.Event(t,{originalEvent:t});O(e)}}});var N=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",function(){},t),window.removeEventListener("test",function(){},t)}catch(e){}return e}();return t("touchstart",function(e){2!==u&&u!==l&&(0===u&&E(c,e),T(null),I("dcg-tapstart",e))}),t("touchmove",function(e){u===c&&I("dcg-tapmove",e)}),t("touchcancel",function(e){u===c&&(I("dcg-tapcancel",e),0===e.originalEvent.touches.length&&M(e))}),t("touchend",function(e){u===c&&(I("dcg-tapend",e),0===e.originalEvent.touches.length&&M(e))}),n(document).on("mousedown",function(e){if(1!==e.button&&2!==e.button){if(u===c||u===l||k())return void(!n(e.target).is("input, textarea, select")&&_(e.target)&&e.preventDefault());E(2,e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],I("dcg-tapstart",e)}}),n(document).ready(function(){n(document).on("mousedown",function(e){var t=!!n(e.target).closest(".dcg-do-not-blur").length,r=!!n(e.target).closest(".dcg-do-blur").length;if(t&&!r&&_(e.target)){e.preventDefault();try{var i=window.getSelection();if(1===i.rangeCount){var o=i.getRangeAt(0);o.startContainer===o.endContainer&&n(o.startContainer).closest(".dcg-text-selectable").length&&i.removeAllRanges()}}catch(e){}}})}),n(document).on("mouseleave",function(e){0===u&&(k()||T(null))}),n(document).on("mousemove",function(e){1!==e.button&&2!==e.button&&u!==c&&u!==l&&(k()||(T(e.target),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],I("dcg-tapmove",e)))}),n(document).on("mouseup",function(e){1!==e.button&&2!==e.button&&2===u&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],I("dcg-tapend",e),M(e))}),n(document).on("keydown",function(e){if((i.lookup(e)===i.ENTER||i.lookup(e)===i.SPACEBAR)&&_(e.target)&&3!==u){if(n(e.target).is('a:not([ontap]), button, input, textarea, select, [contenteditable="true"]'))return;e.preventDefault(),E(3,e),e.originalEvent.touches=[e],e.originalEvent.changedTouches=[e],I("dcg-tapstart",e)}}),n(document).on("keyup",function(e){i.lookup(e)!==i.ENTER&&i.lookup(e)!==i.SPACEBAR||!_(e.target)||3===u&&(e.originalEvent.touches=[],e.originalEvent.changedTouches=[e],I("dcg-tapend",e),M(e))}),{monitor:a,ignore:s,isTapActive:function(){return 0!==u},elIsFocusable:w}}),define("browser",["require","jquery"],function(e){var t=e("jquery"),n={IS_IE8:null!==navigator.userAgent.match(/MSIE 8.0/i),IS_IE9:null!==navigator.userAgent.match(/MSIE 9.0/i),IS_IE:null!==navigator.userAgent.match(/MSIE/i),IS_EDGE:null!==navigator.userAgent.match(/Edge/i),IS_IPAD:null!==navigator.userAgent.match(/iPad/i),IS_MOBILE:null!==navigator.userAgent.match(/Mobile|Android/i),IS_ANDROID:null!==navigator.userAgent.match(/Android/i),IS_IOS:null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,IS_CHROME:null!==navigator.userAgent.match(/Chrome/i),IS_FIREFOX:null!==navigator.userAgent.match(/Firefox/i),IS_SAFARI:null!==navigator.userAgent.match(/^((?!chrome|android).)*safari/i),IS_APPLE:null!==navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),IS_WINDOWS:null!==navigator.platform.match(/(Win32)/i),IS_TOUCH:null!==navigator.userAgent.match(/Touch/i),IS_KINDLE:null!==navigator.userAgent.match(/Kindle/i)||null!==navigator.userAgent.match(/Silk/i),IS_BRAILLENOTE:null!==navigator.userAgent.match(/KeyWeb/i),IS_IN_IFRAME:window.parent!==window};return n.IS_TABLET=n.IS_IPAD||n.IS_ANDROID||n.IS_KINDLE,n.IS_TOUCH_DEVICE=n.SHOULD_NOT_AUTOFOCUS=n.IS_IOS||n.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),n.IOS_VERSION=function(){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),n.MAC_VERSION=function(){var e=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/);return e?[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]:null}(),n.CHROME_VERSION=function(){var e=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/);return e?[parseInt(e[2],10),parseInt(e[3],10),parseInt(e[4]||0,10)]:null}(),n.SUPPORTS_INPUTMODE=function(){var e=n.IOS_VERSION,t=n.MAC_VERSION,r=n.CHROME_VERSION;return e&&e[0]>=13||n.IS_IOS&&!e&&t&&(t[0]>10||10===t[0]&&t[1]>=15)||n.IS_ANDROID&&r&&r[0]>=76}(),n.SUPPORTS_TRANSLATE3D=!1,t(document).ready(function(){var e,t,r=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(r,null);for(var o in i)if(void 0!==r.style[o]){if(r.style[o]="translate3d(1px,1px,1px)",!(t=window.getComputedStyle(r)))return;e=t.getPropertyValue(i[o])}document.body.removeChild(r),n.SUPPORTS_TRANSLATE3D=void 0!==e&&e.length>0&&"none"!==e}),n.translateRule=function(e,t){return n.SUPPORTS_TRANSLATE3D?"translate3d("+e+(e?"px":"")+","+t+(t?"px":"")+",0)":"translate("+e+(e?"px":"")+","+t+(t?"px":"")+")"},n.SUPPORTS_CANVAS=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),n}),define("main/load_data",["require","jquery"],function(e){"use strict";return e("jquery")("body").data("load-data")}),define("core/lib/deepCopy",["require","exports"],function(e,t){"use strict";function n(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(n);var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=n(t[i]));return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("lib/parse-query-params",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParams=void 0,t.getQueryParams=function(){var e="";try{e=location.search,"?"==e[0]&&(e=e.slice(1))}catch(e){}for(var t=e.split("&"),n={},r=0,i=t;r<i.length;r++){var o=i[r],a=o.split("=");2==a.length?n[a[0]]=decodeURIComponent(a[1]):n[a[0]]=!0}return n}}),define("config",["require","exports","core/lib/deepCopy","lib/parse-query-params"],function(e,t,n,r){"use strict";function i(e){return a[e]}function o(){return n.default(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.all=t.get=void 0;var a={},s=r.getQueryParams();if("undefined"!=typeof Desmos&&Desmos.config)for(var c in Desmos.config)Desmos.config.hasOwnProperty(c)&&(s[c]=Desmos.config[c]);var l=function(e){return s.hasOwnProperty(e)},u=function(e){a[e]=l(e)},d=function(e){a[e]=!l("no"+e)};u("testing"),u("maintenance"),u("disableScrollFix"),u("nativeOnscreenKeypad"),u("hidden"),u("disableMouseInteractions"),u("advancedStyling"),u("clickableObjects"),u("outofdom"),s.lang&&(a.lang=s.lang),s.fontSize&&(a.fontSize=s.fontSize),s.backgroundColor&&(a.backgroundColor="#"+s.backgroundColor),s.textColor&&(a.textColor="#"+s.textColor),a.no_navigation_warning=l("noconcat")||l("testing"),a.previewMessage="You're previewing some new accessibility features.",a.previewFeedbackUrl="mailto:feedback@desmos.com";var p=location&&"preview.desmos.com"===location.hostname;a.previewMode=l("previewMode")||p,u("lockViewport"),u("administerSecretFolders"),u("clickableObjects"),u("degreeMode"),u("clearIntoDegreeMode"),u("plaidMode"),u("editOnWeb"),u("crossOriginSaveTest"),u("showResetButtonOnGraphpaper"),u("transparentBackground"),d("links"),d("trace"),u("expressionsCollapsed"),u("invertedColors"),u("projectorMode"),d("images"),d("folders"),d("settingsMenu"),d("expressionsTopbar"),d("zoomButtons"),d("keypad"),d("graphpaper"),d("expressions"),d("expressionsTopbar"),d("settingsMenu"),d("branding"),d("pointsOfInterest"),d("plotSingleVariableImplicitEquations"),d("plotImplicits"),d("plotInequalities"),d("notes"),d("sliders"),u("pauseWhenOffscreen"),u("worksheetSVG"),u("sciKeypad"),u("4fnKeypad"),u("ans"),l("braille")&&(a.braille=!0),d("qwertyKeyboard"),u("restrictedFunctions"),d("functionDefinition"),u("singleExpression"),u("restrictedEditing"),u("replaceCommaWith10Exp"),u("replaceRoundWithReciprocal"),l("typingAsteriskWritesTimesSymbol")&&(a.typingAsteriskWritesTimesSymbol=!0),d("labels"),d("distributions"),a["4fnKeypad"]?u("decimalToFraction"):d("decimalToFraction"),u("3d"),l("exponentButtonForSquareRoot")?a.additionalFunctions=["exponent"]:s.additionalFunctions&&"string"==typeof s.additionalFunctions&&(a.additionalFunctions=s.additionalFunctions.split(",")),t.get=i,t.all=o}),define("loadcss!print",function(){}),define("console",["require"],function(e){var t=function(){},n=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],r={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?r[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:r[e]=t};return n.forEach(i),r}),define("lib/console",["require","exports","console"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warn=t.log=void 0,t.log=n.log,t.warn=n.warn}),function(){var e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x={};!function(e){function t(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}var n="object"==typeof x?x:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(r){e(t(n,t(r)))}):e("object"==typeof module&&"object"==typeof module.exports?t(n,t(module.exports)):t(n))}(function(x){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};e=function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},r=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},i=function(e,t){return function(n,r){t(n,r,e)}},o=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}
if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},c=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},l=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},u=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},d=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e},p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},h=function(e){return this instanceof h?(this.v=e,this):new h(e)},f=function(e,t,n){function r(e){u[e]&&(l[e]=function(t){return new Promise(function(n,r){d.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{o(u[e](t))}catch(e){c(d[0][3],e)}}function o(e){e.value instanceof h?Promise.resolve(e.value.v).then(a,s):c(d[0][2],e)}function a(e){i("next",e)}function s(e){i("throw",e)}function c(e,t){e(t),d.shift(),d.length&&i(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=n.apply(e,t||[]),d=[];return l={},r("next"),r("throw"),r("return"),l[Symbol.asyncIterator]=function(){return this},l},m=function(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:h(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},g=function(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(i,o){r=e[t](r),n(i,o,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof l?l(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)},y=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},b=function(e){return e&&e.__esModule?e:{default:e}},x("__extends",e),x("__assign",t),x("__rest",n),x("__decorate",r),x("__param",i),x("__metadata",o),x("__awaiter",a),x("__generator",s),x("__exportStar",c),x("__values",l),x("__read",u),x("__spread",d),x("__spreadArrays",p),x("__await",h),x("__asyncGenerator",f),x("__asyncDelegator",m),x("__asyncValues",g),x("__makeTemplateObject",y),x("__importStar",v),x("__importDefault",b)})}(),define("shared-components/dictionary-manual",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={"shared-title-language-menu":"Language","shared-button-close-dialog":"Close Dialog"};t.default=n}),define("lib/dictionary-manual",["require","exports","tslib","../shared-components/dictionary-manual"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.manualDictionary=void 0,t.manualDictionary=n.__assign({},r.default)}),define("lib/i18n-homepage-langs",["require","exports"],function(e,t){"use strict";function n(e){return!!t.homepage_languages[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.isHomepageLanguage=t.homepage_languages=void 0,t.homepage_languages={en:!0,"zn-CN":!0,fr:!0,it:!0,ko:!0,ru:!0,"es-ES":!0},t.isHomepageLanguage=n}),define("lib/i18n",["require","exports","config","jquery","underscore","lib/console","./dictionary-manual","./i18n-homepage-langs"],function(e,t,n,r,i,o,a,s){"use strict";function c(e,t){E=e||"",w=t||{},_={}}function l(){for(var e in t.enabled_languages)s.isHomepageLanguage(e)||delete t.enabled_languages[e]}function u(e){for(var t,n=/(__[^_]+__)/g,r=[];null!==(t=n.exec(e));)r.push({index:t.index,text:t[0]});e=e.replace(/[a-z]/gi,"♦");for(var i=e.split(""),o=0;o<r.length;o++)for(var a=r[o].index,s=r[o].text,c=0;c<s.length;c++)i[a+c]=s[c];return i.join("")}function d(e,t,n){var r,i=void 0!==n?n:E;_[i]||(_[i]=f([i]));for(var o=0,a=_[i];o<a.length;o++){var s=a[o];if(w.hasOwnProperty(s)&&w[s][e]){r=w[s][e];break}}if(r||(r=void 0!==e?e:""),"xx-XX"===n&&(r=u(r)),t)for(var c in t)t.hasOwnProperty(c)&&(r=r.split("__"+c+"__").join(t[c]));return r}function p(e,t){return d(e,t)}function h(e,t,n){return d(a.manualDictionary[e],t,n)}function f(e){var n=[];return i.each(e,function(e){if(e&&"string"==typeof e){var r=e.split("-")[0];n.push(e),n.push(r),i.each(t.enabled_languages,function(e,t){t.split("-")[0]===r&&e.useAsRoot&&n.push(t)})}}),n}function m(){for(var e=f([n.get("lang"),navigator.userLanguage,navigator.language]),t=0;t<e.length;t++){var r=e[t];if(y(r))return r}return"en"}function g(){return E}function y(e){return t.enabled_languages.hasOwnProperty(e)||i.contains(S,e)}function v(e){var n=r.Deferred();if("undefined"==typeof Desmos)return n.reject(),n.promise();if(Desmos.supportedLanguages||(Desmos.supportedLanguages=[]),Desmos.supportedLanguages.indexOf(e)>=0||"en"===e)return c(e,Desmos.locales),n.resolve(!0),n.promise();if(!y(e)){var i=-1!==e.indexOf("-")?e.split("-")[0]:e;for(var a in t.enabled_languages)if(-1!==a.indexOf("-")){var s=a.split("-")[0];if(i===s&&t.enabled_languages[a].useAsRoot){e=a;break}}}return r.get("/api/v1/calculator/language/"+e,function(t){Desmos.locales||(Desmos.locales={}),Desmos.supportedLanguages||(Desmos.supportedLanguages=[]),Desmos.locales[e]=t[e],Desmos.supportedLanguages.push(e),c(e,Desmos.locales),n.resolve(!0)}).fail(function(t){404===t.status&&o.warn(e+" is not an available language."),n.reject()}),n.promise()}function b(e,t){if(null===e||void 0===e)return"";if("string"==typeof e)return e;if("number"==typeof e)return""+e;var n,r=e.vars;if(r){n={};for(var i in r)r.hasOwnProperty(i)&&(n[i]=b(r[i],t))}return d(e.msg,n,t)}function x(){var e={},n=Object.keys(t.enabled_languages);for(var r in n){var i=n[r];e[i]={code:i,display_name:t.enabled_languages[i].displayName}}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildSupportedLanguagesMap=t.unpack=t.fetchLanguage=t.currentLanguage=t.detectLanguage=t.s=t.raw=t.t=t.restrictToHomepageLanguages=t.init=t.enabled_languages=t.locales=void 0,t.locales=function(){return"undefined"!=typeof Desmos&&Desmos.locales?Desmos.locales:{}}();var E="",w={},_={};t.enabled_languages={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"en-GB":{displayName:"English (GB)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"es-ES":{displayName:"Español (España)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},ru:{displayName:"Русский",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Português (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"pt-PT":{displayName:"Português (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Català",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Français",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"Íslenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"Čeština",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"Türkçe",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Tiếng Việt",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"Ελληνικά",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"Українська",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"ქართული",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"ภาษาไทย",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"zh-CN":{displayName:"简体中文",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"繁體中文",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"한국어",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"日本語",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}};var S=["ar","hy-AM","hi","tr","xx-XX"];t.init=c,t.restrictToHomepageLanguages=l,t.t=d,t.raw=p,t.s=h,t.detectLanguage=m,t.currentLanguage=g,t.fetchLanguage=v,t.unpack=b,t.buildSupportedLanguagesMap=x,c(m(),t.locales)}),define("pjs",[],function(){return function(e,t,n){function r(e){return"object"==typeof e}function i(e){return"function"==typeof e}function o(){}function a(s,c){function l(){var e=new u;return i(e.init)&&e.init.apply(e,arguments),e}function u(){}c===n&&(c=s,s=Object),l.Bare=u;var d,p=o[e]=s[e],h=u[e]=l[e]=new o;return h.constructor=l,l.mixin=function(t){return u[e]=l[e]=a(l,t)[e],l},(l.open=function(e){if(d={},i(e)?d=e.call(l,h,p,l,s):r(e)&&(d=e),r(d))for(var n in d)t.call(d,n)&&(h[n]=d[n]);return i(h.init)||(h.init=s),l})(c)}return a}("prototype",{}.hasOwnProperty)}),define("underscore_model",["require","underscore","pjs"],function(e){var t=e("underscore");return{UnderscoreModel:e("pjs")(function(e){var n=0,r="guid_"+Math.round(1e6*Math.random())+"_"+(new Date).getTime()+"_";e.init=function(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=r+ ++n},e.unobserveAll=function(){this.__observers={},this.__eventObservers={}},e.getProperty=function(e){return this[e]},e.getOldProperty=function(e){return this.__oldProperties[e]},e.setProperty=function(e,n){var r=this[e];this[e]=n;var i=this.__propertyComparators[e];if(i){if(i(r,n))return}else if(t.isEqual(r,n))return;this.__oldProperties[e]=r,this.notifyPropertyChange(e)},e.setProperties=function(e){for(var t in e)e.hasOwnProperty(t)&&this.setProperty(t,e[t])},e.setPropertyComparator=function(e,t){this.__propertyComparators[e]=t},e.notifyPropertyChange=function(e){this.__callObservers(this.__observers,e,this)},e.observe=function(e,t){this.__addObservers(this.__observers,e,t)},e.unobserve=function(e){this.__removeObservers(this.__observers,e)},e.observeAndSync=function(e,t){this.observe(e,t);for(var n=e.split(" "),r=0;r<n.length;r++){var i=n[r].split("."),o=i[0];this.hasOwnProperty(o)&&t(o,this)}},e.triggerEvent=function(e,t){this.__callObservers(this.__eventObservers,e,t)},e.observeEvent=function(e,t){this.__addObservers(this.__eventObservers,e,t)},e.unobserveEvent=function(e){this.__removeObservers(this.__eventObservers,e)},e.__callObservers=function(e,t,n){var r=e[t];if(r)for(var i=0;i<r.length;i++)r[i].callback(t,n)},e.__removeObservers=function(e,t){for(var n=t.split(" "),r=0;r<n.length;r++){var i=n[r].split("."),o=i[0],a=i[1];if(o&&a){var s=e[o],c=[];if(!s)continue;for(var l=0;l<s.length;l++){var u=s[l];u.namespace!==a&&c.push(u)}e[o]=c}else if(o)delete e[o];else if(a)for(o in e)e.hasOwnProperty(o)&&this.__removeObservers(e,o+"."+a)}},e.__addObservers=function(e,t,n){for(var r=t.split(" "),i=0;i<r.length;i++){var o=r[i].split("."),a=o[0];if(!a)throw"Must supply a property to observe";var s=o[1],c={namespace:s,callback:n},l=e[a];l?l.push(c):e[a]=[c]}}})}}),define("core/lib/worker-i18n",["require","exports"],function(e,t){"use strict";function n(e,t){return{msg:e,vars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.t=void 0,t.t=n}),define("main/backend",["require","jquery"],function(e){"use strict";var t=e("jquery"),n={baseURL:"",getGoogleLoginURL:function(e){void 0===e&&(e={});var t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),n.baseURL+"/drive_api/calculator/login"+t},getAppleLoginURL:function(e){void 0===e&&(e={});var t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),n.baseURL+"/apple_api/calculator/login"+t},exchangeGoogleAuthCode:function(e){var n=t.Deferred();return e?this.getJSON("/account/google_auth?code="+e).always(function(e){e&&e.success?n.resolve():n.reject()}):setTimeout(function(){n.reject("no auth code")},1),n.promise()},exchangeAppleAuth:function(e){var n=t.Deferred(),r=e&&e.jwt,i=e&&e.name||"";return e&&e.jwt?this.getJSON("/account/apple_auth?name="+i+"&jwt="+r).always(function(e){e&&e.success?n.resolve():n.reject()}):setTimeout(function(){n.reject("no auth code")},1),n.promise()},handleDeprecatedRoute:function(e){if(e&&e.routeDeprecated){e.js&&new Function(e.js)();var n=t.Deferred();return n.reject(e),n.promise()}return e},post:function(e,r){return t.ajax({type:"POST",url:n.baseURL+e,data:r,xhrFields:{withCredentials:!0}}).then(n.handleDeprecatedRoute)},getJSON:function(e){return t.ajax({dataType:"json",url:n.baseURL+e,xhrFields:{withCredentials:!0}}).then(n.handleDeprecatedRoute)}};return n}),define("main/graph",["require","pjs","underscore_model","core/lib/worker-i18n","main/backend"],function(e){"use strict";var t=e("pjs"),n=e("underscore_model").UnderscoreModel,r=e("core/lib/worker-i18n"),i=e("main/backend"),o=t(n,function(e,t){var n=["title","thumbURL","stateURL","hash","parentHash","recoveryParentHash","graphData","access","created","example","easterEgg"];e.init=function(e){t.init.call(this);var r=this;e&&n.forEach(function(t){e.hasOwnProperty(t)&&r.setProperty(t,e[t])}),this.access||this.setProperty("access","all"),this.example||this.setProperty("example",!1),this.now=new Date},e.copy=function(){return o(this)},e.getCollectionKey=function(){return(this.example?"example-":"")+this.hash},e.displayDate=function(){var e=Date.now(),t=(e-this.created)/1e3,n=t/60,i=n/60,o=i/24,a=o/7,s=[r.t("Jan"),r.t("Feb"),r.t("Mar"),r.t("Apr"),r.t("May"),r.t("Jun"),r.t("Jul"),r.t("Aug"),r.t("Sep"),r.t("Oct"),r.t("Nov"),r.t("Dec")];return a>=5?r.t("on __month__ __day__, __year__",{month:s[this.created.getMonth()],day:this.created.getDate(),year:this.created.getFullYear()}):a>=2?r.t("__number__ weeks ago",{number:String(Math.floor(a))}):o>=7?r.t("last week"):o>=2?r.t("__number__ days ago",{number:String(Math.floor(o))}):i>=24?r.t("yesterday"):i>=2?r.t("__number__ hours ago",{number:String(Math.floor(i))}):n>=60?r.t("one hour ago"):n>=2?r.t("__number__ minutes ago",{number:String(Math.floor(n))}):n>=1?r.t("one minute ago"):r.t("less than a minute ago")},e.plainObject=function(){var e={},t=this;return n.forEach(function(n){e[n]=t[n]}),e},e.getURL=function(){var e;if("file:"===window.location.protocol){if(!i.baseURL)return"/calculator";e=i.baseURL+"/calculator"}else{var t="/"+document.location.pathname.split("/")[1];e=window.location.href.split(t)[0]+t}return e+(this.hash?"/"+this.hash:"")}});return o.fromAjax=function(e){return o({title:e.title,thumbURL:e.thumbUrl,stateURL:e.stateUrl,graphData:e.state,hash:e.hash,parentHash:e.parent_hash,recoveryParentHash:e.recovery_parent_hash,access:e.access,created:new Date(e.created),example:!!e.example,easterEgg:e.easterEgg})},o.toAjax=function(e){return{title:e.title,thumbUrl:e.thumbURL,stateUrl:e.stateURL,state:e.graphData,hash:e.hash,parent_hash:e.parentHash,recovery_parent_hash:e.recoveryParentHash,access:e.access,created:e.created.toString()}},o.updateFromSync=function(e,t){e.setProperty("title",t.title),e.setProperty("hash",t.hash),e.setProperty("parentHash",t.parent_hash),e.setProperty("recoveryParentHash",t.recovery_parent_hash),e.setProperty("graphData",e.graphData),e.setProperty("thumbURL",t.thumbUrl),e.setProperty("stateURL",t.stateUrl),e.setProperty("created",new Date(t.created))},o}),define("text!example_graphs",[],function(){
return'[{"hash":"2rnqgoa6a4","parent_hash":"89ndqgh5id","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/2rnqgoa6a4.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/2rnqgoa6a4","title":"Lines: Slope Intercept Form","access":"all","created":"Tue, 18 Aug 2015 19:24:05 GMT","example":true},{"hash":"onfy0dzx2o","parent_hash":"kha6fgxhaf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/onfy0dzx2o.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/onfy0dzx2o","title":"Lines: Point Slope Form","access":"all","created":"Tue, 18 Aug 2015 20:21:16 GMT","example":true},{"hash":"md6buy4efz","parent_hash":"fi71u8ej0q","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/md6buy4efz.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/md6buy4efz","title":"Lines: Two Point Form","access":"all","created":"Tue, 18 Aug 2015 20:21:39 GMT","example":true},{"hash":"zukjgk9iry","parent_hash":"jv9fmw2qz8","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zukjgk9iry.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/zukjgk9iry","title":"Parabolas: Standard Form","access":"all","created":"Tue, 18 Aug 2015 20:22:02 GMT","example":true},{"hash":"8keeh1pt5l","parent_hash":"klodq5d0ph","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8keeh1pt5l.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8keeh1pt5l","title":"Parabolas: Vertex Form","access":"all","created":"Tue, 18 Aug 2015 20:22:22 GMT","example":true},{"hash":"dxkknajdqb","parent_hash":"t6auzqijzl","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/dxkknajdqb.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/dxkknajdqb","title":"Parabolas: Standard Form + Tangent","access":"all","created":"Tue, 18 Aug 2015 20:24:05 GMT","example":true},{"hash":"kihjluohq9","parent_hash":"vpnnmvncdb","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/kihjluohq9.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/kihjluohq9","title":"Trigonometry: Period and Amplitude","access":"all","created":"Tue, 18 Aug 2015 20:24:32 GMT","example":true},{"hash":"l3u8133jwj","parent_hash":"51d9lso1ia","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/l3u8133jwj.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/l3u8133jwj","title":"Trigonometry: Phase","access":"all","created":"Tue, 18 Aug 2015 20:24:53 GMT","example":true},{"hash":"7eeumgl7it","parent_hash":"7rnv0erick","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/7eeumgl7it.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/7eeumgl7it","title":"Trigonometry: Wave Interference","access":"link","created":"Tue, 03 Dec 2019 18:14:54 GMT","example":true},{"hash":"qmzx2skkzy","parent_hash":"s9myfmvujr","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qmzx2skkzy.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qmzx2skkzy","title":"Trigonometry: Unit Circle","access":"all","created":"Tue, 18 Aug 2015 20:26:18 GMT","example":true},{"hash":"ivud1auwvw","parent_hash":"8dsmqe5ycc","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/ivud1auwvw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/ivud1auwvw","title":"Conic Sections: Circle","access":"all","created":"Tue, 18 Aug 2015 20:27:04 GMT","example":true},{"hash":"djcrjdfiif","parent_hash":"0jwlvn9hcs","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/djcrjdfiif.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/djcrjdfiif","title":"Conic Sections: Parabola and Focus","access":"all","created":"Tue, 18 Aug 2015 20:27:50 GMT","example":true},{"hash":"afja7ee9mh","parent_hash":"duajwxdopa","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/afja7ee9mh.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/afja7ee9mh","title":"Conic Sections: Ellipse with Foci","access":"all","created":"Tue, 18 Aug 2015 20:28:08 GMT","example":true},{"hash":"vgfqbejegx","parent_hash":"k6xcbueze5","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/vgfqbejegx.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/vgfqbejegx","title":"Conic Sections: Hyperbola","access":"all","created":"Tue, 18 Aug 2015 20:28:27 GMT","example":true},{"hash":"0ovfwwmfrb","parent_hash":"scuci1750d","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/0ovfwwmfrb.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/0ovfwwmfrb","title":"Polar: Rose","access":"all","created":"Tue, 18 Aug 2015 20:28:48 GMT","example":true},{"hash":"qlbdlxyrza","parent_hash":"nicremwert","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qlbdlxyrza.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qlbdlxyrza","title":"Polar: Logarithmic Spiral","access":"all","created":"Tue, 18 Aug 2015 20:29:08 GMT","example":true},{"hash":"rayzacuktw","parent_hash":"21pbohd07u","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/rayzacuktw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/rayzacuktw","title":"Polar: Limacon","access":"all","created":"Tue, 18 Aug 2015 20:29:25 GMT","example":true},{"hash":"gxnu7fbgks","parent_hash":"kk3axf8oon","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/gxnu7fbgks.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/gxnu7fbgks","title":"Polar: Conic Sections","access":"link","created":"Tue, 18 Aug 2015 20:29:42 GMT","example":true},{"hash":"rnyjcjpouf","parent_hash":"ogvj2tzgjj","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/rnyjcjpouf.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/rnyjcjpouf","title":"Parametric: Introduction","access":"all","created":"Tue, 18 Aug 2015 20:30:31 GMT","example":true},{"hash":"eg5he4xpg9","parent_hash":"pwjl3pe4da","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/eg5he4xpg9.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/eg5he4xpg9","title":"Parametric: Cycloid","access":"link","created":"Tue, 18 Aug 2015 20:30:46 GMT","example":true},{"hash":"nyterjs0uf","parent_hash":"nqxx2mhknn","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/nyterjs0uf.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/nyterjs0uf","title":"Transformations: Translating a Function","access":"link","created":"Fri, 29 Sep 2017 00:47:36 GMT","example":true},{"hash":"vdkjrpznnu","parent_hash":"doxva7ciht","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/vdkjrpznnu.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/vdkjrpznnu","title":"Transformations: Scaling a Function","access":"link","created":"Tue, 18 Aug 2015 21:23:20 GMT","example":true},{"hash":"fcjhdt1xdw","parent_hash":"tif5liedlj","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/fcjhdt1xdw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/fcjhdt1xdw","title":"Transformations: Inverse of a Function","access":"link","created":"Tue, 18 Aug 2015 21:23:36 GMT","example":true},{"hash":"jwquvmikhr","parent_hash":"2l0r87hkmq","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/jwquvmikhr.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/jwquvmikhr","title":"Statistics: Linear Regression","access":"link","created":"Tue, 18 Aug 2015 21:24:01 GMT","example":true},{"hash":"paknt6oneh","parent_hash":"c5wffk3gnd","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/paknt6oneh.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/paknt6oneh","title":"Statistics: Anscomb\'s Quartet","access":"link","created":"Tue, 18 Aug 2015 21:24:19 GMT","example":true},{"hash":"sanlujpfmc","parent_hash":"tyszvsmelo","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/sanlujpfmc.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/sanlujpfmc","title":"Statistics: 4th Order Polynomial","access":"all","created":"Tue, 18 Aug 2015 21:25:02 GMT","example":true},{"hash":"iwfjdrhdyr","parent_hash":"4n11jtzki0","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/iwfjdrhdyr.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/iwfjdrhdyr","title":"Lists: Family of sin Curves","access":"link","created":"Tue, 18 Aug 2015 21:25:30 GMT","example":true},{"hash":"ib4qkln029","parent_hash":"1flkupc1yt","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/ib4qkln029.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/ib4qkln029","title":"Lists: Curve Stitching","access":"link","created":"Thu, 05 May 2016 06:33:59 GMT","example":true},{"hash":"zdv2kras4n","parent_hash":"fqhp5hq3ka","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zdv2kras4n.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/zdv2kras4n","title":"Lists: Plotting a List of Points","access":"link","created":"Tue, 18 Aug 2015 21:27:01 GMT","example":true},{"hash":"qtzamwcdrk","parent_hash":"aqgbwm3qfd","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qtzamwcdrk.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qtzamwcdrk","title":"Calculus: Derivatives","access":"link","created":"Tue, 18 Aug 2015 21:27:17 GMT","example":true},{"hash":"mekfho0w38","parent_hash":"irip8pnpdf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/mekfho0w38.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/mekfho0w38","title":"Calculus: Secant Line","access":"link","created":"Tue, 18 Aug 2015 21:27:32 GMT","example":true},{"hash":"fs3lx8gptb","parent_hash":"dlzhsldcgo","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/fs3lx8gptb.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/fs3lx8gptb","title":"Calculus: Tangent Line","access":"link","created":"Tue, 18 Aug 2015 21:27:46 GMT","example":true},{"hash":"noanuckuli","parent_hash":"gkjridbqfj","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/noanuckuli.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/noanuckuli","title":"Calculus: Taylor Expansion of sin(x)","access":"link","created":"Tue, 18 Aug 2015 21:28:02 GMT","example":true},{"hash":"qigfpckugc","parent_hash":null,"thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qigfpckugc.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qigfpckugc","title":"Calculus: Integrals","access":"link","created":"Tue, 19 Apr 2016 14:03:33 GMT","example":true},{"hash":"u2qz73ufju","parent_hash":"o3pwn3vkgh","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/u2qz73ufju.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/u2qz73ufju","title":"Calculus: Integral with adjustable bounds","access":"link","created":"Tue, 19 Apr 2016 14:12:40 GMT","example":true},{"hash":"gaa5aqyb5s","parent_hash":null,"thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/gaa5aqyb5s.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/gaa5aqyb5s","title":"Calculus: Fundamental Theorem of Calculus","access":"link","created":"Tue, 19 Apr 2016 14:15:45 GMT","example":true},{"hash":"8hxtdephtf","parent_hash":"xova2bfhj5","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8hxtdephtf.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8hxtdephtf","title":"Pac Man","access":"link","created":"Mon, 20 Apr 2015 14:47:01 GMT","example":true,"easterEgg":"betchacant"},{"hash":"8mmk4hrmqg","parent_hash":"hvweogjvv8","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8mmk4hrmqg.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8mmk4hrmqg","title":"PRIDE flag","access":"link","created":"Wed, 10 Jun 2020 19:44:37 GMT","example":true,"easterEgg":"pride"},{"hash":"velayq9vsr","parent_hash":"imcdd0epyw","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/velayq9vsr.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/velayq9vsr","title":"PRIDE flag","access":"link","created":"Tue, 16 Jun 2020 21:22:01 GMT","example":true,"easterEgg":"pride"},{"hash":"dhzndt8brx","parent_hash":"brei8peg52","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/dhzndt8brx.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/dhzndt8brx","title":"3D World","access":"link","created":"Fri, 03 Jun 2016 01:50:06 GMT","example":true,"easterEgg":"betchacant"},{"hash":"zzhx3zzlns","parent_hash":"ccmfndxptv","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zzhx3zzlns.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/zzhx3zzlns","title":"Checkerboard Inversion","access":"link","created":"Thu, 02 Jun 2016 22:06:08 GMT","example":true,"easterEgg":"betchacant"},{"hash":"c1u72uowae","parent_hash":null,"thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/c1u72uowae.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/c1u72uowae","title":"Regular Sine Wave?","access":"link","created":"Sun, 18 Aug 2013 06:25:20 GMT","example":true,"easterEgg":"betchacant"},{"hash":"2mwse3jtff","parent_hash":"msmdonti4c","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/2mwse3jtff.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/2mwse3jtff","title":"Fastest Path to a Point","access":"link","created":"Thu, 02 Jun 2016 22:02:44 GMT","example":true,"easterEgg":"betchacant"},{"hash":"8ytrg3nyln","parent_hash":"d7qrsg2hxg","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8ytrg3nyln.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8ytrg3nyln","title":"Fireworks!","access":"link","created":"Fri, 03 Jun 2016 01:50:52 GMT","example":true,"easterEgg":"betchacant"},{"hash":"9ed6k6wexp","parent_hash":"9ed6k6wexp","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/9qixqdozzh.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/9ed6k6wexp","title":"Fractal Valentine","access":"link","created":"Sat, 14 Feb 2015 18:42:18 GMT","example":true,"easterEgg":"betchacant"},{"hash":"am6ab20tmw","parent_hash":"hvycjwscfq","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/am6ab20tmw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/am6ab20tmw","title":"Outstretched Arm","access":"link","created":"Fri, 03 Jun 2016 01:45:50 GMT","example":true,"easterEgg":"betchacant"}]\n'}),function(){function e(){}function t(e){var t=x.call(arguments,1);return function(){return e.apply(this,t)}}function n(e,t){if(!t)throw new Error("prayer failed: "+e)}function r(e){n("a direction was passed",e===w||e===_)}function i(){C||(C=!0,setTimeout(o))}function o(){C=!1,k={}}function a(e,t){var n=e[w];if(n)for(;n!==e[_][_];n=n[_]){var r=t(n);if(!1===r)break}}function s(e,t,n){var r=e[w];if(!r)return t;for(;r!==e[_][_];r=r[_])t=n(t,r);return t}function c(e,t,r){n("a parent is always present",e),n("leftward is properly set up",function(){return t?t[_]===r&&t.parent===e:e.ends[w]===r}()),n("rightward is properly set up",function(){return r?r[w]===t&&r.parent===e:e.ends[_]===t}())}function l(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function u(e){return l(),Ae(e)}function d(t){function n(e){if(!e||!e.nodeType)return null;var t=I.getNodeOfElement(S(e).children(".dcg-mq-root-block")[0]),n=t&&t.controller;return n?i[n.KIND_OF_MQ](n):null}function r(e,t){t&&t.handlers&&(t.handlers={fns:t.handlers,APIClasses:i});for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o=q[n];e[n]=o?o(r):r}}if(!(j<=t&&t<=V))throw"Only interface versions between "+j+" and "+V+" supported. You specified: "+t;var i={};n.L=w,n.R=_,n.saneKeyboardEvents=z,n.config=function(e){return r(N.p,e),this},n.registerEmbed=function(e,t){if(!/^[a-z][a-z0-9]*$/i.test(e))throw"Embed name must start with letter and be only letters and digits";B[e]=t};var o=i.AbstractMathQuill=E(R,function(e){e.init=function(e){this.__controller=e,this.__options=e.options,this.id=e.id,this.data=e.data},e.__mathquillify=function(e){var t=this.__controller,n=t.root,r=t.container;t.createTextarea();var i=r.addClass(e).contents().detach();n.jQ=S('<span class="dcg-mq-root-block"/>').appendTo(r),I.linkElementByBlockId(n.jQ[0],n.id),this.latex(i.text()),this.revert=function(){return r.empty().unbind(".mathquill").removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").append(i)}},e.config=function(e){return r(this.__options,e),this},e.el=function(){return this.__controller.container[0]},e.text=function(){return this.__controller.exportText()},e.mathspeak=function(){return this.__controller.exportMathSpeak()},e.latex=function(e){return arguments.length>0?(this.__controller.renderLatexMath(e),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},e.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},e.reflow=function(){return this.__controller.root.postOrder(function(e){e.reflow()}),this}});n.prototype=o.prototype,i.EditableField=E(o,function(t,n){t.__mathquillify=function(){return n.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},t.focus=function(){return this.__controller.textarea.focus(),this.__controller.scrollHoriz(),this},t.blur=function(){return this.__controller.textarea.blur(),this},t.write=function(e){return this.__controller.writeLatex(e),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},t.cmd=function(e){var t=this.__controller.notify(),n=t.cursor;if(/^\\[a-z]+$/i.test(e)){e=e.slice(1);var r=L[e];r&&(e=r(e),n.selection&&e.replaces(n.replaceSelection()),e.createLeftOf(n.show()))}else n.parent.write(n,e);return t.scrollHoriz(),t.blurred&&n.hide().parent.blur(),this},t.select=function(){var e=this.__controller;for(e.notify("move").cursor.insAtRightEnd(e.root);e.cursor[w];)e.selectLeft();return this},t.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},t.moveToDirEnd=function(e){return this.__controller.notify("move").cursor.insAtDirEnd(e,this.__controller.root),this},t.moveToLeftEnd=function(){return this.moveToDirEnd(w)},t.moveToRightEnd=function(){return this.moveToDirEnd(_)},t.keystroke=function(t,n){for(var t=t.replace(/^\s+|\s+$/g,"").split(/\s+/),r=0;r<t.length;r+=1)this.__controller.keystroke(t[r],n||{preventDefault:e});return this},t.typedText=function(e){for(var t=0;t<e.length;t+=1)this.__controller.typedText(e.charAt(t));return this},t.dropEmbedded=function(e,t,n){var r=e-S(window).scrollLeft(),i=t-S(window).scrollTop(),o=document.elementFromPoint(r,i);this.__controller.seek(S(o),e,t),Pe().setOptions(n).createLeftOf(this.__controller.cursor)},t.setAriaLabel=function(e){return this.__controller.ariaLabel=e&&"string"==typeof e&&""!=e?e:"Math Input",this},t.getAriaLabel=function(){return this.__controller.ariaLabel||"Math Input"},t.setAriaPostLabel=function(e,t){var n=this.__controller;return e&&"string"==typeof e&&""!=e?(e!==n.ariaPostLabel&&"number"==typeof t&&(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),this.ariaAlertTimeout=setTimeout(function(){S(document.activeElement).closest(S(n.container)).length&&W.alert(this.mathspeak().trim()+" "+e.trim())}.bind(this),t)),n.ariaPostLabel=e):(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),n.ariaPostLabel=""),this},t.getAriaPostLabel=function(){return this.__controller.ariaPostLabel||""},t.clickAt=function(e,t,n){n=n||document.elementFromPoint(e,t);var r=this.__controller,i=r.root;return y.contains(i.jQ[0],n)||(n=i.jQ[0]),r.seek(S(n),e+pageXOffset,t+pageYOffset),r.blurred&&this.focus(),this},t.ignoreNextMousedown=function(e){return this.__controller.cursor.options.ignoreNextMousedown=e,this}}),n.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},n.EditableField.prototype=i.EditableField.prototype;for(var a in F)!function(e,r){var o=i[e]=r(i);n[e]=function(r,i){var a=n(r);if(a instanceof o||!r||!r.nodeType)return a;var s=O(o.RootBlock(),S(r),N());return s.KIND_OF_MQ=e,o(s).__mathquillify(i,t)},n[e].prototype=o.prototype}(a,F[a]);return n}function p(e){for(var t="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),n=0;n<t.length;n+=1)!function(t){e[t]=function(e){this.controller.handle(t,e)}}(t[n]);e.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function h(e){var t=this.parent,n=e;do{if(n[_])return e.insLeftOf(t);n=n.parent.parent}while(n!==t);e.insRightOf(t)}function f(e,t){e.jQadd=function(){t.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")}}function m(e,n,r){var n=n||e,i=Te[e],o=Te[n];D[e]=t(Ie,w,e,i,n,o),D[i]=t(Ie,_,e,i,n,o),Le[e]=Le[i]=r}var g,y=window.jQuery,v=Math.min,b=Math.max;if(!y)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";var x=[].slice,E=function(e,t,n){function r(e){return"object"==typeof e}function i(e){return"function"==typeof e}function o(){}return function e(n,a){function s(){var e=new c;return i(e.init)&&e.init.apply(e,arguments),e}function c(){}void 0===a&&(a=n,n=Object),s.Bare=c;var l,u=o.prototype=n.prototype,d=c.prototype=s.prototype=s.p=new o;return d.constructor=s,s.extend=function(t){return e(s,t)},(s.open=function(e){if(l={},i(e)?l=e.call(s,d,u,s,n):r(e)&&(l=e),r(l))for(var o in l)t.call(l,o)&&(d[o]=l[o]);return i(d.init)||(d.init=n),s})(a)}}(0,{}.hasOwnProperty),w=-1,_=1,S=E(y,function(e){e.insDirOf=function(e,t){return e===w?this.insertBefore(t.first()):this.insertAfter(t.last())},e.insAtDirEnd=function(e,t){return e===w?this.prependTo(t):this.appendTo(t)}}),M=E(function(e){e.parent=0,e[w]=0,e[_]=0,e.init=function(e,t,n){this.parent=e,this[w]=t,this[_]=n},this.copy=function(e){return M(e.parent,e[w],e[_])}}),k={},C=!1,I=E(function(e){function t(){return n+=1}e[w]=0,e[_]=0,e.parent=0;var n=0;this.getNodeOfElement=function(e){if(e){if(!e.nodeType)throw new Error("must pass an HTMLElement to Node.getNodeOfElement");return e.mqBlockNode||e.mqCmdNode}},this.linkElementByBlockId=function(e,t){I.linkElementByBlockNode(e,k[t])},this.linkElementByBlockNode=function(e,t){e.mqBlockNode=t},this.linkElementByCmdNode=function(e,t){e.mqCmdNode=t},e.init=function(){this.id=t(),k[n]=this,i(),this.ends={},this.ends[w]=0,this.ends[_]=0},e.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},e.jQ=S(),e.jQadd=function(e){return this.jQ=this.jQ.add(e)},e.jQize=function(e){function t(e){if(e.getAttribute){var n=e.getAttribute("mathquill-command-id");if(n){e.removeAttribute("mathquill-command-id");var r=k[n];r.jQadd(e),I.linkElementByCmdNode(e,r)}var i=e.getAttribute("mathquill-block-id");if(i){e.removeAttribute("mathquill-block-id");var o=k[i];o.jQadd(e),I.linkElementByBlockNode(e,o)}}for(e=e.firstChild;e;e=e.nextSibling)t(e)}for(var e=S(e||this.html()),n=0;n<e.length;n+=1)t(e[n]);return e},e.createDir=function(e,t){r(e);var n=this;return n.jQize(),n.jQ.insDirOf(e,t.jQ),t[e]=n.adopt(t.parent,t[w],t[_]),n},e.createLeftOf=function(e){return this.createDir(w,e)},e.selectChildren=function(e,t){return A(e,t)},e.bubble=function(e){for(var t=this;t;t=t.parent){if(!1===e(t))break}return this},e.postOrder=function(e){return function t(n){n.eachChild(t),e(n)}(this),this},e.isEmpty=function(){return 0===this.ends[w]&&0===this.ends[_]},e.isEmptyParens=function(){return!!this.isEmpty()&&(!!this.parent&&"\\left("===this.parent.ctrlSeq)},e.isEmptySquareBrackets=function(){return!!this.isEmpty()&&(!!this.parent&&"\\left["===this.parent.ctrlSeq)},e.isStyleBlock=function(){return!1},e.children=function(){return T(this.ends[w],this.ends[_])},e.eachChild=function(e){return a(this.ends,e),this},e.foldChildren=function(e,t){return s(this.ends,e,t)},e.withDirAdopt=function(e,t,n,r){return T(this,this).withDirAdopt(e,t,n,r),this},e.adopt=function(e,t,n){return T(this,this).adopt(e,t,n),this},e.disown=function(){return T(this,this).disown(),this},e.remove=function(){return this.jQ.remove(),this.disown()},e.isParentSimpleSubscript=function(){return!!this.parent&&(this.parent.parent instanceof Ee&&!!this.parent.jQ.hasClass("dcg-mq-sub"))},e.finalizeTree=function(){},e.contactWeld=function(){},e.blur=function(){},e.intentionalBlur=function(){},e.reflow=function(){},e.registerInnerField=function(){}}),T=E(function(e){e.init=function(e,t,i){if(i===g&&(i=w),r(i),n("no half-empty fragments",!e==!t),this.ends={},e){n("withDir is passed to Fragment",e instanceof I),n("oppDir is passed to Fragment",t instanceof I),n("withDir and oppDir have the same parent",e.parent===t.parent),this.ends[i]=e,this.ends[-i]=t;var o=this.fold([],function(e,t){return e.push.apply(e,t.jQ.get()),e});this.jQ=this.jQ.add(o)}},e.jQ=S(),e.withDirAdopt=function(e,t,n,r){return e===w?this.adopt(t,n,r):this.adopt(t,r,n)},e.adopt=function(e,t,n){c(e,t,n);var r=this;r.disowned=!1;var i=r.ends[w];if(!i)return this;var o=r.ends[_];return t||(e.ends[w]=i),n?n[w]=o:e.ends[_]=o,r.ends[_][_]=n,r.each(function(n){n[w]=t,n.parent=e,t&&(t[_]=n),t=n}),r},e.disown=function(){var e=this,t=e.ends[w];if(!t||e.disowned)return e;e.disowned=!0;var n=e.ends[_],r=t.parent;return c(r,t[w],t),c(r,n,n[_]),t[w]?t[w][_]=n[_]:r.ends[w]=n[_],n[_]?n[_][w]=t[w]:r.ends[_]=t[w],e},e.remove=function(){return this.jQ.remove(),this.disown()},e.each=function(e){return a(this.ends,e),this},e.fold=function(e,t){return s(this.ends,e,t)}}),L={},D={},P=E(M,function(e){e.init=function(e,t,n){this.controller=n,this.parent=e,this.options=t;var r=this.jQ=this._jQ=S('<span class="dcg-mq-cursor">&#8203;</span>');this.blink=function(){r.toggleClass("dcg-mq-blink")},this.upDownCache={}},e.show=function(){return this.jQ=this._jQ.removeClass("dcg-mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[_]?this.selection&&this.selection.ends[w][w]===this[w]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[_].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},e.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=S(),this},e.withDirInsertAt=function(e,t,n,r){var i=this.parent;this.parent=t,this[e]=n,this[-e]=r,i!==t&&i.blur&&i.blur(this)},e.insDirOf=function(e,t){return r(e),this.jQ.insDirOf(e,t.jQ),this.withDirInsertAt(e,t.parent,t[e],t),this.parent.jQ.addClass("dcg-mq-hasCursor"),this},e.insLeftOf=function(e){return this.insDirOf(w,e)},e.insRightOf=function(e){return this.insDirOf(_,e)},e.insAtDirEnd=function(e,t){return r(e),this.jQ.insAtDirEnd(e,t.jQ),this.withDirInsertAt(e,t,0,t.ends[e]),t.focus(),this},e.insAtLeftEnd=function(e){return this.insAtDirEnd(w,e)},e.insAtRightEnd=function(e){return this.insAtDirEnd(_,e)},e.jumpUpDown=function(e,t){var n=this;n.upDownCache[e.id]=M.copy(n);var r=n.upDownCache[t.id];if(r)r[_]?n.insLeftOf(r[_]):n.insAtRightEnd(r.parent);else{var i=n.offset().left;t.seek(i,n)}W.queue(t,!0)},e.offset=function(){var e=this,t=e.jQ.removeClass("dcg-mq-cursor").offset();return e.jQ.addClass("dcg-mq-cursor"),t},e.unwrapGramp=function(){var e=this.parent.parent,t=e.parent,n=e[_],r=this,i=e[w];if(e.disown().eachChild(function(r){r.isEmpty()||(r.children().adopt(t,i,n).each(function(t){t.jQ.insertBefore(e.jQ.first())}),i=r.ends[_])}),!this[_])if(this[w])this[_]=this[w][_];else for(;!this[_];){if(this.parent=this.parent[_],!this.parent){this[_]=e[_],this.parent=t;break}this[_]=this.parent.ends[w]}this[_]?this.insLeftOf(this[_]):this.insAtRightEnd(t),e.jQ.remove(),e[w].siblingDeleted&&e[w].siblingDeleted(r.options,_),e[_].siblingDeleted&&e[_].siblingDeleted(r.options,w)},e.startSelection=function(){for(var e=this.anticursor=M.copy(this),t=e.ancestors={},n=e;n.parent;n=n.parent)t[n.parent.id]=n},e.endSelection=function(){delete this.anticursor},e.select=function(){var e=this.anticursor;if(this[w]===e[w]&&this.parent===e.parent)return!1;for(var t=this;t.parent;t=t.parent)if(t.parent.id in e.ancestors){var r=t.parent;break}n("cursor and anticursor in the same tree",r);var i,o,a=e.ancestors[r.id],s=_;if(t[w]!==a)for(var c=t;c;c=c[_])if(c[_]===a[_]){s=w,i=t,o=a;break}return s===_&&(i=a,o=t),i instanceof M&&(i=i[_]),o instanceof M&&(o=o[w]),this.hide().selection=r.selectChildren(i,o),this.insDirOf(s,this.selection.ends[s]),this.selectionChanged(),!0},e.resetToEnd=function(e){this.clearSelection();var t=e.root;this[_]=0,this[w]=t.ends[_],this.parent=t},e.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},e.deleteSelection=function(){this.selection&&(this[w]=this.selection.ends[w][w],this[_]=this.selection.ends[_][_],this.selection.remove(),this.selectionChanged(),delete this.selection)},e.replaceSelection=function(){var e=this.selection;return e&&(this[w]=e.ends[w][w],this[_]=e.ends[_][_],delete this.selection),e}}),A=E(T,function(e,t){e.init=function(){t.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="dcg-mq-selection"></span>').parent()},e.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)},e.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},e.join=function(e,t){var n=t||"";return this.fold("",function(t,r){return t+n+r[e]()})}}),O=E(function(e){e.init=function(e,t,n){this.id=e.id,this.data={},this.root=e,this.container=t,this.options=n,this.ariaLabel="Math Input",this.ariaPostLabel="",e.controller=this,this.cursor=e.cursor=P(e,n,this)},e.handle=function(e,t){var n=this.options.handlers;if(n&&n.fns[e]){var r=n.APIClasses[this.KIND_OF_MQ](this);t===w||t===_?n.fns[e](t,r):n.fns[e](r)}};var t=[];this.onNotify=function(e){t.push(e)},e.notify=function(){for(var e=0;e<t.length;e+=1)t[e].apply(this.cursor,arguments);return this}}),F={},N=E(),q={},R=E(),B={};u.prototype=R.p,u.VERSION="v0.10.1",u.interfaceVersion=function(e){if(1!==e)throw"Only interface version 1 supported. You specified: "+e;return l=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (2014–2015) → v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')},l(),u},u.getInterface=d;var j=d.MIN=1,V=d.MAX=2;u.noConflict=function(){return window.MathQuill=U,u};var U=window.MathQuill;window.MathQuill=u;var G=E(function(e,t,r){function i(e,t){throw e=e?"'"+e+"'":"EOF","Parse Error: "+t+" at "+e}e.init=function(e){this._=e},e.parse=function(e){function t(e,t){return t}return this.skip(s)._(""+e,t,i)},e.or=function(e){n("or is passed a parser",e instanceof r);var t=this;return r(function(n,r,i){function o(t){return e._(n,r,i)}return t._(n,r,o)})},
e.then=function(e){var t=this;return r(function(i,o,a){function s(t,i){var s=e instanceof r?e:e(i);return n("a parser is returned",s instanceof r),s._(t,o,a)}return t._(i,s,a)})},e.many=function(){var e=this;return r(function(t,n,r){function i(e,n){return t=e,a.push(n),!0}function o(){return!1}for(var a=[];e._(t,i,o););return n(t,a)})},e.times=function(e,t){arguments.length<2&&(t=e);var n=this;return r(function(r,i,o){function a(e,t){return u.push(t),r=e,!0}function s(e,t){return l=t,r=e,!1}function c(e,t){return!1}for(var l,u=[],d=!0,p=0;p<e;p+=1)if(!(d=n._(r,a,s)))return o(r,l);for(;p<t&&d;p+=1)d=n._(r,a,c);return i(r,u)})},e.result=function(e){return this.then(a(e))},e.atMost=function(e){return this.times(0,e)},e.atLeast=function(e){var t=this;return t.times(e).then(function(e){return t.many().map(function(t){return e.concat(t)})})},e.map=function(e){return this.then(function(t){return a(e(t))})},e.skip=function(e){return this.then(function(t){return e.result(t)})};var o=(this.string=function(e){var t=e.length,n="expected '"+e+"'";return r(function(r,i,o){var a=r.slice(0,t);return a===e?i(r.slice(t),a):o(r,n)})},this.regex=function(e){n("regexp parser is anchored","^"===e.toString().charAt(1));var t="expected "+e;return r(function(n,r,i){var o=e.exec(n);if(o){var a=o[0];return r(n.slice(a.length),a)}return i(n,t)})}),a=r.succeed=function(e){return r(function(t,n){return n(t,e)})},s=(r.fail=function(e){return r(function(t,n,r){return r(t,e)})},r.letter=o(/^[a-z]/i),r.letters=o(/^[a-z]*/i),r.digit=o(/^[0-9]/),r.digits=o(/^[0-9]*/),r.whitespace=o(/^\s+/),r.optWhitespace=o(/^\s*/),r.any=r(function(e,t,n){return e?t(e.slice(1),e.charAt(0)):n(e,"expected any character")}),r.all=r(function(e,t,n){return t("",e)}),r.eof=r(function(e,t,n){return e?n(e,"expected EOF"):t(e,e)}))}),z=function(){function t(e){var t,r=e.which||e.keyCode,i=n[r],o=[];return e.ctrlKey&&o.push("Ctrl"),e.originalEvent&&e.originalEvent.metaKey&&o.push("Meta"),e.altKey&&o.push("Alt"),e.shiftKey&&o.push("Shift"),t=i||String.fromCharCode(r),o.length||i?(o.push(t),o.join("-")):t}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,r){function i(e){S=e,clearTimeout(b),b=setTimeout(e)}function o(t){i(function(n){S=e,clearTimeout(b),t(n)})}function a(){try{w[0].select()}catch(e){}}function s(t){S(),S=e,clearTimeout(b),w.val(t),t&&a(),M=!!t}function c(){var e=w[0];return"selectionStart"in e&&e.selectionStart!==e.selectionEnd}function l(){r.options&&r.options.overrideKeystroke?r.options.overrideKeystroke(t(x),x):r.keystroke(t(x),x)}function u(e){x=e,E=null,M&&o(function(e){e&&"focusout"===e.type||a()}),l()}function d(e){if(!e||!e.originalEvent)return!1;switch(e.originalEvent.key){case"ArrowRight":case"ArrowLeft":case"ArrowDown":case"ArrowUp":return!0}return!1}function p(e){x&&E&&l(),E=e,d(e)||i(f)}function h(e){x&&!E&&(d(e)||i(f))}function f(){if(!c()){var e=w.val();1===e.length?(w.val(""),r.options&&r.options.overrideTypedText?r.options.overrideTypedText(e):r.typedText(e)):e&&a()}}function m(){x=null,E=null,S=e,clearTimeout(b),w.val("")}function g(e){w.focus(),i(v)}function v(){var e=w.val();w.val(""),e&&r.paste(e)}var b,x=null,E=null,w=y(n),_=y(r.container||w),S=e;_.bind("keydown keypress input keyup paste",function(e){S(e)});var M=!1;return r.options&&r.options.disableCopyPaste?_.bind({keydown:u,keypress:p,keyup:h,focusout:m,copy:function(e){e.preventDefault()},cut:function(e){e.preventDefault()},paste:function(e){e.preventDefault()}}):_.bind({keydown:u,keypress:p,keyup:h,focusout:m,cut:function(){o(function(){r.cut()})},copy:function(){o(function(){r.copy()})},paste:g}),{select:s}}}(),H=E(function(e){e.init=function(){this.jQ=y([]),y(document).ready(function(){var e=".dcg-mq-aria-alert";y(e).length||y("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-mq-aria-alert'></p>"),this.jQ=y(e)}.bind(this)),this.items=[],this.msg=""},e.queue=function(e,t){return e instanceof I&&(e=t?e.parent&&e.parent.ariaLabel&&"block"===e.ariaLabel?e.parent.ariaLabel+" "+e.mathspeak():e.ariaLabel?e.ariaLabel+" "+e.mathspeak():e.mathspeak():e.mathspeak()),this.items.push(e),this},e.queueDirOf=function(e){return r(e),this.queue(e===w?"before":"after")},e.queueDirEndOf=function(e){return r(e),this.queue(e===w?"beginning of":"end of")},e.alert=function(e){return e&&this.queue(e),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.jQ.empty().text(this.msg)),this.clear()},e.clear=function(){return this.items.length=0,this}}),W=H();O.open(function(e){e.aria=W,e.exportMathSpeak=function(){return this.root.mathspeak()}}),O.open(function(e,t){e.exportText=function(){return this.root.foldChildren("",function(e,t){return e+t.text()})}}),O.open(function(e){this.onNotify(function(e){if("edit"===e||"replace"===e||e===g){var t=this.controller;if(!t)return;if(!t.options.enableDigitGrouping)return;if(!1!==t.blurred)return;t.disableGroupingForSeconds(1)}}),e.disableGroupingForSeconds=function(e){clearTimeout(this.__disableGroupingTimeout);var t=this.root.jQ;0===e?t.removeClass("dcg-mq-suppress-grouping"):(t.addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){t.removeClass("dcg-mq-suppress-grouping")},1e3*e))},e.focusBlurEvents=function(){function e(){clearTimeout(r),a.selection&&a.selection.jQ.addClass("dcg-mq-blur"),t(),n()}function t(){a.hide().parent.blur(),i.container.removeClass("dcg-mq-focused"),S(window).unbind("blur",e),i.options&&i.options.resetCursorOnBlur&&a.resetToEnd(i)}function n(){var e=(i.ariaLabel+": "+o.mathspeak()+" "+i.ariaPostLabel).trim();W.jQ.empty(),i.textarea.attr("aria-label",e),i.container.attr("aria-label",e)}var r,i=this,o=i.root,a=i.cursor;i.textarea.focus(function(){n(),i.blurred=!1,clearTimeout(r),i.container.addClass("dcg-mq-focused"),a.parent||a.insAtRightEnd(o),a.selection?(a.selection.jQ.removeClass("dcg-mq-blur"),i.selectionChanged()):a.show(),i.setOverflowClasses()}).blur(function(){i.textareaSelectionTimeout&&(clearTimeout(i.textareaSelectionTimeout),i.textareaSelectionTimeout=g),i.disableGroupingForSeconds(0),i.blurred=!0,r=setTimeout(function(){o.postOrder(function(e){e.intentionalBlur()}),a.clearSelection().endSelection(),t(),n(),i.scrollHoriz()}),S(window).bind("blur",e)}),n(),i.blurred=!0,a.hide().parent.blur()}}),O.open(function(e){e.keystroke=function(e,t){this.cursor.parent.keystroke(e,t,this)}}),I.open(function(e){e.keystroke=function(e,t,n){var r=n.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(w);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(_,e,t);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(w,e,t);case"End":n.notify("move").cursor.insAtRightEnd(r.parent),W.queue("end of").queue(r.parent,!0);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root),W.queue("end of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-End":for(;r[_];)n.selectRight();break;case"Ctrl-Shift-End":for(;r[_]||r.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(r.parent),W.queue("beginning of").queue(r.parent,!0);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root),W.queue("beginning of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-Home":for(;r[w];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;r[w]||r.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(r[w])for(;r[w];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(r[_])for(;r[_];)n.selectRight();else n.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(_);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);r[w];)n.selectLeft();break;case"Ctrl-Alt-Up":r.parent.parent&&r.parent.parent instanceof I?W.queue(r.parent.parent):W.queue("nothing above");break;case"Ctrl-Alt-Down":r.parent&&r.parent instanceof I?W.queue(r.parent):W.queue("block is empty");break;case"Ctrl-Alt-Left":r.parent.parent&&r.parent.parent.ends&&r.parent.parent.ends[w]&&r.parent.parent.ends[w]instanceof I?W.queue(r.parent.parent.ends[w]):W.queue("nothing to the left");break;case"Ctrl-Alt-Right":r.parent.parent&&r.parent.parent.ends&&r.parent.parent.ends[_]&&r.parent.parent.ends[_]instanceof I?W.queue(r.parent.parent.ends[_]):W.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":r.selection?W.queue(r.selection.join("mathspeak"," ").trim()+" selected"):W.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":n.ariaPostLabel.length?W.queue(n.ariaPostLabel):W.queue("no answer");break;default:return}W.alert(),t.preventDefault(),n.scrollHoriz()},e.moveOutOf=e.moveTowards=e.deleteOutOf=e.deleteTowards=e.unselectInto=e.selectOutOf=e.selectTowards=function(){n("overridden or never called on this node")}}),O.open(function(e){function t(e,t){var n=e.notify("upDown").cursor,r=t+"Into",i=t+"OutOf";return n[_][r]?n.insAtLeftEnd(n[_][r]):n[w][r]?n.insAtRightEnd(n[w][r]):n.parent.bubble(function(e){var t=e[i];if(t&&("function"==typeof t&&(t=e[i](n)),t instanceof I&&n.jumpUpDown(e,t),!0!==t))return!1}),e}this.onNotify(function(e){"move"!==e&&"upDown"!==e||this.show().clearSelection()}),e.escapeDir=function(e,t,n){r(e);var i=this.cursor;if(i.parent!==this.root&&n.preventDefault(),i.parent!==this.root)return i.parent.moveOutOf(e,i),W.alert(),this.notify("move")},q.leftRightIntoCmdGoes=function(e){if(e&&"up"!==e&&"down"!==e)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+e+'"';return e},e.moveDir=function(e){r(e);var t=this.cursor,n=t.options.leftRightIntoCmdGoes;return t.selection?t.insDirOf(e,t.selection.ends[e]):t[e]?t[e].moveTowards(e,t,n):t.parent.moveOutOf(e,t,n),this.notify("move")},e.moveLeft=function(){return this.moveDir(w)},e.moveRight=function(){return this.moveDir(_)},e.moveUp=function(){return t(this,"up")},e.moveDown=function(){return t(this,"down")},this.onNotify(function(e){"upDown"!==e&&(this.upDownCache={})}),this.onNotify(function(e){"edit"===e&&this.show().deleteSelection()}),e.deleteDir=function(e){r(e);var t=this.cursor,n=t[e],i=t.parent.parent;if(n&&n instanceof I)n.sides?W.queue(n.parent.chToCmd(n.sides[-e].ch).mathspeak({createdLeftOf:t})):n.blocks||"\\text"===n.parent.ctrlSeq||W.queue(n);else if(i&&i instanceof I)if(i.sides)W.queue(i.parent.chToCmd(i.sides[e].ch).mathspeak({createdLeftOf:t}));else if(i.blocks&&i.mathspeakTemplate)if(i.upInto&&i.downInto)W.queue(i.mathspeakTemplate[1]);else{var o=i.mathspeakTemplate,a=e===w?o[0]:o[o.length-1];W.queue(a)}else W.queue(i);var s=t.selection;return this.notify("edit"),s||(t[e]?t[e].deleteTowards(e,t):t.parent.deleteOutOf(e,t)),t[w].siblingDeleted&&t[w].siblingDeleted(t.options,_),t[_].siblingDeleted&&t[_].siblingDeleted(t.options,w),t.parent.bubble(function(e){e.reflow()}),this},e.ctrlDeleteDir=function(e){r(e);var t=this.cursor;if(!t[e]||t.selection)return this.deleteDir(e);this.notify("edit");var n;return n=e===w?T(t.parent.ends[w],t[w]):T(t[_],t.parent.ends[_]),W.queue(n),n.remove(),t.insAtDirEnd(e,t.parent),t[w].siblingDeleted&&t[w].siblingDeleted(t.options,_),t[_].siblingDeleted&&t[_].siblingDeleted(t.options,w),t.parent.bubble(function(e){e.reflow()}),this},e.backspace=function(){return this.deleteDir(w)},e.deleteForward=function(){return this.deleteDir(_)},this.onNotify(function(e){"select"!==e&&this.endSelection()}),e.selectDir=function(e){var t=this.notify("select").cursor,n=t.selection;r(e),t.anticursor||t.startSelection();var i=t[e];i?n&&n.ends[e]===i&&t.anticursor[-e]!==i?i.unselectInto(e,t):i.selectTowards(e,t):t.parent.selectOutOf(e,t),t.clearSelection(),t.select()||t.show(),t.selection&&W.clear().queue(t.selection.join("mathspeak"," ").trim()+" selected")},e.selectLeft=function(){return this.selectDir(w)},e.selectRight=function(){return this.selectDir(_)}});var K=function(){function e(e){var t=J();return e.adopt(t,0,0),t}function t(e){for(var t=e[0]||J(),n=1;n<e.length;n+=1)e[n].children().adopt(t,t.ends[_],0);return t}var n=G.string,r=G.regex,i=G.letter,o=G.digit,a=G.any,s=G.optWhitespace,c=G.succeed,l=G.fail,u=i.map(function(e){return ie(e)}),d=o.map(function(e){return ne(e)}),p=r(/^[^${}\\_^]/).map(function(e){return Q(e)}),h=r(/^[^\\a-eg-zA-Z]/).or(n("\\").then(r(/^[a-z]+/i).or(r(/^\s+/).result(" ")).or(a))).then(function(e){var t=L[e];return t?t(e).parser():l("unknown command: \\"+e)}),f=h.or(u).or(d).or(p),m=n("{").then(function(){return y}).skip(n("}")),g=s.then(m.or(f.map(e))),y=g.many().map(t).skip(s),v=n("[").then(g.then(function(e){return"]"!==e.join("latex")?c(e):l()}).many().map(t).skip(s)).skip(n("]")),b=y;return b.block=g,b.optBlock=v,b}();O.open(function(e,t){e.cleanLatex=function(e){return e.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},e.exportLatex=function(){return this.cleanLatex(this.root.latex())},e.writeLatex=function(e){var t=this.notify("edit").cursor,n=G.all,r=G.eof,i=K.skip(r).or(n.result(!1)).parse(e);if(i&&!i.isEmpty()){i.children().adopt(t.parent,t[w],t[_]);i.jQize().insertBefore(t.jQ),t[w]=i.ends[_],i.finalizeInsert(t.options,t),i.ends[_][_].siblingCreated&&i.ends[_][_].siblingCreated(t.options,w),i.ends[w][w].siblingCreated&&i.ends[w][w].siblingCreated(t.options,_),t.parent.bubble(function(e){e.reflow()})}return this},e.classifyLatexForEfficientUpdate=function(e){if("string"==typeof e){var t=e.match(/-?[0-9.]+$/g);return t&&1===t.length?{latex:e,prefix:e.substr(0,e.length-t[0].length),digits:t[0]}:void 0}},e.renderLatexMathEfficiently=function(e){var t,n,r=this.classifyLatexForEfficientUpdate(e);if(!r)return!1;if(t=this.exportLatex(),!(n=this.classifyLatexForEfficientUpdate(t))||n.prefix!==r.prefix)return!1;var i=this.root,o=n.digits,a=r.digits,s=!1,c=!1;"-"===o[0]&&(s=!0,o=o.substr(1)),"-"===a[0]&&(c=!0,a=a.substr(1));for(var l=this.root.ends[_],u=[],d=o.length-1;d>=0;d--){if(l.ctrlSeq!==o[d])return!1;if(l.parent!==i)return!1;u.unshift(l),l=l[w]}if(s&&!c){var p=l;if("-"!==p.ctrlSeq)return!1;if(p[_]!==u[0])return!1;if(p.parent!==i)return!1;if(p[w]&&p[w].parent!==i)return!1;u[0][w]=p[w],i.ends[w]===p&&(i.ends[w]=u[0]),p[w]&&(p[w][_]=u[0]),p.jQ.remove()}if(!s&&c){var h=pe("-"),f=document.createElement("span");f.textContent="-",h.jQ=S(f),u[0][w]&&(u[0][w][_]=h),i.ends[w]===u[0]&&(i.ends[w]=h),h.parent=i,h[w]=u[0][w],h[_]=u[0],u[0][w]=h,h.contactWeld(),h.jQ.insertBefore(u[0].jQ)}var m=Math.min(o.length,a.length);for(d=0;d<m;d++){var g=a[d];l=u[d],l.ctrlSeq!==g&&(l.ctrlSeq=g,l.jQ[0].textContent=g,l.mathspeakName=g)}if(o.length>a.length)for(l=u[a.length-1],i.ends[_]=l,l[_]=0,d=o.length-1;d>=m;d--)u[d].jQ.remove();if(a.length>o.length){var y=document.createDocumentFragment();for(d=m;d<a.length;d++){var v=document.createElement("span");v.className="dcg-mq-digit",v.textContent=a[d];var b=ne(a[d]);b.parent=i,b.jQ=S(v),y.appendChild(v),b[w]=i.ends[_],b[_]=0,b[w][_]=b,i.ends[_]=b}i.jQ[0].appendChild(y)}var x=this.exportLatex();if(x!==e)return console.warn("tried updating latex efficiently but did not work. Attempted: "+e+" but wrote: "+x),!1;this.cursor.resetToEnd(this);var E=i.ends[_];return E.fixDigitGrouping&&E.fixDigitGrouping(this.cursor.options),!0},e.renderLatexMathFromScratch=function(e){var t=this.root,n=this.cursor,r=G.all,i=G.eof,o=K.skip(i).or(r.result(!1)).parse(e);t.ends[w]=t.ends[_]=0,o&&o.children().adopt(t,0,0);var a=t.jQ;if(o){var s=o.join("html");a.html(s),t.jQize(a.children()),t.finalizeInsert(n.options)}else a.empty();var c=this.ariaLabel&&"Math Input"!==this.ariaLabel?this.ariaLabel+": ":"";this.container.attr("aria-label",c+t.mathspeak().trim()),delete n.selection,n.insAtRightEnd(t)},e.renderLatexMath=function(e){this.notify("replace"),this.renderLatexMathEfficiently(e)||this.renderLatexMathFromScratch(e)},e.renderLatexText=function(e){var t=this.root,n=this.cursor;t.jQ.children().slice(1).remove(),t.ends[w]=t.ends[_]=0,delete n.selection,n.show().insAtRightEnd(t);var r=G.regex,i=G.string,o=G.eof,a=G.all,s=i("$").then(K).skip(i("$").or(o)).map(function(e){var t=RootMathCommand(n);t.createBlocks();var r=t.ends[w];return e.children().adopt(r,0,0),t}),c=i("\\$").result("$"),l=c.or(r(/^[^$]/)).map(Q),u=s.or(l).many(),d=u.skip(o).or(a.result(!1)).parse(e);if(d){for(var p=0;p<d.length;p+=1)d[p].adopt(t,t.ends[_],0);t.jQize().appendTo(t.jQ),t.finalizeInsert(n.options)}}}),O.open(function(t){N.p.ignoreNextMousedown=e;var n;this.onNotify(function(e){"edit"!==e&&"replace"!==e||n&&n.cursor===this&&n.cb()}),t.delegateMouseEvents=function(){var t=this.root.jQ;this.container.bind("mousedown.mathquill",function(r){function i(e){y=S(e.target)}function o(e){p.anticursor||p.startSelection(),d.seek(y,e.pageX,e.pageY).cursor.select(),p.selection&&W.clear().queue(p.selection.join("mathspeak")+" selected").alert(),y=g}function a(e){l.unbind("mousemove",i),S(e.target.ownerDocument).unbind("mousemove",o).unbind("mouseup",c),n=g}function s(){d.editable?(p.show(),W.queue(p.parent).alert()):f.detach()}function c(e){p.blink=h,p.selection||s(),a(e)}var l=S(r.target).closest(".dcg-mq-root-block"),u=I.getNodeOfElement(l[0])||I.getNodeOfElement(t[0]),d=u.controller,p=d.cursor,h=p.blink,f=d.textareaSpan,m=d.textarea;if(r.preventDefault(),r.target.unselectable=!0,!p.options.ignoreNextMousedown(r)){p.options.ignoreNextMousedown=e;var y,v;n={cursor:p,cb:function(){v=!0,p.blink=h,p.clearSelection(),s(),a(r)}},d.blurred&&(d.editable||l.prepend(f),m.focus(),v)||(p.blink=e,d.seek(S(r.target),r.pageX,r.pageY).cursor.startSelection(),l.mousemove(i),S(r.target.ownerDocument).mousemove(o).mouseup(c))}})}}),O.open(function(e){e.seek=function(e,t,n){for(var r,i=this.notify("select").cursor,o=e&&e[0];o&&!(r=I.getNodeOfElement(o));)o=o.parentElement;return r||(r=this.root),i.clearSelection().show(),r.seek(t,i),this.scrollHoriz(),this}}),O.open(function(e){e.setOverflowClasses=function(){var e=this.root.jQ[0],t=!1,n=!1;if(!this.blurred){var r=e.getBoundingClientRect().width,i=e.scrollWidth,o=e.scrollLeft;t=i>r+o,n=o>0}e.classList.contains("dcg-mq-editing-overflow-right")!==t&&e.classList.toggle("dcg-mq-editing-overflow-right"),e.classList.contains("dcg-mq-editing-overflow-left")!==n&&e.classList.toggle("dcg-mq-editing-overflow-left")},e.scrollHoriz=function(){var e=this.cursor,t=e.selection,n=this.root.jQ[0].getBoundingClientRect();if(!e.jQ[0]&&!t)return void this.root.jQ.stop().animate({scrollLeft:0},100,function(){this.setOverflowClasses()}.bind(this));if(t){var r=t.jQ[0].getBoundingClientRect(),i=r.left-(n.left+20),o=r.right-(n.right-20);if(t.ends[w]===e[_])if(i<0)var a=i;else{if(!(o>0))return;if(r.left-o<n.left+20)var a=i;else var a=o}else if(o>0)var a=o;else{if(!(i<0))return;if(r.right-i>n.right-20)var a=o;else var a=i}}else{var s=e.jQ[0].getBoundingClientRect().left;if(s>n.right-20)var a=s-(n.right-20);else{if(!(s<n.left+20))return;var a=s-(n.left+20)}}var c=this.root.jQ[0];a<0&&0===c.scrollLeft||a>0&&c.scrollWidth<=c.scrollLeft+n.width||this.root.jQ.stop().animate({scrollLeft:"+="+a},100,function(){this.setOverflowClasses()}.bind(this))}}),O.open(function(e){N.p.substituteTextarea=function(){return S("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]},e.createTextarea=function(){var e=this.textareaSpan=S('<span class="dcg-mq-textarea"></span>'),t=this.options.substituteTextarea();if(!t.nodeType)throw"substituteTextarea() must return a DOM element, got "+t;t=this.textarea=S(t).appendTo(e);var n=this;n.cursor.selectionChanged=function(){n.selectionChanged()}},e.selectionChanged=function(){var e=this;e.textareaSelectionTimeout===g&&(e.textareaSelectionTimeout=setTimeout(function(){e.setTextareaSelection()}))},e.setTextareaSelection=function(){this.textareaSelectionTimeout=g;var e="";this.cursor.selection&&(e=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(e="$"+e+"$")),this.selectFn(e)},e.staticMathTextareaEvents=function(){function e(){o.detach(),t.blurred=!0}var t=this,n=t.root,r=t.cursor,i=t.textarea,o=t.textareaSpan;this.container.prepend('<span aria-hidden="true" class="dcg-mq-selectable">$'+t.exportLatex()+"$</span>"),t.blurred=!0,i.bind("cut paste",!1),t.options.disableCopyPaste?i.bind("copy",!1):i.bind("copy",function(){t.setTextareaSelection()}),i.focus(function(){t.blurred=!1}).blur(function(){r.selection&&r.selection.clear(),setTimeout(e)}),t.selectFn=function(e){i.val(e),e&&i.select()};var a=t&&"Math Input"!==t.ariaLabel?t.ariaLabel+": ":"";t.container.attr("aria-label",a+n.mathspeak().trim());var s=navigator.userAgent||navigator.vendor||window.opera,c=/iPad|iPhone|iPod/.test(s)&&!window.Stream;-1!==navigator.appVersion.indexOf("Mac")&&!c||t.container.attr("role","math")},N.p.substituteKeyboardEvents=z,e.editablesTextareaEvents=function(){var e=this,t=e.textarea,n=e.textareaSpan,r=this.options.substituteKeyboardEvents(t,this);this.selectFn=function(e){r.select(e)},this.container.prepend(n),this.focusBlurEvents()},e.typedText=function(e){if("\n"===e)return this.handle("enter");var t=this.notify().cursor;t.parent.write(t,e),this.scrollHoriz()},e.cut=function(){var e=this,t=e.cursor;t.selection&&setTimeout(function(){e.notify("edit"),t.parent.bubble(function(e){e.reflow()}),e.options&&e.options.onCut&&e.options.onCut()})},e.copy=function(){this.setTextareaSelection()},e.paste=function(e){this.options.statelessClipboard&&(e="$"===e.slice(0,1)&&"$"===e.slice(-1)?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()}});var Y=E(I,function(e,t){e.finalizeInsert=function(e,t){var n=this;n.postOrder(function(t){t.finalizeTree(e)}),n.postOrder(function(e){e.contactWeld(t)}),n.postOrder(function(e){e.blur()}),n.postOrder(function(e){e.reflow()}),n[_].siblingCreated&&n[_].siblingCreated(e,w),n[w].siblingCreated&&n[w].siblingCreated(e,_),n.bubble(function(e){e.reflow()})}}),X=E(Y,function(e,t){e.init=function(e,n,r){var i=this;t.init.call(i),i.ctrlSeq||(i.ctrlSeq=e),n&&(i.htmlTemplate=n),r&&(i.textTemplate=r)},e.replaces=function(e){e.disown(),this.replacedFragment=e},e.isEmpty=function(){return this.foldChildren(!0,function(e,t){return e&&t.isEmpty()})},e.parser=function(){var e=K.block,t=this;return e.times(t.numBlocks()).map(function(e){t.blocks=e;for(var n=0;n<e.length;n+=1)e[n].adopt(t,t.ends[_],0);return t})},e.createLeftOf=function(e){var n=this,r=n.replacedFragment;n.createBlocks(),t.createLeftOf.call(n,e),r&&(r.adopt(n.ends[w],0,0),r.jQ.appendTo(n.ends[w].jQ)),n.finalizeInsert(e.options),n.placeCursor(e)},e.createBlocks=function(){for(var e=this,t=e.numBlocks(),n=e.blocks=Array(t),r=0;r<t;r+=1){(n[r]=J()).adopt(e,e.ends[_],0)}},e.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.ends[w],function(e,t){return e.isEmpty()?e:t}))},e.moveTowards=function(e,t,n){var r=n&&this[n+"Into"];t.insAtDirEnd(-e,r||this.ends[-e]),W.queueDirEndOf(-e).queue(t.parent,!0)},e.deleteTowards=function(e,t){this.isEmpty()?t[e]=this.remove()[e]:this.moveTowards(e,t,null)},e.selectTowards=function(e,t){t[-e]=this,t[e]=this[e]},e.selectChildren=function(){return A(this,this)},e.unselectInto=function(e,t){t.insAtDirEnd(-e,t.anticursor.ancestors[this.id])},e.seek=function(e,t){function n(e){var t={};return t[w]=e.jQ.offset().left,t[_]=t[w]+e.jQ.outerWidth(),t}var r=this,i=n(r);if(e<i[w])return t.insLeftOf(r);if(e>i[_])return t.insRightOf(r);var o=i[w];r.eachChild(function(a){var s=n(a);return e<s[w]?(e-o<s[w]-e?a[w]?t.insAtRightEnd(a[w]):t.insLeftOf(r):t.insAtLeftEnd(a),!1):e>s[_]?void(a[_]?o=s[_]:i[_]-e<e-s[_]?t.insRightOf(r):t.insAtRightEnd(a)):(a.seek(e,t),!1)})},e.numBlocks=function(){var e=this.htmlTemplate.match(/&\d+/g);return e?e.length:0},e.html=function(){var e=this,t=e.blocks,r=" mathquill-command-id="+e.id,i=e.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);n("no unmatched angle brackets",i.join("")===this.htmlTemplate);for(var o=0,a=i[0];a;o+=1,a=i[o])if("/>"===a.slice(-2))i[o]=a.slice(0,-2)+r+' aria-hidden="true"/>';else if("<"===a.charAt(0)){n("not an unmatched top-level close tag","/"!==a.charAt(1)),i[o]=a.slice(0,-1)+r+' aria-hidden="true">';var s=1;do{o+=1,a=i[o],n("no missing close tags",a),"</"===a.slice(0,2)?s-=1:"<"===a.charAt(0)&&"/>"!==a.slice(-2)&&(s+=1)}while(s>0)}return i.join("").replace(/>&(\d+)/g,function(e,n){return" mathquill-block-id="+t[n].id+' aria-hidden="true">'+t[n].join("html")})},e.latex=function(){return this.foldChildren(this.ctrlSeq,function(e,t){return e+"{"+(t.latex()||" ")+"}"})},e.textTemplate=[""],e.text=function(){var e=this,t=0;return e.foldChildren(e.textTemplate[t],function(n,r){t+=1;var i=r.text();return n&&"("===e.textTemplate[t]&&"("===i[0]&&")"===i.slice(-1)?n+i.slice(1,-1)+e.textTemplate[t]:n+i+(e.textTemplate[t]||"")})},e.mathspeakTemplate=[],e.mathspeak=function(){var e=this,t=0;return e.foldChildren(e.mathspeakTemplate[t]||"Start"+e.ctrlSeq+" ",function(n,r){return t+=1,n+" "+r.mathspeak()+" "+(e.mathspeakTemplate[t]+" "||"End"+e.ctrlSeq+" ")})}}),$=E(X,function(t,n){t.init=function(e,t,r,i){!r&&e&&(r=e.replace(/^\\/,"")),this.mathspeakName=i||r,n.init.call(this,e,t,[r])},t.parser=function(){return G.succeed(this)},t.numBlocks=function(){return 0},t.replaces=function(e){e.remove()},t.createBlocks=e,t.moveTowards=function(e,t){t.jQ.insDirOf(e,this.jQ),t[-e]=this,t[e]=this[e],W.queue(this)},t.deleteTowards=function(e,t){t[e]=this.remove()[e]},t.seek=function(e,t){e-this.jQ.offset().left<this.jQ.outerWidth()/2?t.insLeftOf(this):t.insRightOf(this)},t.latex=function(){return this.ctrlSeq},t.text=function(){return this.textTemplate.join("")},t.mathspeak=function(){return this.mathspeakName},t.placeCursor=e,t.isEmpty=function(){return!0}}),Q=E($,function(e,t){e.init=function(e,n,r){t.init.call(this,e,"<span>"+(n||e)+"</span>",g,r)}}),Z=E($,function(e,t){e.init=function(e,n,r,i){t.init.call(this,e,'<span class="dcg-mq-binary-operator">'+n+"</span>",r,i)}}),J=E(Y,function(e,t){e.join=function(e){return this.foldChildren("",function(t,n){return t+n[e]()})},e.html=function(){return this.join("html")},e.latex=function(){return this.join("latex")},e.text=function(){return this.ends[w]===this.ends[_]&&0!==this.ends[w]?this.ends[w].text():this.join("text")},e.mathspeak=function(){var e="",t={};return this.controller&&(t=this.controller.options.autoOperatorNames),this.foldChildren([],function(n,r){if(r.isPartOfOperator)e+=r.mathspeak();else{if(""!==e){if(t!=={}&&t._maxLength>0){var i=t[e.toLowerCase()];"string"==typeof i&&(e=i)}n.push(e+" "),e=""}var o=r.mathspeak(),a=r.ctrlSeq;isNaN(a)&&(o=" "+o,"."!==a&&(o+=" ")),n.push(o)}return n}).join("").replace(/ +(?= )/g,"")},e.ariaLabel="block",e.keystroke=function(e,n,r){return!r.options.spaceBehavesLikeTab||"Spacebar"!==e&&"Shift-Spacebar"!==e?t.keystroke.apply(this,arguments):(n.preventDefault(),void r.escapeDir("Shift-Spacebar"===e?w:_,e,n))},e.moveOutOf=function(e,t,n){n&&this.parent[n+"Into"]||!this[e]?(t.insDirOf(e,this.parent),W.queueDirOf(e).queue(this.parent)):(t.insAtDirEnd(-e,this[e]),W.queueDirEndOf(-e).queue(t.parent,!0))},e.selectOutOf=function(e,t){t.insDirOf(e,this.parent)},e.deleteOutOf=function(e,t){t.unwrapGramp()},e.seek=function(e,t){var n=this.ends[_];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<e)return t.insAtRightEnd(this);if(e<this.ends[w].jQ.offset().left)return t.insAtLeftEnd(this);for(;e<n.jQ.offset().left;)n=n[w];return n.seek(e,t)},e.chToCmd=function(e,t){var n;return e.match(/^[a-eg-zA-Z]$/)?ie(e):/^\d$/.test(e)?ne(e):t&&t.typingSlashWritesDivisionSymbol&&"/"===e?L["÷"](e):t&&t.typingAsteriskWritesTimesSymbol&&"*"===e?L["×"](e):t&&t.typingPercentWritesPercentOf&&"%"===e?L.percentof(e):(n=D[e]||L[e])?n(e):Q(e)},e.write=function(e,t){var n=this.chToCmd(t,e.options);e.selection&&n.replaces(e.replaceSelection()),n.createLeftOf(e.show()),"/"===t?W.alert("over"):W.alert(n.mathspeak({createdLeftOf:e}))},e.focus=function(){return this.jQ.addClass("dcg-mq-hasCursor"),this.jQ.removeClass("dcg-mq-empty"),this},e.blur=function(){return this.jQ.removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.jQ.addClass("dcg-mq-empty"),this.isEmptyParens()?this.jQ.addClass("dcg-mq-empty-parens"):this.isEmptySquareBrackets()&&this.jQ.addClass("dcg-mq-empty-square-brackets")),this}});F.StaticMath=function(e){return E(e.AbstractMathQuill,function(t,n){this.RootBlock=J,t.__mathquillify=function(e,t){return this.config(e),n.__mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){n.init.apply(this,arguments);var t=this.innerFields=[];this.__controller.root.postOrder(function(n){n.registerInnerField(t,e.MathField)})},t.latex=function(){var t=n.latex.apply(this,arguments);if(arguments.length>0){var r=this.innerFields=[];this.__controller.root.postOrder(function(t){t.registerInnerField(r,e.MathField)})}return t},t.setAriaLabel=function(e){this.__controller.ariaLabel="string"==typeof e?e:"";var t="Math Input"!==this.__controller.ariaLabel?this.__controller.ariaLabel+": ":"";return this.__controller.container.attr("aria-label",t+this.__controller.root.mathspeak().trim()),this},t.getAriaLabel=function(){return this.__controller.ariaLabel||""}})};var ee=E(J,p);F.MathField=function(t){return E(t.EditableField,function(t,n){this.RootBlock=ee,t.__mathquillify=function(t,r){return this.config(t),r>1&&(this.__controller.root.reflow=e),n.__mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this}})};var te=E($,function(e,t){e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==w&&this[_]instanceof te||this.fixDigitGrouping(e)},e.fixDigitGrouping=function(e){if(e.enableDigitGrouping){var t=this,n=this,r=0,i=[],o=t;do{if(/^[0-9]$/.test(o.ctrlSeq))t=o;else if("\\ "===o.ctrlSeq)t=o,r+=1;else{if("."!==o.ctrlSeq)break;t=o,i.push(o)}}while(o=t[w]);for(;o=n[_];)if(/^[0-9]$/.test(o.ctrlSeq))n=o;else if("\\ "===o.ctrlSeq)n=o,r+=1;else{if("."!==o.ctrlSeq)break;n=o,i.push(o)}for(;n!==t&&"\\ "===t.ctrlSeq;)t=t[_],r-=1;for(;n!==t&&"\\ "===n.ctrlSeq;)n=n[w],r-=1;if(t!==n||"\\ "!==t.ctrlSeq){r>0||i.length>1?this.removeGroupingBetween(t,n):i[0]?(i[0]!==t&&this.addGroupingBetween(i[0][w],t),i[0]!==n&&this.removeGroupingBetween(i[0][_],n)):this.addGroupingBetween(n,t)}}},e.removeGroupingBetween=function(e,t){var n=e;do{if(n.setGroupingClass(g),n===t)break}while(n=n[_])},e.addGroupingBetween=function(e,t){for(var n=e,r=0,i=0,n=e;n&&(i+=1,n!==t);)n=n[w];var o=i%3;0===o&&(o=3);for(var n=e;n;){r+=1;var a=g;if(i>=4&&(r===i?a="dcg-mq-group-leading-"+o:r%3==0&&r!==i&&(a="dcg-mq-group-start"),a||(a="dcg-mq-group-other")),n.setGroupingClass(a),n===t)break;n=n[w]}},e.setGroupingClass=function(e){this._groupingClass!==e&&(this._groupingClass&&this.jQ.removeClass(this._groupingClass),e&&this.jQ.addClass(e),this._groupingClass=e)}}),ne=E(te,function(e,t){e.init=function(e,n,r){t.init.call(this,e,'<span class="dcg-mq-digit">'+(n||e)+"</span>",g,r)},e.createLeftOf=function(e){e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[w]instanceof re&&!1!==e[w].isItalic||e[w]instanceof Ee&&e[w][w]instanceof re&&!1!==e[w][w].isItalic)?(L._().createLeftOf(e),t.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):t.createLeftOf.call(this,e)},e.mathspeak=function(e){if(e&&e.createdLeftOf){var n=e.createdLeftOf;if(n.options.autoSubscriptNumerals&&n.parent!==n.parent.parent.sub&&(n[w]instanceof re&&!1!==n[w].isItalic||n[w]instanceof Ee&&n[w][w]instanceof re&&!1!==n[w][w].isItalic))return"Subscript "+t.mathspeak.call(this)+" Baseline"}
return t.mathspeak.apply(this,arguments)}}),re=E($,function(e,t){e.init=function(e,n){t.init.call(this,e,"<var>"+(n||e)+"</var>")},e.text=function(){var e=this.ctrlSeq;return this.isPartOfOperator?"\\"==e[0]?e=e.slice(1,e.length):" "==e[e.length-1]&&(e=e.slice(0,-1)):(!this[w]||this[w]instanceof re||this[w]instanceof Z||"\\ "===this[w].ctrlSeq||(e="*"+e),!this[_]||this[_]instanceof Z||this[_]instanceof Ee||(e+="*")),e},e.mathspeak=function(){var e=this.ctrlSeq;return this.isPartOfOperator||1!==e.length?t.mathspeak.call(this):'"'+e+'"'}});N.p.autoCommands={_maxLength:0},q.autoCommands=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),n={},r=0,i=0;i<t.length;i+=1){var o=t[i];if(o.length<2)throw'autocommand "'+o+'" not minimum length of 2';if(L[o]===ce)throw'"'+o+'" is a built-in operator name';n[o]=1,r=b(r,o.length)}return n._maxLength=r,n},N.p.autoParenthesizedFunctions={_maxLength:0},q.autoParenthesizedFunctions=function(e){if(!/^[a-z]+(?: [a-z]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of only letters';for(var t=e.split(" "),n={},r=0,i=0;i<t.length;i+=1){var o=t[i];if(o.length<2)throw'autocommand "'+o+'" not minimum length of 2';n[o]=1,r=b(r,o.length)}return n._maxLength=r,n};var ie=E(re,function(e,t){function n(e){return!e||("."===e.ctrlSeq||(e instanceof Z||e instanceof we))}e.init=function(e){return t.init.call(this,this.letter=e)},e.checkAutoCmds=function(e){var t=e.options.autoCommands,n=t._maxLength;if(n>0){for(var r="",i=this,o=0;i instanceof ie&&i.ctrlSeq===i.letter&&o<n;)r=i.letter+r,i=i[w],o+=1;for(;r.length;){if(t.hasOwnProperty(r)){for(var o=1,i=this;o<r.length;o+=1,i=i[w]);return T(i,this).remove(),e[w]=i[w],L[r](r).createLeftOf(e)}r=r.slice(1)}}},e.autoParenthesize=function(e){var t=e.parent.ends[_];if(!(t&&t instanceof Ie&&"\\left("===t.ctrlSeq||this.isParentSimpleSubscript())){for(var n="",r=this,i=0,o=e.options.autoParenthesizedFunctions,a=o._maxLength,s=e.options.autoOperatorNames;r instanceof ie&&i<a;)n=r.letter+n,r=r[w],i+=1;for(;n.length;){if(o.hasOwnProperty(n)&&s.hasOwnProperty(n))return e.parent.write(e,"(");n=n.slice(1)}}},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),this.checkAutoCmds(e),this.autoParenthesize(e)},e.italicize=function(e){return this.isItalic=e,this.isPartOfOperator=!e,this.jQ.toggleClass("dcg-mq-operator-name",!e),this},e.finalizeTree=e.siblingDeleted=e.siblingCreated=function(e,t){t!==w&&this[_]instanceof ie||this.autoUnItalicize(e)},e.autoUnItalicize=function(e){var t=e.autoOperatorNames;if(0!==t._maxLength&&!this.isParentSimpleSubscript()){for(var r=this.letter,i=this[w];i instanceof ie;i=i[w])r=i.letter+r;for(var o=this[_];o instanceof ie;o=o[_])r+=o.letter;T(i[_]||this.parent.ends[w],o[w]||this.parent.ends[_]).each(function(e){e.italicize(!0).jQ.removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),e.ctrlSeq=e.letter});e:for(var a=0,s=i[_]||this.parent.ends[w];a<r.length;a+=1,s=s[_])for(var c=v(t._maxLength,r.length-a);c>0;c-=1){var l=r.slice(a,a+c);if(t.hasOwnProperty(l)){for(var u=0,d=s;u<c;u+=1,d=d[_]){d.italicize(!1);var p=d}var h=oe.hasOwnProperty(l);if(s.ctrlSeq=(h?"\\":"\\operatorname{")+s.ctrlSeq,p.ctrlSeq+=h?" ":"}",se.hasOwnProperty(l)&&p[w][w][w].jQ.addClass("dcg-mq-last"),n(s[w])||s.jQ.addClass("dcg-mq-first"),!n(p[_]))if(p[_]instanceof Ee){var f=p[_],m=f.siblingCreated=f.siblingDeleted=function(){f.jQ.toggleClass("dcg-mq-after-operator-name",!(f[_]instanceof Ie))};m()}else p.jQ.toggleClass("dcg-mq-last",!(p[_]instanceof Ie));a+=c-1,s=p;continue e}}}}}),oe={},ae=N.p.autoOperatorNames={_maxLength:9},se={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var e="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),t=0;t<e.length;t+=1)oe[e[t]]=ae[e[t]]=1;for(var n="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),t=0;t<n.length;t+=1)oe[n[t]]=1;for(var r="sin cos tan sec cosec csc cotan cot ctg".split(" "),t=0;t<r.length;t+=1)ae[r[t]]=ae["arc"+r[t]]=ae[r[t]+"h"]=ae["ar"+r[t]+"h"]=ae["arc"+r[t]+"h"]=1;for(var i="gcf hcf lcm proj span".split(" "),t=0;t<i.length;t+=1)ae[i[t]]=1}(),q.autoOperatorNames=function(e){if("string"!=typeof e)throw'"'+e+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(e))throw'"'+e+'" not a space-delimited list of letters or "|"';for(var t=e.split(" "),n={},r=0,i=0;i<t.length;i+=1){var o=t[i];if(o.length<2)throw'"'+o+'" not minimum length of 2';if(o.indexOf("|")<0)n[o]=o,r=b(r,o.length);else{var a=o.split("|");if(a.length>2)throw'"'+o+'" has more than 1 mathspeak delimiter';if(a[0].length<2)throw'"'+o[0]+'" not minimum length of 2';n[a[0]]=a[1].replace(/-/g," "),r=b(r,a[0].length)}}return n._maxLength=r,n};var ce=E($,function(e,t){e.init=function(e){this.ctrlSeq=e},e.createLeftOf=function(e){for(var t=this.ctrlSeq,n=0;n<t.length;n+=1)ie(t.charAt(n)).createLeftOf(e)},e.parser=function(){for(var e=this.ctrlSeq,t=J(),n=0;n<e.length;n+=1)ie(e.charAt(n)).adopt(t,t.ends[_],0);return G.succeed(t.children())}});for(var le in ae)ae.hasOwnProperty(le)&&(L[le]=ce);L.operatorname=E(X,function(t){t.createLeftOf=e,t.numBlocks=function(){return 1},t.parser=function(){return K.block.map(function(e){var t=!0,n="",r=e.children();return r.each(function(e){e instanceof ie?n+=e.letter:t=!1}),t&&"ans"===n?L[n](n):r})}}),L.f=E(ie,function(e,t){e.init=function(){$.p.init.call(this,this.letter="f",'<var class="dcg-mq-f">f</var>')},e.italicize=function(e){return this.jQ.html("f").toggleClass("dcg-mq-f",e),t.italicize.apply(this,arguments)}}),L[" "]=L.space=E(te,function(e,t){e.init=function(){t.init.call(this,"\\ ","<span>&nbsp;</span>"," ")}}),L["."]=E(te,function(e,t){e.init=function(){t.init.call(this,".",'<span class="dcg-mq-digit">.</span>',".")}}),L["'"]=L.prime=t(Q,"'","&prime;","prime"),L["″"]=L.dprime=t(Q,"″","&Prime;","double prime"),L.backslash=t(Q,"\\backslash ","\\","backslash"),D["\\"]||(D["\\"]=L.backslash),L.$=t(Q,"\\$","$","dollar"),L.square=t(Q,"\\square ","□","square"),L.mid=t(Q,"\\mid ","∣","mid");var ue=E($,function(e,t){e.init=function(e,n){t.init.call(this,e,'<span class="dcg-mq-nonSymbola">'+(n||e)+"</span>")}});L["@"]=ue,L["&"]=t(ue,"\\&","&amp;","and"),L["%"]=E(ue,function(e,t){e.init=function(){t.init.call(this,"\\%","%","percent")},e.parser=function(){var e=G.optWhitespace,n=G.string;return e.then(n("\\operatorname{of}").map(function(){return L.percentof()})).or(t.parser.call(this))}}),L["∥"]=L.parallel=t(Q,"\\parallel ","&#x2225;","parallel"),L["∦"]=L.nparallel=t(Q,"\\nparallel ","&#x2226;","not parallel"),L["⟂"]=L.perp=t(Q,"\\perp ","&#x27C2;","perpendicular"),L.alpha=L.beta=L.gamma=L.delta=L.zeta=L.eta=L.theta=L.iota=L.kappa=L.mu=L.nu=L.xi=L.rho=L.sigma=L.tau=L.chi=L.psi=L.omega=E(re,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}}),L.phi=t(re,"\\phi ","&#981;","phi"),L.phiv=L.varphi=t(re,"\\varphi ","&phi;","phi"),L.epsilon=t(re,"\\epsilon ","&#1013;","epsilon"),L.epsiv=L.varepsilon=t(re,"\\varepsilon ","&epsilon;","epsilon"),L.piv=L.varpi=t(re,"\\varpi ","&piv;","piv"),L.sigmaf=L.sigmav=L.varsigma=t(re,"\\varsigma ","&sigmaf;","sigma"),L.thetav=L.vartheta=L.thetasym=t(re,"\\vartheta ","&thetasym;","theta"),L.upsilon=L.upsi=t(re,"\\upsilon ","&upsilon;","upsilon"),L.gammad=L.Gammad=L.digamma=t(re,"\\digamma ","&#989;","gamma"),L.kappav=L.varkappa=t(re,"\\varkappa ","&#1008;","kappa"),L.rhov=L.varrho=t(re,"\\varrho ","&#1009;","rho"),L.pi=L["π"]=t(ue,"\\pi ","&pi;","pi"),L.lambda=t(ue,"\\lambda ","&lambda;","lambda"),L.Upsilon=L.Upsi=L.upsih=L.Upsih=t($,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>',"capital upsilon"),L.Gamma=L.Delta=L.Theta=L.Lambda=L.Xi=L.Pi=L.Sigma=L.Phi=L.Psi=L.Omega=L.forall=E(Q,function(e,t){e.init=function(e){t.init.call(this,"\\"+e+" ","&"+e+";")}});var de=E(X,function(e){e.init=function(e){this.latex=e},e.createLeftOf=function(e){var t=K.parse(this.latex);t.children().adopt(e.parent,e[w],e[_]),e[w]=t.ends[_],t.jQize().insertBefore(e.jQ),t.finalizeInsert(e.options,e),t.ends[_][_].siblingCreated&&t.ends[_][_].siblingCreated(e.options,w),t.ends[w][w].siblingCreated&&t.ends[w][w].siblingCreated(e.options,_),e.parent.bubble(function(e){e.reflow()})},e.mathspeak=function(){return K.parse(this.latex).mathspeak()},e.parser=function(){var e=K.parse(this.latex).children();return G.succeed(e)}});L["⁰"]=t(de,"^0"),L["¹"]=t(de,"^1"),L["²"]=t(de,"^2"),L["³"]=t(de,"^3"),L["⁴"]=t(de,"^4"),L["⁵"]=t(de,"^5"),L["⁶"]=t(de,"^6"),L["⁷"]=t(de,"^7"),L["⁸"]=t(de,"^8"),L["⁹"]=t(de,"^9"),L["¼"]=t(de,"\\frac14"),L["½"]=t(de,"\\frac12"),L["¾"]=t(de,"\\frac34"),L["√"]=t(de,"\\sqrt{}");var pe=E(Z,function(e){e.init=Q.prototype.init,e.contactWeld=e.siblingCreated=e.siblingDeleted=function(e,t){function n(e){return e[w]?e[w]instanceof Z||/^(\\ )|[,;:\(\[]$/.test(e[w].ctrlSeq)?"":"dcg-mq-binary-operator":e.parent&&e.parent.parent&&e.parent.parent.isStyleBlock()?n(e.parent.parent):""}if(t!==_)return this.jQ[0].className=n(this),this}});L["+"]=t(pe,"+","+","plus"),L["−"]=L["—"]=L["–"]=L["-"]=t(pe,"-","&minus;","minus"),L["±"]=L.pm=L.plusmn=L.plusminus=t(pe,"\\pm ","&plusmn;","plus-or-minus"),L.mp=L.mnplus=L.minusplus=t(pe,"\\mp ","&#8723;","minus-or-plus"),D["*"]=L.sdot=L.cdot=t(Z,"\\cdot ","&middot;","*","times");var he=E(Z,function(e,t){e.init=function(e,n){this.data=e,this.strict=n;var r=n?"Strict":"";t.init.call(this,e["ctrlSeq"+r],e["html"+r],e["text"+r],e["mathspeak"+r])},e.swap=function(e){this.strict=e;var t=e?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+t],this.jQ.html(this.data["html"+t]),this.textTemplate=[this.data["text"+t]],this.mathspeakName=this.data["mathspeak"+t]},e.deleteTowards=function(e,n){if(e===w&&!this.strict)return this.swap(!0),void this.bubble(function(e){e.reflow()});t.deleteTowards.apply(this,arguments)}}),fe={ctrlSeq:"\\le ",html:"&le;",text:"≤",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},me={ctrlSeq:"\\ge ",html:"&ge;",text:"≥",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"};L["<"]=L.lt=t(he,fe,!0),L[">"]=L.gt=t(he,me,!0),L["≤"]=L.le=L.leq=t(he,fe,!1),L["≥"]=L.ge=L.geq=t(he,me,!1),L.infty=L.infin=L.infinity=t(Q,"\\infty ","&infin;","infinity"),L["≠"]=L.ne=L.neq=t(Z,"\\ne ","&ne;","not equal");var ge=E(Z,function(e,t){e.init=function(){t.init.call(this,"=","=","=","equals")},e.createLeftOf=function(e){if(e[w]instanceof he&&e[w].strict)return e[w].swap(!1),void e[w].bubble(function(e){e.reflow()});t.createLeftOf.apply(this,arguments)}});L["="]=ge,L["×"]=L.times=t(Z,"\\times ","&times;","[x]","times"),L["÷"]=L.div=L.divide=L.divides=t(Z,"\\div ","&divide;","[/]","over");var ye=E(Z,function(e,t){e.init=function(){t.init.call(this,"\\sim ","~","~","tilde")},e.createLeftOf=function(e){if(e[w]instanceof ye){var n=e[w];return e[w]=n[w],n.remove(),ve().createLeftOf(e),void e[w].bubble(function(e){e.reflow()})}t.createLeftOf.apply(this,arguments)}}),ve=E(Z,function(e,t){e.init=function(){t.init.call(this,"\\approx ","&approx;","≈","approximately equal")},e.deleteTowards=function(e,n){if(e===w){var r=n[w];return T(r,this).remove(),n[w]=r[w],ye().createLeftOf(n),void n[w].bubble(function(e){e.reflow()})}t.deleteTowards.apply(this,arguments)}});D["~"]=L.sim=ye,L["≈"]=L.approx=ve;var be={sqrt:{html:'<svg preserveAspectRatio="none" viewBox="0 0 32 54"><path d="M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33" /></svg>'},"|":{width:".4em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M4.4 0 L4.4 54 L5.6 54 L5.6 0" /></svg>'},"[":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1" /></svg>'},"]":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1" /></svg>'},"(":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0" /></svg>'},")":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0" /></svg>'},"{":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0" /></svg>'},"}":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0" /></svg>'},"&#8741;":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0" /></svg>'},"&lang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0" /></svg>'},"&rang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0" /></svg>'}},xe=E(X,function(e,t){e.init=function(n,r,i,o){t.init.call(this,n,"<"+r+" "+i+">&0</"+r+">"),e.ariaLabel=o||n.replace(/^\\/,""),e.mathspeakTemplate=["Start"+e.ariaLabel+",","End"+e.ariaLabel]}});L.mathrm=t(xe,"\\mathrm","span",'class="dcg-mq-roman dcg-mq-font"',"Roman Font"),L.mathit=t(xe,"\\mathit","i",'class="dcg-mq-font"',"Italic Font"),L.mathbf=t(xe,"\\mathbf","b",'class="dcg-mq-font"',"Bold Font"),L.mathsf=t(xe,"\\mathsf","span",'class="dcg-mq-sans-serif dcg-mq-font"',"Serif Font"),L.mathtt=t(xe,"\\mathtt","span",'class="dcg-mq-monospace dcg-mq-font"',"Math Text"),L.underline=t(xe,"\\underline","span",'class="dcg-mq-non-leaf dcg-mq-underline"',"Underline"),L.overline=L.bar=t(xe,"\\overline","span",'class="dcg-mq-non-leaf dcg-mq-overline"',"Overline"),L.overrightarrow=t(xe,"\\overrightarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"',"Over Right Arrow"),L.overleftarrow=t(xe,"\\overleftarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"',"Over Left Arrow"),L.overleftrightarrow=t(xe,"\\overleftrightarrow ","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"',"Over Left and Right Arrow"),L.overarc=t(xe,"\\overarc","span",'class="dcg-mq-non-leaf dcg-mq-overarc"',"Over Arc");var Ee=(L.textcolor=E(X,function(e,t){e.setColor=function(e){this.color=e,this.htmlTemplate='<span class="dcg-mq-textcolor" style="color:'+e+'">&0</span>'},e.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},e.parser=function(){var e=this,n=G.optWhitespace,r=G.string,i=G.regex;return n.then(r("{")).then(i(/^[#\w\s.,()%-]*/)).skip(r("}")).then(function(n){return e.setColor(n),t.parser.call(e)})},e.isStyleBlock=function(){return!0}}),L.class=E(X,function(e,t){e.parser=function(){var e=this,n=G.string,r=G.regex;return G.optWhitespace.then(n("{")).then(r(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(n){return e.cls=n||"",e.htmlTemplate='<span class="dcg-mq-class '+n+'">&0</span>',t.parser.call(e)})},e.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},e.isStyleBlock=function(){return!0}}),E(X,function(e,t){e.ctrlSeq="_{...}^{...}",e.createLeftOf=function(e){if(this.replacedFragment||e[w]||!e.options.supSubsRequireOperand)return t.createLeftOf.apply(this,arguments)},e.contactWeld=function(e){for(var t=w;t;t=t===w&&_)if(this[t]instanceof Ee){for(var n="sub";n;n="sub"===n&&"sup"){var r=this[n],i=this[t][n];if(r){if(i)if(r.isEmpty())var o=M(i,0,i.ends[w]);else{r.jQ.children().insAtDirEnd(-t,i.jQ);var a=r.children().disown(),o=M(i,a.ends[_],i.ends[w]);t===w?a.adopt(i,i.ends[_],0):a.adopt(i,0,i.ends[w])}else this[t].addBlock(r.disown());this.placeCursor=function(e,n){return function(r){r.insAtDirEnd(-t,e||n)}}(i,r)}}this.remove(),e&&e[w]===this&&(t===_&&o?o[w]?e.insRightOf(o[w]):e.insAtLeftEnd(o.parent):e.insRightOf(this[t]));break}},N.p.charsThatBreakOutOfSupSub="",e.finalizeTree=function(){this.ends[w].write=function(e,t){if(e.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===t)return;var n=this.chToCmd(t,e.options);return n instanceof $?e.deleteSelection():e.clearSelection().insRightOf(this.parent),n.createLeftOf(e.show()),void W.queue("Baseline").alert(n.mathspeak({createdLeftOf:e}))}e[w]&&!e[_]&&!e.selection&&e.options.charsThatBreakOutOfSupSub.indexOf(t)>-1&&(e.insRightOf(this.parent),W.queue("Baseline")),J.p.write.apply(this,arguments)}},e.moveTowards=function(e,n,r){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(e,this):t.moveTowards.apply(this,arguments)},e.deleteTowards=function(e,n){if(n.options.autoSubscriptNumerals&&this.sub){var r=this.sub.ends[-e];r instanceof $?r.remove():r&&r.deleteTowards(e,n.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(w,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-e,this))}else t.deleteTowards.apply(this,arguments)},e.latex=function(){function e(e,t){var n=t&&t.latex();return t?e+"{"+(n||" ")+"}":""}return e("_",this.sub)+e("^",this.sup)},e.addBlock=function(e){"sub"===this.supsub?(this.sup=this.upInto=this.sub.upOutOf=e,e.adopt(this,this.sub,0).downOutOf=this.sub,e.jQ=S('<span class="dcg-mq-sup"/>').append(e.jQ.children()).prependTo(this.jQ),I.linkElementByBlockNode(e.jQ[0],e)):(this.sub=this.downInto=this.sup.downOutOf=e,e.adopt(this,0,this.sup).upOutOf=this.sup,e.jQ=S('<span class="dcg-mq-sub"></span>').append(e.jQ.children()).appendTo(this.jQ.removeClass("dcg-mq-sup-only")),I.linkElementByBlockNode(e.jQ[0],e),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var t=0;t<2;t+=1)!function(e,t,n,r){e[t].deleteOutOf=function(i,o){if(o.insDirOf(this[i]?-i:i,this.parent),!this.isEmpty()){var a=this.ends[i];this.children().disown().withDirAdopt(i,o.parent,o[i],o[-i]).jQ.insDirOf(-i,o.jQ),o[-i]=a}e.supsub=n,delete e[t],delete e[r+"Into"],e[n][r+"OutOf"]=h,delete e[n].deleteOutOf,"sub"===t&&S(e.jQ.addClass("dcg-mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[t],"sup sub".split(" ")[t],"down up".split(" ")[t])}}));L.subscript=L._=E(Ee,function(e,t){e.supsub="sub",e.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["_"],e.mathspeakTemplate=["Subscript,",", Baseline"],e.ariaLabel="subscript",e.finalizeTree=function(){this.downInto=this.sub=this.ends[w],this.sub.upOutOf=h,t.finalizeTree.call(this)}}),L.superscript=L.supscript=L["^"]=E(Ee,function(e,t){e.supsub="sup",e.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"><span class="dcg-mq-sup">&0</span></span>',e.textTemplate=["^"],e.mathspeakTemplate=["Superscript,",", Baseline"],e.ariaLabel="superscript",e.finalizeTree=function(){this.upInto=this.sup=this.ends[_],this.sup.downOutOf=h,t.finalizeTree.call(this)}});var we=E(X,function(e,t){e.init=function(t,n,r){e.ariaLabel=r||ctrlSeq.replace(/^\\/,"");var i='<span class="dcg-mq-large-operator dcg-mq-non-leaf"><span class="dcg-mq-to"><span>&1</span></span><big>'+n+'</big><span class="dcg-mq-from"><span>&0</span></span></span>';$.prototype.init.call(this,t,i)},e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),e.options.sumStartsWithNEquals&&(ie("n").createLeftOf(e),ge().createLeftOf(e))},e.latex=function(){function e(e){return"{"+(e||" ")+"}"}return this.ctrlSeq+"_"+e(this.ends[w].latex())+"^"+e(this.ends[_].latex())},e.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.ends[w].mathspeak()+" to "+this.ends[_].mathspeak()+", end "+this.ariaLabel+", "},e.parser=function(){for(var e=G.string,t=G.optWhitespace,n=G.succeed,r=K.block,i=this,o=i.blocks=[J(),J()],a=0;a<o.length;a+=1)o[a].adopt(i,i.ends[_],0);return t.then(e("_").or(e("^"))).then(function(e){var t=o["_"===e?0:1];return r.then(function(e){return e.children().adopt(t,t.ends[_],0),n(i)})}).many().result(i)},e.finalizeTree=function(){this.ends[w].ariaLabel="lower bound",this.ends[_].ariaLabel="upper bound",this.downInto=this.ends[w],this.upInto=this.ends[_],this.ends[w].upOutOf=this.ends[_],this.ends[_].downOutOf=this.ends[w]}});L["∑"]=L.sum=L.summation=t(we,"\\sum ","&sum;","sum"),L["∏"]=L.prod=L.product=t(we,"\\prod ","&prod;","product"),L.coprod=L.coproduct=t(we,"\\coprod ","&#8720;","co product"),L["∫"]=L.int=L.integral=E(we,function(e,t){e.init=function(){e.ariaLabel="integral";$.prototype.init.call(this,"\\int ",'<span class="dcg-mq-int dcg-mq-non-leaf"><big>&int;</big><span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sup"><span class="dcg-mq-sup-inner">&1</span></span><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>',"integral")},e.createLeftOf=X.p.createLeftOf});var _e=L.frac=L.dfrac=L.cfrac=L.fraction=E(X,function(e,t){e.ctrlSeq="\\frac",e.htmlTemplate='<span class="dcg-mq-fraction dcg-mq-non-leaf"><span class="dcg-mq-numerator">&0</span><span class="dcg-mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',e.textTemplate=["(",")/(",")"],e.finalizeTree=function(){this.upInto=this.ends[_].upOutOf=this.ends[w],this.downInto=this.ends[w].downOutOf=this.ends[_],this.ends[w].ariaLabel="numerator",this.ends[_].ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},e.mathspeak=function(e){if(e&&e.createdLeftOf){return e.createdLeftOf.parent.mathspeak()}return t.mathspeak.apply(this,arguments)},e.getFracDepth=function(){var e=function(t,n){return t instanceof I&&t.ctrlSeq&&t.ctrlSeq.toLowerCase().search("frac")>=0&&(n+=1),t.parent?e(t.parent,n):n};return e(this,0)}}),Se=L.over=D["/"]=E(_e,function(t,n){t.createLeftOf=function(t){if(!this.replacedFragment){var r=t[w];if(!t.options.typingSlashCreatesNewFraction)for(;r&&!(r instanceof Z||r instanceof(L.text||e)||r instanceof we||"\\ "===r.ctrlSeq||/^[,;:]$/.test(r.ctrlSeq));)r=r[w];r instanceof we&&r[_]instanceof Ee&&(r=r[_],r[_]instanceof Ee&&r[_].ctrlSeq!=r.ctrlSeq&&(r=r[_])),r!==t[w]&&(this.replaces(T(r[_]||t.parent.ends[w],t[w])),t[w]=r)}n.createLeftOf.call(this,t)}});L.ans=E($,function(e,t){e.init=function(e){t.init.call(this,"\\operatorname{ans}",'<span class="dcg-mq-ans">ans</span>',"ans")}}),L.percent=L.percentof=E($,function(e,t){e.init=function(){t.init.call(this,"\\%\\operatorname{of}",'<span class="dcg-mq-nonSymbola dcg-mq-operator-name">% of </span>',"percent of")}});var Me=L.sqrt=E(X,function(e,t){e.ctrlSeq="\\sqrt",e.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-sqrt-container"><span class="dcg-mq-scaled dcg-mq-sqrt-prefix">'+be.sqrt.html+'</span><span class="dcg-mq-non-leaf dcg-mq-sqrt-stem">&0</span></span>',e.textTemplate=["sqrt(",")"],e.mathspeakTemplate=["StartRoot,",", EndRoot"],e.ariaLabel="root",e.parser=function(){return K.optBlock.then(function(e){return K.block.map(function(t){var n=ke();return n.blocks=[e,t],e.adopt(n,0,0),t.adopt(n,e,0),n})}).or(t.parser.call(this))}}),ke=(L.hat=E(X,function(e,t){e.ctrlSeq="\\hat",e.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-hat-prefix">^</span><span class="dcg-mq-hat-stem">&0</span></span>',e.textTemplate=["hat(",")"]}),L.nthroot=E(Me,function(e,t){e.htmlTemplate='<span class="dcg-mq-nthroot-container dcg-mq-non-leaf"><sup class="dcg-mq-nthroot dcg-mq-non-leaf">&0</sup><span class="dcg-mq-scaled dcg-mq-sqrt-container"><span class="dcg-mq-sqrt-prefix dcg-mq-scaled">'+be.sqrt.html+'</span><span class="dcg-mq-sqrt-stem dcg-mq-non-leaf">&1</span></span></span>',e.textTemplate=["sqrt[","](",")"],e.latex=function(){return"\\sqrt["+this.ends[w].latex()+"]{"+this.ends[_].latex()+"}"},e.mathspeak=function(){var e=this.ends[w].mathspeak(),t=this.ends[_].mathspeak();return this.ends[w].ariaLabel="Index",this.ends[_].ariaLabel="Radicand","3"===e?"Start Cube Root, "+t+", End Cube Root":"Root Index "+e+", Start Root, "+t+", End Root"}})),Ce=(L.cbrt=E(ke,function(e,t){e.createLeftOf=function(e){t.createLeftOf.apply(this,arguments),ne("3").createLeftOf(e),e.controller.moveRight()}}),E(X,function(e,t){e.init=function(e,n,r){var i='<span class="dcg-mq-non-leaf"><span class="dcg-mq-diacritic-above">'+n+'</span><span class="dcg-mq-diacritic-stem">&0</span></span>';t.init.call(this,e,i,r)}}));L.vec=t(Ce,"\\vec","&rarr;",["vec(",")"]),L.tilde=t(Ce,"\\tilde","~",["tilde(",")"]);var Ie=E(E(X,f),function(t,n){t.init=function(e,t,r,i,o){n.init.call(this,"\\left"+i,g,[t,r]),this.side=e,this.sides={},this.sides[w]={ch:t,ctrlSeq:i},this.sides[_]={ch:r,ctrlSeq:o}},t.numBlocks=function(){return 1},t.html=function(){var e=this.getSymbol(w),t=this.getSymbol(_);return this.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+e.width+'" class="dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren'+(this.side===_?" dcg-mq-ghost":"")+'">'+e.html+'</span><span style="margin-left:'+e.width+";margin-right:"+t.width+'" class="dcg-mq-bracket-middle dcg-mq-non-leaf">&0</span><span style="width:'+t.width+'" class="dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren'+(this.side===w?" dcg-mq-ghost":"")+'">'+t.html+"</span></span>",n.html.call(this)},t.getSymbol=function(e){return be[this.sides[e||_].ch]||{width:"0",html:""}},t.latex=function(){return"\\left"+this.sides[w].ctrlSeq+this.ends[w].latex()+"\\right"+this.sides[_].ctrlSeq},t.mathspeak=function(e){var t=this.sides[w].ch,r=this.sides[_].ch;if("|"===t&&"|"===r)this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else{if(e&&e.createdLeftOf&&this.side){var i="";return this.side===w?i=this.textTemplate[0]:this.side===_&&(i=this.textTemplate[1]),(this.side===w?"left ":"right ")+Le[i]}this.mathspeakTemplate=["left "+Le[t]+",",", right "+Le[r]],this.ariaLabel=Le[t]+" block"}return n.mathspeak.call(this)},t.matchBrack=function(e,t,n){return n instanceof Ie&&n.side&&n.side!==-t&&(!e.restrictMismatchedBrackets||Te[this.sides[this.side].ch]===n.sides[n.side].ch||{"(":"]","[":")"}[this.sides[w].ch]===n.sides[_].ch)&&n},t.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side];var t=e.delimjQs.eq(this.side===w?0:1).removeClass("dcg-mq-ghost");this.replaceBracket(t,this.side)},t.createLeftOf=function(e){if(!this.replacedFragment){var t=e.options;if("|"===this.sides[w].ch)var r=this.matchBrack(t,_,e[_])||this.matchBrack(t,w,e[w])||this.matchBrack(t,0,e.parent.parent);else var r=this.matchBrack(t,-this.side,e[-this.side])||this.matchBrack(t,-this.side,e.parent.parent)}if(r){var i=this.side=-r.side;this.closeOpposing(r),r===e.parent.parent&&e[i]&&T(e[i],e.parent.ends[i],-i).disown().withDirAdopt(-i,r.parent,r,r[i]).jQ.insDirOf(i,r.jQ),r.bubble(function(e){e.reflow()})}else r=this,i=r.side,r.replacedFragment?r.side=0:e[-i]&&(r.replaces(T(e[-i],e.parent.ends[-i],i)),e[-i]=0),n.createLeftOf.call(r,e);i===w?e.insAtLeftEnd(r.ends[w]):e.insRightOf(r)},t.placeCursor=e,t.unwrap=function(){this.ends[w].children().disown().adopt(this.parent,this,this[_]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(e,t,n){var r=this.parent,i=this[e],o=r.ends[e];if(e===this.side)return this.unwrap(),void(i?n.insDirOf(-e,i):n.insAtDirEnd(e,r));var a=n.options,s=!this.side;if(this.side=-e,this.matchBrack(a,e,this.ends[w].ends[this.side])){this.closeOpposing(this.ends[w].ends[this.side]);var c=this.ends[w].ends[e];this.unwrap(),c.siblingCreated&&c.siblingCreated(n.options,e),i?n.insDirOf(-e,i):n.insAtDirEnd(e,r)}else{if(this.matchBrack(a,e,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(t&&s)return this.unwrap(),void(i?n.insDirOf(-e,i):n.insAtDirEnd(e,r));this.sides[e]={ch:Te[this.sides[this.side].ch],ctrlSeq:Te[this.sides[this.side].ctrlSeq]};var l=this.delimjQs.removeClass("dcg-mq-ghost").eq(e===w?0:1).addClass("dcg-mq-ghost");this.replaceBracket(l,e)}if(i){var c=this.ends[w].ends[e];T(i,o,-e).disown().withDirAdopt(-e,this.ends[w],c,0).jQ.insAtDirEnd(e,this.ends[w].jQ.removeClass("dcg-mq-empty")),c.siblingCreated&&c.siblingCreated(n.options,e),n.insDirOf(-e,i)}else t?n.insDirOf(e,this):n.insAtDirEnd(e,this.ends[w])}},t.replaceBracket=function(e,t){var n=this.getSymbol(t);e.html(n.html).css("width",n.width),t===w?e.next().css("margin-left",n.width):e.prev().css("margin-right",n.width)},t.deleteTowards=function(e,t){this.deleteSide(-e,!1,t)},t.finalizeTree=function(){this.ends[w].deleteOutOf=function(e,t){this.parent.deleteSide(e,!0,t)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===w?1:0).removeClass("dcg-mq-ghost"),this.side=0}},t.siblingCreated=function(e,t){t===-this.side&&this.finalizeTree()}}),Te={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Le={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};m("(",null,"parenthesis"),m("[",null,"bracket"),m("{","\\{","brace"),L.langle=t(Ie,w,"&lang;","&rang;","\\langle ","\\rangle "),L.rangle=t(Ie,_,"&lang;","&rang;","\\langle ","\\rangle "),D["|"]=t(Ie,w,"|","|","|","|"),L.lVert=t(Ie,w,"&#8741;","&#8741;","\\lVert ","\\rVert "),L.rVert=t(Ie,_,"&#8741;","&#8741;","\\lVert ","\\rVert "),L.left=E(X,function(e){e.parser=function(){var e=G.regex,t=G.string,n=(G.succeed,G.optWhitespace);return n.then(e(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then(function(r){var i=r.replace(/^\\/,"");return"\\langle"==r&&(i="&lang;",r+=" "),"\\lVert"==r&&(i="&#8741;",r+=" "),K.then(function(o){return t("\\right").skip(n).then(e(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map(function(e){var t=e.replace(/^\\/,"");"\\rangle"==e&&(t="&rang;",e+=" "),"\\rVert"==e&&(t="&#8741;",e+=" ");var n=Ie(0,i,t,r,e);return n.blocks=[o],o.adopt(n,0,0),n})})})}}),L.right=E(X,function(e){e.parser=function(){return G.fail("unmatched \\right")}});var De=L.binom=L.binomial=E(E(X,f),function(e,t){var n=be["("],r=be[")"];e.ctrlSeq="\\binom",e.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+n.width+'" class="dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled">'+n.html+'</span><span style="margin-left:'+n.width+"; margin-right:"+r.width+';" class="dcg-mq-non-leaf dcg-mq-bracket-middle"><span class="dcg-mq-array dcg-mq-non-leaf"><span>&0</span><span>&1</span></span></span><span style="width:'+r.width+'" class="dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled">'+r.html+"</span></span>",e.textTemplate=["choose(",",",")"],e.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],e.ariaLabel="binomial"});L.choose=E(De,function(e){e.createLeftOf=Se.prototype.createLeftOf});L.editable=L.MathQuillMathField=E(X,function(e,t){e.ctrlSeq="\\MathQuillMathField",e.htmlTemplate='<span class="dcg-mq-editable-field"><span class="dcg-mq-root-block">&0</span></span>',e.parser=function(){var e=this,n=G.string,r=G.regex,i=G.succeed;return n("[").then(r(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function(t){e.name=t}).or(i()).then(t.parser.call(e))},e.finalizeTree=function(e){var t=O(this.ends[w],this.jQ,e);t.KIND_OF_MQ="MathField",t.editable=!0,t.createTextarea(),t.editablesTextareaEvents(),t.cursor.insAtRightEnd(t.root),p(t.root)},e.registerInnerField=function(e,t){e.push(e[this.name]=t(this.ends[w].controller))},e.latex=function(){return this.ends[w].latex()},e.text=function(){return this.ends[w].text()}});var Pe=L.embed=E($,function(e,t){e.setOptions=function(e){function t(){return""}return this.text=e.text||t,this.htmlTemplate=e.htmlString||"",this.latex=e.latex||t,this},e.parser=function(){
var e=this,t=G.string,n=G.regex,r=G.succeed;return t("{").then(n(/^[a-z][a-z0-9]*/i)).skip(t("}")).then(function(i){return t("[").then(n(/^[-\w\s]*/)).skip(t("]")).or(r()).map(function(t){return e.setOptions(B[i](t))})})}}),Ae=d(1);for(var Oe in Ae)!function(e,t){"function"==typeof t?(u[e]=function(){return l(),t.apply(this,arguments)},u[e].prototype=t.prototype):u[e]=t}(Oe,Ae[Oe])}(),define("mathquill_src",["jquery"],function(){}),define("loadcss!Symbola-basic",function(){}),define("loadcss!vendor_css/mathquill/mathquill-basic",function(){}),define("toplevel/mathquill",["require","testbridge","mathquill_src","loadcss!Symbola-basic","loadcss!vendor_css/mathquill/mathquill-basic"],function(e){"use strict";return e("testbridge"),e("mathquill_src"),e("loadcss!Symbola-basic"),e("loadcss!vendor_css/mathquill/mathquill-basic"),window.MathQuill.noConflict()}),define("mathquill",["require","browser","jquery","toplevel/mathquill","config"],function(e){"use strict";var t=e("browser"),n=e("jquery"),r=e("toplevel/mathquill").getInterface(1),i=e("config"),o=["erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf","histogram dotplot boxplot"].join(" "),a=["cube sphere cone dodecahedron octahedron tetrahedron"].join(" ");return r.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:"alpha beta sqrt theta phi pi tau nthroot cbrt sum prod int ans percent infinity infty",autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){return t.IS_IOS||t.IS_ANDROID?n('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">')[0]:t.IS_WINDOWS&&t.IS_TOUCH?n("<textarea readonly>").on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0})[0]:n("<textarea>")[0]},autoOperatorNames:["exp|exponent ln|natural-log log","total length mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","polygon","distance midpoint","sort shuffle join",o,i.get("3d")?a:""].filter(function(e){return!!e}).join(" "),resetCursorOnBlur:!0,enableDigitGrouping:!0})}),define("core/types/graphmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETRIC_CURVE_3D=t.Z_3D=t.OBJECT3D=t.VISUALIZATION=t.NONE=t.IMPLICIT=t.POLYGONFILL=t.POLAR=t.PARAMETRIC=t.XYPOINT_MOVABLE=t.XYPOINT=t.Y=t.X=void 0,t.X=1,t.Y=2,t.XYPOINT=3,t.XYPOINT_MOVABLE=4,t.PARAMETRIC=5,t.POLAR=6,t.POLYGONFILL=7,t.IMPLICIT=8,t.NONE=10,t.VISUALIZATION=11,t.OBJECT3D=12,t.Z_3D=13,t.PARAMETRIC_CURVE_3D=14}),define("graphing/clipping",["require","exports","core/types/graphmode"],function(e,t,n){"use strict";function r(e,n,r,i){var o=[],a=n.xmin,s=n.ymin,c=n.xmax-n.xmin,l=n.ymax-n.ymin,u=r.width,d=r.height,p=u/c,h=-d/l,f=e.length;if(i===t.Y_EQUALS)for(var m=0;m<f;m+=2){var g=(e[m]-a)*p-.5,y=(e[m+1]-s)*h+d-.5;o.push(g,y)}else if(i===t.X_EQUALS)for(var m=0;m<f;m+=2){var g=(e[m+1]-a)*p-.5,y=(e[m]-s)*h+d-.5;o.push(g,y)}else if(i===t.POLAR_RADIAN_EQUALITY)for(var m=0;m<e.length;m+=2){var v=e[m],b=e[m+1],g=(b*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5;o.push(g,y)}else if(i===t.POLAR_RADIAN_INEQUALITY)for(var m=0;m<e.length;m+=2){var v=e[m],b=e[m+1];b<0&&(b=0);var g=(b*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5;o.push(g,y)}else if(i===t.POLAR_DEGREE_EQUALITY)for(var m=0;m<e.length;m+=2){var v=e[m]*Math.PI/180,b=e[m+1],g=(b*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5;o.push(g,y)}else if(i===t.POLAR_DEGREE_INEQUALITY)for(var m=0;m<e.length;m+=2){var v=e[m]*Math.PI/180,b=e[m+1];b<0&&(b=0);var g=(b*Math.cos(v)-a)*p-.5,y=(b*Math.sin(v)-s)*h+d-.5;o.push(g,y)}return o}function i(e,n){return a(e,n,t.ALL,!0)}function o(e,t,n,r){var i,o,a,s,c=[];r?(o=e[0],a=e[1],i=2,(s=t(o,a))&&c.push(o,a)):(o=e[e.length-2],a=e[e.length-1],i=0,s=t(o,a));for(var l=i;l<e.length;l+=2){var u=o,d=a,p=s;o=e[l],a=e[l+1],s=t(o,a),(s||p)&&(s&&p&&c.push(o,a),s&&!p&&(Array.prototype.push.apply(c,n(o,a,u,d)),c.push(o,a)),!s&&p&&Array.prototype.push.apply(c,n(u,d,o,a)))}return c}function a(e,n,r,i){var a=n.xmin,s=n.xmax,c=n.ymin,l=n.ymax,u=function(e,t){return e>=a},d=function(e,t){return e<=s},p=function(e,t){return t>=c},h=function(e,t){return t<=l},f=function(e,t,n,r){return e=e,t=t,n=n,r=r,[a,t+(r-t)*(a-e)/(n-e)]},m=function(e,t,n,r){return e=e,t=t,n=n,r=r,[s,t+(r-t)*(s-e)/(n-e)]},g=function(e,t,n,r){return e=e,t=t,n=n,r=r,[e+(n-e)*(c-t)/(r-t),c]},y=function(e,t,n,r){return e=e,t=t,n=n,r=r,[e+(n-e)*(l-t)/(r-t),l]},v=e;return r&t.LEFT&&(v=o(e,u,f,i)),r&t.BOTTOM&&(v=o(v,p,g,i)),r&t.RIGHT&&(v=o(v,d,m,i)),r&t.TOP&&(v=o(v,h,y,i)),v}function s(e,n){return a(e,n,t.ALL,!1)}function c(e,t,n){var r=[],i=e[0],o=i+n,a=[];r.push(a);for(var s=0;s<e.length;s+=2){var c=e[s],l=e[s+1];if(l<0&&(l=0),c>=o){for(a=[],r.push(a),i=e[s-2],o=i;c>=o;)o+=n;s-=4}else a.push(c,l)}if(0===t)for(var s=0;s<r.length;s++)r[s].push(0,0);else for(var u=n/16,d=t,s=0;s<r.length;s++){var p=r[s];i=p[0],o=p[p.length-2];for(var c=o;c>i;c-=u)p.push(c,d);p.push(i,d)}return r}function l(e,t){return e=e.slice(),e.push(e[e.length-2],t),e.push(e[0],t),[e]}function u(e,r,i){switch(e){case n.X:return t.X_EQUALS;case n.IMPLICIT:case n.PARAMETRIC:case n.Y:return t.Y_EQUALS;case n.POLAR:return i.degreeMode?r?t.POLAR_DEGREE_INEQUALITY:t.POLAR_DEGREE_EQUALITY:r?t.POLAR_RADIAN_INEQUALITY:t.POLAR_RADIAN_EQUALITY}}Object.defineProperty(t,"__esModule",{value:!0}),t.getClippingGraphType=t.computeCartesianFill=t.computePolarFill=t.clipAllFillEdges=t.clipFillEdges=t.clipFillEdge=t.clipStrokeEdges=t.mapSegmentToCanvas=t.X_EQUALS=t.Y_EQUALS=t.POLAR_DEGREE_INEQUALITY=t.POLAR_DEGREE_EQUALITY=t.POLAR_RADIAN_INEQUALITY=t.POLAR_RADIAN_EQUALITY=t.Y=t.X=t.ALL=t.RIGHT=t.LEFT=t.BOTTOM=t.TOP=void 0,t.TOP=1,t.BOTTOM=2,t.LEFT=4,t.RIGHT=8,t.ALL=15,t.X=12,t.Y=3,t.POLAR_RADIAN_EQUALITY=1,t.POLAR_RADIAN_INEQUALITY=2,t.POLAR_DEGREE_EQUALITY=3,t.POLAR_DEGREE_INEQUALITY=4,t.Y_EQUALS=5,t.X_EQUALS=6,t.mapSegmentToCanvas=r,t.clipStrokeEdges=i,t.clipFillEdge=o,t.clipFillEdges=a,t.clipAllFillEdges=s,t.computePolarFill=c,t.computeCartesianFill=l,t.getClippingGraphType=u}),define("core/lib/color-helpers",["require","exports"],function(e,t){"use strict";function n(e){return r(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function r(e){return"string"==typeof e&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}function i(e,t){if(e=n(e),!r(e))return e;t>1&&(t=1),t<-1&&(t=-1);var i=parseInt(e.slice(1),16),o=t<0?0:255,a=t<0?-1*t:t,s=i>>16,c=i>>8&255,l=255&i;return"#"+(16777216+65536*(Math.round((o-s)*a)+s)+256*(Math.round((o-c)*a)+c)+(Math.round((o-l)*a)+l)).toString(16).slice(1)}function o(e){if(e=n(e),!r(e))return e;var t="0123456789abcdef";return"#"+e.slice(1).split("").map(function(e){return t[15-t.indexOf(e)]}).join("")}function a(e){if(e=e.replace(/#/,""),3===e.length)var t=parseInt(e.slice(0,1)+e.slice(0,1),16),n=parseInt(e.slice(1,2)+e.slice(1,2),16),r=parseInt(e.slice(2,3)+e.slice(2,3),16);else if(6===e.length)var t=parseInt(e.slice(0,2),16),n=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16);else var t=0,n=0,r=0;return{r:t,g:n,b:r}}function s(e,t){var n=/(rgba\([\d]+\,\ ?[\d]+\,\ ?[\d]+\,\ ?)[\d.]+(\))/;return e.match(n)?e.replace(n,"$1"+t+"$2"):e}Object.defineProperty(t,"__esModule",{value:!0}),t.colors=t.mutateOpacity=t.parseHex=t.invertColor=t.shadeColor=t.isValidHexColor=t.normalizeColor=void 0,t.normalizeColor=n,t.isValidHexColor=r,t.shadeColor=i,t.invertColor=o,t.parseHex=a,t.mutateOpacity=s,t.colors={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa"}}),define("expressions/colors",["require","exports","core/lib/color-helpers"],function(e,t,n){"use strict";function r(e,t){switch(t){case n.colors.RED:return e.t("red");case n.colors.BLUE:return e.t("blue");case n.colors.GREEN:return e.t("green");case n.colors.PURPLE:return e.t("purple");case n.colors.ORANGE:return e.t("orange");case n.colors.BLACK:return e.t("black");case n.colors.GRAY:return e.t("gray");default:return e.t("color unknown")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getColorName=t.all=t.BLACK=t.ORANGE=t.PURPLE=t.GREEN=t.BLUE=t.RED=void 0,t.RED=n.colors.RED,t.BLUE=n.colors.BLUE,t.GREEN=n.colors.GREEN,t.PURPLE=n.colors.PURPLE,t.ORANGE=n.colors.ORANGE,t.BLACK=n.colors.BLACK,t.all=[t.RED,t.BLUE,t.GREEN,t.PURPLE,t.ORANGE,t.BLACK],t.getColorName=r}),define("core/types/styles",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineStyle=t.PointStyle=void 0;!function(e){e.POINT="POINT",e.OPEN="OPEN",e.CROSS="CROSS"}(t.PointStyle||(t.PointStyle={}));!function(e){e.SOLID="SOLID",e.DASHED="DASHED",e.DOTTED="DOTTED"}(t.LineStyle||(t.LineStyle={}))}),define("core/lib/dragmode",["require","exports"],function(e,t){"use strict";function n(e){return e?"none"===e[0].type&&"none"===e[1].type?i.NONE:"none"===e[1].type?i.X:"none"===e[0].type?i.Y:i.XY:i.NONE}function r(e,t){var r=n(t);switch(e){case i.NONE:return i.NONE;case i.AUTO:case i.XY:return r;case i.X:return r===i.X||r===i.XY?i.X:i.NONE;case i.Y:return r===i.Y||r===i.XY?i.Y:i.NONE;default:return i.NONE}}Object.defineProperty(t,"__esModule",{value:!0}),t.reconcileDragMode=t.DragMode=void 0;var i;!function(e){e.NONE="NONE",e.X="X",e.Y="Y",e.XY="XY",e.AUTO="AUTO"}(i=t.DragMode||(t.DragMode={})),t.reconcileDragMode=r}),define("core/types/label-sizes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelSize=void 0;!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(t.LabelSize||(t.LabelSize={}))}),define("core/types/label-orientations",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelOrientation=void 0;!function(e){e.DEFAULT="default",e.LEFT="left",e.RIGHT="right",e.ABOVE="above",e.BELOW="below"}(t.LabelOrientation||(t.LabelOrientation={}))}),define("core/lib/number-to-latex",["require","exports"],function(e,t){"use strict";function n(e){if("string"==typeof e)return e;if(void 0===e)return"";var t=e+"";return t=t.replace(/1e\+?([-\d]+)/,"10^{$1}"),t=t.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")}function r(e){var t=e+"";if(/\d+\.?\d*e[\+\-]*\d+/i.test(t)){var n=String(t).toLowerCase().split("e"),r=parseFloat(n[0]),i=parseInt(n[1],10),o=Math.abs(i),a=Math.abs(r).toString().split(".");if(i<0)t="0."+new Array(o).join("0")+a.join("");else{var s=a[1];s&&(o-=s.length),t=a.join("")+new Array(o+1).join("0")}r<0&&(t="-"+t)}return t}function i(e,t){void 0===t&&(t=2);var n=r(e),i=n.indexOf(".");if(-1===i)return n;for(var o,a=i+1;a<n.length;a++)if(o){if(n[a]!==o)break}else{if("0"!==n[a]&&"9"!==n[a])break;o=n[a]}return n.substr(0,Math.max(i+5,a+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.numberToStatsConfidenceLatex=t.numberToDecimalString=void 0,t.default=n,t.numberToDecimalString=r,t.numberToStatsConfidenceLatex=i}),define("graphing-calc/api/sanitize-expression",["require","exports","core/types/styles","core/lib/dragmode","core/types/label-sizes","core/types/label-orientations","core/lib/number-to-latex","lib/console"],function(e,t,n,r,i,o,a,s){"use strict";function c(e,t){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e)return!0;return!1}function l(e){return c(e,t.SanitizedPointStyle)}function u(e){return c(e,t.SanitizedLineStyle)}function d(e){return c(e,t.SanitizedDragMode)}function p(e){return c(e,t.SanitizedColumnMode)}function h(e){return c(e,t.SanitizedLabelSize)}function f(e){return c(e,t.SanitizedLabelOrientation)}function m(e){return{id:e.id,type:e.type,columns:e.columns.map(g)}}function g(e){return{id:e.id,latex:e.latex,color:e.color,hidden:e.hidden,pointStyle:e.pointStyle,lineStyle:e.lineStyle,points:e.points,lines:e.lines,dragMode:e.dragMode,values:e.values.slice()}}function y(e){var t=["latex","color","lineStyle","pointStyle","fillOpacity","points","lines","fill","hidden","secret","dragMode","label","showLabel","labelSize","labelOrientation","verticalLabel","interactiveLabel"],n={id:e.id,type:e.type};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),e.hasOwnProperty("parametricDomain")&&(n.parametricDomain={min:e.parametricDomain.min,max:e.parametricDomain.max}),e.hasOwnProperty("polarDomain")&&(n.polarDomain={min:e.polarDomain.min,max:e.polarDomain.max}),e.hasOwnProperty("domain")&&(n.domain={min:e.domain.min,max:e.domain.max}),e.slider&&(e.slider.hardMin&&(n.sliderBounds=n.sliderBounds||{},n.sliderBounds.min=e.slider.min),e.slider.hardMax&&(n.sliderBounds=n.sliderBounds||{},n.sliderBounds.max=e.slider.max),e.slider.step&&(n.sliderBounds=n.sliderBounds||{},n.sliderBounds.step=e.slider.step)),n}function v(e){return{id:e.id,type:e.type,hidden:e.hidden,secret:e.secret}}function b(e){return{id:e.id,type:e.type,hidden:e.hidden,secret:e.secret}}function x(e){return{id:e.id,type:e.type,secret:e.secret}}function E(e){switch(e.type){case"expression":return y(e);case"table":return m(e);case"folder":return b(e);case"image":return v(e);case"text":return x(e);default:return e}}function w(e,t){return e.hasOwnProperty("id")?e.id+"":t.generateId()}function _(e,t){var n={type:"expression",id:w(e,t)};return n.type="expression",n.id=w(e,t),e.hasOwnProperty("latex")&&(n.latex=e.latex+""),e.hasOwnProperty("color")&&(n.color=e.color+""),e.hasOwnProperty("points")&&(n.points=!!e.points),e.hasOwnProperty("lines")&&(n.lines=!!e.lines),e.hasOwnProperty("style")&&(s.warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),l(e.style)?n.pointStyle=e.style:u(e.style)?n.lineStyle=e.style:s.warn("Invalid style: '"+e.style+"'.")),e.hasOwnProperty("pointStyle")&&(l(e.pointStyle)?n.pointStyle=e.pointStyle:s.warn("Invalid pointStyle: '"+e.pointStyle+"'.")),e.hasOwnProperty("lineStyle")&&(u(e.lineStyle)?n.lineStyle=e.lineStyle:s.warn("Invalid lineStyle: '"+e.lineStyle+"'.")),e.hasOwnProperty("hidden")&&(n.hidden=!!e.hidden),e.hasOwnProperty("secret")&&(n.secret=!!e.secret),e.hasOwnProperty("sliderBounds")&&e.sliderBounds&&(n.slider={min:a.default(e.sliderBounds.min),max:a.default(e.sliderBounds.max),step:a.default(e.sliderBounds.step)},n.slider.min&&(n.slider.hardMin=!0),n.slider.max&&(n.slider.hardMax=!0)),e.hasOwnProperty("parametricDomain")&&e.parametricDomain?(n.parametricDomain={min:a.default(e.parametricDomain.min),max:a.default(e.parametricDomain.max)},e.hasOwnProperty("domain")&&s.warn("Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'.")):e.hasOwnProperty("domain")&&(s.warn("The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"),n.parametricDomain={min:a.default(e.domain.min),max:a.default(e.domain.max)}),e.hasOwnProperty("polarDomain")&&e.polarDomain&&(n.polarDomain={min:a.default(e.polarDomain.min),max:a.default(e.polarDomain.max)}),e.hasOwnProperty("dragMode")&&(d(e.dragMode)?n.dragMode=e.dragMode:s.warn("Invalid dragMode: '"+e.dragMode+"'.")),e.hasOwnProperty("label")&&(n.label=e.label+""),e.hasOwnProperty("showLabel")&&(n.showLabel=!!e.showLabel),e.hasOwnProperty("labelSize")&&(h(e.labelSize)?n.labelSize=e.labelSize:s.warn("Invalid labelSize: "+e.labelSize)),e.hasOwnProperty("labelOrientation")&&(f(e.labelOrientation)?n.labelOrientation=e.labelOrientation:s.warn("Invalid labelOrientation: "+e.labelOrientation)),e.hasOwnProperty("fill")&&(n.fill=!!e.fill),e.hasOwnProperty("fillOpacity")&&(n.fillOpacity=""+e.fillOpacity),n}function S(e,n){var i={id:w(e,n)};return e.hasOwnProperty("latex")&&(i.latex=e.latex+""),e.hasOwnProperty("color")&&(i.color=e.color+""),e.hasOwnProperty("hidden")&&(i.hidden=!!e.hidden),e.hasOwnProperty("points")&&(i.points=!!e.points),e.hasOwnProperty("lines")&&(i.lines=!!e.lines),e.hasOwnProperty("values")&&e.values&&(i.values=e.values.map(function(e){return e+""})),e.hasOwnProperty("columnMode")&&(s.warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),e.columnMode===t.SanitizedColumnMode.POINTS_AND_LINES?(i.points=!0,i.lines=!0):e.columnMode===t.SanitizedColumnMode.LINES?(i.points=!1,i.lines=!0):(i.points=!0,i.lines=!1),i.lines&&!i.points&&e.hasOwnProperty("dragMode")&&e.dragMode!==r.DragMode.NONE&&(s.warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),i.points=!0),p(e.columnMode)&&s.warn("Invalid columnMode: '"+e.columnMode+"'.")),e.hasOwnProperty("dragMode")&&(d(e.dragMode)?i.dragMode=e.dragMode===r.DragMode.AUTO?r.DragMode.NONE:e.dragMode:s.warn("Invalid dragMode: '"+e.dragMode+"'.")),i}function M(e,t){var n={type:"table",id:w(e,t)};return e.hasOwnProperty("columns")&&e.columns&&(n.columns=e.columns.map(function(e){return S(e,t)})),n}function k(e,t){var n={type:"folder",id:w(e,t)};return e.hasOwnProperty("hidden")&&(n.hidden=!!e.hidden),n}function C(e,t){var n={type:"image",id:w(e,t)};return e.hasOwnProperty("hidden")&&(n.hidden=!!e.hidden),n}function I(e,t,n){var r=e.type;if(t&&r&&r!==t)return void s.warn("Cannot change type of expression from '"+t+"' to '"+r+"'.");switch(r){case void 0:case"expression":return _(e,n);case"image":return C(e,n);case"table":return M(e,n);case"folder":return k(e,n);default:return t?void s.warn("Cannot modify expressions of type: '"+t+"' through the API."):void s.warn("Invalid expression type: '"+r+"'.")}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateItem=t.sanitizeItem=t.SanitizedLabelOrientation=t.SanitizedLabelSize=t.SanitizedColumnMode=t.SanitizedDragMode=t.SanitizedLineStyle=t.SanitizedPointStyle=void 0,t.SanitizedPointStyle={OPEN:n.PointStyle.OPEN,CROSS:n.PointStyle.CROSS,POINT:n.PointStyle.POINT},t.SanitizedLineStyle={SOLID:n.LineStyle.SOLID,DASHED:n.LineStyle.DASHED,DOTTED:n.LineStyle.DOTTED},t.SanitizedDragMode={NONE:r.DragMode.NONE,AUTO:r.DragMode.AUTO,X:r.DragMode.X,Y:r.DragMode.Y,XY:r.DragMode.XY},t.SanitizedColumnMode={POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"},t.SanitizedLabelSize={SMALL:i.LabelSize.SMALL,MEDIUM:i.LabelSize.MEDIUM,LARGE:i.LabelSize.LARGE},t.SanitizedLabelOrientation={ABOVE:o.LabelOrientation.ABOVE,BELOW:o.LabelOrientation.BELOW,DEFAULT:o.LabelOrientation.DEFAULT,LEFT:o.LabelOrientation.LEFT,RIGHT:o.LabelOrientation.RIGHT},t.sanitizeItem=E,t.validateItem=I}),define("core/graphing-calc/json/graph-settings",["require","exports","tslib"],function(e,t,n){"use strict";function r(e){return e in o}Object.defineProperty(t,"__esModule",{value:!0}),t.isGraphSetting=t.publicGraphSettings=t.DefaultGraphSettings=t.AxisArrowModes=void 0;var i;!function(e){e.NONE="NONE",e.POSITIVE="POSITIVE",e.BOTH="BOTH"}(i=t.AxisArrowModes||(t.AxisArrowModes={}));var o={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:i.NONE,yAxisArrowMode:i.NONE,xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,randomSeed:"",restrictGridToFirstQuadrant:!1},a={squareAxes:!0};t.DefaultGraphSettings=n.__assign(n.__assign({},o),a),t.publicGraphSettings=Object.keys(o),t.isGraphSetting=r}),define("main/font_sizes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERY_LARGE=t.LARGE=t.MEDIUM=t.SMALL=t.VERY_SMALL=void 0,t.VERY_SMALL=9,t.SMALL=12,t.MEDIUM=16,t.LARGE=20,t.VERY_LARGE=24}),function(e){"use strict";var t=function(e,n,r){var i,o,a=document.createElement("img");if(a.onerror=n,a.onload=function(){!o||r&&r.noRevoke||t.revokeObjectURL(o),n&&n(t.scale(a,r))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))i=o=t.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;i=e,r&&r.crossOrigin&&(a.crossOrigin=r.crossOrigin)}return i?(a.src=i,a):t.readFile(e,function(e){var t=e.target;t&&t.result?a.src=t.result:n&&n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,n,r,i,o,a,s,c,l){return e.getContext("2d").drawImage(t,n,r,i,o,a,s,c,l),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,n){n=n||{};var r,i,o,a,s,c,l,u,d,p=document.createElement("canvas"),h=e.getContext||t.hasCanvasOption(n)&&p.getContext,f=e.naturalWidth||e.width,m=e.naturalHeight||e.height,g=f,y=m,v=function(){var e=Math.max((o||g)/g,(a||y)/y);e>1&&(g=Math.ceil(g*e),y=Math.ceil(y*e))},b=function(){var e=Math.min((r||g)/g,(i||y)/y);e<1&&(g=Math.ceil(g*e),y=Math.ceil(y*e))};return h&&(n=t.getTransformedOptions(n),l=n.left||0,u=n.top||0,n.sourceWidth?(s=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(l=f-s-n.right)):s=f-l-(n.right||0),n.sourceHeight?(c=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(u=m-c-n.bottom)):c=m-u-(n.bottom||0),g=s,y=c),r=n.maxWidth,i=n.maxHeight,o=n.minWidth,a=n.minHeight,h&&r&&i&&n.crop?(g=r,y=i,d=s/c-r/i,d<0?(c=i*s/r,void 0===n.top&&void 0===n.bottom&&(u=(m-c)/2)):d>0&&(s=r*c/i,void 0===n.left&&void 0===n.right&&(l=(f-s)/2))):((n.contain||n.cover)&&(o=r=r||o,a=i=i||a),n.cover?(b(),v()):(v(),b())),h?(p.width=g,p.height=y,t.transformCoordinates(p,n),t.renderImageToCanvas(p,e,l,u,s,c,0,0,g,y)):(e.width=g,e.height=y,e)},t.createObjectURL=function(e){return!!n&&n.createObjectURL(e)},t.revokeObjectURL=function(e){return!!n&&n.revokeObjectURL(e)},t.readFile=function(e,t,n){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=t,n=n||"readAsDataURL",r[n])return r[n](e),r}return!1},"function"==typeof define&&define.amd?define("vendor/load-image/load-image",[],function(){return t}):e.loadImage=t}(this),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-orientation",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var n=e.getContext("2d"),r=e.width,i=e.height,o=t.orientation;if(o)switch(o>4&&(e.width=i,e.height=r),o){case 2:n.translate(r,0),n.scale(-1,1);break;case 3:n.translate(r,i),n.rotate(Math.PI);break;case 4:n.translate(0,i),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-i);break;case 7:n.rotate(.5*Math.PI),n.translate(r,-i),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-r,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);switch(e.orientation){case 2:n.left=e.right,n.right=e.left;break;case 3:n.left=e.right,n.top=e.bottom,n.right=e.left,n.bottom=e.top;break;case 4:n.top=e.bottom,n.bottom=e.top;break;case 5:n.left=e.top,n.top=e.left,n.right=e.bottom,n.bottom=e.right;break;case 6:n.left=e.top,n.top=e.right,n.right=e.bottom,n.bottom=e.left;break;case 7:n.left=e.bottom,n.top=e.right,n.right=e.top,n.bottom=e.left;break;case 8:n.left=e.bottom,n.top=e.left,n.right=e.top,n.bottom=e.right}return e.orientation>4&&(n.maxWidth=e.maxHeight,n.maxHeight=e.maxWidth,n.minWidth=e.minHeight,n.minHeight=e.minWidth,n.sourceWidth=e.sourceHeight,n.sourceHeight=e.sourceWidth),n}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-meta",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,r){r=r||{};var i=this,o=r.maxMetaDataSize||262144,a={};!!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice)&&e.readFile(e.blobSlice.call(t,0,o),function(t){var o,s,c,l,u=t.target.result,d=new DataView(u),p=2,h=d.byteLength-4,f=p;if(65496===d.getUint16(0)){for(;p<h&&((o=d.getUint16(p))>=65504&&o<=65519||65534===o);){if(s=d.getUint16(p+2)+2,p+s>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(c=e.metaDataParsers.jpeg[o])for(l=0;l<c.length;l+=1)c[l].call(i,d,p,s,a,r);p+=s,f=p}!r.disableImageHead&&f>6&&(u.slice?a.imageHead=u.slice(0,f):a.imageHead=new Uint8Array(u).subarray(0,f))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(a)},"readAsArrayBuffer")||n(a)}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-ios",["./load-image"],e):e(window.loadImage)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,1-e.width,0),0===n.getImageData(0,0,1,1).data[3])},e.detectVerticalSquash=function(e,t){var n,r,i,o,a,s=e.naturalHeight||e.height,c=document.createElement("canvas"),l=c.getContext("2d");for(t&&(s/=2),c.width=1,c.height=s,l.drawImage(e,0,0),n=l.getImageData(0,0,1,s).data,r=0,i=s,o=s;o>r;)a=n[4*(o-1)+3],0===a?i=o:r=o,o=i+r>>1;return o/s||1},e.renderImageToCanvas=function(n,r,i,o,a,s,c,l,u,d){if("image/jpeg"===r._type){var p,h,f,m,g=n.getContext("2d"),y=document.createElement("canvas"),v=y.getContext("2d");if(y.width=1024,y.height=1024,g.save(),p=e.detectSubsampling(r),p&&(i/=2,o/=2,a/=2,s/=2),h=e.detectVerticalSquash(r,p),p||1!==h){for(o*=h,u=Math.ceil(1024*u/a),d=Math.ceil(1024*d/s/h),l=0,m=0;m<s;){for(c=0,f=0;f<a;)v.clearRect(0,0,1024,1024),v.drawImage(r,i,o,a,s,-f,-m,a,s),g.drawImage(y,0,0,1024,1024,c,l,u,d),f+=1024,c+=u;m+=1024,l+=d}return g.restore(),n}}return t(n,r,i,o,a,s,c,l,u,d)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-exif",["./load-image","./load-image-meta"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var r,i,o;if(!n||t+n>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(r=[],i=0;i<n;i+=1)o=e.getUint8(t+i),r.push((o<16?"0":"")+o.toString(16));return"data:image/jpeg,%"+r.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,r,i,o,a){var s,c,l,u,d,p,h=e.exifTagTypes[i];if(!h)return void console.log("Invalid Exif data: Invalid tag type.");if(s=h.size*o,(c=s>4?n+t.getUint32(r+8,a):r+8)+s>t.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===o)return h.getValue(t,c,a);for(l=[],u=0;u<o;u+=1)l[u]=h.getValue(t,c+u*h.size,a);if(h.ascii){for(d="",u=0;u<l.length&&"\0"!==(p=l[u]);u+=1)d+=p;return d}return l},e.parseExifTag=function(t,n,r,i,o){var a=t.getUint16(r,i);o.exif[a]=e.getExifValue(t,n,r,t.getUint16(r+2,i),t.getUint32(r+4,i),i)},e.parseExifTags=function(e,t,n,r,i){var o,a,s;if(n+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(o=e.getUint16(n,r),(a=n+2+12*o)+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(s=0;s<o;s+=1)this.parseExifTag(e,t,n+2+12*s,r,i);return e.getUint32(a,r)},e.parseExifData=function(t,n,r,i,o){if(!o.disableExif){var a,s,c,l=n+10;if(1165519206===t.getUint32(n+4)){if(l+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,a))return void console.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(l+4,a),i.exif=new e.ExifMap,s=e.parseExifTags(t,l,l+s,a,i),s&&!o.disableExifThumbnail&&(c={exif:{}},s=e.parseExifTags(t,l,l+s,a,c),c.exif[513]&&(i.exif.Thumbnail=e.getExifThumbnail(t,l+c.exif[513],c.exif[514]))),i.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,l,l+i.exif[34665],a,i),i.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,l,l+i.exif[34853],a,i)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define("vendor/load-image/load-image-exif-map",["./load-image","./load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",
37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,r=e.map;for(t in n)n.hasOwnProperty(t)&&(r[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e])&&(n[t]=this.getText(t));return n}}),define("loadImage",["require","vendor/load-image/load-image-orientation","vendor/load-image/load-image-meta","vendor/load-image/load-image-ios","vendor/load-image/load-image-exif","vendor/load-image/load-image-exif-map","vendor/load-image/load-image"],function(e){"use strict";return e("vendor/load-image/load-image-orientation"),e("vendor/load-image/load-image-meta"),e("vendor/load-image/load-image-ios"),e("vendor/load-image/load-image-exif"),e("vendor/load-image/load-image-exif-map"),e("vendor/load-image/load-image")}),define("expressions/image_file_to_data_url",["require","exports","loadImage"],function(e,t,n){"use strict";function r(e,t){for(var n,r=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],i=0;i<r.length;i++)if(n=e.toDataURL("image/jpeg",r[i]),n.length<t)return n;return n}function i(e,t){for(var n,r=e.toDataURL().length,i=e.width,o=e.height,a=document.createElement("canvas"),s=0;s<2;s++){var c=Math.sqrt(t/r);i=Math.round(c*i),o=Math.round(c*o),a.height=o,a.width=i;if(a.getContext("2d").drawImage(e,0,0,i,o),n=a.toDataURL(),(r=n.length)<t)return n}return n}function o(e){for(var t=e.getContext("2d"),n=t.getImageData(0,0,e.width,e.height).data,r=3;r<n.length;r+=4)if(255!==n[r])return!0;return!1}function a(e,t){var a={orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600};n(e,function(n){if(!n.toDataURL)return void t(!0);var a;if("image/jpeg"===e.type)a=r(n,2e5);else if(a=n.toDataURL(),a.length>2e5){var s=a.length>.75*n.width*n.height,c=s&&!o(n);a=c?r(n,2e5):i(n,2e5)}t(null,a)},a)}Object.defineProperty(t,"__esModule",{value:!0}),t.imageFileToDataURL=void 0,t.imageFileToDataURL=a}),define("main/graph_settings",["require","pjs","underscore","underscore_model","core/graphing-calc/json/graph-settings","console","core/graphing-calc/json/graph-settings","core/lib/color-helpers"],function(e){"use strict";var t=e("pjs"),n=e("underscore"),r=e("underscore_model").UnderscoreModel,i=e("core/graphing-calc/json/graph-settings").AxisArrowModes,o=e("console"),a=e("core/graphing-calc/json/graph-settings").DefaultGraphSettings,s=e("core/lib/color-helpers"),c=t(r,function(e,t,l){e.init=function(){function e(e,t,n){function r(){o.setProperty(e,o.config.projectorMode?n:t)}o.cloneProperties.push(e),o.config.observe("projectorMode",r),r()}function n(e,t,n,r,i){function a(){var a;a=o.config.projectorMode?o.highlight?i:r:o.highlight?n:t,o.setProperty(e,a)}o.cloneProperties.push(e),o.observe("highlight",a),o.config.observe("projectorMode",a),a()}t.init.call(this),this.stateProperties=[],this.cloneProperties=[],this.config=new r;for(var i in a)a.hasOwnProperty(i)&&this.addStateProperty(i,a[i]);this.labelHangingColor="rgba(150,150,150,1)",this.lastChangedAxis="x";var o=this;e("labelSize",14,19),e("majorAxisOpacity",.4,1),e("minorAxisOpacity",.12,.25),e("axisOpacity",.9,.9),e("axisLineWidth",1.5,2),e("axisLineOffset",.25,0),e("pixelsPerLabel",80,120),n("curveOpacity",.7,1,.7,1),e("globalCurveColor",void 0,void 0),e("disableFill",!1,!1),n("graphLineWidth",2.5,3.5,5,7),n("pointLineWidth",9,11,15,17)},e.addStateProperty=function(e,t){this[e]=t,this.stateProperties.push(e),this.cloneProperties.push(e)},l.fromObject=function(e){var t=c();return t.cloneProperties.forEach(function(n){e.hasOwnProperty(n)&&t.setProperty(n,e[n])}),t},e.registerCallbacks=function(e,t){var n=this,r=function(){e.redrawAllLayers()};this.stateProperties.forEach(function(e){n.observe(e,r)}),this.config.observe("backgroundColor",r),this.config.observe("textColor",r),this.config.observe("invertedColors",r),this.observe("squareAxes",function(){e.viewportController.enforceSquareAxes()}),this.observe("backgroundColor",function(){e.redrawAllLayers()}),this.observe("textColor",function(){e.redrawAllLayers()}),this.config.observe("enableTabindex",function(){e.redrawAllLayers()}),this.config.observeAndSync("projectorMode",function(){e.redrawAllLayers()})};var u=function(e,t){var r;switch(e){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":r=Math.round(Math.min(Math.max(0,t),5)),t!==r&&o.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+t+", which we changed to "+r+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":r="false"!==t&&!!t,t!==r&&o.warn(e+" must be a Boolean. You provided "+t+" ("+typeof t+"), which we changed to "+r+" ("+typeof r+").");break;case"xAxisStep":case"yAxisStep":r=parseFloat(t),isFinite(t)||(r=0,o.warn(e+" must be a number. You provided "+t+", which we changed to "+r+"."));break;case"yAxisMinorSubdivisions":r=Math.round(Math.min(Math.max(0,t),5)),t!==r&&o.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+t+", which we changed to "+r+".");break;case"xAxisArrowMode":case"yAxisArrowMode":r=i[t],r!==t&&(r=i.NONE,o.warn("unknown AxisArrowMode. Allowed values are: \n"+n.keys(i).join("\n")));break;case"xAxisLabel":case"yAxisLabel":r=t,"string"!=typeof t&&(r="",o.warn(e+" must be a string. you provided a "+typeof t+"."));break;case"randomSeed":r=t,"string"!=typeof t&&(r=""+t,o.warn("randomSeed must be a string. you provided a "+typeof t+"."));break;case"backgroundColor":r=t,"string"!=typeof t&&(r="",o.warn(e+" must be a string. you provided a "+typeof t+".")),r||(r="#fff"),"#"!==r[0]&&(r="#"+r);break;case"textColor":r=t,"string"!=typeof t&&(r="",o.warn(e+" must be a string. you provided a "+typeof t+".")),r||(r="#000"),"#"!==r[0]&&(r="#"+r);break;case"fontSize":r=t,"number"!=typeof t&&(r=parseInt(r,10),o.warn("fontSize must be a number. Attempted to convert "+t+" to "+r+"."));break;case"language":r=t,"string"!=typeof t&&(r="",o.warn(e+" must be a string. you provided a "+typeof t+".")),"undefined"!=typeof Desmos&&Desmos.supportedLanguages.indexOf(t)<0&&"en"!==t&&(r="en",o.warn(t+" is not currently an available language."));break;default:r=t}return r};e._validateSettings=function(e){var t={},n=!1;for(var r in e)this.stateProperties.indexOf(r)>=0?t[r]=u(r,e[r]):(o.warn('Invalid graph setting "'+r+'".'),n=!0);return n&&o.warn("Available graph settings are: \n"+this.stateProperties.join("\n")),t},e.getBackgroundColor=function(){var e=s.normalizeColor(this.config.backgroundColor||"#fff");return this.config.invertedColors&&"#ffffff"!==e?s.invertColor(e):e},e.getTextColor=function(){var e=s.normalizeColor(this.config.textColor||"#000");return this.config.invertedColors&&"#000000"!==e?s.invertColor(e):e},e.setGraphSettings=function(e){var t=this._validateSettings(e);for(var n in t)t.hasOwnProperty(n)&&("projectorMode"===n||"invertedColors"===n||"fontSize"===n||"language"===n||"backgroundColor"===n||"textColor"===n?this.config.setProperty(n,t[n]):this.setProperty(n,t[n]))}});return c}),define("scroll_helpers",["require"],function(e){return{scrollVisible:function(e,t,n){var r,i=t.height(),o=e.height(),a=e.offset(),s=t.offset();if(!a||!s)return!1;var c=t[0].scrollTop,l=a.top+c-s.top,u=l-n,d=o+l+n-i;return(r=u>=d?Math.min(Math.max(c,d),u):.5*(u+d))!==c&&(t[0].scrollTop=r,t[0].scrollTop!=c)}}}),define("analytics/looker",["require","exports","tslib","underscore","jquery"],function(e,t,n,r,i){"use strict";function o(){return u.pageLoadId}function a(e){d.push(n.__assign(n.__assign({},u),e)),h()}function s(e,t){a({eventType:e,payloadNumber:t})}function c(e,t){a({eventType:e,payloadJSON:JSON.stringify(t)})}function l(){c("page-load",{browserLang:navigator.userLanguage||navigator.language})}Object.defineProperty(t,"__esModule",{value:!0}),t.logPageLoad=t.logJSON=t.logNumber=t.log=t.getPageLoadId=void 0;var u={eventType:"eventType",pageLoadId:window.pageLoadId||function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}(),url:document.location.href,source:"browser",app:"knox",userAgent:navigator.userAgent},d=[];t.getPageLoadId=o,t.log=a,t.logNumber=s,t.logJSON=c,t.logPageLoad=l;var p=!1,h=r.throttle(function(){if(!p&&0!=d.length){var e=d.splice(0,50);p=!0,i.ajax({url:"https://fsoq1oibef.execute-api.us-east-1.amazonaws.com/prod",type:"POST",contentType:"application/json",data:JSON.stringify(e)}).always(function(){p=!1,h()})}},1e3,{leading:!1})}),define("bugsnag",["require","exports","tslib","analytics/looker"],function(e,t,n,r){"use strict";function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function o(){return window.Desmos&&window.Desmos.commit}function a(){var e="production";if(location&&location.hostname){var t=location.hostname,n=t.split("."),r=n.slice(0,n.length-2).join(".");"desmos.com"===n.slice(n.length-2).join(".")&&(e=r&&"www"!==r?r:"production")}return e}function s(e){if(!d){var t=0,n=i();d=e({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,appVersion:o(),releaseStage:a(),consoleBreadcrumbsEnabled:!1,beforeSend:function(e){if(e.errorClass)for(var r=0,i=h;r<i.length;r++){var o=i[r];if(-1!==e.errorClass.indexOf(o))return void e.ignore()}if(e.errorMessage)for(var a=0,s=h;a<s.length;a++){var o=s[a];if(-1!==e.errorMessage.indexOf(o))return void e.ignore()}p&&p(e),e.isIgnored()||(t+=1,e.metaData.errorNumber=t,e.metaData.pageLoadId=n)}}),r.logPageLoad()}}function c(e,t){d&&d.notify(e,t)}function l(e,t,r,i){if(t){t=n.__assign({},t);for(var o in t)try{t[o]=JSON.stringify(t[o],null,2)}catch(e){t[o]="[[could not stringify]]"}}d&&d.leaveBreadcrumb(e,t,r,i)}function u(e){p=e}Object.defineProperty(t,"__esModule",{value:!0}),t.setBeforeSendCB=t.leaveBreadcrumb=t.notify=t.init=void 0;var d,p,h=["UnhandledRejection","lnrAppboy","socratic","MyAppGet","SymBrowser_","mobincube_","_avast_submit","Cannot redefine property: googletag","jcarousel","SyntaxError: Unexpected identifier 'script'","__gCrWeb.autofill.extractForms","BrowseITEXT","Can't find variable: removeAllHighlights","aAttribruteValue.parentNode.getAttribute","vid_mate_check","GetImageTagSrcFromPoint","Can't find variable: didEnterViewPort","tinyMCE is not defined"];t.init=s,t.notify=c,t.leaveBreadcrumb=l,t.setBeforeSendCB=u}),define("tours/trip",["require","jquery","pjs","mathquill","scroll_helpers","bugsnag"],function(e){"use strict";var t=e("jquery"),n=e("pjs"),r=e("mathquill"),i=e("scroll_helpers"),o=e("bugsnag");return n({init:function(e){this.settings=e,this.__cachedStepName=null},ensureTripBlock:function(){if(!this.$tripBlock){var e=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close">&times;</a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join(""),n=this,r=this.$tripBlock=t(e);r.css({top:"-100px"}),t("body").append(r),r.find(".trip-close").on("dcg-tap",function(e){e.preventDefault(),n.stop()}),this.bindKeyEvents()}},cleanup:function(){return this.unbindKeyEvents(),this.hideTripBlock(),!1},bindKeyEvents:function(){var e=this;t(document).on({"keydown.Trip":function(t){e.keyEvent.call(e,t)}})},unbindKeyEvents:function(){t(document).off("keydown.Trip")},keyEvent:function(e){27===e.which&&this.stop()},stop:function(){this.hideTripBlock(),this.settings.onTripStop()},exitTourBecauseOfError:function(e,t){var n="",r=t;do{n=r.selector+n}while(r=r.prevObject);this.stop(),o.notify("TourError: could not find $sel.offset()",{metaData:{message:e,selector:n}})},showTripBlock:function(e){this.ensureTripBlock(),"string"==typeof e.sel&&(e.sel=t(e.sel)),e.sel=e.sel.filter(":visible"),e.scrollContainer&&i.scrollVisible(e.sel,e.scrollContainer,0);var n=this.$tripBlock;n.find(".trip-content").html(e.content),n.toggleClass("trip-hidden",!!e.hidden);var o=e.sel,a=o.outerWidth(),s=o.outerHeight(),c=n.outerWidth(),l=n.outerHeight();if(!o.offset())return void(this.__cachedMissingSelTime?Date.now()-this.__cachedMissingSelTime>1e3&&(e.final?this.stop():this.exitTourBecauseOfError(e.content,o)):this.__cachedMissingSelTime=Date.now());this.__cachedMissingSelTime=void 0,n.removeClass("trip-e trip-s trip-w trip-n");var u=0;switch(e.position){case"e":n.addClass("trip-e"),n.css({left:o.offset().left+a+10,top:o.offset().top-(l-s)/2});break;case"s":n.addClass("trip-s");var d=o.offset().left+(a-c)/2;n.css({left:d,top:o.offset().top+s+10}),d+c>t(window).width()-1&&(u=t(window).width()-1-d-c),d<1&&(u=1-d);break;case"w":n.addClass("trip-w"),n.css({left:o.offset().left-(10+c),top:o.offset().top-(l-s)/2});break;default:n.addClass("trip-n"),n.css({left:o.offset().left+(a-c)/2,top:o.offset().top-10-l})}n.find(".trip-interior").css("transform","translate("+u+"px, 0)"),n.css({display:"inline-block"}),n.find(".trip-math:not(.dcg-mq-math-mode)").each(function(){r.StaticMath(this)})},fadeInTripBlock:function(){this.ensureTripBlock();var e=this.$tripBlock;setTimeout(function(){e.addClass("trip-is-loaded")},0)},hideTripBlock:function(){this.$tripBlock&&this.$tripBlock.removeClass("trip-is-loaded")}})}),define("tours/tour_manager",["require","pjs","./trip"],function(e){"use strict";var t=e("pjs"),n=e("./trip");return t(function(e,t){e.init=function(){this.tripManager=new n({onTripStop:this.stopTour.bind(this)}),this.currentStep=void 0,this.currentTour=void 0},e._tripLoop=function(){if(clearTimeout(this.__tripLoopTimeout),this.running){var e=this;e._advanceTrip(),e.__tripLoopTimeout=setTimeout(e._tripLoop.bind(e),200)}},e._advanceTrip=function(){var e=this.currentTour.update(),t=(new Date).getTime();if(e&&this.currentStep&&e.content!==this.currentStep.content){if(this.currentStep.delayBeforeExit){if(this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeExit)return;if(!this.throttleTimer)return void(this.throttleTimer=t)}e.delayBeforeEnter&&(this.currentStep=e,this.throttleTimer=t)}if(!(e&&this.currentStep&&e.content===this.currentStep.content&&this.throttleTimer&&t-this.throttleTimer<this.currentStep.delayBeforeEnter)&&(this.throttleTimer=null,e&&!e.doNotUpdate)){if(this.currentStep=e,e.final)return void this.finishTour(e,5);this.tripManager.showTripBlock(e)}},e.updateNow=e._advanceTrip,e.startTour=function(e){this.running||(this.currentTour=e,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())},e.closingMsg="<b>__endingMessage__</b><br>This message will self-destruct in __seconds__...",e.finishTour=function(e,t){clearTimeout(this.__tripLoopTimeout),this.running=!1;var n=this;if(t<0)return void n.tripManager.stop();e.endingMsg&&(e.content=n.closingMsg.replace("__endingMessage__",e.endingMsg).replace("__seconds__",t)),n.tripManager.showTripBlock(e),setTimeout(function(){n.finishTour(e,t-1)},1e3)},e.stopTour=function(){this.running=!1,this.currentStep=void 0,this.currentTour=void 0}})}),define("core/math/distance",["require","exports"],function(e,t){"use strict";function n(e){return e===1/0||e===-1/0}function r(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function i(e,t,n,r,i,o){return e*r+t*i+n*o}function o(e,n,r,o,a,s,c,l,u){var d=t.hypot(c-o,l-a,u-s);return 0===d?0:i((e-o)/d,(n-a)/d,(r-s)/d,(c-o)/d,(l-a)/d,(u-s)/d)}function a(e,t,n,r,i,a){var s=o(e,t,0,n,r,0,i,a,0);return s<=0?[n,r]:s>=1?[i,a]:[n+s*(i-n),r+s*(a-r)]}function s(e,n,r,i,o,s){var c=a(e,n,r,i,o,s);return t.hypot(e-c[0],n-c[1])}function c(e,t,n){if(void 0===n&&(n=1),e===t)return!0;if(!isFinite(e)||!isFinite(t))return!1;if(n>50)throw new Error("Within "+(52-n)+" bits isn't really approximate any more");var r=Math.max(Math.max(Math.abs(e),Math.abs(t)),1);return r===r+(1===n?.5:Math.pow(.5,n))*Math.abs(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.approx=t.pointToSegment=t.closestPointOnSegment=t.pointToSegmentParameter=t.mean=t.hypot=void 0;var l=Math.hypot&&Math.hypot(1/0,NaN)===1/0;t.hypot=l?Math.hypot:function(e,t,r){if(n(e)||n(t)||void 0!==r&&n(r))return 1/0;if(isNaN(e)||isNaN(t)||void 0!==r&&isNaN(r))return NaN;if(0===e&&0===t&&(void 0===r||0===r))return 0;for(var i=0,o=0,a=0;a<arguments.length;a+=1){var s=Math.abs(Number(arguments[a]));s>i&&(o*=i/s*(i/s),i=s),o+=0===s&&0===i?0:s/i*(s/i)}return i===1/0?1/0:i*Math.sqrt(o)},t.mean=r,t.pointToSegmentParameter=o,t.closestPointOnSegment=a,t.pointToSegment=s,t.approx=c}),define("core/math/mathshim",["require"],function(e){"use strict";var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var n=e>0?1:-1;return e=e>0?e:-e,.5*-n*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var n=e>0?1:-1;e=e>0?e:-e;var r=t.expm1(-2*e);return-n*r/(2+r)},t.acosh=Math.acosh||function(e){return e<1?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var n=e>0?1:-1;return e=e>0?e:-e,1+e*e==1?n*t.log1p(e):n*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("core/math/poi",["require","exports","core/math/distance"],function(e,t,n){"use strict";function r(e,t){var r;e>t&&(r=e,e=t,t=r);var i=e>0,o=t>0,a=Math.abs(e)>.01,s=Math.abs(t)>.01;if(a||s)return n.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==o)return 0;var c=i?Math.sqrt(e*t):-Math.sqrt(e*t);return c>=e&&t>=c?c:n.mean(e,t)}function i(e,t,n,i,a){if(!isNaN(t)&&!isNaN(i)&&t<0!=i<0)for(;;){var s=r(e,n),c=a(s);if(!isFinite(c))return;if(s===e||s===n)return Math.abs(t)<=Math.abs(i)?[e,t]:[n,i];if(0===c)return o(e,t,s,c,n,i,a);t<0!=c<0?(n=s,i=c):(e=s,t=c)}}function o(e,t,n,i,o,c,l){var u;if(isFinite(i)){isFinite(t)||(u=a(e,t,n,i,l))&&(e=u[0],t=u[1]),isFinite(c)||(u=a(n,i,o,c,l))&&(o=u[0],c=u[1]);var d,p;d=t===i?[e,t]:s(e,t,n,i,l,i),p=c===i?[o,c]:s(n,i,o,c,l,i);var h;return d&&p&&(h=r(d[0],p[0])),void 0!==h?[h,l(h)]:void 0}}function a(e,t,n,i,o){if(isFinite(t)!==isFinite(i))for(;;){var a=r(e,n),s=o(a);if(a===e||a===n)return isFinite(t)?[e,t]:[n,i];isFinite(s)!==isFinite(t)?(n=a,i=s):(e=a,t=s)}}function s(e,t,n,i,o,a){if(t===a!=(i===a))for(;;){var s=r(e,n),c=o(s);if(s===e||s===n)return t===a?[e,t]:[n,i];c===a!=(t===a)?(n=s,i=c):(e=s,t=c)}}function c(e,t,n,i,a,s,c){if(e<n&&n<a&&isFinite(t)&&isFinite(i)&&isFinite(s)&&t!==i&&i!==s&&i>t==i>s)for(;;){var l=r(e,n),u=c(l),d=r(n,a),p=c(d);if(!isFinite(u)||!isFinite(p))return;if(l===e||l===n||d===n||d===a)return u>i==i>t?[l,u]:p>i==i>t?[d,p]:[n,i];if(u===i||p===i)return o(e,t,n,i,a,s,c);u>t==i>t&&u>t==u>i?(a=n,s=i,n=l,i=u):p>s==i>s&&p>i==p>s?(e=n,t=i,n=d,i=p):(e=l,t=u,a=d,s=p)}}function l(e,t){var n=e[0],r=e[1],i=t[0],o=t[1];return(i-n)*(i-n)+(o-r)*(o-r)}function u(e,t,n,i,o,a){var s,c,u,d,p,h,f,m,g,y=a(e),v=a(t),b=a(n),x=l(y,i),E=l(v,i),w=l(b,i);if(!(t<=e||n<=t)&&isFinite(x)&&isFinite(E)&&isFinite(w)&&!(E>=x||E>=w))for(;;){if(Math.abs(b[0]-y[0])<o&&Math.abs(b[1]-y[1])<o)return[e,n];var _=r(e,t),S=a(_),M=l(S,i),k=r(t,n),C=a(k),I=l(C,i);if(!isFinite(M)||!isFinite(I))return;if(_===e||_===t||k===t||k===n)return M<E&&M<I?[_,_]:I<M&&I<E?[k,k]:[t,t];if((M===E||I===E)&&(t=.5*(_+t),v=a(t),E=l(v,i),M===E||I===E))return[e,n];M<E&&M<I?(s=[t,_],n=s[0],t=s[1],c=[v,S],b=c[0],v=c[1],u=[E,M],w=u[0],E=u[1]):I<M&&I<E?(d=[t,k],e=d[0],t=d[1],p=[v,C],y=p[0],v=p[1],h=[E,I],x=h[0],E=h[1]):(f=[_,k],e=f[0],n=f[1],m=[S,C],y=m[0],b=m[1],g=[M,I],x=g[0],w=g[1])}}function d(e,t,n){return void 0===t&&(t=-1/0),void 0===n&&(n=1/0),Math.min(n,Math.max(t,e))}function p(e,t,n,r,i,o){var a,s,c,p,h;if(void 0!==r&&void 0!==i){h=n+.01*(n<.5*(r+i)?i-r:r-i)}else h=Math.abs(n)>1?1.00001*n:n+1e-5;var f=e(n),m=e(h),g=l(f,t),y=l(m,t);if(isFinite(g)&&isFinite(y)){if(g===y)return[n,h];for(y>g&&(a=[h,n],n=a[0],h=a[1],s=[m,f],f=s[0],m=s[1],c=[y,g],g=c[0],y=c[1]);isFinite(n)&&isFinite(h)&&n!==h;){if(void 0!==i&&h>i)return[i,i];if(void 0!==r&&h<r)return[r,r];var v=n+3*(h-n),b=e(v),x=l(b,t);if(!isFinite(x))return[n,h];if(x===y)return[n,h];if(x>y){var E=h>n?u(n,h,v,t,o,e):u(v,h,n,t,o,e);return E?[d(E[0],r,i),d(E[1],r,i)]:E}p=[h,y,v,x],n=p[0],g=p[1],h=p[2],y=p[3]}return[n,h]}}function h(e,t,n,r){return!n||!!r&&Math.min(l(e(r[0]),t),l(e(r[1]),t))<Math.min(l(e(n[0]),t),l(e(n[1]),t))}function f(e,t,n,r,i,o){var a=p(e,t,n,r,i,o);if(void 0!==r){var s=p(e,t,r,r,i,o);h(e,t,a,s)&&(a=s)}if(void 0!==i){var c=p(e,t,i,r,i,o);h(e,t,a,c)&&(a=c)}return a}function m(e,t,n,r,i,o,a,s){var c=Math.abs(r-t),l=Math.abs(o-r),u=Math.abs(s-o);return c>l&&c>u?[[e,t],[n,r]]:u>l&&u>c?[[i,o],[a,s]]:[[n,r],[i,o]]}function g(e,t,i,o,s,c,l,u){if(u||(u=0),!((i-e)*(s-i)<=0)&&isFinite(e)&&isFinite(i)&&isFinite(s)&&isFinite(t)&&isFinite(c)){if(!isFinite(o)){var d=a(e,t,i,o,l),p=a(i,o,s,c,l);if(!d||!p)return;return[d,p]}if(!(Math.abs(o-((s-i)*t+(i-e)*c)/(s-e))<u))for(;;){var h=r(e,i),f=l(h),g=r(i,s),y=l(g),v=Math.abs(f-n.mean(t,o)),b=Math.abs(o-n.mean(f,y)),x=Math.abs(y-n.mean(o,c));if(v<=u&&b<=u&&x<=u)return;if(!isFinite(f)){var d=a(e,t,h,f,l),p=a(h,f,s,c,l);if(!d||!p)return;return[d,p]}if(!isFinite(y)){var d=a(e,t,g,y,l),p=a(g,y,s,c,l);if(!d||!p)return;return[d,p]}if(!(h!==e&&h!==i||g!==i&&g!==s))return Math.abs(o-t)>Math.abs(c-o)?[[e,t],[i,o]]:[[i,o],[s,c]];if(h===e||h===i)return m(e,t,i,o,g,y,s,c);if(g===i||g===s)return m(e,t,h,f,i,o,s,c);v>x&&v>=b?(s=i,c=o,i=h,o=f):x>v&&x>=b?(e=i,t=o,i=g,o=y):(e=h,t=f,s=g,c=y)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.bisectJump=t.findLocalClosestPointOnParametric=t.bisectClosestPointOnParametric=t.bisectExtremum=t.bisectFinite=t.flatCenter=t.bisectZero=t.floatMiddle=void 0,t.floatMiddle=r,t.bisectZero=i,t.flatCenter=o,t.bisectFinite=a,t.bisectExtremum=c,t.bisectClosestPointOnParametric=u,t.findLocalClosestPointOnParametric=f,t.bisectJump=g}),define("core/math/quadrature",["require","core/math/mathshim","core/math/poi"],function(e){"use strict";function t(e,t,n){return.5*(t*(2-n)+e*n)}function n(e,t,n){var r=.5*(t+n),i=u(t,e(t),r,e(r),n,e(n),e,0);return i?.5*(i[0][0]+i[1][0]):r}function r(e,t,n,r,i){return{x1:e,x2:t,value:n,error:r,minerror:i}}function i(e,n,r){var i=Math.abs(e(t(n,r,f))),o=Math.abs(e(t(n,r,2*f)));return!(i<f||o<f)&&i>1.95*o}function o(e,n,o){var a,s,c=t(o,n,v[0]),l=t(n,o,v[0]),u=e(c),p=e(l),h=t(n,o,1),f=e(h);if(isFinite(f)&&!isFinite(u)){if(a=d(c,u,h,f,e),Math.abs((a[0]-n)/(o-n))>g)return r(n,o,NaN,NaN,NaN);n=a[0],u=a[1]}if(isFinite(f)&&!isFinite(p)){if(s=d(h,f,l,p,e),Math.abs((s[0]-o)/(o-n))>g)return r(n,o,NaN,NaN,NaN);o=s[0],p=s[1]}if(isFinite(u)&&isFinite(p)&&!isFinite(f)){if(a=d(c,u,h,f,e),s=d(h,f,l,p,e),Math.abs((s[0]-a[0])/(o-n))>g)return r(n,o,NaN,NaN,NaN);f=.5*(a[1]+s[1])}if(i(e,n,o)||i(e,o,n))return r(n,o,NaN,NaN,NaN);for(var m=f,x=0,E=0,_=0,S=0,M=0,k=0,C=0;C<y;C+=4)M=e(t(n,o,v[C])),k=e(t(o,n,v[C])),S=Math.max(S,Math.abs(M),Math.abs(k)),x+=b[C]*(M+k),M=e(t(n,o,v[C+1])),k=e(t(o,n,v[C+1])),S=Math.max(S,Math.abs(M),Math.abs(k)),_+=b[C+1]*(M+k),M=e(t(n,o,v[C+2])),k=e(t(o,n,v[C+2])),S=Math.max(S,Math.abs(M),Math.abs(k)),E+=b[C+2]*(M+k),M=e(t(n,o,v[C+3])),k=e(t(o,n,v[C+3])),S=Math.max(S,Math.abs(M),Math.abs(k)),_+=b[C+3]*(M+k);var I,T=m+x,L=T+E,D=L+_,P=Math.abs(E-T),A=Math.abs(_-L),O=w*(o-n)*D,F=w*Math.abs(o-n)*S*b[0];return I=0===P?w*Math.abs(o-n)*A:w*Math.abs(o-n)*A*(A/P)*(A/P),I=Math.max(I,F),r(n,o,O,I,F)}function a(e){for(var t=-1/0,n=-1/0,r=-1,i=0,o=0;o<e.length;o++){var a=e[o];i+=a.value,a.error>t&&(t=a.error,r=o),a.minerror>n&&(n=a.minerror)}return{maxerror:t,maxminerror:n,maxindex:r,totalvalue:i}}function s(e,r,i,s){if(void 0===s&&(s=32),!isFinite(r)||!isFinite(i))return NaN;for(var c=[o(e,r,i)],l=a(c),u=1;u<s&&(!(Math.abs(l.maxerror/l.totalvalue)<=32*m||l.maxerror<=32*m||l.maxerror<=32*l.maxminerror)&&isFinite(l.maxerror)&&isFinite(l.maxminerror));u++){var d=c[c.length-1];c[c.length-1]=c[l.maxindex],c[l.maxindex]=d;var p=c.pop(),h=n(e,t(p.x2,p.x1,.125),t(p.x1,p.x2,.125));c.push(o(e,p.x1,h)),c.push(o(e,h,p.x2)),l=a(c)}return isFinite(l.maxerror)&&isFinite(l.maxminerror)?Math.abs(l.totalvalue)<=10*l.maxminerror?0:l.totalvalue:NaN}var c=e("core/math/mathshim"),l=e("core/math/poi"),u=l.bisectJump,d=l.bisectFinite,p=3.154019550531224,h=Math.pow(2,-13),f=h*h,m=f*f,g=f,y=32,v=[],b=[];!function(e,t){for(var n=y;n>0;n--){var r=p/y*n,i=c.sinh(r),o=c.cosh(Math.PI/2*i),a=1/(Math.exp(Math.PI/2*i)*o),s=c.cosh(r)/(o*o);e.push(a),t.push(s)}}(v,b);for(var x=0,E=0;E<b.length;E++)x+=b[E];var w=1/(1+2*x);return{quad:s}}),define("core/math/tofraction",["require","exports"],function(e,t){"use strict";function n(e,t){if(void 0===t&&(t=1e6),e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};for(var n,r,i,o=0,a=1,s=1,c=0;;){if(n=Math.floor(e),r=n*a+o,(i=n*c+s)>t)break;if(o=a,s=c,a=r,c=i,e===n)break;e=1/(e-n)}return{n:a,d:c}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),function(e){"use strict";function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,t){return e<<t|e>>>32-t}function r(e,r,i,o,a,s){return t(n(t(t(r,e),t(o,s)),a),i)}function i(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function o(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function c(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;var r,c,l,u,d,p=1732584193,h=-271733879,f=-1732584194,m=271733878;for(r=0;r<e.length;r+=16)c=p,l=h,u=f,d=m,p=i(p,h,f,m,e[r],7,-680876936),m=i(m,p,h,f,e[r+1],12,-389564586),f=i(f,m,p,h,e[r+2],17,606105819),h=i(h,f,m,p,e[r+3],22,-1044525330),p=i(p,h,f,m,e[r+4],7,-176418897),m=i(m,p,h,f,e[r+5],12,1200080426),f=i(f,m,p,h,e[r+6],17,-1473231341),h=i(h,f,m,p,e[r+7],22,-45705983),p=i(p,h,f,m,e[r+8],7,1770035416),m=i(m,p,h,f,e[r+9],12,-1958414417),f=i(f,m,p,h,e[r+10],17,-42063),h=i(h,f,m,p,e[r+11],22,-1990404162),p=i(p,h,f,m,e[r+12],7,1804603682),m=i(m,p,h,f,e[r+13],12,-40341101),f=i(f,m,p,h,e[r+14],17,-1502002290),h=i(h,f,m,p,e[r+15],22,1236535329),p=o(p,h,f,m,e[r+1],5,-165796510),m=o(m,p,h,f,e[r+6],9,-1069501632),f=o(f,m,p,h,e[r+11],14,643717713),h=o(h,f,m,p,e[r],20,-373897302),p=o(p,h,f,m,e[r+5],5,-701558691),m=o(m,p,h,f,e[r+10],9,38016083),f=o(f,m,p,h,e[r+15],14,-660478335),h=o(h,f,m,p,e[r+4],20,-405537848),p=o(p,h,f,m,e[r+9],5,568446438),m=o(m,p,h,f,e[r+14],9,-1019803690),f=o(f,m,p,h,e[r+3],14,-187363961),h=o(h,f,m,p,e[r+8],20,1163531501),p=o(p,h,f,m,e[r+13],5,-1444681467),m=o(m,p,h,f,e[r+2],9,-51403784),f=o(f,m,p,h,e[r+7],14,1735328473),h=o(h,f,m,p,e[r+12],20,-1926607734),p=a(p,h,f,m,e[r+5],4,-378558),m=a(m,p,h,f,e[r+8],11,-2022574463),f=a(f,m,p,h,e[r+11],16,1839030562),h=a(h,f,m,p,e[r+14],23,-35309556),p=a(p,h,f,m,e[r+1],4,-1530992060),m=a(m,p,h,f,e[r+4],11,1272893353),f=a(f,m,p,h,e[r+7],16,-155497632),h=a(h,f,m,p,e[r+10],23,-1094730640),
p=a(p,h,f,m,e[r+13],4,681279174),m=a(m,p,h,f,e[r],11,-358537222),f=a(f,m,p,h,e[r+3],16,-722521979),h=a(h,f,m,p,e[r+6],23,76029189),p=a(p,h,f,m,e[r+9],4,-640364487),m=a(m,p,h,f,e[r+12],11,-421815835),f=a(f,m,p,h,e[r+15],16,530742520),h=a(h,f,m,p,e[r+2],23,-995338651),p=s(p,h,f,m,e[r],6,-198630844),m=s(m,p,h,f,e[r+7],10,1126891415),f=s(f,m,p,h,e[r+14],15,-1416354905),h=s(h,f,m,p,e[r+5],21,-57434055),p=s(p,h,f,m,e[r+12],6,1700485571),m=s(m,p,h,f,e[r+3],10,-1894986606),f=s(f,m,p,h,e[r+10],15,-1051523),h=s(h,f,m,p,e[r+1],21,-2054922799),p=s(p,h,f,m,e[r+8],6,1873313359),m=s(m,p,h,f,e[r+15],10,-30611744),f=s(f,m,p,h,e[r+6],15,-1560198380),h=s(h,f,m,p,e[r+13],21,1309151649),p=s(p,h,f,m,e[r+4],6,-145523070),m=s(m,p,h,f,e[r+11],10,-1120210379),f=s(f,m,p,h,e[r+2],15,718787259),h=s(h,f,m,p,e[r+9],21,-343485551),p=t(p,c),h=t(h,l),f=t(f,u),m=t(m,d);return[p,h,f,m]}function l(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function u(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){return l(c(u(e),8*e.length))}function p(e,t){var n,r,i=u(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=c(o.concat(u(t)),512+8*t.length),l(c(a.concat(r),640))}function h(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function f(e){return unescape(encodeURIComponent(e))}function m(e){return d(f(e))}function g(e){return h(m(e))}function y(e,t){return p(f(e),f(t))}function v(e,t){return h(y(e,t))}function b(e,t,n){return t?n?y(t,e):v(t,e):n?m(e):g(e)}"function"==typeof define&&define.amd?define("core/lib/md5",[],function(){return b}):"object"==typeof module&&module.exports?module.exports=b:e.md5=b}(this),define("core/math/builtin",["require","core/math/mathshim","core/math/distance","core/math/quadrature","core/math/tofraction","core/math/poi","core/lib/md5"],function(e){"use strict";function t(e,t,n){return Math.max(t,Math.min(n,e))}function n(e){return!(e>1e12)&&Math.round(m*e)*Math.PI===e}function r(e){if(e>1e12)return!1;var t=Math.round(2*m*e);return t%2==1&&t*Math.PI==2*e}function i(e,t,n){return n<0?d.tcdf(-1/0,e,t):n>0?d.tcdf(-1/0,-e,t):2*d.tcdf(-1/0,-Math.abs(e),t)}var o=e("core/math/mathshim"),a=e("core/math/distance"),s=e("core/math/quadrature"),c=e("core/math/tofraction").default,l=e("core/math/poi").floatMiddle,u=e("core/lib/md5"),d={};d.cosh=o.cosh,d.sinh=o.sinh,d.tanh=o.tanh,d.acosh=o.acosh,d.asinh=o.asinh,d.atanh=o.atanh,d.expm1=o.expm1,d.log1p=o.log1p,d.sqrtxsqp1=o.sqrtxsqp1,d.sqrtxsqm1=o.sqrtxsqm1,d.mod=function(e,t){return e-t*Math.floor(e/t)},d.round=function(e,t){if(void 0===t&&(t=0),0===(t=Math.round(t)))return Math.round(e);var n=Math.pow(10,t);return Math.round(e*n)/n},d.sign=Math.sign||function(e){return 0===e?0:e>0?1:e<0?-1:NaN},d.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var n=d.gcd(e,t);return Math.abs(e/n*t)},d.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){var n=t;t=e,e=n}if(0===t)return e;for(var r=e%t;r>0;)e=t,t=r,r=e%t;return t},d.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],n=1;n<e.length;n++)t=d.gcd(t,e[n]);return t},d.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],n=1;n<e.length;n++)t=d.lcm(t,e[n]);return t},d.nCr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var n=1,r=0;r<t;r++)n*=(e-r)/(r+1);return n},d.nPr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var n=1,r=0;r<t;r++)n*=e-r;return n},d.factorial=function(e){return d.gamma(e+1)},d.gamma=function(e){if(e<0)return Math.PI/(d.sin(Math.PI*e)*d.gamma(1-e));if(e>170)return 1/0;var t,n=Math.round(e)===e;return t=e<15?p(e):e<120?h(e):Math.exp(f(e)),n?Math.round(t):t};var p=function(e){var t=1+e*(4.077131788261185+e*(7.024675027156382+e*(6.657107767450176+e*(3.766266976716022+e*(1.2792371666711133+e*(.24304596436338005+.020049769312165774*e)))))),n=1+e*(4.154347453162709+e*(7.270007565107539+e*(6.97805297331391+e*(3.989651532924167+e*(1.367176195613119+e*(.26175627691546965+.021742722739397567*e))))));return Math.E*Math.pow((1+e)/Math.E,1+e)/(e*Math.sqrt(1+e))*(t/n)},h=function(e){var t=e-1;return Math.pow(t,t)*Math.exp(y(t)-t)*Math.sqrt(2*Math.PI*t)},f=function(e){var t=e-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+y(t)};d.lnGamma=function(e){return e<0?NaN:e<15?Math.log(p(e)):f(e)},d.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],d.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(0===e)return 1/d.tan(t);var n=d.sin(t);if(1===e)return-1/(n*n);var r=d.cos(t);if(2===e)return 2*r/(n*n*n);var i,o,a,s,c,l=[0,2];for(o=3;o<=e;o++){for(i=[],a=0;a<o;a++)s=0,c=0,a>0&&(s=(o-a+1)*l[a-1]),a+2<o&&(c=(a+1)*l[a+1]),i.push(-(s+c));l=i}var u=0;for(a=e-1;a>=0;a--)u=i[a]+r*u;return u/Math.pow(n,e+1)},d.polyGamma=function(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;var n=e%2==0?-1:1;if(t<0)return-n*d.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*d.cotDerivative(e,Math.PI*t);for(var r=d.factorial(e),i=0,o=Math.pow(t,-(e+1));t<10;)i+=o,t++,o=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):o*t/e,i+=.5*o;for(var a=d.bernoulliTable,s=e+1,c=2,l=o*t*s/c,u=1/(t*t),p=1;p<=14;p++)l*=u,i+=l*a[p-1],s++,c++,l*=s/c,s++,c++,l*=s/c;return r*n*i},d.toFraction=c,d.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},d.log_base=function(e,t){if(0===t)return NaN;var n=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(n))===e?Math.round(n):n},d.common_log=function(e){return d.log_base(e,10)},d.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var n=d.toFraction(t,100);return a.approx(n.n/n.d,t,2)&&n.d%2==1?(n.n%2==0?1:-1)*Math.pow(-e,t):NaN},d.nthroot=function(e,t){return d.pow(e,1/t)};var m=1/Math.PI;d.sin=function(e){return n(Math.abs(e))?0:Math.sin(e)},d.cos=function(e){return r(Math.abs(e))?0:Math.cos(e)},d.tan=function(e){var t=Math.abs(e);return n(t)?0:r(t)?1/0:Math.tan(e)},d.sec=function(e){return r(Math.abs(e))?1/0:1/Math.cos(e)},d.csc=function(e){return n(Math.abs(e))?1/0:1/Math.sin(e)},d.cot=function(e){var t=Math.abs(e);return n(t)?1/0:r(t)?0:1/Math.tan(e)},d.acot=function(e){return Math.PI/2-Math.atan(e)},d.acsc=function(e){return Math.asin(1/e)},d.asec=function(e){return Math.acos(1/e)},d.sech=function(e){return 1/d.cosh(e)},d.csch=function(e){return 1/d.sinh(e)},d.coth=function(e){return 1/d.tanh(e)},d.asech=function(e){return d.acosh(1/e)},d.acsch=function(e){return d.asinh(1/e)},d.acoth=function(e){return d.atanh(1/e)},d.mean=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length},d.total=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t};var g=function(e){return e>50?Math.exp(.5*((1-e)*o.log1p(-1/(e-1))-1)+y(.5*(e-1))-y(.5*(e-2)))*Math.sqrt((1-1/e)/(2*Math.PI)):d.gamma((e+1)/2)/(d.gamma(e/2)*Math.sqrt(e*Math.PI))},y=function(e){var t=e*e;return(.08333333333333333-(.002777777777777778-(.0007936507936507937-(.0005952380952380953-.0008417508417508417/t)/t)/t)/t)/e};d.tpdf=function(e,t){return t<=0?NaN:g(t)*Math.pow(1+e*e/t,-(t+1)/2)};var v=function(e,t){if(t>0)return 1-v(e,-t);if(t===-1/0)return 0;var n=Math.sqrt(2*e/(e+1));if(Math.abs(t/n)<.001)return.5*(1+Math.sqrt(Math.PI)*g(e)*n*d.erf(t/n));if(t/e<-1e3){var r=t*t;return g(e)*Math.pow(e,.5*(e-1))*Math.pow(Math.abs(t),-e)*(1-e*e*(e+1)*(1/(2+e)+e*(e+3)/(4*(4+e)*r))/(2*r))}var i=Math.sqrt(t*t+e);return b((t+i)/(2*i),e/2,e/2)};d.tcdf=function(e,t,n){return n<=0?NaN:e===-1/0?v(n,t):e>0&&t>0?v(n,-e)-v(n,-t):v(n,t)-v(n,e)};var b=function(e,t,n){if(e<0||e>1)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===n)return e;if(0===e)return 0;if(1===e)return 1;if(0===t)return 1;if(0===n)return 0;var r=Math.exp(d.lnGamma(t+n)-d.lnGamma(t)-d.lnGamma(n)+t*Math.log(e)+n*o.log1p(-e));return e<(t+1)/(t+n+2)?r*x(e,t,n)/t:1-r*x(1-e,n,t)/n},x=function(e,t,n){var r,i,o,a,s,c,l,u,d,p=1;for(l=t+n,d=t+1,u=t-1,o=1,a=1-l*e/d,Math.abs(a)<1e-30&&(a=1e-30),a=1/a,c=a;p<=100&&(r=2*p,i=p*(n-p)*e/((u+r)*(t+r)),a=1+i*a,Math.abs(a)<1e-30&&(a=1e-30),o=1+i/o,Math.abs(o)<1e-30&&(o=1e-30),a=1/a,c*=a*o,i=-(t+p)*(l+p)*e/((t+r)*(d+r)),a=1+i*a,Math.abs(a)<1e-30&&(a=1e-30),o=1+i/o,Math.abs(o)<1e-30&&(o=1e-30),a=1/a,s=a*o,c*=s,!(Math.abs(s-1)<3e-7));p++);return c},E=function(e,t,n){return(e-t)/(Math.SQRT2*Math.abs(n))},w=function(e){return e<0?.5*Math.exp(-e*e)*d.erfcx(-e):1-.5*Math.exp(-e*e)*d.erfcx(e)};d.normalcdf=function(e,t,n,r){var i=E(t,n,r);if(e===-1/0)return w(i);var o=E(e,n,r);return e>0&&t>0?w(-o)-w(-i):w(i)-w(o)},d.normalpdf=function(e,t,n){return 1/Math.sqrt(2*Math.PI*n*n)*Math.exp(-(e-t)*(e-t)/(2*n*n))},d.random=function(e){var t=u(e);return(4294967296*(2097151&parseInt(t.slice(0,8),16))+parseInt(t.slice(8,16),16))/9007199254740992},d.shuffle=function(e,t){for(var n=t.length-1;n>0;n--){var r=e+"::sc"+n,i=Math.floor(d.random(r)*(n+1)),o=t[n];t[n]=t[i],t[i]=o}},d.randomPerm=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r);return d.shuffle(e,n),n},d.uniformSample=function(e,t,n){return d.random(e)*(n-t)+t},d.normalSample=function(e,t,n){var r,i,o,a,s=0;do{r=e+"::sc"+s,s+=1,i=2*d.uniformSample(r,0,1)-1,r=e+"::sc"+s,s+=1,o=2*d.uniformSample(r,0,1)-1,a=i*i+o*o}while(a>=1||0===a);return t+n*i*Math.sqrt(-2*Math.log(a)/a)},d.tSample=function(e,t){if(t<=0)return NaN;var n,r,i,o,a=0;do{n=e+"::sc"+a,a+=1,r=2*d.uniformSample(n,0,1)-1,n=e+"::sc"+a,a+=1,i=2*d.uniformSample(n,0,1)-1,o=r*r+i*i}while(o>1);var s=r*r/o,c=t*(Math.pow(o,-2/t)-1);return n=e+"::sc"+a,a+=1,(d.uniformSample(n,0,1)<.5?-1:1)*Math.sqrt(s*c)},d.binomSample=function(e,n,r){return(n=t(Math.round(n),0,1/0))===1/0?NaN:(r=t(r,0,1),d.invBinom(d.uniformSample(e,0,1),n,r))},d.poissonSample=function(e,t){return t<=0?NaN:d.invPoisson(d.uniformSample(e,0,1),t)};var _=function(e,t,n){if(e>=t)return 1;if(e<0)return 0;for(var r=n/(1-n),i=Math.pow(1-n,t),o=i,a=1;a<=Math.min(t,e);a++)i*=(t-a+1)/a*r,o+=i;return o};d.binomcdf=function(e,n,r,i){return(r=t(Math.round(r),0,1/0))===1/0?NaN:(i=t(i,0,1),n<0?0:(e=Math.ceil(e),n=Math.floor(n),e===-1/0?_(n,r,i):_(n,r,i)-_(e-1,r,i)))},d.binompdf=function(e,n,r){return e=Math.round(e),(n=t(Math.round(n),0,1/0))===1/0?NaN:(r=t(r,0,1),e<0||e>n?0:d.nCr(n,e)*Math.pow(r,e)*Math.pow(1-r,n-e))},d.poissonpdf=function(e,t){return t<=0?NaN:(e=Math.round(e),e<0?0:Math.exp(-t+e*Math.log(t)-d.lnGamma(e+1)))};var S=function(e,t){if(e===1/0)return 1;if(e<0)return 0;for(var n=1,r=1,i=1;i<=e;i++){n*=t/i;var o=r;if((r+=n)===o)break}return Math.exp(-t)*r};d.poissoncdf=function(e,t,n){return n<=0?NaN:(e=Math.ceil(e),t=Math.floor(t),t<0?0:e===-1/0?S(t,n):S(t,n)-S(e-1,n))},d.uniformpdf=function(e,t,n){return n<=t?NaN:e<t||e>n?0:1/(n-t)};var M=function(e,t,n){return n<=t?NaN:e<t?0:e>n?1:(e-t)/(n-t)};d.uniformcdf=function(e,t,n,r){return M(t,n,r)-M(e,n,r)},d.erf=function(e){var t=-e*e;if(t<-750)return e>=0?1:-1;if(e>=.065)return 1-Math.exp(t)*d.erfcx(e);if(e<=-.065)return Math.exp(t)*d.erfcx(-e)-1;return e*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+.005223977625442188*t))))},d.erfcx=function(e){if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-d.erfcx(-e);if(e>50){var t=.5641895835477563,n=e*e;return e>5e7?t/e:t*(n*(n+4.5)+2)/(e*(n*(n+5)+3.75))}return(.9999999999999999+e*(2.224574423459406+e*(2.444115549920689+e*(1.7057986861852539+e*(.8257463703357973+e*(.28647031042892007+e*(.07124513844341643+e*(.012296749268608364+e*(.001347817214557592+7263959403471071e-20*e)))))))))/(1+e*(3.352953590554884+e*(5.227518529742423+e*(5.003720878235473+e*(3.266590890998987+e*(1.5255421920765353+e*(.5185887413188858+e*(.12747319185915415+e*(.02185979575963238+e*(.0023889438122503674+.00012875032817508128*e))))))))))},d.invNorm=function(e){var t,n,r;return e>.5?-d.invNorm(1-e):.5===e?0:e<0?NaN:0===e?-1/0:(e<.02425?(t=Math.sqrt(-2*Math.log(e)),r=(((((-.00778489400243029*t-.322396458041136)*t-2.40075827716184)*t-2.54973253934373)*t+4.37466414146497)*t+2.93816398269878)/((((.00778469570904146*t+.32246712907004)*t+2.445134137143)*t+3.75440866190742)*t+1)):(t=e-.5,n=t*t,r=(((((-39.6968302866538*n+220.946098424521)*n-275.928510446969)*n+138.357751867269)*n-30.6647980661472)*n+2.50662827745924)*t/(((((-54.4760987982241*n+161.585836858041)*n-155.698979859887)*n+66.8013118877197)*n-13.2806815528857)*n+1)),r-Math.sqrt(2*Math.PI)*(.5*d.erfcx(-r/Math.SQRT2)-Math.exp(.5*r*r)*e))},d.invPoisson=function(e,t){if(t<=0||e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return 1/0;for(var n=1,r=1,i=1;Math.exp(-t)*r<e;){if(n*=t/i,r+n===r)return 1/0;r+=n,i+=1}return i-1},d.invBinom=function(e,t,n){if(t!==Math.round(t))return NaN;if(n<0||n>1)return NaN;if(e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return t;if(0===t)return 0;if(1===n)return t;if(0===n)return 0;for(var r=n/(1-n),i=Math.pow(1-n,t),o=i,a=1;o<e;){if(i*=(t-a+1)/a*r,o+i===o)return t;if(a>t)return t;o+=i,a+=1}return a-1},d.invT=function(e,t){if(isNaN(t)||t<=0||e<0||e>1)return NaN;if(0===e)return-1/0;if(1===e)return 1/0;if(1===t||2===t||4===t)return k(t,e);var n,r;return.5===e?0:e>.5?(n=t>1?d.invNorm(e):k(1,e),r=t>1?k(1,e):Math.pow(d.tpdf(0,t)*Math.pow(t,(t-1)/2)/(1-e),1/t),C(t,e,n,r)):-d.invT(1-e,t)};var k=function(e,t){var n=4*t*(1-t);switch(e){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/n);case 4:var r=Math.cos(Math.acos(Math.sqrt(n))/3)/Math.sqrt(n);return 2*Math.sign(t-.5)*Math.sqrt(r-1);default:throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")}},C=function(e,t,n,r){if(!isFinite(n)||!isFinite(r))return NaN;for(var i,o,a=n,s=r;;){if(i=l(a,s),o=v(e,i),i===a||i===s)return o>t?a:s;o<t?a=i:s=i}};return d.invUniform=function(e,t,n){return e<0||e>1||n<=t?NaN:0===e?t:1===e?n:t+e*(n-t)},d.tscore=function(e,t){var n=d.stdev(e);return(d.mean(e)-t)*Math.sqrt(e.length)/n},d.itscore=function(e,t){var n=e.length,r=d.mean(e),i=d.stdev(e),o=t.length,a=d.mean(t),s=d.stdev(t);return(r-a)/(Math.sqrt(((n-1)*i*i+(o-1)*s*s)/(n+o-2))*Math.sqrt(1/n+1/o))},d.ttest=function(e,t){1===arguments.length&&(t=0);var n=d.tscore(e,t),r=e.length-1;return{lessThan:i(n,r,-1),greaterThan:i(n,r,1),notEqual:i(n,r,0)}},d.ittest=function(e,t){var n=d.itscore(e,t),r=e.length+t.length-2;return{lessThan:i(n,r,-1),greaterThan:i(n,r,1),notEqual:i(n,r,0)}},d.stats=function(e){return{min:d.listMin(e),q1:d.quartile(e,1),median:d.median(e),q3:d.quartile(e,3),max:d.listMax(e)}},d.length=function(e){return e.length},d.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]<t&&(t=e[n])}return t},d.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var n=1;n<e.length;n++){if(isNaN(e[n]))return NaN;e[n]>=t&&(t=e[n])}return t},d.quantile=function(e,t){if(!isFinite(t)||t<0||t>1)return NaN;if(e.some(isNaN))return NaN;if(0===e.length)return NaN;var n=e.length,r=d.sortPerm(e),i=t*(n-1);return Math.floor(i)===i?e[r[i]]:(Math.ceil(i)-i)*e[r[Math.floor(i)]]+(i-Math.floor(i))*e[r[Math.ceil(i)]]},d.quartile=function(e,t){if(!isFinite(t)||t<0||t>4)return NaN;if(e.some(isNaN))return NaN;var n=d.sortPerm(e),r=d.quartileIndex(e,t),i=Math.floor(r),o=Math.ceil(r);return(e[n[i]]+e[n[o]])/2},d.sortPerm=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n.push(r);return n.sort(function(t,n){return e[t]-e[n]}),n},d.quartileIndex=function(e,t){t=Math.round(t);var n,r=e.length,i=r%2==1;return 1===r?0:(0===t&&(n=0),2===t&&(n=(r-1)/2),4===t&&(n=r-1),1===t&&(n=i?(r+1)/4-1:(r+2)/4-1),3===t&&(n=i?(3*r+3)/4-1:(3*r+2)/4-1),n)},d.upperQuantileIndex=function(e,t){return d.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},d.lowerQuantileIndex=function(e,t){return d.sortPerm(e)[Math.floor(t*(e.length-1))]+1},d.upperQuartileIndex=function(e,t){return d.sortPerm(e)[Math.ceil(d.quartileIndex(e,t))]+1},d.lowerQuartileIndex=function(e,t){return d.sortPerm(e)[Math.floor(d.quartileIndex(e,t))]+1},d.median=function(e){return d.quantile(e,.5)},d.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var n=0,r=1;r<e.length;r++){if(isNaN(e[r]))return 0;e[r]<t&&(n=r,t=e[r])}return n+1},d.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var n=0,r=1;r<e.length;r++)if(e[r]>=t){if(isNaN(e[r]))return 0;n=r,t=e[r]}return n+1},d.varp=function(e){for(var t=d.mean(e),n=0,r=0;r<e.length;r++){var i=e[r]-t;n+=i*i}return n/e.length},d.mad=function(e){for(var t=d.mean(e),n=0,r=0;r<e.length;r++)n+=Math.abs(e[r]-t);return n/e.length},d.var=function(e){var t=e.length;return d.varp(e)*t/(t-1)},d.covp=function(e,t){if(e.length!==t.length)return NaN;for(var n=e.length,r=d.mean(e),i=d.mean(t),o=0,a=0;a<n;a++)o+=(e[a]-r)*(t[a]-i);return o/n},d.cov=function(e,t){if(e.length!==t.length)return NaN;var n=e.length;return d.covp(e,t)*n/(n-1)},d.corr=function(e,t){if(e.length!==t.length)return NaN;for(var n,r,i=e.length,o=d.mean(e),a=d.mean(t),s=0,c=0,l=0,u=0;u<i;u++)n=e[u]-o,r=t[u]-a,s+=n*n,c+=r*r,l+=n*r;return l/Math.sqrt(s*c)},d.rank=function(e){var t=e.length;if(0===t)return[];for(var n=[],r=[],i=0;i<t;i++)r.push([e[i],i]);r.sort(function(e,t){var n=e[0],r=t[0];return n===1/0&&r===1/0||n===-1/0&&r===-1/0?0:n-r}),i=0;for(var o,a=1,s=1;i<t;){for(o=i;o<t-1&&r[o][0]===r[o+1][0];)o+=1;s=o-i+1;var c;for(o=0;o<s;o++)c=r[i+o][1],n[c]=isNaN(e[c])?NaN:a+.5*(s-1);a+=s,i+=s}return n},d.spearman=function(e,t){return d.corr(d.rank(e),d.rank(t))},d.stdev=function(e){return Math.sqrt(d.var(e))},d.stdevp=function(e){return Math.sqrt(d.varp(e))},d.quad=s.quad,d.distance=function(e,t){return a.hypot(t[0]-e[0],t[1]-e[1])},d.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},d}),define("core/math/rational-arithmetic-sequence",["require","core/math/distance","core/math/builtin"],function(e){"use strict";function t(e,t){var i=r.toFraction(e),o=r.toFraction(t);if(n.approx(i.n/i.d,e)&&n.approx(o.n/o.d,t)){var a=r.lcm(i.d,o.d),s=i.n*(a/i.d);return{nstart:s,nstep:o.n*(a/o.d)-s,lcm:a}}}var n=e("core/math/distance"),r=e("core/math/builtin");return t}),define("lib/named-colors",["require"],function(e){"use strict";return{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}}),define("lib/color-distance",["require","underscore","lib/named-colors"],function(e){"use strict";function t(e){var t=[],i=e.toLowerCase();if("rgb"===i.slice(0,3))try{t=i.replace(/[^\d,]/g,"").split(",").slice(0,3),t=u.map(t,function(e){return parseInt(e,10)})}catch(t){r(e)}else if("#"===i[0]){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/;i=i.replace(o,function(e,t,n,r){return t+t+n+n+r+r});try{t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(i).slice(1),t=u.map(t,function(e){return parseInt(e,16)})}catch(t){r(e)}}else t=d[i];return n(t)||r(e),{R:t[0],G:t[1],B:t[2]}}function n(e){return!!u.isArray(e)&&(3===e.length&&u.every(e,function(e){return Number.isInteger(e)&&e>=0&&e<=255}))}function r(e){throw new Error("Invalid color string: "+e)}function i(e){var t=e.R,n=e.G,r=e.B,i=[];return i[0]=.49*t+.31*n+.2*r,i[1]=.17697*t+.8124*n+.01063*r,i[2]=.01*n+.99*r,i=u.map(i,function(e){return e/.17697}),{X:i[0],Y:i[1],Z:i[2]}}function o(e){var t=e.X,n=e.Y,r=e.Z,i=[];return i[0]=116*a(n/100)-16,i[1]=500*(a(t/95.047)-a(n/100)),i[2]=200*(a(n/100)-a(r/108.883)),{L:i[0],a:i[1],b:i[2]}}function a(e){var t=6/29;return e>Math.pow(t,3)?Math.pow(e,1/3):e/(3*t*t)+4/29}function s(e,t){var n=e.L,r=e.a,i=e.b,o=t.L,a=t.a,s=t.b,c=n-o,l=Math.sqrt(r*r+i*i),u=Math.sqrt(a*a+s*s),d=l-u,p=r-a,h=i-s,f=Math.sqrt(p*p+h*h-d*d),m=1+.045*l,g=1+.015*l,y=c/1,v=d/(1*m),b=f/(1*g);return Math.sqrt(y*y+v*v+b*b)}function c(e,n){return s(o(i(t(e))),o(i(t(n))))}function l(e,t){var n=u.map(t,function(t){return c(e,t)}),r=u.min(n);return t[n.indexOf(r)]}var u=e("underscore"),d=e("lib/named-colors");return{str2rgb:t,difference:c,closestColor:l}}),define("core/math/functions",["require","exports","core/math/builtin"],function(e,t,n){"use strict";function r(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&o(r)}}function i(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&a(r)}}function o(e){delete e.fn}function a(e){e.fn=c(e.args,e.source)}function s(e,t){for(var n=[],r=0;r<t;r++)n.push("values["+r+"]");return c(["values"],"return "+e(n))}function c(e,t){var r=e.join(","),i="return (function("+r+'){"use strict"; '+t+"})";return new Function("BuiltIn",i)(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.closureFunctionWithBuiltIn=t.createEvaluateFunction=t.rehydrateCompiledFunction=t.dehydrateCompiledFunction=t.rehydrateGraphData=t.dehydrateGraphData=void 0,t.dehydrateGraphData=r,t.rehydrateGraphData=i,t.dehydrateCompiledFunction=o,t.rehydrateCompiledFunction=a,t.createEvaluateFunction=s,t.closureFunctionWithBuiltIn=c}),define("core/math/parser/input-span",["require","exports"],function(e,t){"use strict";function n(e,t,n){return{input:e,start:t,end:n}}function r(e,t){return n(e,t,t)}function i(e,t){if(e.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return n(e.input,e.start,t.end)}function o(e){return e.input.slice(e.start,e.end)}Object.defineProperty(t,"__esModule",{value:!0}),t.slice=t.joinSpans=t.emptySpanAt=t.Span=void 0,t.Span=n,t.emptySpanAt=r,t.joinSpans=i,t.slice=o}),define("core/math/policy",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPolicy=void 0;var n=["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"];t.defaultPolicy={assignmentForbidden:function(e){return!0},graphingEnabled:function(){return!1},isValidSlider:function(e){return!1},sliderVariables:function(e){return[]},ansEnabled:function(){return!1},disabledFeatures:function(){return n}}}),define("core/math/parsenode/base",["require","pjs","core/math/functions","core/math/parser/input-span","core/math/policy"],function(e){"use strict";var t=e("pjs"),n=e("core/math/functions"),r=e("core/math/parser/input-span"),i=e("core/math/policy").defaultPolicy;return t(function(e,t,o){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._exports=[]},e.exportPenalty=0;var a=0;e.tmpVar=function(){return"tmp"+a++},e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(i,e),n=t.getEvaluationInfo();return n?n[0].val:NaN},e.setInputSpan=function(e){this._inputSpan=e},e.getInputString=function(){return void 0===this._inputSpan?"":r.slice(this._inputSpan)},e.getInputSpan=function(){return this._inputSpan},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.addDummyDependency=function(e){-1===this._dummyDependencies.indexOf(e)&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var t=0;t<e.length;t++)this.addDummyDependency(e[t])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var t=this._dependencies.indexOf(e);t>=0&&this._dependencies.splice(t,1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){return(this._exports||[]).concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,n){for(var r=this.getLegalExports(e),i=0;i<r.length;i++){var o=r[i];if(n[o])return;n[o]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.shouldPromoteToSlider=function(e){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.getCompiledFunction=function(e){var t=this.getEvalStrings(),r=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(-1!==i){var o=e[0];e[0]=e[i],e[i]=o}}return{args:e,source:r,fn:n.closureFunctionWithBuiltIn(e,r)}},e.getCompiledDerivative=function(){var e=this.getDependencies();return this.takeDerivative(e[0]||"x").getCompiledFunction()},e.asValue=function(){}})}),define("core/math/parsenode/error",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("core/lib/label",["require","exports","underscore","core/math/distance","core/math/tofraction"],function(e,t,n,r,i){"use strict";function o(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var n,o,a,s=i.default(e/Math.PI,24);if(h(t)&&r.approx(s.n/s.d*Math.PI,e,3))return n=0===s.n?"0":1===s.n?"π":-1===s.n?"-π":s.n.toString()+"π",o=1===s.d?"":"/"+s.d.toString(),a=n+o,{ariaString:c(a),string:a,value:s.n/s.d*Math.PI};if(h(t))return a=p(u(e.toFixed(f(t)))),{ariaString:c(a),string:a,value:parseFloat(a)};var l=d(e.toExponential(f(t/e))).split("e"),m=l[0]+"×10",g=l[1].replace("+","");return a=d(e.toExponential(f(t/e))).replace("+",""),{ariaString:c(a),string:a,mantissa:m,superscript:g,value:parseFloat(a)}}function a(e){return C["["+e+"]"]}function s(e){return e[0]+e.slice(1).split("").join(" ")}function c(e){return e.replace(T,s).replace(I,a).replace(/ +/gi," ").trim()}function l(e,t,n,r){var i=o(e,t);return[i,o(r(i.value),n)]}function u(e){return-1===e.indexOf(".")?e:e.replace(L,"")}function d(e){var t=/\.?0+e/;return e.replace(t,"e")}function p(e){return"-0"===e?"0":e}function h(e){return 1e-4<(e=Math.abs(e))&&e<1e7}function f(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function m(e){return 1e6/Math.sqrt(Math.abs(e))}function g(e){var t=m(e);if(t<1)return!1;if(t>1e12)return!1;var n=i.default(e,t),r=n.n,o=n.d;return 1!==o&&e===e+Math.pow(2,-3)*Math.abs(r/o-e)}function y(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var n=t.smallCutoff||.001,r=t.bigCutoff||1e6,o=t.digits||10,a=d(e.toExponential(o-2)),s=a.match(/([\d\.\-]+)e\+?([\d\-]+)/);if(!s)return{type:"undefined"};var c=parseInt(s[2],10)>=o,l=g(e);if(Math.abs(e)>r||Math.abs(e)<n||c)return{type:"scientific",mantissa:s[1],exponent:s[2]};if(l&&t.displayAsFraction){var p=i.default(e,m(e));return{type:"fraction",numerator:p.n.toString(),denominator:p.d.toString()}}var h=u(e.toPrecision(o));return e!==Number(h)&&t.addEllipses&&(h+="..."),{type:"decimal",value:h}}function v(e,t){var n=y(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"<span class='dcg-cross'>×</span>10<sup>"+n.exponent+"</sup>";case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}}function b(e,t){var n=y(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+" * 10^"+n.exponent;case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}}function x(e,t){var n=y(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"\\times10^{"+n.exponent+"}";case"fraction":return"1"===n.denominator?n.numerator:"-"===n.numerator[0]?"-\\frac{"+n.numerator.slice(1)+"}{"+n.denominator+"}":"\\frac{"+n.numerator+"}{"+n.denominator+"}";default:return n}}function E(e,t){var n=y(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":
return c(n.value);case"scientific":return c(n.mantissa+"e"+n.exponent);case"fraction":return c(n.numerator+"/"+n.denominator);default:return n}}function w(e){e=e.replace("\\","");var t={pi:"π",tau:"τ",theta:"θ",phi:"ϕ",div:"÷",cdot:"⋅",times:"×",lt:"<",gt:">",le:"≤",ge:"≥",sim:"∼",ldots:"…",prime:"′",approx:"≈"};return t.hasOwnProperty(e)?t[e]:e}function _(e){var t=e.split("_"),n="";return t[0].length>1&&(n+="\\"),n+=t[0],t[1]&&(n+="_{"+t[1]+"}"),n}function S(e){if(!e)return"";var t=e.split("_").map(w).map(n.escape),r=t[0];return t[1]&&(r+="<sub>"+t[1]+"</sub>"),r}function M(e){return e=e.replace(/\\operatorname\{(.*)\}/,"$1"),e.replace(/[{}\\]/g,"")}function k(e){return e.replace(/^(\\ | |\\space)+/,"").replace(/(\\ | |\\space)+$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.trimLatex=t.latexToIdentifier=t.identifierToHTML=t.identifierToLatex=t.formatSymbol=t.truncatedAriaLabel=t.truncatedLatexLabel=t.truncatedPlainmathLabel=t.truncatedHTMLLabel=t.numericLabel=t.canDisplayAsFraction=t.point=t.value=void 0,t.value=o;var C={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[π]":" pi ","[τ]":" tau ","[θ]":" theta ","[ϕ]":" phi "},I=new RegExp(Object.keys(C).join("|"),"gi"),T=/\.\d+/g;t.point=l;var L=/\.?0+$/;t.canDisplayAsFraction=g,t.numericLabel=y,t.truncatedHTMLLabel=v,t.truncatedPlainmathLabel=b,t.truncatedLatexLabel=x,t.truncatedAriaLabel=E,t.formatSymbol=w,t.identifierToLatex=_,t.identifierToHTML=S,t.latexToIdentifier=M,t.trimLatex=k}),define("core/math/types",["require","core/lib/worker-i18n"],function(e){"use strict";function t(e){switch(e){case c:return"Any";case l:return"Number";case u:return"Bool";case d:return"Point";case p:return"Distribution";case h:return"ListOfAny";case f:return"ListOfNumber";case m:return"ListOfBool";case g:return"ListOfPoint";case y:return"ListOfDistribution";case v:return"EmptyList";case b:return"ErrorType";case x:return"SeedType";default:throw new Error("Invalid type")}}function n(e){switch(e){case c:return s.t("an unknown object");case l:return s.t("a number");case u:return s.t("a true/false value");case d:return s.t("a point");case p:return s.t("a distribution");case h:return s.t("a list of unknown objects");case f:return s.t("a list of numbers");case m:return s.t("a list of true/false values");case g:return s.t("a list of points");case y:return s.t("a list of distributions");case v:return s.t("an empty list");case b:return s.t("an error object");case x:return s.t("a string");default:throw new Error("Invalid type")}}function r(e){switch(e){case h:case f:case m:case g:case y:case v:return!0;default:return!1}}function i(e){switch(e){case v:case f:return l;case m:return u;case g:return d;case y:return p;case h:default:return c}}function o(e){switch(e){case c:return h;case l:return f;case u:return m;case d:return g;case p:return y;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function a(e){switch(e){case c:case l:case u:case d:case p:return!0;default:return!1}}var s=e("core/lib/worker-i18n"),c=0,l=1,u=2,d=3,p=4,h=5,f=6,m=7,g=8,y=9,v=10,b=11,x=12;return{Any:c,Number:l,Bool:u,Point:d,Distribution:p,ListOfAny:h,ListOfNumber:f,ListOfBool:m,ListOfPoint:g,ListOfDistribution:y,EmptyList:v,ErrorType:b,SeedType:x,repr:t,prettyPrint:n,isList:r,elementType:i,listType:o,hasListType:a}}),define("core/math/errormsg",["require","core/lib/worker-i18n","core/math/parsenode/error","core/lib/label","core/math/types"],function(e){"use strict";var t=e("core/lib/worker-i18n"),n=e("core/math/parsenode/error"),r=e("core/lib/label"),i=e("core/math/types");return{parseError:function(){return n(t.t("Sorry, I don't understand this."))},unrecognizedSymbol:function(e){return e=r.formatSymbol(e),n(t.t("Sorry, I don't understand the '__symbol__' symbol.",{symbol:e}))},unexpectedInequality:function(){return n(t.t("Cannot use an inequality here."))},unexpectedSymbol:function(e){return e=r.formatSymbol(e),n(t.t("Sorry, I don't understand the way that '__symbol__' is used here.",{symbol:e}))},addTypeError:function(e){return n(t.t("Cannot add __symbol1__ and __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},subtractTypeError:function(e){return n(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},multiplyTypeError:function(e){return n(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},divideTypeError:function(e){return n(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},exponentTypeError:function(e){return n(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},negativeTypeError:function(e){return n(t.t("Cannot negate __symbol__.",{symbol:e[0]})).allowExport()},comparatorTypeError:function(e){return n(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},andTypeError:function(e){return n(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:e[0],symbol2:e[1]})).allowExport()},listTypeError:function(e){return n(t.t("Cannot store __symbol1__ in a list.",{symbol1:e[0]})).allowExport()},pointTypeError:function(e){return n(t.t("Cannot use __symbol1__ as a coordinate of __symbol2__.",{symbol1:e,symbol2:i.prettyPrint(i.Point)})).allowExport()},indexTypeError:function(e){return n(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},orderedPairAccessTypeError:function(e){return n(t.t("Cannot access a coordinate of __symbol__.",{symbol:e[0]})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return n(t.t("Function '__fn__' cannot be applied to __arg__.",{fn:r.formatSymbol(e),arg:i[0]})).allowExport();case 2:return n(t.t("Function '__fn__' cannot be applied to __arg1__ and __arg2__.",{fn:r.formatSymbol(e),arg1:i[0],arg2:i[1]})).allowExport();default:return n(t.t("Function '__fn__' cannot be applied to these arguments.",{fn:r.formatSymbol(e)})).allowExport()}},illegalDotCall:function(e){return n(t.t("Function '__symbol__' cannot be called with dot notation.",{symbol:r.formatSymbol(e)}))},dotLHSTypeError:function(e,i){return n(t.t("Cannot call '__symbol__' on __type__.",{symbol:r.formatSymbol(e),type:i}))},sumLowerBoundTypeError:function(e){return n(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumUpperBoundTypeError:function(e){return n(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumInfiniteBoundError:function(){return n(t.t("Summation bounds must be finite numbers."))},sumArgumentTypeError:function(e){return n(t.t("Cannot take the sum of __symbol__.",{symbol:e[0]})).allowExport()},productLowerBoundTypeError:function(e){return n(t.t("Lower bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productUpperBoundTypeError:function(e){return n(t.t("Upper bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productInfiniteBoundError:function(){return n(t.t("Product bounds must be finite numbers."))},productArgumentTypeError:function(e){return n(t.t("Cannot take the product of __symbol__.",{symbol:e[0]})).allowExport()},integralLowerBoundTypeError:function(e){return n(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralUpperBoundTypeError:function(e){return n(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralInfiniteBoundError:function(){return n(t.t("Limits of integration must be finite numbers."))},integralArgumentTypeError:function(e){return n(t.t("Cannot take the integral of __symbol__.",{symbol:e[0]})).allowExport()},derivativeTypeError:function(e){return n(t.t("Cannot take the derivative of __symbol__.",{symbol:e[0]})).allowExport()},derivativeVariableTypeError:function(e,i){return n(t.t("Cannot take derivative with respect to '__symbol1__' because it is __symbol2__.",{symbol1:r.formatSymbol(e),symbol2:i[0]}))},piecewiseConditionTypeError:function(e){return n(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:i.prettyPrint(i.Bool),symbol2:e[0]})).allowExport()},piecewiseBranchTypeError:function(e){return n(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:e[0]})).allowExport()},tableHeaderTypeError:function(e){return n(t.t("Table header cannot be __symbol__.",{symbol:e[0]}))},tableEntryTypeError:function(e){return n(t.t("Table entry cannot be __symbol__.",{symbol:e[0]}))},regressionTypeError:function(e){return n(t.t("Cannot regress __symbol1__ against __symbol2__.",{symbol1:e[0],symbol2:e[1]}))},heterogeneousList:function(){return n(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return n(t.t("Definitions are nested too deeply.")).allowExport()},polygonListTypeError:function(e){return n(t.t("A single argument to polygon should be a point list, not __type__.",{type:e[0]}))},polygonPointArgsError:function(){return n(t.t("Some of your arguments are not points."))},polygonTwoNumbersError:function(){return n(t.t("Cannot make a polygon from two numbers."))},binCenterInvalid:function(){return n(t.t("Invalid bin center. Try using any number."))},boxplotOffsetInvalid:function(){return n(t.t("Invalid offset. Try using any number."))},boxplotBreadthInvalid:function(){return n(t.t("Invalid height. Try using any number."))},tooManyArguments:function(e,r){return n(t.t("'__symbol__' accepts at most __max__ arguments.",{symbol:e,max:r}))},pdfWrongArity:function(){var e=t.t("For example, try typing: D.pdf(x) where D=normaldist()."),r=t.t("'pdf' should be called on a distribution with a number. __recommendation__",{recommendation:e});return n(r)},cdfRequiresArguments:function(){var e=t.t("For example, try typing: D.cdf(x) where D=normaldist()."),r=t.t("'cdf' should be called on a distribution with at least one number. __recommendation__",{recommendation:e});return n(r)},cdfTooManyArguments:function(){var e=t.t("For example, try typing: D.cdf(-1,1) where D=normaldist()."),r=t.t("'cdf' should be called on a distribution with at most two numbers. __recommendation__",{recommendation:e});return n(r)},tdistWrongArity:function(){return n(t.t("'tdist' requires 1 argument. For example, try typing: tdist(1)."))},randomArity:function(){var e=t.t("'random' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).");return n(e)},randomFromBroadcastDistribution:function(){return n(t.t("Cannot sample from a list of distributions"))},wrongArity:function(e,i,o,a){e=r.formatSymbol(e);var s,c;if(1===i)a||(a=e+"(x)"),c=t.t("For example, try typing: __recommendation__.",{recommendation:a}),s=o>1?t.t("Function '__dependency__' requires only 1 argument. __supplement__",{dependency:e,supplement:c}):t.t("Function '__dependency__' requires an argument. __supplement__",{dependency:e,supplement:c});else{var l=[];if(!a){for(var u=0;u<i;u++)l[u]=u+1;a=r.formatSymbol(e)+"("+l.join(", ")+")"}c=t.t("For example, try typing: __recommendation__.",{recommendation:a}),s=t.t("Function '__dependency__' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:c})}return n(s)},wrongParametrizedReducerArity:function(e){return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return n(t.t("Function '__symbol__' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return n(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return n(t.t("Function '__symbol__' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:r.formatSymbol(e)}))},missingRHS:function(e){return e=r.formatSymbol(e),n(t.t("What do you want '__symbol__' to equal?",{symbol:e}))},malformedPoint:function(){return n(t.t("Points are written like this: (1, 2)."))},badTupleDimensions:function(e){return n(t.t("Points may only have __symbol__ coordinates.",{symbol:e}))},badImplicitCall:function(e){return e=r.formatSymbol(e),n(t.t("Use parentheses around the argument of '__symbol__'.",{symbol:e}))},adjacentNumbers:function(e,r){return n(t.t("Sorry, I don't know what to do with adjacent numbers '__left__' and '__right__'. Try using parentheses or a '*' symbol.",{left:e,right:r}))},identifierAsFunction:function(e){return e=r.formatSymbol(e),n(t.t("'__symbol__' is a function. Try using parentheses.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return e=r.formatSymbol(e),"%"===e&&(e="% of"),n(t.t("You need something on both sides of the '__symbol__' symbol.",{symbol:e}))},unaryOperatorMissingLeft:function(e){return e=r.formatSymbol(e),n(t.t("You need something before the '__symbol__' symbol.",{symbol:e}))},unaryOperatorMissingRight:function(e){return e=r.formatSymbol(e),n(t.t("You need something after the '__symbol__' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return n(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return n(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return n(t.t("You need a numerator and denominator for your fraction."))},emptySubscript:function(){return n(t.t("Subscripts cannot be empty."))},emptySuperscript:function(){return n(t.t("Superscripts cannot be empty."))},invalidSubscript:function(e){return e=r.formatSymbol(e),n(t.t("Subscripts may only contain letters and digits. '__symbol__' is not allowed.",{symbol:e}))},invalidOperatorName:function(){return n(t.t("Operator names may only contain letters."))},unexpectedSubscript:function(){return n(t.t("Only functions and variables may have subscripts."))},superscriptWithPrime:function(){return n(t.t("Superscripts and primes cannot be combined."))},unexpectedPrime:function(){return n(t.t("Sorry, I don't understand this use of prime notation."))},primeWithoutParen:function(){return n(t.t("Primed function calls must use parentheses."))},emptyRadical:function(){return n(t.t("Radical cannot be empty."))},emptyRadicalIndex:function(){return n(t.t("Radical index cannot be empty."))},emptyParen:function(){return n(t.t("Parentheses cannot be empty."))},emptySquareBracket:function(){return n(t.t("Square brackets cannot be empty."))},emptyPipe:function(){return n(t.t("Absolute value symbol cannot be empty."))},badTrigExponent:function(e){var r=e+"^2",i=e+"^-1";return n(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:r,form2:i}))},badLogExponent:function(e){var r=e+"^2";return n(t.t("Only __form__ is supported. Otherwise, use parens.",{form:r}))},inequalityChainTooLong:function(){return n(t.t("Cannot chain more than 2 inequalities."))},piecewiseMissingCondition:function(){return n(t.t("A piecewise expression must have at least one condition."))},piecewisePartMissingCondition:function(){return n(t.t("Every part of a piecewise expression must have a condition except the last."))},colonMissingCondition:function(){return n(t.t("The left side of a ':' must be a condition, like 'x>1'."))},blankExpression:function(){return n(t.t("You haven't written anything yet."))},functionNotDefined:function(e){return e=r.formatSymbol(e),n(t.t("Function '__dependency__' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=r.formatSymbol(e),n(t.t("You can't use '__dependency__' as a parameter of this function because '__dependency__' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=r.formatSymbol(e),n(void 0===i?t.t("You can't redefine '__symbol__' because it's already defined.",{symbol:e}):t.t("You can't define '__symbol__' because '__symbolRoot__' is already defined.",{symbol:e,symbolRoot:i}))},cannotSubscript:function(e){return e=r.formatSymbol(e),n(t.t("'__symbol__' cannot have a subscript.",{symbol:e}))},multiplyDefined:function(e){return e=r.formatSymbol(e),n(t.t("You've defined '__dependency__' in more than one place. Try deleting some of the definitions of '__dependency__'.",{dependency:e}))},shadowedIndex:function(e){return e=r.formatSymbol(e),n(t.t("You can't use '__symbol__' as an index because it's already defined.",{symbol:e}))},cycle:function(e){e=e.map(r.formatSymbol);var i=e.pop();return n(t.t("'__symbols__' and '__lastSymbol__' can't be defined in terms of each other.",{symbols:e.join("', '"),lastSymbol:i}))},selfReferentialFunction:function(e){return n(t.t("The definition of function '__symbol__' cannot depend on '__symbol__'.",{symbol:r.formatSymbol(e)}))},sliderLimitReferencesExport:function(e){return n(t.t("Slider limits cannot depend on the slider variable '__symbol__'.",{symbol:r.formatSymbol(e)}))},sliderMinInvalid:function(){return n(t.t("Invalid slider min. Try using any number."))},sliderMaxInvalid:function(){return n(t.t("Invalid slider max. Try using any number."))},sliderMaxLessThanMin:function(){return n(t.t("Invalid slider limits. Min should be less than max."))},sliderStepInvalid:function(){return n(t.t("Invalid slider step. Try using any number."))},domainMinInvalid:function(){return n(t.t("Invalid domain min. Try using any number."))},domainMaxInvalid:function(){return n(t.t("Invalid domain max. Try using any number."))},domainMaxLessThanMin:function(){return n(t.t("Invalid domain limits. Min should be less than max."))},cdfMinInvalid:function(){return n(t.t("Invalid cdf min. Try using any number."))},cdfMaxInvalid:function(){return n(t.t("Invalid cdf max. Try using any number."))},cdfMaxLessThanMin:function(){return n(t.t("Invalid cdf limits. Min should be less than max."))},tooFewVariables:function(){return n(t.t("Too few variables, I don't know what to do with this."))},tooManyVariables:function(e){if(e=e.map(r.formatSymbol),0===e.length)return n(t.t("Too many variables, I don't know what to do with this."));var i=e.pop();return n(t.t("Too many variables. Try defining '__variables__'.",{variables:(e.length?e.join("', '")+"' or '":"")+i}))},addArgumentsToDefinition:function(e,i,o){e=e.map(r.formatSymbol),i=r.formatSymbol(i),o=o.map(r.formatSymbol);var a=i+"("+o.join(",")+","+e.join(",")+")",s=e.pop(),c={symbols:e.join("', '"),lastSymbol:s,newSignature:a};return n(e.length?t.t("Try including '__symbols__' and '__lastSymbol__' as arguments by defining the function as '__newSignature__'.",c):t.t("Try including '__lastSymbol__' as an argument by defining the function as '__newSignature__'.",c))},invalidLHS:function(e){return e=r.formatSymbol(e),n(t.t("Sorry, you can't graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return n(t.t("We can't plot θ as a function of r. Try plotting r(θ) instead."))},invalidInequalityVariables:function(){return n(t.t("We only plot inequalities of x and y, or r and θ."))},invalidImplicitVariables:function(){return n(t.t("We only support implicit equations of x and y."))},singleVariableImplicitEquationsDisabled:function(){return n(t.t("Plotting single-variable implicit equations is disabled."))},implicitsDisabled:function(){return n(t.t("Plotting implicit equations and inequalities is disabled."))},inequalitiesDisabled:function(){return n(t.t("Plotting inequalities is disabled."))},complicatedImplicitInequality:function(){return n(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return n(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return n(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return n(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return n(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=r.formatSymbol(e),n(t.t("Try adding '__lhs__' to the beginning of this equation.",{lhs:e+"="}))):n(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=r.formatSymbol(e),n(t.t("Variable '__dependency__' can't be used as a function.",{dependency:e}))},distributionAsFunction:function(e){return e=r.formatSymbol(e),n(t.t("Cannot call distribution '__symbol__' as a function. Try '__symbol__.pdf(x)'.",{symbol:e}))},invalidTableHeader:function(e){return n(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return n(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return n(t.t("First column may not be __most__ or __last__.",{most:"'y', 'r',",last:"'θ'"}))},invalidDependentFirstTableColumn:function(){return n(t.t("This column header can't be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return n(t.t("'__symbol__' may not be used as a regression parameter. Try using a list.",{symbol:r.formatSymbol(e)}))},optimizationError:function(){return n(t.t("We couldn't find any region where this model is defined."))},badListInReducer:function(e){return n(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:r.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return n(t.t("Both arguments of '__symbol__' must be lists. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return n(t.t("The first argument of '__symbol__' must be a list. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},methodRequiresList:function(e){return n(t.t("'__symbol__' requires a list. For example, try typing: __recommendation__.",{symbol:r.formatSymbol(e),recommendation:r.formatSymbol(e)+"([1,2,3])"})).allowExport()},variableRange:function(e){return n(t.t("Range cannot depend on free variable '__symbol__'.",{symbol:r.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableListIndicies:function(e){return n(t.t("List indicies cannot depend on free variable '__symbol__'.",{symbol:r.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableFilter:function(e){return n(t.t("List filters cannot depend on free variable '__symbol__'.",{symbol:r.formatSymbol(e[0])})).setDependencies(e).allowExport()},functionFreeVariable:function(e,r){return n(t.t("Function '__functionSymbol__' cannot depend on free variable '__variableSymbol__'.",{functionSymbol:e,variableSymbol:r})).allowExport()},nonArithmeticRange:function(e){return n(t.t("Ranges must be arithmetic sequences.")).allowExport()},invalidHalfEmptyRange:function(){return n(t.t("Range must have an upper and lower bound."))},sumMissingBound:function(){return n(t.t("Sums must have upper and lower bounds."))},productMissingBound:function(){return n(t.t("Products must have upper and lower bounds."))},incorrectSumLowerBound:function(){return n(t.t("Lower bound of a sum must set a variable equal to a number. Try n=1."))},incorrectProductLowerBound:function(){return n(t.t("Lower bound of a product must set a variable equal to a number. Try n=1."))},badSumBoundDependency:function(e){return n(t.t("Summation bounds can't depend on summation index '__symbol__'.",{symbol:r.formatSymbol(e)}))},badProductBoundDependency:function(e){return n(t.t("Product bounds can't depend on product index '__symbol__'.",{symbol:r.formatSymbol(e)}))},integralMissingBound:function(){return n(t.t("Integrals must have upper and lower bounds."))},integralMissingDifferential:function(){return n(t.t("Integrand must end with an integration variable, like dx."))},differentialWithSuperscript:function(){return n(t.t("Integration variable cannot have a superscript."))},sumMissingBody:function(){return n(t.t("What do you want to take the sum of?"))},productMissingBody:function(){return n(t.t("What do you want to take the product of?"))},integralMissingBody:function(){return n(t.t("What do you want to take the integral of?"))},derivativeMissingBody:function(){return n(t.t("What do you want to take the derivative of?"))},mismatchedBraces:function(e,i){return e=r.formatSymbol(e),i=r.formatSymbol(i),n(t.t("Expected '__symbol1__' to match '__symbol2__'.",{symbol1:e,symbol2:i}))},shadowedIntegrationVariable:function(e){return n(t.t("You can't use '__symbol__' as an integration variable because it's already defined.",{symbol:r.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return n(t.t("Integration bounds can't depend on integration variable '__symbol__'.",{symbol:r.formatSymbol(e)}))},percentMissingOf:function(){return n(t.t("'%' must be used with 'of'. Try '25% of 12'."))},illegalBinWidth:function(e){return e=r.formatSymbol(e),n(t.t("The second argument to '__symbol__' must be a positive number.",{symbol:e}))},ttestListTooShort:function(e){return e=r.formatSymbol(e),n(t.t("Lists for '__symbol__' must have at least 2 elements.",{symbol:e}))},badSampleSize:function(){return n(t.t("Sample size must be at least 1."))},variableSampleSize:function(e){return n(t.t("Sample size cannot depend on free variable '__symbol__'.",{symbol:r.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableSeed:function(e){return n(t.t("Random seed cannot depend on free variable '__symbol__'.",{symbol:r.formatSymbol(e[0])})).setDependencies(e).allowExport()},badAnsContext:function(){return n(t.t("You can't use 'ans' in this context."))},ansUndefined:function(){return n(t.t("The previous expression didn't define any value for ans."))},variablesUnsupported:function(e){return n(t.t("This calculator does not support variables like '__variable__'.",{variable:r.formatSymbol(e)}))},functionUnsupported:function(e){return n(t.t("This calculator does not support the '__symbol__' function.",{symbol:r.formatSymbol(e)}))},logbaseUnsupported:function(){return n(t.t("This calculator does not support specifying the base of a logarithm. Try 'log' or 'ln'."))},constantUnsupported:function(e){return n(t.t("This calculator does not support the constant '__symbol__'.",{symbol:r.formatSymbol(e)}))},assignmentsUnsupported:function(){return n(t.t("This calculator does not support defining variables."))},functionDefinitionsUnsupported:function(){return n(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return n(t.t("This calculator does not support this type of equation."))},inequalitiesUnsupported:function(){return n(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return n(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return n(t.t("This calculator does not support points."))},featureUnavailable:function(){return n(t.t("This feature is not available in the current calculator."))},nonSquareDeterminant:function(){return n(t.t("Only square matrices have a determinant."))},nonSquareInverse:function(){return n(t.t("Only square matrices have an inverse."))},singularInverse:function(){return n(t.t("Singular matrices do not have an inverse."))},clickableObjectAssignmentNotDefined:function(e){return n(t.t('"__symbol__" is not defined. Try using a different variable or adding a slider.',{symbol:e}))},clickableObjectAlreadyAssigned:function(e){return n(t.t("You've defined '__dependency__' in more than one place. Try deleting some of the definitions of '__dependency__'.",{dependency:e}))},clickableObjectAssignmentNotIdentifier:function(){return n(t.t("Invalid symbol. Try using a single letter."))},clickableObjectInvalidExpression:function(){return n(t.t("Can't evaluate this. Try a number or simple expression."))},matrixAssignment:function(){return n(t.t("This calculator does not support this type of variable definition. Try using 'New Matrix'."))},matrixAddDimensions:function(){return n(t.t("Cannot add matrices with different dimensions."))},matrixSubtractDimensions:function(){return n(t.t("Cannot subtract matrices with different dimensions."))},matrixMultiplyDimensions:function(){return n(t.t("Cannot multiply matrices with incompatible dimensions."))},matrixFractionalPower:function(){return n(t.t("A matrix can only be raised to integer powers."))},matrixPowerDimensions:function(){return n(t.t("Only square matrices can be raised to a power."))},matrixElementTypeError:function(e){return n(t.t("Cannot use __arg__ as an element of a matrix.",{arg:e[0]}))},matrixInvalidVariable:function(e){return n(t.t("Cannot use '__symbol__' as a variable.",{symbol:r.formatSymbol(e)}))}}}),define("core/math/parsenode/expression",["require","pjs","./base","core/math/errormsg","core/math/types"],function(e){"use strict";var t=e("pjs"),n=e("./base"),r=e("core/math/errormsg"),i=e("core/math/types");return t(n,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.mergeDependencies(this.args[e])},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize)},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("core/math/parsenode/scalarexpression",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e)},e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var r=this.args[n].getEvalStrings();e=e.concat(r.statements),t.push(r.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("core/math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r={Add:t(n,{}),Subtract:t(n,{}),Multiply:t(n,{}),Divide:t(n,{}),Exponent:t(n,{}),Negative:t(n,{}),And:t(n,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:t(n,{})};return r.RawExponent=t(r.Exponent,{}),r}),define("core/math/maybe-rational",["require","exports","core/math/builtin"],function(e,t,n){"use strict";function r(e,t){return{n:e,d:t}}function i(e){return"object"==typeof e&&"number"==typeof e.n&&"number"==typeof e.d}function o(e){var t=e.match(/^(-)?(\d*)?(?:\.(\d*))?$/);if(!t)return NaN;var n=t[1],r=t[2],i=t[3];if(!r&&!i)return NaN;var o=!!n;if(i){var a=i.replace(/0+$/,""),c=a.length,l=Math.pow(10,c),u=parseInt(r||"0",10)*l+parseInt(a||"0",10);return u>E||l>E?parseFloat(e):s(o?-u:u,l)}var u=parseInt(r,10);return u>E?parseFloat(e):s(o?-u:u,1)}function a(e){return i(e)?e.n/e.d:e}function s(e,t){if(!isFinite(e)||!isFinite(t)||0===t||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>E||Math.abs(t)>E)return e/t;t<0&&(e=-e,t=-t);var i=n.gcd(e,t);return r(e/i,t/i)}function c(e){return i(e)?r(-e.n,e.d):-e}function l(e){return i(e)?r(Math.abs(e.n),Math.abs(e.d)):Math.abs(e)}function u(e){return i(e)?0===e.n?e.d/e.n:r(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function d(e,t){if(!i(e)||!i(t))return a(e)+a(t);var r=n.gcd(e.d,t.d);return s(e.n*(t.d/r)+t.n*(e.d/r),e.d/r*t.d)}function p(e,t){if(!i(e)||!i(t))return a(e)*a(t);var r=n.gcd(e.n,t.d),o=n.gcd(t.n,e.d);return s(e.n/r*(t.n/o),e.d/o*(t.d/r))}function h(e,t){return d(e,c(t))}function f(e,t){return i(e)&&i(t)?p(e,u(t)):a(e)/a(t)}function m(e,t){var r=e,o=t;if(t.n<0&&(o=c(t),r=u(e)),
!i(r)||!i(o))return n.pow(a(e),a(t));if(e=r,t=o,1===t.d)return s(Math.pow(e.n,t.n),Math.pow(e.d,t.n));var l=e.n<0;if(l&&t.d%2!=1)return NaN;var d=l?-1:1,p=d*Math.round(Math.pow(Math.abs(e.n),1/t.d)),h=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(p,t.d)!==e.n||Math.pow(h,t.d)!==e.d?n.pow(a(e),a(t)):s(Math.pow(p,t.n),Math.pow(h,t.n))}function g(e,t){if(!i(e)||!i(t))return n.pow(a(e),a(t));var r=m(e,t);return i(r)?r:n.pow(a(e),a(t))}function y(e){if(!i(e))return Math.sqrt(e);var t=Math.round(Math.sqrt(e.n)),n=Math.round(Math.sqrt(e.d));return t*t!==e.n||n*n!==e.d?Math.sqrt(a(e)):s(t,n)}function v(e,t){return g(e,u(t))}function b(e,t){if(!i(e)||!i(t)){var n=a(e),o=a(t);return n-o*Math.floor(n/o)}return h(e,p(t,r(Math.floor(a(f(e,t))),1)))}function x(e){for(var t=r(0,1),n=0,i=e;n<i.length;n++){t=d(t,i[n])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.total=t.mod=t.nthroot=t.sqrt=t.pow=t.div=t.sub=t.mul=t.add=t.reciprocal=t.abs=t.neg=t.maybeRational=t.asFloat=t.fromDecimalString=t.isRational=void 0,t.isRational=i;var E=Math.pow(2,53)-1;t.fromDecimalString=o,t.asFloat=a,t.maybeRational=s,t.neg=c,t.abs=l,t.reciprocal=u,t.add=d,t.mul=p,t.sub=h,t.div=f,t.pow=g,t.sqrt=y,t.nthroot=v,t.mod=b,t.total=x}),define("core/math/parsenode/constant",["require","pjs","./scalarexpression","core/math/maybe-rational","core/math/types"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("core/math/maybe-rational"),i=e("core/math/types");return t(n,function(e,t){e.init=function(e){"number"==typeof e&&(e=r.maybeRational(e,1)),this._constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.asValue=function(){return"boolean"==typeof this._constantValue?this._constantValue:r.asFloat(this._constantValue)},e.asMaybeRationalValue=function(){return"boolean"==typeof this._constantValue?NaN:this._constantValue},e.scalarExprString=function(){return this.asValue()>0?String(this.asValue()):"("+String(this.asValue())+")"},e.getEvaluationInfo=function(){return[{val:this.asValue()}]},e.isNaN=function(){return"number"==typeof this.asValue()&&isNaN(this.asValue())},e._getValueType=function(){switch(typeof this.asValue()){case"number":return i.Number;case"boolean":return i.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}}})}),define("core/math/parsenode/mixednumber",["require","pjs","./constant"],function(e){"use strict";return e("pjs")(e("./constant"),function(e,t){e.init=function(e){t.init.call(this,e)},e.is_mixed_number=!0})}),define("core/math/parsenode/identifier",["require","pjs","./expression","core/lib/label","core/math/parser/input-span"],function(e){"use strict";var t=e("pjs"),n=e("./expression"),r=e("core/lib/label"),i=e("core/math/parser/input-span");return t(n,function(e,t,n){e.init=function(e){t.init.call(this,[]),this._symbol=r.latexToIdentifier(e),this.setInputSpan(new i.Span(e,0,e.length)),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})}),define("core/math/parsenode/ans",["require","pjs","./identifier"],function(e){"use strict";return e("pjs")(e("./identifier"),function(e,t,n){})}),define("core/math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this}})}),define("core/math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){"use strict";return e("pjs")(e("./freevariable"),function(){})}),define("core/math/parsenode/list",["require","pjs","./expression","core/math/types"],function(e){"use strict";var t=e("pjs"),n=e("./expression"),r=e("core/math/types");return t(n,function(e,t,n){function i(e){for(var t=1/0,n=0;n<e.length;n++)(e[n].isList||e[n].isBroadcast)&&(t=Math.min(t,e[n].length));return t}e.init=function(e){t.init.call(this,e),this.length=e.length},e.isList=!0,e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var r=this.args[n].getEvalStrings();Array.prototype.push.apply(e,r.statements),t.push(r.expression)}return{statements:e,expression:"["+t.join(",")+"]"}},e.asValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asValue());return e},e.asMaybeRationalValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asMaybeRationalValue());return e},e.getEvaluationInfo=function(){if(this.args.every(function(e){return e.isConstant}))return[{val:this.args.map(function(e){return e.asValue()})}]},n.eachArgs=function(e,t,n){var o=i(t);if(!isFinite(o))return void n(t);for(var a=0;a<o;a++){for(var s=[],c=0;c<t.length;c++)s.push(t[c].isList||r.isList(t[c].valueType)?t[c].elementAt(e,a):t[c]);n(s)}},n.mapArgs=function(e,t,r){var i=[];return n.eachArgs(e,t,function(e){i.push(r(e))}),i},n.wrap=function(e){return e.isList||r.isList(e.valueType)?e:n([e])}})}),define("core/math/parsenode/range",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t,n){e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]},e.isHalfEmpty=function(){return this.end&&this.end.args&&0===this.end.args.length}})}),define("core/math/parsenode/broadcast",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t,n){e.init=function(e,n){if(t.init.call(this,n),this._replacedSymbols=e,this._expression=n[0],this._lists=n.slice(1),!e.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var r=0;r<e.length;r++)this.removeDependency(e[r]);for(var i=1/0,o=0;o<this._lists.length;o++){if(!this._lists[o].isList)throw new Error("List arguments of broadcast must be list literals");i=Math.min(i,this._lists[o].length)}this.length=i},e.isBroadcast=!0,e.copyWithArgs=function(e){return new this.constructor(this._replacedSymbols,e)},e.getEvalStrings=function(){var e=[],t=this._expression.getEvalStrings();Array.prototype.push.apply(e,t.statements);var n,r=[],i=[];for(n=0;n<this._lists.length;n++){var o=this._lists[n].getEvalStrings();Array.prototype.push.apply(e,o.statements);var a=this.tmpVar();i.push(a),r.push("var "+a+" = "+o.expression)}var s=this.tmpVar(),c=this.tmpVar();r.push("var "+s+" = []");var l=[];for(n=0;n<i.length;n++)l.push("var "+this._replacedSymbols[n]+" = "+i[n]+"["+c+"]");return r.push("for (var "+c+" = 0; "+c+" < "+this.length+"; "+c+"++) {\n  "+l.join(";\n  ")+";\n  "+s+".push("+t.expression+");\n}"),{statements:e.concat(r),expression:s}}})}),define("core/math/parsenode/listaccess",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),n=e.statements.concat(t.statements),r=this.tmpVar();n.push("var "+r+" = "+t.expression);var i=this.tmpVar();return n.push("var "+i+" = Math.floor("+e.expression+") - 1"),{statements:n,expression:"("+i+" >= 0 && "+i+" < "+r+".length ? "+r+"["+i+"] : NaN)"}}})}),define("core/math/parsenode/dotaccess",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),{})}),define("core/math/parsenode/dotaccessexponent",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),{})}),define("core/math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t,n){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],n=0;n<this.args.length;n++){var r=this.args[n].getEvalStrings();e=e.concat(r.statements),t.push(r.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("core/math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){"use strict";return e("pjs")(e("./orderedpair"),function(e,t){e.init=function(e,n,r){t.init.call(this,e),this.moveStrategy=n,this.defaultDragMode=r},e.isMovablePoint=!0})}),define("core/math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),n=[];return Array.prototype.push.apply(n,e.statements),Array.prototype.push.apply(n,t.statements),{statements:n,expression:t.expression+"["+e.expression+"-1]"}}})}),define("core/math/parsenode/polygon",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="polygon"}})}),define("core/math/comparators",["require","exports"],function(e,t){"use strict";function n(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}}Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.table=void 0,t.table={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},t.get=n}),define("core/math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","core/math/comparators","core/math/functions"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("./expressionTypes").Subtract,i=e("core/math/comparators").table,o=e("core/math/functions");return t(n,function(e,n,a){a.create=function(e,n){return n=n||e,t(a,function(t,r){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=n,t.scalarEvalExpression=function(e){return e.join(n)},t.evaluate=o.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){n.init.call(this,e),this._difference=r(-1===i[this.operator].direction?[e[1],e[0]]:[e[0],e[1]])}})}),define("core/math/parsenode/comparator",["require","core/math/parsenode/basecomparator"],function(e){"use strict";var t=e("core/math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("core/math/parsenode/doubleinequality",["require","pjs","./base","core/math/comparators","./comparator"],function(e){"use strict";var t=e("pjs"),n=e("./base"),r=e("core/math/comparators"),i=e("./comparator");return t(n,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var n=r.get(r.table[e[1]].inclusive&&r.table[e[3]].inclusive,r.table[e[1]].direction);this._indicator=i[n]([e[0],e[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0}})}),define("core/math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("./dummyindex");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this.addDummyDependency(this._index._symbol),this._index instanceof r&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),n=this._index._symbol,r=this.tmpVar(),i=this.tmpVar(),o=this.args[1].getEvalStrings(),a=this.args[2].getEvalStrings(),s=this.args[3].getEvalStrings();Array.prototype.push.apply(e,o.statements),e.push("var "+r+" = Math.round("+o.expression+")"),Array.prototype.push.apply(e,a.statements),e.push("var "+i+" = Math.round("+a.expression+")"),e.push("var "+t+"="+this.starting_value);var c="for (var "+n+"="+r+";"+n+"<="+i+";"+n+"++) {"+s.statements.join(";")+";"+t+this.in_place_operator+s.expression+"};",l="if(!isFinite("+i+"-"+r+")) {"+t+"=("+i+"<"+r+"?"+this.starting_value+":NaN);}else{"+c+"}";return e.push(l),{statements:e,expression:t}},e.evaluate=function(e,t,n){var r=n.getCompiledFunction([this._index._symbol]).fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return t<e?this.starting_value:NaN;for(var i=this.starting_value,o=e;o<=t;o++)i=this.update(i,r(o));return i}})}),define("core/math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){"use strict";return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("core/math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){"use strict";return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("core/math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","core/math/builtin"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("./dummyindex"),i=e("core/math/builtin");return t(n,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof r&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],n=this.args[2],r=this.args[3],i=[],o=this.tmpVar(),a=e._symbol,s=this.tmpVar(),c=this.tmpVar(),l=t.getEvalStrings(),u=n.getEvalStrings(),d=r.getEvalStrings();return Array.prototype.push.apply(i,l.statements),Array.prototype.push.apply(i,u.statements),i.push("var "+s+" = "+l.expression),i.push("var "+c+" = "+u.expression),i.push("var "+o+" = function ("+a+") { "+d.statements.join("; ")+"; return "+d.expression+";}"),{statements:i,expression:"BuiltIn.quad("+[o,s,c].join(", ")+")"}},e.evaluate=function(e,t,n){var r=this.args[0],o=n.getCompiledFunction([r._symbol]).fn;return i.quad(o,e,t)}})}),define("core/math/parsenode/functioncall",["require","pjs","./expression","./identifier"],function(e){"use strict";var t=e("pjs"),n=e("./expression"),r=e("./identifier");return t(n,function(e,t){e.init=function(e,n){"string"==typeof e&&(e=r(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,n),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(r(this._symbol),e)}})}),define("core/math/parsenode/seededfunctioncall",["require","pjs","./functioncall"],function(e){"use strict";return e("pjs")(e("./functioncall"),function(e,t){e.init=function(e,n){t.init.call(this,e,n),this.seed=n[0]}})}),define("core/math/parsenode/functionexponent",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){})}),define("core/math/parsenode/functionfactorial",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){})}),define("core/math/parsenode/prime",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,n){t.init.call(this,n),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)}})}),define("core/math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant","core/math/maybe-rational"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("./constant"),i=e("core/math/maybe-rational").maybeRational,o=t(n,{});return o.chain=function(e){for(var t,n=r(NaN);e.length;)t=e.pop(),n=o([t.condition,t.if_expr,n]);return n},o.empty=function(){return o([r(!0),r(i(1,1)),r(NaN)])},o}),define("core/math/parsenode/derivative",["require","pjs","./scalarexpression","./identifier"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("./identifier");return t(n,function(e,t){e.init=function(e,n){this._symbol=e instanceof r?e._symbol:r(e)._symbol,t.init.call(this,n)}})}),define("core/math/parsenode/nativefunction",["require","pjs","./scalarexpression","core/math/functions"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("core/math/functions");return t(n,function(e,n,i){e.init=function(e,t){if(e.length>=this._requiredArity)for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);this._errorSymbol="logbase"===this._symbol?"log":t||this._symbol,n.init.call(this,e)},e.copyWithArgs=function(e){var t=n.copyWithArgs.call(this,e);return t._errorSymbol=this._errorSymbol,t},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,n,i,o){return t(this,function(t,a,s){s.isFunction=!0,t._symbol=e,t.head=n,t._requiredArity=i,t._optionalArguments=o||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=r.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),s.getConcreteInvocationTree=function(e,t,n,r){return s(n,r).getConcreteTree(e,t)},s.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){"use strict";return e("pjs")(e("./nativefunction"),function(e,t,n,r){n.create=function(e,t,n,i){var o=n.length,a=r.create.call(this,e,t,o);return a.prototype._inputTypes=n,a.prototype._outputType=i,a}})}),define("core/math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),n=e("./nativefunction"),r=e("./expressionTypes").Multiply,i=e("core/math/errormsg");return t(n,function(e,t,n,o){n.create=function(e,t){var n=o.create(e,t,1);return n.getConcreteInvocationTree=function(e,t,o,a){if(o.length<1)throw i.wrongArity(a,1,o.length);var s=t.trigAngleMultiplier?[r([o[0],t.trigAngleMultiplier])].concat(o.slice(1)):o;return n(s,a).getConcreteTree(e,t)},n.getCacheKeys=function(){return["trigAngleMultiplier"]},n}})}),define("core/math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){"use strict";var t=e("pjs"),n=e("./nativefunction"),r=e("./expressionTypes").Divide;return t(n,function(e,t,n,i){n.create=function(e,t,n){var o=i.create(e,t,1,n);return o.getConcreteInvocationTree=function(e,t,n,i){var a=o(n,i);return(t.trigAngleMultiplier?r([a,t.trigAngleMultiplier]):a).getConcreteTree(e,t)},o.getCacheKeys=function(){return["trigAngleMultiplier"]},o}})}),define("core/math/parsenode/distribution",["require","pjs","./scalarexpression","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),n=e("./scalarexpression"),r=e("core/math/errormsg");return t(n,function(e,n,i){e.init=function(e,t){var i="tdist"===this._symbol;if(e.length<this._requiredArity){if(i)throw r.tdistWrongArity();throw r.wrongArity(t,this._requiredArity,e.length)}if(e.length>this._maxArity){if(i)throw r.tdistWrongArity();throw r.wrongArity(this._symbol,this._maxArity,e.length)}for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);n.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,n,r){return t(this,function(t,i,o){o.isFunction=!0,t._symbol=e,t._requiredArity=n,t._optionalArguments=r||[],t._maxArity=t._requiredArity+t._optionalArguments.length,o.getConcreteInvocationTree=function(e,t,n,r){return o(n,r)},o.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/reducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg","./distribution","core/math/types"],function(e){"use strict";var t=e("pjs"),n=e("./expression"),r=e("core/math/functions"),i=e("core/math/errormsg"),o=e("./distribution"),a=e("core/math/types");return t(n,function(e,n,s){e.init=function(e,t){if(0===e.length)throw i.zeroArgReducer(t);if(e[0]instanceof o&&"length"!==this._symbol&&!e[0][this._symbol])throw i.functionTypeError(this._symbol,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e+")"},e.getEvalStrings=function(){var e=this.args[0].getEvalStrings();return{statements:e.statements,expression:this.evalExpression(e.expression)}},s.create=function(e,n){return t(s,function(t,i,o){t._symbol=e,t.head=n,t._arity=1,o.isFunction=!0,o.allowDotCalls=!0,o.dotMinArity=0,o.dotMaxArity=0,t.evaluate=r.createEvaluateFunction(t.evalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,n,r){return o(n,r).getConcreteTree(e,t)},o.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/doublereducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),n=e("./expression"),r=e("core/math/functions"),i=e("core/math/errormsg");return t(n,function(e,n,o){e.init=function(e,t){if(n.init.call(this,e),2!==this.args.length)throw i.wrongDoubleReducerArity(t)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],n=Math.min(this.args[0].length,this.args[1].length),r=0;r<this.args.length;r++){var i=this.args[r],o=i.getEvalStrings();Array.prototype.push.apply(e,o.statements),t.push(i.length===n?o.expression:o.expression+".slice(0,"+n+")")}return{statements:e,expression:this.evalExpression(t)}},o.create=function(e,n){return t(o,function(t,i,o){t._symbol=e,t.head=n,t._arity=2,o.isFunction=!0,t.evaluate=r.createEvaluateFunction(t.evalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,n,r){return o(n,r).getConcreteTree(e,t)},o.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg","./distribution","core/math/types"],function(e){"use strict";var t=e("pjs"),n=e("./expression"),r=e("core/math/functions"),i=e("core/math/errormsg"),o=e("./distribution"),a=e("core/math/types");return t(n,function(e,n,s){e.init=function(e,t){if(e.length<2&&void 0!==this._optionalArgument&&e.push(this._optionalArgument),2!==e.length)throw i.wrongParametrizedReducerArity(t);if(e[0]instanceof o&&!e[0][this._symbol])throw i.functionTypeError(t,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){var e=[],t=this.args[0].getEvalStrings(),n=this.args[1].getEvalStrings();return Array.prototype.push.apply(e,t.statements),Array.prototype.push.apply(e,n.statements),{statements:e,expression:this.evalExpression([t.expression,n.expression])}},s.create=function(e,n,i){return t(s,function(t,o,a){t._symbol=e,t.head=n,t._optionalArgument=i,t._arity=2,a.isFunction=!0,a.allowDotCalls=!0,a.dotMinArity=void 0===i?1:0,a.dotMaxArity=1,t.evaluate=r.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,n,r){return a(n,r).getConcreteTree(e,t)},a.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/toplevelfunction",["require","pjs","./nativefunction","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),n=e("./nativefunction"),r=e("core/math/errormsg");return t(n,function(e,n,i,o){i.create=function(e){return t(i,function(e,t,n){n.isFunction=!0,n.getConcreteInvocationTree=function(e,t,n,i){throw r.unexpectedSymbol(i)},n.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/builtinfunction",["require","core/math/parsenode/nativefunction","core/math/parsenode/typedfunction","core/math/parsenode/trigfunction","core/math/parsenode/inversetrigfunction","core/math/parsenode/reducerfunction","core/math/parsenode/doublereducerfunction","core/math/parsenode/parametrizedreducerfunction","core/math/parsenode/distribution","core/math/parsenode/toplevelfunction","core/math/types","core/math/maybe-rational","core/math/parsenode/constant"],function(e){"use strict";var t=e("core/math/parsenode/nativefunction"),n=e("core/math/parsenode/typedfunction"),r=e("core/math/parsenode/trigfunction"),i=e("core/math/parsenode/inversetrigfunction"),o=e("core/math/parsenode/reducerfunction"),a=e("core/math/parsenode/doublereducerfunction"),s=e("core/math/parsenode/parametrizedreducerfunction"),c=e("core/math/parsenode/distribution"),l=e("core/math/parsenode/toplevelfunction"),u=e("core/math/types"),d=e("core/math/maybe-rational").maybeRational,p=e("core/math/parsenode/constant"),h=p(d(1,1)),f=p(d(0,1)),m=p(d(1,2));return{sin:r.create("sin","BuiltIn.sin"),cos:r.create("cos","BuiltIn.cos"),tan:r.create("tan","BuiltIn.tan"),cot:r.create("cot","BuiltIn.cot"),sec:r.create("sec","BuiltIn.sec"),csc:r.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan2",[h]),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","BuiltIn.round",1,[f]),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:o.create("lcm","BuiltIn.listLCM"),gcd:o.create("gcd","BuiltIn.listGCD"),mean:o.create("mean","BuiltIn.mean"),total:o.create("total","BuiltIn.total"),stdev:o.create("stdev","BuiltIn.stdev"),stdevp:o.create("stdevp","BuiltIn.stdevp"),mad:o.create("mad","BuiltIn.mad"),length:o.create("length","BuiltIn.length"),min:o.create("min","BuiltIn.listMin"),max:o.create("max","BuiltIn.listMax"),argmin:o.create("argmin","BuiltIn.argMin"),argmax:o.create("argmax","BuiltIn.argMax"),median:o.create("median","BuiltIn.median"),var:o.create("var","BuiltIn.var"),varp:o.create("varp","BuiltIn.varp"),cov:a.create("cov","BuiltIn.cov"),covp:a.create("covp","BuiltIn.covp"),corr:a.create("corr","BuiltIn.corr"),spearman:a.create("spearman","BuiltIn.spearman"),quantile:s.create("quantile","BuiltIn.quantile"),quartile:s.create("quartile","BuiltIn.quartile"),upperQuantileIndex:s.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:s.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:s.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:s.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:s.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:t.create("normalcdf","BuiltIn.normalcdf",2,[f,h]),normalpdf:t.create("normalpdf","BuiltIn.normalpdf",1,[f,h]),normalSample:n.create("normalSample","BuiltIn.normalSample",[u.SeedType,u.Number,u.Number],u.Number),uniformSample:n.create("uniformSample","BuiltIn.uniformSample",[u.SeedType,u.Number,u.Number],u.Number),tSample:n.create("tSample","BuiltIn.tSample",[u.SeedType,u.Number],u.Number),poissonSample:n.create("poissonSample","BuiltIn.poissonSample",[u.SeedType,u.Number],u.Number),binomSample:n.create("binomSample","BuiltIn.binomSample",[u.SeedType,u.Number,u.Number],u.Number),binomcdf:t.create("binomcdf","BuiltIn.binomcdf",3,[m]),binompdf:t.create("binompdf","BuiltIn.binompdf",2,[m]),poissoncdf:t.create("poissoncdf","BuiltIn.poissoncdf",3),poissonpdf:t.create("poissonpdf","BuiltIn.poissonpdf",2),uniformcdf:t.create("uniformcdf","BuiltIn.uniformcdf",2,[f,h]),uniformpdf:t.create("uniformpdf","BuiltIn.uniformpdf",1,[f,h]),invNorm:t.create("invNorm","BuiltIn.invNorm",1),invT:t.create("invT","BuiltIn.invT",2),invPoisson:t.create("invPoisson","BuiltIn.invPoisson",2),invBinom:t.create("invBinom","BuiltIn.invBinom",3),invUniform:t.create("invUniform","BuiltIn.invUniform",3),erf:t.create("erf","BuiltIn.erf",1),tpdf:t.create("tpdf","BuiltIn.tpdf",2),tcdf:t.create("tcdf","BuiltIn.tcdf",3),tscore:s.create("tscore","BuiltIn.tscore",f),distance:n.create("distance","BuiltIn.distance",[u.Point,u.Point],u.Number),midpoint:n.create("midpoint","BuiltIn.midpoint",[u.Point,u.Point],u.Point),normaldist:c.create("normaldist",0,[f,h]),tdist:c.create("tdist",1),binomialdist:c.create("binomialdist",1,[m]),poissondist:c.create("poissondist",1),uniformdist:c.create("uniformdist",0,[f,h]),pdf:n.create("pdf","BuiltIn.normpdf",[u.Distribution,[u.Number,u.ListOfNumber,u.EmptyList]],u.Number).open(function(e,t,n){n.allowDotCalls=!0,n.dotMinArity=1,n.dotMaxArity=1}),cdf:n.create("cdf","BuiltIn.normcdf",[u.Distribution,[u.Number,u.ListOfNumber,u.EmptyList],[u.Number,u.ListOfNumber,u.EmptyList]],u.Number).open(function(e,t,n){n.allowDotCalls=!0,n.dotMinArity=1,n.dotMaxArity=2}),random:t.create("random","",2).open(function(e,t,n){n.allowDotCalls=!0,n.dotMinArity=1,n.dotMaxArity=3}),shuffle:t.create("shuffle","",2).open(function(e,t,n){n.allowDotCalls=!0,n.dotMinArity=1,n.dotMaxArity=2,n.minArityUsageExample="shuffle([1,2,3])",e.minArityUsageExample=n.minArityUsageExample,n.maxArityUsageExample="shuffle([1,2,3],2)",e.maxArityUsageExample=n.maxArityUsageExample,n.dotMaxArityUsageExample=".shuffle(2)"}),sort:t.create("sort","",1).open(function(e,t,n){n.allowDotCalls=!0,n.dotMinArity=0,n.dotMaxArity=1,n.minArityUsageExample="sort([3,2,1])",e.minArityUsageExample=n.minArityUsageExample,n.maxArityUsageExample="sort([1,2,3],[3,2,1])",e.maxArityUsageExample=n.maxArityUsageExample,n.dotMaxArityUsageExample=".sort([3,4])"}),join:t.create("join","",2).open(function(e,t,n){n.allowDotCalls=!0,n.dotMinArity=1,n.dotMaxArity=1/0,n.minArityUsageExample="join([1,2],[3,4])",e.minArityUsageExample=n.minArityUsageExample,n.dotMinArityUsageExample=".join([3,4])"}),polygon:l.create("polygon"),histogram:l.create("histogram"),dotplot:l.create("dotplot"),boxplot:l.create("boxplot"),ttest:l.create("ttest"),ittest:l.create("ittest"),stats:l.create("stats")}}),define("core/math/parsenode/histogram",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="histogram"}})}),define("core/math/parsenode/object3d",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,n){t.init.call(this,e),this._symbol=n}})}),define("core/math/parsenode/dotplot",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="dotplot"}})}),define("core/math/parsenode/boxplot",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="boxplot"}})}),
define("core/math/parsenode/ttest",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ttest"}})}),define("core/math/parsenode/independent-ttest",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ittest"}})}),define("core/math/parsenode/stats",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="stats"}})}),define("core/math/parsenode/equation",["require","./base","pjs","./expressionTypes","core/math/parsenode/comparator"],function(e){"use strict";var t=e("./base"),n=e("pjs"),r=e("./expressionTypes").Subtract,i=e("core/math/parsenode/comparator");return n(t,function(e,t){e.init=function(e,n){t.init.call(this),this.mergeDependencies(e,n),this._lhs=e,this._rhs=n,this._difference=r([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])}})}),define("core/math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){"use strict";var t=e("./base"),n=e("./equation"),r=e("./identifier");return e("pjs")(t,function(e,t){e.init=function(e,n){t.init.call(this),e=e._symbol,this.mergeDependencies(n),this._expression=n,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),n=0;n<t.length;n++)if(t[n]===e)return[];return[e]},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=n(r(this._symbol),this._expression);return e.userData=this.userData,e.metaData=this.metaData,e},e.shouldPromoteToSlider=function(e){return!!this._expression.isConstant&&!this._expression.is_mixed_number&&"number"==typeof this._expression.asValue()&&!!isFinite(this._expression.asValue())&&e.isValidSlider(this._symbol)}})}),define("core/math/parsenode/functiondefinition",["require","pjs","./base","core/math/errormsg","./equation","./identifier","./functioncall"],function(e){"use strict";var t=e("pjs"),n=e("./base"),r=e("core/math/errormsg"),i=e("./equation"),o=e("./identifier"),a=e("./functioncall");return t(n,function(e,t){e.init=function(e,n,r){t.init.call(this),e=e._symbol,this._argSymbols=n.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=r,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,n,i){if(n.length!==this._argSymbols.length)throw r.wrongArity(i,this._argSymbols.length,n.length);for(var o=Object.create(t),a=0;a<this._argSymbols.length;a++)o[this._argSymbols[a]]=n[a];return this._expression.getConcreteTree(e,o)},e.getSliderVariables=function(e,t){var n=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===n.indexOf(e)})},e.asEquation=function(){var e=this._argSymbols.map(function(e){return o(e)}),t=i(a(o(this._symbol),e),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}})}),define("core/math/parsenode/optimizedregression",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e,n,r,i,o){t.init.call(this),this.parameters=e,this.residuals=n,this.statistics=r,this.model=i,this.isModelValid=o.isModelValid,this.residualVariable=o.residualVariable,this.residualSuggestionId=o.residualSuggestionId,this.shouldSuggestLogMode=o.shouldSuggestLogMode,this.isLinear=o.isLinear,this.parameterWarning=o.parameterWarning,this._exports=[this.residualVariable];for(var a in e)e.hasOwnProperty(a)&&this._exports.push(a);this.mergeDependencies(i)},e.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},e.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("numeric",[],function(){"use strict";var e="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=e),e.version="1.2.6",e._myIndexOf=function(e){var t,n=this.length;for(t=0;t<n;++t)if(this[t]===e)return t;return-1},e.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:e._myIndexOf,e.precision=4,e.largeArray=50,e.compile=function(){var t=Array.prototype.slice.call(arguments),n=t.pop();return n="return function ("+t.join(",")+") {"+n+"}",new Function(["numeric"],n)(e)},e._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},e.dim=function(t){var n,r;return"object"==typeof t?(n=t[0],"object"==typeof n?(r=n[0],"object"==typeof r?e._dim(t):[t.length,n.length]):[t.length]):[]},e.mapreduce=function(t,n){return e.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+n+';\nif(typeof x === "number") { var xi = x; '+t+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+t+";\n    xi = x[i-1];\n    "+t+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+t+"\n}\nreturn accum;")},e.mapreduce2=function(t,n){return e.compile("x","var n = x.length;\nvar i,xi;\n"+n+"\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+t+"\n}\nreturn accum;")},e.rep=function(t,n,r){void 0===r&&(r=0);var i,o=t[r],a=Array(o);if(r===t.length-1){for(i=o-2;i>=0;i-=2)a[i+1]=n,a[i]=n;return-1===i&&(a[0]=n),a}for(i=o-1;i>=0;i--)a[i]=e.rep(t,n,r+1);return a},e.dotMMsmall=function(e,t){var n,r,i,o,a,s,c,l,u,d,p;for(o=e.length,a=t.length,s=t[0].length,c=Array(o),n=o-1;n>=0;n--){for(l=Array(s),u=e[n],i=s-1;i>=0;i--){for(d=u[a-1]*t[a-1][i],r=a-2;r>=1;r-=2)p=r-1,d+=u[r]*t[r][i]+u[p]*t[p][i];0===r&&(d+=u[0]*t[0][i]),l[i]=d}c[n]=l}return c},e._getCol=function(e,t,n){var r,i=e.length;for(r=i-1;r>0;--r)n[r]=e[r][t],--r,n[r]=e[r][t];0===r&&(n[0]=e[0][t])},e.dotMMbig=function(t,n){var r,i,o,a=e._getCol,s=n.length,c=Array(s),l=t.length,u=n[0].length,d=new Array(l),p=e.dotVV;for(--s,--l,i=l;-1!==i;--i)d[i]=Array(u);for(--u,i=u;-1!==i;--i)for(a(n,i,c),o=l;-1!==o;--o)0,r=t[o],d[o][i]=p(r,c);return d},e.dotMV=function(t,n){var r,i=t.length,o=(n.length,Array(i)),a=e.dotVV;for(r=i-1;r>=0;r--)o[r]=a(t[r],n);return o},e.dotVM=function(e,t){var n,r,i,o,a,s,c;for(i=e.length,o=t[0].length,a=Array(o),r=o-1;r>=0;r--){for(s=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)c=n-1,s+=e[n]*t[n][r]+e[c]*t[c][r];0===n&&(s+=e[0]*t[0][r]),a[r]=s}return a},e.dotVV=function(e,t){var n,r,i=e.length,o=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,o+=e[n]*t[n]+e[r]*t[r];return 0===n&&(o+=e[0]*t[0]),o},e.dot=function(t,n){var r=e.dim;switch(1e3*r(t).length+r(n).length){case 2002:return n.length<10?e.dotMMsmall(t,n):e.dotMMbig(t,n);case 2001:return e.dotMV(t,n);case 1002:return e.dotVM(t,n);case 1001:return e.dotVV(t,n);case 1e3:return e.mulVS(t,n);case 1:return e.mulSV(t,n);case 0:return t*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},e.diag=function(e){var t,n,r,i,o=e.length,a=Array(o);for(t=o-1;t>=0;t--){for(i=Array(o),n=t+2,r=o-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),a[t]=i}return a},e.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],--t,r[t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},e.identity=function(t){return e.diag(e.rep([t],1))},e.pointwise=function(t,n,r){void 0===r&&(r="");var i,o,a=[],s=/\[i\]$/,c="",l=!1;for(i=0;i<t.length;i++)s.test(t[i])?(o=t[i].substring(0,t[i].length-3),c=o):o=t[i],"ret"===o&&(l=!0),a.push(o);return a[t.length]="_s",a[t.length+1]="_k",a[t.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+c+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\n    return ret;\n}\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n    "+n+"\n}\nreturn ret;",e.compile.apply(null,a)},e.pointwise2=function(t,n,r){void 0===r&&(r="");var i,o,a=[],s=/\[i\]$/,c="",l=!1;for(i=0;i<t.length;i++)s.test(t[i])?(o=t[i].substring(0,t[i].length-3),c=o):o=t[i],"ret"===o&&(l=!0),a.push(o);return a[t.length]="var _n = "+c+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+r+"\nfor(i=_n-1;i!==-1;--i) {\n"+n+"\n}\nreturn ret;",e.compile.apply(null,a)},e._biforeach=function e(t,n,r,i,o){if(i===r.length-1)return void o(t,n);var a,s=r[i];for(a=s-1;a>=0;a--)e("object"==typeof t?t[a]:t,"object"==typeof n?n[a]:n,r,i+1,o)},e._biforeach2=function e(t,n,r,i,o){if(i===r.length-1)return o(t,n);var a,s=r[i],c=Array(s);for(a=s-1;a>=0;--a)c[a]=e("object"==typeof t?t[a]:t,"object"==typeof n?n[a]:n,r,i+1,o);return c},e._foreach=function e(t,n,r,i){if(r===n.length-1)return void i(t);var o,a=n[r];for(o=a-1;o>=0;o--)e(t[o],n,r+1,i)},e._foreach2=function e(t,n,r,i){if(r===n.length-1)return i(t);var o,a=n[r],s=Array(a);for(o=a-1;o>=0;o--)s[o]=e(t[o],n,r+1,i);return s},e.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},e.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},e.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],e.mathfuns2=["atan2","pow","max","min"],e.ops1={neg:"-",not:"!",bnot:"~",clone:""},e.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,n;for(t=0;t<e.mathfuns2.length;++t)n=e.mathfuns2[t],e.ops2[n]=n;for(t in e.ops2)if(e.ops2.hasOwnProperty(t)){n=e.ops2[t];var r,i,o="";-1!==e.myIndexOf.call(e.mathfuns2,t)?(o="var "+n+" = Math."+n+";\n",r=function(e,t,r){return e+" = "+n+"("+t+","+r+")"},i=function(e,t){return e+" = "+n+"("+e+","+t+")"}):(r=function(e,t,r){return e+" = "+t+" "+n+" "+r},i=e.opseq.hasOwnProperty(t+"eq")?function(e,t){return e+" "+n+"= "+t}:function(e,t){return e+" = "+e+" "+n+" "+t}),e[t+"VV"]=e.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),o),e[t+"SV"]=e.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),o),e[t+"VS"]=e.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),o),e[t]=e.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+i("x","y")+"\n}\nreturn x;\n"),e[n]=e[t],e[t+"eqV"]=e.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),o),e[t+"eqS"]=e.pointwise2(["ret[i]","x"],i("ret[i]","x"),o),e[t+"eq"]=e.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+t+"eqV, S = numeric."+t+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(t=0;t<e.mathfuns2.length;++t)n=e.mathfuns2[t],delete e.ops2[n];for(t=0;t<e.mathfuns.length;++t)n=e.mathfuns[t],e.ops1[n]=n;for(t in e.ops1)e.ops1.hasOwnProperty(t)&&(o="",n=e.ops1[t],-1!==e.myIndexOf.call(e.mathfuns,t)&&Math.hasOwnProperty(n)&&(o="var "+n+" = Math."+n+";\n"),e[t+"eqV"]=e.pointwise2(["ret[i]"],"ret[i] = "+n+"(ret[i]);",o),e[t+"eq"]=e.compile("x",'if(typeof x !== "object") return '+n+"x\nvar i;\nvar V = numeric."+t+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),e[t+"V"]=e.pointwise2(["x[i]"],"ret[i] = "+n+"(x[i]);",o),e[t]=e.compile("x",'if(typeof x !== "object") return '+n+"(x)\nvar i;\nvar V = numeric."+t+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(t=0;t<e.mathfuns.length;++t)n=e.mathfuns[t],delete e.ops1[n];for(t in e.mapreducers)e.mapreducers.hasOwnProperty(t)&&(n=e.mapreducers[t],e[t+"V"]=e.mapreduce2(n[0],n[1]),e[t]=e.compile("x","s","k",n[1]+'if(typeof x !== "object") {    xi = x;\n'+n[0]+'\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+t+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+n[0]+"\n}\nreturn accum;\n"))}(),e.inv=function(t){var n,r,i,o,a,s,c,t,l=e.dim(t),u=Math.abs,d=l[0],p=l[1],h=e.clone(t),f=e.identity(d);for(s=0;s<p;++s){var m=-1,g=-1;for(a=s;a!==d;++a)(c=u(h[a][s]))>g&&(m=a,g=c);for(r=h[m],h[m]=h[s],h[s]=r,o=f[m],f[m]=f[s],f[s]=o,t=r[s],c=s;c!==p;++c)r[c]/=t;for(c=p-1;-1!==c;--c)o[c]/=t;for(a=d-1;-1!==a;--a)if(a!==s){for(n=h[a],i=f[a],t=n[s],c=s+1;c!==p;++c)n[c]-=r[c]*t;for(c=p-1;c>0;--c)i[c]-=o[c]*t,--c,i[c]-=o[c]*t;0===c&&(i[0]-=o[0]*t)}}return f},e.det=function(t){var n=e.dim(t);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");var r,i,o,a,s,c,l,u,d=n[0],p=1,h=e.clone(t);for(i=0;i<d-1;i++){for(o=i,r=i+1;r<d;r++)Math.abs(h[r][i])>Math.abs(h[o][i])&&(o=r);for(o!==i&&(l=h[o],h[o]=h[i],h[i]=l,p*=-1),a=h[i],r=i+1;r<d;r++){for(s=h[r],c=s[i]/a[i],o=i+1;o<d-1;o+=2)u=o+1,s[o]-=a[o]*c,s[u]-=a[u]*c;o!==d&&(s[o]-=a[o]*c)}if(0===a[i])return 0;p*=a[i]}return p*h[i][i]},e.transpose=function(e){var t,n,r,i,o,a=e.length,s=e[0].length,c=Array(s);for(n=0;n<s;n++)c[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)o=c[n],o[t]=i[n],o[t-1]=r[n],--n,o=c[n],o[t]=i[n],o[t-1]=r[n];0===n&&(o=c[0],o[t]=i[0],o[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)c[n][0]=r[n],--n,c[n][0]=r[n];0===n&&(c[0][0]=r[0])}return c},e.negtranspose=function(e){var t,n,r,i,o,a=e.length,s=e[0].length,c=Array(s);for(n=0;n<s;n++)c[n]=Array(a);for(t=a-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)o=c[n],o[t]=-i[n],o[t-1]=-r[n],--n,o=c[n],o[t]=-i[n],o[t-1]=-r[n];0===n&&(o=c[0],o[t]=-i[0],o[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)c[n][0]=-r[n],--n,c[n][0]=-r[n];0===n&&(c[0][0]=-r[0])}return c},e.norm2=function(t){return Math.sqrt(e.norm2Squared(t))},e.linspace=function(e,t,n){if(void 0===n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];var r,i=Array(n);for(n--,r=n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},e.getBlock=function(t,n,r){function i(e,t){var a,s=n[t],c=r[t]-s,l=Array(c);if(t===o.length-1){for(a=c;a>=0;a--)l[a]=e[a+s];return l}for(a=c;a>=0;a--)l[a]=i(e[a+s],t+1);return l}var o=e.dim(t);return i(t,0)},e.setBlock=function(t,n,r,i){function o(e,t,i){var s,c=n[i],l=r[i]-c;if(i===a.length-1)for(s=l;s>=0;s--)e[s+c]=t[s];for(s=l;s>=0;s--)o(e[s+c],t[s],i+1)}var a=e.dim(t);return o(t,i,0),t},e.getRange=function(e,t,n){var r,i,o,a,s=t.length,c=n.length,l=Array(s);for(r=s-1;-1!==r;--r)for(l[r]=Array(c),o=l[r],a=e[t[r]],i=c-1;-1!==i;--i)o[i]=a[n[i]];return l},e.blockMatrix=function(t){var n=e.dim(t);if(n.length<4)return e.blockMatrix([t]);var r,i,o,a,s,c=n[0],l=n[1];for(r=0,i=0,o=0;o<c;++o)r+=t[o][0].length;for(a=0;a<l;++a)i+=t[0][a][0].length;var u=Array(r);for(o=0;o<r;++o)u[o]=Array(i);var d,p,h,f,m,g=0;for(o=0;o<c;++o){for(d=i,a=l-1;-1!==a;--a)for(s=t[o][a],d-=s[0].length,h=s.length-1;-1!==h;--h)for(m=s[h],p=u[g+h],f=m.length-1;-1!==f;--f)p[d+f]=m[f];g+=t[o][0].length}return u},e.tensor=function(t,n){if("number"==typeof t||"number"==typeof n)return e.mul(t,n);var r=e.dim(t),i=e.dim(n);if(1!==r.length||1!==i.length)throw new Error("numeric: tensor product is only defined for vectors");var o,a,s,c,l=r[0],u=i[0],d=Array(l);for(a=l-1;a>=0;a--){for(o=Array(u),c=t[a],s=u-1;s>=3;--s)o[s]=c*n[s],--s,o[s]=c*n[s],--s,o[s]=c*n[s],--s,o[s]=c*n[s];for(;s>=0;)o[s]=c*n[s],--s;d[a]=o}return d},e.epsilon=2.220446049250313e-16,e.LU=function(t,n){n=n||!1;var r,i,o,a,s,c,l,u,d,p=Math.abs,h=t.length,f=h-1,m=new Array(h);for(n||(t=e.clone(t)),o=0;o<h;++o){for(l=o,c=t[o],d=p(c[o]),i=o+1;i<h;++i)a=p(t[i][o]),d<a&&(d=a,l=i);for(m[o]=l,l!=o&&(t[o]=t[l],t[l]=c,c=t[o]),s=c[o],r=o+1;r<h;++r)t[r][o]/=s;for(r=o+1;r<h;++r){for(u=t[r],i=o+1;i<f;++i)u[i]-=u[o]*c[i],++i,u[i]-=u[o]*c[i];i===f&&(u[i]-=u[o]*c[i])}}return{LU:t,P:m}},e.LUsolve=function(t,n){var r,i,o,a,s,c=t.LU,l=c.length,u=e.clone(n),d=t.P;for(r=l-1;-1!==r;--r)u[r]=n[r];for(r=0;r<l;++r)for(o=d[r],d[r]!==r&&(s=u[r],u[r]=u[o],u[o]=s),a=c[r],i=0;i<r;++i)u[r]-=u[i]*a[i];for(r=l-1;r>=0;--r){for(a=c[r],i=r+1;i<l;++i)u[r]-=u[i]*a[i];u[r]/=a[r]}return u},e.solve=function(t,n,r){return e.LUsolve(e.LU(t,r),n)},e}),define("core/math/qr",["require","exports"],function(e,t){"use strict";function n(e,t){for(var n=e.length,r=t.length,i=0,o=0,a=r-n;a<r;a++)i+=e[a+n-r]*t[a],o+=e[a+n-r]*e[a+n-r];for(var s=i/o,a=r-n;a<r;a++)t[a]=2*s*e[a+n-r]-t[a]}function r(e,t,n){for(var r=e.length,i=t.length,o=0,a=0,s=i-r;s<i;s++)o+=e[s+r-i]*t[s][n],a+=e[s+r-i]*e[s+r-i];for(var c=o/a,s=i-r;s<i;s++)t[s][n]=2*c*e[s+r-i]-t[s][n]}function i(e,t,n,r){var i=Array(e.length-t);if(1===i.length)return i[0]=1,i;if(0===r){i[0]=1;for(var o=1;o<i.length;o++)i[o]=0;return i}var a=e[t][n]<0?-1:1;i[0]=e[t][n]+a*Math.sqrt(r);for(var s=t+1;s<e.length;s++)i[s-t]=e[s][n];return i}function o(e,t,n){for(var r=0;t<e.length;t++)r+=e[t][n]*e[t][n];return r}function a(e,t){if(!t||!t.mutateInput){var n=e;e=Array(e.length);for(var a=0;a<n.length;a++)e[a]=n[a].slice()}for(var s=Math.min(e.length,e[0].length),c=Array(s),l=[],u=0;u<s;u++){for(var d=-1/0,p=u,h=u;h<e[u].length;h++){var f=o(e,u,h);f>d&&(d=f,p=h)}if(c[u]=p,p!==u)for(var a=0;a<e.length;a++){var m=e[a][p];e[a][p]=e[a][u],e[a][u]=m}for(var g=i(e,u,u,d),h=u;h<e[u].length;h++)r(g,e,h);l.push(g)}return{reflectors:l,r:e,p:c}}function s(e,t,r){for(var i=e.reflectors,o=e.r,a=e.p,s=t.slice(),c=0;c<i.length;c++)n(i[c],s);for(var c=i.length;c<o[0].length;c++)s[c]=0;s.length=o[0].length;for(var l=Math.pow(2,-52),u=r.regularize?l*Math.abs(o[0][0])*Math.max(o.length,o[0].length):0,c=i.length-1;c>=0;c--){var d=o[c];if(Math.abs(d[c])<=u)s[c]=0;else{for(var p=c+1;p<i.length;p++)s[c]-=s[p]*d[p];s[c]/=d[c]}}for(var c=a.length-1;c>=0;c--)if(a[c]!==c){var h=s[c];s[c]=s[a[c]],s[a[c]]=h}return s}function c(e,t,n){for(var r=Array(e.r[0].length),i=0;i<r.length;i++)r[i]=Array(t[0].length);for(var o=Array(t.length),a=0;a<t[0].length;a++){for(var i=0;i<t.length;i++)o[i]=t[i][a];for(var c=s(e,o,n),i=0;i<c.length;i++)r[i][a]=c[i]}return r}function l(e,t,n){return Array.isArray(t[0])?c(e,t,n):s(e,t,n)}function u(e){var t=e.r,n=Math.min(t.length,t[0].length),r=t[0][0],i=t[n-1][n-1];return 0===r?1/0:Math.abs(r/i)}function d(e){var t=Math.pow(2,-52);return Math.max(e.r.length,e.r[0].length)*t*u(e)<1}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumericallyFullRank=t.conditionNumber=t.qrSolve=t.qr=void 0,t.qr=a,t.qrSolve=l,t.conditionNumber=u,t.isNumericallyFullRank=d}),define("core/math/least-squares",["require","exports","numeric","core/math/distance","./qr"],function(e,t,n,r,i){"use strict";function o(e,t){for(var n=[],r=0;r<t;r++)n.push(e);return n}function a(e,t){for(var n=s(e,t),r=0,i=0,o=n;i<o.length;i++){var a=o[i],c=a;r+=c*c}return r/n.length}function s(e,t){return e.apply(void 0,t)}function c(e,t){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=o.apply(void 0,t);n.push(a)}return n}function l(e,t){for(var n=[],r=0;r<e.length;r++)t[r]&&n.push(e[r]);return n}function u(e,t,n){for(var r=[],i=0,o=0;i<e.length;i++){var a=0;n[i]&&(a=t[o],o+=1),r.push(e[i]+a)}return r}function d(e,t){var n=t.solution.map(function(e){return Math.abs(e)<1e-6?0:e}),r=a(e,n);return isFinite(t.MSE)&&!isFinite(t.MSE)?t:r<t.MSE||t.MSE!==t.MSE+Math.pow(.5,8)*(r-t.MSE)?t:{solution:n,MSE:r}}function p(e,t){for(var r=o(0,t.length),l=c(t,r),u=i.qr(n.transpose(l),{mutateInput:!0}),d=0;d<2;d++){var p=s(e,r),h=n.neg(i.qrSolve(u,p,{regularize:!1}));r=n.add(r,h)}var f=a(e,r);if(i.isNumericallyFullRank(u))return{solution:r,MSE:f};for(var m=o(0,t.length),d=0;d<2;d++){var p=s(e,m),h=n.neg(i.qrSolve(u,p,{regularize:!0}));m=n.add(m,h)}var g=a(e,m);return.999*g<=f?{solution:m,MSE:g}:{solution:r,MSE:f}}function h(e,t,r,d){var p,h=d.maxIterations,f=d.linearSubset||o(!1,r.length),m=n.not(f),g=l(t,f),y=l(t,m),v=r,b=0,x=.001;if(n.any(f)){var E=n.transpose(c(g,v)),w=i.qr(E);p={Jv:E,F:w};var _=s(e,v),S=n.neg(i.qrSolve(w,_,{regularize:!0}));v=u(v,S,f)}for(var M=!1,k=a(e,v);b<h&&!M&&isFinite(k);){var _=s(e,v),C=c(y,v),I=n.transpose(C),T=void 0,L=void 0;if(p){var w=p.F,E=p.Jv;T=n.dot(C,n.sub(_,n.dot(E,i.qrSolve(w,_,{regularize:!0})))),L=n.dot(C,n.sub(I,n.dot(E,i.qrSolve(w,I,{regularize:!0}))))}else T=n.dot(C,_),L=n.dot(C,I);for(var D=v,P=!1;b<h&&!M&&!P;){b+=1;var A=n.add(L,n.diag(o(x,y.length)));D=u(v,n.neg(n.solve(A,T,!0)),m),M=n.all(n.eq(D,v));var O=void 0;if(p){var E=n.transpose(c(g,D)),w=i.qr(E);O={Jv:E,F:w};var F=s(e,D),S=n.neg(i.qrSolve(w,F,{regularize:!0}));D=u(D,S,f)}var N=a(e,D);P=N<k,P?(v=D,k=N,p=O,x*=.1):(x=Math.max(x,1e-64),x*=2)}}return{solution:v,MSE:k}}function f(e,t,n,r){if(!t)return e;if("known"!==t.type)return e;var i=t.bounds;return i[0]===-1/0&&i[1]===1/0?e:i[0]===-1/0?i[1]-Math.exp(-e):i[1]===1/0?i[0]+Math.exp(e):n/(r-1)*i[1]+(r-1-n)/(r-1)*i[0]}function m(e,t){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],o=[],a=0;a<i.length;a++){var s=E[a%E.length]*r%e.length;o.push(f(i[a],t[a],s,e.length))}n.push(o)}return n}function g(e,t,n){n||(n={});var i=n.linearSubset,o=n.bounds,a=n.preferredInitialGuess,s=b(t.length);o&&(s=m(s,o));var c=x(e,t,s,5,{maxIterations:3,linearSubset:i}),l=x(e,t,c,1,{maxIterations:60,linearSubset:i}),u=h(e,t,l[0],{maxIterations:250,linearSubset:i});if(!a)return u;var d=h(e,t,a,{maxIterations:100,linearSubset:i});return isFinite(d.MSE)?d.MSE<u.MSE?d:r.approx(d.MSE,u.MSE,8)?d:u:u}Object.defineProperty(t,"__esModule",{value:!0}),t.testOnlyExports=t.optimizeNonLinear=t.optimizeLinear=t.tryRoundingSmallParametersToZero=t.evaluateMeanSquare=void 0,t.evaluateMeanSquare=a,t.tryRoundingSmallParametersToZero=d,t.optimizeLinear=p;var y=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500],v=function(e){return y[503*e%y.length]},b=function(e){for(var t=[],n=0;n<y.length;n++){for(var r=[],i=0;i<e;i++)r[i]=0===n&&1!==e?0:1===n&&1!==e?1:v(n*e+i);t.push(r)}return t},x=function(e,t,n,r,i){for(var o=[],a=0,s=n;a<s.length;a++){var c=s[a];o.push({soln:h(e,t,c,i),initialGuess:c})}o.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var l=[],u=0;u<r;u++)l.push(o[u].initialGuess);return l},E=[3,5,7,11,13,17,19];t.optimizeNonLinear=g,t.testOnlyExports={generateInitialGuesses:b,mapInitialGuesses:m}}),define("core/math/builtinconstants",["require","core/math/parsenode/constant","core/math/maybe-rational"],function(e){"use strict";var t=e("core/math/parsenode/constant"),n=e("core/math/maybe-rational").maybeRational;return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(n(1,1)),infty:t(1/0)}}),define("core/math/builtinframe",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";var t,n=e("core/math/builtinconstants"),r=e("core/math/parsenode/builtinfunction"),i={};for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);return i}),define("core/math/reparameterization",["require","exports","core/math/parsenode/constant","core/math/builtinframe","tslib","core/math/distance","core/math/policy"],function(e,t,n,r,i,o,a){"use strict";function s(e,t,n){var i=e.getPolynomialCoefficients(t).map(function(e){return e.getConcreteTree(a.defaultPolicy,r)});return(n-+i[0].asValue())/+i[1].asValue()}function c(e){return[o.hypot(e[0],e[1]),e[2],Math.atan2(e[1],e[0])]}function l(e){return[e[0]*Math.cos(e[2]),e[0]*Math.sin(e[2]),e[1]]}function u(e,t){var i={};for(var o in e)e[o].isConstant&&(i[o]=e[o]);var s=t.model;switch(s.type){case"trig":for(var c=l([s.amplitudeNode,s.frequencyNode,s.phaseNode].map(function(e){return+e.substitute(i).getConcreteTree(a.defaultPolicy,r).asValue()})),u=0;u<s.newParameterSymbols.length;u++)i[s.newParameterSymbols[u]]=n(c[u]);break;case"exp":if(s.intercept&&(i[s.intercept.newParameterSymbols[0]]=n(Math.log(s.intercept.sign*+s.intercept.node.substitute(i).getConcreteTree(a.defaultPolicy,r).asValue()))),s.base&&(i[s.base.newParameterSymbols[0]]=n(Math.log(+s.base.node.substitute(i).getConcreteTree(a.defaultPolicy,r).asValue()))),s.shiftScale)for(var d=s.shiftScale,h=d.mulNode,f=d.addNode,m=d.newParameterSymbols,g=d.stats,c=p([h,f].map(function(e){return+e.substitute(i).getConcreteTree(a.defaultPolicy,r).asValue()}),g),u=0;u<m.length;u++)i[m[u]]=n(c[u]);break;default:var y=s;throw new Error("Unexpected model type "+y.type)}for(var o in i)t.expression.dependsOn(o)||delete i[o];return i}function d(e,t){var n=t.range,r=t.midrange;return[e[0]/n,e[1]-r*e[0]/n]}function p(e,t){var n=t.range,r=t.midrange;return[n*e[0],e[1]+r*e[0]]}function h(e,t){return e.map(function(e){return t[e]?+t[e].asValue():NaN})}function f(e,t,r){e=i.__assign({},e);var o=t.model;switch(o.type){case"trig":for(var a=c(h(o.newParameterSymbols,e)),l=[o.amplitudeNode,o.frequencyNode,o.phaseNode],u=0;u<l.length;u++){var p=l[u].substitute(e),f=a[u],m=p.getDependencies()[0];e[m]=n(s(p,m,f))}break;case"exp":if(o.shiftScale)for(var g=o.shiftScale,y=g.mulNode,v=g.addNode,b=g.stats,x=g.newParameterSymbols,a=d(h(x,e),b),l=[y,v],u=0;u<l.length;u++){var p=l[u].substitute(e),f=a[u],m=p.getDependencies()[0];e[m]=n(s(p,m,f))}if(o.intercept){var E=o.intercept.node.getDependencies()[0],w=s(o.intercept.node,E,o.intercept.sign*Math.exp(+e[o.intercept.newParameterSymbols[0]].asValue()));e[E]=n(w)}if(o.base){var _=o.base.node.getDependencies()[0],S=s(o.base.node,_,Math.exp(+e[o.base.newParameterSymbols[0]].asValue()));e[_]=n(S)}break;default:var M=o;throw new Error("Unimplemented model "+M.type)}for(var k={},C=0,I=r;C<I.length;C++){var m=I[C];k[m]=e[m]}return k}Object.defineProperty(t,"__esModule",{value:!0}),t.solveForOriginalParameters=t.mapInitialGuesses=void 0,t.mapInitialGuesses=u,t.solveForOriginalParameters=f}),define("core/math/parsenode/regression",["require","pjs","./base","core/math/distance","core/math/builtin","core/lib/label","core/math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes","core/math/types","core/math/least-squares","core/math/reparameterization"],function(e){"use strict";var t=e("pjs"),n=e("./base"),r=e("core/math/distance"),i=e("core/math/builtin"),o=e("core/lib/label"),a=e("core/math/errormsg"),s=e("./error"),c=e("./optimizedregression"),l=e("./list"),u=e("./functioncall"),d=e("./identifier"),p=e("./constant"),h=e("./freevariable"),f=e("./expressionTypes"),m=e("core/math/types"),g=e("core/math/least-squares"),y=e("core/math/reparameterization"),v=y.solveForOriginalParameters,b=y.mapInitialGuesses,x=g.optimizeLinear,E=g.optimizeNonLinear,w=g.evaluateMeanSquare,_=f.Subtract;return t(n,function(e,t,n){function f(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t.boundDomain(e[r]));return n}function y(e,t,n){var r=[];t||(t={}),n||(n={});for(var i=0;i<e.length;i++){var a=e[i],s=o.identifierToLatex(a);n[a]&&isFinite(n[a].asValue())?r.push(+n[a].asValue()):t.hasOwnProperty(s)&&isFinite(t[s])?r.push(+t[s].asValue()):r.push(1)}return r}function S(e,t,n,r){var i,o,s=t.getDependencies();for(o=0;o<s.length;o++)if(!e.validRegressionParameter(s[o]))throw a.invalidRegressionParameter(s[o]);var c=t.getCompiledFunction(s).fn;if(s.length){var l=t.findLinearSubset(s),u=l.every(function(e){return e}),d=[];for(o=0;o<s.length;o++)d.push(t.takeDerivative(s[o]).getCompiledFunction(s).fn);if(u)i=g.tryRoundingSmallParametersToZero(c,x(c,d)),i.isLinear=!0;else{var p={linearSubset:l,bounds:f(s,t),preferredInitialGuess:y(s,n,r)};i=g.tryRoundingSmallParametersToZero(c,E(c,d,p)),i.isLinear=!1}}else i={solution:[],MSE:w(c,[]),isLinear:!0};return i}function M(e,t){for(var n={},r=t.getDependencies(),i=0;i<r.length;i++)n[r[i]]=p(e.solution[i]);return n}function k(e,t){return x(function(n,r){for(var i=[],o=0;o<e.length;o++)i.push(t[o]-(n*e[o]+r));return i},[function(){return e.map(function(e){return-e})},function(){return e.map(function(){return-1})}],[0,0])}function C(e,t){var n=e.length,i=e[0],o=t[0],a=e[n-1],s=t[n-1];if(!(isFinite(i)&&isFinite(a)&&isFinite(o)&&isFinite(s)))return!1;if(s-o==0)return!1;var c=a-i;if(0===c)return!1;for(var l=1;l<n-1;l++){var u=e[l],d=t[l],p=(s*(u-i)+o*(a-u))/c;if(!r.approx(d,p,5))return!1}return!0}function I(e,t,n,r){var i=Object.create(n);for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return l.wrap(t.getConcreteTree(e,i))}function T(e,t){var n=0;return t.eachElement(e,function(e){var t=e.asValue();n+=t*t}),n/t.length}function L(e,t,n,r,i){var o,a=n.reparameterizeRegression();if(!a||0===a.length)return n=n.deriveRegressionRestrictions(),o=S(e,n,r,i),{parameters:M(o,n),isLinear:o.isLinear,parameterWarning:!1};for(var s=n.getDependencies(),c=1/0,l={},u=!1,d=0;d<a.length;d++){var p=a[d],h=p.expression;if(h=h.deriveRegressionRestrictions(),o=S(e,h,b(r,p),b(i,p)),o.MSE<c){var f=M(o,h),m=v(f,p,s),g=T(e,I(e,n.substitute(m),t,m));if(l&&(!isFinite(g)||g>=c)){isFinite(g)||(u=!0);continue}c=o.MSE,l=m}}return{parameters:l,isLinear:!1,parameterWarning:u}}function D(e){var t={};for(var n in e)t[n]=p(e[n]);return t}e.init=function(e,n){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof d,this._logLhs=u("ln",[e]),this._rhs=n,this._difference=_([e,n]),this._logDifference=_([u("ln",[e]),u("ln",[n])]),this.mergeDependencies(e,n)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=o.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var n,r=this.getDependencies(),i=0;i<r.length;i++){var a=r[i].match(/_(.*)/);if(a&&(n="e_"+a[1],!e[n]))return n}for(var s=1;;){if(n="e_"+s,!e[n])return n;s++}},e.getRHSModel=function(e,t,n){for(var r,i,o=this._rhs.getDependencies(),a=0;a<o.length;a++){var s=o[a];if(t[s]&&t[s].tryGetConcreteTree){var c=t[s].tryGetConcreteTree(e,t);if(!c.isError&&c.valueType===m.ListOfNumber){if(void 0!==r){r=void 0;break}0===c.getDependencies().length&&(r=s,i=c)}}}var l=Object.create(t);void 0!==r&&(l[r]=h(this.tmpVar()));var u=this._rhs.tryGetConcreteTree(e,l);return{node:u,substituted:u.isError?u:u.substitute(n),listNode:i,isValid:void 0!==r}},e.computeStatistics=function(e,t,n,o,s,c){if(o.getDependencies().length)throw a.optimizationError();var u=T(e,o);if(!isFinite(u))throw a.optimizationError();if(t.getDependencies().length>0)return{RMSE:Math.sqrt(u)};var d=m.isList(t.valueType)?i.varp(t.asValue()):0;if(t.getDependencies().length||!isFinite(d)||d<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(u)};var p=1-u/d;if(n.isValid){var h=[],f=[],g=s&&(c===P.LINLOG||c===P.LOGLOG);l.eachArgs(e,[n.listNode,t],function(e){h.push(g?Math.log(e[0].asValue()):+e[0].asValue()),f.push(+e[1].asValue())});var y=i.corr(h,f);if(r.approx(k(h,f).MSE,u,8))return{r:y,rsquared:y*y}}return{Rsquared:p}},e.getResidualSuggestionId=function(e,t){var n,r=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var o=t[i].rawTree.columns
;if(o&&o.length){var a=o[0].getExports();if(1===a.length&&-1!==r.indexOf(a[0])){for(var s=1;s<o.length;s++)if(-1!==o[s].getDependencies().indexOf(e))return;n=n||i}}}return n||void 0};var P={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t,n){if(!this.isLhsSimple)return P.NONE;if(!n.isValid)return P.NONE;var r=n.substituted;if(r.isError)return P.NONE;if(r.valueType!==m.Number)return P.NONE;var i=r.getDependencies();if(1!==i.length)return P.NONE;if(isFinite(n.node.polynomialOrder(i[0])))return P.NONE;var o=r.getCompiledFunction(i).fn,a=n.listNode;if(r.valueType!==m.Number)return P.NONE;var s=a.mapElements(e,function(e){return+e.asValue()});if(s.length<3)return P.NONE;s.sort(function(e,t){return e-t});var c=s.map(o),u=c.map(Math.log),d=s.map(Math.log),p=!0;return l.wrap(t).eachElement(e,function(e){isFinite(Math.log(+e.asValue()))||(p=!1)}),C(s,u)&&p?P.LOGLIN:C(d,u)&&p?P.LOGLOG:C(d,c)?P.LINLOG:P.NONE},e.optimize=function(e,t,n,r,i){var a=this._lhs.getConcreteTree(e,t),s=this._rhs.getConcreteTree(e,t);this.typeCheck(e,[a,s]);var u,d=D(this.userData.regressionParameters),p=l.wrap(this._difference.getConcreteTree(e,t)),h=L(e,t,p,d,r),f=h.parameters,m=h.isLinear,g=this.getRHSModel(e,t,f),y=I(e,this._difference,t,f),v=this.linearizingTransformation(e,a,g);if(!this.userData.isLogModeRegression||v!==P.LOGLIN&&v!==P.LOGLOG)u=this.computeStatistics(e,a,g,y,this.userData.isLogModeRegression,v);else{var b=this._logDifference.getConcreteTree(e,t),x=this._logLhs.getConcreteTree(e,t);h=L(e,t,b,d,r),f=h.parameters,m=h.isLinear,g=this.getRHSModel(e,t,f),y=I(e,this._difference,t,f);var E=I(e,this._logDifference,t,f);u=this.computeStatistics(e,x,g,E,this.userData.isLogModeRegression,v)}var w=this.chooseResidualVariable(n),_=this.getResidualSuggestionId(w,i);return this.userData.residualVariable=o.identifierToLatex(w),c(f,y,u,g.substituted,{isModelValid:g.isValid,residualVariable:w,residualSuggestionId:_,shouldSuggestLogMode:v!==P.NONE,isLinear:m,parameterWarning:h.parameterWarning})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){return e instanceof s?e:a.parseError()}},e.exportTo=function(e,t,n){if(!t.isError){for(var r in t.parameters)t.parameters.hasOwnProperty(r)&&(e.assignmentForbidden(r)||(n[r]=n[r]?a.multiplyDefined(r):t.parameters[r]));e.assignmentForbidden(t.residualVariable)||(n[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("core/math/parsenode/image",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t,n,r){e.isImage=!0,e.init=function(e,n){t.init.call(this),this.center=e.center,this.radianAngle=e.radianAngle,this.width=e.width,this.height=e.height,this.opacity=e.opacity,this.moveStrategy=n,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}})}),define("core/math/parsenode/slider",["require","pjs","./assignment","./identifier"],function(e){"use strict";var t=e("pjs"),n=e("./assignment"),r=e("./identifier");return t(n,function(e,t,i,o){e.isSlider=!0,e.init=function(e,n){t.init.call(this,r(e._symbol),e._expression),this.setInputSpan(e._inputSpan),this.sliderAssignment=e,this.sliderMin=n.sliderMin,this.sliderMax=n.sliderMax,this.sliderSoftMin=n.sliderSoftMin,this.sliderSoftMax=n.sliderSoftMax,this.sliderStep=n.sliderStep,this.sliderIsPlayingOnce=n.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)},e.shouldPromoteToSlider=function(e){return!1},e.asAssignment=function(){return n(this._symbol,this._expression)}})}),define("core/math/parsenode/table",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[],this.mergeDependencies.apply(this,e);for(var n=0;n<e.length;n++)Array.prototype.push.apply(this._exports,e[n].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,n){for(var r=0;r<this.columns.length;r++){var i=this.columns[r].getExports();if(i.length){var o=i[0];e.assignmentForbidden(o)||n[o]||(t.isError?n[o]=t:this.columns[r].exportTo(e,t.columns[r],n))}}},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("core/math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier"],function(e){"use strict";var t=e("pjs"),n=e("./base"),r=e("./list"),i=e("./constant"),o=e("./identifier");return t(n,function(e,t){function a(e){return e.isError?i(NaN):e}e.init=function(e,n,r){t.init.call(this),this.header=e,this.length=n,this.values=r,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof o?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var o=e[0];if(t.isError)i[o]=t;else try{i[o]=r(t.values.map(a))}catch(e){if(!(e instanceof n))throw e;i[o]=e}}},e.exportTo=function(e,t,n){var r=this.getLegalExports(e);this._exportSymbolsTo(r,t,n)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("core/math/parsenode/solvedequation",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e,n){t.init.call(this),this._symbol=e,this._expression=n,this.mergeDependencies(n)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("core/math/parsenode/seed",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){"string"!=typeof e&&(e=""+e),this._stringValue=e,t.init.call(this,[])},e.isString=!0,e.getEvalStrings=function(){return{statements:[],expression:"'"+this.asValue()+"'"}},e.asValue=function(){return this._stringValue}})}),define("core/math/parsenode/extendseed",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,n){t.init.call(this,n),this.seed=n[0],this.userSeed=n[1],this.tag=e},e.getEvalStrings=function(){var e=this.seed.getEvalStrings(),t=this.userSeed.getEvalStrings(),n=[];return Array.prototype.push.apply(n,e.statements),Array.prototype.push.apply(n,t.statements),{statements:n,expression:"("+e.expression+") + '::"+this.tag+"' + ("+t.expression+")"}},e.asValue=function(){return this.seed.asValue()+"::"+this.tag+this.userSeed.asValue()},e.copyWithArgs=function(e){return new this.constructor(this.tag,e)}})}),define("parsenodes",["require","core/math/parsenode/expressionTypes","core/math/parsenode/base","core/math/parsenode/expression","core/math/parsenode/scalarexpression","core/math/parsenode/error","core/math/parsenode/constant","core/math/parsenode/mixednumber","core/math/parsenode/identifier","core/math/parsenode/ans","core/math/parsenode/freevariable","core/math/parsenode/dummyindex","core/math/parsenode/list","core/math/parsenode/range","core/math/parsenode/broadcast","core/math/parsenode/listaccess","core/math/parsenode/dotaccess","core/math/parsenode/dotaccessexponent","core/math/parsenode/orderedpair","core/math/parsenode/movablepoint","core/math/parsenode/orderedpairaccess","core/math/parsenode/polygon","core/math/parsenode/basecomparator","core/math/parsenode/comparator","core/math/parsenode/doubleinequality","core/math/parsenode/repeatedoperator","core/math/parsenode/sum","core/math/parsenode/product","core/math/parsenode/integral","core/math/parsenode/functioncall","core/math/parsenode/seededfunctioncall","core/math/parsenode/functionexponent","core/math/parsenode/functionfactorial","core/math/parsenode/prime","core/math/parsenode/piecewise","core/math/parsenode/derivative","core/math/parsenode/builtinfunction","core/math/parsenode/nativefunction","core/math/parsenode/typedfunction","core/math/parsenode/reducerfunction","core/math/parsenode/parametrizedreducerfunction","core/math/parsenode/doublereducerfunction","core/math/parsenode/toplevelfunction","core/math/parsenode/distribution","core/math/parsenode/histogram","core/math/parsenode/object3d","core/math/parsenode/dotplot","core/math/parsenode/boxplot","core/math/parsenode/ttest","core/math/parsenode/independent-ttest","core/math/parsenode/stats","core/math/parsenode/assignment","core/math/parsenode/functiondefinition","core/math/parsenode/equation","core/math/parsenode/regression","core/math/parsenode/image","core/math/parsenode/slider","core/math/parsenode/table","core/math/parsenode/tablecolumn","core/math/parsenode/solvedequation","core/math/parsenode/optimizedregression","core/math/parsenode/seed","core/math/parsenode/extendseed"],function(e){"use strict";var t=e("core/math/parsenode/expressionTypes"),n={Base:e("core/math/parsenode/base"),Expression:e("core/math/parsenode/expression"),ScalarExpression:e("core/math/parsenode/scalarexpression"),Error:e("core/math/parsenode/error"),Constant:e("core/math/parsenode/constant"),MixedNumber:e("core/math/parsenode/mixednumber"),Identifier:e("core/math/parsenode/identifier"),Ans:e("core/math/parsenode/ans"),FreeVariable:e("core/math/parsenode/freevariable"),DummyIndex:e("core/math/parsenode/dummyindex"),List:e("core/math/parsenode/list"),Range:e("core/math/parsenode/range"),Broadcast:e("core/math/parsenode/broadcast"),ListAccess:e("core/math/parsenode/listaccess"),DotAccess:e("core/math/parsenode/dotaccess"),DotAccessExponent:e("core/math/parsenode/dotaccessexponent"),OrderedPair:e("core/math/parsenode/orderedpair"),MovablePoint:e("core/math/parsenode/movablepoint"),OrderedPairAccess:e("core/math/parsenode/orderedpairaccess"),Polygon:e("core/math/parsenode/polygon"),BaseComparator:e("core/math/parsenode/basecomparator"),Comparator:e("core/math/parsenode/comparator"),DoubleInequality:e("core/math/parsenode/doubleinequality"),RepeatedOperator:e("core/math/parsenode/repeatedoperator"),Sum:e("core/math/parsenode/sum"),Product:e("core/math/parsenode/product"),Integral:e("core/math/parsenode/integral"),FunctionCall:e("core/math/parsenode/functioncall"),SeededFunctionCall:e("core/math/parsenode/seededfunctioncall"),FunctionExponent:e("core/math/parsenode/functionexponent"),FunctionFactorial:e("core/math/parsenode/functionfactorial"),Prime:e("core/math/parsenode/prime"),Piecewise:e("core/math/parsenode/piecewise"),Derivative:e("core/math/parsenode/derivative"),BuiltInFunction:e("core/math/parsenode/builtinfunction"),NativeFunction:e("core/math/parsenode/nativefunction"),TypedFunction:e("core/math/parsenode/typedfunction"),ReducerFunction:e("core/math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("core/math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("core/math/parsenode/doublereducerfunction"),TopLevelFunction:e("core/math/parsenode/toplevelfunction"),Distribution:e("core/math/parsenode/distribution"),Histogram:e("core/math/parsenode/histogram"),Object3D:e("core/math/parsenode/object3d"),DotPlot:e("core/math/parsenode/dotplot"),BoxPlot:e("core/math/parsenode/boxplot"),TTest:e("core/math/parsenode/ttest"),IndependentTTest:e("core/math/parsenode/independent-ttest"),Stats:e("core/math/parsenode/stats"),Assignment:e("core/math/parsenode/assignment"),FunctionDefinition:e("core/math/parsenode/functiondefinition"),Equation:e("core/math/parsenode/equation"),Regression:e("core/math/parsenode/regression"),Image:e("core/math/parsenode/image"),Slider:e("core/math/parsenode/slider"),Table:e("core/math/parsenode/table"),TableColumn:e("core/math/parsenode/tablecolumn"),SolvedEquation:e("core/math/parsenode/solvedequation"),OptimizedRegression:e("core/math/parsenode/optimizedregression"),Seed:e("core/math/parsenode/seed"),ExtendSeed:e("core/math/parsenode/extendseed")};for(var r in t)n[r]=t[r];for(var i in n)n.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(n[i].prototype.type=i);for(var o in n.Comparator)n.Comparator.hasOwnProperty(o)&&(n.Comparator[o].prototype.type="Comparator['"+o+"']");for(var a in n.BuiltInFunction)n.BuiltInFunction.hasOwnProperty(a)&&(n.BuiltInFunction[a].prototype.type="BuiltInFunction['"+a+"']");return n}),define("core/math/parser/char-codes",["require","exports"],function(e,t){"use strict";function n(e){return 48<=e&&e<=57}function r(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}function o(e){return r(e)||i(e)}function a(e){return 92===e}function s(e){return 46===e}function c(e){return 39===e}function l(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isWhitespace=t.isSingleQuote=t.isDot=t.isBackslash=t.isLetter=t.isUpperCaseLetter=t.isLowerCaseLetter=t.isDigit=void 0,t.isDigit=n,t.isLowerCaseLetter=r,t.isUpperCaseLetter=i,t.isLetter=o,t.isBackslash=a,t.isDot=s,t.isSingleQuote=c,t.isWhitespace=l}),define("core/math/parser/latex-lexer",["require","exports","./char-codes","./input-span"],function(e,t,n,r){"use strict";function i(e,t){return r.joinSpans(e.token.span,t.prevSpan)}function o(e,t,n){return{type:e,span:t,val:n}}function a(e,t,n,r){return{input:e,prevSpan:t,pos:n,token:r}}function s(e){return c(e,0,r.emptySpanAt(e,0))}function c(e,t,r){for(;n.isWhitespace(e.charCodeAt(t));)t+=1;return a(e,r,t,f(e,t))}function l(e){return c(e.input,e.token.span.end,e.token.span)}function u(e){return e.token}function d(e,t){if(u(e).type!==t)throw"Parse Error: expected "+t+".";return l(e)}function p(e,t){return u(e).type===t}function h(e){return e.pos>=e.input.length}function f(e,t){var i=t;if(t>=e.length)return o("End",r.emptySpanAt(e,t),"");var a=e.charCodeAt(t);if(n.isDigit(a)){var s=r.Span(e,i,t+1);return o("Digit",s,e.charAt(i))}if(n.isLetter(a)){var s=r.Span(e,i,t+1);return o("Letter",s,e.charAt(i))}if(n.isBackslash(a)){if(t+=1,n.isLetter(e.charCodeAt(t))){for(;n.isLetter(e.charCodeAt(t));)t+=1;var s=r.Span(e,i,t),c=r.slice(s),l=m[c]||"Cmd";return o(l,s,c)}t+=1;var s=r.Span(e,i,t),c=r.slice(s);return o("EscapedSymbol",s,c)}if(n.isSingleQuote(a)){for(t+=1;n.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;var s=r.Span(e,i,t),c=r.slice(s);return o("Primes^",s,c)}var s=r.Span(e,i,t),c=r.slice(s);return o("Primes",s,c)}var s=r.Span(e,i,t+1),c=e.charAt(i),l=g[c]||"Symbol";return o(l,s,c)}Object.defineProperty(t,"__esModule",{value:!0}),t.isDone=t.isAt=t.eat=t.peek=t.advance=t.lex=t.LatexToken=t.spanStates=void 0,t.spanStates=i,t.LatexToken=o,t.lex=s,t.advance=l,t.peek=u,t.eat=d,t.isAt=p,t.isDone=h;var m={"\\left":"Left","\\right":"Right","\\sqrt":"Sqrt","\\frac":"Frac","\\operatorname":"OperatorName"},g={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}}),define("core/math/parser/latex-node",["require","exports"],function(e,t){"use strict";function n(e,t){return{type:"Group",span:e,args:t}}function r(e,t,n){return{type:"Sqrt",span:e,optArg:t,arg:n}}function i(e,t,n){return{type:"Frac",span:e,num:t,den:n}}function o(e,t,n,r){return{type:"SupSub",span:e,sup:t,sub:n,nprimes:r}}function a(e,t,n,r){return{type:"LeftRight",span:e,left:t,right:n,arg:r}}function s(e,t){return{type:"OperatorName",span:e,arg:t}}function c(e,t){return{type:"Symbol",span:e,val:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Symbol=t.OperatorName=t.LeftRight=t.SupSub=t.Frac=t.Sqrt=t.Group=void 0,t.Group=n,t.Sqrt=r,t.Frac=i,t.SupSub=o,t.LeftRight=a,t.OperatorName=s,t.Symbol=c}),define("core/math/parser/latex-parser",["require","exports","./latex-lexer","./input-span","./latex-node"],function(e,t,n,r,i){"use strict";function o(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function a(e){var t=c(n.lex(e),!1),i=t.state,o=t.tree;if(!n.isDone(i))throw"Parse error: unexpected "+r.slice(n.peek(i).span)+".";return o}function s(e,t){return{state:e,tree:t}}function c(e,t){var r,o=e,a=[];e:for(;!n.isDone(e);){var c=n.peek(e);switch(c.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===c.type&&t)break e;var u=void 0;if(r=l(e),e=r.state,u=r.tree,"Group"===u.type)for(var d=0,p=u.args;d<p.length;d++){var h=p[d];a.push(h)}else a.push(u);break;case"}":case"Right":case"End":break e;default:var f=c.type;throw"Unexpected token type "+f+"."}}var m=n.spanStates(o,e);return s(e,i.Group(m,a))}function l(e){var t,r=n.peek(e);switch(r.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return e=n.advance(e),s(e,r);case"[":case"]":return e=n.advance(e),s(e,i.Symbol(r.span,r.val));case"{":e=n.advance(e);var o=void 0;return t=c(e,!1),e=t.state,o=t.tree,e=n.eat(e,"}"),s(e,o);case"^":case"_":case"Primes":case"Primes^":return f(e);case"Left":return h(e);case"Frac":return p(e);case"Sqrt":return d(e);case"OperatorName":return u(e);case"}":case"Right":throw"Parse Error: unexpected "+r.val+".";case"End":throw"Parse Error: unexpected end.";default:throw"Unexpected token type "+r.type+"."}}function u(e){var t,r=e,o=n.peek(e);e=n.eat(e,"OperatorName");var a;t=m(e,o),e=t.state,a=t.tree;var c=n.spanStates(r,e);return s(e,i.OperatorName(c,a))}function d(e){var t,r,o=e,a=n.peek(e);e=n.eat(e,"Sqrt");var c;n.isAt(e,"[")&&(t=g(e),e=t.state,c=t.tree);var l;r=m(e,a),e=r.state,l=r.tree;var u=n.spanStates(o,e);return s(e,i.Sqrt(u,c,l))}function p(e){var t,r,o=e,a=n.peek(e);e=n.eat(e,"Frac");var c;t=m(e,a),e=t.state,c=t.tree;var l;r=m(e,a),e=r.state,l=r.tree;var u=n.spanStates(o,e);return s(e,i.Frac(u,c,l))}function h(e){var t,r=e;e=n.eat(e,"Left");var o=n.peek(e);e=n.advance(e);var a;t=c(e,!1),e=t.state,a=t.tree,e=n.eat(e,"Right");var l=n.peek(e);e=n.advance(e);var u=n.spanStates(r,e);return s(e,i.LeftRight(u,o,l,a))}function f(e){var t,r,o,a,c,l=e,u=0;e:for(;!n.isDone(e);){var d=n.peek(e);switch(d.type){case"^":if(e=n.advance(e),a)throw"Parse Error: double superscript.";t=m(e,d),e=t.state,a=t.tree;break;case"_":if(e=n.advance(e),c)throw"Parse Error: double subscript.";r=m(e,d),e=r.state,c=r.tree;break;case"Primes":if(e=n.advance(e),u>0)throw"Parse Error: double primes.";u=d.val.length;break;case"Primes^":if(e=n.advance(e),u>0)throw"Parse Error: double primes.";if(a)throw"Parse Error: double superscript";u=d.val.length-1,o=m(e,d),e=o.state,a=o.tree;break;default:break e}}var p=n.spanStates(l,e);return s(e,i.SupSub(p,a,c,u))}function m(e,t){var a,c,u=o(t.type);if(u<=0)throw new Error("Programming Error: greediness must be greater than 0.");var d=o(n.peek(e).type);if(d>0&&d<=u){var p=r.slice(t.span);throw"Parse Error: can't use "+r.slice(n.peek(e).span)+" as argument of "+p+". Use {}."}return a=l(e),e=a.state,c=a.tree,"Group"!==c.type&&(c=i.Group(c.span,[c])),s(e,c)}function g(e){var t;e=n.eat(e,"[");var r;return t=c(e,!0),e=t.state,r=t.tree,e=n.eat(e,"]"),s(e,r)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0,t.parse=a}),define("core/math/parser/command-aliases",["require","exports","./char-codes"],function(e,t,n){"use strict";function r(e){for(var t=0;n.isBackslash(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),i[e]||e}Object.defineProperty(t,"__esModule",{value:!0}),t.translateCmd=void 0;var i={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile"};t.translateCmd=r}),define("core/math/parser/surface-node",["require","exports","./command-aliases"],function(e,t,n){"use strict";function r(e,t){return{type:"Equals",span:e,args:t}}function i(e,t,n){return{type:"Inequality",span:e,symbol:t,args:n}}function o(e,t,n){return{type:"TrailingInequalityPiece",span:e,symbol:t,args:n}}function a(e,t,n){return{type:"InequalityChain",span:e,first:t,chain:n}}function s(e,t){return{type:"Tilde",span:e,args:t}}function c(e,t){return{type:"Pos",span:e,args:t}}function l(e,t){return{type:"Neg",span:e,args:t}}function u(e,t){return{type:"Add",span:e,args:t}}function d(e,t){return{type:"Sub",span:e,args:t}}function p(e,t){return{type:"Mul",span:e,args:t}}function h(e,t){return{type:"Div",span:e,args:t}}function f(e,t){return{type:"Bang",span:e,args:t}}function m(e,t){return{type:"Call",span:e,args:t}}function g(e,t){return{type:"ImplicitCall",span:e,args:t}}function y(e,t){return{type:"Index",span:e,args:t}}function v(e,t){return{type:"Paren",span:e,args:t}}function b(e,t){return{type:"List",span:e,args:t}}function x(e,t){return{type:"Pipes",span:e,args:t}}function E(e,t){return{type:"Subscript",span:e,args:t}}function w(e,t){return{type:"Superscript",span:e,args:t}}function _(e,t,n){return{type:"Prime",span:e,nprimes:t,args:n}}function S(e,t){return{type:"Seq",span:e,args:t}}function M(e,t){return{type:"Sqrt",span:e,args:t}}function k(e,t){return{type:"Nthroot",span:e,args:t}}function C(e,t){return{type:"Frac",span:e,args:t}}function I(e,t){return{type:"Derivative",span:e,args:t}}function T(e,t){return{type:"Integral",span:e,args:t}}function L(e,t){return{type:"EmptyIntegral",span:e,args:t}}function D(e,t){return{type:"Sum",span:e,args:t}}function P(e,t){return{type:"Product",span:e,args:t}}function A(e,t){return{type:"Piecewise",span:e,args:t}}function O(e){return{type:"EmptyPiecewise",span:e}}function F(e){return{type:"EmptyRangeEnd",span:e}}function N(e,t){return{type:"Colon",span:e,args:t}}function q(e,t){return{type:"Ellipsis",span:e,args:t}}function R(e,t){return{type:"Dot",span:e,args:t}}function B(e,t){return{type:"PercentOf",span:e,args:t}}function j(e,t){return{type:"Juxt",span:e,args:t}}function V(e,t){return{type:"Letter",span:e,val:t}}function U(e,t){return{type:"Decimal",span:e,val:t}}function G(e,t){return{type:"Cmd",span:e,val:n.translateCmd(t)}}function z(e,t){return{type:"Alphanumeric",span:e,val:t}}function H(e,t,n,r){return{type:"MixedNumber",span:e,whole:t,num:n,den:r}}function W(e){if("Subscript"===e.type){if("Alphanumeric"!==e.args[1].type)return!1;e=e.args[0]}switch(e.type){case"Cmd":case"Letter":return!0;default:return!1}}function K(e){return"Superscript"===e.type&&W(e.args[0])}function Y(e,t){if("Letter"!==e.type||"d"!==e.val)return!1;if("Juxt"!==t.type)return!1;var n=t.args,r=n[0],i=n[1];return"Letter"===r.type&&"d"===r.val&&W(i)}function X(e){return"Seq"===e.type?e.args:[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapSeq=t.isDerivative=t.isSuperscriptedIdentifier=t.isIdentifier=t.MixedNumber=t.Alphanumeric=t.Cmd=t.Decimal=t.Letter=t.Juxt=t.PercentOf=t.Dot=t.Ellipsis=t.Colon=t.EmptyRangeEnd=t.EmptyPiecewise=t.Piecewise=t.Product=t.Sum=t.EmptyIntegral=t.Integral=t.Derivative=t.Frac=t.Nthroot=t.Sqrt=t.Seq=t.Prime=t.Superscript=t.Subscript=t.Pipes=t.List=t.Paren=t.Index=t.ImplicitCall=t.Call=t.Bang=t.Div=t.Mul=t.Sub=t.Add=t.Neg=t.Pos=t.Tilde=t.InequalityChain=t.TrailingInequalityPiece=t.Inequality=t.Equals=void 0,t.Equals=r,t.Inequality=i,t.TrailingInequalityPiece=o,t.InequalityChain=a,t.Tilde=s,t.Pos=c,t.Neg=l,t.Add=u,t.Sub=d,t.Mul=p,t.Div=h,t.Bang=f,t.Call=m,t.ImplicitCall=g,t.Index=y,t.Paren=v,t.List=b,t.Pipes=x,t.Subscript=E,t.Superscript=w,t.Prime=_,t.Seq=S,t.Sqrt=M,t.Nthroot=k,t.Frac=C,t.Derivative=I,t.Integral=T,t.EmptyIntegral=L,t.Sum=D,t.Product=P,t.Piecewise=A,t.EmptyPiecewise=O,t.EmptyRangeEnd=F,t.Colon=N,t.Ellipsis=q,t.Dot=R,t.PercentOf=B,t.Juxt=j,t.Letter=V,t.Decimal=U,t.Cmd=G,t.Alphanumeric=z,t.MixedNumber=H,t.isIdentifier=W,t.isSuperscriptedIdentifier=K,t.isDerivative=Y,t.unwrapSeq=X}),define("core/math/parser/surface-node-error",["require","exports"],function(e,t){"use strict";function n(e,t){return{type:"Err",span:e,error:t}}function r(){return{type:"UnexpectedParseError"}}function i(){return{type:"EmptyInput"}}function o(){return{type:"EmptyGroup"}}function a(){return{type:"EmptySubscript"}}function s(){return{type:"EmptySuperscript"}}function c(){return{type:"EmptyRadical"}}function l(){return{type:"EmptySquareBracket"}}function u(){return{type:"EmptyPipe"}}function d(){return{type:"EmptyRadicalIndex"}}function p(){return{type:"UnexpectedEnd"}}function h(e){return{type:"BinaryOperatorMissingRight",val:e}}function f(e){return{type:"BinaryOperatorMissingLeft",val:e}}function m(e){return{type:"UnaryOperatorMissingRight",val:e}}function g(e){return{type:"UnaryOperatorMissingLeft",val:e}}function y(e,t){return{type:"MissingCloseDelimiter",open:e,close:t}}function v(e,t){return{type:"UnexpectedCloseDelimiter",open:e,close:t}}function b(){return{type:"UnexpectedDifferential"}}function x(e){return{type:"UnrecognizedSymbol",val:e}}function E(e){return{type:"InvalidOperatorName",val:e}}function w(e){return{type:"InvalidSubscript",val:e}}function _(e){return{type:"UnexpectedSubscript",base:e}}function S(e){return{type:"FunctionMissingArgument",val:e}}function M(){return{type:"PercentMissingOf"}}function k(){return{type:"PrimeWithoutParen"}}function C(){return{type:"SuperscriptWithPrime"}}function I(){return{type:"UnexpectedPrime"}}function T(){return{type:"SumMissingBound"}}function L(){return{type:"ProductMissingBound"}}function D(){return{type:"MissingBound"}}function P(){return{type:"IntegralMissingBound"}}function A(){return{type:"SumMissingBody"}}function O(){return{type:"ProductMissingBody"}}function F(){return{type:"IntegralMissingBody"}}function N(){return{type:"DerivativeMissingBody"}}function q(){return{type:"IntegralMissingDifferential"}}function R(){return{type:"DifferentialWithSuperscript"}}function B(){return{type:"FractionMissingNumerator"}}function j(){return{type:"FractionMissingDenominator"}}function V(){return{type:"FractionEmpty"}}function U(e){return{type:"AdjacentNumbers",args:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AdjacentNumbers=t.FractionEmpty=t.FractionMissingDenominator=t.FractionMissingNumerator=t.DifferentialWithSuperscript=t.IntegralMissingDifferential=t.DerivativeMissingBody=t.IntegralMissingBody=t.ProductMissingBody=t.SumMissingBody=t.IntegralMissingBound=t.MissingBound=t.ProductMissingBound=t.SumMissingBound=t.UnexpectedPrime=t.SuperscriptWithPrime=t.PrimeWithoutParen=t.PercentMissingOf=t.FunctionMissingArgument=t.UnexpectedSubscript=t.InvalidSubscript=t.InvalidOperatorName=t.UnrecognizedSymbol=t.UnexpectedDifferential=t.UnexpectedCloseDelimiter=t.MissingCloseDelimiter=t.UnaryOperatorMissingLeft=t.UnaryOperatorMissingRight=t.BinaryOperatorMissingLeft=t.BinaryOperatorMissingRight=t.UnexpectedEnd=t.EmptyRadicalIndex=t.EmptyPipe=t.EmptySquareBracket=t.EmptyRadical=t.EmptySuperscript=t.EmptySubscript=t.EmptyGroup=t.EmptyInput=t.UnexpectedParseError=t.Err=void 0,t.Err=n,t.UnexpectedParseError=r,t.EmptyInput=i,t.EmptyGroup=o,t.EmptySubscript=a,t.EmptySuperscript=s,t.EmptyRadical=c,t.EmptySquareBracket=l,t.EmptyPipe=u,t.EmptyRadicalIndex=d,t.UnexpectedEnd=p,t.BinaryOperatorMissingRight=h,t.BinaryOperatorMissingLeft=f,t.UnaryOperatorMissingRight=m,t.UnaryOperatorMissingLeft=g,t.MissingCloseDelimiter=y,t.UnexpectedCloseDelimiter=v,t.UnexpectedDifferential=b,t.UnrecognizedSymbol=x,t.InvalidOperatorName=E,t.InvalidSubscript=w,t.UnexpectedSubscript=_,t.FunctionMissingArgument=S,t.PercentMissingOf=M,t.PrimeWithoutParen=k,t.SuperscriptWithPrime=C,t.UnexpectedPrime=I,t.SumMissingBound=T,t.ProductMissingBound=L,t.MissingBound=D,t.IntegralMissingBound=P,t.SumMissingBody=A,t.ProductMissingBody=O,t.IntegralMissingBody=F,t.DerivativeMissingBody=N,t.IntegralMissingDifferential=q,t.DifferentialWithSuperscript=R,t.FractionMissingNumerator=B,t.FractionMissingDenominator=j,t.FractionEmpty=V,t.AdjacentNumbers=U}),define("core/math/parser/expression-token-tables",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allTokenTypes=t.rightTable=t.leftTable=t.escapedSymbolTable=t.symbolTable=t.commandTable=void 0;var n={"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\{":!0,"\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,".":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0};t.commandTable={"\\lt":"<","\\gt":">","\\le":"<=","\\ge":">=","\\ldots":"...","\\sim":"~","\\cdot":"*","\\times":"*","\\div":"/","\\ln":"Ln","\\log":"Log","\\int":"Int","\\sum":"Sum","\\prod":"Prod","\\backslash":"Err"};for(var r=["sin","cos","tan","cot","sec","csc"],i=0,o=r;i<o.length;i++){var a=o[i];t.commandTable["\\"+a]="Trig",t.commandTable["\\"+a+"h"]="Trig",t.commandTable["\\arc"+a]="Trig",t.commandTable["\\arc"+a+"h"]="Trig"}t.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},t.escapedSymbolTable={"\\{":"\\{","\\}":"\\}","\\%":"%"},t.leftTable={"|":"(|","\\{":"\\{","[":"[","(":"("},t.rightTable={"|":"|)","\\}":"\\}","]":"]",")":")"},t.allTokenTypes=Object.keys(n)}),define("core/math/parser/expression-lexer",["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(e,t,n,r,i,o){"use strict";function a(e,t,n,r,i,o,a,s){return{opts:e,input:t,prevSpan:n,startIndex:r,endIndex:i,token:o,mode:a,parent:s}}function s(e,t){return r.joinSpans(e.token.span,t.prevSpan)}function c(e,t){return r.joinSpans(e,t.prevSpan)}function l(e){return r.emptySpanAt(e.token.span.input,e.token.span.start)}function u(e,t){return{type:"Differential",span:e,val:t}}function d(e,t,n){return{type:e,span:t,val:n}}function p(e,t){return h(t,e,0,r.emptySpanAt(e.span.input,e.span.start),void 0,void 0)}function h(e,t,r,i,o,s){var c=t.args;if(r>c.length&&s)return m(s,i);r=I(c,r);var l=_(t,r,o),u=l.token,p=l.endIndex;if("End"===u.type&&s){var h=s.input.args[s.startIndex];if("LeftRight"===h.type){var f=h.right;return a(e,t,i,r,p,d(n.rightTable[f.val]||"Err",f.span,f.val),o,s)}}else"Int"===u.type?o=y(o):"Differential"===u.type&&(o=v(o));return a(e,t,i,r,p,u,o,s)}function f(e){var t=e.input.args[e.startIndex],n=e.token.span;return t&&"LeftRight"===t.type?h(e.opts,t.arg,0,n,e.mode,e):m(e,n)}function m(e,t){var n=e.input,r=e.endIndex,i=e.mode,o=e.parent;return h(e.opts,n,r+1,t,i,o)}function g(e){return e.token}function y(e){return{type:"integral",parent:e}}function v(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function b(e,t){return g(e).type===t}function x(e){return e.startIndex>=e.input.args.length}function E(e,t){return t.token.span.start>e.token.span.start}function w(e,t){return{token:t,endIndex:e}}function _(e,t,i){if(t>=e.args.length)return w(t,d("End",r.emptySpanAt(e.span.input,e.span.end),""));var o=e.args[t];switch(o.type){case"Sqrt":case"Frac":case"SupSub":return w(t,o);case"Letter":if(!i||"integral"!==i.type)return w(t,o);if("d"!=o.val)return w(t,o);var a=_(e,t+1,i),s=a.endIndex,c=a.token;if("Letter"===c.type||"Cmd"===c.type){return w(s,u(r.joinSpans(o.span,c.span),c.val))}return w(t,o);case"LeftRight":var l=o.left;return w(t,d(n.leftTable[l.val]||"Err",r.joinSpans(o.span,l.span),l.val));case"OperatorName":for(var p=[],h=0,f=o.arg.args;h<f.length;h++){var m=f[h];if("Letter"!==m.type)return w(t,d("Err",o.span,r.slice(o.arg.span)));p.push(m.val)}var g="\\"+p.join("");return w(t,d(n.commandTable[g]||"Cmd",o.span,g));case"Cmd":return w(t,d(n.commandTable[o.val]||"Cmd",o.span,o.val));case"EscapedSymbol":return w(t,d(n.escapedSymbolTable[o.val]||"Err",o.span,o.val))
;case"Symbol":if(T(o))return S(e,t);return w(t,d(n.symbolTable[o.val]||"Err",o.span,o.val));case"Digit":return M(e,t);default:throw"Unexpected atom "+o.type+"."}}function S(e,t){var i=e.args[t];if("Symbol"!==i.type||"."!==i.val)throw new Error("Programming Error: expected '.'");if(t+2<e.args.length&&T(e.args[t+1])&&T(e.args[t+2])){var o=r.joinSpans(i.span,e.args[t+2].span);return w(t+2,d("...",o,r.slice(o)))}var a=I(e.args,t+1);return a<e.args.length&&"Digit"===e.args[a].type?M(e,t):w(t,d(n.symbolTable[i.val]||"Err",i.span,i.val))}function M(e,t){var n=k(e,t);if(n)return n;for(var i=e.args,o=e.args[t].span,a=[],s=!1,c=!1;t<i.length;t++){var l=I(i,t);if(l>=i.length)break;var u=i[l];if("Digit"===u.type)t=l,s=!0,a.push(u.val);else{if(c||!T(u))break;if(l+1<i.length&&T(e.args[l+1]))break;t=l,c=!0,a.push(".")}}if(!s)throw new Error("Programming Error: decimals must have at least one digit.");return w(t-1,d("Decimal",r.joinSpans(o,e.args[t-1].span),a.join("")))}function k(e,t){for(var n=e.args,i=n[t].span,a=[];t<n.length;t++){var s=I(n,t);if(s>=n.length)break;var c=n[s];if("Digit"!==c.type)break;t=s,a.push(c.val)}if(!((t=I(n,t))>=n.length)){var l=n[t];if("Frac"===l.type){for(var u=[],d=[],p=0,h=l.num.args;p<h.length;p++){var c=h[p];if(!C(c)){if("Digit"!==c.type)return;u.push(c.val)}}for(var f=0,m=l.den.args;f<m.length;f++){var c=m[f];if(!C(c)){if("Digit"!==c.type)return;d.push(c.val)}}var g=r.joinSpans(i,l.span);return w(t,o.MixedNumber(g,a.join(""),u.join(""),d.join("")))}}}function C(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return!1;case"Cmd":return"\\space"===e.val;case"EscapedSymbol":return"\\ "===e.val||"\\:"===e.val||"\\,"===e.val||"\\;"===e.val;default:throw"Unexpected atom "+e.type+"."}}function I(e,t){for(;t<e.length&&C(e[t]);)t+=1;return t}function T(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(t,"__esModule",{value:!0}),t.didAdvance=t.isDone=t.isAt=t.endIntegral=t.beginIntegral=t.peek=t.advance=t.lexAt=t.lex=t.emptySpanAtState=t.joinState=t.spanStates=void 0,Object.defineProperty(t,"Span",{enumerable:!0,get:function(){return i.Span}}),t.spanStates=s,t.joinState=c,t.emptySpanAtState=l,t.lex=p,t.lexAt=h,t.advance=f,t.peek=g,t.beginIntegral=y,t.endIntegral=v,t.isAt=b,t.isDone=x,t.didAdvance=E}),define("core/math/parser/precspec",["require","exports","./expression-token-tables"],function(e,t,n){"use strict";function r(e){return{type:"initial",tokenType:e}}function i(e){return{type:"l",tokenType:e}}function o(e){return{type:"r",tokenType:e}}function a(e){return{type:"la",tokenType:e}}function s(e){return{type:"ra",tokenType:e}}function c(e,t){for(var r=0,i=n.allTokenTypes;r<i.length;r++){var o=i[r];if(void 0===t[o])throw new Error("Programming Error: token "+o+" must be a assigned a "+e+" precedence")}}function l(e,t,n,r){if(void 0!==t[n])throw new Error("Programming Error: duplicate "+e+" entry for token "+n+".");t[n]=r}function u(e){function t(e){return a[e]}function n(e){return o[e]}function r(e){var n=i[e];return void 0===n?t(e):n}for(var i={},o={},a={},s=0;s<e.length;s++)for(var u=e[s],d=0,p=u;d<p.length;d++){var h=p[d],f=h.type,m=h.tokenType;switch(f){case"initial":l("initial",i,m,s);break;case"l":l("left",o,m,s);break;case"r":l("right",a,m,s);break;case"la":l("left",o,m,s),l("right",a,m,s);break;case"ra":l("left",o,m,s),l("right",a,m,s-1)}}return c("left",o),c("right",a),{rightPrec:t,leftPrec:n,initialPrec:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.precSpec=t.ra=t.la=t.r=t.l=t.initial=void 0,t.initial=r,t.l=i,t.r=o,t.la=a,t.ra=s,t.precSpec=u}),define("core/math/parser/expression-parser",["require","exports","tslib","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(e,t,n,r,i,o,a,s){"use strict";function c(e,t){var r=t?n.__assign(n.__assign({},P),t):P,o=l(e,r);return"Err"===o.type&&"EmptyGroup"===o.error.type?i.Err(o.span,i.EmptyInput()):o}function l(e,t){var n=a.lex(e,t);if(a.isDone(n))return i.Err(a.spanStates(n,n),i.EmptyGroup());var r=d(n,0),o=r.state,s=r.tree;return"Err"===s.type||a.isDone(o)?s:M(o).tree}function u(e,t){return{state:e,tree:t}}function d(e,t){var n,r,i,o=e;if(n=h(e),e=n.state,i=n.tree,"Err"===i.type)return u(e,i);if(!a.didAdvance(o,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!a.isDone(e);){var s=void 0;if(s=a.isAt(e,"(")&&!m(i)?L("("):T(a.peek(e).type),t>=s)break;var c=e;if(r=f(e,i),e=r.state,i=r.tree,"Err"===i.type)return u(e,i);if(!a.didAdvance(c,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return u(e,i)}function p(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function h(e){var t,n,o,s,c,h,f,m,g,y,b,k,C,I,L,P,A,O,F,N=e,q=a.peek(e),R=D(q.type);switch(q.type){case"+":if(e=a.advance(e),t=d(e,R),e=t.state,F=t.tree,"Err"===F.type){if(!p(F.error))return u(e,F);var B=a.spanStates(N,e),j=i.Err(B,i.UnaryOperatorMissingRight(q.val));return u(e,j)}return u(e,r.Pos(a.spanStates(N,e),[F]));case"-":if(e=a.advance(e),n=d(e,R),e=n.state,F=n.tree,"Err"===F.type){if(!p(F.error))return u(e,F);var B=a.spanStates(N,e),j=i.Err(B,i.UnaryOperatorMissingRight(q.val));return u(e,j)}return u(e,r.Neg(a.spanStates(N,e),[F]));case"(":return w(e);case"\\{":return e=a.advance(e),a.isAt(e,"\\}")?(e=a.advance(e),u(e,r.EmptyPiecewise(a.spanStates(N,e)))):(o=d(e,R),e=o.state,F=o.tree,s=S(N,e,F,"\\{","\\}"),e=s.state,F=s.tree,"Err"===F.type?u(e,F):u(e,r.Piecewise(a.spanStates(N,e),[F])));case"[":return e=a.advance(e),a.isAt(e,"]")?(e=a.advance(e),u(e,r.List(a.spanStates(N,e),[]))):(c=d(e,R),e=c.state,F=c.tree,h=S(N,e,F,"[","]"),e=h.state,F=h.tree,"Err"===F.type?u(e,F):u(e,r.List(a.spanStates(N,e),[F])));case"(|":if(e=a.advance(e),a.isAt(e,"|)")){e=a.advance(e);var B=a.spanStates(N,e);return u(e,i.Err(B,i.EmptyPipe()))}return f=d(e,R),e=f.state,F=f.tree,m=S(N,e,F,"(|","|)"),e=m.state,F=m.tree,"Err"===F.type?u(e,F):u(e,r.Pipes(a.spanStates(N,e),[F]));case"Frac":e=a.advance(e);var V=l(q.num,e.opts),U=l(q.den,e.opts);if("Err"===V.type&&"EmptyGroup"===V.error.type&&"Err"===U.type&&"EmptyGroup"===U.error.type){var B=a.spanStates(N,e),j=i.Err(B,i.FractionEmpty());return u(e,j)}if("Err"===V.type&&"EmptyGroup"===V.error.type){var B=a.spanStates(N,e),j=i.Err(B,i.FractionMissingNumerator());return u(e,j)}if("Err"===U.type&&"EmptyGroup"===U.error.type){var B=a.spanStates(N,e),j=i.Err(B,i.FractionMissingDenominator());return u(e,j)}if("Err"===V.type)return u(e,V);if("Err"===U.type)return u(e,U);if(r.isDerivative(V,U)&&"Juxt"===U.type){var G=U.args[1],z=void 0;if(g=d(e,T("*")-1),e=g.state,z=g.tree,"Err"===z.type){if(p(z.error)){var B=a.spanStates(N,e);return u(e,i.Err(B,i.DerivativeMissingBody()))}return u(e,z)}return u(e,r.Derivative(a.spanStates(N,e),[G,z]))}return u(e,r.Frac(a.spanStates(N,e),[V,U]));case"Sqrt":if(e=a.advance(e),q.optArg){var H=l(q.optArg,e.opts);if("Err"===H.type)return"EmptyGroup"===H.error.type?u(e,i.Err(H.span,i.EmptyRadicalIndex())):u(e,H);var W=l(q.arg,e.opts);return"Err"===W.type?"EmptyGroup"===W.error.type?u(e,i.Err(W.span,i.EmptyRadical())):u(e,W):u(e,r.Nthroot(a.spanStates(N,e),[H,W]))}var W=l(q.arg,e.opts);return"Err"===W.type?"EmptyGroup"===W.error.type?u(e,i.Err(W.span,i.EmptyRadical())):u(e,W):u(e,r.Sqrt(a.spanStates(N,e),[W]));case"Trig":case"Ln":e=a.advance(e);var K=r.Cmd(a.spanStates(N,e),q.val),Y=0,X=a.peek(e);if("SupSub"===X.type){if(e=a.advance(e),X.sub){var B=a.spanStates(N,e),j=i.Err(B,i.UnexpectedSubscript(K.val));return u(e,j)}var $=x(X,e.opts);if($){if("Err"===$.type)return u(e,$);K=r.Superscript(a.spanStates(N,e),[K,$])}Y=X.nprimes}var Q=a.isAt(e,"(");if(Q){if(y=w(e),e=y.state,F=y.tree,"Err"===F.type)return u(e,F);F=r.Call(a.spanStates(N,e),[K,F.args[0]])}else{if(b=d(e,R-1),e=b.state,F=b.tree,"Err"===F.type)return p(F.error)?u(e,i.Err(a.spanStates(N,e),i.FunctionMissingArgument(q.val))):u(e,F);F=r.ImplicitCall(a.spanStates(N,e),[K,F])}if(Y>0){var B=a.spanStates(N,e);if(!Q){var j=i.Err(B,i.PrimeWithoutParen());return u(e,j)}F=r.Prime(B,Y,[F])}return u(e,F);case"Log":e=a.advance(e);var K=r.Cmd(a.spanStates(N,e),q.val),Y=0,Z=void 0,$=void 0,X=a.peek(e);if("SupSub"===X.type&&(e=a.advance(e),Z=v(X,e.opts),$=x(X,e.opts),Y=X.nprimes),Z&&"Err"===Z.type)return u(e,Z);if($&&"Err"===$.type)return u(e,$);var Q=a.isAt(e,"(");if(Q){if(k=w(e),e=k.state,F=k.tree,"Err"===F.type)return u(e,F);F=F.args[0]}else if(C=d(e,R-1),e=C.state,F=C.tree,"Err"===F.type)return p(F.error)?u(e,i.Err(a.spanStates(N,e),i.FunctionMissingArgument(q.val))):u(e,F);var J=Z?r.Seq(a.spanStates(N,e),r.unwrapSeq(F).concat(Z)):F,ee=Z?r.Cmd(a.spanStates(N,e),"\\logbase"):K;if($&&(ee=r.Superscript(a.spanStates(N,e),[ee,$])),F=Q?r.Call(a.spanStates(N,e),[ee,J]):r.ImplicitCall(a.spanStates(N,e),[ee,J]),Y>0){var B=a.spanStates(N,e);if(!Q){var j=i.Err(B,i.PrimeWithoutParen());return u(e,j)}F=r.Prime(B,Y,[F])}return u(e,F);case"Int":e=a.advance(e);var X=a.peek(e);e=a.advance(e);var te=E(X,N,e);if("Err"===te.type)return"MissingBound"===te.error.type?u(e,i.Err(te.span,i.IntegralMissingBound())):u(e,te);var $=te.sup,Z=te.sub,G=void 0;if(a.isAt(e,"Differential"))return I=_(e),e=I.state,G=I.tree,"Err"===G.type?u(e,G):u(e,r.EmptyIntegral(a.spanStates(N,e),[G,Z,$]));if(L=d(e,R),e=L.state,F=L.tree,"Err"===F.type)return p(F.error)?u(e,i.Err(F.span,i.IntegralMissingBody())):u(e,F);var ne=F;return a.isAt(e,"Differential")?(P=_(e),e=P.state,G=P.tree,"Err"===G.type?u(e,G):u(e,r.Integral(a.spanStates(N,e),[G,Z,$,ne]))):u(e,i.Err(a.spanStates(N,e),i.IntegralMissingDifferential()));case"Sum":e=a.advance(e);var X=a.peek(e);e=a.advance(e);var te=E(X,N,e);if("Err"===te.type)return"MissingBound"===te.error.type?u(e,i.Err(te.span,i.SumMissingBound())):u(e,te);var $=te.sup,Z=te.sub;return A=d(e,R),e=A.state,F=A.tree,"Err"===F.type?p(F.error)?u(e,i.Err(F.span,i.SumMissingBody())):u(e,F):u(e,r.Sum(a.spanStates(N,e),[F,Z,$]));case"Prod":e=a.advance(e);var X=a.peek(e);e=a.advance(e);var te=E(X,N,e);if("Err"===te.type)return"MissingBound"===te.error.type?u(e,i.Err(te.span,i.ProductMissingBound())):u(e,te);var $=te.sup,Z=te.sub;return O=d(e,R),e=O.state,F=O.tree,"Err"===F.type?p(F.error)?u(e,i.Err(F.span,i.ProductMissingBody())):u(e,F):u(e,r.Product(a.spanStates(N,e),[F,Z,$]));case"Cmd":return e=a.advance(e),F=r.Cmd(a.spanStates(N,e),q.val),u(e,F);case"Letter":return e=a.advance(e),F=r.Letter(a.spanStates(N,e),q.val),u(e,F);case"Decimal":e=a.advance(e);var re=r.Decimal(a.spanStates(N,e),q.val),X=e.token;if("Decimal"===X.type||"MixedNumber"===X.type){var ie=e;e=a.advance(e);var B=a.spanStates(N,e),oe="MixedNumber"===X.type?X:r.Decimal(a.spanStates(ie,e),X.val);return u(e,i.Err(B,i.AdjacentNumbers([re,oe])))}return u(e,re);case"MixedNumber":return e=a.advance(e),u(e,q);case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":case".":e=a.advance(e);var B=a.spanStates(N,e),j=i.Err(B,i.BinaryOperatorMissingLeft(q.val));return u(e,j);case"!":e=a.advance(e);var B=a.spanStates(N,e),j=i.Err(B,i.UnaryOperatorMissingLeft(q.val));return u(e,j);case"SupSub":e=a.advance(e);var ae="supsub";q.sub?ae="subscript":q.sup?ae="superscript":q.nprimes>0&&(ae="prime");var B=a.spanStates(N,e),j=i.Err(B,i.UnaryOperatorMissingLeft(ae));return u(e,j);case")":case"\\}":case"]":case"|)":case"Differential":return M(e);case"Err":e=a.advance(e);var B=a.spanStates(N,e),j=i.Err(B,i.UnrecognizedSymbol(q.val));return u(e,j);case"End":var B=a.spanStates(N,e),j=i.Err(B,i.UnexpectedEnd());return u(e,j);default:throw"Unexpected token type "+q.type+"."}}function f(e,t){var n,o,s,c,l,h,f,m,v,E,_,C,I,D,P,A=a.peek(e),O=L(A.type);switch(A.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":case".":if(e=a.advance(e),n=d(e,O),e=n.state,P=n.tree,"Err"===P.type){if(p(P.error)){var F=a.joinState(t.span,e),N=i.Err(F,i.BinaryOperatorMissingRight(A.val));return u(e,N)}return u(e,P)}return u(e,g(A.type,a.joinState(t.span,e),[t,P]));case"%":e=a.advance(e);var q=a.peek(e);if("Cmd"!==q.type||"of"!==q.val&&"\\of"!==q.val){var N=i.Err(A.span,i.PercentMissingOf());return u(e,N)}if(e=a.advance(e),o=d(e,O),e=o.state,P=o.tree,"Err"===P.type){if(p(P.error)){var F=a.joinState(t.span,e),N=i.Err(F,i.BinaryOperatorMissingRight(A.val));return u(e,N)}return u(e,P)}return u(e,r.PercentOf(a.joinState(t.span,e),[t,P]));case">=":case"<=":case">":case"<":var R=A.type;if(e=a.advance(e),s=y(e,R),e=s.state,R=s.symbol,c=d(e,O),e=c.state,P=c.tree,"Err"===P.type){if(p(P.error)){var F=a.joinState(t.span,e),N=i.Err(F,i.BinaryOperatorMissingRight(A.val));return u(e,N)}return u(e,P)}for(var B=r.Inequality(a.joinState(t.span,e),R,[t,P]),j=[],V=a.peek(e).type;">="===V||"<="===V||">"===V||"<"===V;){var U=e;if(R=V,e=a.advance(e),l=y(e,R),e=l.state,R=l.symbol,h=d(e,O),e=h.state,P=h.tree,"Err"===P.type){if(p(P.error)){var F=a.joinState(t.span,e),N=i.Err(F,i.BinaryOperatorMissingRight(A.val));return u(e,N)}return u(e,P)}j.push(r.TrailingInequalityPiece(a.spanStates(U,e),R,[P])),V=a.peek(e).type}return j.length?u(e,r.InequalityChain(a.joinState(t.span,e),B,j)):u(e,B);case"!":return e=a.advance(e),u(e,r.Bang(a.joinState(t.span,e),[t]));case"[":var U=e;if(e=a.advance(e),a.isAt(e,"]")){e=a.advance(e);var F=a.spanStates(U,e);return u(e,i.Err(F,i.EmptySquareBracket()))}return f=d(e,O),e=f.state,P=f.tree,m=S(U,e,P,"[","]"),e=m.state,P=m.tree,"Err"===P.type?u(e,P):u(e,r.Index(a.joinState(t.span,e),[t,P]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\{":case"(|":return v=d(e,O),e=v.state,P=v.tree,"Err"===P.type?u(e,P):u(e,r.Juxt(a.joinState(t.span,e),[t,P]));case"(":if(r.isIdentifier(t)){if(E=w(e),e=E.state,P=E.tree,"Err"===P.type)return u(e,P);var F=a.joinState(t.span,e);return u(e,r.Call(F,[t,P.args[0]]))}if("Prime"===t.type&&r.isIdentifier(t.args[0])){if(_=w(e),e=_.state,P=_.tree,"Err"===P.type)return u(e,P);var F=a.joinState(t.span,e);return u(e,r.Prime(F,t.nprimes,[r.Call(F,[t.args[0],P.args[0]])]))}return C=d(e,O),e=C.state,P=C.tree,"Err"===P.type?u(e,P):u(e,r.Juxt(a.joinState(t.span,e),[t,P]));case"SupSub":e=a.advance(e);var G=b(A),z=x(A,e.opts);if(G&&"Err"===G.type)return u(e,G);if(z&&"Err"===z.type)return u(e,z);if(G&&(t=r.Subscript(a.joinState(t.span,e),[t,G])),z&&(t=r.Superscript(a.joinState(t.span,e),[t,z])),A.nprimes>0){var F=a.joinState(t.span,e);if(!r.isIdentifier(t)){var N=i.Err(F,i.UnexpectedPrime());return u(e,N)}t=r.Prime(F,A.nprimes,[t])}return u(e,t);case",":for(var H=[t];a.isAt(e,",")&&(e=a.advance(e),!a.isAt(e,"..."))&&(!e.opts.trailingComma||!k(e));){if(I=d(e,O),e=I.state,P=I.tree,"Err"===P.type){if(p(P.error)){var F=a.joinState(t.span,e),N=i.Err(F,i.BinaryOperatorMissingRight(A.val));return u(e,N)}return u(e,P)}H.push(P)}return u(e,r.Seq(a.joinState(t.span,e),H));case"...":if(e=a.advance(e),a.isAt(e,",")&&(e=a.advance(e)),O>=T(a.peek(e).type))return u(e,r.Ellipsis(a.joinState(t.span,e),[t,r.EmptyRangeEnd(a.emptySpanAtState(e))]));if(D=d(e,O),e=D.state,P=D.tree,"Err"===P.type){if(p(P.error)){var F=a.joinState(t.span,e),N=i.Err(F,i.BinaryOperatorMissingRight(A.val));return u(e,N)}return u(e,P)}return u(e,r.Ellipsis(a.joinState(t.span,e),[t,P]));case"]":case")":case"\\}":case"|)":case"Differential":return M(e);case"Err":return d(e,O);case"End":var F=a.spanStates(e,e),N=i.Err(F,i.UnexpectedEnd());return u(e,N);default:throw"Unexpected token type "+A.type+"."}}function m(e){return!!r.isIdentifier(e)||!("Prime"!==e.type||!r.isIdentifier(e.args[0]))}function g(e,t,n){switch(e){case"+":return r.Add(t,n);case"-":return r.Sub(t,n);case"*":return r.Mul(t,n);case"/":return r.Div(t,n);case"=":return r.Equals(t,n);case"~":return r.Tilde(t,n);case":":return r.Colon(t,n);case".":return r.Dot(t,n);default:throw"Unexpected token type "+e+"."}}function y(e,t){if(!a.isAt(e,"="))return{state:e,symbol:t};switch(t){case">":e=a.advance(e),t=">=";break;case"<":e=a.advance(e),t="<="}return{state:e,symbol:t}}function v(e,t){if(e.sub){var n=e.sub,r=l(n,t);return"Err"===r.type&&"EmptyGroup"===r.error.type?i.Err(r.span,i.EmptySubscript()):r}}function b(e){if(e.sub){var t=e.sub;if(0===t.args.length)return i.Err(t.span,i.EmptySubscript());for(var n=[],a=0,s=t.args;a<s.length;a++){var c=s[a];if("Digit"!==c.type&&"Letter"!==c.type){var l=c.span;return i.Err(l,i.InvalidSubscript(o.slice(l)))}n.push(c.val)}return r.Alphanumeric(t.span,n.join(""))}}function x(e,t){if(e.sup){var n=l(e.sup,t);return"Err"===n.type?"EmptyGroup"===n.error.type?i.Err(n.span,i.EmptySuperscript()):n:e.nprimes>0?i.Err(e.span,i.SuperscriptWithPrime()):n}}function E(e,t,n){if("SupSub"!==e.type){var r=a.spanStates(t,n);return i.Err(r,i.MissingBound())}if(e.nprimes>0){var r=a.spanStates(t,n);return i.Err(r,i.UnexpectedPrime())}var o=v(e,n.opts),s=x(e,n.opts);if(!o||"Err"===o.type&&"EmptySubscript"===o.error.type||!s||"Err"===s.type&&"EmptySuperscript"===s.error.type){var r=a.spanStates(t,n);return i.Err(r,i.MissingBound())}return"Err"===o.type?o:"Err"===s.type?s:{type:"Bounds",sup:s,sub:o}}function w(e){var t,n,i=e,o=a.peek(e),s=D(o.type);if(!a.isAt(e,"("))throw new Error("Programming Error: expected '(' at start of parseParen.");if(e=a.advance(e),a.isAt(e,")")){var c=r.Seq(a.emptySpanAtState(e),[]);e=a.advance(e);var l=a.spanStates(i,e);return u(e,r.Paren(l,[c]))}var p;return t=d(e,s),e=t.state,p=t.tree,n=S(i,e,p,"(",")"),e=n.state,p=n.tree,"Err"===p.type?u(e,p):u(e,r.Paren(a.spanStates(i,e),[p]))}function _(e){var t=e,n=a.peek(e);if("Differential"!==n.type)throw new Error("Programming Error: expected differential");e=a.advance(e);var o=r.Cmd(n.span,n.val),s=a.peek(e);if("SupSub"===s.type){e=a.advance(e);var c=a.spanStates(t,e),l=b(s);if(l){if("Err"===l.type)return u(e,l);o=r.Subscript(c,[o,l])}if(s.sup)return u(e,i.Err(c,i.DifferentialWithSuperscript()));if(s.nprimes>0)return u(e,i.Err(c,i.UnexpectedPrime()))}return u(e,o)}function S(e,t,n,r,o){if("Err"===n.type&&"UnexpectedEnd"!==n.error.type)return u(t,n);if("Err"===n.type||!a.isAt(t,o)){var s=a.spanStates(e,t);return u(t,i.Err(s,i.MissingCloseDelimiter(r,o)))}return t=a.advance(t),u(t,n)}function M(e){var t=e;switch(a.peek(e).type){case")":e=a.advance(e);var n=a.spanStates(t,e);return u(e,i.Err(n,i.UnexpectedCloseDelimiter("(",")")));case"]":e=a.advance(e);var n=a.spanStates(t,e);return u(e,i.Err(n,i.UnexpectedCloseDelimiter("[","]")));case"\\}":e=a.advance(e);var n=a.spanStates(t,e);return u(e,i.Err(n,i.UnexpectedCloseDelimiter("\\{","\\}")));case"|)":e=a.advance(e);var n=a.spanStates(t,e);return u(e,i.Err(n,i.UnexpectedCloseDelimiter("|","|")));case"Differential":e=a.advance(e);var n=a.spanStates(t,e);return u(e,i.Err(n,i.UnexpectedDifferential()));default:e=a.advance(e);var n=a.spanStates(t,e);return u(e,i.Err(n,i.UnexpectedParseError()))}}function k(e){return a.isAt(e,")")||a.isAt(e,"]")||a.isAt(e,"\\}")}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;var C=[[s.initial("("),s.la(")"),s.initial("\\{"),s.la("\\}"),s.r("["),s.la("]"),s.initial("(|"),s.la("|)"),s.la("Differential"),s.la("End")],[s.ra("...")],[s.la(",")],[s.ra(":")],[s.la("="),s.la(">"),s.la("<"),s.la(">="),s.la("<="),s.la("~")],[s.la("+"),s.la("-")],[s.la("*"),s.la("/"),s.la("Decimal"),s.la("MixedNumber"),s.la("Letter"),s.la("Cmd"),s.la("%"),s.r("("),s.la("\\{"),s.la("(|"),s.la("Frac"),s.la("Sqrt"),s.la("Trig"),s.la("Ln"),s.la("Log"),s.ra("Int"),s.ra("Sum"),s.ra("Prod")],[s.initial("+"),s.initial("-")],[s.la("!")],[s.la("SupSub")],[s.l("["),s.la(".")],[s.l("(")],[s.la("Err")]],I=s.precSpec(C),T=I.leftPrec,L=I.rightPrec,D=I.initialPrec,P={trailingComma:!1};t.parse=c}),define("core/math/inverses",[],function(){"use strict";var e={};return["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"].forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("core/math/parser/lower",["require","exports","core/math/inverses","core/math/errormsg","tslib","./input-span","./surface-node","../maybe-rational"],function(e,t,n,r,i,o,a,s){"use strict";function c(e,t){return u(e,t)}function l(e,t){for(var n=[],r=0;r<t.length;r++)n.push(h(e,t[r]));return n}function u(e,t){return e.setInput(d(e,t),t.span)}function d(e,t){var n=e.nodes;switch(t.type){case"Equals":var i=t.args,o=i[0],s=i[1];if("Call"===o.type){var c=o.args,u=c[0],d=c[1],m=a.unwrapSeq(d);if(a.isIdentifier(u)&&m.every(a.isIdentifier))return n.FunctionDefinition(h(e,u),l(e,m),h(e,s))}else if(a.isIdentifier(o))return n.Assignment(h(e,o),h(e,s));return n.Equation(h(e,o),h(e,s));case"Tilde":var g=l(e,t.args),o=g[0],s=g[1];return n.Regression(o,s);case"Inequality":return w(e,t);case"InequalityChain":if(t.chain.length>1)throw r.inequalityChainTooLong();var y=t.first,v=y.symbol,b=y.args,x=b[0],E=b[1],_=t.chain[0],S=_.symbol,M=_.args[0];return a.isIdentifier(E)?n.DoubleInequality([h(e,x),v,h(e,E),S,h(e,M)]):w(e,t);case"Seq":if(!t.args.every(p))throw r.malformedPoint();return n.List(l(e,t.args));case"Call":var k=t.args,C=k[0],I=k[1];if("Cmd"===C.type)switch(C.val){case"polygon":return n.Polygon(l(e,a.unwrapSeq(I)));case"histogram":return n.Histogram(l(e,a.unwrapSeq(I)));case"cube":case"sphere":case"cone":case"dodecahedron":case"octahedron":case"tetrahedron":return n.Object3D(l(e,a.unwrapSeq(I)),C.val);case"dotplot":return n.DotPlot(l(e,a.unwrapSeq(I)));case"boxplot":return n.BoxPlot(l(e,a.unwrapSeq(I)));case"ttest":return n.TTest(l(e,a.unwrapSeq(I)));case"ittest":return n.IndependentTTest(l(e,a.unwrapSeq(I)));case"stats":return n.Stats(l(e,a.unwrapSeq(I)));default:return f(e,t)}return f(e,t);default:return f(e,t)}}function p(e){if("Paren"!==e.type)return!1;var t=e.args[0];return"Seq"===t.type&&2===t.args.length}function h(e,t){return e.setInput(f(e,t),t.span)}function f(e,t){var n=e.nodes;switch(t.type){case"Pos":return f(e,t.args[0]);case"Neg":for(var i=-1,c=t.args[0];;)if("Pos"===c.type||"Paren"===c.type)c=c.args[0];else{if("Neg"!==c.type)break;c=c.args[0],i*=-1}switch(c.type){case"Decimal":var u=S(c);return n.Constant(-1===i?s.neg(u):u);case"MixedNumber":var u=M(c);return n.MixedNumber(-1===i?s.neg(u):u);default:return-1===i?n.Negative([h(e,c)]):f(e,c)}case"Add":return n.Add(l(e,t.args));case"Sub":return n.Subtract(l(e,t.args));case"Mul":return n.Multiply(l(e,t.args));case"Div":return n.Divide(l(e,t.args));case"Bang":var d=t.args[0];return"Call"===d.type?n.FunctionFactorial(l(e,d.args)):n.FunctionCall("\\factorial",l(e,t.args));case"PercentOf":return n.PercentOf(l(e,t.args));case"Call":return b(e,t);case"ImplicitCall":return _(t),b(e,t);case"Dot":var p=t.args[1],m=l(e,t.args),g=m[0],y=m[1];if(T(p)){var v=o.emptySpanAt(p.span.input,p.span.end),I=e.setInput(L(e),v);y=e.setInput(n.SeededFunctionCall(y,[I]),p.span)}return n.DotAccess([g,y]);case"Prime":var P=t.args[0];if("Call"===P.type){var A=P.args,O=A[0],F=A[1],N=a.unwrapSeq(F).length;if("Cmd"===O.type&&"logbase"===O.val){if(2!==N)throw r.primedFunctionArity()}else if(1!==N)throw r.primedFunctionArity();return n.Prime(t.nprimes,l(e,t.args))}throw"ImplicitCall"===P.type?r.primeWithoutParen():r.unexpectedPrime();case"Index":var q=t.args,R=q[0],B=q[1];if("Seq"===B.type)return n.ListAccess([f(e,R),n.List(l(e,B.args))]);if("Ellipsis"===B.type){var j=B.args,V=j[0],U=j[1];return n.ListAccess([f(e,R),n.Range([n.List(l(e,a.unwrapSeq(V))),n.List("EmptyRangeEnd"===U.type?[]:l(e,a.unwrapSeq(U)))])])}return E(B)?n.ListAccess([f(e,R),w(e,B)]):n.ListAccess(l(e,t.args));case"Paren":var G=t.args[0];return"Seq"===G.type?n.OrderedPair(l(e,G.args)):f(e,G);case"List":if(0===t.args.length)return n.List([]);var z=t.args[0];if("Ellipsis"===z.type){var H=z.args,V=H[0],U=H[1];return n.Range([n.List(l(e,a.unwrapSeq(V))),n.List(l(e,a.unwrapSeq(U)))])}return n.List(l(e,a.unwrapSeq(z)));case"Pipes":return n.FunctionCall("\\abs",l(e,t.args));case"Subscript":var W=t.args,K=W[0],Y=W[1];if(0===Y.val.length)throw r.emptySubscript();var X=void 0;switch(K.type){case"Letter":case"Cmd":X=K.val;break;default:throw r.unexpectedSubscript()}return n.Identifier(X+"_"+Y.val);case"Superscript":var $=t.args,K=$[0],Q=$[1];return"Call"!==K.type||"Seq"===K.args[1].type||k(K)?"Dot"===K.type?n.DotAccessExponent(l(e,[K.args[0],K.args[1],Q])):n.Exponent(l(e,t.args)):n.FunctionExponent(l(e,[K.args[0],K.args[1],Q]));case"Sqrt":return n.FunctionCall("sqrt",l(e,t.args));case"Nthroot":return n.FunctionCall("nthroot",l(e,[t.args[1],t.args[0]]));case"Frac":return n.Divide(l(e,t.args));case"Derivative":var Z=l(e,t.args);if(!a.isIdentifier(t.args[0]))throw r.parseError();return n.Derivative(Z[0],[Z[1]]);case"Integral":var J=t.args,ee=J[0],te=J[1],ne=J[2],re=J[3],Z=l(e,[ee,te,ne,re]);return n.Integral(Z);case"EmptyIntegral":var ie=l(e,t.args),ee=ie[0],oe=ie[1],ne=ie[2],re=n.Constant(s.maybeRational(1,1));return n.Integral([ee,oe,ne,re]);case"Sum":var ae=t.args,se=ae[0],ce=ae[1],ne=ae[2];if("Equals"!=ce.type)throw r.incorrectSumLowerBound();if(!a.isIdentifier(ce.args[0]))throw r.incorrectSumLowerBound();var Z=l(e,[ce.args[0],ce.args[1],ne]),le=h(D(e,Z[0]),se);return n.Sum(Z.concat(le));case"Product":var ue=t.args,se=ue[0],de=ue[1],ne=ue[2];if("Equals"!=de.type)throw r.incorrectProductLowerBound();if(!a.isIdentifier(de.args[0]))throw r.incorrectProductLowerBound();var Z=l(e,[de.args[0],de.args[1],ne]),le=h(D(e,Z[0]),se);return n.Product(Z.concat(le));case"Juxt":return n.Multiply(l(e,t.args));case"Letter":return n.Identifier(t.val);case"Cmd":var pe=t.val;if("ans"===pe){if(void 0===e.currentIndex)throw r.badAnsContext();return n.Ans("ans_{"+(e.currentIndex-1)+"}")}if("approx"===pe)throw r.unrecognizedSymbol(pe);return n.Identifier(pe);case"Decimal":return n.Constant(S(t));case"MixedNumber":return n.MixedNumber(M(t));case"Piecewise":return x(e,t);case"EmptyPiecewise":if(!n.Piecewise.empty)throw r.featureUnavailable();return n.Piecewise.empty();case"Equals":throw r.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw r.unexpectedInequality();case"Tilde":throw r.unexpectedSymbol("~");case"Seq":throw r.unexpectedSymbol(",");case"Colon":throw r.unexpectedSymbol(":");case"Ellipsis":throw r.unexpectedSymbol("...");case"EmptyRangeEnd":throw r.invalidHalfEmptyRange();case"Err":throw C(t.error);default:throw"Unexpected surface node "+t.type+"."}}function m(e){return n.hasOwnProperty(e)}function g(e){return"ln"===e||"log"===e||"logbase"===e}function y(e){return"Decimal"===e.type&&"2"===e.val}function v(e){return"Neg"===e.type&&(e=e.args[0],"Decimal"===e.type&&"1"===e.val)}function b(e,t){var i=e.nodes,s=t.args,c=s[0],u=s[1],d=h(e,c),p=a.unwrapSeq(u),f=l(e,p);if(T(c)){var b=o.emptySpanAt(u.span.input,u.span.start),x=e.setInput(L(e),b);return i.SeededFunctionCall(d,[x].concat(f))}if(a.isIdentifier(c))return i.FunctionCall(d,f);if("Superscript"===c.type){var E=c.args,w=E[0],_=E[1];if("Cmd"===w.type){var S=w.val;if(m(S)||g(S)){if(y(_))return i.Exponent([i.FunctionCall(S,f),h(e,_)]);if(v(_)&&void 0!==n[S])return i.FunctionCall(n[S],f);throw m(S)?r.badTrigExponent(S):r.badLogExponent("logbase"===S?"log":S)}}}return i.Multiply([d,h(e,u)])}function x(e,t){var n,i=e.nodes,o=t.args[0],c=a.unwrapSeq(o),l=[];e:for(n=0;n<c.length;n++){var u=c[n];switch(u.type){case"Colon":var d=u.args,p=d[0],f=d[1];if(!E(p))throw r.colonMissingCondition();l.push({condition:w(e,p),if_expr:h(e,f)});break;case"Equals":case"Inequality":case"InequalityChain":l.push({condition:w(e,u),if_expr:i.Constant(s.maybeRational(1,1))});break;default:break e}}if(0===n)throw r.piecewiseMissingCondition();if(n<c.length-1)throw r.piecewisePartMissingCondition();if(n===c.length-1&&l.push({condition:i.Constant(!0),if_expr:h(e,c[n])}),!i.Piecewise.chain)throw r.featureUnavailable();return i.Piecewise.chain(l)}function E(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function w(e,t){var n=e.nodes;switch(t.type){case"Equals":return n.Comparator["="](l(e,t.args));case"Inequality":return n.Comparator[t.symbol](l(e,t.args));case"InequalityChain":if(t.chain.length>1)throw r.inequalityChainTooLong();var i=t.first,s=i.symbol,c=i.args,u=c[0],d=c[1],p=t.chain[0],h=p.symbol,f=p.args[0],m=o.emptySpanAt(t.span.input,t.span.start);return n.And([w(e,a.Inequality(m,s,[u,d])),w(e,a.Inequality(m,h,[d,f]))]);default:throw r.parseError()}}function _(e){var t=e.args,n=t[0],i=t[1];if("Superscript"===n.type&&(n=n.args[0]),"Cmd"===n.type&&"logbase"===n.val&&"Seq"===i.type&&2===i.args.length){if(!I(i.args[0]))throw r.badImplicitCall("log")}else if(!I(i)){if("Cmd"===n.type)throw r.badImplicitCall(n.val);throw r.parseError()}}function S(e){return s.fromDecimalString(e.val)}function M(e){var t=s.fromDecimalString(e.whole),n=s.fromDecimalString(e.num),r=s.fromDecimalString(e.den);return s.add(t,s.div(n,r))}function k(e){if("Call"!==e.type)return!1;for(var t=e.args[0];"Superscript"===t.type||"Subscript"===t.type||"Prime"===t.type;)t=t.args[0];return"Cmd"===t.type&&(m(t.val)||g(t.val))}function C(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return r.parseError();case"InvalidOperatorName":return r.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return r.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?r.unexpectedSymbol(e.val):r.unrecognizedSymbol(e.val);case"EmptyInput":return r.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return r.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return r.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return r.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return r.cannotSubscript(e.base);case"PercentMissingOf":return r.percentMissingOf();case"SumMissingBound":return r.sumMissingBound();case"ProductMissingBound":return r.productMissingBound();case"IntegralMissingBound":return r.integralMissingBound();case"SumMissingBody":return r.sumMissingBody();case"ProductMissingBody":return r.productMissingBody();case"IntegralMissingBody":return r.integralMissingBody();case"DerivativeMissingBody":return r.derivativeMissingBody();case"IntegralMissingDifferential":return r.integralMissingDifferential();case"DifferentialWithSuperscript":return r.differentialWithSuperscript();case"FractionMissingNumerator":return r.fractionMissingNumerator();case"FractionMissingDenominator":return r.fractionMissingDenominator();case"FractionEmpty":return r.fractionEmpty();case"EmptySuperscript":return r.emptySuperscript();case"EmptySubscript":return r.emptySubscript();case"InvalidSubscript":return r.invalidSubscript(e.val);case"SuperscriptWithPrime":return r.superscriptWithPrime();case"PrimeWithoutParen":return r.primeWithoutParen();case"UnexpectedPrime":return r.unexpectedPrime();case"EmptyRadical":return r.emptyRadical();case"EmptyRadicalIndex":return r.emptyRadicalIndex();case"EmptySquareBracket":return r.emptySquareBracket();case"EmptyPipe":return r.emptyPipe();case"FunctionMissingArgument":return r.wrongArity(e.val,1,0);case"AdjacentNumbers":var t=e.args[0].val,n=void 0;switch(e.args[1].type){case"Decimal":n=e.args[1].val;break;case"MixedNumber":n=e.args[1].whole+" "+e.args[1].num+"/"+e.args[1].den;break;default:throw"Unexpected type "+e.args[1].type+" as right member of AdjacentNumbers."}return r.adjacentNumbers(t,n);default:throw"Unexpected surface node "+e.type+"."}}function I(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var t=e.args[0];;)if("Pos"===t.type||"Paren"===t.type)t=t.args[0];else{if("Neg"!==t.type)break;t=t.args[0]}return"Decimal"===t.type||"MixedNumber"===t.type;case"Pos":case"Paren":return I(e.args[0]);case"Juxt":case"Mul":case"Div":return I(e.args[0])&&I(e.args[1]);case"Subscript":return I(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return I(e.args[0])&&I(e.args[1]);case"Piecewise":var t=e.args[0];return"Equals"===t.type||"Inequality"===t.type||"InequalityChain"===t.type;case"Call":var n=e.args,r=n[0],i=n[1]
;return!a.isIdentifier(r)&&!a.isSuperscriptedIdentifier(r)&&(I(r)&&I(i));case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"Dot":case"PercentOf":case"Prime":case"EmptyRangeEnd":return!1;default:throw"Unexpected surface node "+e.type+"."}}function T(e){return"Cmd"===e.type&&("random"===e.val||"shuffle"===e.val)}function L(e){var t=e.nodes.ExtendSeed("",[e.nodes.Identifier("globalRandomSeed"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return t;for(var n=0,r=e.seedExtensions;n<r.length;n++){var i=r[n];t=e.nodes.ExtendSeed("ro",[t,i])}return t}function D(e,t){var n=e.seedExtensions||[];return i.__assign(i.__assign({},e),{seedExtensions:n.concat(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.lower=void 0,t.lower=c}),define("core/math/baseparser",["require","exports","core/math/errormsg","parsenodes","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/parser/lower"],function(e,t,n,r,i,o,a){"use strict";function s(){throw n.featureUnavailable()}function c(e,t){return e.setInputSpan(t),e}function l(e,t){var l=typeof e;if("string"!==l)throw new Error("Type Error: parse can only be called with strings, got "+JSON.stringify(e)+" of type "+l);t=t||{};var u=r;if(t.disabledFeatures){u=Object.create(u);for(var d=0,p=t.disabledFeatures;d<p.length;d++){var h=p[d];if(!u[h])throw new Error("Programming Error: "+h+" cannot be disabled because it is not a parsenode.");u[h]=s}}var f=void 0===t.seedPrefix?"":t.seedPrefix,m=0,g=function(){var e=f+"::vc"+m;return m+=1,e},y={nodes:u,currentIndex:t.index,setInput:c,nextSeed:g},v={};void 0!==t.trailingComma&&(v.trailingComma=t.trailingComma);try{var b=i.parse(e),x=o.parse(b,v);return a.lower(y,x)}catch(e){return e instanceof r.Error?e:"string"==typeof e?r.Error(e):n.parseError()}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0,t.parse=l}),define("core/math/sliders",["require","exports"],function(e,t){"use strict";function n(e,t){var n=Math.round(1e6*e)/1e6;return Math.abs(n-e)<t?n:e}function r(e){var t=!0,n=!0,r=!0;if(void 0!==e.hardMin&&e.target<e.hardMin&&(t=!1),void 0!==e.hardMax&&e.target>e.hardMax&&(n=!1),e.step){i({target:e.target,step:e.step,hardMin:t?e.hardMin:void 0,hardMax:n?e.hardMax:void 0})!==e.target&&(r=!1)}return{min:t,max:n,step:r}}function i(e){var t=e.target,r=e.hardMin,i=e.hardMax,o=e.step,a=1e-10;if(void 0!==r&&void 0!==i&&(a=Math.min(a,Math.abs(i-r)/1e3)),o&&(a=Math.min(a,o/10)),void 0!==r&&(r=n(r,a)),void 0!==i&&(i=n(i,a)),e.forceSliderToMax&&void 0!==i&&(t=i),r>i)return r;if(t<=r)return r;if(t>=i)return i;if(o){var s=void 0!==r?r:0;t=o*Math.round((t-s)/o)+s}var c=n(t,a);return o?t=c:r===c?t=c:i===c&&(t=c),t<=r?r:t>=i?i:t}function o(e){var t=e.storedMax,n=e.sliderValue,r=e.hardMin,o=e.step,a=10;if(t>a&&(a=t),n>a&&(a=n),r>a&&(a=r),o){var s=i({target:a,hardMin:r,hardMax:void 0,step:o});a=s>=a?s:s+o}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.computeSoftMax=t.constrainSliderValueLikeEvaluator=t.determineWhichLimitsAreCompatibleWithValue=t.roundToReasonableDecimal=void 0,t.roundToReasonableDecimal=n,t.determineWhichLimitsAreCompatibleWithValue=r,t.constrainSliderValueLikeEvaluator=i,t.computeSoftMax=o}),define("core/math/features/getConcreteTree",["require","parsenodes","core/math/errormsg","core/math/types","core/lib/label","core/math/builtin","core/math/distance","core/math/maybe-rational","core/math/rational-arithmetic-sequence","core/math/sliders"],function(e){"use strict";function t(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(e[i].getConcreteTree(t,n));return r}function n(){return this.getDependencies().concat([this._symbol])}function r(e){return e===m.Distribution||m.isList(e)}function i(e,t,n,i){var o=i.length-1,a=e[t];if(!a)throw f.unexpectedSymbol(".");if(a.isError)throw a;if(!a.isFunction)throw f.unexpectedSymbol(".");if(!a.allowDotCalls)throw f.illegalDotCall(n);var s,c="random"===t,l="random"===t||"shuffle"===t;if(s=l?i[1].valueType:i[0].valueType,!r(s))throw f.dotLHSTypeError("."+n,m.prettyPrint(s));var u=l?1:0;if(o<a.dotMinArity){if(c)throw f.randomArity();throw f.wrongArity("."+n,a.dotMinArity-u,o-u,a.dotMinArityUsageExample)}if(o>a.dotMaxArity){if(c)throw f.randomArity();throw f.wrongArity("."+n,a.dotMaxArity-u,o-u,a.dotMaxArityUsageExample)}}function o(e,n,r,o,a){var s=t(r,o,a);return i(a,e,n,s),a[e].getConcreteInvocationTree(o,a,s,n)}function a(e,t){return e.isError?e:-1===t.indexOf(e.valueType)?f.parseError():e}function s(e,t,n){if(!t)return void(n.valids[e]=!0);var r=t.getDependencies();if(t.isError)n.errors[e]=!0;else if(r.length>0){n.errors[e]=!0;for(var i=0;i<r.length;i++)r[i]===n.exportedSymbol?n.errors.cycle=!0:n.missingVars.push(r[i])}else n.values[e]=+t.asValue();n.valids[e]=isFinite(n.values[e]),n.valids[e]||(n.values[e]=void 0)}function c(e){return e&&e.valueType===m.ListOfNumber&&1===e.length&&e.args?e.args[0]:e}function l(e,t,n,r,i,o){if(r<t.length&&!v.approx(o,t.elementAt(e,r).asValue(),10))throw f.nonArithmeticRange();if(i-r<=n.length&&i-r>1&&!v.approx(o,n.elementAt(e,n.length-i+r).asValue(),10))throw f.nonArithmeticRange()}function u(e,t){for(var n=!1,r=!1,i=!1,o=0;o<e.length;o++){var a=e[o];(a.isList||a.isBroadcast)&&(r=!0,0===a.length&&(i=!0));for(var s=a.getDependencies(),c=0;c<s.length;c++)if(-1!==t.indexOf(s[c])){if(a.isList||a.isBroadcast)return"list"}else n=!0}return r?i?"empty":n?"broadcast":"list":"none"}function d(e){var t,n=[],r=[],i=[];for(t=0;t<e.length;t++){var o,a=e[t];if(a.isList){for(var s=!1,c=0;c<i.length;c++)if(a===i[c]){s=!0,o=h.DummyIndex(r[c]),o.valueType=m.elementType(a.valueType),n.push(o);break}if(!s){var l=h.Base.prototype.tmpVar();r.push(l),i.push(a),o=h.DummyIndex(l),o.valueType=m.elementType(a.valueType),n.push(o)}}else a.isBroadcast?(Array.prototype.push.apply(r,a._replacedSymbols),Array.prototype.push.apply(i,a._lists),n.push(a._expression)):n.push(a)}return{replacedArgs:i,concreteArgs:n,replacedSymbols:r}}function p(e,t){if(!t[this._symbol])throw f.functionUnsupported(this._symbol);var n=this.args.map(function(n){return n.getConcreteTree(e,t)});if(n.length>0){if(1===n.length&&n.push(h.Constant(1)),n[1].getDependencies().length)throw f.illegalBinWidth(this._symbol).setDependencies(n[1].getDependencies());if(n[1].valueType!==m.Number)throw f.illegalBinWidth(this._symbol);var r=n[1].asValue();if(!isFinite(r)||r<=0)throw f.illegalBinWidth(this._symbol)}return this.typeCheck(e,n),new this.constructor(n)}var h=e("parsenodes"),f=e("core/math/errormsg"),m=e("core/math/types"),g=e("core/lib/label"),y=e("core/math/builtin"),v=e("core/math/distance"),b=e("core/math/maybe-rational"),x=b.maybeRational,E=e("core/math/rational-arithmetic-sequence"),w=h.List,_=h.Range,S=h.OrderedPair,M=h.ScalarExpression,k=h.Constant,C=h.ExtendSeed,I=h.Multiply,T=h.Identifier,L=h.DummyIndex,D=h.BuiltInFunction,P=e("core/math/sliders");h.Base.prototype.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){e=t instanceof h.Base?t:f.parseError()}return e},h.Base.prototype.getConcreteTree=function(e,t,n){if(this.isConcreteTreeCacheValid(t))return this.__cachedConcreteTree.value;for(var r=this._getConcreteTree(e,t,n),i={},o=this.getCacheKeys().slice();;){if(!o.length)break;var a=o.pop();if(!i.hasOwnProperty(a)){var s=t[a];i[a]=s,s&&Array.prototype.push.apply(o,s.getCacheKeys())}}return this.__cachedConcreteTree={keys:i,value:r},r},h.Base.prototype.getCacheKeys=function(){return this.getDependencies()},h.Histogram.prototype.getCacheKeys=n,h.Object3D.prototype.getCacheKeys=n,h.DotPlot.prototype.getCacheKeys=n,h.BoxPlot.prototype.getCacheKeys=n,h.TTest.prototype.getCacheKeys=n,h.IndependentTTest.prototype.getCacheKeys=n,h.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},h.PercentOf.prototype._getConcreteTree=function(e,t){return h.Divide([h.Multiply(this.args),h.Constant(x(100,1))]).getConcreteTree(e,t)},h.Assignment.prototype._getConcreteTree=function(e,t){return this._expression.getConcreteTree(e,t)},h.Identifier.prototype._getConcreteTree=function(e,t){var n=g.latexToIdentifier(this.getInputString()),r=t[this._symbol];if(r){if(r.isError)throw r;if(r.isFunction)throw f.identifierAsFunction(n);return r.getConcreteTree(e,t)}if(D.hasOwnProperty(this._symbol))throw f.functionUnsupported(n);return h.FreeVariable(this._symbol)},h.Ans.prototype._getConcreteTree=function(e,t){if(void 0===t[this._symbol])throw f.ansUndefined();return T.prototype._getConcreteTree.call(this,e,t)},h.Equation.prototype._getConcreteTree=function(e,t){return this.asComparator().getConcreteTree(e,t)},h.Constant.prototype._getConcreteTree=function(e,t){return new this.constructor(this._constantValue)},h.Seed.prototype._getConcreteTree=function(e,t){return new this.constructor(this._stringValue)},h.Derivative.prototype._getConcreteTree=function(e,t){var n;if(t[this._symbol]){var r=Object.create(t);r[this._symbol]=h.FreeVariable(this._symbol);var i=t[this._symbol].getConcreteTree(e,t);if(i.valueType!==m.Number&&i.valueType!==m.ListOfNumber)throw f.derivativeVariableTypeError(this._symbol,[m.prettyPrint(i.valueType)]);var o={};return o[this._symbol]=i,n=this.args[0].getConcreteTree(e,r),this.typeCheck(e,[n]),n.takeDerivative(this._symbol).substitute(o).getConcreteTree(e,t)}return n=this.args[0].getConcreteTree(e,t),this.typeCheck(e,[n]),n.takeDerivative(this._symbol).getConcreteTree(e,t)},h.DoubleInequality.prototype._getConcreteTree=function(e,t){return new this.constructor([h.Piecewise([this._indicator,this._expressions[0],k(NaN)]).getConcreteTree(e,t),this._operators[0],T(this._symbol),this._operators[1],h.Piecewise([this._indicator,this._expressions[1],k(NaN)]).getConcreteTree(e,t)])},h.Expression.prototype._getConcreteTree=function(e,n){var r=t(this.args,e,n);return this.typeCheck(e,r),this._constantCollapsedCopy(e,r)},h.Error.prototype._getConcreteTree=function(e,t){return this},h.FreeVariable.prototype._getConcreteTree=function(e,t){return this},h.FunctionCall.prototype._getConcreteTree=function(e,n){var r="logbase"===this._symbol?"log":g.latexToIdentifier(this._identifier.getInputString()),i=n[this._symbol];if(i&&i.isError)throw i;if(!i||!i.isFunction){if(D.hasOwnProperty(this._symbol))throw"logbase"===this._symbol&&n.ln&&n.log?f.logbaseUnsupported():f.functionUnsupported(r);if(i&&i.getConcreteTree(e,n).valueType===m.Distribution)throw f.distributionAsFunction(i._symbol);if(1==this.args.length){var o=[T(this._symbol),this.args[0]];return I(o).getConcreteTree(e,n)}if(i)throw f.variableAsFunction(r);throw f.functionNotDefined(r)}var a=t(this.args,e,n);return i.getConcreteInvocationTree(e,n,a,r)},h.DotAccess.prototype._getConcreteTree=function(e,t){var n,r,i=this.args[0],a=this.args[1];if(a instanceof h.Identifier)return"x"===a._symbol?h.OrderedPairAccess([i,h.Constant(1)]).getConcreteTree(e,t):"y"===a._symbol?h.OrderedPairAccess([i,h.Constant(2)]).getConcreteTree(e,t):(r=g.latexToIdentifier(a.getInputString()),n=[i],o(a._symbol,r,n,e,t));if(a instanceof h.SeededFunctionCall)return r=g.latexToIdentifier(a._identifier.getInputString()),n=[a.seed,i].concat(a.args.slice(1)),o(a._symbol,r,n,e,t);if(a instanceof h.FunctionCall)return"x"===a._symbol&&1===a.args.length?h.Multiply([h.OrderedPairAccess([i,h.Constant(1)]),a.args[0]]).getConcreteTree(e,t):"y"===a._symbol&&1===a.args.length?h.Multiply([h.OrderedPairAccess([i,h.Constant(2)]),a.args[0]]).getConcreteTree(e,t):(r=g.latexToIdentifier(a._identifier.getInputString()),n=[i].concat(a.args),o(a._symbol,r,n,e,t));throw f.unexpectedSymbol(".")},h.DotAccessExponent.prototype._getConcreteTree=function(e,t){return"FunctionCall"!==this.args[1].type||1!==this.args[1].args.length||t[this.args[1]._symbol]&&t[this.args[1]._symbol].isFunction?h.Exponent([h.DotAccess([this.args[0],this.args[1]]),this.args[2]]).getConcreteTree(e,t):h.Multiply([h.DotAccess([this.args[0],h.Identifier(this.args[1]._symbol)]),h.Exponent([this.args[1].args[0],this.args[2]])]).getConcreteTree(e,t)},h.FunctionExponent.prototype._getConcreteTree=function(e,t){var n=this.args[0]._symbol;return t[n]&&t[n].isFunction?h.Exponent([h.FunctionCall(n,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):I([this.args[0],h.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},h.FunctionFactorial.prototype._getConcreteTree=function(e,t){var n=this.args[0]._symbol;return t[n]&&t[n].isFunction?h.FunctionCall("\\factorial",[h.FunctionCall(n,[this.args[1]])]).getConcreteTree(e,t):I([this.args[0],h.FunctionCall("\\factorial",[this.args[1]])]).getConcreteTree(e,t)},h.FunctionDefinition.prototype._getConcreteTree=function(e,t){for(var n=0;n<this._argSymbols.length;n++){if(t[this._argSymbols[n]])throw f.parameterAlreadyDefined(this._argSymbols[n]);if(this._argSymbols[n]===this._symbol)throw f.parameterAlreadyDefined(this._argSymbols[n])}return this._expression.getConcreteTree(e,t)},h.Image.prototype._getConcreteTree=function(e,t){var n=this.center.tryGetConcreteTree(e,t),r=this.radianAngle.tryGetConcreteTree(e,t),i=this.width.tryGetConcreteTree(e,t),o=this.height.tryGetConcreteTree(e,t),s=this.opacity.tryGetConcreteTree(e,t),c=[m.Point,m.ListOfPoint],l=[m.Number,m.ListOfNumber];return n=a(n,c),r=a(r,l),i=a(i,l),o=a(o,l),s=a(s,l),h.Image({center:n,radianAngle:r,width:i,height:o,opacity:s},this.moveStrategy)},h.Slider.prototype._getConcreteTree=function(e,t){var n=this._expression.getConcreteTree(e,t),r=c(this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t)),i=c(this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t)),o=c(this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t)),a={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};if(s("min",r,a),s("max",i,a),s("step",o,a),o&&a.valids.step&&(0===a.values.step?delete a.values.step:a.values.step=Math.abs(a.values.step)),a.errors.cycle?n=f.sliderLimitReferencesExport(a.exportedSymbol):(a.errors.min||!a.valids.min?a.errMsg=f.sliderMinInvalid():a.errors.max||!a.valids.max?a.errMsg=f.sliderMaxInvalid():!a.errors.step&&a.valids.step||(a.errMsg=f.sliderStepInvalid()),a.values.min>a.values.max&&(a.valids.min=!1,a.valids.max=!1,a.errMsg||(a.errMsg=f.sliderMaxLessThanMin()))),n.isConstant){var l=t.initialEvaluation&&t.initialEvaluation.asValue(),u=l&&this.sliderIsPlayingOnce,d=a.values.max,p=n.asValue(),h=a.values.min,m=a.values.step;if(u&&!isFinite(d)){var g=c(this.sliderSoftMax&&this.sliderSoftMax.tryGetConcreteTree(e,t));g&&(d=P.computeSoftMax({storedMax:g.asValue(),sliderValue:p,step:m,hardMin:h}))}var y=P.constrainSliderValueLikeEvaluator({target:p,hardMin:h,hardMax:d,step:m,forceSliderToMax:u}),v=b.fromDecimalString(y.toString()),x=isFinite(b.asFloat(v))?v:y;n=k(x)}return n.sliderInfo=a,n},h.Integral.prototype._getConcreteTree=function(e,t){if(t[this._differential._symbol])throw f.shadowedIntegrationVariable(this._differential._symbol);var n=this.args[0],r=this.args[1].getConcreteTree(e,t),i=this.args[2].getConcreteTree(e,t);if(r.dependsOn(n._symbol)||i.dependsOn(n._symbol))throw f.badIntegralBoundDependency(n._symbol);var o=Object.create(t);return o[this._differential._symbol]=L(this._differential._symbol),M.prototype._getConcreteTree.call(this,e,o)},h.ListAccess.prototype._getConcreteTree=function(e,t){var n,r=this.list.getConcreteTree(e,t);if(this.index instanceof _&&this.index.isHalfEmpty()){if(n=_([this.index.beginning,w([k(x(r.length,1))])]).getConcreteTree(e,t),Math.round(+n.args[0].asValue())>r.length)return w([])}else n=this.index.getConcreteTree(e,t);var i=[r,n];this.typeCheck(e,i);var o=n.getDependencies();if(o.length){if(n.isList)throw f.variableListIndicies(o);if(n.valueType===m.ListOfBool)throw f.variableFilter(o)}if(n.isList){var a=[],s=0;if(n.valueType===m.ListOfNumber){for(;s<n.length;s++){var c=n.args[s];a.push(r.elementAt(e,c.asValue()-1))}return w(a)}if(n.valueType===m.ListOfBool){for(;s<n.length;s++){n.args[s]._constantValue&&a.push(r.elementAt(e,s))}return w(a)}}return this._constantCollapsedCopy(e,i)},h.List.prototype._getConcreteTree=function(e,n){var r=t(this.args,e,n);return this.typeCheck(e,r),new this.constructor(r)},h.ParametrizedReducerFunction.prototype._getConcreteTree=function(e,n){if(this.args[0]instanceof h.List&&this.args[0].valueType===m.ListOfDistribution)return h.List(h.List.mapArgs(e,[this.args[0]],function(t){return this.copyWithArgs([t[0],this.args[1]]).getConcreteTree(e,n)}.bind(this)));if(this.args[0]instanceof h.Distribution)return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(e,n);var r=t(this.args,e,n);switch(u([r[1]],this.getDummyDependencies())){case"none":return this.typeCheck(e,r),this._constantCollapsedCopy(e,r);case"empty":return h.List([]);case"list":return h.List(h.List.mapArgs(e,[r[1]],function(t){return t=[r[0]].concat(t),this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var i=d([r[1]]),o=[r[0]].concat(i.concreteArgs);return this.typeCheck(e,o),h.Broadcast(i.replacedSymbols,[this.copyWithArgs(o)].concat(i.replacedArgs))}},h.Prime.prototype._getConcreteTree=function(e,t){var n=this.args[0],r=n.args[0];if(!t[n._symbol])throw f.functionNotDefined(n._symbol);var i,o=this.tmpVar();if("logbase"===n._symbol){if(2!==n.args.length)throw f.primedFunctionArity();i=[T(o),n.args[1]]}else{if(1!==n.args.length)throw f.primedFunctionArity();i=[T(o)]}for(var a=n.copyWithArgs(i).getConcreteTree(e,t),s=0;s<this.order;s++)a=a.takeDerivative(o);var c={};return c[o]=r,a.substitute(c).getConcreteTree(e,t)},h.Range.prototype._getConcreteTree=function(e,t){var n=this.beginning.getConcreteTree(e,t),r=this.end.getConcreteTree(e,t);if(n.getDependencies().length)throw f.variableRange(n.getDependencies());if(r.getDependencies().length)throw f.variableRange(r.getDependencies());if(!n.isList||!r.isList)throw new Error("Programming Error: range bounds must be List nodes.");var i,o,a=n.elementAt(e,0).asValue(),s=r.elementAt(e,r.length-1).asValue(),c=s-a;if(1===n.length)i=c>=0?1:-1;else{var u=n.elementAt(e,1).asValue();o=E(a,u),i=n.elementAt(e,1).asValue()-a}var d=Math.round(c/i)+1;if(!isFinite(d)||d<n.length||d<r.length)throw f.nonArithmeticRange();var p,h,m=[];if(o){var g=o.nstart;for(p=0;p<d;p++)l(e,n,r,p,d,g/o.lcm),m.push(k(x(g,o.lcm))),g+=o.nstep}else for(m.push(k(a)),p=1;p<d;p++)h=a+p*i,l(e,n,r,p,d,h),m.push(k(x(h,1)));return w(m)},h.ReducerFunction.prototype._getConcreteTree=function(e,n){if(this.args[0]instanceof h.List&&this.args[0].valueType===m.ListOfDistribution&&"length"!==this._symbol)return h.List(h.List.mapArgs(e,this.args,function(t){return this.copyWithArgs(t).getConcreteTree(e,n)}.bind(this)));if(this.args[0]instanceof h.Distribution&&"length"!==this._symbol)return this.args[0][this._symbol]().getConcreteTree(e,n);var r=t(this.args,e,n);if(1===this.args.length)return r=[h.List.wrap(r[0])],this.typeCheck(e,r),this._constantCollapsedCopy(e,r);switch(u(r,this.getDummyDependencies())){case"none":return r=[h.List(r)],this.typeCheck(e,r),this._constantCollapsedCopy(e,r);case"empty":return h.List([]);case"list":return h.List(h.List.mapArgs(e,r,function(t){return t=[h.List(t)],this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var i=d(r);return r=[h.List(i.concreteArgs)],this.typeCheck(e,r),h.Broadcast(i.replacedSymbols,[this.copyWithArgs(r)].concat(i.replacedArgs))}},h.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t[this._index._symbol])throw f.shadowedIndex(this._index._symbol);var n=this.args[1].getConcreteTree(e,t),r=this.args[2].getConcreteTree(e,t);if(n.dependsOn(this._index._symbol)||r.dependsOn(this._index._symbol))throw this instanceof h.Sum?f.badSumBoundDependency(this._index._symbol):this instanceof h.Product?f.badProductBoundDependency(this._index._symbol):f.parseError();var i=Object.create(t);return i[this._index._symbol]=L(this._index._symbol),M.prototype._getConcreteTree.call(this,e,i)};var A=function(e,n){var r=t(this.args,e,n);switch(u(r,this.getDummyDependencies())){case"none":return this.typeCheck(e,r),this._constantCollapsedCopy(e,r);case"empty":return h.List([]);case"list":return h.List(h.List.mapArgs(e,r,function(t){return this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var i=d(r);return this.typeCheck(e,i.concreteArgs),h.Broadcast(i.replacedSymbols,[this.copyWithArgs(i.concreteArgs)].concat(i.replacedArgs))}};h.ScalarExpression.prototype._getConcreteTree=A,h.Object3D.prototype._getConcreteTree=A,h.Regression.prototype._getConcreteTree=function(e,t){return new this.constructor(this._lhs,this._rhs)},h.Polygon.prototype._getConcreteTree=function(e,t){var n=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,n),1===n.length&&n[0].valueType===m.ListOfPoint?new this.constructor(n):n.every(function(e){return e.valueType===m.Point})?new this.constructor([w(n)]):2===n.length?new this.constructor([S(this.args).getConcreteTree(e,t)]):f.parseError()},h.Histogram.prototype._getConcreteTree=p,h.DotPlot.prototype._getConcreteTree=p,h.BoxPlot.prototype._getConcreteTree=function(e,t){if(!t[this._symbol])throw f.functionUnsupported(this._symbol);var n=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,n),1!==n.length||n[0].valueType!==m.ListOfNumber&&n[0].valueType!==m.EmptyList?f.parseError():new this.constructor(n)},h.TTest.prototype._getConcreteTree=function(e,t){if(!t[this._symbol])throw f.functionUnsupported(this._symbol);var n=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,n),new this.constructor(n)},h.IndependentTTest.prototype._getConcreteTree=function(e,t){if(!t[this._symbol])throw f.functionUnsupported(this._symbol);var n=this.args.map(function(n){return n.getConcreteTree(e,t)});return this.typeCheck(e,n),new this.constructor(n)},h.SolvedEquation.prototype._getConcreteTree=function(e,t){return new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},h.Table.prototype._getConcreteTree=function(e,t){for(var n=[],r=Object.create(t),i=0;i<this.columns.length;i++){var o=this.columns[i].getConcreteTree(e,r,t);o.isIndependent&&this.columns[i].exportToLocal(o,r),n.push(o)}return new this.constructor(n)},h.TableColumn.prototype._getConcreteTree=function(e,t,n){var r,i,o=this.header.getConcreteTree(e,t);if(o.isFreeVariable){r=[];for(var a=0;a<this.values.length;a++)if(this.values[a].tableError())r.push(f.invalidTableEntry(this.values[a].tableError()));else{var s=this.values[a].tryGetConcreteTree(e,t);s.isError?r.push(s):s.tableError()?r.push(f.invalidTableEntry(s.tableError())):s.valueType===m.Number?r.push(s):r.push(f.tableEntryTypeError([m.prettyPrint(s.valueType)]))}return i=new this.constructor(o,this.length,r),i.isIndependent=!0,i}if(o.isConstant){for(var c=[],l=0;l<this.length;l++)c.push(o);r=c}else r=o.isList?o.args.slice():[];return o=this.header.getConcreteTree(e,n),o.isError||o.valueType===m.Number||o.valueType===m.ListOfNumber||o.valueType===m.EmptyList||(o=f.tableHeaderTypeError([m.prettyPrint(o.valueType)])),i=new this.constructor(o,this.length,r)},h.BuiltInFunction.pdf.prototype._getConcreteTree=function(e,t){if(this.args[0]instanceof w)return h.List(h.List.mapArgs(e,this.args,function(n){return this.copyWithArgs(n).getConcreteTree(e,t)}.bind(this)));if(this.typeCheck(e,this.args),!(this.args[0]instanceof h.Distribution))throw f.functionTypeError(this._symbol,[m.prettyPrint(this.args[0].valueType)]);return this.args[0].pdf([this.args[1]]).getConcreteTree(e,t)},h.BuiltInFunction.cdf.prototype._getConcreteTree=function(e,t){var n=this.args;if(2===n.length&&(n=[n[0],h.Constant(-1/0),n[1]]),n[0]instanceof h.List)return h.List(h.List.mapArgs(e,n,function(n){return this.copyWithArgs(n).getConcreteTree(e,t)}.bind(this)));if(this.typeCheck(e,n),!(n[0]instanceof h.Distribution))throw f.functionTypeError(this._symbol,[m.prettyPrint(n[0].valueType)]);return n[0].cdf(n.slice(1)).getConcreteTree(e,t)},h.BuiltInFunction.random.prototype._getConcreteTree=function(e,t){var n=this.args;(n.length<=1||!(n[1]instanceof h.Distribution)&&!(n[1]instanceof h.List)&&n.length<4)&&(n=[n[0],D.uniformdist([])].concat(n.slice(1)));var r=n[0],i=n[1],o=n[2],a=n[3];if(this.typeCheck(e,n.slice(1)),o&&o.getDependencies().length)throw f.variableSampleSize(o.getDependencies());if(a&&a.getDependencies().length)throw f.variableSeed(a.getDependencies());if(a&&(r=C("us",[r,a])),o){var s=o.asValue();if(s<1)throw f.badSampleSize();s=Math.round(s);for(var c,l=[],u=0;u<s;u++)c=C("lc",[r,k(x(u,1))]),l.push(i.sample([c]).getConcreteTree(e,t));return w(l)}return i.sample([r]).getConcreteTree(e,t)},h.BuiltInFunction.shuffle.prototype._getConcreteTree=function(e,t){var n=this.args;this.typeCheck(e,n.slice(1));var r=n[0],i=n[1],o=n[2];if(o&&o.getDependencies().length)throw f.variableSeed(o.getDependencies());o&&(r=C("us",[r,o]));var a;if("List"===i.type)return a=i.args.slice(),y.shuffle(r.asValue(),a),w(a);if("Broadcast"===i.type){for(var s=i,c=[s._expression],l=y.randomPerm(r.asValue(),s.length),u=0;u<s._lists.length;u++){a=[];for(var d=0;d<l.length;d++)a.push(s._lists[u].args[l[d]]);c.push(h.List(a))}return s.copyWithArgs(c)}throw f.parseError()},h.BuiltInFunction.sort.prototype._getConcreteTree=function(e,t){var n=this.args;if(1===n.length&&(n=n.concat(n[0])),this.typeCheck(e,n),0!==n[1].getDependencies().length)throw f.functionFreeVariable(this._errorSymbol,n[1].getDependencies()[0]);if("List"!==n[1].type)throw f.parseError();var r,i,o,a=n[1].asValue(),s=y.sortPerm(a);if("List"===n[0].type){for(r=[],i=0;i<Math.min(s.length,n[0].args.length);i++)r.push(n[0].args[s[i]]);return h.List(r)}if("Broadcast"===n[0].type){var c=[n[0]._expression];for(o=0;o<n[0]._lists.length;o++){r=[];var l=n[0]._lists[o].args;for(i=0;i<Math.min(s.length,l.length);i++)r.push(l[s[i]]);c.push(h.List(r))}return n[0].copyWithArgs(c)}throw f.parseError()},h.BuiltInFunction.join.prototype._getConcreteTree=function(e,t){var n=this.args;this.typeCheck(e,n);for(var r=[],i=0;i<n.length;i++){var o=n[i];if("Broadcast"===o.type&&(o=o.asList(e)),"List"===o.type)for(var a=0;a<o.args.length;a++)r.push(o.args[a]);else r.push(o)}return h.List(r)}}),define("core/math/features/getValueType",["require","parsenodes","core/math/types"],function(e){"use strict";function t(){return s.Number}function n(){return s.Bool}function r(){return s.Point}function i(){return s.Distribution}function o(){return s.Any}var a=e("parsenodes"),s=e("core/math/types"),c={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:n,Piecewise:function(e){return e[1].valueType},BaseComparator:n,RepeatedOperator:t,List:function(e){if(0===e.length)return s.EmptyList;for(var t=e[0].valueType,n=1;n<e.length;n++)if(e[n].valueType!==t)return s.ListOfAny;return s.hasListType(t)?s.listType(t):s.ListOfAny},ListAccess:function(e){return s.elementType(e[0].valueType)},Broadcast:function(e){return s.listType(e[0].valueType)},Seed:function(e){return s.SeedType},ExtendSeed:function(e){return s.SeedType},OrderedPairAccess:t,OrderedPair:r,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,Distribution:i,DummyIndex:t,FreeVariable:t,TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:o};for(var l in c)a[l].prototype._getValueType=c[l]}),define("core/math/features/typeCheck",["require","parsenodes","core/math/types","core/math/errormsg"],function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}function n(e){for(var t=[],n=0;n<e.length;n++)t.push(a.prettyPrint(e[n].valueType));return t}function r(e,t){return function(r,i){for(var o=0;o<i.length;o++)if(i[o].valueType!==e[o])throw t(n(i))}}function i(e,n){var r=n.length,i=n[0];if(r<2)throw s.methodRequiresList(this._symbol);if(!t(i.valueType,[a.ListOfNumber,a.EmptyList]))throw s.methodRequiresList(this._symbol);if(r>2)throw s.tooManyArguments(this._symbol,2)}var o=e("parsenodes"),a=e("core/math/types"),s=e("core/math/errormsg"),c={Add:r([a.Number,a.Number],s.addTypeError),Multiply:r([a.Number,a.Number],s.multiplyTypeError),Divide:r([a.Number,a.Number],s.divideTypeError),Subtract:r([a.Number,a.Number],s.subtractTypeError),Exponent:r([a.Number,a.Number],s.exponentTypeError),Negative:r([a.Number],s.negativeTypeError),BaseComparator:r([a.Number,a.Number],s.comparatorTypeError),And:r([a.Bool,a.Bool],s.andTypeError),ExtendSeed:function(e,n){if(2!==n.length||n[0].valueType!==a.SeedType||!t(n[1].valueType,[a.SeedType,a.Number]))throw s.functionUnsupported("random")},List:function(e,t){if(0!==t.length){var n=t[0].valueType;if(!a.hasListType(n))throw s.listTypeError([a.prettyPrint(n)]);for(var r=0;r<t.length;r++){var i=t[r].valueType;if(!a.hasListType(i))throw s.listTypeError([a.prettyPrint(i)]);if(i!==n)throw s.heterogeneousList()}}},Broadcast:function(e,t){},Distribution:function(e,t){},OrderedPair:function(e,t){if(0===t.length)throw s.emptyParen();if(e.dimensions&&t.length!==e.dimensions())throw s.badTupleDimensions(e.dimensions());for(var n=0;n<t.length;n++){var r=t[n].valueType;if(r!==a.Number)throw s.pointTypeError(a.prettyPrint(r))}},Piecewise:function(e,t){if(t[0].valueType!==a.Bool)throw s.piecewiseConditionTypeError(n(t));if(t[1].valueType!==a.Number)throw s.piecewiseBranchTypeError([a.prettyPrint(t[1].valueType)]);if(t[2].valueType!==a.Number)throw s.piecewiseBranchTypeError([a.prettyPrint(t[2].valueType)])},ListAccess:function(e,t){var r=a.isList(t[0].valueType),i=t[1].valueType,o=i===a.Number||i===a.ListOfNumber||i===a.ListOfBool;if(!r||!o)throw s.indexTypeError(n(t))},OrderedPairAccess:r([a.Point,a.Number],s.orderedPairAccessTypeError),Sum:function(e,t){if(t[1].valueType!==a.Number)throw s.sumLowerBoundTypeError([a.prettyPrint(t[1].valueType)]);if(t[2].valueType!==a.Number)throw s.sumUpperBoundTypeError([a.prettyPrint(t[2].valueType)]);if(t[3].valueType!==a.Number)throw s.sumArgumentTypeError([a.prettyPrint(t[3].valueType)])},Product:function(e,t){if(t[1].valueType!==a.Number)throw s.productLowerBoundTypeError([a.prettyPrint(t[1].valueType)]);if(t[2].valueType!==a.Number)throw s.productUpperBoundTypeError([a.prettyPrint(t[2].valueType)]);if(t[3].valueType!==a.Number)throw s.productArgumentTypeError([a.prettyPrint(t[3].valueType)])},Integral:function(e,t){if(t[1].valueType!==a.Number)throw s.integralLowerBoundTypeError([a.prettyPrint(t[1].valueType)]);if(t[2].valueType!==a.Number)throw s.integralUpperBoundTypeError([a.prettyPrint(t[2].valueType)]);if(t[3].valueType!==a.Number)throw s.integralArgumentTypeError([a.prettyPrint(t[3].valueType)])},NativeFunction:function(e,t){var r=this._errorSymbol,i=t.length,o="logbase"===this._symbol?1:0;if(i<this._requiredArity)throw s.wrongArity(r,this._requiredArity-o,i-o);if(i>this._maxArity)throw s.wrongArity(r,this._maxArity-o,i-o);for(var c=0;c<t.length;c++){if(t[c].valueType!==a.Number)throw s.functionTypeError(r,n(t))}},ReducerFunction:function(e,r){if(!t(r[0].valueType,[a.ListOfNumber,a.EmptyList]))throw s.functionTypeError(this._symbol,n(r))},DoubleReducerFunction:function(e,r){var i=r[0],o=r[1];if(!a.isList(i.valueType)||!a.isList(o.valueType))throw s.nonListDoubleReducer(this._symbol);if(!t(i.valueType,[a.ListOfNumber,a.EmptyList])||!t(o.valueType,[a.ListOfNumber,a.EmptyList]))throw s.functionTypeError(this._symbol,n(r))},ParametrizedReducerFunction:function(e,r){if(!t(r[0].valueType,[a.ListOfNumber,a.EmptyList]))throw s.nonListParametrizedReducer(this._symbol);if(r[1].valueType!==a.Number)throw s.functionTypeError(this._symbol,n(r))},TypedFunction:function(e,r){var i=this._errorSymbol,o=r.length,a="pdf"===this._symbol,c="cdf"===this._symbol;if(o<this._requiredArity){if(a)throw s.pdfWrongArity();if(c)throw s.cdfRequiresArguments()
;throw s.wrongArity(i,this._requiredArity,o)}if(o>this._maxArity){if(a)throw s.pdfWrongArity();if(c)throw s.cdfTooManyArguments();throw s.wrongArity(i,this._maxArity,o)}for(var l=0;l<r.length;l++){var u=r[l].valueType,d=this._inputTypes[l],p=Array.isArray(d);if(!p&&u!==d||p&&!t(u,d))throw s.functionTypeError(i,n(r))}},Derivative:function(e,r){if(!t(r[0].valueType,[a.Number,a.ListOfNumber,a.EmptyList]))throw s.derivativeTypeError(n(r))},Regression:function(e,r){if(!t(r[0].valueType,[a.Number,a.ListOfNumber])||!t(r[1].valueType,[a.Number,a.ListOfNumber]))throw s.regressionTypeError(n(r))},Polygon:function(e,t){if(1===t.length&&t[0].valueType!==a.ListOfPoint)throw s.polygonListTypeError(n(t));if(2===t.length&&t[0].valueType===a.Number&&t[1].valueType===a.Number)throw s.polygonTwoNumbersError();if(t.length>2&&!t.every(function(e){return e.valueType===a.Point}))throw s.polygonPointArgsError()},Object3D:function(e,t){if(t.length<3)throw s.wrongArity(this._symbol,3,t.length)},Histogram:i,DotPlot:i,BoxPlot:function(e,n){var r=n.length,i=n[0];if(0===r)throw s.methodRequiresList(this._symbol);if(!t(i.valueType,[a.ListOfNumber,a.EmptyList]))throw s.methodRequiresList(this._symbol);if(r>1)throw s.methodRequiresList(this._symbol)},TTest:function(e,t){var r=this._symbol;if(0===t.length)throw s.methodRequiresList(r);if(t[0].valueType===a.EmptyList)throw s.ttestListTooShort(r);if(t[0].valueType!==a.ListOfNumber)throw s.methodRequiresList(r);if(t.length>2)throw s.tooManyArguments(r,2);if(t[0].length<2)throw s.ttestListTooShort(r);if(t[1]&&t[1].valueType!==a.Number)throw s.functionTypeError(r,n(t))},IndependentTTest:function(e,t){var r=this._symbol;if(2!==t.length)throw s.wrongDoubleReducerArity(r);if(!a.isList(t[0].valueType)||!a.isList(t[1].valueType))throw s.nonListDoubleReducer(r);if(t[0].valueType===a.EmptyList||t[1].valueType===a.EmptyList)throw s.ttestListTooShort("ittest");if(t[0].valueType!==a.ListOfNumber||t[1].valueType!==a.ListOfNumber)throw s.functionTypeError(r,n(t));if(t[0].args.length<2||t[1].args.length<2)throw s.ttestListTooShort("ittest")},Stats:function(e,t){var r=t.length,i=t[0];if(0===r)throw s.methodRequiresList(this._symbol);if(i.valueType===a.EmptyList)throw s.functionTypeError(this._symbol,n(t));if(i.valueType!==a.ListOfNumber)throw s.methodRequiresList(this._symbol);if(r>1)throw s.methodRequiresList(this._symbol)}};for(var l in c)o[l].prototype.typeCheck=c[l];o.BuiltInFunction.random.prototype.typeCheck=function(e,t){var n=t.length,r=t[0],i=t[1],c=t[2];if(n>3)throw s.randomArity();if(!r)throw s.randomArity();if(!(r instanceof o.Distribution||r instanceof o.List))throw s.randomArity();if(r instanceof o.Distribution&&r.args&&(r.args[0]instanceof o.List||r.args[1]instanceof o.List))throw s.randomFromBroadcastDistribution();if(i&&i.valueType!==a.Number)throw s.randomArity();if(c&&c.valueType!==a.Number)throw s.randomArity()},o.BuiltInFunction.shuffle.prototype.typeCheck=function(e,t){var r=t.length;if(r<1)throw s.wrongArity(this._errorSymbol,1,r,this.minArityUsageExample);if(r>2)throw s.wrongArity(this._errorSymbol,2,r,this.maxArityUsageExample);if(!a.isList(t[0].valueType)||2===r&&t[1].valueType!==a.Number)throw s.functionTypeError(this._errorSymbol,n(t))},o.BuiltInFunction.length.prototype.typeCheck=function(e,t){if(1!==t.length||!a.isList(t[0].valueType))throw s.parseError()},o.BuiltInFunction.sort.prototype.typeCheck=function(e,r){var i=r.length;if(i<1)throw s.wrongArity(this._errorSymbol,1,i,this.minArityUsageExample);if(i>2)throw s.wrongArity(this._errorSymbol,2,i,this.maxArityUsageExample);if(!a.isList(r[0].valueType)||!t(r[1].valueType,[a.ListOfNumber,a.EmptyList]))throw s.functionTypeError(this._errorSymbol,n(r))},o.BuiltInFunction.join.prototype.typeCheck=function(e,t){var r=t.length;if(r<this._requiredArity)throw s.wrongArity(this._errorSymbol,this._requiredArity,r,this.minArityUsageExample);var i=t[0].valueType;a.isList(i)||(i=a.listType(i));for(var o=1;o<t.length;o++){var c=t[o].valueType;if(a.isList(c)||(c=a.listType(c)),c!==a.EmptyList&&(i===a.EmptyList&&(i=c),c!==i))throw s.functionTypeError(this._errorSymbol,n(t))}}}),define("core/math/features/repr",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),n=function(e,t,n){n=n||0;var r=Array(n+1).join("  "),i=r+"  ";return"[\n"+i+e.map(function(e){return e.repr(t,n+1)}).join(",\n"+i)+"\n"+r+"]"},r=function(e,t){return""+(t=t||"")+e};t.Expression.prototype.repr=function(e,t){return r(this.type,e)+"("+n(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var n=Array(t+1).join("  "),i=n+"  ";return r(this.type,e)+"([\n"+i+this.args[0].repr(e,t+1)+",\n"+i+"'"+this.args[1]+"',\n"+i+this.args[2].repr(e,t+1)+",\n"+i+"'"+this.args[3]+"',\n"+i+this.args[4].repr(e,t+1)+"\n"+n+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return r(this.type,e)+"('"+this._symbol+"')"},t.Constant.prototype.repr=function(e){return r(this.type,e)+"("+this.asValue()+")"},t.ExtendSeed.prototype.repr=function(e,t){return r(this.type,e)+"('"+this.tag+"', "+n(this.args,e,t)+")"},t.Seed.prototype.repr=function(e){return r(this.type,e)+"("+this.asValue()+")"},t.FunctionCall.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._symbol+"', "+n(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,n){return r(this.type,e)+"("+t.Identifier(this._symbol).repr(e,n)+", "+this._expression.repr(e,n)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return r(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return r(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+n(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._msg+"')"},t.Derivative.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._symbol+"', "+n(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return r(this.type,e)+"('"+this._symbol+"', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return r(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+")"},t.Table.prototype.repr=function(e,t){return r(this.type,e)+"("+n(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return r(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+n(this.values,e,t)+")"},t.Image.prototype.repr=function(e,t){var n=Array(t+1).join("  "),i=n+"  ";return r(this.type,e)+"({\n"+i+"center: "+this.center.repr(e,t+1)+",\n"+i+"radianAngle: "+this.radianAngle.repr(e,t+1)+",\n"+i+"width: "+this.width.repr(e,t+1)+",\n"+i+"height: "+this.height.repr(e,t+1)+"},\n"+i+"opacity: "+this.opacity.repr(e,t+1)+",\n"+i+JSON.stringify(this.moveStrategy)+"\n"+n+")"},t.Slider.prototype.repr=function(e,t){var n=Array(t+1).join("  "),i=n+"  ";return r(this.type,e)+"({\n"+i+"sliderAssignment: "+this.sliderAssignment.repr(e,t+1)+",\n"+i+"sliderMin: "+(this.sliderMin&&this.sliderMin.repr(e,t+1))+",\n"+i+"sliderMax: "+(this.sliderMax&&this.sliderMax.repr(e,t+1))+",\n"+i+"sliderStep: "+(this.sliderStep&&this.sliderStep.repr(e,t+1))+"},\n"+n+")"},t.Broadcast.prototype.repr=function(e,t){return r(this.type,e)+"(['"+this._replacedSymbols.join("', ")+"'], "+n(this.args,e,t)+")"}}),define("core/math/features/scalarEvalExpression",["require","parsenodes","core/math/functions"],function(e){"use strict";var t=e("parsenodes"),n=e("core/math/functions"),r={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var o in r){var a=t[o].prototype;a.scalarEvalExpression=r[o],a.evaluate=n.createEvaluateFunction(a.scalarEvalExpression,i[o])}}),define("core/math/reconstitute-node",["require","parsenodes","core/math/types"],function(e){"use strict";function t(e,i){if(r.isList(e)){for(var o=[],a=0;a<i.length;a++)o.push(t(r.elementType(e),i[a]));var s=n.List(o);return s.valueType=e,s}switch(e){case r.Number:case r.Bool:return n.Constant(i);case r.Point:return n.OrderedPair([n.Constant(i[0]),n.Constant(i[1])]);default:throw new Error("Cannot reconstitute value of a "+r.prettyPrint(e)+".")}}var n=e("parsenodes"),r=e("core/math/types");return t}),define("core/math/features/constantcollapsedcopy",["require","parsenodes","core/math/reconstitute-node","core/math/maybe-rational","core/math/errormsg"],function(e){"use strict";function t(e){if(!e.isConstant)return!1;var t=e.asValue();return"number"==typeof t&&!isFinite(t)}var n=e("parsenodes"),r=n.Constant,i=n.Multiply,o=n.Subtract,a=n.RawExponent,s=n.Seed,c=n.BuiltInFunction,l=e("core/math/reconstitute-node"),u=e("core/math/maybe-rational"),d=e("core/math/errormsg"),p={Expression:function(e,t){return this.copyWithArgs(t)},FreeVariable:function(e,t){return this},ScalarExpression:function(e,t){for(var n=[],i=0;i<t.length;i++){if(!t[i].isConstant&&!t[i].isString)return this.copyWithArgs(t);n.push(t[i].asValue())}return r(this.evaluate(n))},OrderedPair:function(e,t){return this.copyWithArgs(t)},Distribution:function(e,t){return this.copyWithArgs(t)},Add:function(e,t){return t[0].isConstant&&t[1].isConstant?r(u.add(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):0===t[0].asValue()?t[1]:0===t[1].asValue()?t[0]:this.copyWithArgs(t)},Multiply:function(e,t){return t[0].isConstant&&t[1].isConstant?r(u.mul(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):1===t[0].asValue()?t[1]:1===t[1].asValue()?t[0]:this.copyWithArgs(t)},Subtract:function(e,t){return t[0].isConstant&&t[1].isConstant?r(u.sub(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):0===t[0].asValue()?n.Negative([t[1]]):0===t[1].asValue()?t[0]:this.copyWithArgs(t)},Divide:function(e,t){return t[0].isConstant&&t[1].isConstant?r(u.div(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):1===t[1].asValue()?t[0]:this.copyWithArgs(t)},Exponent:function(e,t){if(t[0].isConstant&&t[1].isConstant)return r(u.pow(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue()));if(t[0].isConstant){if(t[0].asValue()===Math.E)return c.exp([t[1]]);if(t[0].asValue()>0)return a(t)}if(t[1].isConstant){var n=t[1].asValue();if(1===n)return t[0];if(n===Math.floor(n))return a(t);var o=t[1].asMaybeRationalValue();return u.isRational(o)?o.d%2==1?i([o.n%2==0?r(u.maybeRational(1,1)):c.sign([t[0]]),a([c.abs([t[0]]),t[1]])]):a(t):this.copyWithArgs(t)}return this.copyWithArgs(t)},RawExponent:function(e,t){return t[0].isConstant&&t[1].isConstant?r(u.pow(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},Negative:function(e,t){return t[0].isConstant?r(u.neg(t[0].asMaybeRationalValue())):t[0]instanceof n.Negative?t[0].args[0]:this.copyWithArgs(t)},And:function(e,t){return t[0].isConstant&&t[1].isConstant?r(t[0].asValue()&&t[1].asValue()):t[0].isConstant&&!0===t[0]?t[1]:t[0].isConstant&&!1===t[0]?r(!1):t[1].isConstant&&!0===t[1]?t[0]:t[1].isConstant&&!1===t[1]?r(!1):this.copyWithArgs(t)},Piecewise:function(e,t){return t[0].isConstant&&!0===t[0].asValue()?t[1]:t[0].isConstant&&!1===t[0].asValue()?t[2]:this.copyWithArgs(t)},Integral:function(e,n){var a=n[0],s=n[1],c=n[2],l=n[3];if(t(s)||t(c))throw d.integralInfiniteBoundError();var u=l.getDependencies();if(s.isConstant&&c.isConstant){var p=c.asValue()-s.asValue();if(l.isConstant)return r(l.asValue()*p);if(!l.dependsOn(a._symbol))return i([l,r(p)]);if(1===u.length&&u[0]===a._symbol)return r(this.evaluate(s.asValue(),c.asValue(),l))}else if(!l.dependsOn(a._symbol))return i([l,o([c,s])]);return this.copyWithArgs(n)},ListAccess:function(e,t){return t[1].isConstant?t[0].elementAt(e,t[1].asValue()-1):this.copyWithArgs(t)},OrderedPairAccess:function(e,t){return t[1].isConstant&&t[0]instanceof n.OrderedPair?t[0].elementAt(e,t[1].asValue()-1):this.copyWithArgs(t)},Broadcast:function(e,t){var n,r=t[0].getDependencies();for(n=0;n<r.length;n++)if(-1===this._replacedSymbols.indexOf(r[n]))return this.copyWithArgs(t);for(n=1;n<t.length;n++)if(0!==t[n].getDependencies().length)return this.copyWithArgs(t);var i=t[0].getCompiledFunction(this._replacedSymbols).fn,o=t.slice(1).map(function(e){return e.asValue()}),a=[];for(n=0;n<this.length;n++){for(var s=[],c=0;c<o.length;c++)s.push(o[c][n]);a.push(i.apply(void 0,s))}return l(this.valueType,a)},ReducerFunction:function(e,t){return 0===t[0].getDependencies().length?l(this.valueType,this.evaluate([t[0].asValue()])):this.copyWithArgs(t)},DoubleReducerFunction:function(e,t){if(0===t[0].getDependencies().length&&0===t[1].getDependencies().length){var n=Math.min(t[0].length,t[1].length);return l(this.valueType,this.evaluate([t[0].asValue().slice(0,n),t[1].asValue().slice(0,n)]))}return this.copyWithArgs(t)},ParametrizedReducerFunction:function(e,t){var n=t[0],r=t[1];return r.isConstant&&0===n.getDependencies().length?l(this.valueType,this.evaluate([n.asValue(),r.asValue()])):this.copyWithArgs(t)},RepeatedOperator:function(e,n){var i=n[1],o=n[2];if(t(i)||t(o))switch(this.type){case"Sum":throw d.sumInfiniteBoundError();case"Product":throw d.productInfiniteBoundError();default:throw d.parseError()}if(i.isConstant&&o.isConstant){var a=i.asValue(),s=o.asValue(),c=n[3];if(c.isConstant)return r(this.evaluateConstant([a,s,c.asValue()]));var l=c.getDependencies();if(0===l.length||1===l.length&&l[0]===n[0]._symbol)return r(this.evaluate(a,s,c))}return this.copyWithArgs(n)},ExtendSeed:function(e,t){var n=t[0],r=t[1];return 0===n.getDependencies().length&&0===r.getDependencies().length?s(n.asValue()+"::"+this.tag+r.asValue()):this.copyWithArgs(t)}};for(var h in p)n[h].prototype._constantCollapsedCopy=p[h];c.mod.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant&&t[1].isConstant?r(u.mod(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},c.sqrt.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant?r(u.sqrt(t[0].asMaybeRationalValue())):this.copyWithArgs(t)},c.nthroot.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant&&t[1].isConstant?r(u.nthroot(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},c.abs.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant?r(u.abs(t[0].asMaybeRationalValue())):this.copyWithArgs(t)},c.total.prototype._constantCollapsedCopy=function(e,t){if(!t[0].isList)return this.copyWithArgs(t);for(var n=t[0].args,i=0;i<n.length;i++)if(!n[i].isConstant)return this.copyWithArgs(t);return r(u.total(t[0].asMaybeRationalValue()))},c.distance.prototype._constantCollapsedCopy=function(e,t){return 0===t[0].getDependencies().length&&0===t[1].getDependencies().length?r(this.evaluate([t[0].asArray(),t[1].asArray()])):this.copyWithArgs(t)},c.midpoint.prototype._constantCollapsedCopy=function(e,t){if(0===t[0].getDependencies().length&&0===t[1].getDependencies().length){var i=this.evaluate([t[0].asArray(),t[1].asArray()]);return n.OrderedPair([r(i[0]),r(i[1])])}return this.copyWithArgs(t)}}),define("core/math/features/polynomialorder",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),n={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"};for(var r in n){var i=n[r];t[r].prototype.polynomialOrder=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)}(i)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),n=this.args[1].polynomialOrder(e);if(0===t&&0===n)return 0;var r=this.args[1];return r.isConstant&&r.asValue()===Math.round(r.asValue())&&r.asValue()>0?t*r.asValue():1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(e):1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("core/math/features/polynomialcoefficients",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),n=e("core/math/maybe-rational").maybeRational,r=t.Constant(n(0,1)),i=t.Constant(n(1,1));t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[r,i]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=n.length-1,o=r.length-1,a=[],s=0;s<=Math.max(i,o);s++)i>=s&&o>=s?a.push(t.Add([n[s],r[s]])):a.push(i>o?n[s]:r[s]);return a},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=n.length-1,o=r.length-1,a=[],s=0;s<=Math.max(i,o);s++)i>=s&&o>=s?a.push(t.Subtract([n[s],r[s]])):a.push(i>o?n[s]:t.Negative([r[s]]));return a},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=[],i=0;i<n.length;i++)r.push(t.Negative([n[i]]));return r},t.Exponent.prototype.getPolynomialCoefficients=function(e){var n=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),o=n.length-1;if(i.length-1>0)throw"can't solve for variable in exponent";if(0===o)return[t.Exponent([n[0],i[0]])];if(this.args[1].isConstant){switch(this.args[1].asValue()){case 0:return[r];case 1:return n;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=n.length-1,o=r.length-1,a=[],s=0;s<=i;s++)for(var c=0;c<=o;c++){var l=t.Multiply([n[s],r[c]]),u=a[s+c];a[s+c]=void 0===u?l:t.Add([u,l])}return a},t.Divide.prototype.getPolynomialCoefficients=function(e){var n=this.args[0].getPolynomialCoefficients(e),r=this.args[1].getPolynomialCoefficients(e),i=r.length-1,o=[];if(i>0)throw"Can't solve for variable in denominator";for(var a=0;a<n.length;a++)o.push(t.Divide([n[a],r[0]]));return o},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){return this.dependsOn(e)?this.args[1].getPolynomialCoefficients(e):[this]}}),define("core/math/features/extractconditions",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){if(!this.dependsOn(e))return t;for(var n=0;n<this.args.length;n++){t=this.args[n].extractConditions(e,t)}return t},t.Piecewise.prototype.extractConditions=function(e,n){if(!this.dependsOn(e))return n;if(!this.args[0].dependsOn(e))return n=this.args[1].extractConditions(e,n),n=this.args[2].extractConditions(e,n);var r={};return r[e]=n,t.Piecewise([this.args[0].substitute(r),n,t.Constant(NaN)])}}),define("core/math/features/piecewiseDependsOn",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes");t.Expression.prototype.piecewiseDependsOn=function(e){if(!this.dependsOn(e))return!1;for(var t=0;t<this.args.length;t++){if(this.args[t].piecewiseDependsOn(e))return!0}return!1},t.Piecewise.prototype.piecewiseDependsOn=function(e){return this.dependsOn(e)}}),define("core/math/domaintypes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectDomains=t.allReals=t.knownDomain=t.unknownDomain=t.emptyDomain=void 0,t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t.emptyDomain():{type:"known",bounds:e}},t.allReals=function(){return t.knownDomain([-1/0,1/0])},t.intersectDomains=function(e,n){if("empty"===e.type||"empty"===n.type)return t.emptyDomain();if("unknown"===e.type||"unknown"===n.type)return t.unknownDomain();if(e.bounds&&n.bounds){var r=[Math.max(e.bounds[0],n.bounds[0]),Math.min(e.bounds[1],n.bounds[1])];return t.knownDomain(r)}return t.emptyDomain()}}),define("core/math/features/bounddomain",["require","parsenodes","core/math/builtinframe","core/math/domaintypes","core/math/comparators","core/math/maybe-rational","core/math/policy"],function(e){"use strict";var t=e("parsenodes"),n=e("core/math/builtinframe"),r=e("core/math/domaintypes"),i=e("core/math/comparators").table,o=e("core/math/maybe-rational").maybeRational,a=e("core/math/policy").defaultPolicy,s=t.Constant(o(0,1));t.Base.prototype.boundDomain=function(e){return r.unknownDomain()},t.List.prototype.boundDomain=function(e){if(!this.dependsOn(e))return r.allReals();if(!this.args.length)return r.allReals();var t=this.args[0].boundDomain(e);if("known"!==t.type)return r.unknownDomain();for(var n=0;n<this.args.length;n++){var i=this.args[n].boundDomain(e);if("known"!==i.type)return r.unknownDomain();if(i.bounds[0]!==t.bounds[0]||i.bounds[1]!==t.bounds[1])return r.unknownDomain()}return t},t.Expression.prototype.boundDomain=function(e){for(var t=r.allReals(),n=0;n<this.args.length;n++)t=r.intersectDomains(t,this.args[n].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?r.emptyDomain():r.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].asValue())?r.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):r.unknownDomain()},t.OrderedPair.prototype.boundDomain=function(e){return r.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e))},t.BaseComparator.prototype.boundDomain=function(e){if(!this.dependsOn(e))return r.allReals();if("="===this.operator)return r.unknownDomain();var t=this._difference,o=this._difference.boundDomain(e);if(t.polynomialOrder(e)>1)return r.unknownDomain();var c=t.getPolynomialCoefficients(e),l=c[1]?c[1].getConcreteTree(a,n):s,u=c[0]?c[0].getConcreteTree(a,n):s;if(!l.isConstant||!u.isConstant)return r.unknownDomain();if(isNaN(l.asValue())||isNaN(u.asValue()))return r.emptyDomain();if(0===l.asValue())return i[this.operator].inclusive?u.asValue()>=0?o:r.emptyDomain():u.asValue()>0?o:r.emptyDomain();var d=-u.asValue()/l.asValue(),p=l.asValue()<0?[-1/0,d]:[d,1/0];return r.intersectDomains(o,r.knownDomain(p))}}),define("core/math/policyGraphing",["require","exports","./builtinframe","core/types/graphmode"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyGraphing3D=t.PolicyGraphing=void 0;var i=function(){function e(){}return e.prototype.dimensions=function(){return 2},e.prototype.assignmentForbidden=function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||n.hasOwnProperty(e)},e.prototype.isValidSlider=function(e){return"x"===e||"y"===e||"ans"!==e.slice(0,3)&&!this.assignmentForbidden(e)},e.prototype.sliderVariables=function(e){var t=this;return-1!==e.indexOf("theta")&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!t.assignmentForbidden(e)&&"ans"!==e.slice(0,3)})},e.prototype.graphingEnabled=function(){return!0},e.prototype.ansEnabled=function(){return!1},e.prototype.validRegressionParameter=function(e){return"x"!==e&&"y"!==e},e.prototype.validLHS=function(e){return"theta"!==e},e.prototype.unplottablePolarFunction=function(e,t){return"theta"===e&&-1!==t.indexOf("r")},e.prototype.validDoubleInequalitySymbol=function(e){return"x"===e||"y"===e},e.prototype.validDoubleInequalityVariables=function(e){return!(e.length>2)&&e.every(this.validDoubleInequalitySymbol)},e.prototype.validExpressionVariables=function(e){return 1===e.length&&"x"===e[0]},e.prototype.validSolvedVariable=function(e){return"x"===e||"y"===e||"r"===e},e.prototype.validImplicitVariables=function(e){switch(e.length){case 0:return!0;case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1];default:return!1}},e.prototype.graphableListVariables=function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},e.prototype.validParametricVariable=function(e){return"t"===e},e.prototype.validParametricVariables=function(e){return 1===e.length&&this.validParametricVariable(e[0])},e.prototype.validInequalityVariables=function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return this.validImplicitVariables(e);default:return!1}},e.prototype.validFirstColumnVariable=function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\d+)/)},e.prototype.complicatedPolarImplicit=function(e,t){return"theta"===e||"r"===e&&1!==t},e.prototype.constantGraphMode=function(e){return"x"===e?r.X:"r"===e?r.POLAR:r.Y},e.prototype.graphMode=function(e,t){var n=t[0];return"y"===n?r.X:"x"===e?r.X:"r"===e&&"theta"===n?r.POLAR:r.Y},e.prototype.tableableAsConstant=function(e){return"x"!==e&&("r"!==e&&"theta"!==e)},e.prototype.implicitIndependent=function(e){return"x"},e.prototype.implicitDependency=function(e){return 1!==e.length?"y":"y"===e[0]?"x":"theta"===e[0]?"r":"y"},e.prototype.graphableAsConstant=function(e){return"y"===e||"x"===e||"r"===e},e.prototype.disabledFeatures=function(){return[]},e}(),o=function(){function e(){}return e.prototype.dimensions=function(){return 3},e.prototype.assignmentForbidden=function(e){return"x"===e||"y"===e||"z"===e||"tmp"===e.slice(0,3)||n.hasOwnProperty(e)},e.prototype.isValidSlider=function(e){return"x"===e||"y"===e||"z"===e||"ans"!==e.slice(0,3)&&!this.assignmentForbidden(e)},e.prototype.sliderVariables=function(e){var t=this;return e.filter(function(e){return!t.assignmentForbidden(e)&&"ans"!==e.slice(0,3)})},e.prototype.graphingEnabled=function(){return!0},e.prototype.ansEnabled=function(){return!1},e.prototype.validRegressionParameter=function(e){return!1},e.prototype.validLHS=function(e){return!0},e.prototype.unplottablePolarFunction=function(e,t){return!1},e.prototype.validDoubleInequalitySymbol=function(e){return!1},e.prototype.validDoubleInequalityVariables=function(e){return!1},e.prototype.validExpressionVariables=function(e){var t=e.join("");return"x"===t||"y"===t||"xy"===t||"yx"===t},e.prototype.validSolvedVariable=function(e){return"x"===e||"y"===e||"z"===e},e.prototype.validImplicitVariables=function(e){return!1},e.prototype.graphableListVariables=function(e,t){return"x"===e||"y"===e||"x"===t||"y"===t},e.prototype.validParametricVariable=function(e){return"t"===e},e.prototype.validParametricVariables=function(e){return 1===e.length&&this.validParametricVariable(e[0])},e.prototype.validInequalityVariables=function(e){return!1},e.prototype.validFirstColumnVariable=function(e){return!1},e.prototype.complicatedPolarImplicit=function(e,t){return!1},e.prototype.constantGraphMode=function(e){return r.Z_3D},e.prototype.graphMode=function(e,t){return"z"===e&&this.validExpressionVariables(t)?r.Z_3D:r.NONE},e.prototype.tableableAsConstant=function(e){return"x"!==e&&"r"!==e},e.prototype.implicitIndependent=function(e){return"x"},e.prototype.implicitDependency=function(e){if(2!==e.length)return"z";var t=e[0]<e[1]?e[0]+e[1]:e[1]+e[0];return"xy"===t?"z":"xz"===t?"y":"yz"===t?"x":"z"},e.prototype.graphableAsConstant=function(e){return"z"===e},e.prototype.disabledFeatures=function(){return[]},e}();t.PolicyGraphing=new i,t.PolicyGraphing3D=new o}),define("core/math/features/derivative",["require","parsenodes","core/math/baseparser","core/math/builtinframe","core/math/parsenode/builtinfunction","core/math/maybe-rational","core/math/policy","core/math/policyGraphing"],function(e){"use strict";var t=e("parsenodes"),n=e("core/math/baseparser"),r=e("core/math/builtinframe"),i=e("core/math/parsenode/builtinfunction"),o=e("core/math/maybe-rational").maybeRational,a=e("core/math/policy").defaultPolicy,s=e("core/math/policyGraphing").PolicyGraphing,c=t.Constant(o(0,1)),l=t.Constant(o(1,1)),u=t.Constant(o(2,1)),d={FreeVariable:function(e){return e===this._symbol?l:c},Constant:function(e){return isFinite(this.asValue())?c:t.Constant(this.asValue())},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([y(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),y(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([y(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),y(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],u])]))])},Exponent:function(e){return t.Add([y(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],l])])]),this.args[0].takeDerivative(e)])),y(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],c]),t.Piecewise([t.Comparator[">"]([this.args[1],c]),c,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(a,r)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var n=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([c,this.args[3]]),l,c])]),r=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([c,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([c,n]),r,t.Piecewise([t.Comparator["="]([l,n]),i,c])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var n=this.args[0],r=this.args[1],i=this.args[2],o=this.args[3],a={};a[n._symbol]=i;var s={};return s[n._symbol]=r,t.Add([y(e,o,this.copyWithArgs([n,r,i,o.takeDerivative(e)])),t.Subtract([y(e,i,t.Multiply([o.substitute(a),i.takeDerivative(e)])),y(e,r,t.Multiply([o.substitute(s),r.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)},Broadcast:function(e){
for(var n=this._replacedSymbols.slice(),r=this.args.slice(1),i=this._expression.takeDerivative(e),o=0;o<this._replacedSymbols.length;o++){var a=this._replacedSymbols[o],s=this.args[o+1];if(s.dependsOn(e)){var c=this.tmpVar(),l=t.DummyIndex(c);n.push(c),r.push(s.takeDerivative(e)),i=t.Add([i,t.Multiply([this._expression.takeDerivative(a),l])])}}return t.Broadcast(n,[i].concat(r))},Seed:function(e){return t.Constant(NaN)}},p={exp:"\\exp(x)*x_1",ln:"\\{x >= 0: x_1/x \\}",log:"\\{ x >= 0: x_1/(x*\\ln(10)) \\}",sqrt:"x_1/(2*\\sqrt{x})",rtxsqpone:"x*x_1/\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\rtxsqmone(x)",sin:"\\cos(x)*x_1",cos:"-\\sin(x)*x_1",tan:"\\sec(x)^2*x_1",arcsin:"x_1/\\sqrt{1 - x^2}",arccos:"-x_1/\\sqrt{1 - x^2}",sinh:"\\cosh(x)*x_1",cosh:"\\sinh(x)*x_1",tanh:"(\\sech(x))^2*x_1",arcsinh:"x_1/\\sqrt{x^2 + 1}",arccosh:"\\{ x > 0: x_1/\\rtxsqmone(x) \\}",arctanh:"\\{ \\abs(x) < 1: x_1/(1 - x^2) \\}",csc:"-\\cot(x)*\\csc(x)*x_1",sec:"\\tan(x)*\\sec(x)*x_1",cot:"-\\csc(x)^2*x_1",arccsc:"-x_1/(\\abs(x)*\\rtxsqmone(x))",arcsec:"x_1/(\\abs(x)*\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\coth(x)*\\csch(x)*x_1",sech:"-\\tanh(x)*\\sech(x)*x_1",coth:"-(\\csch(x))^2*x_1",arccsch:"-x_1/(\\abs(x)*\\rtxsqpone(x))",arcsech:"\\{ x >= 0: -x_1/(x*\\sqrt{1 - x^2}) \\}",arccoth:"\\{ \\abs(x) > 1 : x_1/(1 - x^2) \\}",factorial:"(x)!*\\polyGamma(0, x + 1)*x_1",floor:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",ceil:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",abs:"\\{ \\abs(x) > 0: \\sign(x)*x_1 \\}",sign:"\\{ \\abs(x) > 0: 0*x_1 \\}",mean:"\\mean(x_1)",total:"\\total(x_1)",length:"0",var:"2*\\cov(x, x_1)",varp:"2*\\cov(x, x_1)*(\\length(x)-1)/\\length(x)",stdev:"\\cov(x, x_1)/\\stdev(x)",stdevp:"\\covp(x, x_1)/\\stdevp(x)",mad:"\\mean(\\sign(x-\\mean(x))*(x_1 - \\mean(x_1)))",min:"x_1[\\argmin(x)]",max:"x_1[\\argmax(x)]",median:"0.5*(x_1[\\lowerQuantileIndex(x, 0.5)] + x_1[\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\frac{2x_1}{\\sqrt{\\pi }}e^{-x^2}",invNorm:"\\frac{x_1}{\\pdf(\\normaldist(0,1),\\invNorm(x))}"},h={logbase:["\\{x > 0: \\frac{x_1}{x*\\ln(y)}\\}","\\frac{-\\log_{y}(x)*y_1}{y*\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\frac{x^{1/y}*\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\polyGamma(1 + x, y)*y_1"],mod:["\\{ \\abs(\\mod(x, y)) > 0: x_1 \\}","\\{ \\mod(x/y, 1) > 0: -\\floor(x/y)*y_1 \\}"],round:["\\{ \\abs(\\mod(x, 1) - 0.5) > 0: 0*x_1 \\}","0/0"],cov:["\\cov(x_1, y)","\\cov(x, y_1)"],covp:["\\covp(x_1, y)","\\covp(x, y_1)"],corr:["(\\cov(x_1, y) - (\\cov(x, y)*\\cov(x, x_1)/\\var(x)))/(\\stdevp(x)\\stdevp(y))","(\\cov(x, y_1) - (\\cov(x, y)*\\cov(y, y_1)/\\var(y)))/(\\stdevp(x)\\stdevp(y))"],spearman:["0/0","0/0"],quantile:["\\{ \\floor(y*(\\length(x)-1)) = y*(\\length(x)-1) :   x_1[\\upperQuantileIndex(x, y)],  (\\ceil(y*(\\length(x)-1)) - y*(\\length(x)-1))*x_1[\\lowerQuantileIndex(x, y)] +   (y*(\\length(x)-1) - \\floor(y*(\\length(x)-1)))*x_1[\\upperQuantileIndex(x, y)]\\}","\\{ \\floor(y*(\\length(x)-1)) < y*(\\length(x)-1) :   (x[\\upperQuantileIndex(x, y)] - x[\\lowerQuantileIndex(x, y)])*y_1\\}"],quartile:["0.5*(x_1[\\lowerQuartileIndex(x, y)] + x_1[\\upperQuartileIndex(x, y)])","0/0"],tscore:["\\frac{\\sqrt{\\length(x)}(\\stdev(x)*\\mean(x_1)-(\\mean(x)-y)*\\frac{\\cov(x,x_1)}{\\stdev(x)})}{\\stdev(x)^2}","-y_1*\\sqrt{\\length(x)}/\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\frac{e^{-y}(\\floor(x)-y)y^{(\\floor(x)-1)}}{\\floor(x)!}"],invPoisson:["0/0","0/0"],tpdf:["x_1*\\pdf(\\tdist(y),x)*\\frac{-(y+1)*x}{y+x^2}","y_1*\\frac{1}{2}\\pdf(\\tdist(y),x)(  \\frac{x^2-1}{y + x^2} + \\ln(\\frac{y}{y + x^2}) +   \\polyGamma(0, \\frac{1+y}{2}) - \\polyGamma(0, y/2))"],invT:["x_1/\\pdf(\\tdist(y),\\invT(x, y))","0/0"]},f={tcdf:["-x_1*\\pdf(\\tdist(z),x)","y_1*\\pdf(\\tdist(z),y)","0/0"],poissoncdf:["0/0","0/0","z_1\\sum _{n=\\max(0,\\floor(\\min(x,y)))}^{\\floor(\\max(x,y))}\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],normalpdf:["-x_1*\\frac{x-y}{z^2} \\pdf(\\normaldist(y,z),x)","y_1*\\frac{x-y}{z^2} \\pdf(\\normaldist(y,z),x)","z_1*(\\frac{(x-y-z)*(x-y+z)}{z^3}) \\pdf(\\normaldist(y,z),x)"],binompdf:["0/0","0/0","\\{0<=z<=1: z_1*\\pdf(\\binomialdist(y,z),x)*(\\frac{\\round(x)}{z}-\\frac{\\round(y)-\\round(x)}{1-z}), 0 \\}"],invBinom:["0/0","0/0","0/0"],uniformpdf:["0","\\{y<=x: \\frac{y_1}{(z-y)^2}, 0\\}","\\{z>=x: -\\frac{z_1}{(z-y)^2}, 0\\}"],invUniform:["\\{y<=x<=z: x_1*(z-y), 0\\}","\\{y<=x<=z: y_1*(1-x), 0\\}","\\{y<=x<=z: z_1*x, 0\\}"]},m={normalcdf:["-x_1\\pdf(\\normaldist(z,u), x)","y_1\\pdf(\\normaldist(z,u), y)","-z_1*(\\pdf(\\normaldist(z,u), y) - \\pdf(\\normaldist(z,u), x))","u_1*(  \\{\\abs(y)=1/0:0,\\frac{z-y}{u}\\pdf(\\normaldist(z,u),y)\\} -   \\{\\abs(x)=1/0:0,\\frac{z-x}{u}\\pdf(\\normaldist(z,u),x)\\})"],binomcdf:["0/0","0/0","0/0","\\{0<=u<=1: u_1*\\sum _{n=\\max(0,\\round(\\min(x,y)))}^{\\round(\\max(x,y))}(  \\pdf(\\binomialdist(z,u),n)*(\\frac{n}{u}-\\frac{\\round(z)-n}{1-u})), 0 \\}"],uniformcdf:["\\{z>u: 0/0, -x_1\\pdf(\\uniformdist(z,u), x)\\}","\\{z>u: 0/0, y_1\\pdf(\\uniformdist(z,u), y)\\}","\\{z>u: 0/0, z_1*(\\frac{\\{z<x<u:u-x,0\\} + \\{z<y<u:y-u,0\\}}{(u-z)^2})\\}","\\{z>u: 0/0, u_1*(\\frac{\\{z<x<u:x-z,0\\} + \\{z<y<u:z-y,0\\}}{(u-z)^2})\\}"]};for(var g in p)i[g].prototype.takeDerivative=function(e){return function(t){var n=this.args,i={x:n[0],x_1:n[0].takeDerivative(t)};return y(t,n[0],e.substitute(i)).getConcreteTree(a,r)}}(n.parse(p[g]));for(g in h)i[g].prototype.takeDerivative=function(e,n){return function(i){var o=this.args,s={x:o[0],x_1:o[0].takeDerivative(i),y:o[1],y_1:o[1].takeDerivative(i)};return t.Add([y(i,o[0],e.substitute(s)),y(i,o[1],n.substitute(s))]).getConcreteTree(a,r)}}(n.parse(h[g][0]),n.parse(h[g][1]));for(g in f)i[g].prototype.takeDerivative=function(e,n,i){return function(o){var s=this.args,c={x:s[0],x_1:s[0].takeDerivative(o),y:s[1],y_1:s[1].takeDerivative(o),z:s[2],z_1:s[2].takeDerivative(o)};return t.Add([t.Add([y(o,s[0],e.substitute(c)),y(o,s[1],n.substitute(c))]),y(o,s[2],i.substitute(c))]).getConcreteTree(a,r)}}(n.parse(f[g][0]),n.parse(f[g][1]),n.parse(f[g][2]));for(g in m)i[g].prototype.takeDerivative=function(e,n,i,o){return function(s){var c=this.args,l={x:c[0],x_1:c[0].takeDerivative(s),y:c[1],y_1:c[1].takeDerivative(s),z:c[2],z_1:c[2].takeDerivative(s),u:c[3],u_1:c[3].takeDerivative(s)};return t.Add([t.Add([y(s,c[0],e.substitute(l)),y(s,c[1],n.substitute(l))]),t.Add([y(s,c[2],i.substitute(l)),y(s,c[3],o.substitute(l))])]).getConcreteTree(a,r)}}(n.parse(m[g][0]),n.parse(m[g][1]),n.parse(m[g][2]),n.parse(m[g][3]));i.distance.prototype.takeDerivative=function(e){var n=this.args[0],o=this.args[1],a=t.OrderedPairAccess([n,l]),c=t.OrderedPairAccess([n,u]),d=t.OrderedPairAccess([o,l]),p=t.OrderedPairAccess([o,u]),h=y(e,a,a.takeDerivative(e)),f=y(e,c,c.takeDerivative(e)),m=y(e,d,d.takeDerivative(e)),g=y(e,p,p.takeDerivative(e));return y(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([h,a]),t.Multiply([h,d])]),t.Subtract([t.Multiply([m,d]),t.Multiply([m,a])])]),t.Add([t.Subtract([t.Multiply([f,c]),t.Multiply([f,p])]),t.Subtract([t.Multiply([g,p]),t.Multiply([g,c])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(s,r)},i.midpoint.prototype.takeDerivative=function(e){var n=this.args[0],o=this.args[1],a=t.OrderedPairAccess([n,l]),c=t.OrderedPairAccess([n,u]),d=t.OrderedPairAccess([o,l]),p=t.OrderedPairAccess([o,u]),h=y(e,a,a.takeDerivative(e)),f=y(e,c,c.takeDerivative(e)),m=y(e,d,d.takeDerivative(e)),g=y(e,p,p.takeDerivative(e));return t.OrderedPair([i.mean([h,m]),i.mean([f,g])]).getConcreteTree(s,r)};var y=function(e,t,n){return t.dependsOn(e)?n:c};for(var v in d){var b=d[v];t[v].prototype.takeDerivative=b}["tSample","poissonSample","uniformSample","normalSample","binomSample"].forEach(function(e){i[e].prototype.takeDerivative=function(e){for(var n=0;n<this.args.length;n++)if(this.args[n].dependsOn(e))return t.Constant(NaN);return c}})}),define("core/math/features/substitute",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),n={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var r in n)t[r].prototype.substitute=n[r]}),define("core/math/features/isImplicit",["require","parsenodes"],function(e){"use strict";function t(e){return!(e[0]instanceof n.FreeVariable)||e[1].dependsOn(e[0]._symbol)}var n=e("parsenodes");n.Base.prototype.isImplicit=function(){return!1},n.Equation.prototype.isImplicit=function(){return t(this.args)},n.BaseComparator.prototype.isImplicit=function(){return t(this.args)},n.Broadcast.prototype.isImplicit=function(){return this._expression.isImplicit()}}),define("core/math/workerconfig",[],function(){"use strict";return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0}}),define("core/math/features/solve",["require","core/math/baseparser","parsenodes","core/math/errormsg","core/math/builtinframe","core/math/workerconfig","core/math/maybe-rational","core/math/policy"],function(e){"use strict";function t(e){var t=Object.create(m);return t.a=e[2]?e[2].tryGetConcreteTree(v,m):b,t.b=e[1]?e[1].tryGetConcreteTree(v,m):b,t.c=e[0]?e[0].tryGetConcreteTree(v,m):b,t}function n(e){return 0===e.a.asValue()?0===e.b.asValue()?0:1:2}function r(e,r,i,o){for(var a,s,c=[],l=[],u=0;u<i.length;u++){var d=i[u],p=0;h.eachArgs(e,[r],function(e){var t=e[0];p=Math.max(p,t.polynomialOrder(d))});var f=p>2,m=i.length>1&&!e.validSolvedVariable(d),g=o&&r.piecewiseDependsOn(d);f||m||g?(l[u]={},c[u]=1/0):(l[u]=[],c[u]=0,h.eachArgs(e,[r],function(e){var r=e[0];s=t(r.getPolynomialCoefficients(d)),l[u].push(s),c[u]=Math.max(c[u],n(s))}))}var y;if(1===i.length)s=l[0],a=i[0],y=c[0];else{var v;v=0===c[0]?1:0===c[1]?0:c[0]<c[1]?0:1,s=l[v],a=i[v],y=c[v]}return{localFrame:s,variableOfInterest:a,effectiveOrder:y}}function i(e,t){return t?I.inequality:I.generalEquation}function o(e){e.f=x.getConcreteTree(v,e),e.g=E.getConcreteTree(v,e),e.p=w.getConcreteTree(v,e),e.q=_.getConcreteTree(v,e),e.m=l(y(1e305,1))}var a=e("core/math/baseparser"),s=e("parsenodes"),c=s.Base,l=s.Constant,u=s.Equation,d=s.SolvedEquation,p=s.BaseComparator,h=s.List,f=e("core/math/errormsg"),m=e("core/math/builtinframe"),g=e("core/math/workerconfig"),y=e("core/math/maybe-rational").maybeRational,v=e("core/math/policy").defaultPolicy,b=l(y(0,1)),x=a.parse("b*b"),E=a.parse("4*a*c"),w=a.parse("(-b+\\sqrt{b*b-4*a*c})/(2*a)"),_=a.parse("(-b-\\sqrt{b*b-4*a*c})/(2*a)"),S=a.parse("[\\{\\abs(b)>0:-c/b\\}]"),M=a.parse("[\\{\\abs(a)>0:-b/(2*a)\\}]"),k=a.parse("[\\{a=0:\\{b<0:-c/b\\},q\\},\\{a=0:\\{b>0:-c/b\\},p\\}]"),C=a.parse("[\\{a=0:\\{b<0:-c/b\\},a>0:q\\},\\{a=0:\\{b=0:\\{c>0:-m\\}\\},a>0:\\{f<g:-m\\},p\\},\\{a=0:\\{b=0:\\{c>0:m\\}\\},a>0:\\{f<g:m\\},q\\},\\{a=0:\\{b>0:-c/b\\},a>0:p\\}]"),I={inequality:function(e){return o(e),C.getConcreteTree(v,e)},generalEquation:function(e){return o(e),e.a.isConstant&&0===e.a.asValue()?S.getConcreteTree(v,e):e.f.isConstant&&e.g.isConstant&&e.f.asValue()-e.g.asValue()==0?M.getConcreteTree(v,e):k.getConcreteTree(v,e)}};c.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(e){if(e instanceof s.Error)return e;throw e}},u.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},p.prototype.solve=function(e,t){var n=this.tryGetConcreteTree(e,t);if(n.isError)return n;if(n.isConstant)return n;var o="="!==this.getOperator();if(!g.plotImplicits&&n.isImplicit())throw new f.implicitsDisabled;var a=this._difference.tryGetConcreteTree(e,t);a.isBroadcast&&(a=a.asList(e));var s=a.getDependencies();if(0===s.length)return a.isList?h(a.args.map(function(e){return l(0===e.asValue())})):l(0===a.asValue());if(1===s.length&&a.isList&&!o)return a;if(1===s.length&&!o&&!g.plotSingleVariableImplicitEquations)return f.singleVariableImplicitEquationsDisabled();var c=h.wrap(a);if(s.length>2)return f.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(s);if(o&&!e.validInequalityVariables(s))return f.invalidInequalityVariables().setDependencies(s);var u=r(e,c,s,o),p=u.localFrame,m=u.effectiveOrder,y=u.variableOfInterest;if(e.complicatedPolarImplicit(y,m))return f.complicatedPolarImplicit().setDependencies(s);if(!e.validImplicitVariables(s))return f.invalidImplicitVariables();if(m>2)return a;for(var v=i(s,o),b=[],x=0;x<p.length;x++){var E=v(p[x]);if(E.isError)return E;if(E.isConstant)b.push(E);else for(var w=0;w<E.args.length;w++){var _=E.args[w],S=c.args[x].extractConditions(y,_).getConcreteTree(e,t);b.push(S)}}return d(y,h(b))}}),define("core/math/distribution-spec",["require","exports","core/math/baseparser","tslib"],function(e,t,n,r){"use strict";function i(e){return o(n.parse(e,{trailingComma:!0}))}function o(e){var n=e,i=a[n.type];if(!i)switch("Assignment"===n.type&&(n=n._expression),n.type){case"FunctionCall":i=t.DistributionParameterDefaultsMap[n._symbol];break;default:return}if(i){for(var o={},s=i.params,c=n.args,l=0;l<s.length;l++){var u=c[l];o[s[l]]=u&&u.getInputString()||""}return r.__assign(r.__assign({},i),{span:n.getInputSpan(),values:o})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionSpecFromTree=t.parseToplevelFunction=t.DistributionParameterDefaultsMap=void 0,t.DistributionParameterDefaultsMap={normaldist:{type:"distribution",symbol:"normaldist",params:["mean","stdev"],defaults:["0","1"],discrete:!1},tdist:{type:"distribution",symbol:"tdist",params:["dof"],defaults:[void 0],discrete:!1},binomialdist:{type:"distribution",symbol:"binomialdist",params:["trials","probsuccess"],defaults:[void 0,"0.5"],discrete:!0},poissondist:{type:"distribution",symbol:"poissondist",params:["mean"],defaults:[void 0],discrete:!0},uniformdist:{type:"distribution",symbol:"uniformdist",params:["min","max"],defaults:["0","1"],discrete:!1}};var a={Histogram:{type:"visualization",symbol:"histogram",params:["data","binwidth"],defaults:[void 0,"1"]},DotPlot:{type:"visualization",symbol:"dotplot",params:["data","binwidth"],defaults:[void 0,"1"]},BoxPlot:{type:"visualization",symbol:"boxplot",params:["data"],defaults:[void 0]}};t.parseToplevelFunction=i,t.getFunctionSpecFromTree=o}),define("core/math/evaluationstate",["require","core/types/graphmode","parsenodes","core/lib/label","core/math/types","core/math/distribution-spec"],function(e){"use strict";function t(e){return e.isError?e.getError():void 0===e.asValue()?"":+e.asValue()}function n(e,n,r){for(var i=[],o=0;o<n.columns.length;o++){var a=r.columns[o],s={dependent:!a.isIndependent,discrete:a.isIndependent};a.isError?(s.error=a.getError(),s.values=[]):s.values=a.values.map(t),i.push(s)}return{column_data:i}}function r(e,t,n){var r={variables:[],errorMap:{},dimensions:{}};return n.center.isError&&(r.errorMap.center=!0),n.radianAngle.isError&&(r.errorMap.angle=!0),n.width.isError&&(r.errorMap.width=!0),n.height.isError&&(r.errorMap.height=!0),n.opacity.isError&&(r.errorMap.opacity=!0),n.center.isError||n.radianAngle.isError||n.width.isError||n.height.isError||n.opacity.isError?(r.variables=t.getSliderVariables(e,n),r):(r.dimensions.x=[],r.dimensions.y=[],r.dimensions.radianAngle=[],r.dimensions.width=[],r.dimensions.height=[],r.dimensions.opacity=[],o.List.eachArgs(e,[n.center,n.radianAngle,n.width,n.height,n.opacity],function(e){var t=e[0].asValue(),n=+e[1].asValue(),i=Math.atan2(Math.sin(n),Math.cos(n));r.dimensions.x.push(+t[0]),r.dimensions.y.push(+t[1]),r.dimensions.radianAngle.push(i),r.dimensions.width.push(+e[2].asValue()),r.dimensions.height.push(+e[3].asValue()),r.dimensions.opacity.push(Math.max(0,Math.min(1,e[4].asValue())))}),(e.graphingEnabled()?t.getGraphMode(e,n):i.NONE)!==i.NONE&&(r.is_graphable=!0),n.moveStrategy&&(r.move_strategy=n.moveStrategy),r)}var i=e("core/types/graphmode"),o=e("parsenodes"),a=e("core/lib/label"),s=e("core/math/types"),c=e("core/math/distribution-spec").getFunctionSpecFromTree,l=function(){return{operator:"=",variables:[]}},u=function(e,t,u){if(t.isTable)return n(e,t,u);if(t.isImage)return r(e,t,u);var d=l();if(u.isError&&(!(t instanceof o.FunctionDefinition)||u.blocksExport))return d.error=u.getError(),d.variables=t.getSliderVariables(e,u),d.is_single_identifier=t instanceof o.Identifier,d;u.moveStrategy&&(d.move_strategy=u.moveStrategy,d.default_drag_mode=u.defaultDragMode),t.isInequality()&&(d.is_inequality=!0),d.operator=t.getOperator(),u instanceof o.SolvedEquation?!0!==u._expression.asValue()&&!1!==u._expression.asValue()&&(d.assignment=u._symbol):t instanceof o.Assignment&&(d.assignment=t._symbol);var p=e.graphingEnabled()?t.getGraphMode(e,u):i.NONE;if(p!==i.NONE){d.is_graphable=!0,d.expression_type=t.getExpressionType(p,u.valueType),u.isShadeBetween()&&(d.is_shade_between=!0);var h=t.tableInfo(e,u);h&&(d.is_tableable=!0,d.table_info=h)}s.isList(u.valueType)&&(d.is_concrete_list=!0),d.variables=d.is_graphable?[]:t.getSliderVariables(e,u),d.is_single_identifier=t instanceof o.Identifier,u.isConstant&&(d.constant_value=u.asValue());var f=u.getEvaluationInfo();if(!f||"="!==d.operator||t.isConstant||t.isFunction||u.valueType===s.Bool||u.valueType===s.ListOfBool||t instanceof o.Equation||t instanceof o.And||(d.is_evaluable=!0,d.zero_values=f),u instanceof o.OptimizedRegression){var m={};for(var g in u.parameters)u.parameters.hasOwnProperty(g)&&(m[a.identifierToLatex(g)]=+u.parameters[g].asValue());d.is_regression=!0,d.regression={parameters:m,residualVariable:a.identifierToLatex(u.residualVariable),residualSuggestionId:u.residualSuggestionId,shouldSuggestLogMode:u.shouldSuggestLogMode,isLinear:u.isLinear,statistics:u.statistics,parameterWarning:u.parameterWarning}}var y=c(t);return y&&y.discrete&&(d.is_discrete_distribution=!0),d};return u.default=l,u}),define("core/math/statementanalysis",["require","core/math/evaluationstate","pjs","core/types/graphmode","core/math/workerconfig"],function(e){"use strict";var t=e("core/math/evaluationstate"),n=e("pjs"),r=e("core/types/graphmode"),i=e("core/math/workerconfig");return n(function(e){e.init=function(e,n,r){this.policy=e,this.rawTree=n,this.concreteTree=r,this.evaluationState=t(e,n,r)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===r.X||e===r.Y}})}),define("core/math/expression-types",["require","exports"],function(e,t){"use strict";function n(e,n){if(void 0===e)return{points:!1,lines:!1,fill:!1};var r=t.EXPRESSION_PROP_DEFAULTS[e];switch(e){case i.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case i.POINT_LIST:case i.DOTPLOT:return{points:void 0===n.points?r.points:n.points,lines:void 0===n.lines?r.lines:n.lines,fill:!1};case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:case i.HISTOGRAM:case i.BOXPLOT:case i.TTEST:case i.STATS:case i.CUBE:case i.SPHERE:return{points:!1,lines:void 0===n.lines?r.lines:n.lines,fill:void 0===n.fill?r.fill:n.fill};default:return e}}function r(e){if(void 0===e)return!1;switch(e){case i.SINGLE_POINT:case i.POINT_LIST:case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:return!0;case i.HISTOGRAM:case i.BOXPLOT:case i.DOTPLOT:case i.TTEST:case i.STATS:case i.CUBE:case i.SPHERE:return!1;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isClickableExpressionType=t.getReconciledExpressionProps=t.EXPRESSION_PROP_DEFAULTS=t.ExpressionType=void 0;var i;!function(e){e.X_OR_Y="X_OR_Y",e.SINGLE_POINT="SINGLE_POINT",e.POINT_LIST="POINT_LIST",e.PARAMETRIC="PARAMETRIC",e.POLAR="POLAR",e.IMPLICIT="IMPLICIT",e.POLYGON="POLYGON",e.HISTOGRAM="HISTOGRAM",e.DOTPLOT="DOTPLOT",e.BOXPLOT="BOXPLOT",e.TTEST="TTEST",e.STATS="STATS",e.CUBE="CUBE",e.SPHERE="SPHERE"}(i=t.ExpressionType||(t.ExpressionType={})),t.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},CUBE:{points:!1,lines:!1,fill:!0},SPHERE:{points:!1,lines:!1,fill:!0}},t.getReconciledExpressionProps=n,t.isClickableExpressionType=r}),define("core/math/features/analyze",["require","underscore","parsenodes","core/math/statementanalysis","core/math/builtin","core/math/builtinframe","core/math/parsenode/builtinfunction","core/math/errormsg","core/math/comparators","core/math/types","core/types/graphmode","core/math/expression-types","core/math/distribution-spec","core/math/workerconfig"],function(e){"use strict";function t(e,t,n,r){if(r.isError)return c(e,n,r);var i=r.getDependencies();switch(r.valueType){case f.Distribution:case f.ListOfDistribution:case f.EmptyList:return c(e,n,r);case f.Point:case f.ListOfPoint:return i.length?e.validParametricVariables(i)?c(e,n,r):c(e,n,p.tooManyVariables(n.getSliderVariables(e,r)).setDependencies(i)):c(e,n,r);case f.Number:case f.ListOfNumber:return 0===i.length?c(e,n,r):i.length<=e.dimensions()-1?e.validExpressionVariables(i)?c(e,n,r):c(e,n,p.equationRequired(e.implicitDependency(i)).setDependencies(i)):e.validImplicitVariables(i)?c(e,n,p.equationRequired().setDependencies(i)):c(e,n,p.tooManyVariables(n.getSliderVariables(e,r)).setDependencies(i));default:return c(e,n,p.parseError())}}function n(e){return d.pdf([e,s.FreeVariable("x")])}function r(e,t){var n=this.tryGetConcreteTree(e,t),r=n.getDependencies();return r.length?c(e,this,p.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(r)):c(e,this,this.tryGetConcreteTree(e,t))}function i(e){return function(t,n){var r=this.tryGetConcreteTree(t,n),i=r.getDependencies();if(i.length)return c(t,this,p.tooManyVariables(this.getSliderVariables(t,r)).setDependencies(i));var o=c(t,this,this.tryGetConcreteTree(t,n));if(!r.isError){o.evaluationState.expression_type=g.TTEST;var a=r.args.map(function(e){return e.asValue()});o.evaluationState.ttest_results=e.apply(null,a)}return o}}function o(e,t){return e.filter(function(e){return!t[e]})}var a=e("underscore"),s=e("parsenodes"),c=e("core/math/statementanalysis"),l=e("core/math/builtin"),u=e("core/math/builtinframe"),d=e("core/math/parsenode/builtinfunction"),p=e("core/math/errormsg"),h=e("core/math/comparators"),f=e("core/math/types"),m=e("core/types/graphmode"),g=e("core/math/expression-types").ExpressionType,y=e("core/math/distribution-spec").DistributionParameterDefaultsMap,v=e("core/math/workerconfig");s.Base.prototype.analyze=function(e,t){return c(e,this,this.tryGetConcreteTree(e,t))},s.FunctionCall.prototype.analyze=function(e,r){var i=this.tryGetConcreteTree(e,r);return!i.isError&&y[this._symbol]&&0===i.getDependencies().length&&(i=n(i).tryGetConcreteTree(e,r)),t(e,r,this,i)},s.Expression.prototype.analyze=function(e,n){return t(e,n,this,this.tryGetConcreteTree(e,n))},s.FunctionDefinition.prototype.analyze=function(e,t){if(u[this._symbol])return this.asEquation().analyze(e,t);var n=this._symbol.split("_")[0];if(d[n])return c(e,this,p.cannotRedefine(this._symbol,n));var r=this.tryGetConcreteTree(e,t);if(r.isError)return c(e,this,r);var i=this._argSymbols,o=r.getDependencies();if(-1!==o.indexOf(this._symbol))return c(e,this,p.selfReferentialFunction(this._symbol));var a=o.filter(function(e){return-1===i.indexOf(e)});return e.unplottablePolarFunction(this._symbol,o)?c(e,this,p.unplottablePolarFunction()):a.some(e.assignmentForbidden)?c(e,this,p.addArgumentsToDefinition(a,this._symbol,i).setDependencies(o)):a.length?c(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(o)):c(e,this,r)},s.Assignment.prototype.analyze=function(e,t,r){var i=this._symbol;if(!e.validLHS(i))return c(e,this,p.invalidLHS(i));if(u[i])return this.asEquation().analyze(e,t);var o=this.tryGetConcreteTree(e,t);if(!o.isError&&this._expression instanceof s.FunctionCall&&y[this._expression._symbol]&&0===o.getDependencies().length&&(o=n(o).tryGetConcreteTree(e,t)),o.isError)return c(e,this,o);var a=o.getDependencies();if(this.isEquation(o))return this.asEquation().analyze(e,t);if(a.length>1){var l=this.getSliderVariables(e,o);return l.length?c(e,this,p.tooManyVariables(l).allowExport().setDependencies(a)):c(e,this,o)}var d=this.getMoveStrategy(e,t,o,r);if(d){var h=this.getDefaultDragMode(d);return c(e,this,s.MovablePoint(o.args,d,h))}return c(e,this,o)},s.Regression.prototype.analyze=function(e,t,n,r,i){return c(e,this,this.tryOptimize(e,t,n,r,i))},s.Polygon.prototype.analyze=r,s.Histogram.prototype.analyze=r,s.Object3D.prototype.analyze=r,s.DotPlot.prototype.analyze=r,s.BoxPlot.prototype.analyze=r,s.TTest.prototype.analyze=i(l.ttest),s.IndependentTTest.prototype.analyze=i(l.ittest),s.Stats.prototype.analyze=function(e,t){var n=this.tryGetConcreteTree(e,t),r=n.getDependencies();if(r.length)return c(e,this,p.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(r));var i=c(e,this,this.tryGetConcreteTree(e,t));if(!n.isError){i.evaluationState.expression_type=g.STATS;var o=n.args.map(function(e){return e.asValue()});i.evaluationState.stats_results=l.stats.apply(null,o)}return i},s.Equation.prototype.analyze=s.BaseComparator.prototype.analyze=function(e,t){var n="="!==this.getOperator();if(!v.plotInequalities&&n)return c(e,this,p.inequalitiesDisabled());var r=this.trySolve(e,t);if(r.isError)return c(e,this,r);if(r instanceof s.SolvedEquation&&r.getDependencies().length){var i=r.getDependencies().concat(r._symbol);if(!e.validImplicitVariables(i))return c(e,this,p.invalidImplicitVariables().setDependencies(i))}return this.getGraphMode(e,r)!==m.IMPLICIT||e.validImplicitVariables(r.getDependencies())?c(e,this,r):c(e,this,p.invalidImplicitVariables().setDependencies(r.getDependencies()))},s.DoubleInequality.prototype.analyze=function(e,t){if(!v.plotInequalities)return c(e,this,p.inequalitiesDisabled());var n=this.tryGetConcreteTree(e,t);if(n.isError)return c(e,this,n);var r=n.getDependencies();return h.table[this._operators[0]].direction!==h.table[this._operators[1]].direction?c(e,this,p.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(n._symbol)&&e.validDoubleInequalityVariables(r)?r.length>2?c(e,this,p.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(r)):-1!==n._expressions[0].getDependencies().indexOf(n._symbol)||-1!==n._expressions[1].getDependencies().indexOf(n._symbol)?c(e,this,p.complicatedDoubleInequality().setDependencies(r)):c(e,this,n):c(e,this,p.invalidDoubleInequalityVariables().setDependencies(r))},s.And.prototype.analyze=function(e,t){var n=this.tryGetConcreteTree(e,t);if(n.isError)return c(e,this,n);var r=n.getDependencies();return r.length?e.validDoubleInequalityVariables(r)?c(e,this,p.complicatedDoubleInequality().setDependencies(r)):c(e,this,p.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(r)):c(e,this,n)},s.OrderedPair.prototype.analyze=function(e,n,r){var i=this.tryGetConcreteTree(e,n);if(i.isError)return c(e,this,i);var o=this.getMoveStrategy(e,n,i,r);if(o){var a=this.getDefaultDragMode(o);return c(e,this,s.MovablePoint(i.args,o,a))}return t(e,n,this,i)},s.Table.prototype.analyze=function(e,t){for(var n=Object.create(t),r=[],i=0;i<this.columns.length;i++){var a=this.columns[i].analyze(e,n,t);if(0===i&&(a.concreteTree.isIndependent?e.validFirstColumnVariable(a.concreteTree.header._symbol)?a.concreteTree.header._symbol:a=c(e,this.columns[i],p.invalidFirstTableColumn()):a=c(e,this.columns[i],p.invalidDependentFirstTableColumn())),a.concreteTree.isIndependent)a.rawTree.exportToLocal(a.concreteTree,n);else if(!a.concreteTree.isError){var l=a.concreteTree.header.getDependencies(),u=o(l,n);u.length&&(a=c(e,this.columns[i],p.tooManyVariables(u).setDependencies(u)))}r.push(a.concreteTree)}var d=s.Table(r),h=c(e,this,d);return h.evaluationState.is_graphable=!0,h},s.TableColumn.prototype.analyze=function(e,t,n){var r=this.header.tableError();if(r)return c(e,this,p.invalidTableHeader(r));var i=this.tryGetConcreteTree(e,t,n);if(i.isError)return c(e,this,i);if(i.header.isError)return c(e,this,i.header);if(i.values.isError)return c(e,this,i.values);for(var o=0;o<i.values.length;o++)if(!i.values[o].isError){var a=this.values[o]&&this.values[o].tableError();if(a)i.values[o]=p.invalidTableEntry(a);else{var s=i.values[o].getDependencies();s.length&&(i.values[o]=p.tooManyVariables(s).setDependencies(s))}}return c(e,this,i)},s.Image.prototype.analyze=function(e,t,n){var r=this.tryGetConcreteTree(e,t);if(r.radianAngle.isError||r.center.isError||r.width.isError||r.height.isError||r.opacity.isError)return c(e,this,r);var i=r.center.getDependencies(),o=r.radianAngle.getDependencies(),a=r.width.getDependencies(),l=r.height.getDependencies(),u=r.opacity.getDependencies();return i.length||o.length||a.length||l.length||u.length?c(e,this,s.Image({center:i.length?p.tooManyVariables(o).setDependencies(i):r.center,radianAngle:o.length?p.tooManyVariables(o).setDependencies(o):r.radianAngle,width:a.length?p.tooManyVariables(a).setDependencies(a):r.width,height:l.length?p.tooManyVariables(l).setDependencies(l):r.height,opacity:u.length?p.tooManyVariables(u).setDependencies(u):r.opacity})):(r.moveStrategy=this.getMoveStrategy(e,t,r,n),c(e,this,r))},s.Slider.prototype.analyze=function(e,t){var n,r=this.tryGetConcreteTree(e,t),i=r.sliderInfo;if(i.missingVars.length){var o=a.unique(i.missingVars);n=c(e,this,p.tooManyVariables(e.sliderVariables(o)).setDependencies(o).allowExport())}else n=c(e,this,r);var s=n.evaluationState;if(v.sliders){s.assignment=i.exportedSymbol,s.slider_min_number=i.values.min,s.slider_max_number=i.values.max,s.slider_step_number=i.values.step,s.slider_min_valid=i.valids.min,s.slider_max_valid=i.valids.max,s.slider_step_valid=i.valids.step;var l=s.slider_min_valid&&s.slider_max_valid&&s.slider_step_valid;s.is_slider=!0,s.raw_slider_latex=this.getInputString(),s.is_slidable=l,s.is_animatable=s.is_slidable&&!s.is_graphable,i.errMsg&&(s.error=i.errMsg.getError())}return delete s.is_evaluable,delete s.zero_values,n}}),define("core/math/features/analyzeFourFunction",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/parsenode/builtinfunction","core/math/builtinconstants"],function(e){"use strict";function t(e,t){return r(e,this,i.inequalitiesUnsupported())}var n=e("parsenodes"),r=e("core/math/statementanalysis"),i=e("core/math/errormsg"),o=e("core/math/parsenode/builtinfunction"),a=e("core/math/builtinconstants");n.Base.prototype.analyzeFourFunction=function(e,t){var n=this.tryGetConcreteTree(e,t);return n.isError?r(e,this,n):r(e,this,i.parseError())},n.Expression.prototype.analyzeFourFunction=function(e,t){var n=this.tryGetConcreteTree(e,t);if(n.isError)return r(e,this,n);var s=n.getDependencies();if(s.length>0){var c,l=s[0];return c=o.hasOwnProperty(l)?i.functionUnsupported(l):a.hasOwnProperty(l)?i.constantUnsupported(l):i.variablesUnsupported(l),r(e,this,c)}return r(e,this,n)},
n.Assignment.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.assignmentsUnsupported())},n.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.functionDefinitionsUnsupported())},n.Equation.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.equationsUnsupported())},n.And.prototype.analyzeFourFunction=t,n.DoubleInequality.prototype.analyzeFourFunction=t,n.BaseComparator.prototype.analyzeFourFunction=t,n.Regression.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.regressionsUnsupported())},n.OrderedPair.prototype.analyzeFourFunction=function(e,t){return r(e,this,i.pointsUnsupported())}}),define("core/math/features/analyzeScientific",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/builtinframe"],function(e){"use strict";function t(e,t){return r(e,this,i.inequalitiesUnsupported())}var n=e("parsenodes"),r=e("core/math/statementanalysis"),i=e("core/math/errormsg"),o=e("core/math/builtinframe");n.Base.prototype.analyzeScientific=function(e,t){var n=this.tryGetConcreteTree(e,t);return n.isError?r(e,this,n):r(e,this,i.parseError())},n.Expression.prototype.analyzeScientific=function(e,t){var n=this.tryGetConcreteTree(e,t);if(n.isError)return r(e,this,n);var o=n.getDependencies();return o.length>0?r(e,this,i.tooManyVariables(o)):r(e,this,n)},n.Assignment.prototype.analyzeScientific=function(e,t){var n=this._symbol;if(o[n])return r(e,this,i.cannotRedefine(n));var a=this.tryGetConcreteTree(e,t);if(a.isError)return r(e,this,a);var s=a.getDependencies();return this.isEquation(a)?r(e,this,i.equationsUnsupported()):s.length>0?r(e,this,i.tooManyVariables(s)):r(e,this,a)},n.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(o[this._symbol])return r(e,this,i.cannotRedefine(this._symbol));var n=this.tryGetConcreteTree(e,t);if(n.isError)return r(e,this,n);var a=this._argSymbols,s=n.getDependencies();if(-1!==s.indexOf(this._symbol))return r(e,this,i.selfReferentialFunction(this._symbol));var c=s.filter(function(e){return-1===a.indexOf(e)});return c.length?r(e,this,i.addArgumentsToDefinition(c,this._symbol,a)):r(e,this,n)},n.Equation.prototype.analyzeScientific=function(e,t){return r(e,this,i.equationsUnsupported())},n.And.prototype.analyzeScientific=t,n.DoubleInequality.prototype.analyzeScientific=t,n.BaseComparator.prototype.analyzeScientific=t,n.Regression.prototype.analyzeScientific=function(e,t){return r(e,this,i.regressionsUnsupported())},n.OrderedPair.prototype.analyzeScientific=function(e,t){return r(e,this,i.pointsUnsupported())}}),define("core/math/features/analyzeSingleExpressionScientific",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/parsenode/builtinfunction","core/math/builtinconstants"],function(e){"use strict";function t(e,t){return r(e,this,i.inequalitiesUnsupported())}var n=e("parsenodes"),r=e("core/math/statementanalysis"),i=e("core/math/errormsg"),o=e("core/math/parsenode/builtinfunction"),a=e("core/math/builtinconstants");n.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var n=this.tryGetConcreteTree(e,t);return n.isError?r(e,this,n):r(e,this,i.parseError())},n.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var n=this.tryGetConcreteTree(e,t);if(n.isError)return r(e,this,n);var s=n.getDependencies();if(s.length>0){var c,l=s[0];return c=o.hasOwnProperty(l)?i.functionUnsupported(l):a.hasOwnProperty(l)?i.constantUnsupported(l):i.variablesUnsupported(l),r(e,this,c)}return r(e,this,n)},n.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.assignmentsUnsupported())},n.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.functionDefinitionsUnsupported())},n.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.equationsUnsupported())},n.And.prototype.analyzeSingleExpressionScientific=t,n.DoubleInequality.prototype.analyzeSingleExpressionScientific=t,n.BaseComparator.prototype.analyzeSingleExpressionScientific=t,n.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.regressionsUnsupported())},n.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,t){return r(e,this,i.pointsUnsupported())}}),define("core/math/features/getgraphmode",["require","parsenodes","core/types/graphmode","core/lib/dragmode","core/lib/dragmode","core/math/types"],function(e){"use strict";function t(e,t){var n;return n=e&&e.hasOwnProperty("dragMode")?e.dragMode===c.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,s(n,t.moveStrategy)}function n(e,n){var r=n.getDependencies();switch(n.valueType){case l.Point:case l.ListOfPoint:return n.isMovablePoint&&t(this.userData,n)!==c.NONE?a.XYPOINT_MOVABLE:0===r.length?a.XYPOINT:e.validParametricVariables(r)?2===e.dimensions()?a.PARAMETRIC:a.PARAMETRIC_CURVE_3D:a.NONE;case l.Number:case l.ListOfNumber:return 2===e.dimensions()&&1===r.length?a.Y:3===e.dimensions()&&2===r.length?a.Z_3D:a.NONE;default:return a.NONE}}function r(e,t){var n=t._expression.getDependencies();if(n.length>1)return a.NONE;if(t._expression.valueType!==l.Number&&t._expression.valueType!==l.ListOfNumber)return a.NONE;var r=t._symbol;return e.graphMode(r,n)}function i(e,t){return t.isError?a.NONE:a.VISUALIZATION}var o=e("parsenodes"),a=e("core/types/graphmode"),s=e("core/lib/dragmode").reconcileDragMode,c=e("core/lib/dragmode").DragMode,l=e("core/math/types");o.Base.prototype.getGraphMode=function(e,t){return a.NONE},o.Expression.prototype.getGraphMode=n,o.Equation.prototype.getGraphMode=o.BaseComparator.prototype.getGraphMode=function(e,t){var n=t.getDependencies();return t.isConstant?a.NONE:t instanceof o.SolvedEquation?0===n.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):a.NONE:r(e,t):1===n.length||2===n.length?a.IMPLICIT:a.NONE},o.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},o.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof o.SolvedEquation)return r(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var i=t.getDependencies();switch(t.valueType){case l.Number:case l.ListOfNumber:case l.EmptyList:switch(i.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):a.NONE;case 1:return t.valueType!==l.ListOfNumber||e.graphableListVariables(this._symbol,i[0])?this.isSlider?a.NONE:e.graphMode(this._symbol,i):a.NONE;case 2:return 3===e.dimensions()&&"z"===this._symbol?a.Z_3D:a.NONE;default:return a.NONE}break;default:return n.call(this,e,t)}},o.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return a.NONE;var n=e.graphMode(this._symbol,this._argSymbols),r=t.getDependencies();switch(t.valueType){case l.Number:case l.ListOfNumber:switch(r.length){case 0:return n;case 1:return r[0]!==this._argSymbols[0]?a.NONE:n;default:return a.NONE}break;default:return a.NONE}},o.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?a.NONE:a.Y:a.NONE},o.Polygon.prototype.getGraphMode=function(e,t){return t.isError?a.NONE:a.POLYGONFILL},o.Object3D.prototype.getGraphMode=function(e,t){return t.isError?a.NONE:a.OBJECT3D},o.Histogram.prototype.getGraphMode=i,o.DotPlot.prototype.getGraphMode=i,o.BoxPlot.prototype.getGraphMode=i,o.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?a.NONE:a.XYPOINT:a.NONE}}),define("core/math/features/getgraphinfo",["require","parsenodes","core/math/builtinframe","core/math/domaintypes","core/math/policy"],function(e){"use strict";var t=e("parsenodes"),n=e("core/math/builtinframe"),r=e("core/math/domaintypes"),i=e("core/math/policy").defaultPolicy;t.Base.prototype.getGraphInfo=function(e,t){var n,i,o=t.getDependencies();switch(o.length){case 0:n=t.getLinearCoefficients(),i=t.boundDomain("x");break;case 1:i=t.boundDomain(o[0]),"known"===i.type&&(n=t.getLinearCoefficients());break;case 2:i=r.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:!!n,linearCoefficients:n,domainBound:i}},t.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.asValue(),0];case 1:if(this.polynomialOrder(e[0])>1)return;var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].tryGetConcreteTree(i,n).asValue():0,t[1]?+t[1].tryGetConcreteTree(i,n).asValue():0];default:return}},t.OrderedPair.prototype.getLinearCoefficients=function(){var e=this.args[0].getLinearCoefficients(),t=this.args[1].getLinearCoefficients();if(e&&t)return[e,t]}}),define("core/math/features/getMoveStrategy",["require","parsenodes","core/math/types","core/math/maybe-rational","core/math/builtinframe","core/math/functions"],function(e){"use strict";function t(e){return{type:"none",inputString:e}}function n(e){return{type:"updateCoordinate",inputString:e}}function r(e,t,n){return{type:"updateSlider",inputString:e,id:t,coefficients:n}}function i(e,t,n,r){return{type:"updateSliderNonlinear",inputString:e,id:t,initialValue:n.constant_value,min:n.slider_min_number,max:n.slider_max_number,compiled:r}}function o(e,t,n,r,i,o){for(var a=t.getDependencies(),s=0;s<a.length;s++)if(i[a[s]])return!1;for(var c=a.length-1;c>=0;c--){var l=a[c];if(!o[l]){var u=r[l];if(void 0!==u){var d=n[l];if(1===d.order){var p=d.tree,f=p.getPolynomialCoefficients(l),g=f[1]?f[1].getConcreteTree(e,h):m,y=f[0]?f[0].getConcreteTree(e,h):m;if(y.isConstant&&g.isConstant&&isFinite(y.asValue())&&isFinite(g.asValue())&&0!==g.asValue()){return{symbol:l,id:u,coefficients:[-y.asValue()/g.asValue(),1/g.asValue()]}}}}}}return!1}function a(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}function s(e,t){var n=a(e),r={};for(var i in t){var o=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&n[o]&&(r[o]=i)}return r}function c(e,t,n,r){for(var i=[],o=0;o<n.length;o++){var a=n[o],s={};i.push(s);for(var c=0;c<r.length;c++){var l=r[c],d=Object.create(t);d[l]=u.FreeVariable(l);var p=a.tryGetConcreteTree(e,d);p.isError?s[l]={tree:p,order:1/0}:s[l]={tree:p,order:p.polynomialOrder(l)}}}return i}function l(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];0!==t[i].order&&(n[i]=!0)}}var u=e("parsenodes"),d=e("core/math/types"),p=e("core/math/maybe-rational").maybeRational,h=e("core/math/builtinframe"),f=e("core/math/functions"),m=u.Constant(p(0,1));u.Base.prototype.getMoveStrategy=function(){},u.Assignment.prototype.getMoveStrategy=function(e,t,n,r){if(this._expression instanceof u.OrderedPair)return this._expression.getMoveStrategy(e,t,n,r)},u.OrderedPair.prototype.getMoveStrategy=function(e,a,p,h){if(p.valueType===d.Point&&0===p.getDependencies().length){for(var m=this.getDependencies(),g=s(m,h),y=Object.keys(g),v=this.args,b=c(e,a,v,y),x=[],E={},w={},_=0;_<2;_++){var S=v[_],M=S.getInputString();if(S.isConstant)x[_]=n(M);else{var k=o(e,S,b[_],g,E,w);k&&(x[_]=r(M,k.id,k.coefficients),E[k.symbol]=!0,l(y,b[_],w)),x[_]||(x[_]=t(M))}}if("none"!==x[0].type||"none"!==x[1].type)return x;if(1===y.length){var C,I=y[0],T=g[I];try{C=u.OrderedPair([b[0][I].tree,b[1][I].tree]).getCompiledFunction()}catch(e){return}return f.dehydrateCompiledFunction(C),[i(v[0].getInputString(),T,h[T].evaluationState,C),t(v[1].getInputString())]}}},u.Image.prototype.getMoveStrategy=function(e,i,a,u){if((!this.userData||!1!==this.userData.shouldGraph)&&"OrderedPair"===a.center.type&&a.center.args[0].isConstant&&a.center.args[1].isConstant&&a.width.isConstant&&a.height.isConstant&&a.radianAngle.isConstant&&a.opacity.isConstant){var d=this.getDependencies(),p=s(d,u),h=Object.keys(p),f=[this.width,this.height];"OrderedPair"===this.center.type&&f.push(this.center.args[0],this.center.args[1]);for(var m=[],g={},y={},v=c(e,i,f,h),b=[2,3,0,1],x=0;x<b.length;x++){var E=b[x],w=f[E];if(w){var _=w.getInputString();if(w.isConstant)m[E]=n(_);else{var S=o(e,w,v[E],p,g,y);S&&(m[E]=r(_,S.id,S.coefficients),g[S.symbol]=!0,l(h,v[E],y)),m[E]||(m[E]=t(_))}}else m[E]=t("")}if("none"!==m[0].type||"none"!==m[1].type||"none"!==m[2].type||"none"!==m[3].type)return m}}});define("core/math/features/getDefaultDragMode",["require","parsenodes","core/lib/dragmode"],function(e){"use strict";var t=e("parsenodes"),n=e("core/lib/dragmode").DragMode;t.Base.prototype.getMoveStrategy=function(){return n.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?n.XY:"none"!==e[0].type?n.X:"none"!==e[1].type?n.Y:n.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?n.XY:"updateSlider"===e[0].type?n.X:"updateSlider"===e[1].type?n.Y:n.NONE}}),define("core/math/features/tableinfo",["require","parsenodes","core/math/types","core/lib/label","core/math/distribution-spec"],function(e){"use strict";var t=e("parsenodes"),n=t.List,r=e("core/math/types"),i=e("core/lib/label"),o=e("core/math/distribution-spec").getFunctionSpecFromTree;t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();if(o(this))return!1;switch(t.valueType){case r.Point:case r.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:n.wrap(t).mapElements(e,function(e){return e.asArray()})};case r.Number:if(1!==i.length)return!1;var a=i[0];return!!e.validFirstColumnVariable(a)&&{independent_variable:a,dependent_column:this.getInputString(),by_reference:!1};default:return!1}},t.Assignment.prototype.tableInfo=function(e,n){if(n instanceof t.SolvedEquation)return!1;if(!this.getInputString().length)return!1;if(o(this))return!1;var r=n.getDependencies();if(r.length>1)return!1;var a;if(0===r.length){if(!e.tableableAsConstant(this._symbol))return!1;a=e.implicitIndependent(this._symbol)}else a=r[0];return!!e.validFirstColumnVariable(a)&&{independent_variable:a,dependent_column:e.assignmentForbidden(this._symbol)?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this.getInputString().length)return!1;if(t.getDependencies().length>1)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var r=e.assignmentForbidden(this._symbol);return{independent_variable:n,dependent_column:r?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!r}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("core/math/features/tableerror",["require","parsenodes","core/lib/worker-i18n"],function(e){"use strict";var t=e("parsenodes"),n=e("core/lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?n.t("Inequalities are not allowed."):!(this instanceof t.Expression)&&n.t("This type of expression is not allowed.")},t.List.prototype.tableError=function(){return n.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return n.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return n.t("Function definitions are not allowed.")},t.Regression.prototype.tableError=function(){return n.t("Regressions are not allowed.")}}),define("core/math/curve-accumulator",["require","exports","core/math/distance"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accumulator=void 0;var r=function(){function e(e){e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.ztolerance=e.ztolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=this.ztolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}return e.prototype.colinear=function(e,t,r){this.map&&(e=this.map(e),t=this.map(t),r=this.map(r));var i=n.pointToSegmentParameter(r[0],r[1],r[2]||0,e[0],e[1],e[2]||0,t[0],t[1],t[2]||0);if(i<1)return!1;var o=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1]),3===e.length?e[2]+i*(t[2]-e[2]):0];return Math.abs(r[0]-o[0])<=this.xtolerance&&Math.abs(r[1]-o[1])<=this.ytolerance&&(2===e.length||Math.abs(r[2]-o[2])<=this.ztolerance)},e.prototype.addPoint=function(e){if(this.dimensions=e.length,this.xtolerance<0&&this.ytolerance<0&&(2===this.dimensions||this.ztolerance<0))return void this.segment.push.apply(this.segment,e);if(!this.segment.length)return void this.segment.push.apply(this.segment,e);var t=2===this.dimensions?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(t,this.pivotPoint,e)||n.hypot(t[0]-e[0],t[1]-e[1],(t[2]||0)-(e[2]||0))<n.hypot(t[0]-this.pendingPoint[0],t[1]-this.pendingPoint[1],(t[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)},e.prototype.breakSegment=function(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]},e.prototype.getSegments=function(){return this.breakSegment(),this.segments},e.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},e}();t.Accumulator=r}),define("core/math/implicit-plotter",["require","exports","core/math/distance","./curve-accumulator"],function(e,t,n,r){"use strict";function i(e,t){var n=o(e,t);return{segments:n.contours.strokeSegments,fillSegments:n.contours.fillSegments,resolved:n.quadTree.resolved}}function o(e,t){var n=Math.pow(2,-H),r=l(t,n),i=l(t,2*n),o=p(e,r,i),a=I(o.root,e,r);return{paddedDomain:r,rootDomain:i,quadTree:o,triangles:a,contours:V(a,e,r)}}function a(e,t,n){return{x:e,y:t,z:n}}function s(e,t,n){return{x:e,y:t,isZero:n}}function c(e,t,n){return{vertices:[e,t,n],visited:!1,next:void 0}}function l(e,t){var n=(1+t)*e.xmin-t*e.xmax,r=(1+t)*e.xmax-t*e.xmin;return{xmin:n,ymin:(1+t)*e.ymin-t*e.ymax,xmax:r,ymax:(1+t)*e.ymax-t*e.ymin,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function u(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function d(e,t,n){e.center=S(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,n)}function p(e,t,n){var r=h(e,n),i=[],o=[];o.push(r);var a=1,s=!0;e:for(;o.length;){var c=i;i=o,o=c;for(var l=void 0;l=i.pop();)if(m(l,e,t)){if(f(l,e),!l.children){s=!1;break e}if(o.push(l.children[0]),o.push(l.children[1]),o.push(l.children[2]),o.push(l.children[3]),(a+=3)>=W){s=!1;break e}}else d(l,e,t)}for(var u=0;u<i.length;u++)d(i[u],e,t);for(var u=0;u<o.length;u++)d(o[u],e,t);return{root:r,resolved:s}}function h(e,t){var n=t.xmin,r=t.xmax,i=t.ymin,o=t.ymax;return u(0,[E(n,o,e),E(r,o,e),E(r,i,e),E(n,i,e)])}function f(e,t){var n=e.depth+1,r=e.vertices[0],i=e.vertices[1],o=e.vertices[2],a=e.vertices[3],s=w(r,i,t),c=w(i,o,t),l=w(o,a,t),d=w(a,r,t),p=w(r,o,t);e.children=[u(n,[r,s,p,d]),u(n,[s,i,c,p]),u(n,[p,c,o,l]),u(n,[d,p,l,a])]}function m(e,t,n){if(e.depth<H)return!0;if(b(e,n))return!1;if(v(e,n))return!1;var r=e.vertices[0],i=e.vertices[1],o=e.vertices[2],a=e.vertices[3];if(isNaN(r.z)&&isNaN(i.z)&&isNaN(o.z)&&isNaN(a.z))return!1;if(isNaN(r.z)||isNaN(i.z)||isNaN(o.z)||isNaN(a.z))return!0;var s=S(r,i,o,a,t,n),c=_(r,i,t,n),l=_(i,o,t,n),u=_(o,a,t,n),d=_(a,r,t,n);return y(r,c,t)||y(i,c,t)||y(i,l,t)||y(o,l,t)||y(o,u,t)||y(a,u,t)||y(a,d,t)||y(r,d,t)||g(r,c,s,t,n)||g(c,i,s,t,n)||g(i,l,s,t,n)||g(l,o,s,t,n)||g(o,u,s,t,n)||g(u,a,s,t,n)||g(a,d,s,t,n)||g(d,r,s,t,n)}function g(e,t,r,i,o){if(e.z>0==t.z>0&&t.z>0==r.z>0)return!1;var a,s,c,l;if(e.z>0==t.z>0){if(a=w(e,t,i),a.z>0!=e.z>0)return!0;s=k(e,r,i,o),c=k(t,r,i,o),l=k(a,r,i,o)}else if(t.z>0==r.z>0){if(a=w(t,r,i),a.z>0!=t.z>0)return!0;s=k(t,e,i,o),c=k(r,e,i,o),l=k(a,e,i,o)}else{if(a=w(r,e,i),a.z>0!=r.z>0)return!0;s=k(r,t,i,o),c=k(e,t,i,o),l=k(a,t,i,o)}var u=o.xtolerance,d=o.ytolerance;return n.pointToSegment(d*l.x,u*l.y,d*s.x,u*s.y,d*c.x,u*c.y)>u*d}function y(e,t,n){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var r=w(e,t,n),i=4*r.z-t.z-3*e.z,o=(n(.9999*e.x+1e-4*t.x,.9999*e.y+1e-4*t.y)-e.z)/1e-4,a=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-o)>.125*a}function v(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance||e.vertices[0].y-e.vertices[3].y<10*t.ytolerance}function b(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function x(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function E(e,t,n){return a(e,t,n(e,t))}function w(e,t,n){return E(.5*(e.x+t.x),.5*(e.y+t.y),n)}function _(e,t,n,r){if(x(e,r)||x(t,r))return w(e,t,n);if(isNaN(e.z)||isNaN(t.z))return C(e,t,n,r);if(e.z>0!=t.z>0)return w(e,t,n);var i=n(.99*e.x+.01*t.x,.99*e.y+.01*t.y)-e.z,o=t.z-n(.01*e.x+.99*t.x,.01*e.y+.99*t.y);return isNaN(i)||isNaN(o)?w(e,t,n):i>0==o>0?w(e,t,n):M(a(e.x,e.y,i),a(t.x,t.y,o),n)}function S(e,t,n,r,i,o){var a=_(e,n,i,o);return e.z>0==n.z>0&&a.z>0!=e.z>0?a:(a=_(t,r,i,o),t.z>0==r.z>0&&a.z>0!=t.z>0?a:w(e,n,i))}function M(e,t,n){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var r=1-e.z/t.z,i=1-t.z/e.z;return E(e.x/r+t.x/i,e.y/r+t.y/i,n)}return e}return t}return w(e,t,n)}function k(e,t,n,r){var i=e.x,o=t.x,c=e.y,l=t.y,u=e.z,d=t.z,p=r.xtolerance,h=r.ytolerance;if(x(e,r)||x(t,r)){var f=w(e,t,n);return s(f.x,f.y,!1)}for(;Math.abs(i-o)>p||Math.abs(c-l)>h;){var m=.5*(i+o),g=.5*(c+l),y=n(m,g);y>0==u>0?(i=m,c=g,u=y):(o=m,l=g,d=y)}if(isNaN(u))return s(o,l,!1);if(isNaN(d))return s(i,c,!1);var v=M(a(i,c,u),a(o,l,d),n),b=0===u||0===d||0===v.z||v.z>=u==d>=v.z&&Math.abs(v.z)<1e250;return s(v.x,v.y,b)}function C(e,t,n,r){if(isNaN(e.z)===isNaN(t.z))return w(e,t,n);if(isNaN(e.z)){var i=e;e=t,t=i}for(var o=e.x,s=t.x,c=e.y,l=t.y,u=e.z,d=r.xtolerance,p=r.ytolerance;Math.abs(o-s)>d||Math.abs(c-l)>p;){var h=.5*(o+s),f=.5*(c+l),m=n(h,f);isNaN(m)===isNaN(u)?(o=h,c=f,u=m):(s=h,l=f)}return a(o,c,u)}function I(e,t,n){var r={triangles:[],edgeCache:{},domain:n,fn:t};return T(e,r),r.triangles}function T(e,t){e.children&&(T(e.children[0],t),T(e.children[1],t),T(e.children[2],t),T(e.children[3],t),L(e.children[0],e.children[1],t),L(e.children[3],e.children[2],t),D(e.children[1],e.children[2],t),D(e.children[0],e.children[3],t))}function L(e,t,n){e.children&&t.children?(L(e.children[1],t.children[0],n),L(e.children[2],t.children[3],n)):e.children?(L(e.children[1],t,n),L(e.children[2],t,n)):t.children?(L(e,t.children[0],n),L(e,t.children[3],n)):P(e,t,n)}function D(e,t,n){e.children&&t.children?(D(e.children[2],t.children[1],n),D(e.children[3],t.children[0],n)):e.children?(D(e.children[2],t,n),D(e.children[3],t,n)):t.children?(D(e,t.children[1],n),D(e,t.children[0],n)):A(e,t,n)}function P(e,t,n){if(e.center&&t.center){var r,i;e.depth>=t.depth?(r=_(e.vertices[1],e.vertices[2],n.fn,n.domain),i=O(e.vertices[1],t.center,e.vertices[2],e.center,r)):(r=_(t.vertices[0],t.vertices[3],n.fn,n.domain),i=O(t.vertices[0],t.center,t.vertices[3],e.center,r)),q(i,n.edgeCache,n.domain);for(var o=0;o<4;o++)n.triangles.push(i[o])}}function A(e,t,n){if(e.center&&t.center){var r,i;e.depth>=t.depth?(r=_(e.vertices[3],e.vertices[2],n.fn,n.domain),i=O(e.vertices[2],t.center,e.vertices[3],e.center,r)):(r=_(t.vertices[1],t.vertices[0],n.fn,n.domain),i=O(t.vertices[1],t.center,t.vertices[0],e.center,r)),q(i,n.edgeCache,n.domain);for(var o=0;o<4;o++)n.triangles.push(i[o])}}function O(e,t,n,r,i){return[c(e,i,t),c(t,i,n),c(n,i,r),c(r,i,e)]}function F(e,t,n){return e.z>0&&!x(e,n)&&(!(t.z>0)||x(t,n))}function N(e,t){return e.x+","+e.y+","+t.x+","+t.y}function q(e,t,n){R(e[0],e[1],e[2],N(e[1].vertices[2],e[1].vertices[0]),t,n),R(e[1],e[2],e[3],N(e[2].vertices[0],e[2].vertices[2]),t,n),R(e[2],e[3],e[0],N(e[3].vertices[2],e[3].vertices[0]),t,n),R(e[3],e[0],e[1],N(e[0].vertices[0],e[0].vertices[2]),t,n)}function R(e,t,n,r,i,o){var a=t.vertices[0],s=t.vertices[1],c=t.vertices[2];F(s,c,o)&&(t.next=n),F(a,s,o)&&(t.next=e),F(c,a,o)&&j(t,r,i),F(a,c,o)&&B(t,r,i)}function B(e,t,n){n[t]?n[t].next=e:n[t]=e}function j(e,t,n){n[t]?e.next=n[t]:n[t]=e}function V(e,t,n){for(var i={fillAccumulator:new r.Accumulator(n),strokeAccumulator:new r.Accumulator(n),fn:t,domain:n},o=0;o<e.length;o++){var a=e[o];a.next&&!a.visited&&U(a,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function U(e,t){for(;;){var n=e.vertices[0],r=e.vertices[1],i=e.vertices[2];if(G(n,r,t),G(r,i,t),G(i,n,t),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function G(e,t,n){if(F(e,t,n.domain)){var r=k(e,t,n.fn,n.domain);n.fillAccumulator.addPoint([r.x,r.y]),r.isZero?n.strokeAccumulator.addPoint([r.x,r.y]):n.strokeAccumulator.breakSegment()}}function z(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push([r.vertices[0].x,r.vertices[0].y,r.vertices[1].x,r.vertices[1].y,r.vertices[2].x,r.vertices[2].y,r.vertices[0].x,r.vertices[0].y])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.displayTriangles=t.traceContours=t.triangulate=t.buildQuadTree=t.sampleImplicitDiagnostic=t.sampleImplicit=void 0;var H=5,W=Math.pow(2,14);t.sampleImplicit=i,t.sampleImplicitDiagnostic=o,t.buildQuadTree=p,t.triangulate=I,t.traceContours=V,t.displayTriangles=z}),define("core/math/poi-finding-accumulator",["require","exports","core/math/workerconfig","tslib","./curve-accumulator","./poi"],function(e,t,n,r,i,o){"use strict";function a(e){return Math.abs(e)<5e-8}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.domain=t,i.fn=n,i.derivative=r,i.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},i.zeroBuffer=[],i.extremumBuffer=[],i}return r.__extends(t,e),t.prototype.getPOI=function(){return n.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},t.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},t.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},t.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||(e<this.domain.min||e>this.domain.max||isNaN(e))},t.prototype.addPoint=function(t){0===this.segment.length&&a(t[1])&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.updateZeroBuffer(t),this.updateExtremumBuffer(t),e.prototype.addPoint.call(this,t)},t.prototype.updateZeroBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.zeroBuffer.length){case 0:if(a(e[1]))return;return void this.zeroBuffer.push(e);case 1:if(0===e[1])return void this.zeroBuffer.push(e);if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=o.bisectZero(this.zeroBuffer[0][0],this.zeroBuffer[0][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e);case 2:if(0===e[1])return;if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=o.flatCenter(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}}},t.prototype.updateExtremumBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.extremumBuffer.length){case 0:return void this.extremumBuffer.push(e);case 1:return e[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),void this.extremumBuffer.push(e);case 2:if(e[1]===this.extremumBuffer[1][1])return void this.extremumBuffer.push(e);if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1]);if(t){this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1]);!!!o.bisectJump(this.extremumBuffer[0][0],this.extremumBuffer[0][1],t[0],t[1],e[0],e[1],this.fn,this.ytolerance)&&t[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=t)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e);case 3:if(e[1]===this.extremumBuffer[1][1])return;if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=void 0,n=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),r=this.fn(n);return t=r===this.extremumBuffer[1][1]?o.flatCenter(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1],this.fn):this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],n,r,this.extremumBuffer[2][0],this.extremumBuffer[2][1]),t&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}}},t.prototype.bisectExtremumUsingDerivative=function(e,t,n,r,i,a){if(this.fn){var s;if(this.derivative){var c=this.derivative(e),l=this.derivative(i);if(!isNaN(c)&&!isNaN(l)&&c<0!=l<0){var u=o.bisectZero(e,c,i,l,this.derivative);u&&(s=[u[0],this.fn(u[0])])}}return s||(s=o.bisectExtremum(e,t,n,r,i,a,this.fn)),s}},t.prototype.breakSegment=function(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),this.segment.length>2&&(this.segments.push(this.segment),a(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]},t.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},t.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},t}(i.Accumulator);t.default=s}),define("core/math/plotter",["require","exports","tslib","core/math/distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","core/types/graphmode","./domaintypes"],function(e,t,n,r,i,o,a,s,c,l){"use strict";function u(e,t){for(var n,r=new s.default(t,e),i=t.min;i<=t.max+t.step/2;i+=t.step)n=e(i),isFinite(n)?r.addPoint([i,n]):r.breakSegment();return r.finish()}function d(e,t){var n=new s.default(t),r=e[0]+t.min*e[1],i=e[0]+t.max*e[1];return isFinite(r)&&isFinite(i)?(n.addPoint([t.min,r]),n.addPoint([t.max,i]),n.addLinearZero(e),n.addLinearIntercept(e),n.finish()):n.finish()}function p(e,t){
var n=d(e[0],t),r=d(e[1],t);return n.segments.length&&r.segments.length&&4===n.segments[0].length&&4===r.segments[0].length?{segments:[[n.segments[0][1],r.segments[0][1],n.segments[0][3],r.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function h(e,t){var r=e(t);return{segments:[n.__spreadArrays(r,r)],resolved:!0}}function f(e,t,n){var o=n.fn,a=n.jumpTolerance,s=e[0],c=e[1],l=t[0],u=t[1],d=r.mean(s,l),p=o(d);return i.bisectJump(s,c,d,p,l,u,o,a)}function m(e,t,n){var r=t,i=e(r);return isFinite(i)||(r=t+n,i=e(r)),isFinite(i)||(r=t-n,i=e(r)),[r,i]}function g(e,t,n){var r,o,a,s,c,l,u,d=new D(e,t,n),p=t.step/10,h=t.min;r=m(e,h,p),u=r[0],l=r[1];var f=[u,l];isFinite(l)&&d.accumulator.addPoint([u,l]);for(var g=Math.ceil((t.max-t.min)/t.step),y=1;y<=g;y++)h=(g-y)/g*t.min+y/g*t.max,o=m(e,h,p),u=o[0],l=o[1],isFinite(l)&&isFinite(f[1])?(a=L(f,[u,l],d),u=a[0],l=a[1],d.accumulator.addPoint([u,l])):isFinite(l)&&!isFinite(f[1])?(c=i.bisectFinite(f[0],f[1],u,l,e))&&(c[0]!==u&&d.accumulator.addPoint(c),s=L(c,[u,l],d),u=s[0],l=s[1],d.accumulator.addPoint([u,l])):!isFinite(l)&&isFinite(f[1])&&(c=i.bisectFinite(f[0],f[1],u,l,e))&&(c=L(f,c,d),c[0]!==f[0]&&d.accumulator.addPoint(c),d.accumulator.breakSegment()),f=[u,l];return d.accumulator.finish()}function y(e){for(var t=e.fn,n=e.domain,r=n.min,i=n.max,o=Math.floor(r),a=Math.ceil(i),s=[],c=o;c<=a;c++){var l=t(c);isFinite(c)&&isFinite(l)&&s.push([c,l])}return{segments:s,resolved:!0}}function v(e,t,n,r){function i(e,t){var i=t%2==0?1:-1;if(!r&&-1===i)return!1;for(var o=t*(Math.PI/n),a=[c,c+1,c+2,c+3],s=!1,l=0,d=a.length;l<d;l++){var p=e(a[l]),h=e(a[l]+o);if(isFinite(p)&&isFinite(h)&&(s=!0),isFinite(p)!==isFinite(h)||Math.abs(p-i*h)>u)return!1}return!!s}var o,a,s,c=t.min,l=t.max-t.min,u=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance?t.tolerance:0,d=Math.floor(l/(Math.PI/n));for(o=1;o<=d;o++)if(i(e,o)){for(s=o,a=2;a*o<=d;a++)i(e,a*o)||(s=void 0);if(s)break}return s?s*(Math.PI/n):null}function b(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function x(e,t){return t.map=b,g(e,t)}function E(e,t){for(var n=e.min,r=e.max,i=e.step,o=r-n,a=Math.ceil(o/i),s=o/a,c=0;c<a;c++)t(n+c*s);t(r)}function w(e,t){if(t.max<t.min)return{segments:[],resolved:!0};var n=new a.Accumulator(t),r=t.min,i=e(r);isFinite(i[0])&&isFinite(i[1])&&n.addPoint(i);var o;return E(t,function(t){o=e(t),_(e,r,i,t,o,10,n),r=t,i=o}),n.finish()}function _(e,t,n,i,o,a,s){if(i!==t){var c=s.xtolerance,l=s.ytolerance,u=s.ztolerance,d=r.mean(t,i),p=e(d),h=isFinite(n[0])&&isFinite(n[1])&&(2===n.length||isFinite(n[2])),f=isFinite(o[0])&&isFinite(o[1])&&(2===o.length||isFinite(o[2])),m=isFinite(p[0])&&isFinite(p[1])&&(2===p.length||isFinite(p[2]));if(0===a||d===t||d===i)return s.breakSegment(),void(f&&s.addPoint(o));if(h||f){if(h!==f){for(var g=t,y=i,v=n,b=o;t!==d&&d!==i;)m==h?(t=d,n=p,h=m):(i=d,o=p,f=m),d=t+(i-t)/2,p=e(d),m=isFinite(p[0])&&isFinite(p[1])&&(2===p.length||isFinite(p[2]));return void(h?(_(e,g,v,t,n,a-1,s),s.breakSegment()):(s.breakSegment(),s.addPoint(o),_(e,i,o,y,b,a-1,s)))}if(h&&m&&f){var x=r.pointToSegmentParameter(p[0],p[1],p[2]||0,n[0],n[1],n[2]||0,o[0],o[1],o[2]||0);if(x>.2&&x<.8&&Math.abs(p[0]-(n[0]+x*(o[0]-n[0])))<=c&&Math.abs(p[1]-(n[1]+x*(o[1]-n[1])))<=l&&(2===n.length||Math.abs(p[2]-(n[2]+x*(o[2]-n[2])))<=u))return void s.addPoint(o)}n[0]===p[0]&&n[1]===p[1]||_(e,t,n,d,p,a-1,s),o[0]===p[0]&&o[1]===p[1]||_(e,d,p,i,o,a-1,s)}}}function S(e,t){for(var n=e.fn,r=t.xmin,i=t.xmax,o=t.ymin,a=t.ymax,s=(i-r)/30,c=(a-o)/30,l=[],u=[],d=[],p=s/1e3,h=c/1e3,f=0;f<30;f++)for(var m=0;m<30;m++){var g=r+f*s,y=o+m*c,v=n(g,y);l.push(g,y,v);var b=n(g+p,y)-v,x=n(g,y+h)-v,E=b*h,w=x*p,_=-p*h,S=Math.sqrt(E*E+w*w+_*_);u.push(E/S,w/S,_/S)}for(var f=0;f<29;f++)for(var m=0;m<29;m++){var M=30*m+f,k=30*m+f+1,C=30*(m+1)+f,I=30*(m+1)+f+1;d.push(M,C,k),d.push(C,I,k)}return{cacheKey:e.source+":"+JSON.stringify(t),positions:new Float32Array(l),normals:new Float32Array(u),faces:new Int16Array(d)}}function M(e){if(!e)return!1;var t=e.viewport.xmin,n=e.viewport.xmax,r=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(n)||n<=t)&&(!(!isFinite(r)||!isFinite(i)||i<=r)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))}function k(e,t,n){var r,i,o=e.viewport.xmin,a=e.viewport.xmax,s=e.viewport.ymin,u=e.viewport.ymax,d=e.trigAngleMultiplier||1,p=e.oversample||4,h=1/p*(a-o)/e.screen.width,f=1/p*(u-s)/e.screen.height,m=t.domainBound;switch(t.graphMode){case c.X:switch(r=l.intersectDomains(l.knownDomain([s,u]),m),r.type){case"empty":return!1;case"known":s=r.bounds[0],u=r.bounds[1]}i={min:s,max:u,xtolerance:f,ytolerance:h,step:f};break;case c.Y:switch(r=l.intersectDomains(l.knownDomain([o,a]),m),r.type){case"empty":return!1;case"known":o=r.bounds[0],a=r.bounds[1]}i={min:o,max:a,xtolerance:h,ytolerance:f,step:h};break;case c.POLAR:if(!t.domain)throw new Error("Expected polar graph to have domain");if(i={min:t.domain.min,max:t.domain.max,step:2*Math.PI/d/1e3,tolerance:Math.min(h,f)},!t.domain.isExplicit){var g=v(n,i,d,"="===t.operator);g&&(i.max=i.min+g)}i.step=Math.max(i.step,(i.max-i.min)/11999);break;case c.PARAMETRIC:case c.PARAMETRIC_CURVE_3D:var y=t.domain?t.domain.min:0,b=t.domain?t.domain.max:1,x=t.domain?t.domain.step:.01;switch(r=l.intersectDomains(l.knownDomain([y,b]),m),r.type){case"empty":return!1;case"known":y=r.bounds[0],b=r.bounds[1]}i={min:y,max:b,step:x,xtolerance:h,ytolerance:f,ztolerance:Math.min(h,f)};break;case c.IMPLICIT:i={xmin:o,xmax:a,ymin:s,ymax:u,xtolerance:h,ytolerance:f};break;case c.Z_3D:return{xmin:-10,xmax:10,ymin:-10,ymax:10};default:return!1}return i}function C(e){var t,n,r,i=e.viewState,a=e.graphInfo,s=e.compiled,l=e.derivative,u=e.discrete,f=e.maxOverride,m=s.fn,v=k(i,a,m),b=a.graphMode;if(v){switch(b){case c.X:case c.Y:var E=l?l.fn:void 0;if(u){var _=v,M=_.min,C=_.max,I=_.step;t=y({fn:m,domain:{min:Math.max(M,0),max:void 0!==f?Math.min(f,C):C,step:I}})}else t=a.isLinear?d(a.linearCoefficients,v):g(m,v,E);break;case c.POLAR:t=x(m,v);break;case c.IMPLICIT:t=o.sampleImplicit(m,v);break;case c.PARAMETRIC:v.step||(v.step=(v.max-v.min)/1e3),t=v.max===v.min?h(m,v.min):a.isLinear?p(a.linearCoefficients,v):w(m,v);break;case c.PARAMETRIC_CURVE_3D:return v.step||(v.step=(v.max-v.min)/1e3),t=v.max===v.min?h(m,v.min):w(m,v),{graphMode:c.PARAMETRIC_CURVE_3D,segments:t.segments,cacheKey:s.source+":"+JSON.stringify(v),color:a.color,style:"dummy"};case c.Z_3D:return{meshData:S(s,v),color:a.color,graphMode:c.Z_3D,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},compiled:s,style:"dummy"};default:throw new Error("Programming Error: unexpected graphmode "+b)}r=t.poi}else t={segments:[],resolved:!0};if((!r||r.zeros.x.length+r.extrema.x.length+r.intercept.x.length>250)&&(r={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),b===c.X)for(var T in r)if(r.hasOwnProperty(T)){var L=T;n=r[L].y,r[L].y=r[L].x,r[L].x=n}var D={segments:t.segments,resolved:t.resolved,graphMode:b,color:a.color,style:u?a.pointStyle:a.lineStyle,lineWidth:a.lineWidth,lineOpacity:a.lineOpacity,operator:a.operator,poi:r,compiled:s};if(b===c.POLAR){var P=v;D.sampledDomain={min:P.min,max:P.max,step:P.step}}return t.fillSegments&&(D.fillSegments=t.fillSegments),D}function I(e,t,n){var r,i,o,a,s=[],l=null;switch(n){case c.POLAR:l=b;break;case c.X:l=function(e){return[e[1],e[0]]}}for(r=0;r<e.length;r++)for(a=e[r],i=0;i<a.length;i+=2)o=[a[i],a[i+1]],l&&(o=l(o)),s.push(o[0],o[1]);for(r=t.length-1;r>=0;r--)for(a=t[r],i=a.length-2;i>=0;i-=2)o=[a[i],a[i+1]],l&&(o=l(o)),s.push(o[0],o[1]);return s}function T(e,t,n){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},o=[],a=0,s=0,c=[],l=[],u=-1/0,d=-1/0;;){if(u<=d){if(a>=t.length)break;l.push(t[a++])}if(d<=u){if(s>=e.length)break;c.push(e[s++])}if(u=i(l),d=i(c),r.approx(u,d,4)){o.push(I(c,l,n)),l=[],c=[];var p=Math.max(u,d);u=p,d=p}}return o}Object.defineProperty(t,"__esModule",{value:!0});var L=function(e,t,n){var r=n.fn,i=n.jumpTolerance,o=n.accumulator;if(!isFinite(i)||i<=0)return t;var a=f(e,t,n);if(!a)return t;for(var s=(t[0]-e[0])/10,c=[-s,s],l=t,u=0;u<c.length;u++){var d=e[0]+c[u],p=r(d);isFinite(p)||(d=e[0],p=e[1],d=e[0],p=e[1]);var h=t[0]+c[u],m=r(h);if(isFinite(m)?l=[h,m]:(h=t[0],m=t[1]),f([d,p],[h,m],n)){var g=a[0],y=a[1];return o.addPoint(g),o.breakSegment(),o.addPoint(y),t}}return l},D=function(){function e(e,t,n){this.derivative=n,this.accumulator=new s.default(t,e,n),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance||0}return e}();t.default={sampleXYNaive:u,sampleLinear:d,sampleXY:g,findPiPeriod:v,samplePolar:x,sampleParametricRecursive:w,subsampleParametricRecursive:_,validateViewState:M,computeDomain:k,computeGraphData:C,polygonsFromSegments:T}}),define("core/math/cdf-branches",["require","exports","tslib","core/lib/deepCopy","core/math/plotter","core/math/domaintypes","core/types/styles"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCDFTopBranches=void 0;var s=function(e,t){var r=e.segments,i=t.segments,o=n.__spreadArrays(r,i);return n.__assign(n.__assign({},e),{segments:o})},c=function(e){var t=e.viewState,n=e.graphInfo,s=e.compiled,c=e.derivative,l=e.bounds,u=e.included,d=e.discrete,p=r.default(n),h=o.intersectDomains(n.domainBound,o.knownDomain(l));if("known"===h.type)return p.domainBound=h,d?p.pointStyle=u?a.PointStyle.POINT:a.PointStyle.OPEN:p.lineStyle=a.LineStyle.SOLID,i.default.computeGraphData({graphInfo:p,viewState:t,compiled:s,derivative:c,discrete:d})};t.makeCDFTopBranches=function(e){var t,n=e.viewState,r=e.graphInfo,o=e.compiled,a=e.derivative,l=e.bounds,u=e.discrete,d=e.maxOverride,p=l[0],h=l[1],f=[];if(u){p=Math.ceil(p),h=Math.floor(h);var m=void 0!==d?d:1/0;if(p===-1/0&&h>=m)t=c({bounds:[p,m],included:!0,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u}),f.push(t);else if(p===-1/0&&h<1/0)t=c({bounds:[p,h],included:!0,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u}),f.push(t),f.push(c({bounds:[h+1,m],included:!1,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u}));else if(p>-1/0&&h>=m)t=c({bounds:[p,m],included:!0,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u}),f.push(c({bounds:[-1/0,p-1],included:!1,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u})),f.push(t);else{t=c({bounds:[p,h],included:!0,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u});var g=c({bounds:[-1/0,p-1],included:!1,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u}),y=c({bounds:[h+1,m],included:!1,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u});f.push(t);var v=void 0;g&&y&&(v=s(g,y),f.push(v))}}else t=c({bounds:[p,h],included:!0,viewState:n,graphInfo:r,compiled:o,derivative:a,discrete:u}),f.push(i.default.computeGraphData({viewState:n,graphInfo:r,compiled:o,derivative:a}));return{cdfTopBranch:t,topBranches:f}}}),define("core/math/copy-defined-pois",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){for(var t=[],n=[],r=e.length,i=0;i<r;i++)t.push(e[i][0]),n.push(e[i][1]);return{defined:{x:t,y:n}}};t.default=n}),define("core/types/opacity",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIGH=t.DEFAULT=t.LOW=void 0,t.LOW=.2,t.DEFAULT=.4,t.HIGH=.8}),define("core/types/slider-loop-modes",["require","exports"],function(e,t){"use strict";function n(e){switch(e){case r.LOOP_FORWARD:return"dcg-icon-arrow-one-way";case r.LOOP_FORWARD_REVERSE:return"dcg-icon-arrow-two-way";case r.PLAY_ONCE:return"dcg-icon-arrow-once";case r.PLAY_INDEFINITELY:return"dcg-icon-arrow-infinite"}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSliderIcon=t.SliderLoopMode=void 0;var r;!function(e){e.LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",e.LOOP_FORWARD="LOOP_FORWARD",e.PLAY_ONCE="PLAY_ONCE",e.PLAY_INDEFINITELY="PLAY_INDEFINITELY"}(r=t.SliderLoopMode||(t.SliderLoopMode={})),t.getSliderIcon=n}),define("core/lib/default-spec",["require","exports","underscore","core/lib/deepCopy"],function(e,t,n,r){"use strict";function i(e,t){var r={};for(var i in t)t.hasOwnProperty(i)&&(n.isEqual(e[i],t[i])||(r[i]=t[i]));return r}function o(e,t){var r=void 0,i={};for(var o in t)t.hasOwnProperty(o)&&(n.isEqual(e[o],t[o])||(i[o]=t[o],r=i));return r}function a(e,t){t||(t={});var n={};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(n[i]=r.default(e[i]));for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.populateDefaults=t.stripDefaultsAndMaybeReturnUndefined=t.stripDefaults=void 0,t.stripDefaults=i,t.stripDefaultsAndMaybeReturnUndefined=o,t.populateDefaults=a}),define("core/graphing-calc/json/expression",["require","exports","tslib","core/types/opacity","core/types/styles","core/lib/dragmode","core/types/slider-loop-modes","core/types/label-sizes","core/types/label-orientations","core/lib/default-spec"],function(e,t,n,r,i,o,a,s,c,l){"use strict";function u(e){return n.__assign(n.__assign(n.__assign({},t.DEFAULTS),e),{slider:n.__assign(n.__assign({},t.SLIDER_DEFAULTS),e.slider),cdf:n.__assign(n.__assign({},t.CDF_DEFAULTS),e.cdf),vizProps:n.__assign(n.__assign({},t.VIZ_DEFAULTS),e.vizProps),clickableInfo:n.__assign(n.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})}function d(e){var r=l.stripDefaults(t.DEFAULTS,n.__assign(n.__assign({},e),{slider:l.stripDefaults(t.SLIDER_DEFAULTS,e.slider)})),i=l.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS,e.cdf);void 0===i?delete r.cdf:r.cdf=i;var o=l.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS,e.vizProps);void 0===o?delete r.vizProps:r.vizProps=o;var a=l.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===a?delete r.clickableInfo:r.clickableInfo=a,r}function p(e){return{type:"statement",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,fillOpacity:e.fillOpacity,lineOpacity:e.lineOpacity,lineWidth:e.lineWidth,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:"",max:e.slider.hardMax?e.slider.max:"",softMin:e.slider.hardMin?"":e.slider.min,softMax:e.slider.hardMax?"":e.slider.max,step:e.slider.step,isPlayingOnce:e.slider.isPlaying&&e.slider.loopMode===a.SliderLoopMode.PLAY_ONCE},parametricDomain:e.parametricDomain,polarDomain:e.polarDomain,cdf:e.cdf,vizProps:e.vizProps,clickableInfo:e.clickableInfo}}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.stripDefaults=t.inflateDefaults=t.SLIDER_DEFAULTS=t.DEFAULTS=t.DEFAULT_SLIDER_PERIOD=t.EditableLabelMode=t.CLICKABLEINFO_DEFAULTS=t.VIZ_DEFAULTS=t.CDF_DEFAULTS=void 0,t.CDF_DEFAULTS={show:!1,min:"",max:""},t.VIZ_DEFAULTS={breadth:"",axisOffset:"",alignedAxis:"x",binAlignment:"center",dotplotXMode:"exact",dotplotSize:"medium",histogramMode:""},t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}]};var h;!function(e){e.None="NONE",e.Math="MATH",e.Text="TEXT"}(h=t.EditableLabelMode||(t.EditableLabelMode={})),t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS={folderId:"",latex:"",color:"",showLabel:!1,label:"",cdf:t.CDF_DEFAULTS,vizProps:t.VIZ_DEFAULTS,clickableInfo:t.CLICKABLEINFO_DEFAULTS,hidden:!1,secret:!1,dragMode:o.DragMode.AUTO,labelSize:s.LabelSize.MEDIUM,labelOrientation:c.LabelOrientation.DEFAULT,verticalLabel:!1,suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:h.None,residualVariable:"",isLogModeRegression:!1,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,fillOpacity:""+r.DEFAULT,lineOpacity:"",lineWidth:"",regressionParameters:{},displayEvaluationAsFraction:!1,slider:{},polarDomain:{min:"",max:""},parametricDomain:{min:"",max:""},points:void 0,lines:void 0,fill:void 0},t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:a.SliderLoopMode.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.inflateDefaults=u,t.stripDefaults=d,t.computeParsableState=p}),define("core/math/features/graph",["require","underscore","parsenodes","core/math/plotter","core/types/graphmode","core/math/comparators","core/lib/dragmode","core/math/expression-types","core/math/types","core/math/builtin","core/math/cdf-branches","core/math/copy-defined-pois","core/math/distribution-spec","core/graphing-calc/json/expression","core/types/opacity"],function(e){"use strict";function t(e,t){for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<t.length;a++)for(var s=t[a],c=0;c<s.length;c+=2){var l=s[c],u=s[c+1];l<n&&(n=l),l>r&&(r=l),u<i&&(i=u),u>o&&(o=u)}if(isFinite(n)&&isFinite(i))return{type:e,xmin:n,ymin:i,xmax:r,ymax:o}}function n(e,t,n){var r={};n-=.5*t;for(var i=e.length-1;i>=0;i--){var o=e[i],a=Math.floor((o-n)/t);r[a]?r[a].data.push(o):r[a]={id:a,data:[o],min:a*t+n,max:a*t+n+t,center:a*t+n+t/2}}return r}function r(e){return Array.prototype.concat.apply([],e)}function i(e,t,n){return!!e&&(0===t&&0===n?"none"!==e[2].type||"none"!==e[3].type:0!==t&&0!==n?"none"!==e[0].type&&"none"!==e[1].type:0!==t?"none"!==e[0].type:0!==n&&"none"!==e[1].type)}var o=e("underscore"),a=e("parsenodes"),s=e("core/math/plotter").default,c=e("core/types/graphmode"),l=e("core/math/comparators"),u=e("core/lib/dragmode").DragMode,d=e("core/math/expression-types").getReconciledExpressionProps,p=e("core/math/types"),h=a.List,f=e("core/math/builtin"),m=e("core/math/cdf-branches").makeCDFTopBranches,g=e("core/math/copy-defined-pois").default,y=e("core/math/distribution-spec").getFunctionSpecFromTree,v=e("core/graphing-calc/json/expression").EditableLabelMode,b=e("core/types/opacity");a.Base.prototype._graph=function(e,t,n,i){function l(e,t){if(e){var n,r,i,o,a,s,c,l,u=e.discrete?"discreteDistribution":"continuousDistribution";if("binomialdist"===e.symbol)return r=t.args[1].asValue(),i=t.args.length>2?t.args[2].asValue():.5,n=f.binompdf(i*r,r,i),{type:u,xmin:0,xmax:r,ymin:0,ymax:n};if("poissondist"===e.symbol)return o=t.args[1].asValue(),n=Math.max(f.poissonpdf(Math.floor(o),o),f.poissonpdf(Math.ceil(o),o)),{type:u,xmin:0,xmax:2.5*o,ymin:0,ymax:n};if("normaldist"===e.symbol)return o=t.args.length>1?t.args[1].asValue():0,a=t.args.length>2?t.args[2].asValue():1,n=f.normalpdf(o,o,a),{type:u,xmin:o-2*Math.abs(a),xmax:o+2*Math.abs(a),ymin:0,ymax:n};if("uniformdist"===e.symbol)return s=t.args.length>1?t.args[1].asValue():0,c=t.args.length>2?t.args[2].asValue():1,o=(s+c)/2,l=c-s,n=f.uniformpdf(o,s,c),{type:u,xmin:s-l/3,xmax:c+l/3,ymin:0,ymax:n};if("tdist"===e.symbol){var d=t.args[1].asValue();return n=f.tpdf(0,d),{type:u,xmin:-3,xmax:3,ymin:0,ymax:n}}}}function u(e){var t=e.editableLabelMode;return t===v.Text||t===v.Math}if(t instanceof a.SolvedEquation)return this._graph(e,t._expression,n,i);var b,x,E,w,_,S=this,M=t.getExpressionType(i.graphMode,t.valueType),k=d(M,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(i.graphMode){case c.XYPOINT_MOVABLE:return b=[t.asArray()],E=this.userData.shouldGraph&&k.points,_=this.userData.showLabel&&!E,E?[{segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:u(this.userData),labels:this.computedLabels||[],poi:g(b)}]:_?[{segments:[b],graphMode:c.XYPOINT,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:u(this.userData),labels:this.computedLabels||[],poi:g(b)}]:[];case c.XYPOINT:return x=[],b=h.wrap(t).mapElements(e,function(e){return e.asArray()}),E=this.userData.shouldGraph&&k.points,w=this.userData.shouldGraph&&k.lines,_=this.userData.showLabel&&!E&&!w,(this.userData.showLabel||E)&&x.push({segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:E,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:u(this.userData),nakedLabel:_,labels:this.computedLabels||[],poi:g(b)}),w&&x.push({segments:[b].map(r),graphMode:c.PARAMETRIC,color:this.userData.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity,poi:[]}),x;case c.PARAMETRIC:case c.PARAMETRIC_CURVE_3D:var C=this.userData,I=[];if(x=h.wrap(t).mapElements(e,function(t){if(0===t.getDependencies().length)return b=[t.asArray()],{segments:[b],graphMode:c.XYPOINT,color:C.color,style:C.lineStyle,lineWidth:S.metaData.computedLineWidth,lineOpacity:S.metaData.computedLineOpacity,poi:g(b)};var r=t.getCompiledFunction(),o=S.getGraphInfo(e,t);return o.graphMode=i.graphMode,o.domain={min:S.metaData.evaluatedDomainMin,max:S.metaData.evaluatedDomainMax},o.style=S.userData.lineStyle,o.lineWidth=S.metaData.computedLineWidth,o.lineOpacity=S.metaData.computedLineOpacity,s.computeGraphData({viewState:n,graphInfo:o,compiled:r})}),k.fill){if(x.forEach(function(e){I.push({segments:e.segments,color:C.color,fillOpacity:S.metaData.computedFillOpacity,graphMode:c.POLYGONFILL,poi:[]})}),!k.lines)return I;x=x.concat(I)}return x;case c.X:case c.Y:case c.IMPLICIT:case c.POLAR:case c.Z_3D:x=[];var T=t.valueType===p.Number;return h.wrap(t).eachElement(e,function(t){var r,a=i.graphMode===c.IMPLICIT||i.graphMode===c.Z_3D?t.getCompiledFunction(["x","y"]):t.getCompiledFunction(),u=y(S),d=u&&u.discrete,p=l(u,t);try{r=t.getCompiledDerivative()}catch(e){}var h=S.getGraphInfo(e,t);h.graphMode=i.graphMode,h.style=S.userData.lineStyle,h.lineWidth=S.metaData.computedLineWidth,h.lineOpacity=S.metaData.computedLineOpacity,i.graphMode===c.POLAR&&(h.domain={min:S.metaData.evaluatedDomainMin,max:S.metaData.evaluatedDomainMax,isExplicit:S.metaData.isExplicitDomain});var f=S.metaData.evaluatedCDFMin,v=S.metaData.evaluatedCDFMax;if(isNaN(f)||isNaN(v)||!T){var b={viewState:n,graphInfo:h,compiled:a,derivative:r,discrete:d};u&&"binomialdist"===u.symbol&&(b.maxOverride=t.args[1].asValue());var E=s.computeGraphData(b);p&&(E.boundingBox=p),E.fillSegments?x.push(o.omit(E,"fillSegments")):d?x.push({graphMode:c.XYPOINT,segments:[E.segments],showPoint:S.userData.shouldGraph,color:S.userData.color,style:E.style,boundingBox:p,poi:g(E.segments)}):x.push(E),h.graphMode===c.IMPLICIT&&"="!==h.operator&&x.push({graphMode:c.POLYGONFILL,segments:E.fillSegments,poi:{}})}else{var w={viewState:n,graphInfo:h,compiled:a,derivative:r,bounds:[f,v],discrete:d};u&&"binomialdist"===u.symbol&&(w.maxOverride=t.args[1].asValue());var _=m(w),M=_.cdfTopBranch,k=o.each(_.topBranches,function(e){e&&(e.boundingBox=p)});if(o.every(k,function(e){return void 0!==e}))if(d){if(x=k.map(function(e){return{graphMode:c.XYPOINT,segments:[e.segments],showPoint:S.userData.shouldGraph,color:S.userData.color,style:e.style,poi:g(e.segments),boundingBox:p}}),M&&M.segments.length){var C=[];M.segments.forEach(function(e){C.push([e[0],0,e[0],e[1]])}),x.push({graphMode:c.PARAMETRIC,segments:C,boundingBox:p,poi:{}})}}else if(x=k,M&&M.segments.length){var I,L,D,P;for(I=0;I<M.segments.length;I++)if(L=M.segments[I],L.length>=4){D=L[0];break}for(I=M.segments.length-1;I>=0;I--)if(L=M.segments[I],L.length>=4){P=L[L.length-2];break}if(isFinite(D)&&isFinite(P)){var A=s.polygonsFromSegments(M.segments,[[D,0,P,0]],M.graphMode);x.push({graphMode:c.POLYGONFILL,segments:A,poi:{}})}}}}),x;default:return!1}},a.Base.prototype.graph=function(e,t,n){var r=this.getGraphInfo(e,t);return this._graph(e,t,n,r)},a.BaseComparator.prototype.graph=function(e,t,n){var r=this,i=this.getGraphInfo(e,t),o=i.graphMode;if(o===c.IMPLICIT)return this._graph(e,t,n,i);if(o===c.NONE)return!1;if(!(t instanceof a.SolvedEquation))return!1;var u=this.getOperator(),d=[],p=[],h=!0;t._expression.eachElement(e,function(e){d.push(e.getCompiledFunction());try{p.push(e.getCompiledDerivative())}catch(e){h=!1}}),h||(p=void 0);var f,m,g=[],y=[-1,0,0,1],v=d.length;for(m=0;m<v;m++){var b=this.getGraphInfo(e,t._expression.args[m]);b.graphMode=o,b.style=r.userData.lineStyle,i.graphMode===c.POLAR&&(b.domain={min:r.metaData.evaluatedDomainMin,max:r.metaData.evaluatedDomainMax,isExplicit:r.metaData.isExplicitDomain}),f=s.computeGraphData({viewState:n,graphInfo:b,compiled:d[m],derivative:p?p[m]:void 0}),f.operator=l.get(l.table[u].inclusive,y[m%4]),g.push(f)}for(m=0;m<v;m+=4){var x=s.polygonsFromSegments(g[m+1].segments,g[m+2].segments,o);g.push({graphMode:c.POLYGONFILL,segments:x,poi:{}})}return g},a.DoubleInequality.prototype.graph=function(e,t,n){var r=this.getGraphInfo(e,t);if(r.graphMode===c.NONE)return!1;var i=[],o=l.get(l.table[this._operators[0]].inclusive,0),a=l.get(l.table[this._operators[1]].inclusive,0),u=this.userData,d=this.metaData,p=this;return h.eachArgs(e,t._expressions,function(t){var l,h;t[0].userData=t[1].userData=u,t[0].metaData=t[1].metaData=d,l=p._graph(e,t[0],n,r)[0],l.operator=o,i.push(l),h=p._graph(e,t[1],n,r)[0],h.operator=a,i.push(h);var f=s.polygonsFromSegments(l.segments,h.segments,l.graphMode);i.push({graphMode:c.POLYGONFILL,segments:f,poi:{}})}),i},a.Regression.prototype.graph=function(e,t,n){var r=this.getGraphInfo(e,t);return this._graph(e,t.model,n,r)},a.Polygon.prototype.graph=function(e,t,n){for(var i=this.getGraphInfo(e,t),o=t.args[0].asValue(),a=[],s=void 0===this.userData.lines||this.userData.lines,l=void 0===this.userData.fill||this.userData.fill,u=[],d=[],p=0;p<o.length;p++){var h=o[p][0],f=o[p][1];isFinite(h)&&isFinite(f)?(s||l)&&d.push([h,f]):(s||l)&&(d.length>1&&u.push(d),d=[])}if(u.length||d.length){d.push([o[0][0],o[0][1]]),u.push(d);var m=u.map(r);l&&a.push({segments:m,graphMode:c.POLYGONFILL,poi:[],color:i.color,fillOpacity:this.metaData.computedFillOpacity,style:i.style}),s&&a.push({segments:m,graphMode:c.PARAMETRIC,poi:[],color:i.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity})}return a};var x=function(e,t){var n=[];return h.wrap(t).eachElement(e,function(e){n.push(e.args.map(function(e){return e.asValue()}))}),n};a.Object3D.prototype.graph=function(e,t,n){var r=this.getGraphInfo(e,t);return[{segments:[x(e,t)],color:r.color,objectName:this._symbol,poi:[],graphMode:c.OBJECT3D}]},a.Histogram.prototype.graph=function(e,r,i){var o=this.getGraphInfo(e,r),a=r.args[0].asValue(),s=r.args[1].asValue(),l=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?s/2:0,u=n(a,s,l),d=1;this.userData.vizProps&&"density"===this.userData.vizProps.histogramMode?d=1/(a.length*s):this.userData.vizProps&&"relative"===this.userData.vizProps.histogramMode&&(d=1/a.length);var p=[],h=[];for(var f in u){var m=u[f],g=m.data.length;h.push([m.min,0*d,m.min,g*d,m.max,g*d,m.max,0*d]);var y=0;u[m.id+1]&&(y=u[m.id+1].data.length);var v=[m.min,0*d,m.min,g*d,m.max,g*d];y<g&&v.push(m.max,y*d),p.push(v)}var x=t("histogram",h);return x&&s&&(x.binWidth=s),[{segments:h,graphMode:c.POLYGONFILL,boundingBox:x,poi:[],color:o.color,fillOpacity:b.DEFAULT},{segments:p,graphMode:c.Y,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:o.color}]},a.DotPlot.prototype.graph=function(e,r,i){var o,a,s,l,u=this.getGraphInfo(e,r),d=r.args[1].asValue(),p=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?d/2:0,h=n(r.args[0].asValue(),d,p),f=!1,m=[];for(a in h){s=h[a];for(var y=s.data.length-1;y>=0;y--)s.center!==s.data[y]&&(f=!0)}if(this.userData.vizProps&&"exact"===this.userData.vizProps.dotplotXMode)for(a in h)for(s=h[a],l=s.data,l.reverse(),o=0;o<l.length;o++)m.push([l[o],o+1]);else for(a in h)for(s=h[a],l=s.data,o=0;o<l.length;o++)m.push([s.center,o+1]);var v=t("dotplot",m);return v&&d&&(v.ymin=0,v.xmin-=.5*d,v.xmax+=.5*d,v.binWidth=d),[{segments:[m],graphMode:c.XYPOINT,boundingBox:v,poi:g(m),color:u.color,style:this.userData.pointStyle,pointSize:this.userData.vizProps&&this.userData.vizProps.dotplotSize,showPoint:!0,needsDotplotXMode:f}]},a.BoxPlot.prototype.graph=function(e,n,r){var i=this.getGraphInfo(e,n),o=this.metaData.evaluatedAxisOffset,a=this.metaData.evaluatedBreadth,s=n.args[0].asValue();if(isNaN(a)||isNaN(o))return{};var l=Math.min.apply(null,s),u=Math.max.apply(null,s),d=f.quartile(s,1),p=f.quartile(s,2),h=f.quartile(s,3),m=o,g=m-a/2,y=m+a/2,v=a/10,b=[[d,g,h,g,h,y,d,y,d,g],[p,g,p,y],[d,m,l,m],[h,m,u,m],[l,m-v,l,m+v],[u,m-v,u,m+v]];if(this.userData.vizProps&&"y"===this.userData.vizProps.alignedAxis)for(var x=0;x<b.length;x++)for(var E=b[x],w=0;w<E.length;w+=2){var _=E[w];E[w]=E[w+1],E[w+1]=_}return[{segments:b,graphMode:c.PARAMETRIC,boundingBox:t("boxplot",b),poi:[],color:i.color}]},a.Table.prototype.isValueDraggable=function(e,t,n){if(!e.columns[t].isIndependent)return!1;var r=this.columns[t],i=r.values,o=i&&i[n];return!(!o||!isFinite(o.asValue())||0!==o._dependencies.length)},a.Table.prototype.graph=function(e,t,n){var i=[];if(t.columns[0].isError)return i;for(var o=t.columns[0],a=o.values,s=1;s<this.columns.length;s++){var l=t.columns[s];if(!l.isError){var d=this.columns[s].header.userData;if(!d.hidden){for(var p=d.dragMode,h=p===u.X||p===u.XY,f=p===u.Y||p===u.XY,m=!!d.points,y=!!d.lines,v=l.isDiscrete(o),b=y&&v,x=y&&!v,E=[],w=[],_=[],S=[],M=[],k=[],C=1/0,I=-1/0,T=1/0,L=-1/0,D=0;D<a.length;D++){var P=a[D],A=l.values[D];if(P&&A&&isFinite(P.asValue())&&isFinite(A.asValue())){var O=P.asValue(),F=A.asValue();if(m){var N=h&&this.isValueDraggable(t,0,D),q=f&&this.isValueDraggable(t,s,D);N||q?(_.push([O,F]),S.push({index:D,dragX:N,dragY:q})):w.push([O,F])}b&&k.push([O,F]),O<C&&(C=O),O>I&&(I=O),F<T&&(T=F),F>L&&(L=F)}else b&&(k.length>1&&M.push(k),k=[])}var R={type:"table",xmin:C,xmax:I,ymin:T,ymax:L};if(_.length&&E.push({graphMode:c.XYPOINT_MOVABLE,segments:[_],color:d.color,tableId:d.tableId,poi:g(_),movablePointInfo:S,boundingBox:R}),w.length&&E.push({segments:[w],graphMode:c.XYPOINT,showPoint:!0,poi:g(w),color:d.color,style:d.pointStyle,tableId:d.tableId,boundingBox:R}),(M.length||k.length)&&(M.push(k),E.push({segments:M.map(r),graphMode:c.PARAMETRIC,poi:[],color:d.color,style:d.lineStyle,tableId:d.tableId,boundingBox:R})),x){var B=this.columns[s].header.graph(e,t.columns[s].header,n);B.length&&Array.prototype.push.apply(E,B)}E.length&&(i[d.id]=E)}}}return i},a.Image.prototype.graph=function(e,t,n){var r=[];if(!("OrderedPair"===t.center.type&&t.center.args[0].isConstant&&t.center.args[1].isConstant&&t.radianAngle.isConstant&&t.width.isConstant&&t.height.isConstant&&t.opacity.isConstant))return r;for(var o=[],a=[],s=t.width.asValue()/2,l=t.height.asValue()/2,u=t.radianAngle.asValue(),d=-1;d<=1;d++)for(var p=-1;p<=1;p++){var h=[t.center.args[0].asValue()+d*s*Math.cos(u)+p*l*Math.sin(u),t.center.args[1].asValue()-d*s*Math.sin(u)+p*l*Math.cos(u)],f=i(t.moveStrategy,d,p);f&&(o.push(h),a.push([d,p]))}return r.push({segments:[o],scaleFactors:[a],graphMode:c.XYPOINT_MOVABLE,color:this.userData.color,style:this.userData.style,poi:g(o)}),r}}),define("core/math/features/elementAt",["require","parsenodes","core/math/builtinframe"],function(e){"use strict";function t(e,t){for(var n=0;n<this.length;n++)t(this.elementAt(e,n))}function n(e,t){for(var n=[],r=0;r<this.length;r++)n.push(t(this.elementAt(e,r)));return n}var r=e("parsenodes"),i=e("core/math/builtinframe");r.List.prototype.elementAt=function(e,t){
return t=Math.floor(t),t>=0&&t<this.args.length?this.args[t]:r.Constant(NaN)},r.Broadcast.prototype.elementAt=function(e,t){if((t=Math.floor(t))<0||t>=this.length)return r.Constant(NaN);for(var n={},o=0;o<this._replacedSymbols.length;o++)n[this._replacedSymbols[o]]=this._lists[o].elementAt(e,t);return this._expression.substitute(n).getConcreteTree(e,i)},r.Broadcast.prototype.asList=function(e){for(var t=[],n=0;n<this.length;n++)t.push(this.elementAt(e,n));return r.List(t)},r.List.prototype.eachElement=t,r.Broadcast.prototype.eachElement=t,r.List.prototype.mapElements=n,r.Broadcast.prototype.mapElements=n,r.OrderedPair.prototype.elementAt=function(e,t){switch(t){case 0:return this.args[0];case 1:return this.args[1];default:return r.Constant(NaN)}}}),define("core/math/features/printLatex",["require","parsenodes","core/lib/label","core/lib/number-to-latex"],function(e){"use strict";function t(){return c.identifierToLatex(this._symbol)+" "}function n(e){switch(e){case">":return"\\gt ";case"<":return"\\lt ";case">=":return"\\ge ";case"<=":return"\\le ";case"=":return"="}}function r(e){return e.printLatex()}function i(){switch(this._symbol){case"sqrt":return"\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\log_{"+this.args[1].printLatex()+"}\\left("+this.args[0].printLatex()+"\\right)";default:return c.identifierToLatex(this._symbol)+"\\left("+this.args.map(r).join(", ")+"\\right)"}}function o(e){return e.isConstant&&!0===e.asValue()}function a(e){return e.isConstant&&e.isNaN()}var s=e("parsenodes"),c=e("core/lib/label"),l=e("core/lib/number-to-latex").default;s.Identifier.prototype.printLatex=t,s.FreeVariable.prototype.printLatex=t,s.Constant.prototype.printLatex=function(){return l(this.asValue())},s.Negative.prototype.printLatex=function(){return"-\\left("+this.args[0].printLatex()+"\\right)"},s.Add.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)+\\left("+this.args[1].printLatex()+"\\right)"},s.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\% \\operatorname{of} "+this.args[1].printLatex()},s.Subtract.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)-\\left("+this.args[1].printLatex()+"\\right)"},s.Multiply.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)*\\left("+this.args[1].printLatex()+"\\right)"},s.Divide.prototype.printLatex=function(){return"\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},s.Exponent.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)^{"+this.args[1].printLatex()+"}"},s.Assignment.prototype.printLatex=function(){return c.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},s.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},s.BaseComparator.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+n(this.operator)+"\\left("+this.args[1].printLatex()+"\\right)"},s.DoubleInequality.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+n(this.args[1])+this.args[2].printLatex()+n(this.args[3])+"\\left("+this.args[4].printLatex()+"\\right)"},s.And.prototype.printLatex=function(){if(!(this.args[0]instanceof s.BaseComparator&&this.args[1]instanceof s.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\left("+this.args[0].args[0].printLatex()+"\\right)"+n(this.args[0].operator)+"\\left("+this.args[0].args[1].printLatex()+"\\right)"+n(this.args[1].operator)+"\\left("+this.args[1].args[1].printLatex()+"\\right)"},s.NativeFunction.prototype.printLatex=i,s.TypedFunction.prototype.printLatex=i,s.ReducerFunction.prototype.printLatex=i,s.ParametrizedReducerFunction.prototype.printLatex=i,s.DoubleReducerFunction.prototype.printLatex=i,s.FunctionCall.prototype.printLatex=i,s.Distribution.prototype.printLatex=i,s.SeededFunctionCall.prototype.printLatex=function(){return c.identifierToLatex(this._symbol)+"\\left("+this.args.slice(1).map(r).join(", ")+"\\right)"},s.DotAccess.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")"},s.DotAccessExponent.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")^{"+this.args[2].printLatex()+"}"},s.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("'")+"\\left("+this.args[0].args[0].printLatex()+"\\right)";default:return c.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("'")+"\\left("+this.args[0].args.map(r).join(", ")+"\\right)"}},s.List.prototype.printLatex=function(){return"\\left["+this.args.map(r).join(", ")+"\\right]"},s.Range.prototype.printLatex=function(){return"\\left["+this.args[0].args.map(r).join(", ")+" ... "+this.args[1].args.map(r).join(", ")+"\\right]"},s.ListAccess.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)\\left["+this.args[1].printLatex()+"\\right]"},s.OrderedPair.prototype.printLatex=function(){return"\\left("+this.args.map(r).join(", ")+"\\right)"},s.Sum.prototype.printLatex=function(){return"\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},s.Product.prototype.printLatex=function(){return"\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},s.Integral.prototype.printLatex=function(){return"\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)d"+this.args[0].printLatex()},s.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\left("+this.args[1].printLatex()+"\\right)^{"+this.args[2].printLatex()+"}"},s.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+"\\left("+this.args[1].printLatex()+"\\right)!"},s.Piecewise.prototype.printLatex=function(){var e=this;if(o(e.args[0]))return e.args[1].printLatex();for(var t=["\\left\\{"];;){if(o(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),a(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof s.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\right\\}"),t.join("")},s.FunctionDefinition.prototype.printLatex=function(){return c.identifierToLatex(this._symbol)+"\\left("+this._argSymbols.map(c.identifierToLatex).join(", ")+"\\right) = "+this._expression.printLatex()},s.Derivative.prototype.printLatex=function(){return"\\frac{d}{d"+c.identifierToLatex(this._symbol)+"}\\left("+this.args[0].printLatex()+"\\right)"},s.Regression.prototype.printLatex=function(){return"\\left("+this._lhs.printLatex()+"\\right)\\sim\\left("+this._rhs.printLatex()+"\\right)"},s.Polygon.prototype.printLatex=function(){return"\\polygon\\left("+this.args.map(r).join(", ")+"\\right)"},s.Histogram.prototype.printLatex=function(){return"\\histogram\\left("+this.args.map(r).join(", ")+"\\right)"},s.Object3D.prototype.printLatex=function(){return"\\"+this._symbol+"\\left("+this.args.map(r).join(", ")+"\\right)"},s.DotPlot.prototype.printLatex=function(){return"\\dotplot\\left("+this.args.map(r).join(", ")+"\\right)"},s.BoxPlot.prototype.printLatex=function(){return"\\boxplot\\left("+this.args.map(r).join(", ")+"\\right)"},s.TTest.prototype.printLatex=function(){return"\\TTest\\left("+this.args.map(r).join(", ")+"\\right)"},s.IndependentTTest.prototype.printLatex=function(){return"\\IndependentTTest\\left("+this.args.map(r).join(", ")+"\\right)"},s.Stats.prototype.printLatex=function(){return"\\Stats\\left("+this.args.map(r).join(", ")+"\\right)"}}),define("core/math/features/statistics",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),n=t.BuiltInFunction,r=e("core/math/maybe-rational").maybeRational,i=t.Constant(r(0,1)),o=t.Constant(r(1,1)),a=t.Constant(r(2,1)),s=t.Constant(r(1,2)),c=t.Constant(-1/0);n.normaldist.prototype.pdf=function(e){return n.normalpdf([e[0],this.args[0],this.args[1]])},n.normaldist.prototype.cdf=function(e){var t,r;return 1===e.length?(t=c,r=e[0]):(t=e[0],r=e[1]),n.normalcdf([t,r,this.args[0],this.args[1]])},n.normaldist.prototype.mean=function(){return this.args[0]},n.normaldist.prototype.median=function(){return this.args[0]},n.normaldist.prototype.stdev=function(){return n.abs([this.args[1]])},n.normaldist.prototype.var=function(){return t.Exponent([this.args[1],a])},n.normaldist.prototype.quantile=function(e){return t.Add([t.Multiply([n.invNorm(e),this.stdev()]),this.mean()])},n.normaldist.prototype.sample=function(e){return n.normalSample([e[0],this.args[0],this.args[1]])},n.tdist.prototype.pdf=function(e){return n.tpdf([e[0],this.args[0]])},n.tdist.prototype.cdf=function(e){var t,r;return 1===e.length?(t=c,r=e[0]):(t=e[0],r=e[1]),n.tcdf([t,r,this.args[0]])},n.tdist.prototype.mean=function(){return i},n.tdist.prototype.median=function(){return i},n.tdist.prototype.quantile=function(e){return n.invT([e[0],this.args[0]])},n.tdist.prototype.sample=function(e){return n.tSample([e[0],this.args[0]])},n.tdist.prototype.stdev=function(){return n.sqrt([this.var()])},n.tdist.prototype.var=function(){var e=this.args[0];return t.Piecewise([t.Comparator[">="]([e,a]),t.Divide([e,t.Subtract([e,a])]),t.Constant(NaN)])},n.poissondist.prototype.pdf=function(e){return n.poissonpdf([e[0],this.args[0]])},n.poissondist.prototype.cdf=function(e){var t,r;return 1===e.length?(t=c,r=e[0]):(t=e[0],r=e[1]),n.poissoncdf([t,r,this.args[0]])},n.poissondist.prototype.mean=function(){return this.args[0]},n.poissondist.prototype.median=function(){return n.invPoisson([s,this.args[0]])},n.poissondist.prototype.stdev=function(){return n.sqrt([this.args[0]])},n.poissondist.prototype.var=function(){return this.args[0]},n.poissondist.prototype.quantile=function(e){return n.invPoisson([e[0],this.args[0]])},n.poissondist.prototype.sample=function(e){return n.poissonSample([e[0],this.args[0]])},n.binomialdist.prototype.pdf=function(e){return n.binompdf([e[0],this.args[0],this.args[1]])},n.binomialdist.prototype.cdf=function(e){var t,r;return 1===e.length?(t=c,r=e[0]):(t=e[0],r=e[1]),n.binomcdf([t,r,this.args[0],this.args[1]])},n.binomialdist.prototype.mean=function(){return t.Multiply([this.args[0],this.args[1]])},n.binomialdist.prototype.median=function(){return n.invBinom([s,this.args[0],this.args[1]])},n.binomialdist.prototype.stdev=function(){return n.sqrt([this.var()])},n.binomialdist.prototype.var=function(){var e=this.args[0],n=this.args[1];return t.Multiply([e,t.Multiply([n,t.Subtract([o,n])])])},n.binomialdist.prototype.quantile=function(e){return n.invBinom([e[0],this.args[0],this.args[1]])},n.binomialdist.prototype.sample=function(e){return n.binomSample([e[0],this.args[0],this.args[1]])},n.uniformdist.prototype.pdf=function(e){return n.uniformpdf([e[0],this.args[0],this.args[1]])},n.uniformdist.prototype.cdf=function(e){var t,r;return 1===e.length?(t=c,r=e[0]):(t=e[0],r=e[1]),n.uniformcdf([t,r,this.args[0],this.args[1]])},n.uniformdist.prototype.mean=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),a])},n.uniformdist.prototype.median=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),a])},n.uniformdist.prototype.stdev=function(){return n.sqrt([this.var()])},n.uniformdist.prototype.var=function(){return t.Divide([t.Exponent([t.Subtract([this.args[1],this.args[0]]),a]),t.Constant(r(12,1))])},n.uniformdist.prototype.quantile=function(e){return n.invUniform([e[0],this.args[0],this.args[1]])},n.uniformdist.prototype.sample=function(e){return n.uniformSample([e[0],this.args[0],this.args[1]])},t.List.prototype.sample=function(e){return t.ListAccess([this,t.Add([n.floor([t.Multiply([n.uniformSample([e[0],i,o]),t.Constant(r(this.length,1))])]),o])])}}),define("core/math/features/getExpressionType",["require","parsenodes","core/types/graphmode","core/math/expression-types","core/math/types"],function(e){"use strict";var t=e("parsenodes"),n=e("core/types/graphmode"),r=e("core/math/expression-types").ExpressionType,i=e("core/math/types");t.Base.prototype.getExpressionType=function(e,t){return e===n.X||e===n.Y?r.X_OR_Y:e===n.XYPOINT||e===n.XYPOINT_MOVABLE?t===i.Point?r.SINGLE_POINT:r.POINT_LIST:e===n.PARAMETRIC?r.PARAMETRIC:e===n.PARAMETRIC_CURVE_3D?r.PARAMETRIC:e===n.POLAR?r.POLAR:e===n.IMPLICIT?r.IMPLICIT:r.X_OR_Y},t.Polygon.prototype.getExpressionType=function(e,t){return r.POLYGON},t.Histogram.prototype.getExpressionType=function(e,t){return r.HISTOGRAM},t.Object3D.prototype.getExpressionType=function(e,t){return r.CUBE},t.DotPlot.prototype.getExpressionType=function(e,t){return r.DOTPLOT},t.BoxPlot.prototype.getExpressionType=function(e,t){return r.BOXPLOT}}),define("core/math/features/findLinearSubset",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),n=e("core/math/maybe-rational").maybeRational,r=t.Constant(n(0,1)),i=t.Constant(n(-1,0));t.Expression.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!this.dependsOn(e[n]));return t},t.FreeVariable.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!0);return t},t.Add.prototype.findLinearSubset=function(e){for(var t=[],n=this.args[0].findLinearSubset(e),r=this.args[1].findLinearSubset(e),i=0;i<e.length;i++)t.push(n[i]&&r[i]);return t},t.Subtract.prototype.findLinearSubset=t.Add.prototype.findLinearSubset,t.Negative.prototype.findLinearSubset=function(e){return this.args[0].findLinearSubset(e)},t.Multiply.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e).slice(),n=this.args[1].findLinearSubset(e).slice(),r=0,i=0,o=0;o<e.length;o++)t[o]=t[o]&&!this.args[1].dependsOn(e[o]),t[o]&&(r+=1),n[o]=n[o]&&!this.args[0].dependsOn(e[o]),n[o]&&(i+=1);return r>=i?t:n},t.Divide.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e),n=[],r=0;r<e.length;r++)n.push(t[r]&&!this.args[1].dependsOn(e[r]));return n},t.List.prototype.findLinearSubset=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(!0);for(var r=0;r<this.args.length;r++){var i=this.args[r].findLinearSubset(e);for(t=0;t<e.length;t++)n[t]=n[t]&&i[t]}return n},t.Broadcast.prototype.findLinearSubset=function(e){for(var n=this._replacedSymbols,o=this._expression,a=this._lists,s={},c=0;c<a.length;c++){for(var l=a[c].findLinearSubset(e),u=r,d=0;d<e.length;d++)l[d]?a[c].dependsOn(e[d])&&(u=t.Add([u,t.FreeVariable(e[d])])):u=t.Add([u,t.Exponent([t.FreeVariable(e[d]),i])]);s[n[c]]=u}return o.substitute(s).findLinearSubset(e)},t.Piecewise.prototype.findLinearSubset=function(e){for(var t=this.args[0],n=this.args[1].findLinearSubset(e),r=this.args[2].findLinearSubset(e),i=[],o=0;o<e.length;o++)i.push(!t.dependsOn(e[o])&&n[o]&&r[o]);return i}}),define("core/math/features/deriveRegressionRestrictions",["require","parsenodes","core/math/types","core/math/domaintypes"],function(e){"use strict";function t(e){for(var t=1/0,n=-1/0,r=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),n=Math.max(n,e[i]);return{min:t,max:n,length:r}}function n(e,t,n){if("known"!==n.type)return e;var r=i.And([i.Comparator["<="]([i.Constant(n.bounds[0]),i.FreeVariable(t)]),i.Comparator["<="]([i.FreeVariable(t),i.Constant(n.bounds[1])])]);return i.Multiply([e,i.Piecewise([r,i.Constant(1),i.Constant(NaN)])])}function r(e){for(var t,n=this.args[0],r=this.getDependencies(),o={},a=0;a<r.length;a++)if(e.listStatistics.hasOwnProperty(r[a])){if(void 0!==t)return{};t=r[a]}if(void 0===t)return{};if(1!==n.polynomialOrder(t))return{};var s=n.getPolynomialCoefficients(t),c=s[1],l=s[1].getDependencies();if(1!==l.length)return{};var u=l[0];if(1!==c.polynomialOrder(u))return{};var d=e.listStatistics[t],p=(d.max-d.min)/Math.min(d.length-1,31),h=Math.PI/p;return isFinite(h)?h<=0?{}:(o[u]=i.Piecewise([i.And([i.Comparator["<="]([i.Constant(0),c]),i.Comparator["<"]([c,i.Constant(h)])]),i.Constant(1),i.Constant(NaN)]).boundDomain(u),o):{}}var i=e("parsenodes"),o=e("core/math/types"),a=e("core/math/domaintypes");i.Base.prototype.deriveRegressionRestrictions=function(){return this},i.Broadcast.prototype.deriveRegressionRestrictions=function(){for(var e=this._replacedSymbols,r=this._expression,a=this._lists,s={},c=0;c<e.length;c++)0===a[c].getDependencies().length&&a[c].valueType===o.ListOfNumber&&(s[e[c]]=t(a[c].asValue()));var l,u=r._deriveRegressionRestrictions({listStatistics:s});for(l in u)if("known"!==u[l].type)return this;var d=r;for(l in u)d=n(d,l,u[l]);return i.Broadcast(e,[d].concat(a))},i.Base.prototype._deriveRegressionRestrictions=function(e){return{}},i.Expression.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=0;n<this.args.length;n++){var r=this.args[n]._deriveRegressionRestrictions(e);for(var i in r)t[i]=t[i]?a.intersectDomains(t[i],r[i]):r[i]}return t},i.BuiltInFunction.sin.prototype._deriveRegressionRestrictions=r,i.BuiltInFunction.cos.prototype._deriveRegressionRestrictions=r,i.Exponent.prototype._deriveRegressionRestrictions=function(e){for(var t=this.args[0],n=this.args[1],r=t.getDependencies(),o=n.getDependencies(),a={},s=!1,c=0;c<o.length;c++)if(e.listStatistics.hasOwnProperty(o[c])){s=!0;break}if(!s)return{};if(1!==r.length)return{};var l=r[0];return e.listStatistics.hasOwnProperty(l)?{}:1!==t.polynomialOrder(l)?{}:(a[l]=i.Piecewise([i.Comparator[">="]([t,i.Constant(0)]),i.Constant(1),i.Constant(NaN)]).boundDomain(l),a)},i.Piecewise.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=this.getDependencies(),r=0;r<n.length;r++)t[n[r]]=a.unknownDomain();return t}}),define("core/math/features/reparameterizeRegression",["require","parsenodes","core/math/types"],function(e){"use strict";function t(e){for(var t=1/0,n=-1/0,r=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),n=Math.max(n,e[i]);return{min:t,max:n,length:r}}function n(e,t){for(var n,r=e.getDependencies(),i=0;i<r.length;i++)if(t.hasOwnProperty(r[i])){if(void 0!==n)return;n=r[i]}return n}function r(e,t){for(var n=e.getDependencies(),r=0;r<n.length;r++)if(t[n[r]])return!0;return!1}function i(e,t){if(1===e.polynomialOrder(t)){var n=e.getPolynomialCoefficients(t),r=n[1],i=n[0],o=r.getDependencies();if(1===o.length){var a=o[0];if(1===r.polynomialOrder(a)){var s=i.getDependencies().filter(function(e){return e!==a});if(1===s.length){var c=s[0];if(1===i.polynomialOrder(c))return[i,r]}}}}}function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(void 0!==n)for(var r=n.getDependencies(),i=0;i<r.length;i++){var o=r[i];-1===e.indexOf(o)&&e.push(o)}}return e}function a(e,t,n){for(var r=0;r<e.length;r++)if(r!==n)for(var i=e[r],o=0;o<t.length;o++)for(var a=t[o].model.replacedDependencies,s=0;s<a.length;s++)if(i.dependsOn(a[s]))return!0;return!1}function s(e){var t,n,r;for(r=0;r<this.args.length;r++){var i=this.args[r]._reparameterizeRegression(e);if(i){if(void 0!==n)return;t=i,n=r}}if(void 0!==n&&!a(this.args,t,n)){var o=[];for(r=0;r<t.length;r++){var s=t[r];o.push({model:s.model,expression:this.copyWithArgs([].concat(this.args.slice(0,n),s.expression,this.args.slice(n+1)))})}return o}}function c(e,t){var r=e.model;if("exp"!==r.type)return e;if(r.shiftScale)return e;var a=e.expression,s="Negative"===a.type;if(s&&(a=a.args[0]),"BuiltInFunction['exp']"!==a.type)return e;var c=a.args[0],l=n(c,t.listStatistics);if(void 0===l)return e;var u=i(c,l);if(!u)return e;var p=u[0],h=u[1],f=[c.tmpVar(),c.tmpVar()],m=t.listStatistics[l].max-t.listStatistics[l].min,g=.5*(t.listStatistics[l].max+t.listStatistics[l].min),y=d.BuiltInFunction.exp([d.Add([d.Multiply([d.FreeVariable(f[0]),d.Divide([d.Subtract([d.DummyIndex(l),d.Constant(g)]),d.Constant(m)])]),d.FreeVariable(f[1])])]);return s&&(y=d.Negative([y])),{model:{type:"exp",shiftScale:{mulNode:h,addNode:p,newParameterSymbols:f,stats:{range:m,midrange:g}},base:r.base,intercept:r.intercept,replacedDependencies:o(h,p,r.base&&r.base.node,r.intercept&&r.intercept.node)},expression:y}}function l(e,t,r){var a=e._symbol,s=e.args[0],c=n(s,r.listStatistics);if(void 0!==c){var l=i(s,c);if(l){var d=l[0],p=l[1],h=t.getDependencies();if(1===h.length){var f=h[0];if(!s.dependsOn(f)&&1===t.polynomialOrder(f)){var m=[e.tmpVar(),e.tmpVar(),e.tmpVar()];return[{model:{type:"trig",amplitudeNode:t,frequencyNode:p,phaseNode:d,newParameterSymbols:m,replacedDependencies:o(t,p,d)},expression:u(a,c,m)}]}}}}}function u(e,t,n){var r="cos"===e?n[0]:n[1],i="cos"===e?n[1]:n[0],o=n[2],a=d.Multiply([d.FreeVariable(o),d.DummyIndex(t)]);return("sin"===e?d.Add:d.Subtract)([d.Multiply([d.FreeVariable(r),d.BuiltInFunction.cos([a])]),d.Multiply([d.FreeVariable(i),d.BuiltInFunction.sin([a])])])}var d=e("parsenodes"),p=e("core/math/types");d.Base.prototype.reparameterizeRegression=function(){},d.Broadcast.prototype.reparameterizeRegression=function(){for(var e=this._replacedSymbols,n=this._lists,r={},i=0;i<e.length;i++)0===n[i].getDependencies().length&&n[i].valueType===p.ListOfNumber&&(r[e[i]]=t(n[i].asValue()));return this._reparameterizeRegression({listStatistics:r})},d.Base.prototype._reparameterizeRegression=function(e){},d.Expression.prototype._reparameterizeRegression=s,d.Exponent.prototype._reparameterizeRegression=function(e){var t=this.args[0],n=this.args[1],i=n.getDependencies(),o=t.getDependencies();if(r(n,e.listStatistics)){if(0===o.length){if(t.asValue()<0)return;return[{model:{type:"exp",replacedDependencies:[]},expression:d.BuiltInFunction.exp([d.Multiply([d.BuiltInFunction.ln([t]),n])])}]}if(1===o.length&&!e.listStatistics.hasOwnProperty(o[0])&&-1===i.indexOf(o[0])&&1===t.polynomialOrder(o[0])){var a=this.tmpVar();return[c({model:{type:"exp",base:{node:t,newParameterSymbols:[a]},replacedDependencies:t.getDependencies()},expression:d.BuiltInFunction.exp([d.Multiply([d.FreeVariable(a),n])])},e)]}}},d.BuiltInFunction.exp.prototype._reparameterizeRegression=function(e){if(void 0!==n(this.args[0],e.listStatistics))return[c({model:{type:"exp",replacedDependencies:[]},expression:this},e)]},d.Multiply.prototype._reparameterizeRegression=function(e){var t,n;if("BuiltInFunction['sin']"===this.args[0].type||"BuiltInFunction['cos']"===this.args[0].type)return l(this.args[0],this.args[1],e);if("BuiltInFunction['sin']"===this.args[1].type||"BuiltInFunction['cos']"===this.args[1].type)return l(this.args[1],this.args[0],e);var r;for(r=0;r<this.args.length;r++){var i=this.args[r]._reparameterizeRegression(e);if(i){if(void 0!==n)return;t=i,n=r}}if(void 0!==n&&!a(this.args,t,n)){var u=1===n?0:1,p=this.args[u];if(1!==t.length)return s.call(this,e);var h=t[0],f=h.model;if("exp"!==f.type||"BuiltInFunction['exp']"!==h.expression.type||h.model.shiftScale)return s.call(this,e);var m=p.getDependencies();if(1!==m.length||1!==p.polynomialOrder(m[0])||e.listStatistics.hasOwnProperty(m[0]))return s.call(this,e);var g=this.tmpVar();return[{model:{type:"exp",replacedDependencies:[]},expression:this},c({model:{type:"exp",base:f.base,intercept:{node:p,newParameterSymbols:[g],sign:1},replacedDependencies:o(f.base&&f.base.node,p)},expression:d.BuiltInFunction.exp([d.Add([h.expression.args[0],d.FreeVariable(g)])])},e),c({model:{type:"exp",base:f.base,intercept:{node:p,newParameterSymbols:[g],sign:-1},replacedDependencies:o(f.base&&f.base.node,p)},expression:d.Negative([d.BuiltInFunction.exp([d.Add([h.expression.args[0],d.FreeVariable(g)])])])},e)]}}}),define("parser",["require","core/math/baseparser","core/math/features/getConcreteTree","core/math/features/getValueType","core/math/features/typeCheck","core/math/features/repr","core/math/features/scalarEvalExpression","core/math/features/constantcollapsedcopy","core/math/features/polynomialorder","core/math/features/polynomialcoefficients","core/math/features/extractconditions","core/math/features/piecewiseDependsOn","core/math/features/bounddomain","core/math/features/derivative","core/math/features/substitute","core/math/features/isImplicit","core/math/features/solve","core/math/features/analyze","core/math/features/analyzeFourFunction","core/math/features/analyzeScientific","core/math/features/analyzeSingleExpressionScientific","core/math/features/getgraphmode","core/math/features/getgraphinfo","core/math/features/getMoveStrategy","core/math/features/getDefaultDragMode","core/math/features/tableinfo","core/math/features/tableerror","core/math/features/graph","core/math/features/elementAt","core/math/features/printLatex","core/math/features/statistics","core/math/features/getExpressionType","core/math/features/findLinearSubset","core/math/features/deriveRegressionRestrictions","core/math/features/reparameterizeRegression"],function(e){"use strict";var t=e("core/math/baseparser");return e("core/math/features/getConcreteTree"),e("core/math/features/getValueType"),e("core/math/features/typeCheck"),e("core/math/features/repr"),e("core/math/features/scalarEvalExpression"),e("core/math/features/constantcollapsedcopy"),e("core/math/features/polynomialorder"),e("core/math/features/polynomialcoefficients"),e("core/math/features/extractconditions"),e("core/math/features/piecewiseDependsOn"),e("core/math/features/bounddomain"),e("core/math/features/derivative"),e("core/math/features/substitute"),e("core/math/features/isImplicit"),e("core/math/features/solve"),e("core/math/features/analyze"),e("core/math/features/analyzeFourFunction"),e("core/math/features/analyzeScientific"),e("core/math/features/analyzeSingleExpressionScientific"),e("core/math/features/getgraphmode"),e("core/math/features/getgraphinfo"),e("core/math/features/getMoveStrategy"),e("core/math/features/getDefaultDragMode"),e("core/math/features/tableinfo"),e("core/math/features/tableerror"),e("core/math/features/graph"),e("core/math/features/elementAt"),e("core/math/features/printLatex"),e("core/math/features/statistics"),e("core/math/features/getExpressionType"),e("core/math/features/findLinearSubset"),e("core/math/features/deriveRegressionRestrictions"),e("core/math/features/reparameterizeRegression"),t}),define("core/math/evaluate-single-expression",["require","exports","parser","core/math/builtinframe","core/math/parsenode/constant","core/math/policy"],function(e,t,n,r,i,o){"use strict";function a(e,t){if(/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/.test(e))return parseFloat(e);var a=Object.create(r);return a.trigAngleMultiplier=i(t?Math.PI/180:1),+n.parse(e).tryGetConcreteTree(o.defaultPolicy,a).asValue()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}),define("lib/rounding",["require","exports","core/math/distance"],function(e,t,n){"use strict";function r(e,t){if(!isFinite(e))return e;if(!isFinite(t))return t;var r=n.mean(e,t);if(e>0!=t>0)return 0;if(0===e||0===t)return 0;var i=e>0?1:-1,o=Math.abs(e).toExponential().split("e"),a=Math.abs(t).toExponential().split("e"),s=o[0],c=a[0],l=o[1],u=a[1];if(u!==l)return i*Math.pow(10,Math.max(parseFloat(l),parseFloat(u)));if(s[0]!==c[0])return parseFloat(r.toPrecision(1));for(var d=1,p=2;p<Math.min(s.length,c.length)&&(d++,s[p]===c[p]);p++);return parseFloat(r.toPrecision(d))}Object.defineProperty(t,"__esModule",{value:!0}),t.shortestDecimalBetween=void 0,t.shortestDecimalBetween=r}),define("lib/copy-properties",["require","exports","core/lib/deepCopy"],function(e,t,n){"use strict";function r(e){var t=e.from,r=e.to,i=e.props;for(var o in i)i[o]&&t.hasOwnProperty(o)&&(r[o]=n.default(t[o]))}Object.defineProperty(t,"__esModule",{value:!0}),t.copyProperties=void 0,t.copyProperties=r}),define("core/vendor/d3-color",["require"],function(e){function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}function i(){return this.rgb().formatHex()}function o(){return y(this).formatHsl()}function a(){return this.rgb().formatRgb()}function s(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=S.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?c(t):3===n?new p(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?l(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?l(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=M.exec(e))?new p(t[1],t[2],t[3],1):(t=k.exec(e))?new p(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=C.exec(e))?l(t[1],t[2],t[3],t[4]):(t=I.exec(e))?l(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=T.exec(e))?g(t[1],t[2]/100,t[3]/100,1):(t=L.exec(e))?g(t[1],t[2]/100,t[3]/100,t[4]):D.hasOwnProperty(e)?c(D[e]):"transparent"===e?new p(NaN,NaN,NaN,0):null}function c(e){return new p(e>>16&255,e>>8&255,255&e,1)}function l(e,t,n,r){return r<=0&&(e=t=n=NaN),new p(e,t,n,r)}function u(e){return e instanceof r||(e=s(e)),e?(e=e.rgb(),new p(e.r,e.g,e.b,e.opacity)):new p}function d(e,t,n,r){return 1===arguments.length?u(e):new p(e,t,n,null==r?1:r)}function p(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function h(){return"#"+m(this.r)+m(this.g)+m(this.b)}function f(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function m(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function g(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new b(e,t,n,r)}function y(e){if(e instanceof b)return new b(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=s(e)),!e)return new b;if(e instanceof b)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),c=NaN,l=a-o,u=(a+o)/2;return l?(c=t===a?(n-i)/l+6*(n<i):n===a?(i-t)/l+2:(t-n)/l+4,l/=u<.5?a+o:2-a-o,c*=60):l=u>0&&u<1?0:c,new b(c,l,u,e.opacity)}function v(e,t,n,r){return 1===arguments.length?y(e):new b(e,t,n,null==r?1:r)}function b(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function x(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}var E="\\s*([+-]?\\d+)\\s*",w="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",S=/^#([0-9a-f]{3,8})$/,M=new RegExp("^rgb\\("+[E,E,E]+"\\)$"),k=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),C=new RegExp("^rgba\\("+[E,E,E,w]+"\\)$"),I=new RegExp("^rgba\\("+[_,_,_,w]+"\\)$"),T=new RegExp("^hsl\\("+[w,_,_]+"\\)$"),L=new RegExp("^hsla\\("+[w,_,_,w]+"\\)$"),D={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};return t(r,s,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:i,formatHex:i,formatHsl:o,formatRgb:a,toString:a}),t(p,d,n(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new p(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new p(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h,formatHex:h,formatRgb:f,toString:f})),t(b,v,n(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new b(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new b(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new p(x(e>=240?e-240:e+120,i,r),x(e,i,r),x(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}})),{Color:r,darker:.7,brighter:1/.7,color:s,rgbConvert:u,rgb:d,Rgb:p,hslConvert:y,hsl:v}}),define("core/lib/validate-color",["require","exports","core/vendor/d3-color"],function(e,t,n){"use strict";function r(e){return null!==i(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n.color;t.default=r}),define("graphing-calc/models/expression",["require","exports","parser","core/math/builtinframe","tslib","core/lib/dragmode","core/types/slider-loop-modes","core/types/styles","core/types/label-sizes","core/types/label-orientations","core/math/evaluate-single-expression","lib/rounding","core/lib/deepCopy","lib/copy-properties","./abstract-item","./list","underscore","core/math/expression-types","core/lib/label","core/lib/number-to-latex","core/math/sliders","core/lib/number-to-latex","core/lib/validate-color","core/graphing-calc/json/expression","core/math/distribution-spec","core/math/policyGraphing"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x,E,w,_,S,M){"use strict";function k(e){var t=e.formula;return!!t&&(e.controller.isDecimalToFractionEnabled()&&t.hasOwnProperty("constant_value")&&v.canDisplayAsFraction(t.constant_value))}function C(e){return!!e.isGraphable}function I(e){var t=e.formula;if(!t)return!1;var n=t.is_evaluable&&t.zero_values&&t.zero_values.length>0&&"boolean"!=typeof t.zero_values[0].val,r=k(e)&&Ve(e);return n||r}function T(e){var t=e.formula;return I(e)?t.zero_values&&t.zero_values.length?t.zero_values[0].val:t.constant_value:k(e)?e.formula.constant_value:NaN}function L(e){var t=e.formula.ttest_results;if(t&&isFinite(t.lessThan))return{lessThan:t.lessThan,greaterThan:t.greaterThan,notEqual:t.notEqual}}function D(e){var t=e.formula.stats_results;if(t&&isFinite(t.min))return{min:t.min,q1:t.q1,median:t.median,q3:t.q3,max:t.max}}function P(e,t){if(!isFinite(t))return e;var n=/=(.*?)([-\.0-9]+)/,r=e.match(n);if(!r)return e;if(parseFloat(r[2])===t)return e;var i=E.numberToDecimalString(t);return e.replace(n,"=$1"+i)}function A(e){return""===((e.latex||"")+(e.label||"")).split(" ").join("")}function O(e){var t=e.dragMode===o.DragMode.AUTO?e.formula.default_drag_mode:e.dragMode;e.reconciledDragMode=o.reconcileDragMode(t,e.formula.move_strategy),e.interactiveLabel&&e.reconciledDragMode!==o.DragMode.NONE&&dt(e,!1)}function F(e,t,n){if(!e.sliderExists)return NaN;var r=Y(e),i=X(e),o=$(e);if(n&&void 0!==n.overwriteStep&&(o=n.overwriteStep),t=x.constrainSliderValueLikeEvaluator({target:t,hardMin:e.slider.hardMin?r:void 0,hardMax:e.slider.hardMax?i:void 0,step:o}),!n||!n.ignoreSoftLimits){if(!e.slider.hardMin&&t<r)return r;if(!e.slider.hardMax&&t>i)return i}return t}function N(e,t){if(!e.sliderExists)return NaN;var n=Q(e),r=Y(e),i=X(e),o=$(e),a=o||(i-r)/20,s=0;switch(t){case"min":return F(e,r);case"max":return F(e,i);case"up":s=1;break;case"down":s=-1;break;case"bigup":s=5;break;case"bigdown":s=-5;break;default:return t}for(var c=n,l=0;l<20;l++){var u=l/3*a,d=n;if(s>0)(n=F(e,c+u,{overwriteStep:a}))>d&&(s-=1);else{if(!(s<0))break;(n=F(e,c-u,{overwriteStep:a}))<d&&(s+=1)}}return n}function q(e,t){if(e.sliderExists){e.slider.isPlaying&&Ae(e,!1);var n=F(e,t,{ignoreSoftLimits:!0});e.latex=P(e.latex,n)}}function R(e,t){if(e.sliderExists){e.slider.isPlaying&&Ae(e,!1),Oe(e);var n=N(e,t);e.latex=P(e.latex,n)}}function B(e,t){if(e.sliderExists){e.slider.isPlaying&&Ae(e,!1);var n=F(e,t);e.latex=P(e.latex,n)}}function j(e,t){if(e.sliderExists){var n=e.sliderLastTickTime;if(e.sliderLastTickTime=t,void 0!==n){var r=t-n,i=Y(e),o=X(e),s=$(e),c=e.slider.animationPeriod,l=e.slider.loopMode;if(isNaN(e.sliderAnimationTargetValue)){var u=Q(e);isNaN(u)||(e.sliderAnimationTargetValue=u)}var p=s?s/2:0;if(l===a.SliderLoopMode.LOOP_FORWARD_REVERSE)e.sliderAnimationTargetValue>=o?Pe(e,{playDirection:-1}):e.sliderAnimationTargetValue<=i&&Pe(e,{playDirection:1});else if(l===a.SliderLoopMode.LOOP_FORWARD)Pe(e,{playDirection:1}),e.sliderAnimationTargetValue>=o+p&&(e.sliderAnimationTargetValue=i-p);else if(l===a.SliderLoopMode.PLAY_ONCE)Pe(e,{playDirection:1});else{if(l!==a.SliderLoopMode.PLAY_INDEFINITELY)throw new Error("Unexpected slider loop mode: "+l);Pe(e,{playDirection:1})}isFinite(r)||(r=0);var h,f;l===a.SliderLoopMode.PLAY_INDEFINITELY?(h=r/(c/4),s&&(h*=s),e.sliderAnimationTargetValue+=h,f=e.sliderAnimationTargetValue,s||(f=d.shortestDecimalBetween(f-.1*h,f+.1*h)),f=F(e,f,{ignoreSoftLimits:!0}),e.latex=P(e.latex,f)):(r=Math.min(r,c/10),h=(o-i)*r/c,e.sliderAnimationTargetValue+=h*e.slider.playDirection,e.sliderAnimationTargetValue=Math.max(i-p,Math.min(o+p,e.sliderAnimationTargetValue)),f=e.sliderAnimationTargetValue,s||(f=d.shortestDecimalBetween(f-.1*h,f+.1*h)),f=F(e,f),e.latex=P(e.latex,f))}}}function V(e,t){e.formula=t,e.loading=!1,e.error=t.error?t.error:"",e.isGraphable=t.is_graphable,e.dependent=t.assignment,e.isTableable=t.is_tableable,e.unresolved=!1,t.is_single_identifier?e.missingVariables=[]:e.missingVariables=t.variables||[],e.__workerSliderLatex=t.raw_slider_latex,t.is_slider?(e.__workerSliderValue=t.constant_value,e.__workerSliderMin=t.slider_min_number,e.__workerSliderMax=t.slider_max_number,e.__workerSliderStep=t.slider_step_number,e.__workerSliderMinValid=t.slider_min_valid,e.__workerSliderMaxValid=t.slider_max_valid,e.__workerSliderStepValid=t.slider_step_valid,e.sliderExists||(e.sliderAnimationTargetValue=Q(e),e.sliderDragging=!1,e.sliderExists=!0)):e.sliderExists=!1,e.__workerDomainMin=t.domain_min_number,e.__workerDomainMax=t.domain_max_number,e.__workerDomainMinValid=t.domain_min_valid,e.__workerDomainMaxValid=t.domain_max_valid,e.__workerCDFMinValid=t.cdf_min_valid,e.__workerCDFMaxValid=t.cdf_max_valid,e.__workerFillOpacityValid=t.fill_opacity_valid,e.__workerLineOpacityValid=t.line_opacity_valid,e.__workerLineWidthValid=t.line_width_valid,e.__workerCDFEvaluation=t.cdf_evaluation;var n={};t.is_regression&&(n=t.regression.parameters,e.residualVariable=t.regression.residualVariable),g.isEqual(e.regressionParameters,n)||(e.regressionParameters=n)}function U(e){var t=m.getParentFolderModel(e);t&&t.hidden?e.shouldGraph=!1:e.formula.expression_type&&gt(e)?e.shouldGraph=!1:e.shouldGraph=!e.hidden}function G(e){if(!e.sliderExists||e.latex!==e.__workerSliderLatex)return void(e.cachedDisplayLatex={storedLatex:e.latex,valueLatex:e.latex});var t=e.latex;if(e.cachedDisplayLatex.storedLatex!==t)return void(e.cachedDisplayLatex={storedLatex:e.latex,valueLatex:e.latex});if(isFinite(e.__workerSliderValue)){var n=e.controller.getFocusLocation();n&&"expression"===n.type&&n.id===e.id||(e.cachedDisplayLatex.valueLatex=P(e.latex,e.__workerSliderValue))}}function z(e){return e.cachedDisplayLatex.valueLatex}function H(e){var t=v.value(e);return t.superscript&&t.mantissa?t.mantissa+"^{"+t.superscript+"}":t.string}function W(e){return e.slider.hardMin?e.slider.min:H(Y(e))}function K(e){return e.slider.hardMax?e.slider.max:H(X(e))}function Y(e){if(e.slider.hardMin)return isFinite(e.__workerSliderMin)?e.__workerSliderMin:NaN;var t=e.controller.isDegreeMode(),n=u.default(e.slider.min,t),r=Q(e),i=$(e),o=e.slider.hardMax?e.__workerSliderMax:void 0,a=-10;if(n<a&&(a=n),r<a&&(a=r),o<a&&(a=o),i){var s=x.constrainSliderValueLikeEvaluator({target:a,hardMin:void 0,hardMax:o,step:i});a=s<=a?s:s-i}return a}function X(e){if(e.slider.hardMax)return isFinite(e.__workerSliderMax)?e.__workerSliderMax:NaN;var t=e.controller.isDegreeMode(),n=u.default(e.slider.max,t),r=Q(e),i=$(e),o=e.slider.hardMin?e.__workerSliderMin:void 0;return x.computeSoftMax({storedMax:n,sliderValue:r,step:i,hardMin:o})}function $(e){return e.__workerSliderStep}function Q(e){return e.latex!==e.__workerSliderLatex?Fe(e.latex):isFinite(e.__workerSliderValue)?e.__workerSliderValue:NaN}function Z(e){return e.slider.loopMode===a.SliderLoopMode.PLAY_ONCE&&Q(e)>=X(e)}function J(e,t){return!!e.formula.viz_valids&&!!e.formula.viz_valids[t]}function ee(e,t){return e.vizProps[t]}function te(e,t,n){var r;e.vizProps=i.__assign(i.__assign({},e.vizProps),(r={},r[t]=n,r))}function ne(e,t){for(var n=e.clickableInfo.rules,r=0,i=n;r<i.length;r++){if(i[r].id===t)return!0}return!1}function re(e,t,n){for(var r=e.clickableInfo.rules,i=0,o=r;i<o.length;i++){var a=o[i];if(a.id===t)return a[n]}return""}function ie(e,t){var n=e.formula.clickableinfo_data;if(n)return n[t]}function oe(e,t){if(e.formula){var n=ie(e,t);if(n)return n.error}}function ae(e,t){var n=ie(e,t);if(n)return n.latex}function se(e,t){var n=ie(e,t);if(n)return n.identifier}function ce(e,t,n){var r;e.clickableInfo=i.__assign(i.__assign({},e.clickableInfo),(r={},r[t]=n,r))}function le(e,t,n,r){for(var o=p.default(e.clickableInfo.rules),a=0,s=o;a<s.length;a++){var c=s[a];c.id===t&&(c[n]=r)}e.clickableInfo=i.__assign(i.__assign({},e.clickableInfo),{rules:o})}function ue(e,t){e.clickableInfo=p.default(e.clickableInfo),e.clickableInfo.rules.push({id:t,assignment:"",expression:""})}function de(e,t){e.clickableInfo=p.default(e.clickableInfo),e.clickableInfo.rules=g.filter(e.clickableInfo.rules,function(e){return e.id!==t}),0===e.clickableInfo.rules.length&&(e.clickableInfo.enabled=!1,e.clickableInfo.rules=_.CLICKABLEINFO_DEFAULTS.rules)}function pe(e){return e.clickableInfo.enabled&&nn(e)}function he(e){return!!e.__workerNeedsDotplotXMode}function fe(e){return!!e.__workerSliderMinValid}function me(e){return!!e.__workerSliderMaxValid}function ge(e){return!!e.__workerSliderStepValid}function ye(e){return isFinite(e.__workerSampledDomainMin)?e.__workerSampledDomainMin:isFinite(e.__workerDomainMin)?e.__workerDomainMin:NaN}function ve(e){return isFinite(e.__workerSampledDomainMax)?e.__workerSampledDomainMax:isFinite(e.__workerDomainMax)?e.__workerDomainMax:NaN}function be(e){return!!e.__workerDomainMinValid}function xe(e){return!!e.__workerDomainMaxValid}function Ee(e,t){var n=e.cachedViewState;if(t.stripDefaults&&""===e.parametricDomain.min&&""===e.parametricDomain.max||(n=i.__assign(i.__assign({},n),{domain:{min:""===e.parametricDomain.min?"0":e.parametricDomain.min,max:""===e.parametricDomain.max?"1":e.parametricDomain.max}})),t.stripDefaults)return _.stripDefaults(n);if(void 0===n.points||void 0===n.lines||void 0===n.fill){var r=p.default(n);return void 0===r.points&&delete r.points,void 0===r.lines&&delete r.lines,void 0===r.fill&&delete r.fill,r}return n}function we(e){var t=e.cachedViewState;t&&t.folderId===e.folderId&&t.color===e.color&&t.latex===e.latex&&t.parametricDomain===e.parametricDomain&&t.fillOpacity===e.fillOpacity&&t.lineOpacity===e.lineOpacity&&t.lineWidth===e.lineWidth&&t.polarDomain===e.polarDomain&&t.showLabel===e.showLabel&&t.cdf===e.cdf&&t.vizProps===e.vizProps&&t.clickableInfo===e.clickableInfo&&t.label===e.label&&t.hidden===e.hidden&&t.secret===e.secret&&t.fill===e.fill&&t.points===e.points&&t.lines===e.lines&&t.lineStyle===e.lineStyle&&t.pointStyle===e.pointStyle&&t.dragMode===e.dragMode&&t.labelSize===e.labelSize&&t.labelOrientation===e.labelOrientation&&t.verticalLabel===e.verticalLabel&&t.suppressTextOutline===e.suppressTextOutline&&t.interactiveLabel===e.interactiveLabel&&t.editableLabelMode===e.editableLabelMode&&t.residualVariable===e.residualVariable&&t.regressionParameters===e.regressionParameters&&t.isLogModeRegression===e.isLogModeRegression&&t.displayEvaluationAsFraction===e.displayEvaluationAsFraction&&t.slider===e.slider||(e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,color:e.color,latex:e.latex,parametricDomain:e.parametricDomain,fillOpacity:e.fillOpacity,lineOpacity:e.lineOpacity,lineWidth:e.lineWidth,polarDomain:e.polarDomain,showLabel:e.showLabel,cdf:e.cdf,vizProps:e.vizProps,clickableInfo:e.clickableInfo,label:e.label,hidden:e.hidden,secret:e.secret,points:e.points,lines:e.lines,lineStyle:e.lineStyle,pointStyle:e.pointStyle,fill:e.fill,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,displayEvaluationAsFraction:e.displayEvaluationAsFraction,slider:e.slider})}function _e(e,t){t&&Oe(e),e.draggingOnGraphpaper=t}function Se(e){var t=e.memoizedUndoRedoStateParams,n=e.cachedViewState,r=e.preTransientState;if(!t||t.viewState!==n||t.preTransientState!==r){e.memoizedUndoRedoStateParams={viewState:n,preTransientState:r};var o;o=r?i.__assign(i.__assign({},n),{latex:r.latex,slider:i.__assign(i.__assign({},n.slider),r.slider)}):i.__assign({},n),delete o.regressionParameters,delete o.residualVariable,e.cachedUndoRedoState=o}}function Me(e,t){var n=p.default(_.inflateDefaults(e)),r=n.color;return r&&w.default(r)||(r=t.getNextColor()),i.__assign(i.__assign(i.__assign({},n),f.DEFAULTS(t)),{loading:!0,labelDropdownOpen:!1,formula:{error:void 0},missingVariables:[],error:void 0,unresolved:!1,color:r,pointStyle:n.pointStyle,lineStyle:n.lineStyle,displayEvaluationAsFraction:n.displayEvaluationAsFraction,shouldGraph:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,sliderLastTickTime:void 0,draggingOnGraphpaper:!1,cachedUndoRedoState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedDisplayLatex:{storedLatex:"",valueLatex:""}})}function ke(e){var t=m.getParentFolderModel(e),n=!(!t||!t.hidden),r=e.cachedViewState,i=e.index,o=e.showLabel&&!n,a=e.shouldGraph,s=e.slider.hardMin?e.slider.min:"",c=e.slider.hardMax?e.slider.max:"",l=e.slider.step,u=e.memoizedParsableStateParams;if(!u||u.viewState!==r||u.index!==i||u.showLabel!==o||u.shouldGraph!==a||u.polarDomainMin!==e.polarDomain.min||u.polarDomainMax!==e.polarDomain.max||u.fillOpacity!==e.fillOpacity||u.lineOpacity!==e.lineOpacity||u.lineWidth!==e.lineWidth||u.parametricDomainMin!==e.parametricDomain.min||u.parametricDomainMax!==e.parametricDomain.max||u.sliderMin!==s||u.sliderMax!==c||u.sliderStep!==l){e.memoizedParsableStateParams={viewState:r,index:i,polarDomainMin:e.polarDomain.min,polarDomainMax:e.polarDomain.max,fillOpacity:e.fillOpacity,lineOpacity:e.lineOpacity,lineWidth:e.lineWidth,parametricDomainMin:e.parametricDomain.min,parametricDomainMax:e.parametricDomain.max,sliderMin:s,sliderMax:c,sliderStep:l,showLabel:o,shouldGraph:a};var d=_.computeParsableState(r);d.index=i,d.showLabel=o,d.shouldGraph=a,e.cachedParsableState=d}}function Ce(e,t){t(e.latex),St(e)&&(t(e.parametricDomain.min),t(e.parametricDomain.max)),Mt(e)&&(t(e.polarDomain.min),t(e.polarDomain.max)),e.sliderExists&&(t(e.slider.min),t(e.slider.max),t(e.slider.step)),e.residualVariable&&t(e.residualVariable)}function Ie(e){var t=e.sliderExists&&(e.slider.isPlaying||e.sliderDragging);e.draggingOnGraphpaper||t?e.preTransientState||(e.preTransientState={latex:e.latex,slider:{min:e.slider.min,max:e.slider.max,playDirection:e.slider.playDirection}}):delete e.preTransientState,e.sliderExists&&e.slider.isPlaying||(e.sliderLastTickTime=void 0),f.updateIsHiddenFromUI(e),U(e),O(e),we(e),Se(e),ke(e),G(e)}function Te(e,t){h.copyProperties({from:t,to:e,props:{id:!1,type:!1,color:!0,folderId:!0,latex:!0,polarDomain:!0,parametricDomain:!0,showLabel:!0,label:!0,cdf:!0,vizProps:!0,clickableInfo:!0,hidden:!0,secret:!0,points:!0,lines:!0,lineStyle:!0,pointStyle:!0,fill:!0,fillOpacity:!0,lineOpacity:!0,lineWidth:!0,dragMode:!0,labelSize:!0,labelOrientation:!0,verticalLabel:!0,suppressTextOutline:!0,interactiveLabel:!0,editableLabelMode:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,displayEvaluationAsFraction:!0,slider:!0}})}function Le(e,t){t?Pe(e,{hardMin:!0,min:t}):Pe(e,{hardMin:!1,min:"-10"})}function De(e,t){t?Pe(e,{hardMax:!0,max:t}):Pe(e,{hardMax:!1,max:"10"})}function Pe(e,t){e.slider=i.__assign(i.__assign({},e.slider),t)}function Ae(e,t){if(e&&e.sliderExists){e.slider.isPlaying!==t&&(Pe(e,{isPlaying:t}),t&&(Oe(e),e.sliderAnimationTargetValue=Q(e)))}}function Oe(e){if(!e.slider.hardMin){var t=b.default(Y(e));t!==e.slider.min&&Pe(e,{min:t})}if(!e.slider.hardMax){var n=b.default(X(e));n!==e.slider.max&&Pe(e,{max:n})}}function Fe(e){var t=n.parse(e);if("Assignment"!==t.type)return NaN;if("Constant"!==t._expression.type)return NaN;if(!M.PolicyGraphing.validLHS(t._symbol))return NaN;if(r[t._symbol])return NaN;var i=t._expression.asValue();return"number"==typeof i?i:NaN}function Ne(e,t){var n=Fe(t);if(isFinite(n)){var r=x.determineWhichLimitsAreCompatibleWithValue({target:n,step:$(e),hardMin:e.slider.hardMin?Y(e):void 0,hardMax:e.slider.hardMax?X(e):void 0});r.min||Pe(e,{hardMin:!1,min:"-10"}),r.max||Pe(e,{hardMax:!1,max:"10"}),r.step||Pe(e,{step:""})}e.latex=t}function qe(e,t){Pe(e,{loopMode:t,playDirection:1}),t===a.SliderLoopMode.PLAY_INDEFINITELY&&Pe(e,{hardMin:!1,hardMax:!1,min:"",max:""}),e.sliderAnimationTargetValue=Y(e)}function Re(e,t){t&&Oe(e),e.sliderDragging=t}function Be(e,t){Pe(e,{step:t})}function je(e,t){Pe(e,{animationPeriod:t})}function Ve(e){return e.displayEvaluationAsFraction}function Ue(e,t){e.displayEvaluationAsFraction=t}function Ge(e,t){e.label=t}function ze(e,t){e.showLabel=t}function He(e,t){e.polarDomain=i.__assign(i.__assign({},e.polarDomain),{min:t})}function We(e,t){e.parametricDomain=i.__assign(i.__assign({},e.parametricDomain),{min:t})}function Ke(e,t){e.polarDomain=i.__assign(i.__assign({},e.polarDomain),{max:t})}function Ye(e,t){e.parametricDomain=i.__assign(i.__assign({},e.parametricDomain),{max:t})}function Xe(e,t){e.isLogModeRegression=t}function $e(e,t){w.default(t)&&(e.color=t)}function Qe(e,t){e.fill=t}function Ze(e,t){e.fillOpacity!==t&&(e.fillOpacity=t)}function Je(e,t){e.lineOpacity!==t&&(e.lineOpacity=t)}function et(e,t){e.lineWidth!==t&&(e.lineWidth=t)}function tt(e,t){e.labelDropdownOpen=t}function nt(e,t){e.dragMode!==t&&(e.dragMode=t,t!==o.DragMode.NONE&&(e.pointStyle=s.PointStyle.POINT))}function rt(e,t){e.points=t}function it(e,t){e.pointStyle!==t&&(e.pointStyle=t,t!==s.PointStyle.POINT&&(e.dragMode=o.DragMode.NONE))}function ot(e,t){e.lines=t}function at(e,t){e.lineStyle!==t&&(e.lineStyle=t)}function st(e,t){e.labelSize=t}function ct(e,t){e.labelOrientation=t}function lt(e,t){e.verticalLabel=t}function ut(e,t){e.suppressTextOutline=t}function dt(e,t){e.interactiveLabel=t}function pt(e,t){e.editableLabelMode=t}function ht(e){return e.editableLabelMode}function ft(e){var t=e.editableLabelMode;return t===_.EditableLabelMode.Math||t===_.EditableLabelMode.Text}function mt(e,t){e.hidden=t,!t&&gt(e)&&(e.lines=e.points=e.fill=void 0)}function gt(e){var t=e.points,n=e.lines,r=e.fill,i=y.getReconciledExpressionProps(e.formula.expression_type,{points:t,lines:n,fill:r});return!i.points&&!i.lines&&!i.fill}function yt(e){return St(e)||Mt(e)}function vt(e){return e.polarDomain.min}function bt(e){return e.polarDomain.max}function xt(e){return e.parametricDomain.min}function Et(e){return e.parametricDomain.max}function wt(e){return!!e.sliderExists}function _t(e){return e.formula.expression_type===y.ExpressionType.POLYGON}function St(e){return e.formula.expression_type===y.ExpressionType.PARAMETRIC}function Mt(e){return e.formula.expression_type===y.ExpressionType.POLAR}function kt(e){return e.formula.expression_type===y.ExpressionType.SINGLE_POINT}function Ct(e){return e.formula.expression_type===y.ExpressionType.POINT_LIST}function It(e){return e.formula.expression_type===y.ExpressionType.POINT_LIST||e.formula.expression_type===y.ExpressionType.SINGLE_POINT}function Tt(e){var t=Rt(e);return!(!t||"visualization"!==t.type||"boxplot"!==t.symbol)}function Lt(e){var t=Rt(e);return!(!t||"visualization"!==t.type||"dotplot"!==t.symbol)}function Dt(e){var t=Rt(e);return!(!t||"visualization"!==t.type||"histogram"!==t.symbol)}function Pt(e){return Tt(e)||Lt(e)||Dt(e)}function At(e){return e.formula.expression_type===y.ExpressionType.TTEST}function Ot(e){return e.formula.expression_type===y.ExpressionType.STATS}function Ft(e){return!!Rt(e)}function Nt(e){var t=Rt(e);return!(!t||"distribution"!==t.type)}function qt(e){var t=e.formula;return!!t&&!!t.is_discrete_distribution}function Rt(e){if(e.controller.areDistributionsEnabled()&&e.latex)return e.cachedParseToplevelFunction&&e.cachedParseToplevelFunction.latex===e.latex||(e.cachedParseToplevelFunction={latex:e.latex,spec:S.parseToplevelFunction(e.latex)}),e.cachedParseToplevelFunction.spec}function Bt(e){return jt(e)&&Nt(e)}function jt(e){return!!e.formula.expression_type}function Vt(e){return!!e.formula.is_concrete_list}function Ut(e){return!!Bt(e)&&(!Vt(e)&&e.cdf.show)}function Gt(e){return e.cdf.min}function zt(e){return e.cdf.max}function Ht(e){var t=e.formula.cdf_min_default;return t===-1/0?"-\\infty":isFinite(t)?t+"":"-\\infty"}function Wt(e){var t=e.formula.cdf_max_default;return t===1/0?"\\infty":isFinite(t)?t+"":"\\infty"}function Kt(e,t){e.cdf=i.__assign(i.__assign({},e.cdf),{show:t})}function Yt(e,t){e.cdf=i.__assign(i.__assign({},e.cdf),{min:t})}function Xt(e,t){e.cdf=i.__assign(i.__assign({},e.cdf),{max:t})}function $t(e){return!1!==e.__workerCDFMinValid}function Qt(e){return!1!==e.__workerCDFMaxValid}function Zt(e){return!1!==e.__workerFillOpacityValid}function Jt(e){return!1!==e.__workerLineOpacityValid}function en(e){return!1!==e.__workerLineWidthValid}function tn(e){return isFinite(e.__workerCDFEvaluation)?e.__workerCDFEvaluation:0}function nn(e){return!!y.isClickableExpressionType(e.formula.expression_type)&&(!e.reconciledDragMode||e.reconciledDragMode===o.DragMode.NONE)}function rn(e){e.showLabel=_.DEFAULTS.showLabel,e.label=_.DEFAULTS.label,e.hidden=_.DEFAULTS.hidden,e.dragMode=_.DEFAULTS.dragMode,e.fill=_.DEFAULTS.fill,e.fillOpacity=_.DEFAULTS.fillOpacity,e.lineOpacity=_.DEFAULTS.lineOpacity,e.lineWidth=_.DEFAULTS.lineWidth,e.points=_.DEFAULTS.points,e.pointStyle=_.DEFAULTS.pointStyle,e.lines=_.DEFAULTS.lines,e.lineStyle=_.DEFAULTS.lineStyle,e.polarDomain=_.DEFAULTS.polarDomain,e.parametricDomain=_.DEFAULTS.parametricDomain,e.slider=_.SLIDER_DEFAULTS,e.latex="",e.labelSize=c.LabelSize.MEDIUM,e.labelOrientation=l.LabelOrientation.DEFAULT,e.displayEvaluationAsFraction=_.DEFAULTS.displayEvaluationAsFraction,e.verticalLabel=!1,e.suppressTextOutline=!1,e.interactiveLabel=!1,e.editableLabelMode=_.DEFAULTS.editableLabelMode,e.cdf=_.DEFAULTS.cdf,e.vizProps=_.DEFAULTS.vizProps}Object.defineProperty(t,"__esModule",{value:!0}),t.blankOutExpressionAfterClearingLatex=t.isClickableAllowed=t.getCDFEvaluation=t.isLineWidthValid=t.isLineOpacityValid=t.isFillOpacityValid=t.isCDFMaxValid=t.isCDFMinValid=t.setCDFMax=t.setCDFMin=t.setShowCDF=t.getCDFMaxPlaceholder=t.getCDFMinPlaceholder=t.getCDFMax=t.getCDFMin=t.shouldShowCDFFooter=t.isListValuedDistribution=t.isPrimaryLatexValid=t.shouldShowCDFCheckbox=t.parseToplevelFunction=t.isDiscreteDistribution=t.isToplevelDistribution=t.isToplevelFunction=t.isStats=t.isTTest=t.isVisualization=t.isHistogram=t.isDotPlot=t.isBoxPlot=t.isPointOrPointList=t.isPointList=t.isSinglePoint=t.isPolar=t.isParametric=t.isPolygon=t.hasSlider=t.getParametricDomainMax=t.getParametricDomainMin=t.getPolarDomainMax=t.getPolarDomainMin=t.hasDomain=t.areAllVisibilityPropsOff=t.setHidden=t.hasEditableLabel=t.getEditableLabelMode=t.setEditableLabelMode=t.setInteractiveLabel=t.setSuppressTextOutline=t.setVerticalLabel=t.setLabelOrientation=t.setLabelSize=t.setLineStyle=t.setLines=t.setPointStyle=t.setPoints=t.setDragMode=t.setLabelDropdownOpen=t.setLineWidth=t.setLineOpacity=t.setFillOpacity=t.setFill=t.setColor=t.setLogMode=t.setParametricDomainMax=t.setPolarDomainMax=t.setParametricDomainMin=t.setPolarDomainMin=t.setShowLabel=t.setLabel=t.setEvaluationAsFraction=t.shouldEvaluationDisplayAsFraction=t.setSliderAnimationPeriod=t.setSliderStep=t.setSliderDragging=t.setSliderLoopMode=t.setLatex=t.extractSliderValueFromLatex=t.commitSliderSoftLimits=t.setSliderIsPlaying=t.setSliderMax=t.setSliderMin=t.restoreState=t.onControllerUpdate=t.eachLatex=t.updateCachedParsableState=t.initModel=t.updateCachedUndoRedoState=t.setIsDraggingOnGrapher=t.updateCachedViewState=t.getState=t.isDomainMaxValid=t.isDomainMinValid=t.getDomainMax=t.getDomainMin=t.isSliderStepValid=t.isSliderMaxValid=t.isSliderMinValid=t.needsDotplotXMode=t.isClickableObject=t.removeClickableInfoRule=t.addClickableInfoRule=t.setClickableInfoRuleProp=t.setClickableInfoProp=t.getClickableInfoUpdateIdentifier=t.getClickableInfoUpdateLatex=t.getClickableInfoRulePackedError=t.getEvaluatedClickableRule=t.getClickableInfoPropLatex=t.isClickableRuleDefined=t.setVizProp=t.getVizPropLatex=t.isVizPropValid=t.isSliderAtEndOfPlayOnce=t.getSliderValue=t.getSliderStep=t.getSliderMax=t.getSliderMin=t.getDisplaySliderMax=t.getDisplaySliderMin=t.getDisplayLatex=t.updateDisplayLatex=t.computeShouldGraph=t.onFormulaUpdate=t.tickSliderStep=t.adjustSliderByDraggingThumb=t.adjustSliderByKeyboard=t.adjustSliderByMovablePoint=t.updateReconciledDragMode=t.isEmpty=t.computeNewSliderLatex=t.getStatsResults=t.getTTestResults=t.getEvaluationValue=t.shouldShowEvaluation=t.isGraphable=t.isRationalizableConstant=t.EvaluationLabelOptions=void 0,t.EvaluationLabelOptions={smallCutoff:1e-6,bigCutoff:1e9,digits:12},t.isRationalizableConstant=k,t.isGraphable=C,t.shouldShowEvaluation=I,t.getEvaluationValue=T,t.getTTestResults=L,t.getStatsResults=D,t.computeNewSliderLatex=P,t.isEmpty=A,t.updateReconciledDragMode=O,t.adjustSliderByMovablePoint=q,t.adjustSliderByKeyboard=R,t.adjustSliderByDraggingThumb=B,t.tickSliderStep=j,t.onFormulaUpdate=V,t.computeShouldGraph=U,t.updateDisplayLatex=G,t.getDisplayLatex=z,t.getDisplaySliderMin=W,t.getDisplaySliderMax=K,t.getSliderMin=Y,t.getSliderMax=X,t.getSliderStep=$,t.getSliderValue=Q,t.isSliderAtEndOfPlayOnce=Z,t.isVizPropValid=J,t.getVizPropLatex=ee,t.setVizProp=te,t.isClickableRuleDefined=ne,t.getClickableInfoPropLatex=re,t.getEvaluatedClickableRule=ie,t.getClickableInfoRulePackedError=oe,t.getClickableInfoUpdateLatex=ae,t.getClickableInfoUpdateIdentifier=se,t.setClickableInfoProp=ce,t.setClickableInfoRuleProp=le,t.addClickableInfoRule=ue,t.removeClickableInfoRule=de,t.isClickableObject=pe,t.needsDotplotXMode=he,t.isSliderMinValid=fe,t.isSliderMaxValid=me,t.isSliderStepValid=ge,t.getDomainMin=ye,t.getDomainMax=ve,t.isDomainMinValid=be,t.isDomainMaxValid=xe,t.getState=Ee,t.updateCachedViewState=we,t.setIsDraggingOnGrapher=_e,t.updateCachedUndoRedoState=Se,t.initModel=Me,t.updateCachedParsableState=ke,t.eachLatex=Ce,t.onControllerUpdate=Ie,t.restoreState=Te,t.setSliderMin=Le,t.setSliderMax=De,t.setSliderIsPlaying=Ae,t.commitSliderSoftLimits=Oe,t.extractSliderValueFromLatex=Fe,t.setLatex=Ne,t.setSliderLoopMode=qe,t.setSliderDragging=Re,t.setSliderStep=Be,t.setSliderAnimationPeriod=je,t.shouldEvaluationDisplayAsFraction=Ve,t.setEvaluationAsFraction=Ue,t.setLabel=Ge,t.setShowLabel=ze,t.setPolarDomainMin=He,t.setParametricDomainMin=We,t.setPolarDomainMax=Ke,t.setParametricDomainMax=Ye,t.setLogMode=Xe,t.setColor=$e,t.setFill=Qe,t.setFillOpacity=Ze,t.setLineOpacity=Je,t.setLineWidth=et,t.setLabelDropdownOpen=tt,t.setDragMode=nt,t.setPoints=rt,t.setPointStyle=it,t.setLines=ot,t.setLineStyle=at,t.setLabelSize=st,t.setLabelOrientation=ct,t.setVerticalLabel=lt,t.setSuppressTextOutline=ut,t.setInteractiveLabel=dt,t.setEditableLabelMode=pt,t.getEditableLabelMode=ht,t.hasEditableLabel=ft,t.setHidden=mt,t.areAllVisibilityPropsOff=gt,t.hasDomain=yt,t.getPolarDomainMin=vt,t.getPolarDomainMax=bt,t.getParametricDomainMin=xt,t.getParametricDomainMax=Et,t.hasSlider=wt,t.isPolygon=_t,t.isParametric=St,t.isPolar=Mt,t.isSinglePoint=kt,t.isPointList=Ct,t.isPointOrPointList=It,t.isBoxPlot=Tt,t.isDotPlot=Lt,t.isHistogram=Dt,t.isVisualization=Pt,t.isTTest=At,t.isStats=Ot,t.isToplevelFunction=Ft,t.isToplevelDistribution=Nt,t.isDiscreteDistribution=qt,t.parseToplevelFunction=Rt,t.shouldShowCDFCheckbox=Bt,t.isPrimaryLatexValid=jt,t.isListValuedDistribution=Vt,t.shouldShowCDFFooter=Ut,t.getCDFMin=Gt,t.getCDFMax=zt,t.getCDFMinPlaceholder=Ht,t.getCDFMaxPlaceholder=Wt,t.setShowCDF=Kt,t.setCDFMin=Yt,t.setCDFMax=Xt,t.isCDFMinValid=$t,t.isCDFMaxValid=Qt,t.isFillOpacityValid=Zt,t.isLineOpacityValid=Jt,t.isLineWidthValid=en,t.getCDFEvaluation=tn,t.isClickableAllowed=nn,t.blankOutExpressionAfterClearingLatex=rn}),define("core/graphing-calc/json/folder",["require","exports","tslib","core/lib/default-spec"],function(e,t,n,r){"use strict";function i(e){return n.__assign(n.__assign({},t.DEFAULTS),e)}function o(e){return r.stripDefaults(t.DEFAULTS,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=t.inflateDefaults=t.DEFAULTS=void 0,t.DEFAULTS={collapsed:!1,hidden:!1,secret:!1,title:""},t.inflateDefaults=i,t.stripDefaults=o}),define("graphing-calc/models/folder",["require","exports","tslib","core/lib/deepCopy","lib/copy-properties","./abstract-item","./list","core/graphing-calc/json/folder"],function(e,t,n,r,i,o,a,s){"use strict";function c(e,t){var n=e.cachedViewState;return t.stripDefaults?s.stripDefaults(n):n}function l(e){e.cachedViewState={type:e.type,id:e.id,title:e.title,hidden:e.hidden,collapsed:e.collapsed,secret:e.secret}}function u(e){e.cachedUndoRedoState=e.cachedViewState}function d(e,t){var i=r.default(s.inflateDefaults(e));return n.__assign(n.__assign(n.__assign({},i),o.DEFAULTS(t)),{cachedUndoRedoState:{},cachedViewState:{}})}function p(e){f(e),o.updateIsHiddenFromUI(e),l(e),u(e)}function h(e,t){i.copyProperties({from:t,to:e,props:{id:!1,type:!1,hidden:!0,secret:!0,collapsed:!0,title:!0}})}function f(e){
var t=e.controller,n=t.getSelectedItem();e.collapsed?n&&"folder"!==n.type&&n.folderId===e.id?(e.selectedHiddenChild=n,a.setSelected(t.getListModel(),e)):n!==e&&(e.selectedHiddenChild=void 0):(n===e&&e.selectedHiddenChild&&a.setSelected(t.getListModel(),e.selectedHiddenChild),e.selectedHiddenChild=void 0)}function m(e,t){e.collapsed=t}function g(e,t){e.title=t}function y(e,t){e.hidden=t}Object.defineProperty(t,"__esModule",{value:!0}),t.setHidden=t.setTitle=t.setCollapsed=t.updateSelectedHiddenChild=t.restoreState=t.onControllerUpdate=t.initModel=t.updateCachedUndoRedoState=t.updateCachedViewState=t.getState=void 0,t.getState=c,t.updateCachedViewState=l,t.updateCachedUndoRedoState=u,t.initModel=d,t.onControllerUpdate=p,t.restoreState=h,t.updateSelectedHiddenChild=f,t.setCollapsed=m,t.setTitle=g,t.setHidden=y}),define("core/graphing-calc/json/text",["require","exports","tslib","core/lib/default-spec"],function(e,t,n,r){"use strict";function i(e){return n.__assign(n.__assign({},t.DEFAULTS),e)}function o(e){return r.stripDefaults(t.DEFAULTS,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=t.inflateDefaults=t.DEFAULTS=void 0,t.DEFAULTS={folderId:"",text:"",secret:!1},t.inflateDefaults=i,t.stripDefaults=o}),define("graphing-calc/models/text",["require","exports","tslib","./abstract-item","core/lib/deepCopy","lib/copy-properties","core/graphing-calc/json/text"],function(e,t,n,r,i,o,a){"use strict";function s(e,t){e.text=t}function c(e,t){var o=i.default(a.inflateDefaults(e));return n.__assign(n.__assign(n.__assign({},o),r.DEFAULTS(t)),{cachedUndoRedoState:{},cachedViewState:{}})}function l(e){r.updateIsHiddenFromUI(e),p(e),h(e)}function u(e,t){o.copyProperties({from:t,to:e,props:{id:!1,type:!1,folderId:!0,text:!0,secret:!0}})}function d(e,t){var n=e.cachedViewState;return t.stripDefaults?a.stripDefaults(n):n}function p(e){e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,text:e.text,secret:e.secret}}function h(e){e.cachedUndoRedoState=e.cachedViewState}Object.defineProperty(t,"__esModule",{value:!0}),t.updateCachedUndoRedoState=t.updateCachedViewState=t.getState=t.restoreState=t.onControllerUpdate=t.initModel=t.setText=void 0,t.setText=s,t.initModel=c,t.onControllerUpdate=l,t.restoreState=u,t.getState=d,t.updateCachedViewState=p,t.updateCachedUndoRedoState=h}),define("graphing-calc/models/helper-expression",["require","exports","core/math/evaluationstate","tslib","underscore"],function(e,t,n,r,i){"use strict";function o(e){return r.__assign(r.__assign({},e),{formula:n.default(),cachedParsableState:{type:"statement",id:e.id,latex:e.latex,shouldGraph:!1}})}function a(e,t,n){t.formula=n;var r,o=t.proxy,a={numericValue:o.numericValue,listValue:o.listValue};n.zero_values&&1===n.zero_values.length&&(r=n.zero_values[0].val),o.numericValue=i.isNumber(r)?r:NaN,o.listValue=i.isArray(r)?r.slice(0):void 0,i.isEqual(o.numericValue,a.numericValue)||e.runAfterDispatch(function(){o.notifyPropertyChange("numericValue")}),i.isEqual(o.listValue,a.listValue)||e.runAfterDispatch(function(){o.notifyPropertyChange("listValue")})}Object.defineProperty(t,"__esModule",{value:!0}),t.onFormulaUpdate=t.init=void 0,t.init=o,t.onFormulaUpdate=a}),define("core/graphing-calc/json/image",["require","exports","tslib","core/lib/default-spec"],function(e,t,n,r){"use strict";function i(e){return n.__assign(n.__assign(n.__assign({},t.DEFAULTS),e),{clickableInfo:n.__assign(n.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})}function o(e){var n=r.stripDefaults(t.DEFAULTS,e),i=r.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===i?delete n.clickableInfo:n.clickableInfo=i,n}function a(e){return{type:"image",id:e.id,center:e.center,angle:e.angle,width:e.width,height:e.height,opacity:e.opacity,clickableInfo:e.clickableInfo,guid:"",index:0,color:"",shouldGraph:e.hidden,showPoints:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.stripDefaults=t.inflateDefaults=t.DEFAULTS=t.CLICKABLEINFO_DEFAULTS=void 0,t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}],hoveredImage:"",depressedImage:""},t.DEFAULTS={folderId:"",hidden:!1,secret:!1,center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:"1",foreground:!1,name:"",clickableInfo:t.CLICKABLEINFO_DEFAULTS},t.inflateDefaults=i,t.stripDefaults=o,t.computeParsableState=a}),define("graphing-calc/models/image",["require","exports","tslib","core/lib/color-helpers","./abstract-item","core/lib/deepCopy","lib/copy-properties","./list","jquery","core/graphing-calc/json/image","underscore","../../core/graphing-calc/json/expression"],function(e,t,n,r,i,o,a,s,c,l,u,d){"use strict";function p(e,t){e.hidden=t}function h(e,t){e.secret=t}function f(e,t,n){e[t]=n}function m(e,t){return e[t]}function g(e,t){e.name=t}function y(e,t){e.opacity=t}function v(e,t){e.foreground=t}function b(e,t){e.image_url=t}function x(e,t){t(e.opacity),t(e.center),t(e.height),t(e.width),t(e.angle)}function E(e){var t=l.computeParsableState(e);t.color=e.color,t.index=e.index,t.guid=e.guid,t.shouldGraph=e.shouldGraph,t.showPoints=e.showPoints,e.cachedParsableState=t}function w(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={center:e.center,angle:e.angle,width:e.width,height:e.height,opacity:e.opacity}):delete e.preTransientState,i.updateIsHiddenFromUI(e);var t=s.getParentFolderModel(e);e.shouldGraph=(!t||!t.hidden)&&!e.hidden,e.showPoints=e.shouldGraph&&s.isItemSelected(e)&&"loaded"===e.loadStatus,k(e),I(e),E(e)}function _(e,t){e.formula=t,e.missingVariables=e.formula.variables||[],e.computed_x=e.formula.dimensions.x,e.computed_y=e.formula.dimensions.y,e.computed_radian_angle=e.formula.dimensions.radianAngle,e.computed_height=e.formula.dimensions.height,e.computed_width=e.formula.dimensions.width,e.computed_opacity=e.formula.dimensions.opacity;var n={center:e.controller.t("Invalid center. Try, for example, (0,0)."),angle:e.controller.t("Invalid angle. Try using any number."),width:e.controller.t("Invalid width. Try using any number."),height:e.controller.t("Invalid height. Try using any number."),opacity:e.controller.t("Invalid opacity. Try using any number.")},r=[];for(var i in e.formula.errorMap)e.formula.errorMap[i]&&r.push(n[i]);e.error=r[0],e.inputErrors={center:!!e.formula.errorMap.center,width:!!e.formula.errorMap.width,height:!!e.formula.errorMap.height,angle:!!e.formula.errorMap.angle,opacity:!!e.formula.errorMap.opacity}}function S(e,t){return!!e.inputErrors&&e.inputErrors[t]}function M(e,t){var n=e.cachedViewState;return t.stripDefaults?l.stripDefaults(n):n}function k(e){var t=e.cachedViewState.clickableInfo,n=!0,r=!0;if(t&&(t.depressedImage===e.clickableInfo.depressedImage&&(r=!1),t.hoveredImage===e.clickableInfo.hoveredImage&&(n=!1)),n&&(e.hoveredImageObj&&(c(e.hoveredImageObj).off("load"),delete e.hoveredImageObj),e.clickableInfo.hoveredImage)){e.hoveredImageObj=new Image;var i=function(){var t=e.controller.getGrapher();t&&t.redrawAllLayers()},o=function(){};T(e.hoveredImageObj,e.clickableInfo.hoveredImage,i,o)}if(r&&(e.depressedImageObj&&(c(e.depressedImageObj).off("load"),delete e.depressedImageObj),e.clickableInfo.depressedImage)){e.depressedImageObj=new Image;var i=function(){var t=e.controller.getGrapher();t&&t.redrawAllLayers()},o=function(){};T(e.depressedImageObj,e.clickableInfo.depressedImage,i,o)}if(e.cachedViewState.image_url!==e.image_url){c(e.imageObj).off("load"),e.imageObj=new Image;var a=function(){e.controller.dispatch({type:"image-load-success",id:e.id})},s=function(){e.controller.dispatch({type:"image-load-error",id:e.id})};T(e.imageObj,e.image_url,a,s)}e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,image_url:e.image_url,name:e.name,hidden:e.hidden,height:e.height,width:e.width,center:e.center,angle:e.angle,opacity:e.opacity,foreground:e.foreground,secret:e.secret,clickableInfo:e.clickableInfo}}function C(e,t){e.draggingOnGraphpaper=t}function I(e){var t=e.cachedViewState;e.preTransientState&&(t=n.__assign(n.__assign({},t),e.preTransientState)),e.cachedUndoRedoState=t}function T(e,t,n,r){c(e).on("load",n).on("error",r),/^data:/.test(t)||(e.crossOrigin="anonymous"),e.src=t}function L(e,t){var a=o.default(l.inflateDefaults(e));return n.__assign(n.__assign(n.__assign({},a),i.DEFAULTS(t)),{color:r.colors.BLUE,loadStatus:"loading",failures:0,imageObj:new Image,hoveredImageObj:void 0,depressedImageObj:void 0,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,missingVariables:[],computed_x:void 0,computed_y:void 0,computed_width:void 0,computed_height:void 0,computed_radian_angle:void 0,computed_opacity:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoState:{}})}function D(e,t){a.copyProperties({from:t,to:e,props:{id:!1,type:!1,image_url:!0,name:!0,folderId:!0,hidden:!0,secret:!0,center:!0,opacity:!0,angle:!0,width:!0,height:!0,foreground:!0,clickableInfo:!0}})}function P(e){for(var t=e.controller,n=e.files,r=e.id,i={errors:[],tokens:[]},o=0;o<n.length;o++){var a=n[o];a.type.match("image/*")?i.tokens.push(A({controller:t,file:a,id:r})):i.errors.push(t.t('The file "__file__" is not an image',{file:a.name}))}return i}function A(e){var t=e.controller,n=e.file,r=e.id,i=""+K++;return t.getGraphSettings().config.imageUploadCallback(n,function(e,o){setTimeout(function(){if(e)t.dispatch({type:"image-upload-error",token:i,error:e});else{var a=new Image;T(a,o,function(){var e=a.width,s=a.height,c=Math.max(e,s)/Math.min(e,s);e<s?(s=10,e=Math.round(10*s/c)/10):(e=10,s=Math.round(10*e/c)/10),t.dispatch({type:"image-upload-success",token:i,url:o,width:e+"",height:s+"",name:n.name,id:r})},function(){t.dispatch({type:"image-upload-error",token:i,error:""})})}})}),i}function O(e,t){e.loadStatus=t,"loaded"===t&&(e.failures=0),"failed"===t&&(e.failures+=1)}function F(e){e.imageObj.src=e.imageObj.src,O(e,"loading")}function N(e,t){for(var n=e.clickableInfo.rules,r=0,i=n;r<i.length;r++){if(i[r].id===t)return!0}return!1}function q(e,t,n){for(var r=e.clickableInfo.rules,i=0,o=r;i<o.length;i++){var a=o[i];if(a.id===t)return a[n]}return""}function R(e,t){var n=e.formula.clickableinfo_data;if(n)return n[t]}function B(e,t){if(e.formula){var n=R(e,t);if(n)return n.latex}}function j(e,t){if(e.formula){var n=R(e,t);if(n)return n.identifier}}function V(e,t){if(e.formula){var n=R(e,t);if(n)return n.error}}function U(e,t,r){var i;e.clickableInfo=n.__assign(n.__assign({},e.clickableInfo),(i={},i[t]=r,i))}function G(e,t,r,i){for(var a=o.default(e.clickableInfo.rules),s=0,c=a;s<c.length;s++){var l=c[s];l.id===t&&(l[r]=i)}e.clickableInfo=n.__assign(n.__assign({},e.clickableInfo),{rules:a})}function z(e,t){e.clickableInfo=o.default(e.clickableInfo),e.clickableInfo.rules.push({id:t,assignment:"",expression:""})}function H(e,t){e.clickableInfo=o.default(e.clickableInfo),e.clickableInfo.rules=u.filter(e.clickableInfo.rules,function(e){return e.id!==t}),0===e.clickableInfo.rules.length&&(e.clickableInfo.rules=d.CLICKABLEINFO_DEFAULTS.rules,e.clickableInfo.enabled=!1)}function W(e){return e.clickableInfo.enabled}Object.defineProperty(t,"__esModule",{value:!0}),t.isClickableObject=t.removeClickableInfoRule=t.addClickableInfoRule=t.setClickableInfoRuleProp=t.setClickableInfoProp=t.getClickableInfoRulePackedError=t.getClickableInfoUpdateIdentifier=t.getClickableInfoUpdateLatex=t.getEvaluatedClickableRule=t.getClickableInfoPropLatex=t.isClickableRuleDefined=t.retryLoading=t.setLoadStatus=t.uploadImageAndGenerateToken=t.uploadImages=t.restoreState=t.initModel=t.updateCachedUndoRedoState=t.setIsDraggingOnGrapher=t.updateCachedViewState=t.getState=t.hasInputError=t.onFormulaUpdate=t.onControllerUpdate=t.updateCachedParsableState=t.eachLatex=t.setImageURL=t.setForeground=t.setOpacity=t.setName=t.getMQAttribute=t.setMQAttribute=t.setSecret=t.setHidden=void 0,t.setHidden=p,t.setSecret=h,t.setMQAttribute=f,t.getMQAttribute=m,t.setName=g,t.setOpacity=y,t.setForeground=v,t.setImageURL=b,t.eachLatex=x,t.updateCachedParsableState=E,t.onControllerUpdate=w,t.onFormulaUpdate=_,t.hasInputError=S,t.getState=M,t.updateCachedViewState=k,t.setIsDraggingOnGrapher=C,t.updateCachedUndoRedoState=I,t.initModel=L,t.restoreState=D,t.uploadImages=P;var K=0;t.uploadImageAndGenerateToken=A,t.setLoadStatus=O,t.retryLoading=F,t.isClickableRuleDefined=N,t.getClickableInfoPropLatex=q,t.getEvaluatedClickableRule=R,t.getClickableInfoUpdateLatex=B,t.getClickableInfoUpdateIdentifier=j,t.getClickableInfoRulePackedError=V,t.setClickableInfoProp=U,t.setClickableInfoRuleProp=G,t.addClickableInfoRule=z,t.removeClickableInfoRule=H,t.isClickableObject=W}),define("lib/latex-search-helpers",["require","exports"],function(e,t){"use strict";function n(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function r(e){return e.replace(/\\\\right\\(\\*[})\]|])/g,".*\\\\right\\$1").replace(/ ?\\([}\]])/g,".*\\$1")}function i(e){var t=r(n(e));return new RegExp(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getFuzzyLatexRegExp=t.addFuzzyMatches=t.escapeForRegex=void 0,t.escapeForRegex=n,t.addFuzzyMatches=r,t.getFuzzyLatexRegExp=i}),define("graphing-calc/models/list",["require","exports","lib/color-distance","tslib","./expression","./folder","./table","./text","./helper-expression","./image","core/types/graphmode","core/lib/color-helpers","underscore","core/lib/deepCopy","../../lib/latex-search-helpers"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f){"use strict";function m(e){return{controller:e,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},__anyDependsOnRandomSeed:!1,drawOrder:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:1}}function g(e){for(var t=0;t<e.__itemModelArray.length;t++){var n=e.__itemModelArray[t];if("image"===n.type&&"loading"===n.loadStatus)return!0}return!1}function y(e){var t=p.filter(p.values(e.controller.getColors()),function(e){return e!=d.colors.ORANGE}),n=t[e.colorIdx];return e.colorIdx=(e.colorIdx+1)%t.length,n}function v(e,t){return e.__itemModelArray[t]}function b(e){for(var t=0;t<e.__itemModelArray.length;t++){var n=e.__itemModelArray[t];if(k(n))return n}}function x(e){for(var t=e.__itemModelArray.length-1;t>=0;t--){var n=e.__itemModelArray[t];if(k(n))return n}}function E(e,t){var n;do{if(-1===--t)return;n=v(e,t)}while(n&&!k(n));return n}function w(e,t){var n,r=U(e);do{if(++t===r)return;n=v(e,t)}while(n&&!k(n));return n}function _(e){if("folder"!==e.type&&e.folderId){var t=e.controller.getListModel(),n=F(t,e.folderId);if(n&&"folder"===n.type)return n}}function S(e,t){var n=F(e,t);if(!n||"folder"!==n.type)return 0;for(var r=0,i=e.__itemModelArray.length,o=n.index+1;o<i;o++){var a=e.__itemModelArray[o];if("folder"===a.type||a.folderId!==t)break;r+=1}return r}function M(e){if(!e)return!1;if(e.secret)return!0;var t=_(e);return!(!t||!t.secret)}function k(e){return!C(e)}function C(e){if(!e)return!0;if(e.filteredBySearch)return!0;if(e.controller.isItemBeingDragged(e.id))return!1;if(!e.controller.canAdministerSecretFolders()&&M(e))return!0;var t=_(e);return!(!t||!t.collapsed||e.controller.getExpressionSearchStr())}function I(e){return e.__itemModelArray}function T(e){return p.values(e.__helperIdToModel)}function L(e,t){for(var n=0;n<e.__itemModelArray.length;n++){var r=e.__itemModelArray[n];switch(r.type){case"expression":i.eachLatex(r,t);break;case"table":a.eachLatex(r,t);break;case"image":case"folder":case"text":break;default:return r}}}function D(e,t){return!!e.replace(/([_^])([a-z0-9])/gi,"$1{$2}").match(t)}function P(e,t){for(var n=f.getFuzzyLatexRegExp(t),r=0;r<e.__itemModelArray.length;r++)if(t){var o=e.__itemModelArray[r];switch(o.filteredBySearch=!0,o.type){case"expression":i.eachLatex(o,function(e){D(e,n)&&(o.filteredBySearch=!1)}),o.label&&o.showLabel&&(0==="label".indexOf(t)||D(o.label,n))&&(o.filteredBySearch=!1);break;case"table":a.eachLatex(o,function(e){D(e,n)&&(o.filteredBySearch=!1)});break;case"image":l.eachLatex(o,function(e){D(e,n)&&(o.filteredBySearch=!1)});break;case"folder":o.title.indexOf(t)>=0&&(o.filteredBySearch=!1);break;case"text":o.text.indexOf(t)>=0&&(o.filteredBySearch=!1);break;default:var s=o;return s}!o.filteredBySearch&&"folder"!==o.type&&o.folderId&&(e.__itemIdToModel[o.folderId].filteredBySearch=!1)}else e.__itemModelArray[r].filteredBySearch=!1}function A(e){var t=[];L(e,function(e){if(-1===e.indexOf("~")&&-1===e.indexOf("\\sim"))for(var n=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var r=n.exec(e);if(!r)break;t.push(parseInt(r[1]||r[2],10))}}),t.sort(function(e,t){return e-t});for(var n=1,r=0;r<t.length;r++)t[r]===n&&n++;return n}function O(e){var t=[];p.each(e.__itemModelArray,function(e){"table"===e.type?p.each(e.columnModels,function(e){t.push(e.id)}):t.push(e.id)}),e.drawOrder=t}function F(e,t){return e.__itemIdToModel[t]}function N(e,t){for(var n=[],r=0;r<e.__itemModelArray.length;r++){var i=e.__itemModelArray[r];"expression"===i.type&&i.dependent===t&&n.push(i)}return n}function q(e,t){return e.__helperIdToModel[t]}function R(e,t){var n=c.init(t);e.__helperIdToModel[n.id]=n}function B(e){e.__anyDependsOnRandomSeed=!1;for(var t=0;t<e.__itemModelArray.length;t++){var n=e.__itemModelArray[t];if(n&&"formula"in n&&n.formula&&n.formula.depends_on_random_seed)return void(e.__anyDependsOnRandomSeed=!0)}}function j(e){for(var t=!e.controller.canAdministerSecretFolders(),n=1,r=1,i=0;i<e.__itemModelArray.length;i++){var o=e.__itemModelArray[i];o.index=i,o.displayIndex=n,M(o)&&(o.secretIndex=r,r+=1),t&&M(o)||(n+=1)}e.nextDisplayIndex=n}function V(e){e.__itemModelArray=[],e.__itemIdToModel={},e.__helperIdToModel={},e.__anyDependsOnRandomSeed=!1}function U(e){return e.__itemModelArray.length}function G(e){return 1===e.nextDisplayIndex}function z(e){for(var t=[],n=0;n<e.__itemModelArray.length;n++){var r=e.__itemModelArray[n];"expression"===r.type&&r.sliderExists&&t.push(r)}return t}function H(e){return e.selectedItem}function W(e){return{list:e.__itemModelArray.map(function(e){return e.cachedUndoRedoState})}}function K(e,t){return{list:e.__itemModelArray.map(function(e){switch(e.type){case"expression":return i.getState(e,t);case"image":return l.getState(e,t);case"table":return a.getState(e,t);case"folder":return o.getState(e,t);case"text":return s.getState(e,t);default:return e}})}}function Y(e){for(var t=0,n=/^[0-9]+$/,r=e.list.length-1;r>=0;r--){var i=e.list[r],o=i.id;if(n.test(o)){var a=parseInt(o,10);a>t&&(t=a)}if("table"===i.type&&i.columns)for(var s=i.columns.length-1;s>=0;s--)if(o=i.columns[s].id,n.test(o)){var a=parseInt(o,10);a>t&&(t=a)}}return t}function X(e,t,r){r||(r={});var i,o;for(e.colorIdx=0,V(e),e.expressionAnalysis={},i=0;i<t.list.length;i++){if(o=$(e,t.list[i]),r.remapColors&&"color"in o&&o.color){var a=p.values(e.controller.getColors());p.contains(a,o.color)||(o.color=n.closestColor(o.color,a))}e.__itemModelArray.push(o),e.__itemIdToModel[o.id]=o}if(j(e),1===e.nextDisplayIndex){ne(e,$(e,{type:"expression",id:e.controller.generateId(),color:e.controller.getNextColor()}),e.__itemModelArray.length)}}function $(e,t){switch(t.type){case"expression":return i.initModel(t,e.controller);case"table":return a.initModel(t,e.controller);case"image":return l.initModel(t,e.controller);case"folder":return o.initModel(t,e.controller);case"text":return s.initModel(t,e.controller);default:return t}}function Q(e,t){var n,r,c=e.__itemIdToModel;for(e.__itemModelArray=[],e.__itemIdToModel={},n=0;n<t.list.length;n++){var u=t.list[n];if((r=c[u.id])&&r.type===u.type)switch(r.type){case"expression":if(u.type!==r.type)throw new Error("invalid restoration");i.restoreState(r,u);break;case"table":if(u.type!==r.type)throw new Error("invalid restoration");a.restoreState(r,u);break;case"image":if(u.type!==r.type)throw new Error("invalid restoration");l.restoreState(r,u);break;case"folder":if(u.type!==r.type)throw new Error("invalid restoration");o.restoreState(r,u);break;case"text":if(u.type!==r.type)throw new Error("invalid restoration");s.restoreState(r,u);break;default:return r}else r=$(e,u);e.__itemModelArray.push(r),e.__itemIdToModel[r.id]=r}B(e),j(e)}function Z(e,t,n){var r=n[0]&&n[0].tableId,i=F(e,r||t);if(i){var o;switch(i.type){case"expression":var s=!1;i.__workerNeedsDotplotXMode=!1;for(var c=0;c<n.length;c++){var l=n[c];l.graphMode!==u.Z_3D&&l.graphMode!==u.OBJECT3D&&l.graphMode!==u.PARAMETRIC_CURVE_3D&&("resolved"in l&&!l.resolved&&(s=!0),l.boundingBox&&(o||(o=[]),o.push(l.boundingBox)),l.needsDotplotXMode&&(i.__workerNeedsDotplotXMode=!0))}i.unresolved=s,i.boundingBoxes=o;for(var d=1/0,p=-1/0,h=0,f=n;h<f.length;h++){var l=f[h];if(l.graphMode===u.POLAR){var m=l.sampledDomain;m&&(d=Math.min(d,m.min),p=Math.max(p,m.max))}}return isFinite(d)&&(i.__workerSampledDomainMin=d),void(isFinite(p)&&(i.__workerSampledDomainMax=p));case"table":for(var c=0;c<n.length;c++){var l=n[c];l.graphMode!==u.Z_3D&&l.graphMode!==u.OBJECT3D&&l.graphMode!==u.PARAMETRIC_CURVE_3D&&(l.boundingBox&&(o||(o=[]),o.push(l.boundingBox)))}return void(o&&a.setColumnBoundingBoxes(i,t,o));default:return}}}function J(e,t){var n,r,o,s=h.default(e.expressionAnalysis);for(n in t)if(t.hasOwnProperty(n)){o=t[n],r=F(e,n);var u={isGraphable:!!o.is_graphable,isError:!!o.error,errorMessage:o.error?e.controller.unpack(o.error):void 0};if(r)switch(r.type){case"expression":if(i.onFormulaUpdate(r,o),o.zero_values&&1===o.zero_values.length){var d=o.zero_values[0].val;p.isNumber(d)&&(u.evaluation={type:"Number",value:d},u.evaluationDisplayed=!0),p.isArray(d)&&d.every(p.isNumber)&&(u.evaluation={type:"ListOfNumber",value:d.slice()},u.evaluationDisplayed=!0)}else o.hasOwnProperty("constant_value")&&p.isNumber(o.constant_value)&&(u.evaluation={type:"Number",value:o.constant_value},u.evaluationDisplayed=!1);break;case"image":l.onFormulaUpdate(r,o);break;case"table":a.onFormulaUpdate(r,o);break;case"folder":case"text":break;default:var f=r;return f}else{var m=q(e,n);if(!m)continue;c.onFormulaUpdate(e.controller,m,o)}s[n]=u}B(e),e.expressionAnalysis=s}function ee(e,t){e.selectedItem=t}function te(e,t,n,i){if(t!==n){var o=e.__itemModelArray.splice(t,i);t<n&&(n=n-i+1),e.__itemModelArray.splice.apply(e.__itemModelArray,r.__spreadArrays([n,0],o)),j(e)}}function ne(e,t,n){var r=String(t.id);if(e.__itemIdToModel.hasOwnProperty(r))throw Error("Item with id '"+r+"' is already in list");e.__itemIdToModel[r]=t,e.__itemModelArray.splice(n,0,t),j(e)}function re(e,t){ne(e,t,U(e))}function ie(e,t){var n=e.__itemModelArray[t];if("folder"===n.type){for(var r=0,i=n.index+1;i<e.__itemModelArray.length;i++){var o=e.__itemModelArray[i];if("folder"===o.type||o.folderId!==n.id)break;r+=1,le(o)&&ee(e,void 0),delete e.__itemIdToModel[o.id],delete e.expressionAnalysis[n.id]}e.__itemModelArray.splice(t,1+r)}else e.__itemModelArray.splice(t,1);le(n)&&ee(e,void 0),delete e.__itemIdToModel[n.id],delete e.expressionAnalysis[n.id],B(e),j(e)}function oe(e){return e.__anyDependsOnRandomSeed}function ae(e,t){var n=F(e,t);n&&ie(e,n.index)}function se(e){var t=H(e);if(!t)return!1;var n=E(e,t.index);return!!n&&(ee(e,n),n.index===U(e)-1&&"expression"===t.type&&i.isEmpty(t)&&ie(e,n.index),!0)}function ce(e){var t=H(e);if(!t)return!1;var n=w(e,t.index);return!!n&&(ee(e,n),!0)}function le(e){return e.controller.getListModel().selectedItem===e}function ue(e,t){e.dragState=t}Object.defineProperty(t,"__esModule",{value:!0}),t.setDragState=t.isItemSelected=t.selectNextItem=t.selectPrevItem=t.removeItemById=t.anyItemDependsOnRandomSeed=t.removeItemAtIndex=t.insertItemAtEnd=t.insertItemAtIndex=t.moveItemsTo=t.setSelected=t.onEvaluatorFormulaUpdates=t.onGraphComputed=t.restoreListState=t.modelFromSpec=t.setListState=t.getLargestIntegerId=t.getState=t.getUndoRedoState=t.getSelected=t.getAllModelsWithSliders=t.hasNoVisibleExpressions=t.getItemCount=t.removeAllItems=t.reindex=t.recomputeAnyItemDependsOnRandomSeed=t.addHelperExpression=t.getHelperExpressionById=t.getItemsByIdentifier=t.getItemById=t.updateDrawOrder=t.findAvailableColumnSubscript=t.filterItemsBySearch=t.eachLatex=t.getAllHelperItemModels=t.getAllItemModels=t.isItemHiddenFromUI=t.isItemSelectable=t.isItemSecret=t.getNumberOfItemsInFolder=t.getParentFolderModel=t.findNextSelectableItem=t.findPrevSelectableItem=t.getLastSelectableItem=t.getFirstSelectableItem=t.getItemByIndex=t.getNextColor=t.areAnyImagesLoading=t.init=void 0,t.init=m,t.areAnyImagesLoading=g,t.getNextColor=y,t.getItemByIndex=v,t.getFirstSelectableItem=b,t.getLastSelectableItem=x,t.findPrevSelectableItem=E,t.findNextSelectableItem=w,t.getParentFolderModel=_,t.getNumberOfItemsInFolder=S,t.isItemSecret=M,t.isItemSelectable=k,t.isItemHiddenFromUI=C,t.getAllItemModels=I,t.getAllHelperItemModels=T,t.eachLatex=L,t.filterItemsBySearch=P,t.findAvailableColumnSubscript=A,t.updateDrawOrder=O,t.getItemById=F,t.getItemsByIdentifier=N,t.getHelperExpressionById=q,t.addHelperExpression=R,t.recomputeAnyItemDependsOnRandomSeed=B,t.reindex=j,t.removeAllItems=V,t.getItemCount=U,t.hasNoVisibleExpressions=G,t.getAllModelsWithSliders=z,t.getSelected=H,t.getUndoRedoState=W,t.getState=K,t.getLargestIntegerId=Y,t.setListState=X,t.modelFromSpec=$,t.restoreListState=Q,t.onGraphComputed=Z,t.onEvaluatorFormulaUpdates=J,t.setSelected=ee,t.moveItemsTo=te,t.insertItemAtIndex=ne,t.insertItemAtEnd=re,t.removeItemAtIndex=ie,t.anyItemDependsOnRandomSeed=oe,t.removeItemById=ae,t.selectPrevItem=se,t.selectNextItem=ce,t.isItemSelected=le,t.setDragState=ue}),define("graphing-calc/models/abstract-item",["require","exports","./list"],function(e,t,n){"use strict";function r(){return"abstract_item_"+l++}function i(e){return{guid:r(),controller:e,index:-1,displayIndex:-1,secretIndex:-1,isHiddenFromUI:!0,renderShell:!0}}function o(e,t){e.secret=t}function a(e,t){"folder"!==e.type&&(e.folderId=t)}function s(e){e.isHiddenFromUI=n.isItemHiddenFromUI(e)}function c(e){return e.isHiddenFromUI||e.filteredBySearch?"none":e.renderShell?"shell":"render"}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayState=t.updateIsHiddenFromUI=t.setFolderId=t.setSecret=t.DEFAULTS=t.getGUID=void 0;var l=0;t.getGUID=r,t.DEFAULTS=i,t.setSecret=o,t.setFolderId=a,t.updateIsHiddenFromUI=s,t.getDisplayState=c}),define("core/graphing-calc/json/table",["require","exports","tslib","core/lib/default-spec","core/types/styles","core/lib/dragmode"],function(e,t,n,r,i,o){"use strict";function a(e){var r=n.__assign(n.__assign({},t.DEFAULTS),e);return r.columns=r.columns.map(function(e){return n.__assign(n.__assign({},t.COLUMN_DEFAULTS),e)}),r}function s(e){return e=n.__assign(n.__assign({},e),{columns:e.columns.map(function(e){return r.stripDefaults(t.COLUMN_DEFAULTS,e)})}),r.stripDefaults(t.DEFAULTS,e)}function c(e){return{type:"table",id:e.id,columns:e.columns.map(function(t){return n.__assign(n.__assign({},t),{tableId:e.id})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.stripDefaults=t.inflateDefaults=t.COLUMN_DEFAULTS=t.DEFAULTS=void 0,t.DEFAULTS={folderId:"",secret:!1,columns:[]},t.COLUMN_DEFAULTS={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:o.DragMode.NONE,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID},t.inflateDefaults=a,t.stripDefaults=s,t.computeParsableState=c}),define("graphing-calc/models/table",["require","exports","core/math/rational-arithmetic-sequence","tslib","core/types/styles","core/lib/dragmode","./abstract-item","underscore","core/lib/label","core/math/evaluate-single-expression","core/math/distance","core/lib/deepCopy","lib/copy-properties","graphing-calc/models/list","core/graphing-calc/json/table","core/graphing-calc/json/table","core/graphing-calc/json/table","core/lib/validate-color"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y){"use strict";function v(e,t,n,r){r.row=e.rowModels[t],r.row.cells.splice(n,0,r)}function b(e,t,n){e.rowModels[t].cells.splice(n,1)}function x(e){return isFinite(e)?c.truncatedLatexLabel(e,{digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function E(e,t,n){var r=e.columnModels[t];r.error=n.error,r.discrete=n.discrete,r.disabled=n.dependent,r.draggable=!n.error&&!n.dependent,r.packedErrors=[],r.computedValues=[];for(var i=n.values,o=i.length-1;o>=0;o--){var a=i[o];r.computedValues[o]="number"==typeof a?x(a):"",r.packedErrors[o]=a&&a.msg?a:void 0}}function w(e){var t=Z(e);if(t){var n=_(e);if(!n)return void(e.isExpanded||ae(e,!0));t.row>=n.min&&t.row<n.max&&ae(e,!0)}}function _(e){if(!e.isExpanded){var t=e.rowModels.length;if(!(t<30))return{min:8,max:t-5}}}function S(e,t){var n=e.columnModels[t];return{values:e.columns[t].values.slice(),dragMode:n.dragMode,hidden:n.hidden,id:n.id,color:n.color,points:n.points,lines:n.lines,pointStyle:n.pointStyle,lineStyle:n.lineStyle,latex:n.latex}}function M(){return"table_guid_"+fe++}function k(){return{guid:M(),type:"cell",row:void 0,column:void 0}}function C(e){return{type:"row",index:e,guid:M(),cells:[]}}function I(e,t,n,r){var i=e.columnModels[t];i.cells.splice(n,0,r),r.column=i,e.columns[i.index].values.splice(n,0,"")}function T(e,t,n){var r=e.columnModels[t];r.cells.splice(n,1),e.columns[r.index].values.splice(n,1)}function L(e,t,n){var i=n.color;i&&y.default(i)||(i=e.controller.getNextColor());var o=r.__assign(r.__assign({},n),{type:"header",guid:M(),index:t,error:void 0,table:e,color:i,packedErrors:[],computedValues:[],cells:void 0,row:void 0,discrete:void 0,shouldGraph:void 0,disabled:void 0,draggable:void 0});return o.cells=o.values.map(function(){var e=k();return e.column=o,e}),delete o.values,0===t&&(o.hidden=!0),o}function D(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={columns:U(e,{stripDefaults:!1}).columns}):delete e.preTransientState,a.updateIsHiddenFromUI(e);var t=h.getParentFolderModel(e),n=t&&t.hidden;s.each(e.columnModels,function(e){e.shouldGraph=!n&&!e.hidden}),G(e),H(e),B(e)}function P(e,t){e.formula=t;var n,r=e.formula.column_data,i=e.columnModels[0].cells.length,o=e.columnModels.length,a=0;for(n=0;n<r.length;n++){var s=r[n].values.length;s>a&&(a=s)}for(n=a-i;n>0;n--)A(e,i),i++;for(n=0;n<r.length&&n<o;n++)E(e,n,r[n]);var c=e.columnModels[e.columnModels.length-1];c.disabled=!0,c.error=void 0}function A(e,t){var n=C(t+1);e.rowModels.splice(t+1,0,n);for(var r=t+1;r<e.rowModels.length;r++)e.rowModels[r].index=r;for(r=0;r<e.columnModels.length;r++){var i=k();I(e,r,t,i),v(e,t+1,r,i)}}function O(e,t){var n=_(e);n&&t===n.max-1&&ae(e,!0);for(var r=0;r<e.columnModels.length;r++)T(e,r,t);for(e.rowModels.splice(t+1,1),r=t+1;r<e.rowModels.length;r++)e.rowModels[r].index=r}function F(e,t,n){var i=r.__assign(r.__assign(r.__assign({},f.COLUMN_DEFAULTS),n),{values:e.columns[0].values.map(function(){return""})}),o=L(e,t,i);e.columnModels.splice(t,0,o),e.columns.splice(t,0,i);for(var a=t+1;a<e.columnModels.length;a++)e.columnModels[a].index=a;for(v(e,0,t,o),a=1;a<e.rowModels.length;a++)v(e,a,t,o.cells[a-1])}function N(e,t){e.columns.splice(t,1),e.columnModels.splice(t,1);for(var n=t;n<e.columnModels.length;n++)e.columnModels[n].index=n;for(n=0;n<e.rowModels.length;n++)b(e,n,t)}function q(e,t){var r,i=e.columnModels.length,o=[];for(r=0;r<i;r++)o.push("");var a=e.columns[0].values;if(t>1){var s=e.controller.isDegreeMode(),c=l.default(a[0],s),d=l.default(a[1],s);if(isFinite(c)&&isFinite(d)){var p=n(c,d);if(p){var h=p.nstart,f=h/p.lcm;for(r=0;r<t;r++){var m=l.default(a[r],s);if(!u.approx(m,f))return o;h+=p.nstep,f=h/p.lcm}o[0]=(""+c).length<8&&(""+d).length<8?""+f:"\\frac{"+h+"}{"+p.lcm+"}"}}}return o}function R(e,t){for(var n=0;n<e.columnModels.length;n++){t(e.columnModels[n].latex);for(var r=e.columns[n],i=0;i<r.values.length;i++)r.values[i]&&t(r.values[i])}}function B(e){for(var t=g.computeParsableState({type:"table",id:e.id,secret:e.secret,folderId:e.folderId,columns:e.columnModels.map(function(t){return S(e,t.index)})}),n=0;n<t.columns.length;n++)t.columns[n].hidden=!e.columnModels[n].shouldGraph;e.cachedParsableState=t}function j(e,t){return e=d.default(e),e.push(r.__assign(r.__assign({},f.COLUMN_DEFAULTS),{id:t,values:e[0].values.map(function(){return""})})),e.forEach(function(e){e.values.push("")}),e}function V(e){return e=d.default(e),
e.pop(),e.forEach(function(e){e.values.pop()}),e}function U(e,t){var n=r.__assign(r.__assign({},e.cachedViewState),{columns:V(e.cachedViewState.columns)});return t.stripDefaults?m.stripDefaults(n):n}function G(e){var t=e.columnModels.map(function(t,n){return S(e,n)});e.cachedViewState={id:e.id,type:e.type,folderId:e.folderId,columns:t,secret:e.secret}}function z(e,t){e.draggingOnGraphpaper=t}function H(e){var t=r.__assign(r.__assign({},e.cachedViewState),{columns:V(e.cachedViewState.columns)});e.preTransientState&&(t=r.__assign(r.__assign({},t),e.preTransientState)),e.cachedUndoRedoState=t}function W(e,t){if(e.columnModels.length-1!==t.length)return{type:"start-fresh"};if(e.columnModels[0].cells.length-1!==t[0].values.length)return{type:"start-fresh"};for(var n=-1,r=t.length-1;r>=0;r--){var i=e.columns[r],o=t[r];if(i.id!==o.id)return{type:"start-fresh"};for(var a=i.values,s=o.values,c=s.length-1;c>=0;c--)if(a[c]!==s[c]&&(-1===n&&(n=c),n!==c))return{type:"start-fresh"}}return-1===n?{type:"none"}:{type:"edit-row",rowIndex:n}}function K(e,t){var n=W(e,t.columns);if(p.copyProperties({from:t,to:e,props:{id:!1,type:!1,columns:!1,folderId:!0,secret:!0}}),"start-fresh"===n.type)e.columns=j(t.columns,e.controller.generateId()),X(e);else{switch(n.type){case"none":break;case"edit-row":for(var r=t.columns.length-1;r>=0;r--){de(e,{column:r,row:n.rowIndex+1},t.columns[r].values[n.rowIndex])}break;default:return n}for(var i=0;i<t.columns.length;i++)p.copyProperties({from:t.columns[i],to:e.columnModels[i],props:{id:!1,values:!1,color:!0,latex:!0,hidden:!0,points:!0,lines:!0,dragMode:!0,lineStyle:!0,pointStyle:!0}})}}function Y(e,t){var n=d.default(m.inflateDefaults(e)),i=r.__assign(r.__assign(r.__assign({},n),a.DEFAULTS(t)),{columnModels:void 0,rowModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoState:{},isExpanded:!1});i.columns=j(i.columns,t.generateId());var o,s=0;for(o=0;o<i.columns.length;o++)i.columns[o].values||(i.columns[o].values=[]),i.columns[o].values.length>s&&(s=i.columns[o].values.length);for(o=0;o<i.columns.length;o++)for(var c=s-i.columns[o].values.length;c>0;c--)i.columns[o].values.push("");return X(i),i}function X(e){e.columnModels=e.columns.map(function(t,n){return L(e,n,t)}),e.rowModels=[C(0)];for(var t=0;t<e.columnModels.length;t++)v(e,0,t,e.columnModels[t]);for(var t=0;t<e.columnModels[0].cells.length;t++){var n=C(t+1);e.rowModels.push(n);for(var r=0;r<e.columnModels.length;r++)v(e,t+1,r,e.columnModels[r].cells[t])}}function $(e,t,n){for(var r=[],a=Math.min(t.length,me.length),s=0;s<a;s++)r.push({id:n.generateId(),latex:c.identifierToLatex(me[s]+"_"+e),values:t[s],color:n.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:o.DragMode.NONE,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID});return{id:n.generateId(),type:"table",folderId:"",secret:!1,columns:r}}function Q(e,t){var n=U(e,{stripDefaults:!1});if(!n.columns||!t.columns)return t;for(var r=0;r<t.columns.length;r++){var i=n.columns[r],o=t.columns[r];if(i)for(var a in i)i.hasOwnProperty(a)&&(o.hasOwnProperty(a)||(o[a]=i[a]))}return t}function Z(e){var t=e.controller.getFocusLocation();return t&&"table"===t.type&&t.id===e.id?t.location:void 0}function J(e,t){for(var n=0;n<e.columnModels.length;n++){var r=e.columnModels[n];if(r.id===t)return r}}function ee(e,t,n){var r=J(e,t);r&&(r.points=n,n||(r.dragMode=o.DragMode.NONE))}function te(e,t,n){var r=J(e,t);r&&(r.pointStyle=n)}function ne(e,t,n){var r=J(e,t);r&&(r.lines=n)}function re(e,t,n){var r=J(e,t);r&&(r.lineStyle=n)}function ie(e,t,n){var r=J(e,t);r&&(r.dragMode=n,n===o.DragMode.NONE||r.points||(r.points=!0))}function oe(e,t,n){var r=J(e,t);r&&y.default(n)&&(r.color=n)}function ae(e,t){e.isExpanded=t}function se(e,t,n){var r=J(e,t);r&&(r.hidden=n,n&&le(e))}function ce(e,t,n){var r=J(e,t);r&&(r.boundingBoxes=n,le(e))}function le(e){var t=[];e.columnModels.forEach(function(e){e.boundingBoxes&&!e.hidden&&(t=t.concat(e.boundingBoxes))}),e.boundingBoxes=t}function ue(e,t){var n=J(e,t);return!n||!n.points&&!n.lines}function de(e,t,n){if(0===t.row){var r=e.columnModels[t.column].id,i=J(e,r);if(!i)return;return i.latex=n,void(t.column>=e.columnModels.length-1&&F(e,t.column+1,{id:e.controller.generateId(),latex:"",color:e.controller.getNextColor()}))}var o=e.columnModels[t.column];e.columns[o.index].values[t.row-1]=n,""!==n&&t.row>=e.columnModels[0].cells.length&&A(e,t.row)}function pe(e,t){return t.row<e.rowModels.length&&t.column<e.columnModels.length}function he(e){if(e.values)for(var t=0,n=e.values;t<n.length;t++)if(""!==n[t])return!1;if(e.computedValues)for(var r=0,i=e.computedValues;r<i.length;r++)if(""!==i[r])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.isColumnEmpty=t.doesCellExist=t.setCellLatex=t.shouldHideColumn=t.mergeBoundingBoxes=t.setColumnBoundingBoxes=t.setColumnHidden=t.setExpanded=t.setColumnColor=t.setColumnDragMode=t.setColumnLineStyle=t.setColumnLines=t.setColumnPointStyle=t.setColumnPoints=t.getColumnModel=t.getSelectedCell=t.cloneTableAndExtendWithProperties=t.makeTableState=t.buildEntireColumnStructure=t.initModel=t.restoreState=t.computeTableStructureMutation=t.updateCachedUndoRedoState=t.setIsDraggingOnGrapher=t.updateCachedViewState=t.getState=t.stripBlankRowAndColumn=t.addBlankRowAndColumn=t.updateCachedParsableState=t.eachLatex=t.getRowAutoFillValues=t.removeColumn=t.insertBlankColumn=t.removeRow=t.insertBlankRow=t.onFormulaUpdate=t.onControllerUpdate=t.makeColumn=t.removeCellFromColumn=t.insertCellToColumn=t.makeRow=t.makeCell=t.getGUID=t.getColumnState=t.getCollapsedRange=t.updateIsCollapsedByFocusLocation=t.setColumnComputedValues=t.formatValueForDisplay=t.removeCellFromRow=t.insertCellToRow=void 0,t.insertCellToRow=v,t.removeCellFromRow=b,t.formatValueForDisplay=x,t.setColumnComputedValues=E,t.updateIsCollapsedByFocusLocation=w,t.getCollapsedRange=_,t.getColumnState=S;var fe=0;t.getGUID=M,t.makeCell=k,t.makeRow=C,t.insertCellToColumn=I,t.removeCellFromColumn=T,t.makeColumn=L,t.onControllerUpdate=D,t.onFormulaUpdate=P,t.insertBlankRow=A,t.removeRow=O,t.insertBlankColumn=F,t.removeColumn=N,t.getRowAutoFillValues=q,t.eachLatex=R,t.updateCachedParsableState=B,t.addBlankRowAndColumn=j,t.stripBlankRowAndColumn=V,t.getState=U,t.updateCachedViewState=G,t.setIsDraggingOnGrapher=z,t.updateCachedUndoRedoState=H,t.computeTableStructureMutation=W,t.restoreState=K,t.initModel=Y,t.buildEntireColumnStructure=X;var me=["x","y","z","u","v","w"];t.makeTableState=$,t.cloneTableAndExtendWithProperties=Q,t.getSelectedCell=Z,t.getColumnModel=J,t.setColumnPoints=ee,t.setColumnPointStyle=te,t.setColumnLines=ne,t.setColumnLineStyle=re,t.setColumnDragMode=ie,t.setColumnColor=oe,t.setExpanded=ae,t.setColumnHidden=se,t.setColumnBoundingBoxes=ce,t.mergeBoundingBoxes=le,t.shouldHideColumn=ue,t.setCellLatex=de,t.doesCellExist=pe,t.isColumnEmpty=he}),define("main/propagate_selection",["require","graphing-calc/models/table"],function(e){"use strict";function t(e){var t=e&&e.id;if(e&&"table"===e.type){var n=r.getSelectedCell(e);if(n){var i=e.columnModels[n.column];t=i?i.id:void 0}else t=void 0}if(e&&"folder"===e.type){var o=e.selectedHiddenChild;t=o?o.id:void 0}return t}function n(e,n,r,i){var o=e.getSelectedItem(),a=t(o);return a!==i&&n.select(a),a}var r=e("graphing-calc/models/table");return{getSelectedId:t,propagateSelection:n}}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("flux",[],t):"object"==typeof exports?exports.Flux=t():e.Flux=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports.Dispatcher=n(1)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=n(2),o=function(){function e(){r(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(e){var t="ID_"+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){this._callbacks[e]||i(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this._callbacks[e]},e.prototype.waitFor=function(e){this._isDispatching||i(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var n=e[t];this._isPending[n]?this._isHandled[n]||i(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(this._callbacks[n]||i(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this._invokeCallback(n))}},e.prototype.dispatch=function(e){this._isDispatching&&i(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],u=0;c=new Error(t.replace(/%s/g,function(){return l[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}e.exports=r}])}),define("lib/conditional_blur",["require","exports","touchtracking","jquery"],function(e,t,n,r){"use strict";function i(){if(document.activeElement){var e=r(document.activeElement);n.elIsFocusable(e)&&r(document.activeElement).blur()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("lib/state-stack",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=100),this.clear(),this._sizeLimit=e}return e.prototype.clear=function(){this._stack=[],this._stackPointer=-1},e.prototype.getState=function(){return this._stack[this._stackPointer]},e.prototype.serializeForBugsnag=function(){function e(e){try{return JSON.stringify(e,null,2)}catch(e){return"[[could not jsonify]]"}}return{currentState:e(this._stack[this._stackPointer]),undoState:e(this._stack[this._stackPointer-1]),redoState:e(this._stack[this._stackPointer+1])}},e.prototype.addState=function(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(e),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1},e.prototype.replaceState=function(e){this.canRedo()&&this._stack.splice(this._stackPointer+1),0===this._stack.length?(this._stack.push(e),this._stackPointer=0):this._stack[this._stackPointer]=e},e.prototype.canUndo=function(){return this._stackPointer>0},e.prototype.canRedo=function(){return this._stackPointer<this._stack.length-1},e.prototype.undo=function(){this.canUndo()&&(this._stackPointer-=1)},e.prototype.redo=function(){this.canRedo()&&(this._stackPointer+=1)},e}();t.default=n}),define("graphing/viewport",["require","exports"],function(e,t){"use strict";function n(e,t){return e*(1-1e-8)+1e-8*t>e&&t-e>1e-300&&t-e<1e300}Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var r=function(){function e(e,t,n,r){void 0===e&&(e=-10),void 0===t&&(t=10),void 0===n&&(n=-10),void 0===r&&(r=10),this.xmin=e,this.xmax=t,this.ymin=n,this.ymax=r}return e.fromObject=function(t){return new e(t.xmin,t.xmax,t.ymin,t.ymax)},e.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},e.prototype.equals=function(e){return this.xmin===e.xmin&&(this.ymin===e.ymin&&(this.xmax===e.xmax&&this.ymax===e.ymax))},e.prototype.isXValid=function(){return n(this.xmin,this.xmax)},e.prototype.isYValid=function(){return n(this.ymin,this.ymax)},e.prototype.isValid=function(){return this.isXValid()&&this.isYValid()},e.prototype.isSquare=function(e){return Math.abs(e.height-e.width*this.aspectRatio())<1},e.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)},e.prototype.squareXAxis=function(t){var n=this.xmax-this.xmin,r=this.ymax-this.ymin,i=this.xmin+n/2,o=r/t.height*t.width;return new e(i-o/2,i+o/2,this.ymin,this.ymax)},e.prototype.squareYAxis=function(t){var n=this.xmax-this.xmin,r=this.ymax-this.ymin,i=this.ymin+r/2,o=n/t.width*t.height;return new e(this.xmin,this.xmax,i-o/2,i+o/2)},e.prototype.squareCrop=function(e){return this.aspectRatio()>e.height/e.width?this.squareYAxis(e):this.squareXAxis(e)},e.prototype.polarDiameter=function(){var e=Math.abs(this.xmax),t=Math.abs(this.xmin),n=Math.abs(this.ymax),r=Math.abs(this.ymin);return 1.5*Math.max(e,t,n,r)},e.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))},e.prototype.smallestR=function(){return this.xmin<=0&&this.xmax>=0&&this.ymin<=0&&this.ymax>=0?0:this.xmin<=0&&this.xmax>=0?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&this.ymax>=0?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))},e}();t.Viewport=r}),define("core/graphing-calc/migrations/0",["require"],function(e){"use strict";function t(e){if(e.type){if(c.hasOwnProperty(e.type))return e.type;throw new Error("Invalid item type: '"+e.type+"'.")}return void 0!==e.text?"text":void 0!==e.columns||void 0!==e.headings?"table":"expression"}function n(e){return e.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function r(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]="latex"===r?n(e[r]):"values"===r?e[r].map(n):e[r]);return t}function i(e){var i,o=t(e),a={};switch(o){case"expression":for(i in e)e.hasOwnProperty(i)&&(a[i]="latex"===i?n(e[i]):e[i]);return a.type=o,a;case"table":for(i in e)e.hasOwnProperty(i)&&(a[i]="columns"===i?e[i].map(r):e[i]);return a.type=o,a;case"image":for(i in e)e.hasOwnProperty(i)&&(a[i]="width"===i||"height"===i||"x"===i||"y"===i?n(e[i]):e[i]);return a.type=o,a;case"text":case"folder":for(i in e)e.hasOwnProperty(i)&&(a[i]=e[i]);return a.type=o,a}}function o(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"xAxisArrows"!==n&&"yAxisArrows"!==n&&(t[n]=e[n]);return t.xAxisArrowMode=l[e.xAxisArrows||"none"],t.yAxisArrowMode=l[e.yAxisArrows||"none"],t}function a(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=o(e.graph),t.expressions={list:e.expressions.list.map(i)},t.version=0,t}var s={NONE:"NONE",POSITIVE:"POSITIVE",BOTH:"BOTH"},c={expression:!0,table:!0,image:!0,folder:!0,text:!0},l={none:s.NONE,both:s.BOTH,positive:s.POSITIVE};return a}),define("core/graphing-calc/migrations/1",["require"],function(e){"use strict";function t(e){return e.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function n(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="latex"===r?t(e[r]):"values"===r?e[r].map(t):e[r]);return n}function r(e){var r,i=e.type,o={};switch(i){case"expression":for(r in e)e.hasOwnProperty(r)&&(o[r]="latex"===r?t(e[r]):e[r]);return o;case"table":for(r in e)e.hasOwnProperty(r)&&(o[r]="columns"===r?e[r].map(n):e[r]);return o;case"image":for(r in e)e.hasOwnProperty(r)&&(o[r]="width"===r||"height"===r||"x"===r||"y"===r?t(e[r]):e[r]);return o;case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o;default:throw new Error("Unexpected expression type: "+i)}}function i(e){if(e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(r)},t.version=o,t}var o=1;return i}),define("core/graphing-calc/migrations/2",["require","core/lib/color-helpers"],function(e){"use strict";function t(e){switch(e){case s:return a.RED;case c:return a.BLUE;case l:return a.GREEN;case u:return a.PURPLE;case d:return a.ORANGE;case p:return a.BLACK;default:return e}}function n(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="color"===r?t(e[r]):e[r]);return n}function r(e){var r,i=e.type,o={};switch(i){case"expression":for(r in e)e.hasOwnProperty(r)&&(o[r]="color"===r?t(e[r]):e[r]);return o;case"table":for(r in e)e.hasOwnProperty(r)&&(o[r]="columns"===r?e[r].map(n):e[r]);return o;case"image":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o;default:throw new Error("Unexpected expression type: "+i)}}function i(e){if(e.version>1)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(r)},t.version=o,t}var o=2,a=e("core/lib/color-helpers").colors,s="#C0504D",c="#4F81BD",l="#9BBB59",u="#8064A2",d="#F79646",p="#000000";return i}),define("core/graphing-calc/migrations/3",["require"],function(e){"use strict";function t(e){if("string"==typeof e)return e;if(void 0===e)return"";var t=e+"";return t=t.replace(/1e\+?([-\d]+)/,"10^{$1}"),t=t.replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")}function n(e){var n,r=e.type,i={};switch(r){case"expression":for(n in e)e.hasOwnProperty(n)&&(i[n]="sliderMax"===n||"sliderMin"===n||"sliderInterval"===n?t(e[n]):"domain"===n?{max:t(e[n].max),min:t(e[n].min)}:e[n]);return i.hasOwnProperty("sliderMin")&&void 0===i.sliderInterval&&(i.sliderInterval=""),i;case"image":case"table":case"text":case"folder":for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i;default:throw new Error("Unexpected expression type: "+r)}}function r(e){if(e.version>2)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(n)},t.version=i,t}var i=3;return r}),define("core/graphing-calc/migrations/4",["require"],function(e){"use strict";function t(e){switch(e){case"point":return"POINT";case"cross":return"CROSS";case"open":return"OPEN";case"normal":return"SOLID";case"dashed":return"DASHED";case"dotted":return"DOTTED";default:return e}}function n(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="style"===r?t(e[r]):e[r]);return n}function r(e){var r,i=e.type,o={};switch(i){case"expression":for(r in e)e.hasOwnProperty(r)&&(o[r]="style"===r?t(e[r]):e[r]);return o;case"table":for(r in e)e.hasOwnProperty(r)&&(o[r]="columns"===r?e[r].map(n):e[r]);return o;case"image":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o;default:throw new Error("Unexpected expression type: "+i)}}function i(e){if(3!==e.version)throw new Error("Unexpected version: "+e.version);var t={};return t.graph=e.graph,t.expressions={list:e.expressions.list.map(r)},t.version=o,t}var o=4;return i}),define("core/graphing-calc/validate-state",["require","exports","core/lib/deepCopy"],function(e,t,n){"use strict";function r(e){"number"==typeof e.min&&(e.min=""+e.min),"number"==typeof e.max&&(e.max=""+e.max),"number"==typeof e.step&&(e.step=""+e.step)}function i(e){e.slider&&r(e.slider),"string"!=typeof e.id&&(e.id=""+e.id)}function o(e){for(var t,n,r=s(e)+1,o={},a=0,c=e;a<c.length;a++){var l=c[a];if(i(l),"folder"===l.type)t=l.id,o[l.id]&&(l.id=""+r,r+=1),n=l.id,o[l.id]=!0,l.hasOwnProperty("folderId")&&delete l.folderId;else{if(void 0!==t&&l.folderId===t?l.folderId=n:(l.folderId&&(l.folderId=""),t=void 0,n=void 0),"table"===l.type)for(var u=0,d=l.columns;u<d.length;u++){var p=d[u];o[p.id]&&(p.id=""+r,r+=1),o[p.id]=!0}o[l.id]&&(l.id=""+r,r+=1),o[l.id]=!0}}}function a(e,t){var n=parseFloat(t);return n!==Math.floor(n)?e:Math.max(e,n)}function s(e){for(var t=0,n=0,r=e;n<r.length;n++){var i=r[n];if(t=a(t,i.id),"table"===i.type)for(var o=0,s=i.columns;o<s.length;o++){var c=s[o];a(t,c.id)}}return t}function c(e){var t=n.default(e);return o(t.expressions.list),t}Object.defineProperty(t,"__esModule",{value:!0}),t.validateState=void 0,t.validateState=c}),define("core/graphing-calc/migrations/back-migration",["require","exports","tslib","core/lib/deepCopy"],function(e,t,n,r){"use strict";function i(e){var t=e.slider;if(t){var r=n.__assign(n.__assign({},t),{loopMode:void 0});return"PLAY_ONCE"===t.loopMode||"PLAY_INDEFINITELY"===t.loopMode?r.newLoopMode=t.loopMode:r.loopMode=t.loopMode,r.loopMode||delete r.loopMode,r}}function o(e){var t=r.default(e),n=e.rules;if(n&&n[0]){var i=n[0].assignment;i&&(t.assignment=i);var o=n[0].expression;o&&(t.expression=o)}return t}function a(e){if(8!==e.version)throw new Error("Unexpected version: "+e.version);var t=e.expressions.list.map(function(e){if("image"===e.type){var t=n.__assign(n.__assign({},e),{stringOpacity:void 0,opacity:void 0});if(void 0!==e.opacity){var r=void 0===e.opacity?NaN:+e.opacity;t.stringOpacity=e.opacity,r>0&&r<1&&(t.opacity=r)}return void 0===t.opacity&&delete t.opacity,void 0===t.stringOpacity&&delete t.stringOpacity,e.clickableInfo&&(t.clickableInfo=o(e.clickableInfo)),t}if("expression"===e.type){var t=n.__assign(n.__assign({},e),{stringFillOpacity:void 0,fillOpacity:void 0,slider:i(e)});return t.slider||delete t.slider,delete t.fillOpacity,void 0===e.fillOpacity?delete t.stringFillOpacity:t.stringFillOpacity=e.fillOpacity,e.clickableInfo&&(t.clickableInfo=o(e.clickableInfo)),t}return e});return{version:7,graph:e.graph,randomSeed:e.randomSeed,expressions:{list:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}),define("core/graphing-calc/migrations/5",["require","exports"],function(e,t){"use strict";function n(e){var t,n={};for(var r in e)if(e.hasOwnProperty(r))switch(t=e[r],r){case"showAxes":n.showXAxis=t,n.showYAxis=t;break;case"showLabels":n.xAxisNumbers=t,n.yAxisNumbers=t,n.polarNumbers=t;break;case"labelXMode":n.xAxisStep="pi"===t?Math.PI:0;break;case"labelYMode":n.yAxisStep="pi"===t?Math.PI:0;break;default:n[r]=t}return n}function r(e){var t={};for(var n in e)e.hasOwnProperty(n)&&"showPoints"!==n&&"showLine"!==n&&(t[n]=e[n]);return void 0===e.showPoints&&void 0===e.showLine||(e.showPoints&&e.showLine?t.columnMode="POINTS_AND_LINES":e.showPoints?t.columnMode="POINTS":e.showLine?t.columnMode="LINES":(t.hidden=!0,t.columnMode="POINTS")),t}function i(e){var t,n=e.type,i={};switch(n){case"expression":void 0===e.hidden?e.hasOwnProperty("graphed")?i.hidden=!e.graphed:e.hasOwnProperty("userRequestedGraphing")?i.hidden="never"===e.userRequestedGraphing:i.hidden=!1:i.hidden=e.hidden;for(t in e)e.hasOwnProperty(t)&&"graphed"!==t&&"userRequestedGraphing"!==t&&"hidden"!==t&&"slider"!==t&&("color"!==t?"style"!==t?"sliderInterval"!==t?i[t]=e[t]:i.sliderInterval="undefined"===e.sliderInterval?"":e.sliderInterval:i.style="normal"===e.style?"SOLID":e.style:"object"==typeof e.color?i.color=e.color.value:i.color=e.color);return i;case"table":if(e.headings||e.columns){var o=e.headings?e.headings:e.columns;if(i.columns=o.map(r),e.rows)for(var a=0;a<i.columns.length;a++){var s=i.columns[a];s.values=[];for(var c=0;c<e.rows.length;c++)s.values.push(e.rows[c][a])}}for(t in e)e.hasOwnProperty(t)&&"rows"!==t&&"headings"!==t&&"columns"!==t&&(i[t]=e[t]);return i;case"image":case"text":case"folder":for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i;default:throw new Error("Unexpected expression type: "+n)}}function o(e){if(4!==e.version)throw new Error("Unexpected version: "+e.version);return{version:a,graph:n(e.graph),expressions:{list:e.expressions.list.map(i)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateState=void 0;var a=5;t.migrateState=o}),define("core/graphing-calc/migrations/6",["require","exports","core/lib/deepCopy","underscore","core/math/sliders","core/math/evaluate-single-expression"],function(e,t,n,r,i,o){"use strict";function a(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function s(e){if(a(e))return{raw:e,parts:[e]};for(var t,n=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],r="({"+n.join("})|({")+"})",i=new RegExp(r,"g"),o=[],s=0,c=0;t=i.exec(e);){c=t.index,c>s&&o.push(e.substr(s,c-s));var l=t[0],u=l.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");o.push({symbol:u,str:l}),s=t.index+l.length}return s<e.length&&o.push(e.substr(s)),{raw:e,parts:o}}function c(e){var t={};for(var n in e)if(e.hasOwnProperty(n)&&"style"!==n)if("values"===n&&(t[n]=e[n].map(function(e){return e?""+e:""})),"columnMode"!==n||e.hasOwnProperty("points")||e.hasOwnProperty("lines"))t[n]=e[n];else switch(e[n]){case"LINES":t.points=!1,t.lines=!0;break;case"POINTS_AND_LINES":t.points=!0,t.lines=!0;break;default:t.points=!0,t.lines=!1}return t.hasOwnProperty("pointStyle")||(t.pointStyle="POINT"),t.hasOwnProperty("lineStyle")||(t.lineStyle="SOLID"),t.id=""+t.id,t}function l(e){var t=s(e),n="";return r.each(t.parts,function(e){n+="object"==typeof e&&e.str?"$"+e.str:e}),n}function u(e,t){var n=e.latex.split("=");if(2===n.length){var r=o.default(n[1],t);if(isFinite(r)){var a=e.slider.hardMin?o.default(e.slider.min||"-10",t):void 0,s=e.slider.hardMax?o.default(e.slider.max||"10",t):void 0,c=e.slider.step?o.default(e.slider.step,t):void 0,l=i.determineWhichLimitsAreCompatibleWithValue({target:r,step:c,hardMin:a,hardMax:s});l.min||(delete e.slider.hardMin,delete e.slider.min),l.max||(delete e.slider.hardMax,delete e.slider.max),l.step||delete e.slider.step}}}function d(e,t,n,i){var o,a=e.type,s={};switch(a){case"folder":for(o in e)e.hasOwnProperty(o)&&("memberIds"===o||(s[o]=e[o]));break;case"expression":for(o in e)if(e.hasOwnProperty(o))if("style"!==o||e.hasOwnProperty("pointStyle")||e.hasOwnProperty("lineStyle"))m.hasOwnProperty(o)?(s.slider=s.slider||{},s.slider[m[o]]=e[o]):s[o]=e[o],e.label&&(s.label=l(e.label));else{var d=e[o];r.contains(["POINT","OPEN","CROSS"],d)?(s.pointStyle=d,s.lineStyle="SOLID"):r.contains(["SOLID","DASHED","DOTTED"],d)?(s.pointStyle="POINT",s.lineStyle=d):(s.pointStyle="POINT",s.lineStyle="SOLID")}s.latex&&s.slider&&!s.slider.isPlaying&&u(s,i),s.hasOwnProperty("fillOpacity")||(s.fillOpacity=.4),!1===s.label&&(s.label=""),s.labelSize||(s.labelSize="medium"),s.labelOrientation||(s.labelOrientation="default"),s.verticalLabel||(s.verticalLabel=!1),s.interactiveLabel||(s.interactiveLabel=!1);break;case"image":for(o in e)e.hasOwnProperty(o)&&"x"!==o&&"y"!==o&&(s[o]=e[o]);s.center="\\left("+(e.x||"0")+","+(e.y||"0")+"\\right)",s.angle=e.angle||"0",s.foreground=!!s.foreground;break;case"text":for(o in e)e.hasOwnProperty(o)&&(s[o]=e[o]);break;case"table":for(o in e)e.hasOwnProperty(o)&&(s[o]="columns"===o?e[o].map(c):e[o]);break;default:throw new Error("Unexpected expression type: "+a)}if(s.id=""+s.id,"folder"===e.type)t.folderId=s.id,t.memberIds=e.memberIds,s.folderId="";else{var p=n[s.id];t.memberIds&&t.memberIds[p]?s.folderId=t.folderId:(s.folderId="",t.folderId=void 0,t.memberIds=void 0)}return s}function p(e){for(var t=0,n=/^[0-9]+$/,r=e.length-1;r>=0;r--){var i,o=e[r],a=o.id;if(n.test(a)&&(i=parseInt(a,10))>t&&(t=i),"table"===o.type&&o.columns)for(var s=o.columns.length-1;s>=0;s--)a=o.columns[s].id,n.test(a)&&(i=parseInt(a,10))>t&&(t=i)}return t+1}function h(e){if(5!==e.version)throw new Error("Unexpected version: "+e.version);var t=!(!e.graph||!e.graph.degreeMode),r=e.expressions.list,i=-1,o={},a={},s={};return{version:f,graph:e.graph,expressions:{list:r.map(function(e){return o[e.id]?(-1===i&&(i=p(r)),a[i]=e.id,e=n.default(e),e.id=i+"",i+=1):a[e.id]=e.id,o[e.id]=!0,d(e,s,a,t)})}}}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateState=void 0;var f=6,m={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};t.migrateState=h}),define("core/graphing-calc/migrations/7",["require","exports","tslib"],function(e,t,n){"use strict";function r(e){if(6!==e.version)throw new Error("Unexpected version: "+e.version);var t=e.expressions.list.map(function(e){if("expression"===e.type&&e.domain){var t=n.__assign(n.__assign({},e),{parametricDomain:{min:e.domain.min,max:e.domain.max}});return delete t.domain,t}return e});return{version:7,randomSeed:e.randomSeed,graph:e.graph,expressions:{list:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("core/lib/random-seed",["require","exports","core/lib/md5"],function(e,t,n){"use strict";function r(e){return 1===e.length?"0"+e:e}function i(){var e=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(e);else{if("undefined"==typeof msCrypto)return n(Date.now().toString());msCrypto.getRandomValues(e)}return Array.prototype.slice.call(e).map(function(e){return r(e.toString(16))}).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("core/graphing-calc/migrations/8",["require","exports","tslib","core/lib/random-seed","core/lib/deepCopy"],function(e,t,n,r,i){"use strict";function o(e){var t=e.split("_");return 2===t.length&&t[1]&&1===t[1].length?t[0]+"_{"+t[1]+"}":e}function a(e){return e=i.default(e),e.rules||!e.assignment&&!e.expression||(e.rules=[{id:"1",assignment:e.assignment||"",expression:e.expression||""}]),delete e.assignment,delete e.expression,e}function s(e){var t=/\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g;return e.replace(t,function(e){switch(e){case"\\operatorname{stdev}p":return"\\operatorname{stdevp}";case"\\operatorname{stddev}p":return"\\operatorname{stddevp}";case"\\operatorname{stdDev}P":return"\\operatorname{stdDevP}";case"\\operatorname{var}iance":return"\\operatorname{variance}";default:return""}})}function c(e){return e.columns?n.__assign(n.__assign({},e),{columns:e.columns.map(l)}):e}function l(e){var t=e.latex,r=e.values,i=n.__assign({},e);return t&&(i.latex=s(t),i.latex=o(i.latex)),r&&(i.values=r.map(function(e){return e?s(e):""})),i}function u(e){if(7!==e.version)throw new Error("Unexpected version: "+e.version);var t=e.expressions.list.map(function(e){if("image"===e.type){var t=n.__assign(n.__assign({},e),{opacity:""});e.hasOwnProperty("stringOpacity")?t.opacity=e.stringOpacity:e.hasOwnProperty("opacity")?t.opacity=e.opacity+"":delete t.opacity,e.clickableInfo&&(t.clickableInfo=a(e.clickableInfo)),delete t.stringOpacity;for(var r in e)if("x"===r||"y"===r||"width"===r||"height"===r){var l=e[r];l&&(t[r]=s(l))}return t}if("expression"===e.type){var t=n.__assign(n.__assign({},e),{fillOpacity:"",lineStyle:"SOLID"});if("SINGLE_PIXEL"===e.lineStyle?t.lineWidth="1":e.hasOwnProperty("lineStyle")?t.lineStyle=e.lineStyle:delete t.lineStyle,t.hasOwnProperty("lineWidth")||(t.lineWidth=""),t.hasOwnProperty("lineOpacity")||(t.lineOpacity=""),"string"==typeof e.latex&&(t.latex=s(e.latex)),e.latex&&(t.latex=s(e.latex)),e.hasOwnProperty("stringFillOpacity")?t.fillOpacity=e.stringFillOpacity:e.hasOwnProperty("fillOpacity")?t.fillOpacity=e.fillOpacity+"":delete t.fillOpacity,t.slider&&e.slider&&e.slider.newLoopMode&&(t.slider=i.default(t.slider),t.slider.loopMode=e.slider.newLoopMode,delete t.slider.newLoopMode),t.residualVariable&&(t.residualVariable=o(t.residualVariable)),t.regressionParameters){t.regressionParameters={};for(var u in e.regressionParameters){var d=o(u),p=e.regressionParameters[u];t.regressionParameters[d]=p}}return e.clickableInfo&&(t.clickableInfo=a(e.clickableInfo)),t}return"table"===e.type?c(e):e});return{version:8,randomSeed:e.randomSeed||r.default(),graph:e.graph,expressions:{list:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u}),
define("core/graphing-calc/migrate-state",["require","exports","./migrations/0","./migrations/1","./migrations/2","./migrations/3","./migrations/4","core/graphing-calc/validate-state","./migrations/back-migration","./migrations/5","./migrations/6","./migrations/7","./migrations/8"],function(e,t,n,r,i,o,a,s,c,l,u,d,p){"use strict";function h(e){if(e.version>t.currentVersion)return"undefined"!=typeof console&&console.warn&&console.warn("Loading saved state with version "+e.version+" but last known version is "+t.currentVersion+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),s.validateState(e);if(e.hasOwnProperty("version")&&!m[e.version])return"undefined"!=typeof console&&console.warn&&console.warn("State has invalid version "+e.version+". If a version is present, it should be a non-negative integer less than or equal to "+t.currentVersion+"."),s.validateState(e);for(e.hasOwnProperty("version")||(e=m[0](e));e.version<t.currentVersion;)e=m[e.version+1](e);return s.validateState(e)}function f(e){return c.default(h(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateToPersisted=t.migrateToLatest=t.currentVersion=t.persistedVersion=void 0;var m=[n,r,i,o,a,l.migrateState,u.migrateState,d.default,p.default];t.persistedVersion=7,t.currentVersion=8,t.migrateToLatest=h,t.migrateToPersisted=f}),define("graphing-calc/models/focus",["require","exports","./expression","./list"],function(e,t,n,r){"use strict";function i(e,t,n){o(e,a(e,t,n))}function o(e,t){if(e.focusLocation=t,t&&"settings"!==t.type&&"editable-label"!==t.type&&"add-item-btn"!==t.type&&"add-expression-btn"!==t.type&&"add-table-btn"!==t.type&&"add-folder-btn"!==t.type&&"add-image-btn"!==t.type&&"edit-list-toggle"!==t.type&&"search-expressions"!==t.type){var i=e.getItemModel(t.id);if("expression-menu"===t.type)return void r.setSelected(e.getListModel(),void 0);r.setSelected(e.getListModel(),i),i&&"expression"===i.type&&n.setSliderIsPlaying(i,!1)}}function a(e,t,n){var r=e.getItemModel(t);if(r)switch(r.type){case"expression":return{type:e.isInEditListMode()?"readonly-expression":r.type,id:t};case"folder":case"text":return{type:r.type,id:t};case"table":var i={row:1,column:0},o=!1;return n&&("cell"===n.location?i={row:n.row,column:n.column}:"end"===n?i={row:r.columnModels[0].cells.length,column:0}:"start"===n?i={row:0,column:0}:"container"===n&&(o=!0)),o?{type:"table-container",id:t}:{type:r.type,id:t,location:i};case"image":return{type:r.type,id:t,location:"name"};default:return r}}function s(e){var t=e.getSelectedItem();if(t&&"expression"===t.type)return void i(e,t.id);if(!t||"table"!==t.type||!e.focusLocation){for(var n=e.getFirstFullyVisibleItem(),o=e.getListModel();n&&"expression"!==n.type;)n=r.findNextSelectableItem(o,n.index);if(n)return void i(e,n.id);var a=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()});r.insertItemAtEnd(e.getListModel(),a),i(e,a.id)}}function c(e){var t=e.focusLocation;if(t&&"settings"!==t.type&&"editable-label"!==t.type&&"add-item-btn"!==t.type&&"add-expression-btn"!==t.type&&"add-table-btn"!==t.type&&"add-folder-btn"!==t.type&&"add-image-btn"!==t.type&&"edit-list-toggle"!==t.type&&"search-expressions"!==t.type)return e.getItemModel(t.id)}function l(e,t,n){o(e,{type:"table",id:t,location:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.focusTableCell=t.getFocusedItem=t.addFocusForKeypad=t.computeFocusLocationForItem=t.setFocusLocation=t.moveFocusToItem=void 0,t.moveFocusToItem=i,t.setFocusLocation=o,t.computeFocusLocationForItem=a,t.addFocusForKeypad=s,t.getFocusedItem=c,t.focusTableCell=l}),define("graphing-calc/actions/keyboard",["require","exports","browser","lib/conditional_blur","../models/table","../models/focus","../models/list","../models/abstract-item"],function(e,t,n,r,i,o,a,s){"use strict";function c(e,t,n){var r=e.getItemModel(t);if(r&&"table"===r.type){var a=r,s=i.getSelectedCell(a),c=s?s.row:-1,f=s?s.column:-1,m=a.columnModels,g=m[0].cells.length,y=m.length,v=function(n,r){-1===n?l(e):n>g?u(e):(-1===r?(r=y-1,n--):r===y&&(n++,r=0),o.focusTableCell(e,t,{row:n,column:r}))},b=function(n){g>2&&i.removeRow(a,c-1),o.focusTableCell(e,t,{row:n,column:f})},x=function(n){0===f||y<=2||(i.removeColumn(a,f),o.focusTableCell(e,t,{row:c,column:n}))};switch(n){case"Left":v(c,f-1);break;case"Right":v(c,f+1);break;case"Up":v(c-1,f);break;case"Down":v(c+1,f);break;case"Enter":if(c>=g)return h(e);if(f>0)return v(c+1,f);if(c===g-1){var E=i.getRowAutoFillValues(a,c);i.insertBlankRow(a,c);for(var w=0;w<E.length;w++)i.setCellLatex(a,{row:c+1,column:w},E[w]);return void o.focusTableCell(e,t,{row:c+1,column:f})}i.insertBlankRow(a,c),o.focusTableCell(e,t,{row:c+1,column:f});break;case"Backspace":0===c?0===f?d(e):f===y-1||1===f&&3===y?v(0,f-1):x(f-1):0!==f?v(c,f-1):c===g?v(c-1,f):b(c-1);break;case"Delete":0===c?0===f?p(e):f<y-1&&x(f):c>=g||b(c)}}}function l(e){var t=e.getSelectedItem();t&&(e.inAudioTraceMode()||0!==t.index&&(a.selectPrevItem(e.getListModel()),(t=e.getSelectedItem())&&o.moveFocusToItem(e,t.id,"end")))}function u(e){if(!e.inAudioTraceMode()){if(!a.selectNextItem(e.getListModel())&&!e.isInEditListMode()){var t=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()});a.insertItemAtEnd(e.getListModel(),t),a.setSelected(e.getListModel(),t)}var n=e.getSelectedItem();n&&o.moveFocusToItem(e,n.id,"start")}}function d(e){if(!e.isInEditListMode()){var t=e.getSelectedItem();if(t&&(1!==e.getItemCount()||"expression"!==t.type)){var r="text"===t.type,i=a.getParentFolderModel(t);if(i){var c=e.getNumberOfItemsInFolder(i.id);if(t.index===i.index+c)return void s.setFolderId(t,"")}if(f(e),r&&n.IS_IPAD&&n.IS_IN_IFRAME)return void a.setSelected(e.getListModel(),void 0);t=e.getSelectedItem(),t&&o.moveFocusToItem(e,t.id,"end")}}}function p(e){if(!e.isInEditListMode()){var t=e.getSelectedItem();t&&(1===e.getItemCount()&&"expression"===t.type||(m(e),(t=e.getSelectedItem())&&o.moveFocusToItem(e,t.id,"start")))}}function h(e){if(!e.isInEditListMode()){var t=e.getSelectedItem();if(t){if("text"===t.type&&n.IS_IPAD&&n.IS_IN_IFRAME)return r.default(),void a.setSelected(e.getListModel(),void 0);if(("expression"===t.type||"image"===t.type)&&t.missingVariables.length&&e.areSlidersEnabled())return e.createSlidersForItem(t.id,t.missingVariables.concat(""));var i=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),c=t.index+1;"folder"===t.type&&t.collapsed&&(c+=e.getNumberOfItemsInFolder(t.id)),a.insertItemAtIndex(e.getListModel(),i,c),a.setSelected(e.getListModel(),i),"folder"!==t.type||t.collapsed?"folder"!==t.type&&t.folderId&&s.setFolderId(i,t.folderId):s.setFolderId(i,t.id),t=e.getSelectedItem(),t&&o.moveFocusToItem(e,t.id)}}}function f(e){var t=e.getSelectedItem(),n=e.getListModel();if(t){var r=a.findPrevSelectableItem(n,t.index);if(e._removeExpressionSynchronously(t),!r){var i=a.getFirstSelectableItem(n);i&&(r=i)}a.setSelected(n,r)}}function m(e){var t=e.getSelectedItem(),n=e.getListModel();if(t){var r=a.findNextSelectableItem(n,t.index);if(e._removeExpressionSynchronously(t),!r){var i=a.getLastSelectableItem(n);i&&(r=i)}a.setSelected(n,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.downwardDeleteSelectedExpression=t.upwardDeleteSelectedExpression=t.onEnterPressed=t.onDeletePressed=t.onBackspacePressed=t.onDownPressed=t.onUpPressed=t.navigateTableByKey=void 0,t.navigateTableByKey=c,t.onUpPressed=l,t.onDownPressed=u,t.onBackspacePressed=d,t.onDeletePressed=p,t.onEnterPressed=h,t.upwardDeleteSelectedExpression=f,t.downwardDeleteSelectedExpression=m}),define("main/expression-zoom-helpers",["require","exports","core/lib/deepCopy"],function(e,t,n){"use strict";function r(e){switch(e){case"histogram":case"dotplot":return 12;case"boxplot":return 40}return 1/0}function i(e){return"boxplot"===e||"dotplot"===e||"histogram"==e}function o(e){return"boxplot"===e?3:.5}function a(e,t){if("dotplot"===e.type||"histogram"===e.type){var n=Math.max(1,e.xmax-e.xmin),r=80*n/(e.binWidth?e.binWidth:1),i=.5*(t.screen.width-r)/r;return Math.max(.2,i)}return.5}function s(e){e=n.default(e);return e.xmax<0&&e.xmin<0&&e.xmax/(e.xmin-e.xmax)<1.2&&(e.xmax=0),e.xmax>0&&e.xmin>0&&e.xmin/(e.xmax-e.xmin)<1.2&&(e.xmin=0),e.ymax<0&&e.ymin<0&&e.ymax/(e.ymin-e.ymax)<1.2&&(e.ymax=0),e.ymax>0&&e.ymin>0&&e.ymin/(e.ymax-e.ymin)<1.2&&(e.ymin=0),e}function c(e,t){var n,s,c,l,u=e.type,d=a(e,t),p=o(u);e.xmin===e.xmax&&(e.xmin-=.5,e.xmax+=.5),e.ymin===e.ymax&&(e.ymin-=.5,e.ymax+=.5);var h=e.xmax-e.xmin;n=e.xmin-d*h,s=e.xmax+d*h;var f=e.ymax-e.ymin;if(c=e.ymin-p*f,l=e.ymax+p*f,i(u)){var m=t.screen.height/t.screen.width,g=(s-n)*m;if(g>e.ymax-e.ymin&&g<r(u)*(e.ymax-e.ymin)){var y=.5*(e.ymax+e.ymin);l=y+.5*g,c=y-.5*g}}return{xmin:n,xmax:s,ymin:c,ymax:l}}function l(e,t){var n=u(e,t);if(!n)return!1;var r=t.mapx(n.xmin),i=t.mapx(n.xmax),o=t.mapy(n.ymin),a=t.mapy(n.ymax);return!(Math.abs(r)<=10&&Math.abs(a)<=10&&Math.abs(i-t.screen.width)<=10&&Math.abs(o-t.screen.height)<=10)}function u(e,t){for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0,l=e.length,u=0;u<l;u++){var d=s(e[u]);if(isFinite(d.xmax-d.xmin)&&isFinite(d.ymax-d.ymin)){var p=c(d,t);p.xmin<n&&(n=p.xmin),p.xmax>r&&(r=p.xmax),p.ymin<i&&(i=p.ymin),p.ymax>o&&(o=p.ymax)}else a+=1}if(a!==l)return{xmin:n,xmax:r,ymin:i,ymax:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.getRecommendedViewportForExpression=t.shouldExpressionZoomFit=t.padViewport=t.conditionalExpandViewport=void 0,t.conditionalExpandViewport=s,t.padViewport=c,t.shouldExpressionZoomFit=l,t.getRecommendedViewportForExpression=u}),define("main/layout-model",["require","exports","browser"],function(e,t,n){"use strict";function r(e){switch(e){case"letters":return"capitalLetters";case"noQwertyLetters":return"noQwertyCapitalLetters";case"noQwertyCapitalLetters":return"noQwertyLetters";default:return"letters"}}function i(e){return{keypadMinimized:!n.IS_TOUCH_DEVICE,keypadLayout:"mainNumbers",keypadFunctionsTab:"trig",keypadFunctionsOpen:!1,graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!e.expressions,inEditListMode:!1,isFileDraggedOver:!1,expressionsHiddenTime:void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLayoutModel=t.getShiftedLayoutForCurrentLayout=void 0,t.getShiftedLayoutForCurrentLayout=r,t.defaultLayoutModel=i}),define("main/settings-view-model",["require","exports","tslib","core/lib/label"],function(e,t,n,r){"use strict";function i(e,t){var n=r.value(e,t),i="";if(n.mantissa)i=n.mantissa.split("×").join("\\cdot")+"^{"+n.superscript+"}";else{var o=n.string.split("/");i=2===o.length?"-"===o[0][0]?"-\\frac{"+o[0].slice(1)+"}{"+o[1]+"}":"\\frac{"+o[0]+"}{"+o[1]+"}":n.string}return i=i.replace(/π/,"\\pi")}function o(e){return{xmin:i(e.xmin,e.xmax-e.xmin),xmax:i(e.xmax,e.xmax-e.xmin),ymin:i(e.ymin,e.ymax-e.ymin),ymax:i(e.ymax,e.ymax-e.ymin)}}function a(e,t){return 0===e?"":i(e,t)}function s(e,t,r){var i=o(e);return n.__assign(n.__assign({},i),{xstep:a(t,e.xmax-e.xmin),ystep:a(r,e.ymax-e.ymin)})}function c(){return{limitLatex:{xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:""}}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSettingsViewModel=t.limitLatex=t.formatStep=t.formatViewport=t.formatLatex=void 0,t.formatLatex=i,t.formatViewport=o,t.formatStep=a,t.limitLatex=s,t.defaultSettingsViewModel=c}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("abraham",[],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=26)}([function(e,t,n){function r(e,t){var n=i.map(e,t);return e.warnings&&(n.warnings=e.warnings),n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(22);t.map=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&h&&(m=!1,h.length?f=h.concat(f):g=-1,f.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var h,f=[],m=!1,g=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new c(e,t)),1!==f.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){function r(e){for(var t=!1,n=0,r="",i="",o=0,a=e;o<a.length;o++){var s=a[o];if("terminal"!==s.type||!/[A-Za-z]/.test(s.value))break;r+=s.value,n++}return i=r.replace(l,"\\operatorname{$1}"),t=n>0&&i!==r,{modified:t,terminalCount:n,value:i}}function i(e){return-1!==d.indexOf(e.toLowerCase())}function o(e){if(!Array.isArray(e))throw new Error("Operator names must be an array, got "+typeof e);for(var t=0,n=e;t<n.length;t++){var r=n[t];if("string"!=typeof r)throw new Error("Operator names must be strings, found "+typeof r)}d=e,s()}function a(){d=u,l=p}function s(){l=c(d)}function c(e){var t=e.sort(function(e,t){return t.length-e.length||t.localeCompare(e)}).join("|");return new RegExp("("+t+")","g")}Object.defineProperty(t,"__esModule",{value:!0});var l,u=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","binomialdist","boxplot","cdf","ceil","corr","cov","csch","distance","dotplot","erf","floor","gcf","histogram","IndependentTTest","iTTest","ittest","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","normaldist","nPr","pdf","poissondist","polygon","quantile","quartile","random","round","sech","sign","signum","stdDev","stddev","stdDevP","stddevp","stdev","stdevp","tdist","total","TScore","TScore","Tscore","tscore","tscore","TTest","ttest","var","variance","varp"],d=u,p=c(u);t.getAutoOperator=r,t.containsValue=i,t.setOperatorNames=o,t.resetOperatorNames=a},function(e,t,n){function r(e){if(!f.isSixDotCells(e))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}function i(e,n){return r(e),d.default(t.UnicodeBraille.toBrailleAscii(e),n)}function o(e,n){return n&&n.operatorNames?c.setOperatorNames(n.operatorNames):c.resetOperatorNames(),p.map(l.default(e),t.UnicodeBraille.coerceToSixDotCells)}function a(e,n){return r(e),h.default(t.UnicodeBraille.toBrailleAscii(e),n)}function s(e,n){return n&&n.operatorNames?c.setOperatorNames(n.operatorNames):c.resetOperatorNames(),p.map(u.default(e),t.UnicodeBraille.coerceToSixDotCells)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(2),l=n(14),u=n(15),d=n(16),p=n(0),h=n(23),f=n(25);t.nemethToLatex=i,t.latexToNemeth=o,t.uebToLatex=a,t.latexToUeb=s,t.UnicodeBraille={coerceToSixDotCells:f.coerceToSixDotCells,toBrailleAscii:f.toBrailleAscii,toExpandedBrailleAscii:f.toExpandedBrailleAscii},t.version="1.0.3"},function(e,t){},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}for(var l=[],c=s;c<i.length;c++)l.push("..");return l=l.concat(o.slice(s)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(1))},function(e,t,n){function r(e){if(!e.hash)throw e;return{_diagnostic:{expected:e.hash.expected,message:e.message,text:e.hash.text,token:e.hash.token},location:e.hash.loc}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){function r(e){return{type:"terminal",value:e}}function i(e){return{type:"command",value:e}}function o(e){return{type:"greek",value:e}}function a(e){return{subscript:e._,superscript:e["^"],type:"level"}}function s(e,t){var n=[],r=e.match(/'+/);if(null!==r)for(var o=r[0].length,a=0;a<o;a++)n.push(i("\\prime"));return d(n,t)}function c(e,t){return{type:"fraction",numerator:e,denominator:t}}function l(e,t){return{name:e,type:"typeform",value:t}}function u(e,t){return{type:"radical",index:t,radicand:e}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=r,t.command=i,t.greek=o,t.level=a,t.processPrimes=s,t.fraction=c,t.typeform=l,t.radical=u,t.group=d},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e,r){var i=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,11],r=[1,12],i=[1,13],o=[1,69],a=[1,70],s=[1,68],c=[1,38],l=[1,39],u=[1,58],d=[1,59],p=[1,60],h=[1,61],f=[1,62],m=[1,63],g=[1,64],y=[1,65],v=[1,66],b=[1,67],x=[1,40],E=[1,34],w=[1,35],_=[1,36],S=[1,37],M=[1,41],k=[1,42],C=[1,43],I=[1,44],T=[1,45],L=[1,46],D=[1,47],P=[1,48],A=[1,49],O=[1,50],F=[1,51],N=[1,52],q=[1,17],R=[1,53],B=[1,54],j=[1,55],V=[1,56],U=[1,57],G=[5,12,13,14,18,24,25],z=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,81],H=[1,74],W=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,81],K=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],Y={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,primes:10,OPEN_MODEXP:11,MODEXP_UNDER:12,MODEXP_OVER:13,CLOSE_MODEXP:14,RADICAL_INDEX:15,index_group:16,OPEN_RADICAL:17,CLOSE_RADICAL:18,level:19,LEVEL:20,BASELINE:21,frac:22,OPEN_FRAC:23,SLASH:24,CLOSE_FRAC:25,subscript_head:26,number:27,atom:28,command:29,greek:30,letter:31,comma:32,period:33,space:34,operation:35,comparison:36,level_with_comparison:37,ellipsis:38,colon:39,infinity:40,integral:41,factorial:42,ampersand:43,question_mark:44,bracket:45,",":46,".":47,"[":48,"{":49,"(":50,"]":51,"}":52,")":53,LANGLE:54,RANGLE:55,PIPE:56,DOUBLE_PIPE:57,SPACE:58,COMMAND:59,GREEK:60,LETTER:61,CAPITAL_LETTER:62,"+":63,"-":64,CDOT:65,TIMES:66,"*":67,"/":68,DIV:69,PERCENT:70,COMPARISON:71,LEVEL_WITH_COMPARISON:72,ELLIPSIS:73,COLON:74,NUMBER:75,INFINITY:76,INTEGRAL:77,FACTORIAL:78,"&":79,PRIMES:80,"?":81,unknown:82,UNKNOWN:83,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPEN_MODEXP",12:"MODEXP_UNDER",13:"MODEXP_OVER",14:"CLOSE_MODEXP",15:"RADICAL_INDEX",17:"OPEN_RADICAL",18:"CLOSE_RADICAL",20:"LEVEL",21:"BASELINE",23:"OPEN_FRAC",24:"SLASH",25:"CLOSE_FRAC",46:",",47:".",48:"[",49:"{",50:"(",51:"]",52:"}",53:")",54:"LANGLE",55:"RANGLE",56:"PIPE",57:"DOUBLE_PIPE",58:"SPACE",59:"COMMAND",60:"GREEK",61:"LETTER",62:"CAPITAL_LETTER",63:"+",64:"-",65:"CDOT",66:"TIMES",67:"*",68:"/",69:"DIV",70:"PERCENT",71:"COMPARISON",72:"LEVEL_WITH_COMPARISON",73:"ELLIPSIS",74:"COLON",75:"NUMBER",76:"INFINITY",77:"INTEGRAL",78:"FACTORIAL",79:"&",80:"PRIMES",81:"?",83:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,2],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,4],[8,3],[8,4],[8,4],[8,4],[8,4],[8,3],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[19,1],[19,1],[22,5],[22,4],[22,4],[22,3],[16,2],[16,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[7,1],[7,1],[7,1],[26,1],[26,1],[26,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[32,1],[33,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[34,1],[29,1],[30,1],[31,1],[31,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[37,1],[38,1],[39,1],[27,1],[40,1],[41,1],[42,1],[43,1],[10,1],[44,1],[82,1]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:return r.group();case 3:case 37:case 41:case 43:case 44:this.$=r.group(o[s-1],o[s]);break;case 4:case 38:this.$=r.group(o[s]);break;case 7:this.$=r.group(o[s-1],o[s]);break;case 9:this.$=r.modified_expression(o[s-5],o[s-3],o[s-1]);break;case 10:this.$=r.modified_expression(o[s-4],o[s-2]);break;case 11:this.$=r.modified_expression(o[s-3],o[s-1]);break;case 12:this.$=r.modified_expression(o[s-4],r.group(),o[s-1]);break;case 13:this.$=r.modified_expression(o[s-3],r.group(),o[s-1]);break;case 14:this.$=r.modified_expression(o[s-3],r.group(),r.group());break;case 15:case 16:this.$=r.modified_expression(o[s-2],r.group());break;case 17:this.$=r.modified_expression(o[s-1]);break;case 18:case 19:case 22:case 23:case 24:this.$=r.modified_expression(r.group());break;case 20:case 21:r.warnOrError("Multi-level modified expressions are not supported."),this.$=r.modified_expression(r.group());break;case 25:this.$=r.radical(o[s-1],o[s-3]);break;case 26:this.$=r.radical(o[s-1],r.group());break;case 27:this.$=r.radical(r.group(),o[s-2]);break;case 28:this.$=r.radical(r.group(),r.group());break;case 29:this.$=r.radical(o[s-1]);break;case 30:this.$=r.radical(r.group());break;case 31:this.$=r.level(o[s]);break;case 32:this.$=r.baseline();break;case 33:this.$=r.fraction(o[s-3],o[s-1]);break;case 34:this.$=r.fraction(o[s-2],r.group());break;case 35:this.$=r.fraction(r.group(),o[s-1]);break;case 36:this.$=r.fraction(r.group(),r.group());break;case 39:this.$=r.group(r.simple_subscript(o[s-2],o[s]),o[s-1]);break;case 40:this.$=r.simple_subscript(o[s-1],o[s]);break;case 42:r.warnOrError("Illegal use of Nemeth primes"),this.$=r.group(r.simple_subscript(o[s-2],o[s-1]),o[s]);break;case 67:this.$=r.terminal(",");break;case 68:this.$=r.terminal(".");break;case 69:this.$=r.terminal("[");break;case 70:this.$=r.terminal("\\{");break;case 71:this.$=r.terminal("(");break;case 72:this.$=r.terminal("]");break;case 73:this.$=r.terminal("\\}");break;case 74:this.$=r.terminal(")");break;case 75:this.$=r.terminal("\\langle ");break;case 76:this.$=r.terminal("\\rangle ");break;case 77:this.$=r.terminal("|");break;case 78:this.$=r.terminal("\\|");break;case 79:this.$=r.terminal(" ");break;case 80:this.$=r.command(o[s].toLowerCase());break;case 81:this.$=r.terminal(r.greek(o[s]));break;case 82:this.$=r.terminal(o[s].toLowerCase());break;case 83:this.$=r.terminal(o[s].toUpperCase());break;case 84:this.$=r.terminal("+");break;case 85:this.$=r.terminal("-");break;case 86:this.$=r.terminal("\\cdot ");break;case 87:this.$=r.terminal("\\times ");break;case 88:this.$=r.terminal("*");break;case 89:this.$=r.terminal("/");break;case 90:this.$=r.terminal("\\div ");break;case 91:this.$=r.terminal("\\%");break;case 92:this.$=r.comparison(o[s].trim());break;case 93:this.$=r.level_with_comparison(o[s].trim());break;case 94:this.$=r.terminal("\\ldots ");break;case 95:this.$=r.terminal(":");break;case 96:this.$=r.terminal(o[s]);break;case 97:this.$=r.terminal("\\infty ");break;case 98:this.$=r.terminal("\\int ");break;case 99:this.$=r.terminal("!");break;case 100:this.$=r.terminal("\\&");break;case 101:this.$=r.primes(o[s]);break;case 102:this.$=r.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,11:n,15:r,17:i,19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{1:[3]},{5:[1,71]},{1:[2,2]},t(G,[2,4],{6:4,7:5,8:6,9:7,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,22:32,19:33,4:72,11:n,15:r,17:i,20:o,21:a,23:s,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U}),t(z,[2,5]),t(z,[2,6]),t(z,[2,8],{10:73,80:H}),t(W,[2,45],{10:75,27:76,75:q,80:H}),t(z,[2,46],{10:77,80:H}),t(z,[2,47],{10:78,80:H}),{4:79,6:4,7:5,8:6,9:7,11:n,12:[1,81],13:[1,80],14:[1,82],15:r,17:i,19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{7:85,16:83,17:[1,84],19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{4:86,6:4,7:5,8:6,9:7,11:n,15:r,17:i,18:[1,87],19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},t(K,[2,48]),t(K,[2,49]),t(K,[2,50]),t(K,[2,96]),t(K,[2,51]),t(K,[2,52]),t(K,[2,53]),t(K,[2,54]),t(K,[2,55]),t(K,[2,56]),t(K,[2,57]),t(K,[2,58]),t(K,[2,59]),t(K,[2,60]),t(K,[2,61]),t(K,[2,62]),t(K,[2,63]),t(K,[2,64]),t(K,[2,65]),t(K,[2,66]),t(K,[2,80]),t(K,[2,81]),t(K,[2,82]),t(K,[2,83]),t(K,[2,67]),t(K,[2,68]),t(K,[2,79]),t(K,[2,84]),t(K,[2,85]),t(K,[2,86]),t(K,[2,87]),t(K,[2,88]),t(K,[2,89]),t(K,[2,90]),t(K,[2,91]),t(K,[2,92]),t(K,[2,93]),t(K,[2,94]),t(K,[2,95]),t(K,[2,97]),t(K,[2,98]),t(K,[2,99]),t(K,[2,100]),t(K,[2,102]),t(K,[2,69]),t(K,[2,70]),t(K,[2,71]),t(K,[2,72]),t(K,[2,73]),t(K,[2,74]),t(K,[2,75]),t(K,[2,76]),t(K,[2,77]),t(K,[2,78]),{4:88,6:4,7:5,8:6,9:7,11:n,15:r,17:i,19:33,20:o,21:a,22:32,23:s,24:[1,89],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},t(K,[2,31]),t(K,[2,32]),{1:[2,1]},t(G,[2,3]),t(z,[2,7]),t(z,[2,101]),t(W,[2,41],{27:90,75:q}),t(z,[2,40],{10:91,80:H}),t(z,[2,43]),t(z,[2,44]),{12:[1,92],13:[1,93],14:[1,94]},{12:[1,95],13:[1,96],14:[1,97]},{12:[1,99],13:[1,98],14:[1,100]},t(z,[2,24]),{17:[1,101]},{4:102,6:4,7:5,8:6,9:7,11:n,15:r,17:i,18:[1,103],19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{7:85,16:104,17:[2,38],19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{18:[1,105]},t(K,[2,30]),{24:[1,106]},{4:107,6:4,7:5,8:6,9:7,11:n,15:r,17:i,19:33,20:o,21:a,22:32,23:s,25:[1,108],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},t(z,[2,39]),t(z,[2,42]),{4:109,6:4,7:5,8:6,9:7,11:n,13:[1,110],14:[1,111],15:r,17:i,19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{4:112,6:4,7:5,8:6,9:7,11:n,14:[1,113],15:r,17:i,19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},t(z,[2,17]),{14:[1,114]},{14:[1,115]},t(z,[2,22]),{14:[1,116]},{14:[1,117]},t(z,[2,23]),{4:118,6:4,7:5,8:6,9:7,11:n,15:r,17:i,18:[1,119],19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{18:[1,120]},t(K,[2,28]),{17:[2,37]},t(K,[2,29]),{4:121,6:4,7:5,8:6,9:7,11:n,15:r,17:i,19:33,20:o,21:a,22:32,23:s,25:[1,122],26:8,27:9,28:10,29:14,
30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},{25:[1,123]},t(K,[2,36]),{13:[1,124],14:[1,125]},{4:126,6:4,7:5,8:6,9:7,11:n,14:[1,127],15:r,17:i,19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},t(z,[2,16]),{14:[1,128]},t(z,[2,15]),t(z,[2,18]),t(z,[2,20]),t(z,[2,19]),t(z,[2,21]),{18:[1,129]},t(K,[2,27]),t(K,[2,26]),{25:[1,130]},t(K,[2,34]),t(K,[2,35]),{4:131,6:4,7:5,8:6,9:7,11:n,14:[1,132],15:r,17:i,19:33,20:o,21:a,22:32,23:s,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:d,50:p,51:h,52:f,53:m,54:g,55:y,56:v,57:b,58:x,59:E,60:w,61:_,62:S,63:M,64:k,65:C,66:I,67:T,68:L,69:D,70:P,71:A,72:O,73:F,74:N,75:q,76:R,77:B,78:j,79:V,81:U},t(z,[2,11]),{14:[1,133]},t(z,[2,14]),t(z,[2,13]),t(K,[2,25]),t(K,[2,33]),{14:[1,134]},t(z,[2,10]),t(z,[2,12]),t(z,[2,9])],defaultActions:{3:[2,2],71:[2,1],104:[2,37]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,c=0,l=0,u=i.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(p.yy[h]=this.yy[h]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var f=d.yylloc;i.push(f);var m=d.options&&d.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,y,v,b,x,E,w,_,S,M=function(){var e;return e=d.lex()||1,"number"!=typeof e&&(e=t.symbols_[e]||e),e},k={};;){if(v=n[n.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null!==g&&void 0!==g||(g=M()),b=o[v]&&o[v][g]),void 0===b||!b.length||!b[0]){var C="";S=[];for(E in o[v])this.terminals_[E]&&E>2&&S.push("'"+this.terminals_[E]+"'");C=d.showPosition?"Parse error on line "+(s+1)+":\n"+d.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[g]||g,line:d.yylineno,loc:f,expected:S})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g);switch(b[0]){case 1:n.push(g),r.push(d.yytext),i.push(d.yylloc),n.push(b[1]),g=null,y?(g=y,y=null):(c=d.yyleng,a=d.yytext,s=d.yylineno,f=d.yylloc,l>0&&l--);break;case 2:if(w=this.productions_[b[1]][1],k.$=r[r.length-w],k._$={first_line:i[i.length-(w||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(w||1)].first_column,last_column:i[i.length-1].last_column},m&&(k._$.range=[i[i.length-(w||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(k,[a,c,s,p.yy,b[1],r,i].concat(u))))return x;w&&(n=n.slice(0,-1*w*2),r=r.slice(0,-1*w),i=i.slice(0,-1*w)),n.push(this.productions_[b[1]][0]),r.push(k.$),i.push(k._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},X=function(){return{EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:return this.begin("modexp"),11;case 1:return 21;case 2:return this.begin("modexp"),11;case 3:return 12;case 4:return 13;case 5:return this.popState(),14;case 6:return 63;case 7:return 64;case 8:return 65;case 9:return 66;case 10:return 67;case 11:return 68;case 12:return 69;case 13:return 54;case 14:return 48;case 15:return 49;case 16:return 50;case 17:return 55;case 18:return 51;case 19:return 52;case 20:return 53;case 21:return 57;case 22:return 56;case 23:return 74;case 24:return 70;case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:return 72;case 34:return 71;case 35:case 36:return 72;case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:return 71;case 47:return 73;case 48:return 20;case 49:return 47;case 50:return 21;case 51:return 80;case 52:return 60;case 53:return 15;case 54:return this.begin("radical"),17;case 55:return this.popState(),18;case 56:return 18;case 57:return 77;case 58:return 79;case 59:return 78;case 60:case 61:return 59;case 62:return t.yytext=this.matches[1],75;case 63:return 23;case 64:return 24;case 65:return 25;case 66:return t.yytext=this.matches[1],62;case 67:return 61;case 68:return 76;case 69:return 81;case 70:return 46;case 71:return 47;case 72:return 58;case 73:return 5;case 74:return 83}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][\/])/,/^(?:[.][\/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[\/][.]K[ ])/,/^(?:[ ][\^;]+[@][:][@][:][ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[\/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[\/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][\/][.]K[ ])/,/^(?:[ ][@][:][@][:][ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[@][:])/,/^(?:[ ][\/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]['][']['][ ])/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[\/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0}}}}();return Y.lexer=X,e.prototype=Y,Y.Parser=e,new e}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(r){r[1]||(console.log("Usage: "+r[0]+" FILE"),e.exit(1));var i=n(4).readFileSync(n(5).normalize(r[1]),"utf8");return t.parser.parse(i)},void 0!==r&&n.c[n.s]===r&&t.main(e.argv.slice(1))}).call(t,n(1),n(8)(e))},function(e,t,n){(function(e,r){var i=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,15],r=[1,16],i=[1,17],o=[1,36],a=[1,18],s=[1,37],c=[1,38],l=[1,14],u=[1,46],d=[1,47],p=[1,39],h=[1,40],f=[1,41],m=[1,56],g=[1,42],y=[1,43],v=[1,44],b=[1,45],x=[1,54],E=[1,55],w=[1,57],_=[1,58],S=[1,59],M=[1,60],k=[1,61],C=[1,62],I=[1,63],T=[1,64],L=[1,65],D=[1,66],P=[1,67],A=[1,68],O=[1,69],F=[1,70],N=[1,71],q=[1,72],R=[1,73],B=[1,74],j=[1,75],V=[1,48],U=[1,49],G=[1,50],z=[1,51],H=[1,52],W=[1,76],K=[1,53],Y=[5,14,18,19,29,52,53,54],X=[5,10,13,14,15,18,19,29,52,53,54],$=[5,10,13,14,15,17,18,19,21,23,24,28,29,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],Q=[1,84],Z=[1,85],J=[1,86],ee=[10,13,15,17,21,23,24,28,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],te={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,atom:25,lbracket:26,rbracket:27,OPEN_GROUP:28,CLOSE_GROUP:29,command:30,greek:31,letter:32,comma:33,period:34,colon:35,infinity:36,integral:37,factorial:38,ampersand:39,question_mark:40,bracket:41,space:42,operation:43,comparison:44,ellipsis:45,primes:46,",":47,".":48,"[":49,"{":50,"(":51,"]":52,"}":53,")":54,SPACE:55,COMMAND:56,GREEK:57,CAPITAL_LETTER:58,LETTER:59,PIPE:60,DOUBLE_PIPE:61,"+":62,"-":63,CDOT:64,TIMES:65,"*":66,DIV:67,SLASH:68,PERCENT:69,"=":70,NEQ:71,"<":72,">":73,LEQ:74,APPROX:75,GEQ:76,TILDE:77,PARALLEL:78,PERPENDICULAR:79,ELLIPSIS:80,COLON:81,INFINITY:82,INTEGRAL:83,FACTORIAL:84,"&":85,PRIMES:86,"?":87,unknown:88,UNKNOWN:89,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",28:"OPEN_GROUP",29:"CLOSE_GROUP",47:",",48:".",49:"[",50:"{",51:"(",52:"]",53:"}",54:")",55:"SPACE",56:"COMMAND",57:"GREEK",58:"CAPITAL_LETTER",59:"LETTER",60:"PIPE",61:"DOUBLE_PIPE",62:"+",63:"-",64:"CDOT",65:"TIMES",66:"*",67:"DIV",68:"SLASH",69:"PERCENT",70:"=",71:"NEQ",72:"<",73:">",74:"LEQ",75:"APPROX",76:"GEQ",77:"TILDE",78:"PARALLEL",79:"PERPENDICULAR",80:"ELLIPSIS",81:"COLON",82:"INFINITY",83:"INTEGRAL",84:"FACTORIAL",85:"&",86:"PRIMES",87:"?",89:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[34,1],[26,1],[26,1],[26,1],[27,1],[27,1],[27,1],[42,1],[30,1],[31,1],[32,1],[32,1],[41,1],[41,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[45,1],[35,1],[36,1],[37,1],[38,1],[39,1],[46,1],[40,1],[88,1]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:return r.group();case 3:case 35:this.$=r.group(o[s-2],o[s-1],o[s]);break;case 4:case 6:case 31:case 32:case 36:this.$=r.group(o[s-1],o[s]);break;case 5:case 7:case 33:case 34:this.$=r.group(o[s]);break;case 10:case 11:case 12:this.$=r.basic_level(o[s-1],r.group(o[s]));break;case 13:case 17:this.$=r.radical(o[s-1],r.group(o[s-2]));break;case 14:case 15:this.$=r.radical(r.group(),r.group(o[s-1]));break;case 16:this.$=r.radical(r.group(),r.group());break;case 18:this.$=r.radical(o[s-1]);break;case 19:this.$=r.radical(r.group());break;case 20:this.$=r.fraction(o[s-3],o[s-1]);break;case 21:this.$=r.fraction(o[s-2],r.group());break;case 22:this.$=r.fraction(r.group(),o[s-1]);break;case 23:case 24:this.$=r.fraction(r.group(),r.group());break;case 25:this.$=r.fraction(r.group(r.terminal(r.to_number(o[s-1]))),r.group(r.terminal(r.to_number(o[s]))));break;case 26:this.$=r.fraction(r.group(r.terminal(r.to_number(o[s]))),r.group());break;case 27:this.$=r.fraction(r.group(),r.group(r.terminal(r.to_number(o[$01]))));break;case 37:this.$=r.group(o[s-1]);break;case 38:this.$=r.group();break;case 39:this.$=r.terminal(r.to_number(o[s]));break;case 57:this.$=r.terminal(",");break;case 58:this.$=r.terminal(".");break;case 59:this.$=r.terminal("[");break;case 60:this.$=r.terminal("\\{");break;case 61:this.$=r.terminal("(");break;case 62:this.$=r.terminal("]");break;case 63:this.$=r.terminal("\\}");break;case 64:this.$=r.terminal(")");break;case 65:this.$=r.terminal(" ");break;case 66:this.$=r.command("\\"+o[s].trim().toLowerCase());break;case 67:this.$=r.terminal(r.greek(o[s]));break;case 68:this.$=r.terminal(o[s].toUpperCase());break;case 69:this.$=r.terminal(o[s].toLowerCase());break;case 70:this.$=r.terminal("|");break;case 71:this.$=r.terminal("\\|");break;case 72:this.$=r.terminal("+");break;case 73:this.$=r.terminal("-");break;case 74:this.$=r.terminal("\\cdot ");break;case 75:this.$=r.terminal("\\times ");break;case 76:this.$=r.terminal("*");break;case 77:this.$=r.terminal("\\div ");break;case 78:this.$=r.terminal("/");break;case 79:this.$=r.terminal("\\%");break;case 80:this.$=r.terminal("=");break;case 81:this.$=r.terminal("\\neq ");break;case 82:this.$=r.terminal("<");break;case 83:this.$=r.terminal(">");break;case 84:this.$=r.terminal("\\leq ");break;case 85:this.$=r.terminal("\\approx ");break;case 86:this.$=r.terminal("\\geq ");break;case 87:this.$=r.terminal("\\sim ");break;case 88:this.$=r.terminal("\\parallel ");break;case 89:this.$=r.terminal("\\perp ");break;case 90:this.$=r.terminal("\\ldots ");break;case 91:this.$=r.terminal(":");break;case 92:this.$=r.terminal("\\infty ");break;case 93:this.$=r.terminal("\\int ");break;case 94:this.$=r.terminal("!");break;case 95:this.$=r.terminal("\\&");break;case 96:this.$=r.primes(o[s]);break;case 97:this.$=r.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},{1:[3]},{5:[1,77]},{1:[2,2]},t(Y,[2,5],{8:8,9:9,7:78,10:n,13:r,15:i}),t(Y,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:79,10:n,13:r,15:i,17:o,21:a,23:s,24:c,28:l,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K}),t(X,[2,33],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:80,17:o,21:a,23:s,24:c,28:l,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K}),t(X,[2,34],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:81,17:o,21:a,23:s,24:c,28:l,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K}),t($,[2,8]),t($,[2,9]),t($,[2,28]),t($,[2,29]),t($,[2,30]),{4:82,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,27:83,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,52:Q,53:Z,54:J,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},{4:87,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,28:l,29:[1,88],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},{9:91,11:89,12:90,13:r,15:i,16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},{11:92,12:93,14:[1,94],16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},{4:95,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,14:[1,96],15:i,16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},t($,[2,39],{22:[1,97]}),t($,[2,40]),t($,[2,41]),t($,[2,42]),t($,[2,43]),t($,[2,44]),t($,[2,45]),t($,[2,46]),t($,[2,47]),t($,[2,48]),t($,[2,49]),t($,[2,50]),t($,[2,51]),t($,[2,52]),t($,[2,53]),t($,[2,54]),t($,[2,55]),t($,[2,56]),{4:98,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,18:[1,99],19:[1,100],20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},t($,[2,26]),t($,[2,27]),t(ee,[2,59]),t(ee,[2,60]),t(ee,[2,61]),t($,[2,66]),t($,[2,67]),t($,[2,68]),t($,[2,69]),t($,[2,57]),t($,[2,58]),t($,[2,91]),t($,[2,92]),t($,[2,93]),t($,[2,94]),t($,[2,95]),t($,[2,97]),t($,[2,70]),t($,[2,71]),t($,[2,65]),t($,[2,72]),t($,[2,73]),t($,[2,74]),t($,[2,75]),t($,[2,76]),t($,[2,77]),t($,[2,78]),t($,[2,79]),t($,[2,80]),t($,[2,81]),t($,[2,82]),t($,[2,83]),t($,[2,84]),t($,[2,85]),t($,[2,86]),t($,[2,87]),t($,[2,88]),t($,[2,89]),t($,[2,90]),t($,[2,96]),{1:[2,1]},t(Y,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:101,10:n,13:r,15:i,17:o,21:a,23:s,24:c,28:l,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K}),t(Y,[2,6]),t(X,[2,31]),t(X,[2,32]),{27:102,52:Q,53:Z,54:J},t($,[2,36]),t($,[2,62]),t($,[2,63]),t($,[2,64]),{29:[1,103]},t($,[2,38]),t($,[2,10]),t($,[2,11]),t($,[2,12]),{4:104,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,14:[1,105],15:i,16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},{4:107,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,14:[1,106],15:i,16:11,17:o,20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},t($,[2,16]),{14:[1,108]},t($,[2,19]),t($,[2,25]),{18:[1,109]},{4:110,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,19:[1,111],20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},t($,[2,24]),t(Y,[2,3]),t($,[2,35]),t($,[2,37]),{14:[1,112]},t($,[2,15]),t($,[2,14]),{14:[1,113]},t($,[2,18]),{4:114,6:4,7:5,8:8,9:9,10:n,11:6,12:7,13:r,15:i,16:11,17:o,19:[1,115],20:12,21:a,23:s,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:d,49:p,50:h,51:f,55:m,56:g,57:y,58:v,59:b,60:x,61:E,62:w,63:_,64:S,65:M,66:k,67:C,68:I,69:T,70:L,71:D,72:P,73:A,74:O,75:F,76:N,77:q,78:R,79:B,80:j,81:V,82:U,83:G,84:z,85:H,86:W,87:K},{19:[1,116]},t($,[2,23]),t($,[2,13]),t($,[2,17]),{19:[1,117]},t($,[2,21]),t($,[2,22]),t($,[2,20])],defaultActions:{3:[2,2],77:[2,1]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,c=0,l=0,u=i.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(p.yy[h]=this.yy[h]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var f=d.yylloc;i.push(f);var m=d.options&&d.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,y,v,b,x,E,w,_,S,M=function(){var e;return e=d.lex()||1,"number"!=typeof e&&(e=t.symbols_[e]||e),e},k={};;){if(v=n[n.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null!==g&&void 0!==g||(g=M()),b=o[v]&&o[v][g]),void 0===b||!b.length||!b[0]){var C="";S=[];for(E in o[v])this.terminals_[E]&&E>2&&S.push("'"+this.terminals_[E]+"'");C=d.showPosition?"Parse error on line "+(s+1)+":\n"+d.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[g]||g,line:d.yylineno,loc:f,expected:S})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g);switch(b[0]){case 1:n.push(g),r.push(d.yytext),i.push(d.yylloc),n.push(b[1]),g=null,y?(g=y,y=null):(c=d.yyleng,a=d.yytext,s=d.yylineno,f=d.yylloc,l>0&&l--);break;case 2:if(w=this.productions_[b[1]][1],k.$=r[r.length-w],k._$={first_line:i[i.length-(w||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(w||1)].first_column,last_column:i[i.length-1].last_column},m&&(k._$.range=[i[i.length-(w||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(k,[a,c,s,p.yy,b[1],r,i].concat(u))))return x;w&&(n=n.slice(0,-1*w*2),r=r.slice(0,-1*w),i=i.slice(0,-1*w)),n.push(this.productions_[b[1]][0]),r.push(k.$),i.push(k._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},ne=function(){return{EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}
return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:return void this.begin("captext");case 1:return 58;case 2:return this.popState(),58;case 3:return 62;case 4:return 63;case 5:return 64;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 49;case 10:return 50;case 11:return 51;case 12:return 52;case 13:return 53;case 14:return 54;case 15:return 71;case 16:return 74;case 17:return 75;case 18:return 76;case 19:return 70;case 20:return 72;case 21:return 73;case 22:return 77;case 23:return 69;case 24:return 80;case 25:return 13;case 26:return 15;case 27:return 14;case 28:return 10;case 29:return 28;case 30:return 29;case 31:return 83;case 32:return 84;case 33:return 85;case 34:return 17;case 35:return 18;case 36:return 19;case 37:return 78;case 38:return 79;case 39:return 82;case 40:return t.yytext=this.matches[1],21;case 41:return t.yytext=this.matches[1],22;case 42:return t.yytext=this.matches[1],24;case 43:return 68;case 44:return 47;case 45:return 48;case 46:return 86;case 47:return 61;case 48:return 60;case 49:return 81;case 50:case 51:return 56;case 52:return 57;case 53:return t.yytext=this.matches[1],58;case 54:return 59;case 55:return;case 56:return 87;case 57:return;case 58:return 55;case 59:return 5;case 60:return 89}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][\/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[\^][9])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9])/,/^(?:[.][0])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+(?=.))/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][\/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[\/]([A-J4]+))/,/^(?:[#][\/]([A-J4]+))/,/^(?:[_]?[\/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0}}}}();return te.lexer=ne,e.prototype=te,te.Parser=e,new e}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(r){r[1]||(console.log("Usage: "+r[0]+" FILE"),e.exit(1));var i=n(4).readFileSync(n(5).normalize(r[1]),"utf8");return t.parser.parse(i)},void 0!==r&&n.c[n.s]===r&&t.main(e.argv.slice(1))}).call(t,n(1),n(8)(e))},function(e,t,n){function r(e){for(var t=[],n=0;n<e.length;n++){var d=e[n];switch(d.type){case"command":var p=d.value.slice(1).trim();l.hasOwnProperty(d.value)?t.push(s.command(l[d.value])):a.containsValue(p)?t.push(s.typeform("operator_name",i(p))):u[d.value]||t.push(d);break;case"level":var h={subscript:d.subscript&&d.subscript.length>0?r(d.subscript):void 0,superscript:d.superscript&&d.superscript.length>0?r(d.superscript):void 0,type:d.type};(h.subscript||h.superscript)&&t.push(h);break;case"fraction":t.push({denominator:r(d.denominator),numerator:r(d.numerator),type:d.type});break;case"radical":t.push({index:d.index?r(d.index):void 0,radicand:r(d.radicand),type:d.type});break;case"terminal":o(e.slice(n))?(t.push({type:"command",value:"\\ldots"}),n+=2):t.push({type:d.type,value:c.hasOwnProperty(d.value)?c[d.value]:d.value});break;case"typeform":t.push(d);break;case"greek":t.push({type:d.type,value:c.hasOwnProperty(d.value)?c[d.value]:d.value});break;default:throw new Error("Unexpected item:\n"+JSON.stringify({group:e,item:d}))}}return t}function i(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];t.push(s.terminal(i))}return t}function o(e){for(var t=0,n=0;n<Math.min(3,e.length);n++){var r=e[n];"terminal"===r.type&&"."===r.value&&t++}return 3===t}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(7),c={"~":"\\ ","\\,":"\\ ","\\:":"\\ ","\\;":"\\ ","\\!":"\\ "},l={"\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},u={"\\space":!0};t.default=r},function(e,t,n){function r(e){try{return{isError:!1,value:o.parser.parse(e)}}catch(e){return{isError:!0,error:i.default(e)}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),o=n(13),a=n(7);o.parser.yy=a,t.default=r},function(e,t,n){(function(e,r){var i=function(){function e(){this.yy={}}var t=function(e,t,n,r){for(n=n||{},r=e.length;r--;n[e[r]]=t);return n},n=[1,13],r=[1,14],i=[1,15],o=[1,16],a=[1,17],s=[1,21],c=[1,18],l=[1,19],u=[1,20],d=[1,22],p=[1,23],h=[1,28],f=[1,30],m=[1,31],g=[1,32],y=[1,33],v=[1,29],b=[5,21,27,38],x=[5,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],E=[5,10,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],w=[5,10,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],_={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,typeform:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,MATHRM:24,TEXT:25,RADICAL_OPTARG:26,CLOSE_OPTARG:27,RADICAL:28,curly_group:29,greek:30,command:31,SYMBOL:32,DELIMITER:33,DELIMITER_COMMAND:34,GREEK:35,COMMAND:36,"{":37,"}":38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"MATHRM",25:"TEXT",26:"RADICAL_OPTARG",27:"CLOSE_OPTARG",28:"RADICAL",32:"SYMBOL",33:"DELIMITER",34:"DELIMITER_COMMAND",35:"GREEK",36:"COMMAND",37:"{",38:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[16,2],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[30,1],[31,1],[29,3],[29,2]],performAction:function(e,t,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:return r.group();case 3:this.$=r.group(o[s-2],o[s-1],o[s]);break;case 4:case 6:this.$=r.group(o[s-1],o[s]);break;case 5:case 7:this.$=r.group(o[s]);break;case 8:this.$=r.level({_:r.group(o[s-1]),"^":r.group(o[s])});break;case 9:this.$=r.level({_:r.group(o[s]),"^":r.group(o[s-1])});break;case 10:this.$=r.level({"^":r.group(o[s])});break;case 11:this.$=r.level({_:r.group(o[s])});break;case 12:case 13:this.$=o[s];break;case 14:this.$=r.processPrimes(o[s-1],o[s]);break;case 15:this.$=r.processPrimes(o[s],r.group());break;case 21:this.$=r.group(o[s-3],o[s-2],o[s]);break;case 22:this.$=r.group(o[s-2],o[s]);break;case 23:this.$=r.fraction(r.group(o[s-1]),r.group(o[s]));break;case 24:this.$=r.typeform("operator_name",r.group(o[s]));break;case 25:this.$=r.typeform("mathrm",r.group(o[s]));break;case 26:this.$=r.typeform("text",r.group(o[s]));break;case 27:this.$=r.radical(o[s],r.group(o[s-2]));break;case 28:this.$=r.radical(r.group(o[s]),r.group());break;case 29:case 30:this.$=r.radical(r.group(o[s]));break;case 35:case 36:this.$=r.terminal(o[s]);break;case 37:case 39:this.$=r.command(o[s]);break;case 38:this.$=r.greek(o[s]);break;case 40:this.$=o[s-1];break;case 41:this.$=r.group()}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:a,20:25,22:s,23:c,24:l,25:u,26:d,28:p,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{1:[3]},{5:[1,34]},{1:[2,2]},t(b,[2,5],{15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,7:35,19:a,22:s,23:c,24:l,25:u,26:d,28:p,32:h,33:f,34:m,35:g,36:y,37:v}),t(b,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:36,10:n,12:r,13:i,14:o,19:a,22:s,23:c,24:l,25:u,26:d,28:p,32:h,33:f,34:m,35:g,36:y,37:v}),t(x,[2,11],{9:37,12:r,13:i,14:o}),t(x,[2,10],{8:38,10:n}),t(E,[2,16]),t(E,[2,17]),t(E,[2,18]),t(E,[2,19]),t(E,[2,20]),{11:39,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{11:40,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{11:41,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},t(w,[2,15]),{20:42,33:f,34:m},{11:43,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{11:44,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{11:45,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{11:46,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{4:47,6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:a,20:25,22:s,23:c,24:l,25:u,26:d,27:[1,48],28:p,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{11:49,17:50,20:25,22:s,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},t(E,[2,31]),t(E,[2,32]),t(E,[2,33]),t(E,[2,34]),t(E,[2,35]),{4:51,6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:a,20:25,22:s,23:c,24:l,25:u,26:d,28:p,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v,38:[1,52]},t(E,[2,36]),t(E,[2,37]),t(E,[2,38]),t(E,[2,39]),{1:[2,1]},t(b,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:53,10:n,12:r,13:i,14:o,19:a,22:s,23:c,24:l,25:u,26:d,28:p,32:h,33:f,34:m,35:g,36:y,37:v}),t(b,[2,6]),t(x,[2,8]),t(x,[2,9]),t([5,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],[2,12]),t(w,[2,13]),t(w,[2,14]),{4:54,6:4,7:5,8:6,9:7,10:n,11:12,12:r,13:i,14:o,15:8,16:9,17:10,18:11,19:a,20:25,21:[1,55],22:s,23:c,24:l,25:u,26:d,28:p,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},t(E,[2,24]),t(E,[2,25]),t(E,[2,26]),{11:56,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},{27:[1,57]},{11:58,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},t(E,[2,29]),t(E,[2,30]),{38:[1,59]},t(E,[2,41]),t(b,[2,3]),{21:[1,60]},{20:61,33:f,34:m},t(E,[2,23]),{11:62,20:25,29:24,30:26,31:27,32:h,33:f,34:m,35:g,36:y,37:v},t(E,[2,28]),t(E,[2,40]),{20:63,33:f,34:m},t(E,[2,22]),t(E,[2,27]),t(E,[2,21])],defaultActions:{3:[2,2],34:[2,1]},parseError:function(e,t){if(!t.recoverable){var n=new Error(e);throw n.hash=t,n}this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,c=0,l=0,u=i.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(p.yy[h]=this.yy[h]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var f=d.yylloc;i.push(f);var m=d.options&&d.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,y,v,b,x,E,w,_,S,M=function(){var e;return e=d.lex()||1,"number"!=typeof e&&(e=t.symbols_[e]||e),e},k={};;){if(v=n[n.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null!==g&&void 0!==g||(g=M()),b=o[v]&&o[v][g]),void 0===b||!b.length||!b[0]){var C="";S=[];for(E in o[v])this.terminals_[E]&&E>2&&S.push("'"+this.terminals_[E]+"'");C=d.showPosition?"Parse error on line "+(s+1)+":\n"+d.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==g?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(C,{text:d.match,token:this.terminals_[g]||g,line:d.yylineno,loc:f,expected:S})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g);switch(b[0]){case 1:n.push(g),r.push(d.yytext),i.push(d.yylloc),n.push(b[1]),g=null,y?(g=y,y=null):(c=d.yyleng,a=d.yytext,s=d.yylineno,f=d.yylloc,l>0&&l--);break;case 2:if(w=this.productions_[b[1]][1],k.$=r[r.length-w],k._$={first_line:i[i.length-(w||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(w||1)].first_column,last_column:i[i.length-1].last_column},m&&(k._$.range=[i[i.length-(w||1)].range[0],i[i.length-1].range[1]]),void 0!==(x=this.performAction.apply(k,[a,c,s,p.yy,b[1],r,i].concat(u))))return x;w&&(n=n.slice(0,-1*w*2),r=r.slice(0,-1*w),i=i.slice(0,-1*w)),n.push(this.productions_[b[1]][0]),r.push(k.$),i.push(k._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},S=function(){return{EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=o,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,i[o])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,i[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:break;case 1:return this.begin("optarg"),26;case 2:return this.popState(),27;case 3:return 23;case 4:return 24;case 5:return 25;case 6:return 28;case 7:return 22;case 8:return 13;case 9:return 14;case 10:return 12;case 11:return 10;case 12:return 19;case 13:return 21;case 14:return 34;case 15:return 33;case 16:return 37;case 17:return 38;case 18:case 19:case 20:return 32;case 21:case 22:return 35;case 23:return 36;case 24:return 32;case 25:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\mathrm))/,/^(?:(\\text))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}}}();return _.lexer=S,e.prototype=_,_.Parser=e,new e}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(r){r[1]||(console.log("Usage: "+r[0]+" FILE"),e.exit(1));var i=n(4).readFileSync(n(5).normalize(r[1]),"utf8");return t.parser.parse(i)},void 0!==r&&n.c[n.s]===r&&t.main(e.argv.slice(1))}).call(t,n(1),n(8)(e))},function(e,t,n){function r(e){return S.map(_.default(e),function(e){return x(w.default(e))})}function i(e){return/^[a-z]$/.test(e.value)?e.value.toUpperCase():/^[A-Z]$/.test(e.value)?","+e.value:/^[0-9.]$/.test(e.value)?e.value:/^[+\-()]$/.test(e.value)?e.value:M.hasOwnProperty(e.value)?M[e.value]:"[terminal: "+e.value+"]"}function o(e){return k.hasOwnProperty(e.value)?k[e.value]:e.value.slice(1).toUpperCase()+" "}function a(e){return C.hasOwnProperty(e.value)?C[e.value]:e.value.slice(1).toUpperCase()+" "}function s(e){return"\\space"===e.value}function c(e,t){return e.isStartOfLine&&/^-?$/.test(t)||/\s-?$/.test(t)||e.wasFraction}function l(e){return"\\sum"===e.value||"\\prod"===e.value}function u(e,t){if(t>=e.length)return!1;var n=e[t];if("terminal"===n.type){if(/^[0-9]$/.test(n.value))return!0;if("."!==n.value)return!1;if(t+1>=e.length)return!1;if(n=e[t+1],"terminal"===n.type)return/^[0-9]$/.test(n.value)}return!1}function d(e,t){for(var n="",r=e.levelIndicator,m=0,y=!1,x=0;x<t.length;x++){u(t,x)&&(""===r&&/[A-Z]$/.test(n)?n+=g(r):c(e,n)&&(n+="#"));var E=t[x],w=x<t.length-1?t[x+1]:null;switch("level"!==E.type&&r!==e.levelIndicator&&(b(E)?r="":(e.wasModifiedExpression&&""===e.levelIndicator?e=v(e,{wasModifiedExpression:!1}):n+=g(e.levelIndicator),r=e.levelIndicator)),E.type){case"terminal":!e.wasModifiedExpression&&""!==r&&b(E)?n+=" "+g(r)+i(E).trim()+" ":n+=i(E),"."===E.value&&w&&("terminal"===w.type&&/^[^_\d,]/.test(i(w))||"greek"===w.type)&&(n+='"'),e=v(e,{wasFraction:!1,wasRomanCommand:!1});break;case"command":if(!s(E)){var _=l(E);_&&(n+='"'),!_&&""!==r&&b(E)?n+=" "+g(r)+o(E).trim()+" ":n+=o(E),e=v(e,{wasFraction:!1,wasModifiedExpression:_,wasRomanCommand:!0})}break;case"greek":n+=a(E),e=v(e,{wasFraction:!1});break;case"fraction":var S=p(e,E);n+=S.value,m=Math.max(m,S.fractionLevel),e=v(e,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":var M=h(e,E);n+=M.value,m=Math.max(m,M.fractionLevel),e=v(e,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!e.wasModifiedExpression&&e.wasRomanCommand?(y=/\s$/.test(n))&&(n=n.replace(/\s$/,"")):y=!1;var k=n.length>0&&!0===/[A-Za-z]/.test(n[n.length-1]),C=f(e,k,y,E);n+=C.value,r=C.levelIndicator,e=v(e,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":n+=d(e,E.value).value,"operator_name"===E.name&&(n+=" "),e=v(e,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1})}}return{fractionLevel:m,levelIndicator:r,value:n}}function p(e,t){e=v(e,{isStartOfLine:!1});for(var n=d(e,t.numerator),r=d(e,t.denominator),i=Math.max(n.fractionLevel,r.fractionLevel),o="",a=0;a<i;a++)o+=",";var s=o+"?"+n.value;return n.levelIndicator!==e.levelIndicator&&(s+=g(e.levelIndicator)),/\.$/.test(n.value)&&(s+='"'),s+=o+"/"+r.value,r.levelIndicator!==e.levelIndicator&&(s+=g(e.levelIndicator)),/\.$/.test(r.value)&&(s+='"'),s+=o+"#",{fractionLevel:i+1,value:s}}function h(e,t){for(var n=e.radicalLevel,r="",i="",o=0;o<n;o++)i+=".";if(t.index){r+=i+"<";var a=d(v(e,{isStartOfLine:!1}),t.index);r+=a.value,/\.$/.test(a.value)&&(r+='"'),a.levelIndicator!==e.levelIndicator&&(r+=g(e.levelIndicator)),r+=">"}else r+=i+">";var s=d(v(e,{isStartOfLine:!1,radicalLevel:n+1}),t.radicand);return r+=s.value,/\.$/.test(s.value)&&(r+='"'),s.levelIndicator!==e.levelIndicator&&(r+=g(e.levelIndicator)),r+=i+"]",{fractionLevel:s.fractionLevel,value:r}}function f(e,t,n,r){var i=e.levelIndicator,o="",a=m(r.superscript);if(o+=a,r.subscript){e.wasModifiedExpression&&(o+="%"),i=e.levelIndicator+";";var s=d(v(e,{isStartOfLine:!1,levelIndicator:i}),r.subscript);t&&/^[0-9]*(\.|\,)?[0-9]+$/.test(s.value)&&i.length<=1?i=e.levelIndicator:!e.wasModifiedExpression&&r.subscript[0]&&"level"!==r.subscript[0].type&&(o+=g(i)),o+=s.value,/\.$/.test(s.value)&&(o+='"')}if(r.superscript){e.wasModifiedExpression&&(o+="<"),i=e.levelIndicator+"^";var c=d(v(e,{isStartOfLine:!1,levelIndicator:i}),r.superscript.slice(a.length));!e.wasModifiedExpression&&r.superscript[0]&&"level"!==r.superscript[0].type&&""!==c.value&&(o+=g(i)),o+=c.value,/\.$/.test(c.value)&&(o+='"')}return e.wasModifiedExpression?o+="]":e.wasRomanCommand&&n&&(o+=" ",i=i.slice(0,i.length-1)),{levelIndicator:i,value:o}}function m(e){var t="";if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];if("command"!==i.type||"\\prime"!==i.value)break;t+="'"}return t}function g(e){return e||'"'}function y(){return{isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1}}function v(e,t){return E(E({},e),t)}function b(e){return("terminal"===e.type||"command"===e.type)&&/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(e.value)}function x(e){return d(y(),e).value}var E=this&&this.__assign||function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},E.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var w=n(11),_=n(12),S=n(0);t.default=r;var M={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"},k={"\\Vert":"\\\\","\\cdot":"*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\ne":" /.K ","\\neq":" /.K ","\\approx":" @:@: ","\\nparallel":" /$L ","\\parallel":" $L ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\vert":"\\"},C={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"}},function(e,t,n){function r(e){return k.map(M.default(e),function(e){return E(S.default(e))})}function i(e,t,n){var r="",i=t.value,o=n&&"terminal"===n.type?n.value:"";return d(i,e)&&(r+=";"),/^[\D]/.test(i)&&(e=x(e,{wasNumber:!1})),/^[a-z]$/.test(i)?e.capsLock?(e=x(e,{capsLock:!1}),r+=",'"+i.toUpperCase()):r+=i.toUpperCase():/^[A-Z]$/.test(i)?e.capsLock?r+=i:/[A-Z]/.test(o)?(e=x(e,{capsLock:!0}),r+=",,"+i):r+=","+i:(e=x(e,{capsLock:!1}),/^[0-9.]$/.test(i)?r+=l(i):C.hasOwnProperty(i)?r+=C[i]:r+="[terminal: "+i+"]"),{value:r,ctx:e}}function o(e,t){var n;return n=I.hasOwnProperty(e.value)?I[e.value]:e.value.slice(1).toUpperCase()+" ",d(n,t)&&(n=";"+n),/^[\D]/.test(n)&&(t=x(t,{wasNumber:!1})),{value:n,ctx:t}}function a(e){return T.hasOwnProperty(e.value)?T[e.value]:e.value.slice(1).toUpperCase()+" "}function s(e){return"\\space"===e.value}function c(e,t){if(t<e.length){var n=e[t];if("terminal"===n.type){if(/^\d$/.test(n.value))return!0;if("."!==n.value)return!1;if(t+1>=e.length)return!1;if(n=e[t+1],"terminal"===n.type)return/^\d$/.test(n.value)}}return!1}function l(e){for(var t="",n="A".charCodeAt(0)-1,r=0,i=e;r<i.length;r++){var o=i[r];t+=","===o?"1":"."===o?"4":"0"===o?"J":String.fromCharCode(n+Number(o))}return t}function u(e,t){for(var n,r,l="",d=!0,h=0;h<t.length;h++){c(t,h)?(e=x(e,{wasNumber:!0}),d&&(l+="#",d=!1)):d=!0;var g=t[h];switch(g.type){case"terminal":n=i(e,g,h<t.length-1?t[h+1]:void 0),e=n.ctx,l+=n.value," "===l[l.length-1]&&(d=!0);break;case"command":s(g)||(r=o(g,e),e=r.ctx,l+=r.value," "===l[l.length-1]&&(d=!0));break;case"greek":l+=a(g)," "===l[l.length-1]&&(d=!0);break;case"fraction":var y=p(e,g);l+=y.value,e=y.ctx,d=!1;break;case"radical":l+=f(e,g).value,d=!0;break;case"level":var v=m(e,g);l+=v.value,e=v.ctx,d=!0;break;case"typeform":var b=u(e,g.value).value;l+=b,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(b)&&(l+=" ")}}return{ctx:e,value:l}}function d(e,t){return t.wasNumber&&/^[A-Ja-j]/.test(e)}function p(e,t){var n,r=u(e,t.numerator),i=u(e,t.denominator);return h(r.value)&&h(i.value)?(e=x(e,{wasNumber:!0}),n=r.value+"/"+i.value.slice(1)):(e=x(e,{wasNumber:!1}),n="("+r.value+"./"+i.value+")"),{ctx:e,value:n}}function h(e){return/^\#[A-J41]+$/.test(e)}function f(e,t){var n="%";if(t.index){n+=u(e,_.group(_.level({"^":t.index}))).value}return n+=u(e,t.radicand).value+"+",{ctx:e,value:n}}function m(e,t){var n="",r=y(t.superscript);n+=r;var i;if(t.subscript){var o=u(e,t.subscript);i=v(t.subscript,o.value,0)?"<"+g(o.value)+">":o.value,e=x(e,{wasNumber:o.ctx.wasNumber}),""!==i&&(n+="5"+i)}if(t.superscript){var a=u(e,t.superscript.slice(r.length));i=v(t.superscript,a.value,r.length)?"<"+g(a.value)+">":a.value,e=x(e,{wasNumber:a.ctx.wasNumber}),""!==r&&""===i||(n+="9"+i)}return{ctx:e,value:n}}function g(e){return/^;/.test(e)?e.slice(1):e}function y(e){var t="";if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];if("command"!==i.type||"\\prime"!==i.value)break;t+="7"}return t}function v(e,t,n){var r=e[0],i=(t.match(/\</g)||[]).length,o=/^["|\.|_]?\</.test(t),a=(t.match(/\>/g)||[]).length,s=/["|\.|_]?\>$/.test(t);return!h(t)&&e.length-n>1&&0===i&&0===a||i>0&&a>0&&(!o||!s)||i>1||a>1||r&&"typeform"===r.type}function b(){return{capsLock:!1,wasNumber:!1}}function x(e,t){return w(w({},e),t)}function E(e){return u(b(),e).value}var w=this&&this.__assign||function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},w.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var _=n(7),S=n(11),M=n(12),k=n(0);t.default=r;var C={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"},I={"\\Vert":"_\\_\\","\\cdot":'"4',"\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\ne":'"7@:',"\\neq":'"7@:',"\\approx":"^9","\\parallel":"#L","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\vert":"_\\"},T={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"}},function(e,t,n){function r(e,t){for(var n="",o=t,a="",s=!1,u="",d="",h=i(e),f=0;f<e.length;f++){var y=e[f],v=f+1<e.length?e[f+1]:null;switch(y.type){case"terminal":var b=p.getAutoOperator(e.slice(f));""!==b.value?(n+=b.value,f+=b.terminalCount-1,s=s||b.modified):" "===y.value?(s?(a=u,n+=l(o,a),o=a):n+="\\ ",s=!1):(h[f]===m?n+="\\left":h[f]===g&&(n+="\\right"),n+=y.value);break;case"comparison":a="",n+=l(o,a),o=a,s=!1,n+=y.value;break;case"level_with_comparison":n+=l(o,y.level),o=y.level,s=!1,n+=y.value;break;case"command":var x=y.value.slice(1).trim();v&&"terminal"===v.type&&/[a-z]/.test(v.value)?(n+=x,s=!1):p.containsValue(x)?(n+="\\operatorname{"+x+"}",s=!0):(n+=y.value,s=!0),u=o;break;case"expression":n+=y.value;break;case"fraction":n+=c(y.numerator,y.denominator,o);break;case"modified_expression":n+=r(y.expression,o)+" ",y.under&&(n+="_{"+r(y.under,o)+"}"),y.over&&(n+="^{"+r(y.over,o)+"}");break;case"radical":n+="\\sqrt",y.index&&(n+="["+r(y.index,o)+"]"),n+="{"+r(y.value,o)+"}";break;case"simple_subscript":""===o?(n+=y.base.value+"_{"+y.subscript.value+"}","command"===y.base.type&&(s=!0,u=o)):n+=y.base.value+y.subscript.value;break;case"level":
n+=l(o,y.value,d),o=y.value,"^"===y.value&&""!==d&&(d="");break;case"primes":v&&"level"===v.type&&";"===v.value?d=y.value:""!==o?(n+=Array(y.value.length+1).join("\\prime "),d=""):(n+=y.value,d="")}}return n+=l(o,t)+d,n.replace(/([^\\])( )$/,"$1")}function i(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];if(o(i))t.push({direction:m,index:r}),n.push(y);else if(a(i)){for(;t.length&&t[t.length-1].direction===v;)t.pop();if(t.length){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else n.push(y)}else if(s(i))if(t.length&&t[t.length-1].direction===v){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else t.push({direction:v,index:r}),n.push(y);else n.push(y)}return n}function o(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}function a(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}function s(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}function c(e,t,n){return"\\frac{"+r(e,n)+"}{"+r(t,n)+"}"}function l(e,t,n){var r,i,o,a="",s=Math.max(e.length,t.length);for(r=0;r<s&&e[r]===t[r];r++);for(i=e.length-1;i>=r;i--)a+="}";for(o=r;o<t.length;o++)"^"===t[o]&&(n&&(a+=n),a+="^{"),";"===t[o]&&(a+="_{");return a}function u(e){return r(e,"")}function d(e,t){return t&&t.operatorNames?p.setOperatorNames(t.operatorNames):p.resetOperatorNames(),f.map(h.default(e,t),u)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(2),h=n(18),f=n(0),m=1,g=-1,y=0,v=2;t.default=d},function(e,t,n){function r(e){return{type:"terminal",value:e}}function i(e){return{type:"command",value:"\\"+e.trim()+" "}}function o(e){var t=/[\^;]+/.exec(e),n=t?t.toString():"",r=e.slice(s.length);return{type:"level_with_comparison",level:n,value:y[r]}}function a(e){return{type:"comparison",value:y[e]}}function s(e){return{type:"level",value:e}}function c(){return s("")}function l(e){return{type:"primes",value:e}}function u(e,t){return{type:"fraction",numerator:e,denominator:t}}function d(e,t,n){return{type:"modified_expression",expression:e,under:t,over:n}}function p(e,t){return{type:"radical",value:e,index:t}}function h(e){return{type:"expression",value:e}}function f(e,t){return{type:"simple_subscript",base:e,subscript:t}}function m(e){if(v.hasOwnProperty(e))return v[e]+" ";throw new Error("Unknown Greek letter")}function g(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=r,t.command=i;var y={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","@:@:":"\\approx","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim "};t.level_with_comparison=o,t.comparison=a,t.level=s,t.baseline=c,t.primes=l,t.fraction=u,t.modified_expression=d,t.radical=p,t.expression=h,t.simple_subscript=f;var v={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=m,t.group=g},function(e,t,n){function r(e,t){t||(t={});var n=a.parser,r=Object.create(n);r.yy=s,r.yy.warnOrError=function(e){r.parseError(e,{recoverable:!1})};var l=Object.create(n);l.yy=i({warnings:[]},s),l.yy.warnOrError=function(e){l.yy.warnings.push(e)},l.lexer=c.default,n=t.strict?r:l;try{return{isError:!1,value:n.parse(e),warnings:n.yy.warnings||[]}}catch(e){return{error:o.default(e),isError:!0}}}var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(9),s=n(17),c=n(20);t.default=r},function(e,t,n){function r(e,t){t||(t={});var n=s.parser,r=Object.create(n);r.yy=c;var l=Object.create(n);l.yy=i({warnings:[]},c),l.lexer=a.default,n=t.strict?r:l;try{return{isError:!1,value:n.parse(e),warnings:n.yy.warnings||[]}}catch(e){return{error:o.default(e),isError:!0}}}var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=n(21),s=n(10),c=n(24);t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=r.parser.lexer,o=Object.create(i);t.default=o;var a=r.parser.terminals_,s=r.parser.symbols_;o.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],this.canAcceptPrimes=!1,i.setInput.call(this,e,t)},o.lex=function(){var e=-1;if(!this)return e;if(this.outputQueue.length)return this.outputQueue.shift();for(var t=i.lex.call(this);"UNKNOWN"===a[t]||!this.canAcceptPrimes&&"PRIMES"===a[t];)this.warn(),t=i.lex.call(this);this.canAcceptPrimes=!0;var n,r,o=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[t]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(t),this.canAcceptPrimes=!1;break;case"RADICAL_INDEX":o===s.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(o)),this.delimiterStack.push(t),this.canAcceptPrimes=!1;break;case"OPEN_RADICAL":o===s.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(t),this.canAcceptPrimes=!1;break;case"SLASH":for(n=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===s.OPEN_FRAC){n=!0;break}this.pushCloseTokens(r)}n||this.pushOpenTokens(t),this.delimiterStack.push(t),this.canAcceptPrimes=!1;break;case"CLOSE_FRAC":for(n=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===s.SLASH){n=!0;break}if(r===s.OPEN_FRAC){this.addMissingToken(s.SLASH),n=!0;break}this.pushCloseTokens(r)}if(!n)return this.warn(),this.canAcceptPrimes=!1,this.lex();break;case"CLOSE_RADICAL":for(n=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===s.OPEN_RADICAL){n=!0;break}if(r===s.RADICAL_INDEX){n=!0,this.addMissingToken(s.OPEN_RADICAL);break}this.pushCloseTokens(r)}n||this.pushOpenTokens(t);break;case"CLOSE_MODEXP":for(n=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===s.OPEN_MODEXP){n=!0;break}this.pushCloseTokens(r)}n||this.pushOpenTokens(t);break;case"EOF":for(;this.delimiterStack.length;)r=this.delimiterStack.pop()||-1,this.pushCloseTokens(r)}return this.outputQueue.push(t),e=this.outputQueue.shift()||-1},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},o.pushCloseTokens=function(e){switch(a[e]){case"OPEN_FRAC":this.addMissingToken(s.SLASH),this.addMissingToken(s.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(s.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(s.OPEN_RADICAL),this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(s.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(s.CLOSE_MODEXP)}},o.pushOpenTokens=function(e){switch(a[e]){case"SLASH":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(s.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(s.OPEN_MODEXP)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=r.parser.lexer,o=Object.create(i);t.default=o;var a=r.parser.terminals_,s=r.parser.symbols_;o.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],i.setInput.call(this,e,t)},o.lex=function(){if(this.outputQueue.length)return this.outputQueue.shift();for(var e=i.lex.call(this);"UNKNOWN"===a[e];)this.warn(),e=i.lex.call(this);var t,n,r=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[e]){case"OPEN_FRAC":case"OPEN_GROUP":this.delimiterStack.push(e);break;case"RADICAL_WITH_INDEX":r===s.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(r)),this.delimiterStack.push(e);break;case"RADICAL":r===s.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(e);break;case"OVER":for(t=!1;this.delimiterStack.length;){if((n=this.delimiterStack.pop()||-1)===s.OPEN_FRAC){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(e),this.delimiterStack.push(e);break;case"CLOSE_FRAC":for(t=!1;this.delimiterStack.length;){if((n=this.delimiterStack.pop()||-1)===s.OVER){t=!0;break}if(n===s.OPEN_FRAC){this.outputQueue.push(s.OVER),t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(e);break;case"CLOSE_GROUP":for(t=!1;this.delimiterStack.length;){if((n=this.delimiterStack.pop()||-1)===s.OPEN_GROUP){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(e);break;case"CLOSE_RADICAL":for(t=!1;this.delimiterStack.length;){if((n=this.delimiterStack.pop()||-1)===s.RADICAL||n===s.RADICAL_WITH_INDEX){t=!0;break}this.pushCloseTokens(n)}t||this.pushOpenTokens(e);break;case"EOF":for(;this.delimiterStack.length;)n=this.delimiterStack.pop()||-1,this.pushCloseTokens(n)}return this.outputQueue.push(e),this.outputQueue.shift()||-1},o.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},o.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},o.pushCloseTokens=function(e){switch(a[e]){case"OPEN_FRAC":this.addMissingToken(s.OVER),this.addMissingToken(s.CLOSE_FRAC);break;case"OVER":this.addMissingToken(s.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(s.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(s.CLOSE_RADICAL)}},o.pushOpenTokens=function(e){switch(a[e]){case"OVER":this.addMissingToken(s.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(s.OPEN_FRAC),this.addMissingToken(s.OVER);break;case"CLOSE_GROUP":this.addMissingToken(s.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(s.RADICAL)}}},function(e,t,n){function r(e){return e.isError}function i(e){return!e.isError}function o(e,t){return r(e)?e:{isError:!1,value:t(e.value)}}Object.defineProperty(t,"__esModule",{value:!0}),t.isErr=r,t.isOk=i,t.map=o},function(e,t,n){function r(e,t){for(var n="",o=!1,a="",s=i(e),d=0;d<e.length;d++){var h=e[d],f=d+1<e.length?e[d+1]:null;switch(h.type){case"terminal":var y=p.getAutoOperator(e.slice(d));""!==y.value?(n+=y.value,d+=y.terminalCount-1):" "!==h.value||o?(s[d]===m?n+="\\left":s[d]===g&&(n+="\\right"),n+=h.value):n+="\\ ",o=!1;break;case"command":var v=h.value.slice(1).trim();f&&"terminal"===f.type&&/[a-z]/.test(f.value)?(n+=v,o=!1):p.containsValue(v)?(n+="\\operatorname{"+v+"}",o=!0):(n+=h.value,o=!0);break;case"expression":n+=h.value;break;case"fraction":n+=c(h.numerator,h.denominator);break;case"radical":n+="\\sqrt",h.index&&(n+="["+r(h.index)+"]"),n+="{"+r(h.value)+"}";break;case"basic_level":n+=l(h.level,h.value,a),"9"===h.level&&(a="");break;case"bracketed_level":n+=u(h.level,h.lbrack,h.value,h.rbrack,a),"9"===h.level&&(a="");break;case"primes":!f||"basic_level"!==f.type&&"bracketed_level"!==f.type||"5"!==f.level?t&&""!==t?(n+=Array(h.value.length+1).join("\\prime "),a=""):(n+=h.value,a=""):a=h.value}}return n+=a,n.replace(/([^\\])( )$/,"$1")}function i(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];if(o(i))t.push({direction:m,index:r}),n.push(y);else if(a(i)){for(;t.length&&t[t.length-1].direction===v;)t.pop();if(t.length){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else n.push(y)}else if(s(i))if(t.length&&t[t.length-1].direction===v){var c=t.pop();if(c){var l=c.index;n[l]=m,n.push(g)}}else t.push({direction:v,index:r}),n.push(y);else n.push(y)}return n}function o(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}function a(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}function s(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}function c(e,t){return"\\frac{"+r(e)+"}{"+r(t)+"}"}function l(e,t,n){var i="",o="{"+r(t,e)+"}";return"9"===e?i+=n+"^"+o:"5"===e&&(i+="_"+o),i}function u(e,t,n,i,o){var a="",s="{"+t+r(n,e)+i+"}";return"9"===e?a+=o+"^"+s:"5"===e&&(a+="_"+s),a}function d(e,t){return t&&t.operatorNames?p.setOperatorNames(t.operatorNames):p.resetOperatorNames(),f.map(h.default(e,t),function(e){return b(e,"")})}Object.defineProperty(t,"__esModule",{value:!0});var p=n(2),h=n(19),f=n(0),m=1,g=-1,y=0,v=2,b=r;t.default=d},function(e,t,n){function r(e){return{type:"terminal",value:e}}function i(e){return{type:"command",value:e}}function o(e,t){return{type:"basic_level",level:e,value:t}}function a(e,t,n,r){return{type:"bracketed_level",level:e,lbrack:t,value:n,rbrack:r}}function s(e){return{type:"primes",value:e.length>0?Array(e.length+1).join("'"):""}}function c(e,t){return{type:"fraction",numerator:e,denominator:t}}function l(e,t){return{type:"radical",value:e,index:t}}function u(e){return{type:"expression",value:e}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}function p(e){if(f.hasOwnProperty(e))return f[e]+" ";throw new Error("Unknown Greek letter")}function h(e){for(var t="",n="A".charCodeAt(0)-1,r=0,i=e;r<i.length;r++){var o=i[r];t+="4"===o?".":"J"===o?"0":o.charCodeAt(0)-n}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=r,t.command=i,t.basic_level=o,t.bracketed_level=a,t.primes=s,t.fraction=c,t.radical=l,t.expression=u,t.group=d;var f={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=p,t.to_number=h},function(e,t,n){function r(e){return String.fromCharCode(h+e)}function i(e){return e.charCodeAt(0)-h}function o(e){return p[e]}function a(e){return p.indexOf(e)}function s(e){for(var t="",n=0,i=e;n<i.length;n++){t+=r(a(i[n]))}return t}function c(e){for(var t="",n=0,r=e;n<r.length;n++){t+=o(i(r[n]))}return t}function l(e){return c(e).replace(/[@-^]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+32)})}function u(e){var t="";if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i.charCodeAt(0);96<=o&&o<=127&&(o-=32,i=String.fromCharCode(o)),32<=o&&o<=95&&(i=s(i),o=i.charCodeAt(0)),10305<=o&&o<=10495&&(o=10240+(o-1024)%64,i=String.fromCharCode(o)),t+=10240<=o&&o<=10304?i:String.fromCharCode(10240)}return t}function d(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<10240||n>10304)return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0});var p=" A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",h=10240;t.toBrailleAscii=c,t.toExpandedBrailleAscii=l,t.coerceToSixDotCells=u,t.isSixDotCells=d},function(e,t,n){n(3),e.exports=n(3)}])}),define("submodules/dcgview/src/attr-event-handler",[],function(){function e(e,t){if(null!==t&&void 0!==t){if("string"!=typeof e)throw new Error("Must pass a string for an EventHandler name");if("function"!=typeof t)throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(n){n[e.toLowerCase()]=function(e){e&&t.apply(this,arguments)}}}}}}return e}),define("submodules/dcgview/src/const",["require"],function(e){function t(e){var t=function(){return e};return t.isDCGViewConst=!0,t}function n(e){return!("function"!=typeof e||!e.isDCGViewConst)}return{isConst:n,makeConst:t}}),define("submodules/dcgview/src/attr",["require"],function(e){function t(e,t,n){void 0===n?e.removeAttribute(t):e.setAttribute(t,n+"")}return{update:t}}),define("submodules/dcgview/src/attr-generic",["require","./const","./attr"],function(e){function t(e,t){var i,o=t();return n.isConst(t)||(i={onUpdate:function(n){var i=t();i!==o&&(o=i,r.update(n,e,i))}}),{value:o,bindings:i}}var n=e("./const"),r=e("./attr");return t}),define("submodules/dcgview/src/is-event-handler",[],function(){function e(e){return"o"===e[0]&&"n"===e[1]&&e[2].toUpperCase()===e[2]}return e}),define("submodules/dcgview/src/custom-attributes",["require"],function(e){function t(e,t){i[e]=t}function n(e){return i.hasOwnProperty(e)}function r(e,t){return(0,i[e])(t)}var i={};return{isCustomAttribute:n,add:t,parse:r}}),define("submodules/dcgview/src/bindings",["require"],function(e){function t(e,t,n){var r=e._bindings[t];r?r.push(n):e._bindings[t]=[n]}function n(e,t){var n=e._bindings[t];if(n)for(var r=n.length,i=0;i<r;i++)n[i]()}return{add:t,invoke:n}}),define("submodules/dcgview/src/warnings",["require"],function(e){function t(e){i.push(e)}function n(e){var t=i;i=[];for(var n=0;n<t.length;n++){var r=t[n];r!==e&&i.push(r)}}function r(e){try{throw new Error(e)}catch(e){console.warn(e);for(var t=0;t<i.length;t++)i[t](e)}}var i=[];return{warn:r,addWarningHandler:t,removeWarningHandler:n}}),define("submodules/dcgview/src/bind-attrs",["require","./attr-event-handler","./attr-generic","./is-event-handler","./custom-attributes","./bindings","./warnings"],function(e){function t(e,t){var n=!1;return function(){if(n)return void u.warn(e+" is a one-time binding but was called multiple times");n=!0,t.apply(this,arguments)}}function n(e,n,r){var i=r.bindings;if(i)for(var o in i){var a=i[o];o in d&&(a=a.bind(null,n)),o in p&&(a=t(o,a)),l.add(e,o,a)}}function r(e,t){if("function"!=typeof t)throw new Error('The "'+e+'" attr must be a function. It is: '+JSON.stringify(t));return c.isCustomAttribute(e)?c.parse(e,t):s(e)?o(e,t):a(e,t)}function i(e,t,i){if(t)for(var o in t){var a=r(o,t[o]);if(a){var s=a.value;void 0!==s&&i.setAttribute(o,s),a.bindings&&n(e,i,a)}}}var o=e("./attr-event-handler"),a=e("./attr-generic"),s=e("./is-event-handler"),c=e("./custom-attributes"),l=e("./bindings"),u=e("./warnings"),d={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0},p={willMount:!0,onMount:!0,didMount:!0,willUnmount:!0,onUnmount:!0,didUnmount:!0};return i}),define("submodules/dcgview/src/bind-text",["require","./bindings"],function(e){function t(){i=!0}function n(e,t,n){if("function"!=typeof n)throw new Error("bindText expects a function");var o=n();void 0!==o&&null!==o||(o="");var a=document.createTextNode(o);if(i){var s=document.createElement("span");s.appendChild(a),t.appendChild(s)}else t.appendChild(a);r.add(e,"onUpdate",function(){var e=n();void 0!==e&&null!==e||(e=""),o!==e&&(a.nodeValue=e,o=e)})}var r=e("./bindings"),i=!1;return{bindText:n,enableSpanWrapping:t}}),define("submodules/dcgview/src/dcg-element",["require","./bind-attrs","./bind-text","./const","./warnings"],function(e){function t(e,t){var n=document.createTextNode(t);e.appendChild(n)}function n(e,t,n){this.tagName=e,this.attrs=t,this.children=n}var r=e("./bind-attrs"),i=e("./bind-text").bindText,o=e("./const"),a=e("./warnings");return n.prototype._isDCGElement=!0,n.prototype.renderToDocFrag=function(e,n){if(this._domNode)throw new Error("Cannot remount a DCGElement");var s=this.children,c=document.createElement(this.tagName);this._domNode=c,r(n,this.attrs,c),e.appendChild(c);for(var l=s.length,u=0;u<l;u++){var d=s[u];d._isDCGElement?d.renderToDocFrag(c,n):o.isConst(d)?t(c,d()):"function"==typeof d?i(n,c,d):(a.warn("Text should be a const or a getter: "+JSON.stringify(d)),t(c,d))}},n}),define("submodules/dcgview/src/create-element",["require","./dcg-element"],function(e){function t(e,n){if(null!==e&&void 0!==e)if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r],n);else n.push(e)}function n(e,n){for(var i=[],o=arguments.length-1,a=2;a<=o;a++)t(arguments[a],i);if("string"==typeof e)return new r(e,n,i);if(e&&e._isDCGViewClass)return new e(n,i);throw new Error("createElement expects a String or DCGViewClass")}var r=e("./dcg-element");return n}),define("submodules/dcgview/src/mounting",["require","./bindings"],function(e){function t(){for(var e=this._element;e._isDCGView;)e=e._element;return e._domNode}function n(e,t){if(t&&t._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(e,this)}function r(e,t,n){if(!e||!e._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!t||1!==t.nodeType)throw new Error("Must pass an HTMLElement for the node");if(t._mountedDCGView)throw new Error("This node is already mounted by a view");var r=new e(n),i=document.createDocumentFragment();return r.renderToDocFrag(i),t.innerHTML="",o(r),t._mountedDCGView=r,t.appendChild(i),a(r),s(r),r}function i(e){var t=e._mountedDCGView;if(!t)throw new Error("This node is not mounted by a DCGView");c(t),e.innerHTML="",delete e._mountedDCGView,l(t),u(t)}function o(e){e.willMount&&e.willMount(),p.invoke(e,"willMount"),e._childViews.forEach(o)}function a(e){e._isMounted=!0,e.onMount&&e.onMount(),p.invoke(e,"onMount"),e._childViews.forEach(a)}function s(e){e.didMount&&e.didMount(),p.invoke(e,"didMount"),e._childViews.forEach(s)}function c(e){e.willUnmount&&e.willUnmount(),p.invoke(e,"willUnmount"),e._childViews.forEach(c)}function l(e){e._isMounted=!1,e._childViews.forEach(l),p.invoke(e,"onUnmount"),e.onUnmount&&e.onUnmount()}function u(e){e._childViews.forEach(u),p.invoke(e,"didUnmount"),e.didUnmount&&e.didUnmount()}function d(e,t){var n=document.createDocumentFragment();return e.renderToDocFrag(n,t),n.firstChild}var p=e("./bindings");return{renderToDocFrag:n,findRootNode:t,createNodeForView:d,willMount:o,onMount:a,didMount:s,willUnmount:c,onUnmount:l,didUnmount:u,mountToNode:r,unmountFromNode:i}}),define("submodules/dcgview/src/update",["require","./bindings","./warnings"],function(e){function t(){if(!this._isMounted)return r.warn("Trying to update view that is not mounted. Ignoring update.");if(!this.shouldUpdate||this.shouldUpdate()){if(this.willUpdate&&this.willUpdate(),n.invoke(this,"willUpdate"),n.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var e=this._childViews,t=e.length,i=0;i<t;i++)e[i].update();n.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}var n=e("./bindings"),r=e("./warnings");return{update:t}}),define("submodules/dcgview/src/spread",["require"],function(e){function t(e){var t=arguments.length;if(t<2)return e;for(var n=1;n<t;n++)for(var r=arguments[n],i=Object.keys(r),o=i.length,a=0;a<o;a++){var s=i[a];e[s]=r[s]}return e}return t}),define("submodules/dcgview/src/create-class",["require","./create-element","./mounting","./update","./const","./spread"],function(e){function t(e){if(!e)throw new Error("must pass a spec to DCGView.createClass");if("function"!=typeof e.template)throw new Error("must pass a template function to DCGView.createClass");var t=function(e,t){this._setupProps(e,t),this.init&&this.init(),this._callTemplate()};t.prototype._setupProps=function(e,t){if(e){for(var n in e){var r=e[n];if("function"!=typeof r&&void 0!==r)throw new Error('The "'+n+'" prop must be a function. It is: '+JSON.stringify(r))}this.props=e}else this.props={};this.children=t,this._childViews=[],this._bindings={}},t.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement")},t.prototype.bindFn=function(e){return e.bind(this)},t.prototype.findRootNode=r.findRootNode,t.prototype.renderToDocFrag=r.renderToDocFrag,t.prototype.const=o.makeConst,t.prototype.spread=a,t.prototype.createElement=n,t.prototype.update=i.update;for(var s in e)if(e.hasOwnProperty(s)){if(t.prototype.hasOwnProperty(s))throw new Error("Cannot override the "+s+"() method");t.prototype[s]=e[s]}return t._isDCGViewClass=!0,t.prototype._isDCGView=!0,t.prototype._isDCGElement=!0,t}var n=e("./create-element"),r=e("./mounting"),i=e("./update"),o=e("./const"),a=e("./spread");return t}),define("submodules/dcgview/src/attr-style",["require","./const","./attr"],function(e){function t(e){var t=e(),n=typeof t;if("string"===n)return t;if(!n||"object"!==n)throw new Error("Unsupported type returned from style getter: "+n);var r="";for(var i in t){var o=t[i];t.hasOwnProperty(i)&&null!==o&&void 0!==o&&(r?r+=";"+i+":"+o:r=i+":"+o)}return r}function n(e){var n,o=t(e);return r.isConst(e)||(n={onUpdate:function(n){var r=t(e);o!==r&&(i.update(n,"style",r),o=r)}}),{value:o,bindings:n}}var r=e("./const"),i=e("./attr");return n}),define("submodules/dcgview/src/attr-class",["require","./const"],function(e){function t(e){var t=e(),n=typeof t;if("string"===n)return t;if(!n||"object"!==n)throw new Error("Unsupported type returned from class getter: "+n);var r="";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];o&&(r?r+=" "+i:r=i)}return r}function n(e,t,n){for(var r=[],i=e.className.replace(o,"").split(a),s=t.replace(o,"").split(a),c={},l=s.length-1;l>=0;l--)c[s[l]]=!0;var u=i.length;for(l=0;l<u;l++){var d=i[l];c.hasOwnProperty(d)||r.push(d)}return n?r.length?n+" "+r.join(" "):n:r.join(" ")}function r(e){var r,o=t(e);return i.isConst(e)||(r={onUpdate:function(r){var i=t(e);o!==i&&(r.className===o?(r.className=i,o=i):(r.className=n(r,o,i),o=i))}}),{value:o,bindings:r}}var i=e("./const"),o=/^\s+|\s+$/g,a=/\s+/;return r}),define("submodules/dcgview/src/attr-lifecycle",["require","./const"],function(e){function t(e){return function(t){if("function"!=typeof t)throw new Error("The "+e+" attribute expects a function for the value");if(n.isConst(t))throw new Error("The "+e+" attribute does not expect a const for the value");var r={bindings:{}};return r.bindings[e]=t,r}}var n=e("./const");return t}),define("submodules/dcgview/src/longest-subsequence",["require"],function(e){return function(e){var t,n,r=e.length,i=new Array(r),o=new Array(r+1),a=0;for(n=0;n<r;n++){if(e[o[a]]<e[n])t=a+1;else{for(var s=1,c=a-1;s<=c;){var l=Math.ceil((s+c)/2);e[o[l]]<e[n]?s=l+1:c=l-1}t=s}i[n]=o[t-1],o[t]=n,t>a&&(a=t)}var u=new Array(a),d=o[a];for(n=a-1;n>=0;n--)u[n]=e[d],d=i[d];return u}}),define("submodules/dcgview/src/compute-key-mutations",["require","./longest-subsequence"],function(e){function t(e,t){var r,i,o={},a=[],s=[];for(r=0;r<t.length;r++)i=t[r],o[i]=r;for(r=0;r<e.length;r++)i=e[r],void 0===o[i]&&a.push(i);var c=[];for(r=0;r<e.length;r++){i=e[r];var l=o[i];void 0!==l&&c.push(l)}var u=n(c),d={};for(r=0;r<u.length;r++)i=t[u[r]],d[i]=!0;for(r=t.length-1;r>=0;r--)i=t[r],d[i]||s.push({key:i,beforeKey:t[r+1]});return{removes:a,inserts:s}}var n=e("./longest-subsequence");return t}),define("submodules/dcgview/src/for",["require","./create-class","./compute-key-mutations","./const","./mounting"],function(e){var t=e("./create-class"),n=e("./compute-key-mutations"),r=e("./const"),i=e("./mounting"),o=t({template:function(){return this.children[0]}});return t({_isDCGFor:!0,getKeys:function(){this._keyToItem={};var e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");var t=this.props.key?e.map(this.props.key):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],"string"!==this._chosenKeyType&&"number"!==this._chosenKeyType))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var n=0;n<t.length;n++){var r=t[n];if(typeof r!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(r)+" is not a "+this._chosenKeyType);if(r in this._keyToItem)throw new Error("The key: "+JSON.stringify(r)+" is not unique");this._keyToItem[r]=e[n]}return t},createViewForKey:function(e){var t=this._keyToItem[e],n=this._viewFunction.call(this,t,e),r=n;return r._isDCGView||(r=this.createElement(o,null,n)),this._keyToView[e]=r,r},template:function(){if(this._keyToView={},"function"!=typeof this.props.each)throw new Error("<For each={}> must be a function");if(1!==this.children.length)throw new Error("<For> expects a single child. You passed "+this.children.length);var e=this.children[0];if(!e||!e._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(e));if(e._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(1!==e.children.length)throw new Error("<For> expects a root node with a single child. You passed "+e.children.length);if(this._viewFunction=e.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var t=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+t)}if(r.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var n=[],i=0;i<this._keys.length;i++){var o=this._keys[i];n.push(this.createViewForKey(o))}return e.children=n,e},detachAllRemovedViews:function(){for(var e,t=this._childViews,n=0,r=t.length,i=0;i<r;i++)e=t[i],e._will_be_unmounted_?n++:t[i-n]=e;t.splice(r-n,n)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;var r,o,a,s,c,l,u=this.findRootNode(),d=n(e,t),p=[];for(r=d.removes.length-1;r>=0;r--)l=d.removes[r],p.push(this._keyToView[l]);for(p.forEach(i.willUnmount),r=0;r<d.removes.length;r++)l=d.removes[r],o=this._keyToView[l],delete this._keyToView[l],o._will_be_unmounted_=!0,u.removeChild(o.findRootNode());p.length>0&&this.detachAllRemovedViews(),p.forEach(i.onUnmount),p.forEach(i.didUnmount);var h=[];for(r=d.inserts.length-1;r>=0;r--)(l=d.inserts[r].key)in this._keyToView||(o=this.createViewForKey(l),h.push(o),i.createNodeForView(o,this));for(h.forEach(i.willMount),r=0;r<d.inserts.length;r++)c=d.inserts[r],a=this._keyToView[c.key].findRootNode(),s=void 0!==c.beforeKey?this._keyToView[c.beforeKey].findRootNode():null,u.insertBefore(a,s);h.forEach(i.onMount),h.forEach(i.didMount);var f=this._childViews,m=f.length-h.length;for(r=0;r<m;r++)f[r].update()}})}),define("submodules/dcgview/src/switch",["require","./create-class","./const","./mounting"],function(e){var t=e("./create-class"),n=e("./const"),r=e("./mounting"),i=t({template:function(){return this.children[0]}});return t({_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var e=this._viewFunction(this._key);return null!==e&&void 0!==e||(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(i,null,e)},template:function(){if(this._key=void 0,"function"!=typeof this.props.key)throw new Error("<Switch key={}> must be a function");if(1!==this.children.length)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+e)}if(n.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var e=this._key;if(this.updateKey(),
e===this._key)this._element.update();else{var t=this.findRootNode(),n=document.createTextNode("");t.parentNode.insertBefore(n,t),r.willUnmount(this._element),this._childViews=[],t.parentNode.removeChild(t),r.onUnmount(this._element),r.didUnmount(this._element),this._element=this.createView();var i=r.createNodeForView(this._element,this);r.willMount(this._element),n.parentNode.insertBefore(i,n),n.parentNode.removeChild(n),r.onMount(this._element),r.didMount(this._element)}}})}),define("submodules/dcgview/src/switch-union",["require","./create-class","./mounting","./create-element"],function(e){function t(e,t,n){return o(s,{getCase:function(){var n=t();return e?n&&n[e]:n},buildChildView:function(e){var r=n[e];if(r)return r(t)}})}function n(e,n){return"string"==typeof e?t.bind(this,e,n):t(void 0,e,n)}var r=e("./create-class"),i=e("./mounting"),o=e("./create-element"),a=r({template:function(){return this.children[0]}}),s=r({_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var e=this.props.buildChildView(this._case);return null!==e&&void 0!==e||(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(a,null,e)},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var e=this._case;if(this.updateCase(),e===this._case)this._element.update();else{var t=this.findRootNode(),n=document.createTextNode("");t.parentNode.insertBefore(n,t),i.willUnmount(this._element),this._childViews=[],t.parentNode.removeChild(t),i.onUnmount(this._element),i.didUnmount(this._element),this._element=this.createView();var r=i.createNodeForView(this._element,this);i.willMount(this._element),n.parentNode.insertBefore(r,n),n.parentNode.removeChild(n),i.onMount(this._element),i.didMount(this._element)}}});return n}),define("submodules/dcgview/src/if",["require","./create-class","./const","./switch"],function(e){var t=e("./create-class"),n=e("./const"),r=e("./switch");return t({_isDCGIf:!0,template:function(){if("function"!=typeof this.props.predicate)throw new Error("<If predicate={}> must be a function");if(1!==this.children.length)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+e)}if(n.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var t=function(){return!!this.props.predicate()}.bind(this),i=function(e){if(e)return this._viewFunction()}.bind(this);return this.createElement(r,{key:t},i)}})}),define("submodules/dcgview/src/if-defined",["require","./create-class","./mounting","./create-element"],function(e){function t(e,t){return i(a,{isDefined:function(){return null!=e()},buildChildView:function(){return t(e)}})}var n=e("./create-class"),r=e("./mounting"),i=e("./create-element"),o=n({template:function(){return this.children[0]}}),a=n({_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var e;return this._isDefined&&(e=this.props.buildChildView()),null!==e&&void 0!==e||(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(o,null,e)},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var e=this._isDefined;if(this.updateIsDefined(),e===this._isDefined)this._element.update();else{var t=this.findRootNode(),n=document.createTextNode("");t.parentNode.insertBefore(n,t),r.willUnmount(this._element),this._childViews=[],t.parentNode.removeChild(t),r.onUnmount(this._element),r.didUnmount(this._element),this._element=this.createView();var i=r.createNodeForView(this._element,this);r.willMount(this._element),n.parentNode.insertBefore(i,n),n.parentNode.removeChild(n),r.onMount(this._element),r.didMount(this._element)}}});return t}),define("submodules/dcgview/src/if-else",["require","./switch-union"],function(e){function t(e,t){return n(function(){return e()?"true":"false"},t)}var n=e("./switch-union");return t}),define("submodules/dcgview/src/textarea",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeValue:function(){var e=this.props.value();return null===e||void 0===e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var e=n({},this.props,{onInput:function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.disabled&&(e.disabled=function(){return!!this.props.disabled()||void 0}.bind(this)),delete e.value,this.createElement("textarea",e,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})}),define("submodules/dcgview/src/input",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeValue:function(){var e=this.props.value();return null===e||void 0===e?"":e+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var e=n({},this.props,{value:this.const(this.computeValue()),onInput:function(e){this.props.onInput(e.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.onEnterPressed&&(e.onKeypress=function(e){13===e.which&&this.props.onEnterPressed()}.bind(this)),this.props.disabled&&(e.disabled=function(){return!!this.props.disabled()||void 0}.bind(this)),e.hasOwnProperty("tabindex")||(e.tabindex=function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}.bind(this)),this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeValue();this.rootDOM.value!==e&&(this.rootDOM.value=e)}})}),define("submodules/dcgview/src/checkbox",["require","./create-class","./spread"],function(e){var t=e("./create-class"),n=e("./spread");return t({computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var e=n({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:function(e){this.props.onChange(e.target.checked),this._isMounted&&this.update()}.bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}})}),define("submodules/dcgview/src/components",["require","./for","./switch","./switch-union","./if","./if-defined","./if-else","./textarea","./input","./checkbox"],function(e){return{For:e("./for"),Switch:e("./switch"),SwitchUnion:e("./switch-union"),If:e("./if"),IfDefined:e("./if-defined"),IfElse:e("./if-else"),Textarea:e("./textarea"),Input:e("./input"),Checkbox:e("./checkbox")}}),define("submodules/dcgview/src/class",["require","./create-class"],function(e){return e("./create-class")({template:function(){}})}),define("submodules/dcgview/src/dcg-view",["require","./create-element","./create-class","./mounting","./spread","./const","./custom-attributes","./attr-style","./attr-class","./attr-lifecycle","./components","./warnings","./bind-text","./class"],function(e){var t=e("./create-element"),n=e("./create-class"),r=e("./mounting"),i=e("./spread"),o=e("./const"),a=e("./custom-attributes"),s=e("./attr-style"),c=e("./attr-class"),l=e("./attr-lifecycle"),u=e("./components"),d=e("./warnings"),p=e("./bind-text").enableSpanWrapping,h=e("./class"),f={createElement:t,createClass:n,mountToNode:r.mountToNode,unmountFromNode:r.unmountFromNode,spread:i,const:o.makeConst,isConst:o.isConst,addCustomAttribute:a.add,Components:u,addWarningHandler:d.addWarningHandler,removeWarningHandler:d.removeWarningHandler,enableSpanWrapping:p,Class:h};return f.addCustomAttribute("style",s),f.addCustomAttribute("class",c),f.addCustomAttribute("willMount",l("willMount")),f.addCustomAttribute("onMount",l("onMount")),f.addCustomAttribute("didMount",l("didMount")),f.addCustomAttribute("willUnmount",l("willUnmount")),f.addCustomAttribute("onUnmount",l("onUnmount")),f.addCustomAttribute("didUnmount",l("didUnmount")),f.addCustomAttribute("willUpdate",l("willUpdate")),f.addCustomAttribute("onUpdate",l("onUpdate")),f.addCustomAttribute("didUpdate",l("didUpdate")),f}),define("submodules/dcgview/dcgview",["require","./src/dcg-view"],function(e){return e("./src/dcg-view")}),define("lib/urlparser",["require","exports"],function(e,t){"use strict";function n(e,t){var n=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)"),r=n.exec(e);return r?decodeURIComponent(r[1].replace(/\+/g,"%20")):null}function r(e,t){return new RegExp("[?|&]"+t+"(=|&|;|$)").test(e)}function i(e,t,n){if(t!==encodeURIComponent(t))throw new Error("Programming error: parameter name should be URL-safe without encoding.");var r=encodeURIComponent(n);return e.length?/\?/.test(e)?e+"&"+t+"="+r:e+"?"+t+"="+r:"?"+t+"="+r}function o(e,t,n){var r=new RegExp("([?|&])"+t+"=([^&;]+?)(&|#|;|$)"),i=r.exec(e);if(!i)return e;var o=i[1],a=i[2],s=""+o+t+"="+a,c=encodeURIComponent(n),l=""+o+t+"="+c;return e.replace(s,l)}function a(e,t){var n=new RegExp("([?|&])"+t+"=([^&;]+?)(&|#|;|$)"),r=n.exec(e);if(!r)return e;var i=r[1],o=r[2],a=""+i+t+"="+o,s=e.replace(a,"");return"&"===s[0]?s.replace("&","?"):s}function s(e,t,n){return r(e,t)?o(e,t,n):i(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.setParameter=t.deleteParameter=t.replaceParameter=t.pushParameter=t.hasParameter=t.getParameter=void 0,t.getParameter=n,t.hasParameter=r,t.pushParameter=i,t.replaceParameter=o,t.deleteParameter=a,t.setParameter=s}),define("lib/retain-lang",["require","exports","./parse-query-params","./urlparser"],function(e,t,n,r){"use strict";function i(e){var t=c.exec(e);if(t){var n=t[1];return!l.test(n)}return!1}function o(e,t){var o=n.getQueryParams(),c="";return c=void 0!==t?t:o.lang?""+o.lang:"",o["su-redesign"]&&(e=r.setParameter(e,"su-redesign","1")),""===e||""===c||a.test(e)||s.test(e)||i(e)?e:r.setParameter(e,"lang",c)}Object.defineProperty(t,"__esModule",{value:!0}),t.retainLang=t.domainNotDesmos=void 0;var a=/lang=[A-Za-z]+/,s=/(cl|learn|support).desmos.com/,c=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,l=/(^desmos\.com$)|(\.desmos.com$)/;t.domainNotDesmos=i,t.retainLang=o}),define("loadcss!dcgview-shim",function(){}),define("dcgview",["require","exports","submodules/dcgview/dcgview","jquery","bugsnag","lib/retain-lang","loadcss!dcgview-shim"],function(e,t,n,r,i,o){"use strict";return n.addWarningHandler(function(e){return i.notify(e)}),n.addCustomAttribute("href",function(e){var t=o.retainLang(e()),n={value:""+o.retainLang(e()),bindings:{onMount:function(e){if(!r(e).is("a")&&!r(e).is("use"))throw new Error("Cannot have an href on a non-link element.")}}};return n.bindings.onUpdate=function(n){var r=o.retainLang(e());t!==r&&(t=r,n.setAttribute("href",r))},n}),n.addCustomAttribute("onTap",function(e){return{value:"",bindings:{onMount:function(t){r(t).on("dcg-tap",e)}}}}),n.addCustomAttribute("ignoreRealClick",function(e){return{bindings:{onMount:function(t){r(t).on("click",function(t){e()&&t.preventDefault()})}}}}),n.addCustomAttribute("onTapStart",function(e){return{bindings:{onMount:function(t){r(t).on("dcg-tapstart",e)}}}}),n.addCustomAttribute("onTapMove",function(e){return{bindings:{onMount:function(t){r(t).on("dcg-tapmove",e)}}}}),n.addCustomAttribute("onTapEnd",function(e){return{bindings:{onMount:function(t){r(t).on("dcg-tapend",e)}}}}),n.addCustomAttribute("onLongHold",function(e){return{bindings:{onMount:function(t){r(t).on("dcg-longhold",e)}}}}),n.addCustomAttribute("manageFocus",function(e){return void 0===e()?{}:{bindings:{onMount:function(t){e().shouldBeFocused()&&t.focus(),t.onfocus=function(t){e().shouldBeFocused()||e().onFocusedChanged(!0,t)},t.onblur=function(t){e().shouldBeFocused()&&e().onFocusedChanged(!1,t)}},onUpdate:function(t){var n=e().shouldBeFocused(),r=document.activeElement===t;n&&!r?t.focus():r&&!n&&t.blur()},willUnmount:function(e){delete e.onfocus,delete e.onblur}}}}),n}),define("expressions/braille-input",["require","exports","tslib","dcgview","jquery"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r.Components.Input,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.ASCIICharacters=" A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",this.ASCIITable=[],this.HomeRowCharacters="FDSJKL",this.charCodes=[],this.sixKeyModel={keysDown:0,stickyKeysDown:0};var e;for(e=0;e<this.ASCIICharacters.length;e++)this.ASCIITable.push(this.ASCIICharacters.charCodeAt(e));for(e=0;e<this.HomeRowCharacters.length;e++)this.charCodes.push(this.HomeRowCharacters.charCodeAt(e))},t.prototype.template=function(){var e=this;return r.createElement(o,{class:this.const("dcg-braille-input dcg-do-blur"),tabindex:function(){return e.props.tabindex?e.props.tabindex():0},readonly:function(){return e.props.isStatic()?"true":void 0},autocomplete:this.const("off"),autocorrect:this.const("off"),autocapitalize:this.const("off"),spellcheck:this.const("false"),onKeydown:this.bindFn(this.onKeydown),onKeyup:this.bindFn(this.onKeyup),onInput:this.bindFn(this.props.onInput),value:function(){return e.props.value()},"aria-label":function(){return e.props.ariaLabel()||""},didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.props.didUnmount),placeholder:function(){return e.props.placeholder?e.props.placeholder():""}})},t.prototype.didMount=function(e){var t=this;this.rootNode=e,i(this.rootNode).on("focus",function(e){!0!==t.props.shouldFocus()&&t.props.onFocusedChanged(!0,e.originalEvent)}).on("blur",function(e){!1!==t.props.shouldFocus()&&t.props.onFocusedChanged(!1,e.originalEvent)}),this.props.didMount(e),this.updateFocus()},t.prototype.didUpdate=function(){this.updateFocus()},t.prototype.updateFocus=function(){this.rootNode&&(this.props.shouldFocus()&&document.activeElement!==this.rootNode&&this.rootNode.focus(),this.props.shouldFocus()||document.activeElement!==this.rootNode||this.rootNode.blur())},t.prototype.onKeydown=function(e){var t=this.charCodes.indexOf(e.which);this.props.isStatic()||!this.isSixKeyInput()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||-1===t?this.props.onKeydown&&this.props.onKeydown(e):(this.sixKeyModel=n.__assign(n.__assign({},this.sixKeyModel),{keysDown:this.addKey(this.sixKeyModel.keysDown,t),stickyKeysDown:this.addKey(this.sixKeyModel.stickyKeysDown,t)}),e.preventDefault())},t.prototype.onKeyup=function(e){var t=this.charCodes.indexOf(e.which),r=!1;return this.props.isStatic()||!this.isSixKeyInput()||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||-1===t?r=!0:(this.sixKeyModel=n.__assign(n.__assign({},this.sixKeyModel),{keysDown:this.removeKey(this.sixKeyModel.keysDown,t)}),0===this.sixKeyModel.keysDown&&(this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),this.sixKeyModel=n.__assign(n.__assign({},this.sixKeyModel),{stickyKeysDown:0}))),r||e.preventDefault(),r},t.prototype.addKey=function(e,t){return e|1<<t},t.prototype.removeKey=function(e,t){return e&~(1<<t)},t.prototype.bitsToASCII=function(e){return String.fromCharCode(this.ASCIITable[e])},t.prototype.addCharacter=function(e){this.rootNode&&!this.props.isStatic()&&(this.rootNode.setRangeText(e,this.rootNode.selectionStart,this.rootNode.selectionEnd,"end"),this.props.onInput(this.rootNode.value))},t.prototype.isSixKeyInput=function(){return"function"==typeof this.props.sixKeyInput&&this.props.sixKeyInput()},t}(r.Class);t.default=a}),define("vendor/mathquill",["require","exports","toplevel/mathquill","mathquill"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MQ=void 0,t.MQ=n.getInterface(1).config(r)}),define("loadcss!dcgview-helpers/static-mathquill-view",function(){}),define("dcgview-helpers/static-mathquill-view",["require","exports","tslib","dcgview","vendor/mathquill","jquery","lib/conditional_blur","loadcss!./static-mathquill-view"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return 1===this.children.length?this.children[0]:r.createElement("div",{didMount:function(t){return e.didMountMathquill(t)}})},t.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},t.prototype.didMountMathquill=function(e){this.staticMath=i.MQ.StaticMath(e),o(e).off(".mathquill").addClass("dcg-static-mathquill-view").on("dcg-tapstart",function(){a.default()}),this.updateMathquill()},t.prototype.didUpdate=function(){this.updateMathquill()},t.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex()},t.prototype.updateMathquillLatex=function(){if(this.staticMath){var e=this.props.latex();this.lastLatex!==e&&(this.staticMath.latex(e),this.lastLatex=e,this.props.onReflow&&this.props.onReflow())}},t.prototype.updateMathquillAria=function(){if(this.staticMath&&this.props.getAriaLabel){var e=this.props.getAriaLabel();e!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(e)}},t}(r.Class);t.default=s}),define("loadcss!lib/tooltip",function(){}),define("lib/tooltip",["require","exports","tslib","keys","dcgview","jquery","underscore","dcgview-helpers/static-mathquill-view","loadcss!./tooltip"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;var c=i.Components.IfElse,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){var t;return t={},t[e.getCustomClassName()]=!0,t["dcg-tooltip-positioning-container"]=!0,t["dcg-latex-tooltip-positioning-container"]=e.props.renderAsLatex(),t["dcg-tooltip-gravity-ne-se"]="ne"===e.props.gravity()||"se"===e.props.gravity(),t["dcg-tooltip-gravity-nw-sw"]="nw"===e.props.gravity()||"sw"===e.props.gravity(),t["dcg-tooltip-gravity-n-s"]="n"===e.props.gravity()||"s"===e.props.gravity(),t["dcg-tooltip-gravity-e-w"]="e"===e.props.gravity()||"w"===e.props.gravity(),t},style:function(){return{top:e.props.hitAreaRect().top+(e.props.offset().top||0)+"px",left:e.props.hitAreaRect().left+(e.props.offset().left||0)+"px",width:e.props.hitAreaRect().width+"px",height:e.props.hitAreaRect().height+"px"}}},i.createElement("div",{class:i.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},c(function(){return e.props.renderAsLatex()},{true:function(){return i.createElement("div",{class:function(){return{"dcg-tooltip-message":!0,"dcg-latex":!0,"dcg-sticky-not-stuck":e.props.isStickyAndNotStuck(),"dcg-tooltip-overflow":e.messageOverflows()}},style:function(){return{"max-width":e.getMaxWidth()+"px"}},didMount:function(t){e.tooltipMessage=t}},i.createElement(s.default,{latex:function(){return e.props.tooltip()}}))},false:function(){return i.createElement("div",{class:i.const("dcg-tooltip-message"),style:function(){return{background:e.getBackgroundColor(),cursor:e.props.isStickyAndNotStuck()?"pointer":"default"}}},e.props.tooltip)}})),i.createElement("div",{class:i.const("dcg-tooltip-arrow"),style:function(){return e.props.renderAsLatex()?e.getArrowWithBorderStyle():e.getSolidArrowStyle()}}))},t.prototype.getCustomClassName=function(){return this.props.class?this.props.class():""},t.prototype.messageOverflows=function(){return this.tooltipMessage&&this.tooltipMessage.getBoundingClientRect().width>=this.getMaxWidth()},t.prototype.getArrowWithBorderStyle=function(){var e=this.props.gravity(),t=this.getBackgroundColor(),r=this.props.isStickyAndNotStuck()?".95":"1",i={width:"8px",height:"8px",border:"1px solid #bbb",background:t,opacity:r};switch(e){case"s":return n.__assign(n.__assign({},i),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"sw":return n.__assign(n.__assign({},i),{top:"100%",right:"10px","margin-top":"1px","border-right":"0","border-bottom":"0"});case"se":return n.__assign(n.__assign({},i),{top:"100%",left:"10px","margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return n.__assign(n.__assign({},i),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"nw":return n.__assign(n.__assign({},i),{bottom:"100%",right:"10px","margin-bottom":"1px","border-left":"0","border-top":"0"});case"ne":return n.__assign(n.__assign({},i),{bottom:"100%",left:"10px","margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return n.__assign(n.__assign({},i),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return n.__assign(n.__assign({},i),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return e}},t.prototype.getSolidArrowStyle=function(){var e=this.props.gravity(),t=this.getBackgroundColor(),n="transparent transparent "+t+" transparent",r=t+" transparent transparent transparent",i="transparent "+t+" transparent transparent",o="transparent transparent transparent "+t;switch(e){case"s":return{top:"100%",left:"50%",border:"5px solid transparent","border-color":n,"margin-top":"-5px","margin-left":"-5px"};case"sw":return{top:"100%",right:"10px",border:"5px solid transparent","border-color":n,"margin-top":"-5px","margin-left":"-5px"};case"se":return{top:"100%",left:"10px",border:"5px solid transparent","border-color":n,"margin-top":"-5px","margin-left":"-5px"};case"n":return{bottom:"100%",left:"50%",border:"5px solid transparent","border-color":r,"margin-bottom":"-5px","margin-left":"-5px"};case"nw":return{bottom:"100%",right:"10px",border:"5px solid transparent","border-color":r,"margin-bottom":"-5px","margin-left":"-5px"};case"ne":return{bottom:"100%",left:"10px",border:"5px solid transparent","border-color":r,"margin-bottom":"-5px","margin-left":"-5px"};case"e":return{top:"50%",left:"100%",border:"5px solid transparent","border-color":i,"margin-left":"-5px","margin-top":"-5px"};case"w":return{top:"50%",right:"100%",border:"5px solid transparent","border-color":o,"margin-right":"-5px","margin-top":"-5px"};default:return e}},t.prototype.getBackgroundColor=function(){return this.props.renderAsLatex()?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"},t.prototype.getMaxWidth=function(){var e=this.props.gravity(),t=this.props.hitAreaRect().left+(this.props.offset().left||0),n=t+this.props.hitAreaRect().width,r=.5*this.props.hitAreaRect().width+t,i=window.innerWidth-5;switch(e){case"se":case"ne":case"e":return i-t;case"sw":case"nw":case"w":return n-5;case"s":case"n":return 2*Math.min(i-r,r-5);default:return e}},t.prototype.getMessageStyle=function(){var e=this.props.hitAreaRect(),t=this.props.gravity();switch(t){case"s":return{top:"100%",transform:"translate(-50%, 0)",left:.5*e.width+"px","margin-top":"5px","text-align":"center"};case"sw":return{top:"100%",right:"0","margin-top":"5px","text-align":"right"};case"se":return{top:"100%","margin-top":"5px","text-align":"left"};case"n":return{bottom:"100%",transform:"translate(-50%, 0)",left:.5*e.width+"px","margin-bottom":"5px","text-align":"center"};case"nw":return{bottom:"100%",right:"0","margin-bottom":"5px","text-align":"right"};case"ne":return{bottom:"100%","margin-bottom":"5px","text-align":"left"};case"e":return{transform:"translate(0, -50%)",left:"100%",top:.5*e.height+"px","margin-left":"5px","text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",top:.5*e.height+"px","margin-right":"5px","text-align":"right"};default:return t}},t}(i.Class),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.uuid=a.uniqueId(),this.isMounted=!0},t.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-tooltip-hit-area-container"),handleevent:i.const("true"),didMount:function(t){e.hitAreaNode=t,e.setupEventListeners(e.hitAreaNode)},onTap:function(){e.shouldHideOnTargetClick()?e.hideTooltip():e.shouldShowOnTargetClick()?e.showTooltip():e.shouldStickOnTargetClick()&&(e.isStuck?(e.clearTimeouts(),e.hideTooltip()):(e.showTooltip(),e.stickTooltip()))}},this.children)},t.prototype.didUpdate=function(){this.updateTooltip()},t.prototype.updateTooltip=function(){if(this.wrapperRef){if(!this.props.tooltip())return void this.hideTooltip();var e=this.hitAreaNode.getBoundingClientRect(),t=this.wrapperRef.elt.getBoundingClientRect(),n=this.wrapperRef,r=n.originalTop,i=n.originalLeft,o=e.top-t.top,a=e.left-t.left;Math.abs(o-r)>3||Math.abs(a-i)>3?this.hideTooltip():this.wrapperRef.view.update()}},t.prototype.handleShowEvent=function(e){if(!this.props.disabled||!this.props.disabled()){var t=this.props.delay?this.props.delay():500;this.clearTimeouts(),this.showTooltipTimeout=setTimeout(e,t)}},t.prototype.handleHideEvent=function(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)},t.prototype.setupEventListeners=function(e){var t=this;o(e).on("tipsyshow",function(n){n.target===e&&t.handleShowEvent(function(){t.showTooltip()})}).on("tipsyhide",function(n){n.target!==e||t.isStuck||t.handleHideEvent()}),this.shouldShowOnTargetClick()&&this.setUpHideOnExternalMousedown()},t.prototype.willUnmount=function(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()},t.prototype.setUpHideOnExternalMousedown=function(){var e=this;o(document).on("mousedown.dcg-tooltip-"+this.uuid+" touchstart.dcg-tooltip-"+this.uuid+" pointerdown.dcg-tooltip-"+this.uuid,function(t){e.wrapperRef&&(o(t.target).closest(e.hitAreaNode).length||o(t.target).closest(e.wrapperRef.elt).length||e.hideTooltip())})},t.prototype.stickTooltip=function(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))},t.prototype.clearTimeouts=function(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)},t.prototype.showTooltip=function(){var e=this;if(this.isMounted&&!this.wrapperRef&&this.props.tooltip()){var t=this.hitAreaNode.getBoundingClientRect(),n=document.createElement("div");n.className="dcg-tooltip-mount-pt";o(this.hitAreaNode).closest(".dcg-tap-container")[0].appendChild(n);var a=n.getBoundingClientRect(),s=t.left-a.left,c=t.top-a.top,u={tooltip:this.props.tooltip,class:this.props.class,isStickyAndNotStuck:function(){return e.shouldStickOnTargetClick()&&!e.isStuck},offset:function(){return e.props.offset?e.props.offset():{}},gravity:function(){return e.props.gravity?e.props.gravity():"s"},renderAsLatex:function(){return!!e.props.renderAsLatex&&e.props.renderAsLatex()},hitAreaRect:function(){return{top:c||0,left:s||0,width:t.width||0,height:t.height||0}}};this.setupEventListeners(n),o(n).on("dcg-tap",function(){e.shouldStickOnTargetClick()&&e.stickTooltip()});var d=i.mountToNode(l,n,u);o(document).on("keydown.dcg-tooltip-"+this.uuid,function(t){r.lookup(t)===r.ESCAPE&&e.hideTooltip()});var p=function(){return e.updateTooltip()};window.addEventListener("scroll",p,!0),this.wrapperRef={elt:n,view:d,originalLeft:s,originalTop:c,onScroll:p}}},t.prototype.hideTooltip=function(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,o(document).off(".dcg-tooltip-"+this.uuid),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),i.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)},t.prototype.shouldStickOnTargetClick=function(){return!!this.props.targetClickBehavior&&"stick"===this.props.targetClickBehavior()},t.prototype.shouldShowOnTargetClick=function(){return!!this.props.targetClickBehavior&&"show"===this.props.targetClickBehavior()},t.prototype.shouldHideOnTargetClick=function(){return!this.props.targetClickBehavior||"hide"===this.props.targetClickBehavior()},t}(i.Class);t.Tooltip=u}),define("lib/abraham-helpers",["require","exports","abraham"],function(e,t,n){"use strict";function r(e,t){return"nemeth"===t?n.latexToNemeth(e):"ueb"===t?n.latexToUeb(e):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}function i(e,t){return"nemeth"===t?n.nemethToLatex(e):"ueb"===t?n.uebToLatex(e):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}Object.defineProperty(t,"__esModule",{value:!0}),t.brailleToLatex=t.latexToBraille=void 0,t.latexToBraille=r,t.brailleToLatex=i}),define("loadcss!dcgview-helpers/mathquill-view",function(){}),define("dcgview-helpers/mathquill-view",["require","exports","tslib","keys","browser","dcgview","vendor/mathquill","jquery","./static-mathquill-view","loadcss!./mathquill-view"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXPRESSION_SIZE_LIMIT=void 0;var l=o.Components.If;t.EXPRESSION_SIZE_LIMIT=100;var u=function(e){function u(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastLatexProp="",t.wasFocusedLastUpdate=!1,t}return n.__extends(u,e),u.prototype.template=function(){var e=this;return 1===this.children.length?this.children[0]:o.createElement("div",{class:o.const("dcg-mq-container")},o.createElement(l,{predicate:function(){return e.getPlaceholder().trim().length>0}},function(){return o.createElement("span",{class:o.const("dcg-mq-placeholder")},o.createElement(c.default,{latex:function(){return e.getPlaceholder()}}))}),o.createElement("div",{class:function(){return{"dcg-math-field":!0,"dcg-no-fadeout":e.props.noFadeout&&e.props.noFadeout(),"dcg-invalid":e.props.hasError(),"dcg-focus":e.props.isFocused()}},didMount:function(t){return e.didMountMathquill(t)},"data-dcg-label":function(){return e.props.dataLabelAttributeValue?e.props.dataLabelAttributeValue():void 0}}))},u.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},u.prototype.willUnmount=function(){this.$mathField.off(".view"),this.mathField=void 0},u.prototype.getPlaceholder=function(){return this.props.placeholder?this.props.isFocused()?"":this.props.latex()?"":this.props.placeholder():""},u.prototype.didMountMathquill=function(e){var t=this,o=n.__assign(n.__assign({},this.props.config()),{handlers:{reflow:function(e){t.props.onReflow&&t.mathField&&t.props.onReflow(e)}},onCut:function(){t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},onPaste:function(){t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},overrideTypedText:function(e){t.mathField&&t.viewCanAcceptText(e)&&(t.props.onUserTypedText?t.props.onUserTypedText(e):(t.mathField.typedText(e),t.props.onUserChangedLatex(t.mathField.latex())))},overrideKeystroke:function(e,n){if("Backspace"===e&&n.preventDefault(),t.mathField){if("Spacebar"===e&&t.props.disableSpace&&t.props.disableSpace())return n.preventDefault();if(n.originalEvent){var i=r.lookup(n.originalEvent);if("Up"===i||"Down"===i||"Left"===i||"Right"===i||"Esc"===i){var o=[];n.ctrlKey&&o.push("Ctrl"),n.metaKey&&o.push("Meta"),n.altKey&&o.push("Alt"),n.shiftKey&&o.push("Shift"),o.length?(o.push(i),e=o.join("-")):e=i}}t.props.onUserPressedKey?t.props.onUserPressedKey(e,n):(t.mathField.keystroke(e,n),t.props.onUserChangedLatex(t.mathField.latex()))}}})
;this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(o.substituteTextarea=function(){return s('<textarea autocorrect="off" autocapitalize="none" spellcheck="false" autocomplete="off">')[0]}),this.$mathField=s(e),this.mathField=a.MQ.MathField(e,o),e._mqMathFieldInstance=this.mathField,e._mqViewInstance=this,this.$mathField.on("focusin.view focusout.view",function(e){return t.onFocusEvent(e)}).on("paste.view",function(e){return t.onPasteEvent(e)}),(i.IS_IOS||i.IS_ANDROID)&&this.$mathField.on("keypress.view",function(e){return t.onKeypressEvent(e)}),this.hookupMQTapTouch(),this.updateMathquill()},u.prototype.didUpdate=function(){this.updateMathquill()},u.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel()},u.prototype.onFocusEvent=function(e){var t=this.isFocused();t!==this.shouldBeFocused()&&this.props.onFocusedChanged(t,e)},u.prototype.onPasteEvent=function(e){var t="",n=window.clipboardData,r=e.originalEvent;n&&n.getData?t=n.getData("Text"):r&&r.clipboardData&&r.clipboardData.getData&&(t=r.clipboardData.getData("text/plain"));var i=this.viewCanAcceptText(t);return!i&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),i},u.prototype.viewCanAcceptText=function(e){return u.canAcceptText(this.mathField,this.props.capExpressionSize(),e)},u.canAcceptText=function(e,n,r){return!!e&&(!n||e.latex().length+r.length<=t.EXPRESSION_SIZE_LIMIT)},u.prototype.onKeypressEvent=function(e){if(e.stopPropagation(),e.preventDefault(),this.mathField){var t=r.lookupChar(e.originalEvent);t&&this.viewCanAcceptText(t)&&(this.props.onUserTypedText?this.props.onUserTypedText(t):(this.mathField.typedText(t),this.props.onUserChangedLatex(this.mathField.latex())))}},u.prototype.hookupMQTapTouch=function(){var e=this;this.$mathField.on("dcg-tap.view",function(t){if("touch"===t.device&&e.mathField){var n=t.originalEvent.changedTouches[0];e.mathField.clickAt(n.clientX,n.clientY,n.target),e.isFocused()||e.mathField.focus();var r=void 0;setTimeout(function(){r=Date.now()},0),e.mathField.ignoreNextMousedown(function(){return void 0===r||Date.now()-r<500})}})},u.prototype.updateMathquillAria=function(){if(this.mathField){var e=this.props.getAriaLabel();e!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(e)}},u.prototype.updateMathquillPostLabel=function(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)},u.prototype.updateMathquillLatex=function(){var e=this.props.latex();this.mathField&&this.lastLatexProp!==e&&(this.props.capExpressionSize()&&e.length>t.EXPRESSION_SIZE_LIMIT||(this.lastLatexProp=e,this.mathField.latex()!==e&&this.mathField.latex(e)))},u.prototype.updateMathquillFocused=function(){if(this.mathField){var e=this.isFocused(),t=this.shouldBeFocused();t&&t!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),this.wasFocusedLastUpdate=t,e!==t&&(t?this.mathField.focus():this.mathField.blur())}},u.prototype.isFocused=function(){return!(!document.activeElement||!s(document.activeElement).closest(this.$mathField).length)},u.prototype.shouldBeFocused=function(){return this.props.isFocused()},u.getFocusedMathquill=function(){if(document.activeElement){var e=s(document.activeElement).closest(".dcg-mq-editable-field")[0];return e?e._mqMathFieldInstance:void 0}},u.getMQViewInstance=function(e){var t=e.el();return t?t._mqViewInstance:void 0},u.applyArrowKeyAndReturnIfWasAtBounds=function(e,t,n){var r=s(e.el()),i=r.find(".dcg-mq-selection"),o=1===i.length&&i.parent().parent()[0]===r[0]&&1===i.parent().children().length;if(("Up"===t||"Down"===t)&&o)return e.keystroke(t,n),!0;var a=r.find(".dcg-mq-cursor")[0];if(!a)return e.keystroke(t,n),!1;var c=a.previousSibling||a.parentElement;return e.keystroke(t,n),c===(a.previousSibling||a.parentElement)},u.simulateKeypress=function(e,t){var n=u.getMQViewInstance(e);n&&(n.props.onUserPressedKey?n.props.onUserPressedKey(t):(e.keystroke(t),n.props.onUserChangedLatex(e.latex())))},u.simulateUserChangedLatex=function(e){var t=u.getMQViewInstance(e);t&&t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},u.handleKeystrokeAndDecideIfSpecialEvent=function(e,t,n){return"Enter"===t||("Delete"===t&&""===e.latex()||("Backspace"===t&&""===e.latex()||("Up"===t?u.applyArrowKeyAndReturnIfWasAtBounds(e,t,n):"Down"===t?u.applyArrowKeyAndReturnIfWasAtBounds(e,t,n):"Left"===t?u.applyArrowKeyAndReturnIfWasAtBounds(e,t,n):"Right"===t?u.applyArrowKeyAndReturnIfWasAtBounds(e,t,n):(e.keystroke(t,n),!1))))},u}(o.Class);t.default=u}),define("loadcss!Abraham",function(){}),define("loadcss!dcgview-helpers/mathquill-braille-wrapper",function(){}),define("dcgview-helpers/mathquill-braille-wrapper",["require","exports","tslib","jquery","abraham","dcgview","../expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","dcgview-helpers/mathquill-view","loadcss!Abraham","loadcss!./mathquill-braille-wrapper"],function(e,t,n,r,i,o,a,s,c,l){"use strict";function u(){if(document.activeElement&&r(document.activeElement).hasClass("dcg-braille-input"))return document.activeElement}function d(e){return!e||""===r(e).val()}Object.defineProperty(t,"__esModule",{value:!0}),t.brailleInputIsEmpty=t.getFocusedBrailleElement=void 0;var p=o.Components.If,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.currentBrailleMode=this.controller.getBrailleMode(),this.hasTranslationError=!1,this.currentLatex=this.props.latex()},t.prototype.isFocused=function(){return this.props.brailleShouldFocus()},t.prototype.isStatic=function(){return!!this.props.isStatic&&this.props.isStatic()},t.prototype.hasError=function(){return!!this.props.hasError&&this.props.hasError()},t.prototype.willUpdate=function(){if(!this.isFocused()||this.currentLatex!==this.props.latex()){var e=this.currentLatex!==this.props.latex();this.currentLatex=this.props.latex();var t=this.controller.getBrailleMode();(t!==this.currentBrailleMode&&"none"!==t||!this.hasTranslationError||e||this.isStatic())&&(this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.hasTranslationError=!1),this.currentBrailleMode=t}},t.prototype.onBrailleInput=function(e){if(this.props.onBrailleInput){var t=this.getLatexFromBraille(e);if(this.hasTranslationError=t.isError,!t.isError&&this.controller.getCapExpressionSize()&&t.value.length>l.EXPRESSION_SIZE_LIMIT)return void(this.props.onExpressionSizeExceeded?this.props.onExpressionSizeExceeded():this.controller.dispatch({type:"expression-size-exceeded"}));this.currentBrailleValue=e,t.isError||(this.currentLatex=t.value,this.props.onBrailleInput(t.value))}},t.prototype.getBrailleFromLatex=function(e){var t=c.latexToBraille(e,this.controller.getBrailleMode());return t.isError?"":i.UnicodeBraille.toExpandedBrailleAscii(t.value)},t.prototype.getLatexFromBraille=function(e){return c.brailleToLatex(i.UnicodeBraille.coerceToSixDotCells(e),this.controller.getBrailleMode())},t.prototype.getBrailleLabel=function(e){return this.getBrailleFromLatex(e.replace(/\s/,"\\ "))},t.prototype.shouldShowBraille=function(){var e=this.controller.getBrailleMode();return"nemeth"===e||"ueb"===e},t.prototype.isOverflowingLeft=function(){return!!this.brailleInput&&this.brailleInput.scrollLeft>0},t.prototype.isOverflowingRight=function(){if(!this.brailleInput)return!1;var e=this.brailleInput.getBoundingClientRect().width;return this.brailleInput.scrollWidth>e+this.brailleInput.scrollLeft+2},t.prototype.didMountBrailleInput=function(e){this.brailleInput=e},t.prototype.didUnmountBrailleInput=function(){this.brailleInput=void 0},t.prototype.getTooltipGravity=function(){var e=this.props.tooltipOptions&&this.props.tooltipOptions();return e&&e.gravity?e.gravity:"se"},t.prototype.getTooltipDelay=function(){var e=this.props.tooltipOptions&&this.props.tooltipOptions();return e&&e.delay?e.delay:0},t.prototype.handleBrailleFocusChanged=function(e,t){this.props.onBrailleFocusedChanged&&this.props.onBrailleFocusedChanged(e,t),this.brailleInput&&(e&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.brailleInput.select(),this.isStatic()&&this.brailleInput.scrollTo(0,0))},t.prototype.getTooltipText=function(){var e=this.props.placeholder&&!this.isFocused()?this.props.placeholder():"";return this.props.latex()||e},t.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-mathquill-wrapper")},o.createElement(p,{predicate:function(){return e.shouldShowBraille()}},function(){return o.createElement("div",{class:function(){return{"dcg-mathquill-braille":!0,"dcg-focus":e.props.brailleShouldFocus&&e.props.brailleShouldFocus(),"dcg-invalid":e.hasError(),"dcg-mathquill-static-braille":e.isStatic(),"dcg-mathquill-braille-overflow-left":e.isOverflowingLeft(),"dcg-mathquill-braille-overflow-right":e.isOverflowingRight()}},"data-dcg-limit":function(){return e.props.dataDCGLimit?e.props.dataDCGLimit():void 0},"data-dcg-label":function(){return e.props.dataLabelAttributeValue?e.props.dataLabelAttributeValue():void 0}},o.createElement(s.Tooltip,{class:e.const("dcg-mathquill-braille-tooltip"),renderAsLatex:e.const(!0),tooltip:function(){return e.getTooltipText()},gravity:e.bindFn(e.getTooltipGravity),delay:e.bindFn(e.getTooltipDelay),targetClickBehavior:e.const("show")},o.createElement(a.default,{ariaLabel:function(){return e.props.ariaLabel?e.getBrailleLabel(e.props.ariaLabel()):""},didMount:e.bindFn(e.didMountBrailleInput),didUnmount:e.bindFn(e.didUnmountBrailleInput),onFocusedChanged:e.bindFn(e.handleBrailleFocusChanged),shouldFocus:e.props.brailleShouldFocus||e.const(!1),onKeydown:e.props.onBrailleKeydown,onInput:e.bindFn(e.onBrailleInput),sixKeyInput:function(){return e.controller.getSixKeyInput()},value:function(){return e.currentBrailleValue},placeholder:function(){return e.props.placeholder?e.getBrailleFromLatex(e.props.placeholder()):""},tabindex:function(){return e.props.tabindex?e.props.tabindex():0},isStatic:e.bindFn(e.isStatic)})))}),o.createElement("div",{class:o.const("dcg-typeset-math"),style:function(){return{display:e.shouldShowBraille()?"none":void 0}}},this.children))},t}(o.Class);t.default=h,t.getFocusedBrailleElement=u,t.brailleInputIsEmpty=d}),define("expressions/list_move_controller",["require","exports","core/lib/dragmode","core/lib/number-to-latex","core/lib/label","lib/rounding","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/list","graphing-calc/models/image","core/math/poi","core/math/functions"],function(e,t,n,r,i,o,a,s,c,l,u,d){"use strict";function p(e,t,r){if(r.tableInfo){c.setSelected(t,void 0);var i=e.getItemModel(r.tableInfo.tableId);if(!i||"table"!==i.type)return;s.setIsDraggingOnGrapher(i,!0)}else{var o=e.getItemModel(r.sketch.id);if(!o||"expression"!==o.type&&"image"!==o.type)return;if("image"!==o.type&&c.setSelected(t,void 0),!o.formula||!o.formula.move_strategy)return;for(var u=o.formula.move_strategy,d=0;d<u.length;d++)if("updateCoordinate"===u[d].type)"image"===o.type?l.setIsDraggingOnGrapher(o,!0):"expression"===o.type&&a.setIsDraggingOnGrapher(o,!0);else if("updateSlider"===u[d].type||"updateSliderNonlinear"===u[d].type){var p=e.getItemModel(u[d].id);if(!p||"expression"!==p.type)continue;var h;if((h="expression"===o.type?o.reconciledDragMode:void 0)===n.DragMode.NONE||0===d&&h===n.DragMode.Y||1===d&&h===n.DragMode.X)continue;a.setSliderDragging(p,!0)}}}function h(e,t){if(t.tableInfo){var n=e.getItemModel(t.tableInfo.tableId);if(!n||"table"!==n.type)return;return void s.setIsDraggingOnGrapher(n,!1)}var r=e.getItemModel(t.sketch.id);if(r&&("expression"===r.type||"image"===r.type)&&r.formula&&r.formula.move_strategy){var i=r.formula.move_strategy;if("updateSliderNonlinear"===i[0].type){var o=e.getItemModel(i[0].id);if(!o||"expression"!==o.type)return;a.setSliderDragging(o,!1)}for(var c=0;c<i.length;c++)if("image"===r.type?l.setIsDraggingOnGrapher(r,!1):"expression"===r.type&&a.setIsDraggingOnGrapher(r,!1),"updateSlider"===i[c].type||"updateSliderNonlinear"===i[c].type){var o=e.getItemModel(i[c].id);if(!o||"expression"!==o.type)continue;a.setSliderDragging(o,!1)}}}function f(e,t,n,i){var a=t.tableInfo.tableId,c=t.tableInfo.rowIndex,l=t.tableInfo.columnId,u=t.tableInfo.dragX,d=t.tableInfo.dragY,p=e.getItemModel(a);if(p&&"table"===p.type){var h=s.getColumnModel(p,l);if(h){var f=i.closestPointOnScreen(n),g=i.pixelsToMath.mapRect(m(f,.5)),y={x:r.default(o.shortestDecimalBetween(g.left,g.right)),y:r.default(o.shortestDecimalBetween(g.top,g.bottom))};if(u&&s.setCellLatex(p,{row:c+1,column:0},y.x),d){var v=h.index;s.setCellLatex(p,{row:c+1,column:v},y.y)}}}}function m(e,t){return{left:e.x-t,right:e.x+t,top:e.y+t,bottom:e.y-t}}function g(e,t,n){var a;a=e.assignment?i.identifierToLatex(e.assignment)+"=":"";var s=o.shortestDecimalBetween(t[0].min,t[0].max),c=o.shortestDecimalBetween(t[1].min,t[1].max),l="updateCoordinate"===e.move_strategy[0].type&&y(0,n),u="updateCoordinate"===e.move_strategy[1].type&&y(1,n);return a+"\\left("+(l?r.default(s):e.move_strategy[0].inputString)+","+(u?r.default(c):e.move_strategy[1].inputString)+"\\right)"}function y(e,t){switch(t){case n.DragMode.X:return 0===e;case n.DragMode.Y:return 1===e;case n.DragMode.XY:return!0;default:return!1}}function v(e,t,n){if(0===n[0]&&0===n[1])return{x:t.x,y:t.y,width:e.width,height:e.height};var r=Math.cos(e.radianAngle),i=Math.sin(e.radianAngle),o=t.x-e.x,a=t.y-e.y;if(0===n[0])return{x:e.x,y:e.y,width:e.width,height:2*n[1]*(r*a+i*o)};if(0===n[1])return{x:e.x,y:e.y,width:2*n[0]*(r*o-i*a),height:e.height};var s=2*(e.width*n[0]*(r*o-i*a)+e.height*n[1]*(i*o+r*a))/(e.width*e.width+e.height*e.height);return{x:e.x,y:e.y,width:s*e.width,height:s*e.height}}function b(e,t,n){for(var r=[{x:t.left,y:t.bottom},{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom}],i=["x","y","width","height"],o={x:1/0,y:1/0,width:1/0,height:1/0},a={x:-1/0,y:-1/0,width:-1/0,height:-1/0},s=0,c=r;s<c.length;s++)for(var l=c[s],u=v(e,l,n),d=0,p=i;d<p.length;d++){var h=p[d];o[h]=Math.min(o[h],u[h]),a[h]=Math.max(a[h],u[h])}return{min:o,max:a}}function x(e,t,n,i,s){var c=t.formula;if(!c||!c.move_strategy)return!1;var u=c.dimensions,d=n.scaleFactor,p=0!==d[0]&&0!==d[1],h=s.closestPointOnScreen(i),f=s.pixelsToMath.mapRect(m(h,p?.05:.5)),g=b(u,f,d),y=s.mathToPixels.mapRect({left:u.x-.5*u.width,right:u.x+.5*u.width,top:u.y-.5*u.height,bottom:u.y+.5*u.height}),v=Math.abs(y.right-y.left),x=Math.abs(y.bottom-y.top),E=s.mathToPixels.mapRect({left:g.min.x-.5*g.min.width,right:g.min.x+.5*g.min.width,top:g.min.y-.5*g.min.height,bottom:g.min.y+.5*g.min.height}),w=Math.abs(E.right-E.left),_=Math.abs(E.bottom-E.top);if(w<v&&w<1||_<x&&_<1)return!1;for(var S=["width","height","x","y"],M=!1,k=0;k<S.length;k++){var C=S[k],I=c.move_strategy[k];switch(I.type){case"updateCoordinate":var T=o.shortestDecimalBetween(g.min[C],g.max[C]),L=r.default(T);switch(C){case"width":case"height":l.setMQAttribute(t,C,L);break;case"x":if("updateCoordinate"===c.move_strategy[3].type){var D=o.shortestDecimalBetween(g.min.y,g.max.y),P=r.default(D),A="\\left("+L+","+P+"\\right)";l.setMQAttribute(t,"center",A)}else{var A="\\left("+L+","+c.move_strategy[3].inputString+"\\right)";l.setMQAttribute(t,"center",A)}break;case"y":if("updateCoordinate"!==c.move_strategy[2].type){var A="\\left("+c.move_strategy[2].inputString+","+L+"\\right)";l.setMQAttribute(t,"center",A)}break;default:return C}M=!0;break;case"updateSlider":var O=e.getItemModel(I.id);if(!O||"expression"!==O.type)continue;var F=I.coefficients[0],N=I.coefficients[1],q=N*g.min[C]+F,R=N*g.max[C]+F,B=o.shortestDecimalBetween(q,R),j=O.latex;a.adjustSliderByMovablePoint(O,B),O.latex!==j&&(M=!0)}}return M}function E(e,t,r,i,s){var c=t.formula;if(!c||!c.move_strategy)return!1;var l=t.reconciledDragMode||n.DragMode.NONE,p=!1,h=i.closestPointOnScreen(r),f=i.pixelsToMath.mapRect(m(h,.5)),v=[{min:f.left,max:f.right},{min:f.top,max:f.bottom}];"updateCoordinate"!==c.move_strategy[0].type&&"updateCoordinate"!==c.move_strategy[1].type||(a.setLatex(t,g(c,v,l)),p=!0);for(var b,x,E,w,_,S,M,k=0;k<2;k++)!function(){if(b=c.move_strategy[k],"updateSlider"!==b.type&&"updateSliderNonlinear"!==b.type)return"continue";if(!y(k,l))return"continue";if(!(x=e.getItemModel(b.id))||"expression"!==x.type)return"continue";if(E=x.latex,w=s&&s[k])a.adjustSliderByKeyboard(x,w);else if("updateSlider"===b.type)_=b.coefficients[0],S=b.coefficients[1],M=o.shortestDecimalBetween(S*v[k].min+_,S*v[k].max+_),a.adjustSliderByMovablePoint(x,M);else if("updateSliderNonlinear"===b.type){b.compiled.fn||d.rehydrateCompiledFunction(b.compiled);var t=b.compiled.fn,n=function(e){var n,r=t(e),o=r[0],a=r[1];return n=i.mathToPixels.mapPoint({x:o,y:a}),o=n.x,a=n.y,[o,a]},r=b.initialValue,f=b.min,m=b.max,g=[h.x,h.y],C=u.findLocalClosestPointOnParametric(n,g,r,f,m,1);if(C){var I=o.shortestDecimalBetween(C[0],C[1]);void 0!==f&&I<f&&(I=f),void 0!==m&&I>m&&(I=m),a.adjustSliderByMovablePoint(x,I)}}x.latex!==E&&(p=!0)}();return p}function w(e,t,n,r,i){if(t.tableInfo)return f(e,t,n,r),!0;var o=e.getItemModel(t.sketch.id);return!!o&&("image"===o.type?x(e,o,t,n,r):"expression"===o.type&&E(e,o,n,r,i))}Object.defineProperty(t,"__esModule",{value:!0}),t.onMovePoint=t.onStopMovingPoint=t.onStartMovingPoint=void 0,t.onStartMovingPoint=p,t.onStopMovingPoint=h,t.onMovePoint=w}),define("main/blank_state",["require","exports","core/graphing-calc/migrate-state"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_STATE=void 0,t.BLANK_STATE={version:n.currentVersion,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},t.default=t.BLANK_STATE}),define("expressions/measure-expressions",["require","exports","jquery"],function(e,t,n){"use strict";function r(e){for(var t=[],n=e.getAllItemModels(),r=0,i=n;r<i.length;r++){var o=i[r],a=e.getItemRootNodeById(o.id);a&&t.push(a)}return t}function i(e){for(var t=e.getAllItemModels(),n=t.length-1;n>=0;n--){var r=t[n];if(r.dcgView)return r.id}}function o(e,t){for(var n=r(e),i=0,o=n.length-1;i<=o;){var a=i+Math.floor((o-i)/2),s=n[a],c=s.getBoundingClientRect();if(c.top>t)o=a-1;else{if(!(c.bottom<t))return s;i=a+1}}}function a(e,t){for(var n,i=r(e),o=0,a=i.length-1;o<=a;){var s=o+Math.floor((a-o)/2),c=i[s];c.getBoundingClientRect().top>t?(a=s-1,n=c):o=s+1}return n}function s(e,t){var r=h(e);if(r){if(t){var i=e.getItemRootNodeById(t);if(i){var a=i.getBoundingClientRect();if(a.height>0&&a.top<=r.top&&a.bottom>=r.top)return t}}var s=o(e,r.top);return s?n(s).attr("expr-id"):l(e)}}function c(e,t){var r=h(e);if(r){var a=i(e);if(a){if(t){var s=e.getItemRootNodeById(t);if(s){var c=s.getBoundingClientRect();if(c.height>0&&c.top<=r.bottom&&c.bottom>=r.bottom)return t;if(t===a&&c.bottom<=r.bottom)return t}}var l=o(e,r.bottom);return l&&n(l).attr("expr-id")||a}}}function l(e){var t=h(e);if(t){var r=a(e,t.top-2);if(r)return n(r).attr("expr-id")}}function u(e){return e.find$(".dcg-exppanel")[0]}function d(e){var t=u(e);if(t)return n(t)}function p(e){var t=e.find$(".dcg-exppanel-outer")[0];if(t)return t.getBoundingClientRect()}function h(e){var t=u(e);if(t)return t.getBoundingClientRect()}function f(e){var t=u(e);if(t){var n=t.getBoundingClientRect(),r=t.scrollTop;return n.top-r}}function m(e){var t=e.find$(".dcg-expressionlist");if(1===t.length)return t.height()}function g(e){var t=d(e);return t?t.find(".dcg-drag-container").height():0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDragContainerHeight=t.getExpListHeight=t.getExppanelScrolledTop=t.getExppanelRect=t.getOuterExppanelRect=t.getExppanelSelector=t.getExppanelElt=t.getFirstFullyVisibleItemId=t.getLastVisibleItemId=t.getFirstVisibleItemId=void 0,t.getFirstVisibleItemId=s,t.getLastVisibleItemId=c,t.getFirstFullyVisibleItemId=l,t.getExppanelElt=u,t.getExppanelSelector=d,t.getOuterExppanelRect=p,t.getExppanelRect=h,t.getExppanelScrolledTop=f,t.getExpListHeight=m,t.getDragContainerHeight=g}),define("animation-frame-src",["require"],function(e){var t=0,n=function(e,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=window.setTimeout(function(){e(r+i)},i);return t=r+i,o};return window.requestAnimationFrame&&window.cancelAnimationFrame?{requestAnimationFrame:window.requestAnimationFrame.bind(window),cancelAnimationFrame:window.cancelAnimationFrame.bind(window)}:{requestAnimationFrame:n,cancelAnimationFrame:window.clearTimeout.bind(window)}}),define("lib/animation-frame",["require","exports","animation-frame-src"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAnimationFrame=t.requestAnimationFrame=void 0,t.requestAnimationFrame=n.requestAnimationFrame,t.cancelAnimationFrame=n.cancelAnimationFrame}),define("jquery.handleevent",["require","jquery"],function(e){var t=e("jquery");t.Event.prototype.wasHandled=function(e){e=e||"_*_";var n=this.originalEvent,r=n&&n.handledBy;if(r&&r[e])return!0;if("_*_"!==e)return!1;var i=t(this.target).closest("[handleEvent]");return!(!i.length||i[0]===this.currentTarget)&&"false"!==i.attr("handleEvent")},t.Event.prototype.handle=function(e){e=e||"_*_";var t=this.originalEvent;if(t){var n=t.handledBy;n||(n=t.handledBy={}),n[e]=!0}}}),define("expressions/dragdrop_expressions",["require","exports","tslib","jquery","expressions/measure-expressions","lib/animation-frame","jquery.handleevent"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.active=!1,this.controller=e;var t=i.getExppanelSelector(e);t&&(this.$exppanel=t)}return e.prototype.startDragging=function(e){this.active=!0,this.mouseY=e,this.setupEventListeners()},e.prototype.applyDrag=function(){var e=this.controller.getListModel(),t=e.dragState;if(t){this.scheduleUpdateScroll();var r=this.measureDOM(t);if(r){var i=r.floatingPreviewRect,o=this.controller.getItemModel(t.firstItemId);if(o){for(var a=o.index,s=0,c=r.visibleRects;s<c.length;s++){var l=c[s],u=l.id,d=l.rect;if(u!==o.id){var p=this.controller.getItemModel(u);if(!p)return;if(p.index<o.index){if(i.top<d.top+d.height/2){a=p.index;break}}else i.bottom>d.top+d.height/2&&(a=p.index,"folder"===p.type&&p.collapsed&&(a+=this.controller.getNumberOfItemsInFolder(p.id)))}}var h,f;a>o.index?(h=a,f=a+1):a<o.index?(h=a-1,f=a):(h=a-1,f=a+1);var m=this.controller.getItemModelByIndex(h),g=this.controller.getItemModelByIndex(f),y="",v="";m&&(y="folder"===m.type?m.id:m.folderId),g&&(v="folder"===g.type?g.id:g.folderId);var b="";return y&&(v===y?"folder"===o.type?a=o.index:b=y:"folder"!==o.type&&this.isPreviewTopContainedInFolder(r,y)&&(b=y)),{dragState:n.__assign({},r.dragState),newIndex:a,folderId:b}}}}},e.prototype.measureDOM=function(e){var t=i.getExppanelScrolledTop(this.controller),r=i.getExpListHeight(this.controller);if(void 0!==t&&void 0!==r){var o=i.getDragContainerHeight(this.controller),a=e.mouseY-e.grabOffset+2,s=a-t;s=Math.max(s,-o/2),s=Math.min(s,r-o);var c={top:a,bottom:a+o,height:o},l=this.controller.findFirstVisibleItem(),u=this.controller.findLastVisibleItem();if(l&&u){for(var d=[],p=l.index;p<=u.index;p++){var h=this.controller.getItemModelByIndex(p);if(h){var f=this.controller.getItemRootNodeById(h.id);if(f&&h.id!==e.firstItemId){var m=f.getBoundingClientRect();d.push({id:h.id,rect:m})}}}if(0!==d.length)return{dragState:n.__assign(n.__assign({},e),{itemTop:s}),floatingPreviewRect:c,visibleRects:d}}}},e.prototype.isPreviewTopContainedInFolder=function(e,t){for(var n=e.visibleRects,r=e.floatingPreviewRect,i=0,o=n;i<o.length;i++){var a=o[i],s=a.id,c=a.rect;if(c.top<=r.top&&c.bottom>=r.top){var l=this.controller.getItemModel(s);if(!l)return!1;if("folder"===l.type&&l.id===t)return!0;if("folder"!==l.type&&l.folderId===t)return!0}}return!1},e.prototype.scheduleUpdateScroll=function(){var e=this;this.updateScrollScheduled||(this.updateScrollScheduled=!0,o.requestAnimationFrame(function(){e.updateScroll(),e.updateScrollScheduled=!1}))},e.prototype.stop=function(){this.active=!1,this.tearDownEventListeners(),this.controller.dispatch({type:"stop-dragdrop"})},e.prototype.setupEventListeners=function(){var e=this;r(document).on("dcg-tapmove.dragdrop",function(t){e.mouseY=t.changedTouches[0].clientY,e.controller.dispatch({type:"update-dragdrop",mouseY:e.mouseY})}),r(document).on("dcg-tapend.dragdrop",function(t){e.stop(),t.handle("dragdrop")})},e.prototype.tearDownEventListeners=function(){r(document).off(".dragdrop")},e.prototype.updateScroll=function(){if(this.active){var e=this.$exppanel[0].getBoundingClientRect(),t=0;t=Math.min(t,this.mouseY-e.top),t=Math.max(t,this.mouseY-e.bottom+30),t=t*e.height/900,t&&this.$exppanel.scrollTop(this.$exppanel.scrollTop()+t)}},e}();t.default=a}),define("keypad/mq-commands",["require","exports"],function(e,t){"use strict";function n(e,t){r[t](e)}Object.defineProperty(t,"__esModule",{value:!0}),t.execute=void 0;var r={loga:function(e){e.write("\\log_{}"),e.typedText("("),e.keystroke("Left"),e.keystroke("Down")},nthroot:function(e){e.write("\\sqrt[]{}"),e.keystroke("Left"),e.keystroke("Left")},ddx:function(e){e.write("\\frac{d}{dx}")},arcsin:function(e){e.write("sin^{-1}"),e.typedText("(")},arccos:function(e){e.write("cos^{-1}"),e.typedText("(")},arctan:function(e){e.write("tan^{-1}"),e.typedText("(")},arcsec:function(e){e.write("sec^{-1}"),e.typedText("(")},arccsc:function(e){e.write("csc^{-1}"),e.typedText("(")},arccot:function(e){e.write("cot^{-1}"),e.typedText("(")},"A^T":function(e){e.typedText("^T"),e.keystroke("Right")},"A^-1":function(e){e.typedText("^-1"),e.keystroke("Right")},"A^2":function(e){e.typedText("^2"),e.keystroke("Right")},"a^2":function(e){e.typedText("^2"),e.keystroke("Right")},"a^3":function(e){e.typedText("^3"),e.keystroke("Right")}};t.execute=n}),define("core/lib/get-next-available-id",["require","exports"],function(e,t){"use strict";function n(e){for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n].id);r>t&&(t=r)}return t+1+""}Object.defineProperty(t,"__esModule",{value:!0}),t.getNextAvailableId=void 0,t.getNextAvailableId=n}),define("main/controller",["require","exports","main/propagate_selection","tslib","scroll_helpers","browser","core/lib/label","underscore","lib/i18n","flux","core/types/opacity","core/lib/dragmode","core/types/styles","lib/conditional_blur","core/lib/deepCopy","core/lib/number-to-latex","lib/state-stack","graphing/viewport","core/graphing-calc/migrate-state","core/math/expression-types","core/lib/color-helpers","graphing-calc/models/expression","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/image","graphing-calc/models/folder","graphing-calc/models/text","graphing-calc/models/list","graphing-calc/models/abstract-item","graphing-calc/models/focus","graphing-calc/actions/keyboard","main/expression-zoom-helpers","core/math/evaluate-single-expression","./layout-model","./settings-view-model","jquery","bugsnag","dcgview-helpers/mathquill-braille-wrapper","expressions/list_move_controller","./blank_state","dcgview-helpers/mathquill-view","expressions/measure-expressions","expressions/dragdrop_expressions","keypad/mq-commands","core/lib/random-seed","../core/lib/get-next-available-id"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x,E,w,_,S,M,k,C,I,T,L,D,P,A,O,F,N,q,R,B,j,V,U,G,z,H,W){"use strict";function K(e){return e?r.__assign(r.__assign({},e),{wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0}):e}function Y(e,t){return s.isEqual(K(e),K(t))}Object.defineProperty(t,"__esModule",{value:!0});var X=function(){function e(e){var t=this;this.__nextItemId=0,this.__pendingImageUploads={},this.__waitingForClickableObjectWorkerResponse=!1,this.nextSubscription=0,this.subscriptions={},this._queuedCallbacks=[],this._hasUnsavedChanges=!1,this.shouldScrollSelectedItemIntoViewAfterDispatch=!1,this.lastParsableObjects={},this.expressionSearchOpen=!1,this.toastData={},this.t=function(e,n){var r=t.graphSettings.config.language;return c.t(e,n,r)},this.raw=function(e,t){return c.raw(e,t)},this.unpack=function(e){var n=t.graphSettings.config.language;return c.unpack(e,n)},this.dispatch=function(e){if("blur-focus-location"===e.type&&t.dispatcher.isDispatching())return void t.runAfterDispatch(function(){t.dispatch(e)});if("set-focus-location"===e.type&&t.dispatcher.isDispatching())return void t.runAfterDispatch(function(){t.dispatch(e)});if("tick"===e.type&&t.dispatcher.isDispatching())return void t.runAfterDispatch(function(){t.dispatch(e)});"tick"===e.type||("process-graph-data"===e.type?q.leaveBreadcrumb("dispatch::"+t.bugsnagContext,{type:e.type}):q.leaveBreadcrumb("dispatch::"+t.bugsnagContext,e)),t.dispatcher.isDispatching()&&q.leaveBreadcrumb("dispatch-in-dispatch::"+t.bugsnagContext,{type:e.type}),t.dispatcher.dispatch(e),t.onEventsEmitted&&t.onEventsEmitted(t.enqueuedEvents);for(var n;n=t._queuedCallbacks.shift();)n()},this._requiresTickNextFrame=!1,this.updateViews=function(){for(var e in t.subscriptions)t.subscriptions[e]()},this.bugsnagContext="",this.inPrintMode=!1,this.lastInfiniteScrollFirstDOM=void 0,this.lastInfiniteScrollLastDOM=void 0,this.hasDispatchSinceLastInfiniteScrollUpdate=!1,this.stateStack=new g.default,this.isCurrentlyDoingSetState=!1,this.graphSettings=e,this.listModel=I.init(this),this.layoutModel=O.defaultLayoutModel(this.graphSettings.config),this.layoutMeasurements={width:0,height:0},this.settingsViewModel=F.defaultSettingsViewModel(),this.imageRetryState={lastAttemptTime:0,attempts:0},this.setupDispatcher()}return e.prototype.hasUnsavedChanges=function(){return this._hasUnsavedChanges},e.prototype.getExpressionSearchOpen=function(){return this.expressionSearchOpen},e.prototype.hasVisibleAndUndoableToast=function(){return"function"==typeof this.toastData.undoCallback},e.prototype.getToastData=function(){return this.toastData},e.prototype.toastUndo=function(){"function"==typeof this.toastData.undoCallback&&(this.toastData.undoCallback(),this.dispatch({type:"toast/close"}))},e.prototype.runAfterDispatch=function(e){this.dispatcher.isDispatching()?this._queuedCallbacks.push(e):e()},e.prototype.enqueueEvent=function(e){this.enqueuedEvents[e]=!0},e.prototype.setRandomSeed=function(e){this.graphSettings.setProperty("randomSeed",e)},e.prototype.getRandomSeed=function(){return this.graphSettings.randomSeed},e.prototype.shouldDispatchTickNextFrame=function(){return!!this._requiresTickNextFrame},e.prototype.markTickRequiredNextFrame=function(){this._requiresTickNextFrame=!0},e.prototype.setupDispatcher=function(){var e=this;this.dispatcher=new l.Dispatcher,this.dispatcher.register(function(t){var n=e.getSelectedItem(),r=e.getFocusLocation();e.shouldScrollSelectedItemIntoViewAfterDispatch=!1;var i;e.enqueuedEvents={change:!1,graphReset:!1,clearUnsavedChanges:!1,openDrawer:!1,userMovedPoint:!1,userClickedObject:!1,userEditedLabel:!1},"tick"===t.type&&(e._requiresTickNextFrame=!1),e.isCurrentlyDoingSetState=!1,e.handleDispatchedAction(t),e.updateTheComputedWorld();var o=e.getImageToRetry();(e.getPlayingSliders().length>0||e.hasAnyTableThatRequiresTicks()||e.isDragDropActive()||o)&&e.markTickRequiredNextFrame(),o&&e.retryLoadingFailedImage(o),"undo"===t.type||"redo"===t.type||e.isDragDropActive()||e.commitUndoRedoSynchronously(t.type),e.requestParseForAllItems(),"clickable-item-clicked"===t.type&&(e.__waitingForClickableObjectWorkerResponse=!0,e.evaluator.notifyWhenSynced(function(){e.__waitingForClickableObjectWorkerResponse=!1})),e.isCurrentlyDoingSetState=!1,e.enqueuedEvents.change&&e.grapher&&e.grapher.markLabelsDirty(),e.enqueuedEvents.clearUnsavedChanges?e._hasUnsavedChanges=!1:e.enqueuedEvents.change&&(e._hasUnsavedChanges=!0);var a=e.getSelectedItem()
;a?n&&n.guid===a.guid||(e.shouldScrollSelectedItemIntoViewAfterDispatch=!0):e.shouldScrollSelectedItemIntoViewAfterDispatch=!1;var c=e.getFocusLocation();if(c&&!s.isEqual(c,r)){e.getFocusedItem()==a&&(e.shouldScrollSelectedItemIntoViewAfterDispatch=!0)}r&&n&&"table"===n.type&&"table"===r.type&&(!c||"table"!==c.type||r.id!==c.id)&&n.isExpanded&&(S.setExpanded(n,!1),c||(i=n)),c&&a&&"table"===a.type&&S.updateIsCollapsedByFocusLocation(a),e.updateRenderShellsBeforePaint(),e.updateViews(),i?e.scrollItemIntoView(i):e.shouldScrollSelectedItemIntoViewAfterDispatch&&e.scrollSelectedItemIntoView(),e.updateDragDrop(),e.updateRenderShellsAfterDispatch()})},e.prototype.handleDispatchedAction=function(e){var t=this;switch(e.type){case"api-method-called":break;case"undo":this.undo();break;case"redo":this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":"Enter"===e.key?D.onEnterPressed(this):"Up"===e.key?D.onUpPressed(this):"Down"===e.key?D.onDownPressed(this):"Backspace"===e.key?D.onBackspacePressed(this):"Delete"===e.key&&D.onDeletePressed(this);break;case"select-previous-expression":I.selectPrevItem(this.listModel);break;case"select-next-expression":I.selectNextItem(this.listModel);break;case"upward-delete-selected-expression":D.upwardDeleteSelectedExpression(this);break;case"downward-delete-selected-expression":D.downwardDeleteSelectedExpression(this);break;case"table-show-more-rows":var n=this.getItemModel(e.id);if(!n||"table"!==n.type)return;var i=S.getCollapsedRange(n);if(!i)return;I.setSelected(this.listModel,n),S.setExpanded(n,!0),L.setFocusLocation(this,{type:"table",id:n.id,location:{row:i.min,column:0}});break;case"navigate-table-by-key":D.navigateTableByKey(this,e.id,e.key);break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(e.id,e.setFocusAfterDelete);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(e.id,e.setFocusAfterDelete);break;case"expression-zoom-fit":this._expressionZoomFit(e.id);break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(e.id,e.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(e.state));break;case"duplicate-expression":var o=this.getItemModel(e.id);if(!o||"expression"!==o.type)return;var s=_.getState(o,{stripDefaults:!1}),c=this.createItemModel(r.__assign(r.__assign({},s),{id:this.generateId()}));this._toplevelInsertItemAt(o.index+1,c,!1,o.folderId);break;case"insert-item-at-index":var l=this.createItemModel(e.state);this._toplevelInsertItemAt(e.index,l,e.focus,e.folderId);break;case"new-expression-at-end":var l=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),I.insertItemAtEnd(this.listModel,l),L.moveFocusToItem(this,l.id);break;case"new-expression":var l=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),this._toplevelNewItemAtSelection(l,{shouldFocus:!0}),this._closeAddExpression();break;case"new-text":var l=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelNewItemAtSelection(l,{shouldFocus:!0}),this._closeAddExpression();break;case"new-folder":var l=this.createItemModel({type:"folder",id:this.generateId()});this._toplevelNewItemAtSelection(l,{shouldFocus:!0}),this._closeAddExpression();break;case"new-images":this._uploadImagesAndWaitForThemToLoad({files:e.files}),this._closeAddExpression();break;case"change-image":this._uploadImagesAndWaitForThemToLoad({files:e.files,id:e.id});break;case"new-table":var l=this._createTableItem();this._toplevelNewItemAtSelection(l,{shouldFocus:!0}),this._closeAddExpression();break;case"paste-table":this._pasteTable(e.data);break;case"insert-several-expressions":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this._insertSeveralExpressions(e.expressions);break;case"append-number-list":this._appendNumberList(e.latex);break;case"remove-item-by-id":I.removeItemById(this.listModel,e.id);break;case"replace-item-at-index":var l=this.createItemModel(e.state);this._toplevelReplaceItemAt(e.index,l,e.focus);break;case"create-sliders-for-item":this.createSlidersForItem(e.id,e.variables);break;case"start-dragdrop":var n=this.getItemModel(e.id);if(!n)return;var u=this.getItemRootNodeById(n.id);if(!u)return;var p=u.getBoundingClientRect();I.setSelected(this.listModel,void 0);var h=e.grabY-p.top,f=!1,m=1;"folder"===n.type&&(m+=this.getNumberOfItemsInFolder(n.id),n.collapsed||(f=!0,k.setCollapsed(n,!0))),I.setDragState(this.listModel,{firstItemId:n.id,numberOfItems:m,expandFolder:f,grabOffset:h,mouseY:e.mouseY,itemTop:0}),this.dragdrop_expressions.startDragging(e.mouseY);break;case"update-dragdrop":var g=this.listModel.dragState;if(!g)return;I.setDragState(this.listModel,r.__assign(r.__assign({},g),{mouseY:e.mouseY}));break;case"stop-dragdrop":var g=this.listModel.dragState;if(!g)return;var y=this.getItemModel(g.firstItemId);if(!y)return;I.setSelected(this.listModel,y),"folder"===y.type&&g.expandFolder&&k.setCollapsed(y,!1),I.setDragState(this.listModel,void 0);break;case"set-selected-id":var l=this.getItemModel(e.id);I.setSelected(this.listModel,l);break;case"set-selected-index":var l=this.getItemModelByIndex(e.index);I.setSelected(this.listModel,l);break;case"set-none-selected":I.setSelected(this.listModel,void 0);break;case"set-focus-location":"table"===(e.location?e.location.type:"")&&(this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{inEditListMode:!1})),L.setFocusLocation(this,e.location);break;case"move-focus-to-item":L.moveFocusToItem(this,e.id,e.where);break;case"blur-focus-location":this.isFocusLocationFocused(e.location)&&L.setFocusLocation(this,void 0);break;case"set-folder-collapsed":var n=this.getItemModel(e.id);if(!n||"folder"!==n.type)return;k.setCollapsed(n,e.isCollapsed);break;case"set-item-secret":var l=this.getItemModel(e.id);if(!l)return;T.setSecret(l,e.isSecret);break;case"set-tablecolumn-color":var n=this.getItemModel(e.tableId);if(!n||"table"!==n.type)return;S.setColumnColor(n,e.columnId,e.color);break;case"set-show-cdf":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setShowCDF(n,e.showCDF);break;case"set-cdf-min":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setCDFMin(n,e.latex);break;case"set-cdf-max":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setCDFMax(n,e.latex);break;case"toggle-item-hidden":this._toggleItemHidden(e.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(e.tableId,e.columnId);break;case"toggle-item-settings-menu":this.listModel.openItemMenu&&e.menu.model===this.listModel.openItemMenu.model?this.listModel.openItemMenu=void 0:(this.listModel.openItemMenu=e.menu,e.menu.focusFirstOption&&L.setFocusLocation(this,{type:"expression-menu",id:e.menu.model.id,location:"start"}));break;case"close-item-settings-menu":this.listModel.openItemMenu=void 0;break;case"toggle-fraction-evaluation":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;var v=_.shouldEvaluationDisplayAsFraction(n);_.setEvaluationAsFraction(n,!v);break;case"set-item-label":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLabel(n,e.label),this.enqueueEvent("userEditedLabel");break;case"set-item-showlabel":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setShowLabel(n,e.showLabel),e.showLabel||(_.setInteractiveLabel(n,!1),_.setEditableLabelMode(n,w.EditableLabelMode.None));break;case"set-item-color":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setColor(n,e.color);break;case"set-item-fill":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setFill(n,e.fill),this._setItemHidden(n.id,_.areAllVisibilityPropsOff(n));break;case"set-image-opacity":var n=this.getItemModel(e.id);if(!n||"image"!==n.type)return;M.setOpacity(n,e.opacity),this._setItemHidden(n.id,!1);break;case"set-image-in-foreground":var n=this.getItemModel(e.id);if(!n||"image"!==n.type)return;M.setForeground(n,e.foreground);break;case"image-upload-error":this.__pendingImageUploads[e.token]&&(delete this.__pendingImageUploads[e.token],this._showToast({message:this.t("Image upload failed.")}));break;case"image-upload-success":if(this.__pendingImageUploads[e.token])if(delete this.__pendingImageUploads[e.token],e.id){var n=this.getItemModel(e.id);n&&"image"===n.type&&M.setImageURL(n,e.url)}else{var b=this.createItemModel({type:"image",id:this.generateId(),width:e.width,height:e.height,image_url:e.url,name:e.name});this._toplevelNewItemAtSelection(b,{shouldFocus:!1})}this.isUploadingImages()||(this.toastData={});break;case"image-load-success":var b=this.getItemModel(e.id);if(!b||"image"!==b.type)return;M.setLoadStatus(b,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0};break;case"image-load-error":var b=this.getItemModel(e.id);if(!b||"image"!==b.type)return;M.setLoadStatus(b,"failed");break;case"image-retry-loading":var b=this.getItemModel(e.id);if(!b||"image"!==b.type)return;M.retryLoading(b);break;case"set-item-dragmode":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setDragMode(n,e.dragMode),e.dragMode!==d.DragMode.NONE&&this._setItemHidden(e.id,!1);break;case"set-tablecolumn-dragmode":var n=this.getItemModel(e.tableId);if(!n||"table"!==n.type)return;S.setColumnDragMode(n,e.columnId,e.dragMode),e.dragMode!==d.DragMode.NONE&&this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-points":var n=this.getItemModel(e.tableId);if(!n||"table"!==n.type)return;S.setColumnPoints(n,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,S.shouldHideColumn(n,e.columnId));break;case"set-tablecolumn-lines":var n=this.getItemModel(e.tableId);if(!n||"table"!==n.type)return;S.setColumnLines(n,e.columnId,e.bool),this._setTableColumnHidden(e.tableId,e.columnId,S.shouldHideColumn(n,e.columnId));break;case"set-tablecolumn-linestyle":var n=this.getItemModel(e.tableId);if(!n||"table"!==n.type)return;S.setColumnLineStyle(n,e.columnId,e.lineStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-tablecolumn-pointstyle":var n=this.getItemModel(e.tableId);if(!n||"table"!==n.type)return;S.setColumnPointStyle(n,e.columnId,e.pointStyle),this._setTableColumnHidden(e.tableId,e.columnId,!1);break;case"set-item-points":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setPoints(n,e.points),this._setItemHidden(e.id,_.areAllVisibilityPropsOff(n)),e.points||n.dragMode===d.DragMode.NONE||_.setDragMode(n,d.DragMode.NONE);break;case"set-item-pointstyle":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setPointStyle(n,e.pointStyle),this._setItemHidden(e.id,!1);break;case"set-item-lines":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLines(n,e.lines),this._setItemHidden(e.id,_.areAllVisibilityPropsOff(n));break;case"set-item-linestyle":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLineStyle(n,e.lineStyle),this._setItemHidden(e.id,!1);break;case"set-item-label-dropdown-open":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLabelDropdownOpen(n,e.open);break;case"set-item-fillopacity":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setFillOpacity(n,e.fillOpacity),this._setItemHidden(e.id,!1);break;case"set-item-lineopacity":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLineOpacity(n,e.lineOpacity),this._setItemHidden(e.id,!1);break;case"set-item-linewidth":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLineWidth(n,e.lineWidth),this._setItemHidden(e.id,!1);break;case"set-item-labelSize":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLabelSize(n,e.labelSize);break;case"set-item-label-orientation":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setLabelOrientation(n,e.labelOrientation);break;case"set-item-vertical-label":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setVerticalLabel(n,e.verticalLabel);break;case"set-suppress-text-outline":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSuppressTextOutline(n,e.suppressTextOutline);break;case"set-item-interactive-label":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setInteractiveLabel(n,e.interactiveLabel),e.interactiveLabel&&_.setEditableLabelMode(n,w.EditableLabelMode.None);break;case"set-item-editable-label-mode":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;n.editableLabelMode!==w.EditableLabelMode.None&&e.editableLabelMode!==w.EditableLabelMode.None&&n.editableLabelMode!==e.editableLabelMode&&_.setLabel(n,""),_.setEditableLabelMode(n,e.editableLabelMode),e.editableLabelMode!==w.EditableLabelMode.None&&_.setInteractiveLabel(n,!1);break;case"plot-residuals":var l=this.getItemModel(e.id);if(!l||"expression"!==l.type)return;var x=l.formula.regression,E=x.residualSuggestionId;if(!E)return;var P=this.getItemModel(E);if(!P)return;S.insertBlankColumn(P,P.columnModels.length-1,{id:this.generateId(),latex:a.identifierToLatex(x.residualVariable),color:this.getNextColor()});break;case"toggle-logmode":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;var A=n.isLogModeRegression;_.setLogMode(n,!A);break;case"set-item-latex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var l=this.getItemModel(e.id);if(!l||"expression"!==l.type)return;var F=e.latex;if('"'===F&&this.areNotesEnabled()){var N=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelReplaceItemAt(l.index,N,!0)}else if(""===F)_.blankOutExpressionAfterClearingLatex(l);else if("folder"===F&&this.areFoldersEnabled()){var q=this.createItemModel({id:this.generateId(),type:"folder"});this._toplevelReplaceItemAt(l.index,q,!0)}else if("table"===F){var R=this._createTableItem();this._toplevelReplaceItemAt(l.index,R,!0)}else"betchacant"===F||"pride"===F?this.runAfterDispatch(function(){t.triggerEasterEgg&&t.triggerEasterEgg(F)}):_.setLatex(l,F);break;case"set-visualization-prop":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setVizProp(n,e.prop,e.latex);break;case"set-clickableinfo-prop":var n=this.getItemModel(e.id);if(!n)return;"expression"===n.type?_.setClickableInfoProp(n,e.prop,e.value):"image"===n.type&&M.setClickableInfoProp(n,e.prop,e.value),!0===e.value&&(L.setFocusLocation(this,{type:"clickableinfo-rule",id:e.id,location:{ruleId:"1",prop:"assignment"}}),this.listModel.openItemMenu=void 0);break;case"set-clickableinfo-rule-prop":var n=this.getItemModel(e.id);if(!n)return;"expression"===n.type?_.setClickableInfoRuleProp(n,e.ruleId,e.prop,e.value):"image"===n.type&&M.setClickableInfoRuleProp(n,e.ruleId,e.prop,e.value);break;case"add-clickableinfo-rule":var n=this.getItemModel(e.id);if(!n)return;var j="";"expression"===n.type?(j=W.getNextAvailableId(n.clickableInfo.rules),_.addClickableInfoRule(n,j)):"image"===n.type&&(j=W.getNextAvailableId(n.clickableInfo.rules),M.addClickableInfoRule(n,j)),j&&L.setFocusLocation(this,{type:"clickableinfo-rule",id:n.id,location:{prop:"assignment",ruleId:j}});break;case"remove-clickableinfo-rule":var n=this.getItemModel(e.id);if(!n)return;"expression"===n.type?_.removeClickableInfoRule(n,e.ruleId):"image"===n.type&&M.removeClickableInfoRule(n,e.ruleId);break;case"set-folder-title":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"folder"!==n.type)return;k.setTitle(n,e.title);break;case"set-image-mq-attribute":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"image"!==n.type)return;M.setMQAttribute(n,e.attribute,e.latex);break;case"set-image-name":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"image"!==n.type)return;M.setName(n,e.name);break;case"set-graph-settings":for(var U in e)"type"!==U&&this.graphSettings.setProperty(U,e[U]);break;case"set-polar-domain-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setPolarDomainMin(n,e.latex);break;case"set-polar-domain-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setPolarDomainMax(n,e.latex);break;case"set-parametric-domain-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setParametricDomainMin(n,e.latex);break;case"set-parametric-domain-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setParametricDomainMax(n,e.latex);break;case"set-note-text":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"text"!==n.type)return;C.setText(n,e.text);break;case"set-edit-list-mode":var n=I.getSelected(this.listModel);if(this.setEditListMode(e.isEditListMode),e.focusExpressionList){if(void 0===n&&(n=this.getItemModelByIndex(0)),!n)return;L.moveFocusToItem(this,n.id,"table"===n.type&&e.isEditListMode?"container":"start")}else I.setSelected(this.listModel,void 0),L.setFocusLocation(this,void 0);break;case"set-projector-mode":this.getGraphSettings().config.setProperty("projectorMode",e.value);break;case"set-inverted-colors":this.getGraphSettings().config.setProperty("invertedColors",e.value);break;case"set-tablecell-latex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.tableId);if(!n||"table"!==n.type)return;S.setCellLatex(n,e.cell,e.latex);break;case"set-state":this.externalSetState(e.state,e.opts);break;case"set-blank":this.externalSetState(this.getBlankState(),e.opts);break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges");break;case"reset-graph":var G=this.getState();this.externalSetState(this.graphSettings.defaultState,{}),this._showToast({message:this.t("Graph reset."),undoCallback:function(){return t.dispatch({type:"set-state",state:G,opts:{}})}}),this.enqueueEvent("graphReset");break;case"clear-graph":if(this.triggerClearGraph)return void this.runAfterDispatch(function(){return t.triggerClearGraph()});var K=this.getState();this.externalSetState(this.getBlankState(),{});var y=this.getItemModelByIndex(0);y&&L.moveFocusToItem(this,y.id,"end"),this._showToast({message:this.t("Graph cleared."),undoCallback:function(){return t.dispatch({type:"set-state",state:K,opts:{}})}}),this.enqueueEvent("graphReset");break;case"on-evaluator-changes":I.onEvaluatorFormulaUpdates(this.listModel,e.changes);break;case"process-graph-data":var Y;for(Y in e.graphData.addedGraphs){var X=e.graphData.addedGraphs[Y];this.grapher&&this.grapher.updateSketch(Y,X),I.onGraphComputed(this.listModel,Y,X)}for(Y in e.graphData.removedGraphs)this.grapher&&this.grapher.hide(Y);for(Y in e.graphData.intersections)this.grapher&&"2d"===this.grapher.type&&this.grapher.updateIntersections(Y,e.graphData.intersections[Y]);this.grapher&&this.grapher.poiController&&this.grapher.poiController.handleTraceUpdate();break;case"add-helper-expression":I.addHelperExpression(this.listModel,e.state);break;case"tick":this._tickSliders(e.time);break;case"adjust-slider-by-keyboard":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.adjustSliderByKeyboard(n,e.adjustment);break;case"adjust-slider-by-dragging-thumb":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.adjustSliderByDraggingThumb(n,e.target);break;case"set-slider-minlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSliderMin(n,e.latex);break;case"set-slider-maxlatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSliderMax(n,e.latex);break;case"set-slider-steplatex":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSliderStep(n,e.latex);break;case"set-slider-dragging":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSliderDragging(n,e.dragging);break;case"play-slider-from-min":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;var $=_.getSliderMin(n);if(isNaN($))return;var Q=_.computeNewSliderLatex(n.latex,$);_.setSliderIsPlaying(n,!1),_.setLatex(n,Q),_.setSliderIsPlaying(n,!0);break;case"set-slider-isplaying":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSliderIsPlaying(n,e.isPlaying);break;case"set-slider-loopmode":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSliderLoopMode(n,e.loopMode);break;case"set-slider-animationperiod":var n=this.getItemModel(e.id);if(!n||"expression"!==n.type)return;_.setSliderAnimationPeriod(n,e.animationPeriod);break;case"show-expressions-list":this._showExpressions();break;case"hide-expressions-list":this._hideExpressions();break;case"open-drawer":this.enqueueEvent("openDrawer");break;case"re-randomize":this.setRandomSeed(H.default());break;case"resize-exp-list":this._setExpListWidth(e.expListWidth);break;case"toast/show":this._showToast(e.toast);break;case"toast/close":var Z=this.toastData.onHide;Z&&this.runAfterDispatch(Z),this.toastData={};break;case"toast/undo":var J=this.toastData.undoCallback;J&&this.runAfterDispatch(J),this.toastData={};break;case"toast/learn-more":var ee=this.toastData.undoCallback;ee&&this.runAfterDispatch(ee),this.toastData={};break;case"start-moving-point":B.onStartMovingPoint(this,this.listModel,e.pointInfo);break;case"stop-moving-point":B.onStopMovingPoint(this,e.pointInfo);break;case"on-move-point":B.onMovePoint(this,e.pointInfo,e.screenPt,e.projection,e.keyboardDirection)&&this.enqueueEvent("userMovedPoint");break;case"commit-user-requested-viewport":this._commitUserRequestedViewport(e.viewport);break;case"set-viewport":this._setAxisLimitLatex("xmin",e.viewport.xmin+""),this._setAxisLimitLatex("xmax",e.viewport.xmax+""),this._setAxisLimitLatex("ymin",e.viewport.ymin+""),this._setAxisLimitLatex("ymax",e.viewport.ymax+"");break;case"set-axis-limit-latex":this._setAxisLimitLatex(e.limit,e.latex);break;case"toggle-graph-settings":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{graphSettingsOpen:!this.layoutModel.graphSettingsOpen}),e.focusOnOpen&&this.layoutModel.graphSettingsOpen&&L.setFocusLocation(this,{type:"settings",location:"projector-mode"});break;case"close-graph-settings":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{graphSettingsOpen:!1}),e.focusIconAfterClose&&L.setFocusLocation(this,{type:"settings",location:"icon"});break;case"toggle-add-expression":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{addExpressionOpen:!this.layoutModel.addExpressionOpen}),e.focusOnOpen&&this.layoutModel.addExpressionOpen&&L.setFocusLocation(this,{type:"add-expression-btn"});break;case"close-add-expression":this._closeAddExpression(),e.focusIconAfterClose&&L.setFocusLocation(this,{type:"add-item-btn"});break;case"ui/container-resized":this.layoutMeasurements={width:e.size.width,height:e.size.height},this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;case"expression-size-exceeded":this._showToast({message:this.t("Expression size cannot exceed 100 characters.")});break;case"keypad/set-layout":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadLayout:e.layout,keypadFunctionsOpen:!1});break;case"keypad/set-functions-tab":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadFunctionsTab:e.tab});break;case"keypad/set-minimized":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadMinimized:e.minimized,keypadLayout:"mainNumbers"}),this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this.needsFakeKeypad()||L.addFocusForKeypad(this);break;case"keypad/type-text":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var n=V.default.getFocusedMathquill();n&&V.default.canAcceptText(n,t.getCapExpressionSize(),e.text)&&(n.typedText(e.text),V.default.simulateUserChangedLatex(n))});break;case"keypad/press-key":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var t=V.default.getFocusedMathquill();t&&V.default.simulateKeypress(t,e.key)});break;case"keypad/custom-command":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var t=V.default.getFocusedMathquill();t&&(z.execute(t,e.command),V.default.simulateUserChangedLatex(t))});break;case"keypad/shift":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadLayout:O.getShiftedLayoutForCurrentLayout(this.getKeypadLayout()),keypadFunctionsOpen:!1});break;case"keypad/123":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadLayout:"mainNumbers",keypadFunctionsOpen:!1});break;case"keypad/abc":this.isQwertyKeyboardEnabled()?this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadLayout:"letters",keypadFunctionsOpen:!1}):this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadLayout:"noQwertyLetters",keypadFunctionsOpen:!1});break;case"keypad/functions":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadFunctionsOpen:!this.isKeypadFunctionsPopoverOpen()});break;case"open-on-web":this._openOnWeb();break;case"file-is-dragged-over":this.listModel.openItemMenu=void 0,this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{isFileDraggedOver:!0});break;case"file-is-not-dragged-over":this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{isFileDraggedOver:!1});break;case"zoom":this.grapher&&this.grapher.viewportController.zoom(e.direction);break;case"set-hovered-image":var n=this.getItemModel(e.id);if(!n||"image"!==n.type)return;M.setClickableInfoProp(n,"hoveredImage",e.url);break;case"set-depressed-image":var n=this.getItemModel(e.id);if(!n||"image"!==n.type)return;M.setClickableInfoProp(n,"depressedImage",e.url);break;case"clickable-item-clicked":var n=this.getItemModel(e.id);if(!n)return;if("expression"!==n.type&&"image"!==n.type)return;for(var te=n.clickableInfo.rules,ne=!1,re=0,ie=te;re<ie.length;re++){var oe=ie[re];this.applyClickableObjectRule(n,oe.id)&&(ne=!0)}ne&&this.enqueueEvent("userClickedObject");break;case"update-expression-search-str":this.updateExpressionSearchStr(e.str);break;case"set-braille-mode":this.setBrailleMode(e.mode);break;case"set-six-key-input":this.setSixKeyInput(e.useSixKeyInput);break;case"close-expression-search":this.expressionSearchOpen=!1,this.updateExpressionSearchStr("");break;case"open-expression-search":if(!this.canUseAdvancedStyling())return;this.expressionSearchOpen=!0,this.focusLocation={type:"search-expressions"};break;default:return e}},e.prototype.applyClickableObjectRule=function(e,t){var n;if("expression"===e.type?n=_.getClickableInfoUpdateLatex(e,t):"image"===e.type&&(n=M.getClickableInfoUpdateLatex(e,t)),!n)return!1;var r;if("expression"===e.type?r=_.getClickableInfoUpdateIdentifier(e,t):"image"===e.type&&(r=M.getClickableInfoUpdateIdentifier(e,t)),r){var i=I.getItemsByIdentifier(this.listModel,r);if(1===i.length){var o=i[0];o.slider.isPlaying?(_.setSliderIsPlaying(o,!1),_.setLatex(o,n),_.setSliderIsPlaying(o,!0)):_.setLatex(o,n)}}return!0},e.prototype.updateExpressionSearchStr=function(e){this.expressionSearchStr=e,I.filterItemsBySearch(this.listModel,e)},e.prototype.getExpressionSearchStr=function(){return this.expressionSearchStr||""},e.prototype.areClickableObjectsTemporarilyDisabled=function(){return this.__waitingForClickableObjectWorkerResponse},e.prototype.getBrailleMode=function(){return this.graphSettings.config.brailleMode},e.prototype.setBrailleMode=function(e){this.graphSettings.config.brailleMode=e},e.prototype.getSixKeyInput=function(){return this.graphSettings.config.sixKeyInput},e.prototype.setSixKeyInput=function(e){this.graphSettings.config.sixKeyInput=e},e.prototype.setEditListMode=function(e){this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{inEditListMode:e})},e.prototype.generateTableXSubscript=function(){return I.findAvailableColumnSubscript(this.listModel)},e.prototype._createTableItem=function(){var e=this.generateTableXSubscript(),t=S.makeTableState(e,[[""],[""]],this);return this.createItemModel(t)},e.prototype._populateSettingsViewLimitLatex=function(){this.grapher&&(this.settingsViewModel=r.__assign(r.__assign({},this.settingsViewModel),{limitLatex:F.limitLatex(this.grapher.getCurrentViewport(),this.getGraphSettings().xAxisStep,this.getGraphSettings().yAxisStep)}))},e.prototype.getSettingsViewModel=function(){return this.settingsViewModel},e.prototype.getListModel=function(){return this.listModel},e.prototype.hasBackgroundColor=function(){return"#ffffff"!==this.getBackgroundColor()},e.prototype.getBackgroundColor=function(){return this.getGraphSettings().getBackgroundColor()},e.prototype.getTextColor=function(){return this.getGraphSettings().getTextColor()},e.prototype.getPillboxBackgroundColor=function(){return x.shadeColor(this.getBackgroundColor(),-.07)},e.prototype.subToChanges=function(e){var t=this,n=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[n]=e,function(){delete t.subscriptions[n]}},e.prototype.updateTheComputedWorld=function(){var e=this;I.reindex(this.listModel),I.updateDrawOrder(this.listModel),this.grapher&&this.grapher.setSketchOrder(this.listModel.drawOrder);for(var t=0,n=this.getAllItemModels();t<n.length;t++){var i=n[t];switch(i.type){case"expression":_.onControllerUpdate(i);break;case"image":M.onControllerUpdate(i);break;case"table":S.onControllerUpdate(i);break;case"folder":k.onControllerUpdate(i);break;case"text":C.onControllerUpdate(i);break;default:return i}}if(this.isCurrentFocusLocationValid()||L.setFocusLocation(this,void 0),this.listModel.openItemMenu){document.body&&document.body.contains(this.listModel.openItemMenu.icon)||(this.listModel.openItemMenu=void 0)}var o=this.getSelectedItem();o&&!this.getItemModel(o.id)&&I.setSelected(this.listModel,void 0),this.layoutModel.graphSettingsOpen||this._populateSettingsViewLimitLatex(),this.propagateSelection(),this.isKeypadOpen()||(this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{keypadFunctionsOpen:!1})),this.runAfterDispatch(function(){e.grapher&&"2d"===e.grapher.type&&e.grapher.audioGraph.checkIfSelectedItemChanged(o?o.id:void 0),e.grapher&&"2d"===e.grapher.type&&e.focusLocation&&e.grapher.audioGraph.exitAudioTrace()})},e.prototype.propagateSelection=function(){this.grapher&&this.evaluator?this.__lastSelectedId=n.propagateSelection(this,this.grapher,this.evaluator,this.__lastSelectedId):this.__lastSelectedId=void 0},e.prototype.getIntersectId=function(){return this.__lastSelectedId},e.prototype.areParsableObjectsEqual=function(e,t){return e===t||s.isEqual(r.__assign(r.__assign({},e),{regressionParameters:void 0}),r.__assign(r.__assign({},t),{regressionParameters:void 0}))},e.prototype.requestParseForAllItems=function(){this.isCurrentlyDoingSetState&&this.evaluator.clearStatementsAndStartCompleteState();for(var e={},t=this.lastParsableObjects,n=0,r=this.getAllItemModels();n<r.length;n++){var i=r[n];switch(i.type){case"expression":case"image":case"table":e[i.id]=i.cachedParsableState;break;case"folder":case"text":break;default:return i}}for(var o=0,a=I.getAllHelperItemModels(this.listModel);o<a.length;o++){var i=a[o];e[i.id]=i.cachedParsableState}for(var s in e){var c=e[s],l=t[s];if("image"===c.type&&(!l||c.type!==l.type||c.guid!==l.guid)&&this.grapher){var i=this.getItemModel(s);i&&"image"===i.type&&this.grapher.addGraphImage(i)}this.areParsableObjectsEqual(c,l)||(this.grapher&&"statement"===c.type&&""===c.latex&&this.grapher.removeGraphSketch(c.id),this.evaluator.addStatement(c))}
for(var s in t){var l=t[s],c=e[s];if("image"!==l.type||c&&c.type===l.type&&c.guid===l.guid||this.grapher&&this.grapher.removeGraphImage(s),!c&&(this.evaluator.removeStatement(s),"table"===l.type))for(var u=0,d=l.columns;u<d.length;u++){var p=d[u];this.evaluator.removeStatement(p.id)}}this.lastParsableObjects=e},e.prototype.getViewState=function(){if(this.grapher){var e=this.grapher.getProjection();return{viewport:e.viewport.toObject(),screen:e.screen}}},e.prototype.setEvaluator=function(e){this.evaluator=e},e.prototype.setGrapher=function(e){this.grapher=e},e.prototype.getGrapher=function(){return this.grapher},e.prototype.shouldExpressionZoomFit=function(e){return!!this.grapher&&(("expression"===e.type||"table"===e.type)&&(!!("expression"!==e.type||!e.error&&e.shouldGraph&&e.formula.is_graphable)&&(!(!e.boundingBoxes||!e.boundingBoxes.length)&&P.shouldExpressionZoomFit(e.boundingBoxes,this.grapher.viewportController.getProjection()))))},e.prototype.setBugsnagContext=function(e){this.bugsnagContext=e},e.prototype.getItemRootNodeById=function(e){var t=this.getItemModel(e);return t&&t.dcgView?t.dcgView.findRootNode():void 0},e.prototype.getItemSelectorById=function(e){var t=this.getItemRootNodeById(e);return t?N(t):void 0},e.prototype.generateId=function(){var e=this.__nextItemId;return this.__nextItemId+=1,e+""},e.prototype.getNextColor=function(){return I.getNextColor(this.listModel)},e.prototype.getNextDisplayIndex=function(){return this.listModel.nextDisplayIndex},e.prototype._clearPendingImageUploads=function(){this.__pendingImageUploads={}},e.prototype.isUploadingImages=function(){return Object.keys(this.__pendingImageUploads).length>0},e.prototype.getExpressionAnalysis=function(){return this.listModel.expressionAnalysis},e.prototype.createItemModel=function(e){return I.modelFromSpec(this.listModel,e)},e.prototype.getItemModel=function(e){return I.getItemById(this.listModel,e)},e.prototype.getItemModelByIndex=function(e){return I.getItemByIndex(this.listModel,e)},e.prototype.getItemCount=function(){return I.getItemCount(this.listModel)},e.prototype.getItemEditableLabelMode=function(e){var t=this.getItemModel(e);if(t&&"expression"===t.type)return _.getEditableLabelMode(t)},e.prototype.isItemSecret=function(e){var t=this.getItemModel(e);return!!t&&I.isItemSecret(t)},e.prototype.isItemSelected=function(e){var t=this.getItemModel(e);return!!t&&I.isItemSelected(t)},e.prototype.isItemSelectable=function(e){var t=this.getItemModel(e);return!!t&&I.isItemSelectable(t)},e.prototype.anyItemDependsOnRandomSeed=function(){return I.anyItemDependsOnRandomSeed(this.listModel)},e.prototype.getAllItemModels=function(){return I.getAllItemModels(this.listModel)},e.prototype.getAllModelsWithSliders=function(){return I.getAllModelsWithSliders(this.listModel)},e.prototype.getGraphSettings=function(){return this.graphSettings},e.prototype.getAudioGraph=function(){return void 0!==this.grapher&&"2d"===this.grapher.type?this.grapher.audioGraph:void 0},e.prototype.inAudioTraceMode=function(){var e=this.getAudioGraph();return!(!e||!e.audioTraceActive)},e.prototype.expressionsAreFullWidth=function(){return this.isNarrow()||!1===this.graphSettings.config.graphpaper},e.prototype.getExpListWidthString=function(){return this.expressionsAreFullWidth()?"100%":this.rootElt?this._getExpListWidth()+"px":"0"},e.prototype.getExpListWidth=function(){return this.rootElt?this._getExpListWidth():0},e.prototype.findFirstVisibleItem=function(){var e=U.getFirstVisibleItemId(this,this._previousFirstVisibleId);return this._previousFirstVisibleId=e,e?this.getItemModel(e):void 0},e.prototype.findLastVisibleItem=function(){var e=U.getLastVisibleItemId(this,this._previousLastVisibleId);return this._previousLastVisibleId=e,e?this.getItemModel(e):void 0},e.prototype.updateRenderShellsAfterDispatch=function(){if(this.rootElt&&this.isListVisible()){var e=this.findFirstVisibleItem(),t=this.findLastVisibleItem(),n=e&&this.getItemRootNodeById(e.id),r=t&&this.getItemRootNodeById(t.id);if(n!==this.lastInfiniteScrollFirstDOM||r!==this.lastInfiniteScrollLastDOM||this.hasDispatchSinceLastInfiniteScrollUpdate){this.lastInfiniteScrollFirstDOM=n,this.lastInfiniteScrollLastDOM=r,this.hasDispatchSinceLastInfiniteScrollUpdate=!1;for(var i=!1,o=e?e.index:1/0,a=t?t.index:1/0,s=this.listModel.dragState&&this.listModel.dragState.firstItemId,c=0,l=this.getAllItemModels();c<l.length;c++){var u=l[c],d=!(u.index>=o&&u.index<=a&&!u.isHiddenFromUI);if(s==u.id&&(d=!1),u.renderShell!==d&&(u.renderShell=d,i=!0,d)){var p=this.getItemRootNodeById(u.id);if(p){var h=p.getBoundingClientRect().height;h>0&&(u.cachedRenderHeight=h)}}}i&&this.markTickRequiredNextFrame()}}},e.prototype.updateRenderShellsBeforePaint=function(){if(this.hasDispatchSinceLastInfiniteScrollUpdate=!0,this.inPrintMode)for(var e=0,t=this.getAllItemModels();e<t.length;e++){var n=t[e];n.renderShell=!1}else{for(var r=0,i=this.getAllItemModels();r<i.length;r++){var n=i[r];n.isHiddenFromUI&&(n.renderShell=!0)}var o=this.getSelectedItem();o&&(o.renderShell=!1)}},e.prototype.updateDragDrop=function(){var e=this.listModel.dragState;if(e){var t=this.getItemModel(e.firstItemId);if(t){var n=this.dragdrop_expressions.applyDrag();n&&(I.setDragState(this.listModel,n.dragState),T.setFolderId(t,n.folderId),t.index!==n.newIndex&&I.moveItemsTo(this.listModel,t.index,n.newIndex,e.numberOfItems))}}},e.prototype._tickSliders=function(e){this.getPlayingSliders().forEach(function(t){_.tickSliderStep(t,e)})},e.prototype.getPlayingSliders=function(){for(var e=this.getAllItemModels(),t=[],n=0,r=e;n<r.length;n++){var i=r[n];"expression"===i.type&&i.sliderExists&&i.slider.isPlaying&&t.push(i)}return t},e.prototype.hasAnyTableThatRequiresTicks=function(){for(var e=this.getAllItemModels(),t=0,n=e;t<n.length;t++){var r=n[t];if(!r.renderShell&&"table"===r.type&&r.rowModels.length>=25)return!0}return!1},e.prototype.areAnyImagesLoading=function(){return I.areAnyImagesLoading(this.listModel)},e.prototype._commitUserRequestedViewport=function(e){this.grapher&&this.grapher.setUserRequestedViewport(e)},e.prototype._setAxisLimitLatex=function(e,t){var n,i;this.settingsViewModel=r.__assign(r.__assign({},this.settingsViewModel),{limitLatex:r.__assign(r.__assign({},this.settingsViewModel.limitLatex),(n={},n[e]=t,n))});var o=""===t&&("xstep"===e||"ystep"===e),a=o?0:A.default(t,this.graphSettings.degreeMode);switch(e){case"xstep":if(a<0||!isFinite(a))return;this.graphSettings.setProperty("xAxisStep",a);break;case"ystep":if(a<0||!isFinite(a))return;this.graphSettings.setProperty("yAxisStep",a);break;case"xmin":case"xmax":case"ymin":case"ymax":if(!this.grapher)return;var s=this.grapher.viewportController.getViewport(),c="xmin";"xmin"===e&&(c="xmax"),"ymax"===e&&(c="ymin"),"ymin"===e&&(c="ymax");var l=A.default(this.settingsViewModel.limitLatex[c],this.graphSettings.degreeMode),u=y.Viewport.fromObject(r.__assign(r.__assign({},s.toObject()),(i={},i[e]=a,i[c]=l,i)));if(!u.isValid())return;this.grapher.viewportController.setViewport(u);var d="xmin"===e||"xmax"===e?"x":"y";this.graphSettings.setProperty("lastChangedAxis",d);var p=u.isSquare(this.grapher.getProjection().screen);this.graphSettings.setProperty("squareAxes",p)}if(this.grapher){var h=this.grapher.viewportController.getViewport().toObject();this._commitUserRequestedViewport(h)}},e.prototype.canUserAddExpressions=function(){return!!this.graphSettings.config.expressions},e.prototype.areNotesEnabled=function(){return!!this.graphSettings.config.notes},e.prototype.areSlidersEnabled=function(){return!!this.graphSettings.config.sliders},e.prototype.areLinksEnabled=function(){return!!this.graphSettings.config.links},e.prototype.areImagesEnabled=function(){var e=window.FileReader,t=o.IS_IPAD&&o.IOS_VERSION&&8===o.IOS_VERSION[0]&&0===o.IOS_VERSION[1]&&0===o.IOS_VERSION[2];return!(!this.graphSettings.config.images||!e||t)},e.prototype.areFoldersEnabled=function(){return!!this.graphSettings.config.folders},e.prototype.isDecimalToFractionEnabled=function(){return!!this.graphSettings.config.decimalToFraction},e.prototype.isTraceEnabled=function(){return!!this.graphSettings.config.trace},e.prototype.areFunctionsRestricted=function(){return!!this.graphSettings.config.restrictedFunctions},e.prototype.isQwertyKeyboardEnabled=function(){return!!this.graphSettings.config.qwertyKeyboard},e.prototype.canEditOnWeb=function(){return!!this.graphSettings.config.editOnWeb},e.prototype.hasTransparentBackground=function(){return!!this.graphSettings.config.transparentBackground},e.prototype.shouldAudioTraceReverseExpressions=function(){return!!this.graphSettings.config.audioTraceReverseExpressions},e.prototype.hasDefaultState=function(){return!!this.graphSettings.defaultState},e.prototype.getDefaultStateViewport=function(){var e=this.graphSettings.defaultState;if(e&&e.graph)return e.graph.viewport},e.prototype.getColors=function(){return this.graphSettings.config.colors},e.prototype.getImageOpacities=function(){return["0.2","0.4","0.6","0.8","1"]},e.prototype.getUIDragModes=function(){return[d.DragMode.X,d.DragMode.Y,d.DragMode.XY]},e.prototype.getNumberOfItemsInFolder=function(e){return I.getNumberOfItemsInFolder(this.listModel,e)},e.prototype.getEnabledDragModesForItem=function(e){var t=this.getItemModel(e);if(!t||"expression"!==t.type)return[];var n=t.formula,r=[];if(!n.move_strategy)return r;var i="none"!==n.move_strategy[0].type,o="none"!==n.move_strategy[1].type,a=i&&o;return i&&r.push(d.DragMode.X),o&&r.push(d.DragMode.Y),a&&r.push(d.DragMode.XY),r},e.prototype.shouldShowEvaluationForItem=function(e){var t=this.getItemModel(e);return!!t&&("expression"===t.type&&_.shouldShowEvaluation(t))},e.prototype.getEvaluationValueForItem=function(e){var t=this.getItemModel(e);return t?"expression"!==t.type?NaN:_.getEvaluationValue(t):NaN},e.prototype.canDisplayEvaluationForItemAsFraction=function(e){if(!this.isDecimalToFractionEnabled())return!1;var t=this.getItemModel(e);if(!t)return!1;if("expression"!==t.type)return!1;if(_.isGraphable(t))return!1;var n=this.getEvaluationValueForItem(e);return!Array.isArray(n)&&a.canDisplayAsFraction(n)},e.prototype.shouldEvaluationForItemDisplayAsFraction=function(e){if(!this.isDecimalToFractionEnabled())return!1;var t=this.getItemModel(e);return!!t&&("expression"===t.type&&_.shouldEvaluationDisplayAsFraction(t))},e.prototype.getEvaluationLabelOptionsForItem=function(e){return r.__assign(r.__assign({},E.EvaluationLabelOptions),{displayAsFraction:this.shouldEvaluationForItemDisplayAsFraction(e)})},e.prototype.getPointStyles=function(){return[p.PointStyle.POINT,p.PointStyle.OPEN,p.PointStyle.CROSS]},e.prototype.getLineStyles=function(){return[p.LineStyle.SOLID,p.LineStyle.DASHED,p.LineStyle.DOTTED]},e.prototype.getOpacities=function(){return[u.LOW,u.DEFAULT,u.HIGH]},e.prototype.isInEditListMode=function(){return this.layoutModel.inEditListMode},e.prototype.canAdministerSecretFolders=function(){return this.graphSettings.config.administerSecretFolders},e.prototype.getInvertedColors=function(){return!!this.graphSettings.config.invertedColors},e.prototype.canUseAdvancedStyling=function(){return this.graphSettings.config.advancedStyling},e.prototype.canAuthorClickableObjects=function(){return this.graphSettings.config.clickableObjects},e.prototype.isDegreeMode=function(){return this.graphSettings.degreeMode},e.prototype.isGraphSettingsOpen=function(){return this.layoutModel.graphSettingsOpen},e.prototype.isAddExpressionOpen=function(){return this.layoutModel.addExpressionOpen},e.prototype.shouldRenderList=function(){if(this.layoutModel.expressionsVisible)return!0;var e=this.layoutModel.expressionsHiddenTime;return void 0!==e&&Date.now()-e<=500},e.prototype.isListVisible=function(){return this.layoutModel.expressionsVisible},e.prototype.isGrapherEnabled=function(){return!1!==this.graphSettings.config.graphpaper},e.prototype.isListEnabled=function(){return!1!==this.graphSettings.config.expressions},e.prototype.areDistributionsEnabled=function(){return!0===this.graphSettings.config.distributions},e.prototype.needsFakeKeypad=function(){var e=this.getFocusLocation();if(!e)return!1;if("none"!==this.getBrailleMode()&&R.getFocusedBrailleElement())return!1;switch(e.type){case"settings":return"icon"!==e.location&&"degree-mode"!==e.location;case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":return!0;case"expression-menu":return"opacity"===e.location||"linewidth"===e.location||"lineopacity"===e.location;case"clickableinfo-rule":return!0;case"table":if(this.isInEditListMode())return!1;var t=e.location;if(0===t.row)return!0;var n=this.getItemModel(e.id);if(!n||"table"!==n.type)return!1;var r=n.columnModels[t.column];return!!r&&!r.disabled;case"image":return"name"!==e.location;case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-table-btn":case"add-folder-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":return!1;case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":return!1;case"editable-label":return this.getItemEditableLabelMode(e.id)===w.EditableLabelMode.Math;default:return e}},e.prototype.getBrandingMode=function(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"},e.prototype.getEditLink=function(){return window.iframeEmbedBrandingLink},e.prototype._expressionZoomFit=function(e){var t=this.getItemModel(e);if(this.grapher&&t&&("expression"===t.type||"table"===t.type)&&t.boundingBoxes&&t.boundingBoxes.length){var n=P.getRecommendedViewportForExpression(t.boundingBoxes,this.grapher.viewportController.getProjection());n&&this.grapher.viewportController.zoomCustom(n)}},e.prototype._deleteItemAndAnimateOut=function(e,t){var n=this,r=this.getItemSelectorById(e);r&&(r.css({transition:"0.2s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(function(){n.dispatch({type:"finish-deleting-item-after-animation",id:e,setFocusAfterDelete:t})},200))},e.prototype._finishDeletingItemAfterAnimation=function(e,t){var n=this.getItemModel(e);if(n){var r=this.getItemSelectorById(e),i=r&&document.activeElement&&N(document.activeElement).closest(r).length>0,o=I.findPrevSelectableItem(this.listModel,n.index);if(this._removeExpressionSynchronously(n),t&&i){if(!o){var a=I.getFirstSelectableItem(this.listModel);a&&(o=a)}o&&L.moveFocusToItem(this,o.id,"end")}}},e.prototype._removeExpressionSynchronously=function(e){if(I.removeItemAtIndex(this.listModel,e.index),I.hasNoVisibleExpressions(this.listModel)){var t=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});I.insertItemAtEnd(this.listModel,t)}},e.prototype.setRootElt=function(e){this.rootElt=e,this.dragdrop_expressions=new G.default(this)},e.prototype._hideExpressions=function(){this.graphSettings.config.expressions&&(I.setSelected(this.listModel,void 0),this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{expressionsVisible:!1,expressionsHiddenTime:Date.now()}),h.default())},e.prototype._showExpressions=function(){this.graphSettings.config.expressions&&(this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{expressionsVisible:!0}),h.default())},e.prototype._showToast=function(e){var t=this;if(this.toastData=e,this.toastData.hasOwnProperty("undoCallback")&&!o.IS_MOBILE){var n=o.IS_APPLE?this.t("Press CMD+Z to undo."):this.t("Press CTRL+Z to undo.");this.toastData.message+=" "+n}clearTimeout(this._hideToastTimeout);var r="number"==typeof e.hideAfter?e.hideAfter:6e3;r>0&&(this._hideToastTimeout=setTimeout(function(){t.dispatch({type:"toast/close",onHide:t.toastData.onHide})},r))},e.prototype._setExpressionPropertiesFromAPI=function(e,t){var n=this.getItemModel(e);if(n)if("table"===n.type&&t.columns){t=f.default(t);var r=S.cloneTableAndExtendWithProperties(n,t),i=I.modelFromSpec(this.listModel,r);this._toplevelReplaceItemAt(n.index,i,!1)}else{var o=this.getItemModel(e);if(!o)return;for(var a in t)if(t.hasOwnProperty(a))switch(a){case"slider":if("expression"!==o.type)continue;var s=t[a];s.hasOwnProperty("min")&&_.setSliderMin(o,s.min),s.hasOwnProperty("max")&&_.setSliderMax(o,s.max),s.hasOwnProperty("step")&&_.setSliderStep(o,s.step);break;case"polarDomain":if("expression"!==o.type)continue;_.setPolarDomainMin(o,m.default(t.polarDomain.min)),_.setPolarDomainMax(o,m.default(t.polarDomain.max));break;case"parametricDomain":if("expression"!==o.type)continue;_.setParametricDomainMin(o,m.default(t.parametricDomain.min)),_.setParametricDomainMax(o,m.default(t.parametricDomain.max));break;case"hidden":this._setItemHidden(e,t.hidden);break;case"secret":T.setSecret(o,t.secret);break;case"color":if("expression"!==o.type)continue;_.setColor(o,t.color);break;case"dragMode":if("expression"!==o.type)continue;_.setDragMode(o,t.dragMode);break;case"label":if("expression"!==o.type)continue;_.setLabel(o,t.label);break;case"showLabel":if("expression"!==o.type)continue;_.setShowLabel(o,t.showLabel);break;case"labelSize":if("expression"!==o.type)continue;_.setLabelSize(o,t.labelSize);break;case"labelOrientation":if("expression"!==o.type)continue;_.setLabelOrientation(o,t.labelOrientation);break;case"verticalLabel":if("expression"!==o.type)continue;_.setVerticalLabel(o,t.verticalLabel);break;case"latex":if("expression"!==o.type)continue;_.setLatex(o,t.latex);break;case"points":if("expression"!==o.type)continue;_.setPoints(o,!!t.points);break;case"lines":if("expression"!==o.type)continue;_.setLines(o,!!t.lines);break;case"pointStyle":if("expression"!==o.type)continue;_.setPointStyle(o,t.pointStyle);break;case"lineStyle":if("expression"!==o.type)continue;_.setLineStyle(o,t.lineStyle);break;case"fill":if("expression"!==o.type)continue;_.setFill(o,t.fill);break;case"fillOpacity":if("expression"!==o.type)continue;_.setFillOpacity(o,t.fillOpacity);break;case"lineOpacity":if("expression"!==o.type)continue;_.setLineOpacity(o,t.lineOpacity);break;case"id":case"type":case"domain":break;default:throw new Error("trying to call setProperty for: "+a)}}},e.prototype._isParentFolderHidden=function(e){var t=this.getItemModel(e);if(!t)return!1;var n=I.getParentFolderModel(t);return!!n&&n.hidden},e.prototype._toggleItemHidden=function(e){if(this._isParentFolderHidden(e))this._setItemHidden(e,!1);else{var t=this.getItemModel(e);if(!t)return;switch(t.type){case"expression":case"image":case"folder":this._setItemHidden(e,!t.hidden);break;case"table":case"text":break;default:return t}}},e.prototype._toggleTableColumnHidden=function(e,t){if(this._isParentFolderHidden(e))this._setTableColumnHidden(e,t,!1);else{var n=this.getItemModel(e);if(!n||"table"!==n.type)return;var r=S.getColumnModel(n,t);if(!r)return;this._setTableColumnHidden(e,t,!r.hidden)}},e.prototype._setTableColumnHidden=function(e,t,n){var r=this.getItemModel(e);if(r&&"table"===r.type){var i=S.shouldHideColumn(r,t);!n&&this._isParentFolderHidden(e)&&this._setItemHidden(r.folderId,!1),S.setColumnHidden(r,t,n),!n&&i&&S.setColumnPoints(r,t,!0)}},e.prototype._setItemHidden=function(e,t){var n=this.getItemModel(e);if(n)switch(!t&&"folder"!==n.type&&this._isParentFolderHidden(n.id)&&this._setItemHidden(n.folderId,!1),n.type){case"expression":_.setHidden(n,t);break;case"folder":k.setHidden(n,t);break;case"image":M.setHidden(n,t);break;case"table":case"text":break;default:return n}},e.prototype._addItemToEndFromAPI=function(e){var t=I.getLastSelectableItem(this.listModel);!e.secret&&t&&"expression"===t.type&&""===t.latex&&I.removeItemAtIndex(this.listModel,t.index),I.insertItemAtEnd(this.listModel,e)},e.prototype._toplevelInsertItemAt=function(e,t,n,r){var i=t;I.insertItemAtIndex(this.listModel,i,e),r&&T.setFolderId(i,r),n&&L.moveFocusToItem(this,i.id)},e.prototype._toplevelNewItemAtSelection=function(e,t){var n=this.getSelectedItem();if(n){var r="expression"===n.type&&!n.latex;if(r&&!n.folderId&&("expression"!==e.type||e.latex))return this._toplevelReplaceItemAt(n.index,e,t.shouldFocus);if(r&&n.folderId&&"expression"!==e.type&&"folder"!==e.type)return this._toplevelReplaceItemAt(n.index,e,t.shouldFocus);if("folder"!==n.type&&!n.folderId){return this._toplevelInsertItemAt(n.index+1,e,t.shouldFocus,void 0)}if("folder"!==n.type&&n.folderId&&"folder"!==e.type)return this._toplevelInsertItemAt(n.index+1,e,t.shouldFocus,n.folderId);if("folder"===n.type&&!n.collapsed&&"folder"!==e.type)return this._toplevelInsertItemAt(n.index+1,e,t.shouldFocus,n.id)}var i=this.getFirstFullyVisibleItem();for(i&&"folder"===i.type&&(i=this.getItemModelByIndex(i.index+1));i&&"folder"!==i.type&&i.folderId;)i=this.getItemModelByIndex(i.index+1);var o=i?i.index:this.getItemCount();return this._toplevelInsertItemAt(o,e,t.shouldFocus,void 0)},e.prototype.getFirstFullyVisibleItem=function(){var e=U.getFirstFullyVisibleItemId(this);if(e)return I.getItemById(this.listModel,e)},e.prototype.find$=function(e){return N(this.rootElt).find(e)},e.prototype.getExppanelSelectorOrThrow=function(){var e=U.getExppanelElt(this);if(e)return N(e);throw new Error("expected to find $exppanel but could not")},e.prototype.scrollItemIntoView=function(e){if(this.rootElt&&this.isListVisible()){var t=this.getItemSelectorById(e.id),n=U.getExppanelSelector(this);if(t&&n){if("table"===e.type){var r=t.find(".dcg-row .dcg-selected");if(1===r.length)return void i.scrollVisible(r,n,60)}i.scrollVisible(t,n,90)}}},e.prototype.scrollSelectedItemIntoView=function(){var e=this.getSelectedItem();e&&this.scrollItemIntoView(e)},e.prototype._pasteTable=function(e){var t=this;if(this.grapher){var n=I.findAvailableColumnSubscript(this.listModel),r=S.makeTableState(n,e,this),i=this.createItemModel(r);this._toplevelNewItemAtSelection(i,{shouldFocus:!0}),this._closeAddExpression();var o=this.grapher.viewportController.getViewport(),a=s.map(e[0],function(e){return parseFloat(e)}),c=s.map(e[1],function(e){return parseFloat(e)}),l={xmin:s.min(a),xmax:s.max(a),ymin:s.min(c),ymax:s.max(c),type:"table"};if(isFinite(l.xmin)&&isFinite(l.xmax)&&isFinite(l.ymin)&&isFinite(l.ymax)&&(l.xmax>o.xmax||l.xmin<o.xmin||l.ymax>o.ymax||l.ymin<o.ymin)){var u=P.getRecommendedViewportForExpression([l],o);if(u){var d=new y.Viewport(u.xmin,u.xmax,u.ymin,u.ymax);this.grapher.viewportController.setViewport(d),this._showToast({message:this.t("We zoomed to fit your data."),undoCallback:function(){t.dispatch({type:"undo"})}})}}}},e.prototype._insertSeveralExpressions=function(e){for(var t=0;t<e.length;t++){var n=void 0;n=this.createItemModel(e[t]),this._toplevelNewItemAtSelection(n,{shouldFocus:!0})}},e.prototype._appendNumberList=function(e){var t=this.getSelectedItem();if(t&&"expression"===t.type){var n=t.latex,r=this.createItemModel({type:"expression",id:this.generateId(),latex:n+e});return this._toplevelReplaceItemAt(t.index,r,!0)}},e.prototype._openOnWeb=function(){var e=this;this.runAfterDispatch(function(){if(e.grapher){var t=JSON.stringify(e.getState()),n=e.grapher.screenshot({width:100,height:100}),r=e.getGraphSettings().config.crossOriginSaveTest,i=r?"/":"https://www.desmos.com/",o=i+"api/v1/calculator/cross_origin_save",a=N('<input type="text" name="calc_state" />').val(t),s=N('<input type="text" name="thumb_data" />').val(n),c=N('<form target="_blank" method="POST" style="display:none;"></form>').attr("action",o).append(N('<input type="text" name="is_open_on_web" value="true" />')).append(N('<input type="text" name="my_graphs" value="false" />')).append(N('<input type="text" name="is_update" value="false" />')).append(a).append(s);N(e.rootElt).append(c),c.submit().remove()}})},e.prototype.notifyBugsnagAboutMissingSelectedItem=function(e,t){var n=I.getSelected(this.listModel),r="";try{r=n?JSON.stringify(n.cachedUndoRedoState,null,2):"undefined"}catch(e){r="[[could not stringify]]"}var i="";try{if(n){var o={id:n.id,index:n.index,displayIndex:n.index,secretIndex:n.secretIndex,guid:n.guid,renderShell:n.renderShell,isHiddenFromUI:n.isHiddenFromUI,hasDCGView:!!n.dcgView,cachedRenderHeight:n.cachedRenderHeight};i=JSON.stringify(o,null,2)}else i="undefined"}catch(e){i="[[could not stringify]]"}var a="";try{a=JSON.stringify(I.getUndoRedoState(this.listModel),null,2)}catch(e){a="[[could not stringify]]"}q.notify("ReplaceItemAtError: no item at index",{metaData:{index:e,shouldFocus:t,selectedModelJSON:i,selectedItemJSON:r,listStateJSON:a}})},e.prototype._toplevelReplaceItemAt=function(e,t,n){var r=t,i=this.getItemModelByIndex(e);i||this.notifyBugsnagAboutMissingSelectedItem(e,n);var o="folder"!==i.type&&i.folderId;I.removeItemAtIndex(this.listModel,e),I.insertItemAtIndex(this.listModel,r,e),o&&T.setFolderId(r,o),n&&L.moveFocusToItem(this,r.id)},e.prototype.createSlidersForItem=function(e,t){var n=this,r=this.getItemModel(e);if(r){for(var i="folder"!==r.type&&r.folderId,o=r.index+1,s=t.map(function(e){var t=e?a.identifierToLatex(e)+"=1":"";return{type:"expression",id:n.generateId(),latex:t,color:n.getNextColor(),hidden:!!t}}),c=s.length-1;c>=0;c--){var l=this.createItemModel(s[c]);I.insertItemAtIndex(this.listModel,l,o),i&&T.setFolderId(l,i)}var u=s[s.length-1];""===u.latex?L.moveFocusToItem(this,u.id):L.setFocusLocation(this,void 0)}},e.prototype._uploadImagesAndWaitForThemToLoad=function(e){var t=this,n=e.files,r=e.id;if(!n||0===n.length)return void this._showToast({message:this.t("You did not select a file")});if(r&&n.length>1)return void this._showToast({message:this.t("You can only choose one file as a replacement")});var i=M.uploadImages({controller:this,files:n,id:r}),o=i.errors[0];o&&this._showToast({message:o});for(var a=0,s=i.tokens;a<s.length;a++){var c=s[a];this.__pendingImageUploads[c]=!0}this.isUploadingImages()&&this._showToast({message:this.t("Uploading images..."),onHide:function(){t._clearPendingImageUploads()}})},e.prototype.getImageToRetry=function(){for(var e,t=0,n=this.getAllItemModels();t<n.length;t++){var r=n[t];"image"===r.type&&"failed"===r.loadStatus&&(!e||e.failures>r.failures)&&(e=r)}return e},e.prototype.retryLoadingFailedImage=function(e){var t=Date.now(),n=t-this.imageRetryState.lastAttemptTime,r=1e3*Math.pow(2,this.imageRetryState.attempts);this.imageRetryState.attempts>0&&n<r||(M.retryLoading(e),this.imageRetryState={lastAttemptTime:t,attempts:this.imageRetryState.attempts+1})},e.prototype.getSelectedItem=function(){return I.getSelected(this.listModel)},e.prototype.getOpenItemMenu=function(){return this.listModel.openItemMenu},e.prototype.getFocusedItem=function(){return L.getFocusedItem(this)},e.prototype.getFocusLocation=function(){return this.focusLocation},e.prototype.isFocusLocationFocused=function(e){var t=this.focusLocation,n=e;return!(!t||!n)&&s.isEqual(t,n)},e.prototype.isCurrentFocusLocationValid=function(){var e=this.focusLocation;if(!e)return!0;if("settings"===e.type)return"icon"===e.location||this.isGraphSettingsOpen();if("add-item-btn"===e.type||"edit-list-toggle"===e.type)return!0;if("add-expression-btn"===e.type||"add-table-btn"===e.type)return this.layoutModel.addExpressionOpen;if("add-folder-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areFoldersEnabled();if("add-image-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areImagesEnabled();if("search-expressions"===e.type)return this.expressionSearchOpen;var t=this.getItemModel(e.id);if(!t)return!1;if("change-image-btn"===e.type)return"image"===t.type&&(!(!this.listModel||!this.listModel.openItemMenu)&&this.listModel.openItemMenu.model===t);if("expression-menu"===e.type){if("start"===e.location||"end"===e.location||"anywhere"===e.location)return!0;if("expression"!==t.type)return!1;var n=t.points,r=t.lines,i=t.fill,o=b.getReconciledExpressionProps(t.formula.expression_type,{points:n,lines:r,fill:i});return!(!o.fill&&!o.lines)}if(!this.isItemSelected(e.id)&&"editable-label"!==e.type)return!1;switch(e.type){case"domain-limit":return"expression"===t.type&&!!_.hasDomain(t);case"expression-icon":return!0;case"image-icon":return"image"===t.type&&"loading"!==t.loadStatus&&"failed"!==t.loadStatus&&!t.error;case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"slider-limit":return"expression"===t.type&&!!_.hasSlider(t);case"visualization-prop":return"expression"===t.type&&!!_.isVisualization(t);case"clickableinfo-rule":return"expression"===t.type?!!_.isClickableAllowed(t)&&(!!_.isClickableRuleDefined(t,e.location.ruleId)&&t.clickableInfo.enabled):"image"===t.type&&(!!M.isClickableRuleDefined(t,e.location.ruleId)&&t.clickableInfo.enabled);case"distribution-param":if("expression"!==t.type)return!1;var a=_.parseToplevelFunction(t);return!!a&&e.location in a.values;case"cdf-limit":return"expression"===t.type&&_.shouldShowCDFFooter(t);case"image":return"image"===t.type;case"folder":return"folder"===t.type;case"text":return"text"===t.type;case"expression":return"expression"===t.type&&!this.isInEditListMode();case"readonly-expression":return"expression"===t.type&&this.isInEditListMode();case"braille-output":return"expression"===t.type&&"none"!==this.getBrailleMode();case"table":return"table"===t.type&&!!S.doesCellExist(t,e.location);case"table-container":return"table"===t.type&&this.isInEditListMode();case"editable-label":return"expression"===t.type&&_.hasEditableLabel(t);default:return e}},e.prototype.isDragDropActive=function(){return!!this.listModel.dragState},e.prototype.isItemBeingDragged=function(e){var t=this.listModel.dragState;return!(!t||t.firstItemId!==e)},e.prototype.getDraggedItemId=function(){var e=this.listModel.dragState;return e&&e.firstItemId},e.prototype.getRawDragState=function(){return this.listModel.dragState},e.prototype.initStateStack=function(){this.stateStack=new g.default,this.stateStack.addState(this.getUndoRedoState())},e.prototype.getUndoRedoState=function(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:I.getUndoRedoState(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}},e.prototype.getState=function(e){var t={stripDefaults:!0};e&&e.hasOwnProperty("stripDefaults")&&(t.stripDefaults=!!e.stripDefaults);var n={version:v.currentVersion,randomSeed:this.getRandomSeed(),graph:this.grapher?this.grapher.getState(t):this.getBlankState().graph,expressions:I.getState(this.listModel,t)};return e&&e.avoidBackMigration?f.default(n):v.migrateToPersisted(f.default(n))},e.prototype.getBlankState=function(){return this.graphSettings.config.clearIntoDegreeMode?r.__assign(r.__assign({},j.default),{graph:r.__assign(r.__assign({},j.default.graph),{degreeMode:!0})}):j.default},e.prototype.externalSetState=function(e,t){this._clearPendingImageUploads(),t||(t={}),e||(e=this.getBlankState()),"string"==typeof e&&(e=JSON.parse(e)),e&&(e=v.migrateToLatest(e));var n=this.layoutModel;this.setState(e,t),this.layoutModel=r.__assign(r.__assign({},O.defaultLayoutModel(this.graphSettings.config)),{keypadMinimized:n.keypadMinimized,keypadLayout:n.keypadLayout,keypadFunctionsTab:n.keypadFunctionsTab,keypadFunctionsOpen:n.keypadFunctionsOpen,expressionsVisible:!!this.graphSettings.config.expressions&&(this.isListVisible()||!!t.forceExpressionsOpen)}),this.settingsViewModel=F.defaultSettingsViewModel(),L.setFocusLocation(this,void 0),this.enqueueEvent("clearUnsavedChanges")},e.prototype.setState=function(e,t){if(this.lastParsableObjects={},this.isCurrentlyDoingSetState=!0,"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph),"expressions"in e){I.setSelected(this.listModel,void 0);var n=I.getLargestIntegerId(e.expressions);n>=this.__nextItemId&&(this.__nextItemId=n+1),I.setListState(this.listModel,e.expressions,t||{})}e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),t&&t.allowUndo||this.clearUndoRedoHistory(),this.setRandomSeed(e.randomSeed||H.default())},e.prototype.updateToState=function(e){
"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph,{doNotClear:!0}),"expressions"in e&&I.restoreListState(this.listModel,e.expressions),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel)},e.prototype.commitUndoRedoSynchronously=function(e){var t=this.getUndoRedoState();Y(this.stateStack.getState(),t)||(this.stateStack.addState(t),this.enqueueEvent("change"))},e.prototype.undo=function(){if(this.canUndo()){this.stateStack.undo();var e=this.stateStack.getState();e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change")}},e.prototype.redo=function(){if(this.canRedo()){this.stateStack.redo();var e=this.stateStack.getState();e.wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change")}},e.prototype.clearUndoRedoHistory=function(){this.stateStack.clear()},e.prototype.canUndo=function(){return this.stateStack.canUndo()},e.prototype.canRedo=function(){return this.stateStack.canRedo()},e.prototype._closeAddExpression=function(){this.layoutModel=r.__assign(r.__assign({},this.layoutModel),{addExpressionOpen:!1})},e.prototype.doesDOMHaveSize=function(){return this.layoutMeasurements.width>0&&this.layoutMeasurements.height>0},e.prototype._getExpListWidth=function(){var e;if(void 0!==this.userSpecifiedExpListWidth)e=Math.max(280,Math.min(this.layoutMeasurements.width-200,this.userSpecifiedExpListWidth));else{if(!(e=this.layoutMeasurements.width))return 356;var t=.2*e+160;e=Math.min(500,Math.max(280,t))}var n=this.layoutMeasurements.width-this.layoutMeasurements.height;return Math.abs(n-e)<=10?n:e},e.prototype._setExpListWidth=function(e){this.userSpecifiedExpListWidth!==e&&(this.userSpecifiedExpListWidth=e)},e.prototype.getKeypadHeight=function(){return this.computeMajorLayout().keypad.height},e.prototype.isKeypadEnabled=function(){return!!this.graphSettings.config.keypad},e.prototype.isKeypadOpen=function(){var e=this.layoutModel.keypadMinimized&&!this.isNarrow();return this.needsFakeKeypad()&&!e},e.prototype.isKeypadFunctionsPopoverOpen=function(){return!!this.layoutModel.keypadFunctionsOpen},e.prototype.getKeypadLayout=function(){return this.layoutModel.keypadLayout},e.prototype.isLetterKeypadOpen=function(){var e=this.getKeypadLayout();return this.isKeypadOpen()&&("letters"===e||"noQwertyLetters"===e||"capitalLetters"===e||"noQwertyCapitalLetters"===e)},e.prototype.getKeypadFunctionsTab=function(){return this.layoutModel.keypadFunctionsTab},e.prototype.isFileDraggedOver=function(){return this.layoutModel.isFileDraggedOver},e.prototype.computeMajorLayout=function(){var e=this.layoutMeasurements.width,t=this.layoutMeasurements.height,n=this.isNarrow(),r=this.isListVisible(),i=this.isKeypadOpen(),o=!this.isGrapherEnabled(),a=!this.isListEnabled(),s=!!this.getGraphSettings().config.projectorMode,c={left:0,top:0,width:0,height:0},l={left:0,top:0,width:0,height:0},u={left:0,top:t,width:e,height:s?n?185:193:169};return a?(l.width=e,l.height=t):o?(c.width=e,c.height=t):r?n?(c.width=e,c.height=Math.round(.58*t),c.top=t-c.height,l.width=e,l.height=t-c.height):(c.width=this.getExpListWidth(),c.height=t,l.left=c.width,l.width=e-l.left,l.height=t):r||(n?(c.width=e,c.height=Math.round(.58*t),c.top=t,l.width=e,l.height=t):(c.width=this.getExpListWidth(),c.height=t,c.left=-c.width,l.width=e,l.height=t)),i&&(u.top-=u.height,a||(c.height-=u.height)),{list:c,grapher:l,keypad:u}},e.prototype.isNarrow=function(){return this.layoutMeasurements.width<450},e.prototype.getCapExpressionSize=function(){return!!this.getGraphSettings().config.capExpressionSize},e}();t.default=X}),define("lib/aria",["require","exports","browser","jquery"],function(e,t,n,r){"use strict";function i(e){s.push(e)}function o(e){if(void 0!==e&&i(e),void 0!==a&&s.length>0){var t=s.join(" ").replace(/ +(?= )/g,"");a.attr("aria-relevant",c===t&&n.IS_APPLE?"all":"additions text"),a.empty().text(t),c=t}s.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.alert=t.queue=void 0;var a,s=[],c="";t.queue=i,t.alert=o,r(document).ready(function(){var e=".dcg-aria-alert";0===r(e).length&&r("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"),a=r(e)})}),define("main/instancehotkeys",["require","exports","keys","lib/aria","jquery","graphing-calc/models/expression","browser","touchtracking"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e){this.controller=e}return e.prototype.handleKeydown=function(e){var t=this;if(n.isUndo(e))e.stopPropagation(),e.preventDefault(),this.controller.hasVisibleAndUndoableToast()?this.controller.toastUndo():this.controller.dispatch({type:"undo"});else if(n.isRedo(e))e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"redo"});else if(!e.ctrlKey&&!e.metaKey||e.ctrlKey&&e.metaKey||e.altKey||"F"!==n.lookupChar(e))if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey){if("E"===n.lookupChar(e)){e.preventDefault(),e.stopPropagation(),this.controller.getSelectedItem()||this.controller.dispatch({type:"set-selected-index",index:0});var c=this.controller.getSelectedItem();c?(r.alert(this.controller.t("Expression list")),this.controller.dispatch({type:"move-focus-to-item",id:c.id})):r.alert(this.controller.t("Unable to focus expression list"))}else if("X"===n.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(r.alert(this.controller.t("Add expression")),this.controller.dispatch({type:"new-expression"})):r.alert(this.controller.t("Unable to add expression"));else if("O"===n.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(r.alert(this.controller.t("Add note")),this.controller.dispatch({type:"new-text"})):r.alert(this.controller.t("Unable to add note"));else if("F"===n.lookupChar(e)&&this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled())e.preventDefault(),e.stopPropagation(),r.alert(this.controller.t("Add folder")),this.controller.dispatch({type:"new-folder"});else if("I"===n.lookupChar(e)&&this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled())e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.controller.runAfterDispatch(function(){t.controller.find$(".dcg-add-expression-container input[type=file]").click(),r.alert(t.controller.t("Add image"))});else if("T"===n.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.controller.canUserAddExpressions()?(r.alert(this.controller.t("Add table")),this.controller.dispatch({type:"new-table"})):r.alert(this.controller.t("Unable to add table"));else if("G"===n.lookupChar(e))e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0});else if("P"===n.lookupChar(e)){e.preventDefault(),e.stopPropagation();var l=this.controller.find$(".dcg-tabbable-point").filter("[tabindex=0]");0===l.length&&(l=this.controller.find$(".dcg-editable-label-border").find('input, textarea, [role="textbox"]')),this.focusElement(l.first(),this.controller.t("No interactive points on screen"))}else if("Z"===n.lookupChar(e)){var u=this.controller.getSelectedItem();u&&u.id&&this.controller.dispatch({type:"expression-zoom-fit",id:u.id})}else if("D"===n.lookupChar(e)&&this.controller.canUserAddExpressions()){e.preventDefault(),e.stopPropagation();var d=!this.controller.isInEditListMode();this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:d,focusExpressionList:!0})}}else if((e.altKey||e.metaKey)&&!e.ctrlKey&&e.shiftKey&&"F"===n.lookupChar(e)&&this.controller.isDecimalToFractionEnabled()){var p=this.controller.getSelectedItem();p&&"expression"===p.type&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:p.id}),this.controller.runAfterDispatch(function(){o.shouldEvaluationDisplayAsFraction(p)?r.alert(t.controller.t("Show as Fraction")):r.alert(t.controller.t("Show as Decimal"))}))}else if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey){if(!e.metaKey&&!e.shiftKey&&e.ctrlKey===a.IS_APPLE&&e.altKey===!a.IS_APPLE){var h=n.lookupChar(e);if("N"===h)e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"nemeth"}),r.alert(this.controller.t("Braille mode Nemeth"));else if("U"===h)e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"ueb"}),r.alert(this.controller.t("Braille mode UEB"));else if("Q"===h||"X"===h)e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"none"}),r.alert(this.controller.t("Braille mode off"));else if("6"===h){e.preventDefault(),e.stopPropagation();var f=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:f}),r.alert(f?this.controller.t("Six Key Braille Input on"):this.controller.t("Six Key Braille Input off"))}}}else n.lookup(e)===n.BACKSPACE?document.activeElement&&s.elIsFocusable(i(document.activeElement))||e.preventDefault():n.lookup(e)===n.ESCAPE&&this.controller.isInEditListMode()&&0===this.controller.find$(".dcg-options-menu").length&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0}));else this.controller.dispatch({type:"open-expression-search"}),e.preventDefault(),e.stopPropagation()},e.prototype.focusElement=function(e,t){e.length?e.focus():t&&r.alert(t)},e}();t.default=c}),define("lib/defocus-mobile",["require","exports","jquery","touchtracking"],function(e,t,n,r){"use strict";function i(){if(document.activeElement){var e=n(document.activeElement);r.elIsFocusable(e)&&n("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("ipad.scrollfix",["require","jquery"],function(e){var t=e("jquery"),n=!1,r=function(){i(document),n=!0},i=function(e){n||t(e).bind("touchstart",function(e){var n=t(e.target),r=0,i=null;if(!n.closest("[disablescroll]").length)for(;0===r&&n.length&&void 0!==n[0].tagName;){var o=n.css("overflow"),a=n.css("overflow-y");if("hidden"!==o&&"visible"!==o&&"hidden"!==a&&"hidden"!==a){var s=n.scrollTop();0!==s&&(r=2),n.scrollTop(s+1),n.scrollTop()!==s&&(r|=1,n.scrollTop(s))}n=n.parent()}if(0!==r){i=[];for(var c=e.originalEvent.touches,l=0;l<c.length;l++){var u={};for(var d in c[l])c[l].hasOwnProperty(d)&&(u[d]=c[l][d]);i.push(u)}}t(document).on("touchmove.scrollfix",function(e){if(i){var t=i[0],n=e.originalEvent.touches[0],o=n.screenY-t.screenY;o>0&&!(2&r)?r=0:o<0&&!(1&r)&&(r=0),o&&(i=null)}0===r&&e.preventDefault()}),t(document).on("touchend.scrollfix",function(){t(document).off(".scrollfix")})})};return{limitScrollOnElement:i,limitScrollOnDocument:r}}),define("expressions/abstract-item-view",["require","exports","tslib","dcgview","jquery.handleevent"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()},t.prototype.onItemViewMounted=function(){this._isDragCopy||(this.model.dcgView=this),this._isFirstRender=!1},t.prototype.onItemViewUnmounted=function(){this._isDragCopy||(this.model.dcgView=void 0)},t.prototype.isFirstRender=function(){return this._isFirstRender},t.prototype.onMouseSelect=function(e){if(this.controller.isInEditListMode())return void this.exitEditListMode();"dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},t.prototype.onDelete=function(){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.id,setFocusAfterDelete:!this.controller.isInEditListMode()})},t.prototype.onDragPending=function(e){this.props.onDragPending(e)},t.prototype.exitEditListMode=function(){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0})},t}(r.Class);t.default=i}),define("loadcss!dcgview-helpers/tooltipped-error",function(){}),define("dcgview-helpers/tooltipped-error",["require","exports","tslib","dcgview","lib/tooltip","loadcss!./tooltipped-error"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltippedError=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(i.Tooltip,{tooltip:this.props.error,targetClickBehavior:this.const("stick"),gravity:this.props.gravity},r.createElement("div",{class:function(){return{"dcg-tooltipped-error":!0,"dcg-white":e.props.isWhite&&e.props.isWhite(),"dcg-small":e.props.size&&"small"===e.props.size()}}},r.createElement("i",{class:r.const("dcg-icon-error")})))},t}(r.Class);t.TooltippedError=o}),define("loadcss!expressions/circular-icon-view",function(){}),define("expressions/circular-icon-view",["require","exports","tslib","dcgview","loadcss!./circular-icon-view"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircularIconView=void 0;var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("span",{class:function(){var t;return t={"dcg-do-not-blur":!0,"dcg-circular-icon":!0,"dcg-thick-outline":e.isThickOutline(),"dcg-white-icon":!!e.props.whiteIcon&&e.props.whiteIcon(),"dcg-hidden":e.isHidden(),"dcg-semi-transparent":e.props.semiTransparent&&e.props.semiTransparent(),"dcg-colored-icon":!e.isThickOutline()&&!e.isHidden()&&!e.hasBackgroundImage()&&"loading"!==e.props.iconType(),"dcg-has-background-image":e.hasBackgroundImage()},t[e.iconModifier()]=e.iconModifier().length>0,t},style:function(){return{background:e.getBackgroundColor()}}},r.createElement(i,{predicate:this.bindFn(this.hasBackgroundImage)},function(){return r.createElement("span",{class:r.const("dcg-background-image"),style:function(){return{"background-image":e.props.backgroundImage&&e.props.backgroundImage(),opacity:e.props.backgroundOpacity&&e.props.backgroundOpacity()}}})}),r.createElement(i,{predicate:function(){return!!e.backgroundIcon()}},function(){return r.createElement("i",{class:function(){var t;return t={},t[e.backgroundIcon()]=!0,t["dcg-layered-icon"]=!0,t},style:function(){return{opacity:e.backgroundOpacity()}}})}),r.createElement(i,{predicate:function(){return!!e.primaryIcon()}},function(){return r.createElement("i",{class:function(){var t;return t={},t[e.primaryIcon()]=!0,t["dcg-layered-icon"]=!0,t},style:function(){return{color:e.props.foregroundColor&&e.props.foregroundColor()}}})}),r.createElement(i,{predicate:function(){return"loading"===e.props.iconType()}},function(){return r.createElement("span",{class:r.const("dcg-spinner")})}))},t.prototype.iconModifier=function(){if(!this.props.iconModifier)return"";switch(this.props.iconModifier()){case"medium":return"dcg-modifier-size-medium";case"large":return"dcg-modifier-size-large";case"small":return"dcg-modifier-size-small";case"rotated":return"dcg-modifier-rotated";case"none":return""}},t.prototype.getBackgroundColor=function(){if(!this.isHidden()&&this.props.backgroundColor)return this.props.backgroundColor()},t.prototype.isHidden=function(){return"hidden"===this.props.iconType()},t.prototype.isThickOutline=function(){var e=this.props.iconType();return"folder"===e||"pause"===e||"play"===e||"fraction"===e},t.prototype.hasBackgroundImage=function(){return!!this.props.backgroundImage&&!this.isHidden()&&!!this.props.backgroundImage()},t.prototype.primaryIcon=function(){var e=this.props.iconType();switch(e){case"folder":return"dcg-icon-folder";case"pause":return"dcg-icon-pause";case"play":return"dcg-icon-play";case"polygon-dashed":case"polygon-dashed-filled":return"dcg-icon-polygon-dashed";case"polygon-dotted":case"polygon-dotted-filled":return"dcg-icon-polygon-dotted";case"polygon-default":case"polygon-default-filled":return"dcg-icon-polygon-solid";case"graph-dashed":case"parametric-dashed-filled":return"dcg-icon-parametric-dashed";case"graph-dotted":case"parametric-dotted-filled":return"dcg-icon-parametric-dotted";case"graph-default":case"parametric-default-filled":return"dcg-icon-parametric-solid";case"movable-vertical":return"dcg-icon-move-vertical";case"movable-both":return"dcg-icon-move";case"movable-horizontal":return"dcg-icon-move-horizontal";case"point-open":return"dcg-icon-open";case"point-cross":return"dcg-icon-cross";case"point-default":return"dcg-icon-point";case"table-points":case"table-points-and-lines":return"dcg-icon-points";case"table-lines":return"dcg-icon-lines-solid";case"shaded-inequality":case"inequality":return"dcg-icon-shaded-inequality-dash";case"check":return"dcg-icon-check";case"none":case"background":case"hidden":case"polygon-none-filled":case"parametric-none-filled":case"loading":return"";case"fraction":return"dcg-icon-fraction";case"boxplot":return"dcg-icon-boxplot";case"dotplot-cross":return"dcg-icon-dotplot-cross";case"dotplot-default":return"dcg-icon-dotplot-default";case"dotplot-open":return"dcg-icon-dotplot-open";case"histogram":return"dcg-icon-histogram";case"unfilled-distribution":case"filled-distribution":return"dcg-icon-distribution";default:return e}},t.prototype.backgroundOpacity=function(){var e=this.backgroundIcon();return"dcg-icon-polygon-filled"===e||"dcg-icon-parametric-filled"===e||"dcg-icon-shaded-inequality-shade2"===e||"dcg-icon-distribution-fill"===e||"dcg-icon-histogram-fill"===e?.5:1},t.prototype.backgroundIcon=function(){var e=this.props.iconType();return"filled-distribution"===e?"dcg-icon-distribution-fill":"histogram"===e?"dcg-icon-histogram-fill":"polygon-dashed-filled"===e||"polygon-dotted-filled"===e||"polygon-default-filled"===e||"polygon-none-filled"===e?"dcg-icon-polygon-filled":"parametric-dashed-filled"===e||"parametric-dotted-filled"===e||"parametric-default-filled"===e||"parametric-none-filled"===e?"dcg-icon-parametric-filled":"table-points-and-lines"===e?"dcg-icon-lines-solid":"shaded-inequality"===e?"dcg-icon-shaded-inequality-shade2":""},t}(r.Class);t.CircularIconView=o}),define("main/manage-focus-helper",["require","exports","underscore"],function(e,t,n){"use strict";function r(e){return{shouldBeFocused:function(){return i(e)},onFocusedChanged:function(t){o(e,t)}}}function i(e){var t=e.controller.getFocusLocation();return t&&n.isEqual(t,e.location)}function o(e,t){t?e.controller.dispatch({type:"set-focus-location",location:e.location}):e.controller.dispatch({type:"blur-focus-location",location:e.location})}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOnFocusChanged=t.defaultShouldBeFocused=t.manageFocusHelper=void 0,t.manageFocusHelper=r,t.defaultShouldBeFocused=i,t.defaultOnFocusChanged=o}),define("loadcss!expressions/play-pause-icon-view",function(){}),define("expressions/play-pause-icon-view",["require","exports","tslib","dcgview","lib/aria","./circular-icon-view","main/manage-focus-helper","graphing-calc/models/expression","core/types/slider-loop-modes","../lib/tooltip","jquery.handleevent","loadcss!./play-pause-icon-view"],function(e,t,n,r,i,o,a,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayPauseIconView=void 0;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-play-pause-icon-view")},r.createElement("div",{class:r.const("dcg-circular-icon-container"),"aria-label":this.bindFn(this.getAriaLabel),role:r.const("button"),tabindex:r.const("0"),onTap:function(t){t.wasHandled("dragdrop")||e.toggleSliderIsPlaying()},manageFocus:this.const(a.manageFocusHelper({controller:this.controller,location:{type:"slider-icon",id:this.model.id}}))},r.createElement(o.CircularIconView,{iconType:function(){return e.getIconType()},whiteIcon:function(){return!e.controller.isInEditListMode()&&e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)}})),r.createElement("div",{class:r.const("dcg-slider-menu-container"),didMount:function(t){return e.rootElt=t}},r.createElement(l.Tooltip,{tooltip:function(){return e.controller.t("Animation Properties")},gravity:this.const("e"),offset:this.const({left:5})},r.createElement("div",{class:function(){return{"dcg-slider-menu-opener":!0,"dcg-menu-open":e.myOptionsOpen()}},tabindex:r.const(0),role:r.const("button"),"aria-label":function(){return e.myOptionsOpen()?e.controller.t("Hide Animation Properties"):e.controller.t("Show Animation Properties")},onTap:function(t){t.wasHandled("dragdrop")||t.wasLongheld()||e.toggleOptions(t)},manageFocus:this.const(a.manageFocusHelper({controller:this.controller,location:{type:"slider-animation-properties-icon",id:this.model.id}}))},r.createElement("i",{class:this.bindFn(this.getIcon)})))))},t.prototype.getIcon=function(){return c.getSliderIcon(this.model.slider.loopMode)},t.prototype.getIconType=function(){return this.model.slider.isPlaying?s.isSliderAtEndOfPlayOnce(this.model)?"play":"pause":"play"},t.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},t.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"slider",model:this.model,icon:this.rootElt,focusFirstOption:"keyboard"===e.device}})},t.prototype.getAriaLabel=function(){if(!this.model.sliderExists)return"";var e=this.model.dependent;return e?this.model.slider.isPlaying?this.controller.t("Pause __variable__ Animation",{variable:e}):this.controller.t("Play __variable__ Animation",{variable:e}):""},t.prototype.toggleSliderIsPlaying=function(){if(this.model.sliderExists){var e="",t=this.model.dependent;s.isSliderAtEndOfPlayOnce(this.model)?(e=this.controller.t("__variable__ restarted",{variable:t}),this.controller.dispatch({type:"play-slider-from-min",id:this.model.id})):this.model.slider.isPlaying?(e=this.controller.t("__variable__ playing",{variable:t}),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!1})):(e=this.controller.t("__variable__ paused",{variable:t}),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!0})),i.alert(e)}},t}(r.Class);t.PlayPauseIconView=u}),define("expressions/expression-icon-view",["require","exports","tslib","dcgview","core/lib/dragmode","core/types/styles","core/math/comparators","core/math/expression-types","graphing-calc/models/expression","../dcgview-helpers/tooltipped-error","./play-pause-icon-view","./circular-icon-view","main/manage-focus-helper","jquery.handleevent"],function(e,t,n,r,i,o,a,s,c,l,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=r.Components.SwitchUnion,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-expression-icon-container")},h(this.bindFn(this.getIconMode),{error:function(){return r.createElement(l.TooltippedError,{error:function(){return e.controller.unpack(e.model.error)},isWhite:function(){return e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)},gravity:e.const("se")})},none:function(){return r.createElement("span",null)},slider:function(){return r.createElement(u.PlayPauseIconView,{controller:e.props.controller,model:e.props.model})},icon:function(){return r.createElement("div",{class:r.const("dcg-circular-icon-container"),role:r.const("button"),tabindex:r.const("0"),"aria-label":e.bindFn(e.getIconAriaLabel),onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return e.myOptionsOpen()?e.toggleOptions(t):e.controller.isInEditListMode()&&!e.isFraction()?e.toggleOptions(t):e.isFraction()?e.onToggleFractionDisplay():void e.toggleGraphShown()},didMount:function(t){return e.rootElt=t},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),e.isFraction()||e.toggleOptions(t)},manageFocus:e.const(p.manageFocusHelper({controller:e.controller,location:{type:"expression-icon",id:e.model.id}}))},r.createElement(d.CircularIconView,{iconType:e.bindFn(e.getIconType),backgroundColor:e.bindFn(e.getBackgroundColor),whiteIcon:e.bindFn(e.isSelected),foregroundColor:e.bindFn(e.getForegroundColor),iconModifier:e.bindFn(e.getIconModifier)}))}}))},t.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},t.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,icon:this.rootElt,focusFirstOption:"keyboard"===e.device}})},t.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},t.prototype.isFraction=function(){return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)},t.prototype.getIconMode=function(){return this.hasError()?"error":this.controller.getGraphSettings().config.graphpaper?this.model.isGraphable&&!this.model.loading?"icon":this.hasSlider()?"slider":this.isFraction()?"icon":"none":"none"},t.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})},t.prototype.hasError=function(){return!!this.model.error&&!c.isEmpty(this.model)&&"none"===this.controller.getBrailleMode()},t.prototype.hasSlider=function(){return!!this.model.sliderExists},t.prototype.getDisplayProps=function(){var e=this.model,t=e.points,n=e.lines,r=e.fill;return s.getReconciledExpressionProps(this.model.formula.expression_type,{points:t,lines:n,fill:r})},t.prototype.getBackgroundColor=function(){if(!this.isFraction())return this.model.color;var e=this.isSelected();return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?e?"#fff":"#000":""},t.prototype.getForegroundColor=function(){if(!this.isFraction())return"";var e=this.isSelected();return e!==this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?"#fff":e?"#6399cb":"#000"},t.prototype.onToggleFractionDisplay=function(){this.controller.dispatch({type:"toggle-fraction-evaluation",id:this.model.id})},t.prototype.getIconModifier=function(){return c.isBoxPlot(this.model)&&"y"===c.getVizPropLatex(this.model,"alignedAxis")?"rotated":"none"},t.prototype.getIconType=function(){if(this.isFraction())return"fraction";if(!this.model.shouldGraph)return"hidden";if(this.controller.isInEditListMode())return"none";var e=this.model.pointStyle,t=this.model.lineStyle,n=this.getDisplayProps(),r=this.model.formula;if(c.isBoxPlot(this.model))return"boxplot";if(c.isDotPlot(this.model)){if("POINT"===this.model.pointStyle)return"dotplot-default";if("CROSS"===this.model.pointStyle)return"dotplot-cross";if("OPEN"===this.model.pointStyle)return"dotplot-open"}if(c.isHistogram(this.model))return"histogram";if(c.isToplevelDistribution(this.model))return c.shouldShowCDFFooter(this.model)?"filled-distribution":"unfilled-distribution";if(this.model.reconciledDragMode===i.DragMode.X)return"movable-horizontal";if(this.model.reconciledDragMode===i.DragMode.Y)return"movable-vertical";if(this.model.reconciledDragMode===i.DragMode.XY)return"movable-both";if(c.isPointOrPointList(this.model))return c.isSinglePoint(this.model)?e===o.PointStyle.OPEN?"point-open":e===o.PointStyle.CROSS?"point-cross":"point-default":n.lines&&n.points?"table-points-and-lines":n.lines?"table-lines":"table-points";var s=this.getDisplayProps().fill;if(c.isPolygon(this.model))return s?n.lines?t===o.LineStyle.DASHED?"polygon-dashed-filled":t===o.LineStyle.DOTTED?"polygon-dotted-filled":"polygon-default-filled":"polygon-none-filled":n.lines?t===o.LineStyle.DASHED?"polygon-dashed":t===o.LineStyle.DOTTED?"polygon-dotted":"polygon-default":"none";if(c.isParametric(this.model))return s?n.lines?t===o.LineStyle.DASHED?"parametric-dashed-filled":t===o.LineStyle.DOTTED?"parametric-dotted-filled":"parametric-default-filled":"parametric-none-filled":n.lines?t===o.LineStyle.DASHED?"graph-dashed":t===o.LineStyle.DOTTED?"graph-dotted":"graph-default":"none";var l=r.operator,u=0!==a.table[l].direction,d=!1===a.table[l].inclusive;return r.is_shade_between?"shaded-inequality":!d&&u?"shaded-inequality":d&&!u?"inequality":d&&u?"shaded-inequality":t===o.LineStyle.DASHED?"graph-dashed":t===o.LineStyle.DOTTED?"graph-dotted":"graph-default"},t.prototype.getIconAriaLabel=function(){return this.isFraction()?c.shouldEvaluationDisplayAsFraction(this.model)?this.controller.t("Displaying as fraction. Press Enter to display as Decimal"):this.controller.t("Displaying as decimal. Press Enter to display as Fraction"):this.controller.isInEditListMode()?this.myOptionsOpen()?this.controller.t("Hide Options"):this.controller.t("Show Options"):this.model.hidden?this.controller.t("Show Expression"):this.controller.t("Hide Expression")},t}(r.Class);t.default=f}),define("loadcss!expressions/evaluation-view",function(){}),define("expressions/evaluation-view",["require","exports","tslib","dcgview","core/lib/label","../dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","loadcss!./evaluation-view"],function(e,t,n,r,i,o,a){"use strict";function s(e,t){return i.numericLabel(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components,l=c.If,u=c.SwitchUnion,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-evaluation-container")},r.createElement("div",{class:function(){return{"dcg-evaluation":!0,"dcg-do-blur":!0,"dcg-hidden":e.props.controller().isInEditListMode()}},handleEvent:r.const("true"),tabindex:function(){return e.props.focusable()&&"none"===e.controller.getBrailleMode()?"0":"-1"}},r.createElement(o.default,{latex:this.bindFn(this.getBrailleEvaluation),tooltipOptions:function(){return{gravity:"sw"}},ariaLabel:this.const(""),brailleShouldFocus:function(){var t=e.controller.getFocusLocation();return!!t&&("braille-output"===t.type&&t.id===e.props.id())},onBrailleInput:function(){},controller:this.props.controller,isStatic:this.const(!0),onBrailleFocusedChanged:function(t){t?e.controller.dispatch({type:"set-focus-location",location:{type:"braille-output",id:e.props.id()}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"braille-output",id:e.props.id()}})}},r.createElement("div",{class:r.const("dcg-evaluation-label-container"),onTap:this.bindFn(this.onSelectEvaluation)},r.createElement(l,{predicate:function(){return!!e.props.dependent()}},function(){return r.createElement(a.default,{latex:function(){return i.identifierToLatex(e.props.dependent())}},r.createElement("span",null))}),r.createElement("span",{class:r.const("dcg-equals")},r.createElement(a.default,{latex:this.const("=")}))),r.createElement("span",{class:r.const("dcg-text-selectable dcg-evaluation-html"),didMount:this.bindFn(this.didMountEvaluation)},u(function(){return e.getEvaluationType()},{list:function(){return r.createElement("span",null,function(){return e.controller.t("__count__ element list",{count:e.props.val().length})})},fraction:function(){return r.createElement(a.default,{latex:function(){return i.truncatedLatexLabel(e.props.val(),e.getLabelOptions())}})},undefined:function(){
return r.createElement("span",null,r.const("undefined"))},scientific:function(){return r.createElement(a.default,{latex:function(){return e.getNumberLabel().mantissa+"\\times10^{"+e.getNumberLabel().exponent+"}"}})},decimal:function(){return r.createElement(a.default,{latex:function(){return e.getNumberLabel().value}})}})))),r.createElement("div",{class:r.const("dcg-clear")}))},t.prototype.getNumberLabel=function(){return s(this.props.val(),this.getLabelOptions())},t.prototype.getEvaluationType=function(){var e=this.props.val();return Array.isArray(e)?"list":this.getNumberLabel().type},t.prototype.getLabelOptions=function(){return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())},t.prototype.didMountEvaluation=function(e){this.evaluationNode=e},t.prototype.onSelectEvaluation=function(){var e=document.createRange();e.selectNodeContents(this.evaluationNode);var t=window.getSelection();t&&(t.removeAllRanges(),(t=window.getSelection())&&t.addRange(e))},t.prototype.getBrailleEvaluation=function(){var e="";this.props.dependent()&&(e=i.identifierToLatex(this.props.dependent())),e+="=";var t=this.getEvaluationType();switch(t){case"list":e+=this.controller.t("__count__ element list",{count:this.props.val().length});break;case"fraction":e+=i.truncatedLatexLabel(this.props.val(),this.getLabelOptions());break;case"undefined":e="undefined";break;case"scientific":e+=this.getNumberLabel().mantissa+"\\times10^{"+this.getNumberLabel().exponent+"}";break;case"decimal":e+=this.getNumberLabel().value;break;default:return t}return e},t}(r.Class);t.default=d}),define("expressions/unresolved_view",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),r.createElement("div",{class:r.const("dcg-unresolved")},r.createElement("i",{class:r.const("dcg-icon-error")}),r.const(" "),function(){return e.controller.t("This equation contains fine detail that has not been fully resolved.")},r.createElement("a",{href:r.const("https://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions"),target:r.const("_blank")},function(){return e.controller.t("Learn more.")}))},t}(r.Class);t.default=i}),define("loadcss!domain",function(){}),define("expressions/domain_view",["require","exports","tslib","dcgview","jquery","keys","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","core/lib/label","bugsnag","loadcss!domain"],function(e,t,n,r,i,o,a,s,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-domain dcg-do-blur"),handleEvent:r.const("true")},r.createElement("div",{class:r.const("dcg-display-domain dcg-do-blur"),handleEvent:r.const("true")},r.createElement("div",{class:r.const("dcg-editable-mathquill-container")},r.createElement(a.default,{latex:function(){return e.getMinLatex()},ariaLabel:function(){return e.controller.raw("dmin")},placeholder:function(){return u.value(l.getDomainMin(e.model)).string},brailleShouldFocus:function(){return"min"===e.getFocusedInput()},selectOnFocus:this.const(!0),onBrailleInput:function(t){return e.dispatchMinLatexIfChanged(t)},controller:this.props.controller,hasError:function(){return!l.isDomainMinValid(e.model)},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("min",t)},dataLabelAttributeValue:this.const("domain-min")},r.createElement(c.default,{latex:function(){return e.getMinLatex()},placeholder:function(){return u.value(l.getDomainMin(e.model)).string},isFocused:function(){return"min"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("domain Minimum: ")},getAriaPostLabel:this.const(""),hasError:function(){return!l.isDomainMinValid(e.model)},onUserPressedKey:function(t,n){e.handlePressedKey("min",t,n)},onUserChangedLatex:function(t){return e.dispatchMinLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},dataLabelAttributeValue:this.const("domain-min"),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})),r.createElement("span",{class:r.const("dcg-interval-interior")},r.createElement(s.default,{latex:function(){return e.getDomainVariableLatex()}},r.createElement("span",null))),r.createElement(a.default,{latex:function(){return e.getMaxLatex()},ariaLabel:function(){return e.controller.raw("dmax")},placeholder:function(){return u.value(l.getDomainMax(e.model)).string},brailleShouldFocus:function(){return"max"===e.getFocusedInput()},selectOnFocus:this.const(!0),onBrailleInput:function(t){return e.dispatchMaxLatexIfChanged(t)},controller:this.props.controller,hasError:function(){return!l.isDomainMaxValid(e.model)},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("max",t)},dataLabelAttributeValue:this.const("domain-max")},r.createElement(c.default,{latex:function(){return e.getMaxLatex()},placeholder:function(){return u.value(l.getDomainMax(e.model)).string},isFocused:function(){return"max"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("domain Maximum: ")},getAriaPostLabel:this.const(""),hasError:function(){return!l.isDomainMaxValid(e.model)},onUserPressedKey:function(t,n){e.handlePressedKey("max",t,n)},onUserChangedLatex:function(t){return e.dispatchMaxLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},dataLabelAttributeValue:this.const("domain-max"),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})))))},t.prototype.handleBrailleKeydown=function(e,t){var n=o.lookup(t);n&&this.handlePressedKey(e,n,i.Event(t))},t.prototype.handlePressedKey=function(e,t,n){if(!this.controller.isInEditListMode()){if("Esc"===t)return void this.controller.dispatch({type:"set-focus-location",location:void 0});if("Enter"===t)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}var r=c.default.getFocusedMathquill(),o=a.getFocusedBrailleElement();if("Left"===t||"Right"===t||"Down"===t||"Up"===t){return void((r?c.default.applyArrowKeyAndReturnIfWasAtBounds(r,t,n):!(!o||!(0===o.selectionStart&&"Left"===t||o.selectionStart===i(o).val().length&&"Right"===t||"Up"===t||"Down"===t)))&&(n&&n.preventDefault(),"Left"===t?"max"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"min"}}):"Right"===t?"min"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"max"}}):"Down"===t?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):"Up"===t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}})))}r&&(r.keystroke(t,n),"min"===e?this.dispatchMinLatexIfChanged(r.latex()):"max"===e&&this.dispatchMaxLatexIfChanged(r.latex()))},t.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:e}})},t.prototype.dispatchMinLatexIfChanged=function(e){if(this.getMinLatex()!==e){var t=this.getDomainType();if("unknown"===t)return void d.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:l.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch("polar"===t?{type:"set-polar-domain-minlatex",id:this.id,latex:e}:{type:"set-parametric-domain-minlatex",id:this.id,latex:e})}},t.prototype.dispatchMaxLatexIfChanged=function(e){if(this.getMaxLatex()!==e){var t=this.getDomainType();if("unknown"===t)return void d.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:l.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch("polar"===t?{type:"set-polar-domain-maxlatex",id:this.id,latex:e}:{type:"set-parametric-domain-maxlatex",id:this.id,latex:e})}},t.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"domain-limit"===e.type&&e.id===this.id)return e.location},t.prototype.getMinLatex=function(){switch(this.getDomainType()){case"parametric":return l.getParametricDomainMin(this.model);case"polar":return l.getPolarDomainMin(this.model);default:return""}},t.prototype.getMaxLatex=function(){switch(this.getDomainType()){case"parametric":return l.getParametricDomainMax(this.model);case"polar":return l.getPolarDomainMax(this.model);default:return""}},t.prototype.getDomainVariableLatex=function(){switch(this.getDomainType()){case"parametric":return"\\le t \\le";case"polar":return"\\le \\theta \\le";default:return""}},t.prototype.getDomainType=function(){return l.isPolar(this.model)?"polar":l.isParametric(this.model)?"parametric":"unknown"},t}(r.Class);t.default=p}),define("loadcss!regression",function(){}),define("expressions/regression_view",["require","exports","tslib","dcgview","core/lib/label","dcgview-helpers/static-mathquill-view","lib/tooltip","loadcss!regression"],function(e,t,n,r,i,o,a){"use strict";function s(e,t){return i.truncatedLatexLabel(e.parameters[t],{digits:6,smallCutoff:1e-6,bigCutoff:1e9})}function c(e,t){return i.truncatedLatexLabel(e.statistics[t],{zeroCutoff:1e-15,digits:4,smallCutoff:1e-6,bigCutoff:1e9})}Object.defineProperty(t,"__esModule",{value:!0}),t.getRoundedStat=t.getRoundedParam=void 0;var l=r.Components,u=l.If,d=l.For,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement(u,{predicate:this.bindFn(this.getRegression)},function(){return r.createElement("div",{class:r.const("dcg-regression-container")},r.createElement("div",{class:r.const("dcg-handle-event"),handleEvent:r.const("true")},r.createElement(u,{predicate:e.bindFn(e.getShouldSuggestLogMode)},function(){return r.createElement("div",{class:r.const("dcg-log-mode-toggle")},r.createElement("div",{class:function(){return{"dcg-action-log-mode-toggle":!0,"dcg-toggled-on":e.getIsLogModeRegression()}},onTap:e.bindFn(e.onTapLogMode)},r.createElement("span",{class:r.const("dcg-log-mode-checkbox"),role:r.const("checkbox"),"aria-checked":function(){return e.getIsLogModeRegression()},tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Log Mode")}},r.createElement("i",{class:r.const("dcg-icon-check")})),function(){return e.controller.t("Log Mode")}),r.createElement(a.Tooltip,{tooltip:function(){return e.controller.t("Log mode help")},gravity:e.const("e")},r.createElement("a",{"aria-label":function(){return e.controller.t("Log Mode Help")},class:r.const("dcg-log-mode-toggle-help"),target:r.const("_blank"),href:r.const("https://support.desmos.com/hc/en-us/articles/204349605")},r.createElement("i",{class:r.const("dcg-icon-question-sign")}))))}),r.createElement("div",{class:r.const("dcg-statistics"),role:r.const("group"),"aria-label":function(){return e.controller.t("Statistics")}},r.createElement("div",{class:r.const("dcg-expression-footer-title")},function(){return e.controller.t("Statistics")},r.createElement(u,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return r.createElement(a.Tooltip,{tooltip:function(){return e.controller.t("What is RMSE? Click to learn more.")},gravity:e.const("s")},r.createElement("a",{class:r.const("dcg-expression-footer-title-help"),target:r.const("_blank"),href:r.const("https://support.desmos.com/entries/60176149-What-is-RMSE-"),"aria-label":function(){return e.controller.t("What is RMSE? Click to learn more.")}},r.createElement("i",{class:r.const("dcg-icon-question-sign")})))}),r.createElement(u,{predicate:function(){return e.getRegression().statistics.Rsquared<0}},function(){return r.createElement(a.Tooltip,{tooltip:function(){return e.controller.t("Why is this negative? Click to learn more.")},gravity:e.const("s")},r.createElement("a",{"aria-label":function(){return e.controller.t("Why is this negative? Click to learn more.")},class:r.const("dcg-expression-footer-title-help"),target:r.const("_blank"),href:r.const("https://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-")},r.createElement("i",{class:r.const("dcg-icon-question-sign")})))})),r.createElement("div",{class:r.const("dcg-statistics-values")},r.createElement(u,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("Rsquared")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"R^2="+c(e.getRegression(),"Rsquared")}},r.createElement("span",{tabindex:r.const("0")})))}),r.createElement(u,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("rsquared")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"r^2="+c(e.getRegression(),"rsquared")}},r.createElement("span",{tabindex:r.const("0")})))}),r.createElement(u,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("r")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"r="+c(e.getRegression(),"r")}},r.createElement("span",{class:r.const("dcg-r-value"),tabindex:r.const("0")})))}),r.createElement(u,{predicate:function(){return e.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return r.createElement("div",null,r.createElement(o.default,{latex:function(){return"\\operatorname{RMSE}="+c(e.getRegression(),"RMSE")}},r.createElement("span",{tabindex:r.const("0")})))}))),r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Residuals")},class:r.const("dcg-residuals")},r.createElement("div",{class:r.const("dcg-expression-footer-title")},function(){return e.controller.t("Residuals")}),r.createElement(o.default,{latex:e.bindFn(e.getResidualVariable)},r.createElement("span",{class:r.const("dcg-residuals-variable"),tabindex:r.const("0")})),r.createElement("div",{class:function(){return{"dcg-residual-suggestion":!0,"dcg-action-plot-residual":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-visible":e.getResidualSuggestionVisible()}},"aria-hidden":function(){return!e.getResidualSuggestionVisible()},role:r.const("button"),tabindex:function(){return e.getResidualSuggestionVisible()?"0":void 0},onTap:e.bindFn(e.onTapResidualsSuggestion)},function(){return e.controller.t("plot")})),r.createElement(u,{predicate:function(){return Object.keys(e.getRegression().parameters).length>0}},function(){return r.createElement("div",{class:r.const("dcg-parameters-container")},r.createElement("div",{class:r.const("dcg-expression-footer-title")},function(){return e.controller.t("Parameters")},r.createElement(u,{predicate:function(){return e.isNonLinearRegression()}},function(){return r.createElement(a.Tooltip,{tooltip:function(){return e.controller.t("Parameters might not be exact. Click to learn more.")},gravity:e.const("s")},r.createElement("a",{class:r.const("dcg-expression-footer-title-help"),target:r.const("_blank"),href:r.const("https://support.desmos.com/hc/articles/360042428612"),"aria-label":function(){return e.controller.t("Parameters might not be exact. Click to learn more.")}},r.createElement("i",{class:r.const("dcg-icon-question-sign")})))})),r.createElement(d,{each:function(){return Object.keys(e.getRegression().parameters)}},r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Parameters")},class:r.const("dcg-parameters")},function(t){return r.createElement(o.default,{latex:function(){return t+"="+s(e.getRegression(),t)}},r.createElement("span",{class:r.const("dcg-parameter"),tabindex:r.const("0")}))})))}),r.createElement("div",{class:r.const("dcg-clear")}),r.createElement(u,{predicate:function(){return e.hasParameterWarning()}},function(){return r.createElement("div",{class:r.const("dcg-parameter-warning")},r.createElement("i",{class:r.const("dcg-icon-error")}),r.const(" "),function(){return e.controller.t("Some parameters may be too large or small to represent accurately.")},r.const(" "),r.createElement("a",{href:r.const("https://support.desmos.com/hc/articles/360042942771"),target:r.const("_blank")},function(){return e.controller.t("Learn more.")}))})))})},t.prototype.onTapResidualsSuggestion=function(){this.controller.dispatch({type:"plot-residuals",id:this.id})},t.prototype.onTapLogMode=function(){this.controller.dispatch({type:"toggle-logmode",id:this.id})},t.prototype.getRegression=function(){return this.model.formula.regression},t.prototype.isNonLinearRegression=function(){return!this.getRegression().isLinear},t.prototype.getResidualVariable=function(){return this.getRegression().residualVariable||""},t.prototype.getResidualSuggestionVisible=function(){return void 0!==this.getRegression().residualSuggestionId},t.prototype.getShouldSuggestLogMode=function(){return!!this.getRegression().shouldSuggestLogMode},t.prototype.hasParameterWarning=function(){return!!this.getRegression().parameterWarning},t.prototype.getIsLogModeRegression=function(){return!!this.model.isLogModeRegression},t}(r.Class);t.default=p,t.getRoundedParam=s,t.getRoundedStat=c}),define("lib/underscore-shim",["require","exports","underscore_model"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnderscoreModelShim=void 0;var r=function(){function e(){this.model=new n.UnderscoreModel}return e.prototype.triggerEvent=function(e,t){this.model.triggerEvent(e,t)},e.prototype.observeEvent=function(e,t){this.model.observeEvent(e,t)},e.prototype.unobserveEvent=function(e){this.model.unobserveEvent(e)},e.prototype.setProperty=function(e,t){this[e]=t,this.model.setProperty(e,t)},e.prototype.observe=function(e,t){this.model.observe(e,t)},e.prototype.observeAndSync=function(e,t){this.model.observeAndSync(e,t)},e.prototype.unobserve=function(e){this.model.unobserve(e)},e}();t.UnderscoreModelShim=r}),define("dcgview-helpers/dragdrop",["require","exports","tslib","underscore","jquery","lib/animation-frame","lib/underscore-shim"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragDrop=void 0;var s=function(e){function t(){var t=e.call(this)||this;return t.dragging=!1,t.guid=r.uniqueId("dragdrop-class"),t}return n.__extends(t,e),t.prototype._evt2pt=function(e){return{x:e.changedTouches[0].pageX-this._offsetPt.x,y:e.changedTouches[0].pageY-this._offsetPt.y}},t.prototype._dispatch=function(e,t){if(!this._destroyed){var n=this._evt2pt(t);this.triggerEvent(e,{x:n.x,y:n.y,dx:n.x-this._startPt.x,dy:n.y-this._startPt.y,evt:t})}},t.prototype.destroy=function(){i(document).off("."+this.guid),this._destroyed=!0},t.prototype.startDrag=function(e,t){var n=this;if(void 0===t&&(t={}),!this.dragging)return i(document).on("dcg-tapmove."+this.guid,function(e){e.originalEvent.preventDefault(),o.cancelAnimationFrame(n.frameThrottle),n.frameThrottle=o.requestAnimationFrame(function(){return n.doDrag(e)})}),i(document).on("dcg-tapend."+this.guid+" dcg-tapcancel."+this.guid,function(e){return n.endDrag(e)}),this._offsetPt={x:0,y:0},t.origin&&(this._offsetPt={x:this._evt2pt(e).x-t.origin.x,y:this._evt2pt(e).y-t.origin.y}),this._startPt=this._evt2pt(e),this.setProperty("dragging",!0),this._dispatch("onGrab",e)},t.prototype.doDrag=function(e){this.dragging&&this._dispatch("onDrag",e)},t.prototype.endDrag=function(e){this.dragging&&(i(document).off("."+this.guid),this.doDrag(e),this.setProperty("dragging",!1),this._dispatch("onDrop",e))},t}(a.UnderscoreModelShim);t.DragDrop=s}),define("loadcss!dcgview-helpers/slider",function(){}),define("dcgview-helpers/slider",["require","exports","lib/rounding","tslib","keys","dcgview","jquery","lib/conditional_blur","./dragdrop","loadcss!./slider"],function(e,t,n,r,i,o,a,s,c){"use strict";function l(e,t,n){return Math.min(Math.max(e,t),n)}Object.defineProperty(t,"__esModule",{value:!0});var u=o.Components.If,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-slider-interior":!0,"dcg-disable-slider":e.shouldDisableSlider()}},didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag),style:o.const({"touch-action":"none"})},o.createElement("div",{class:o.const("dcg-track")},o.createElement("div",{class:o.const("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),o.createElement("div",{class:o.const("dcg-graphic")})),o.createElement(u,{predicate:this.bindFn(this.shouldShowZeroMarker)},function(){return o.createElement("div",{class:o.const("dcg-zeroMarker"),style:function(){return{left:e.getZeroMarkerPercent()+"%"}}})}),o.createElement("div",{class:function(){return{"dcg-thumb":!0,"dcg-down":e.isDragging}},role:o.const("slider"),tabindex:o.const("0"),disablescroll:o.const("true"),style:function(){return{left:e.getThumbPercent()+"%"}},onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-valuenow":this.props.value,manageFocus:this.buildFocusManager()},o.createElement("div",{class:o.const("dcg-graphic")}),o.createElement("div",{class:o.const("dcg-center")})))},t.prototype.willUnmount=function(){this.dragDrop.destroy()},t.prototype.didMountRoot=function(e){var t=this;this.rootNode=e,this.dragDrop=new c.DragDrop,this.isMounted=!0,this.dragDrop.observeEvent("onDrop",function(){t.isDragging=!1,t.update(),t.props.onDrop&&t.props.onDrop()}),this.dragDrop.observeEvent("onGrab",function(){t.isDragging=!0,t.update(),t.props.onGrab&&t.props.onGrab()}),this.dragDrop.observeEvent("onDrag",function(e,n){t.props.onDragUpdate(t.valueFromPixels(n.x))})},t.prototype.didMountTickMarks=function(e){this.tickMarksNode=e,this.renderTickMarks()},t.prototype.didUpdate=function(){this.renderTickMarks()},t.prototype.shouldDisableSlider=function(){return this.props.min()===this.props.max()},t.prototype.renderTickMarks=function(){if(this.tickMarksNode){var e,t=this.props.step(),n=this.props.min(),r=this.props.max();if(e=void 0===t?0:100*t/(r-n),e<3&&(e=0),e>100&&(e=0),isNaN(e)&&(e=0),this.lastTickMarksPercent!==e){this.lastTickMarksPercent=e;var i="";if(e>0&&e<100)for(var o=e;o<100;o+=e)i+='<div class="dcg-tick" style="left:'+o+'%"></div>';this.tickMarksNode.innerHTML=i}}},t.prototype.shouldShowZeroMarker=function(){return this.props.min()<=0&&this.props.max()>=0},t.prototype.getZeroMarkerPercent=function(){var e=this.props.min();return 100*(0-e)/(this.props.max()-e)},t.prototype.getThumbPercent=function(){return 100*this.percentFromValue(this.props.value())},t.prototype.valueFromPixels=function(e){if(!this.isMounted)return 0;var t=this.props.min(),r=this.props.max(),i=this.rootNode.getBoundingClientRect().width,o=l(e/i,0,1),a=t+(r-t)*o,s=(r-t)/i;return n.shortestDecimalBetween(a-s,a+s)},t.prototype.percentFromValue=function(e){var t=this.props.min();return l((e-t)/(this.props.max()-t),0,1)},t.prototype.pixelsFromValue=function(e){if(!this.isMounted)return 0;var t=this.percentFromValue(e);return this.rootNode.getBoundingClientRect().width*t},t.prototype.onKeyDown=function(e){switch(i.lookup(e)){case i.UP:this.props.onUpPress&&(this.props.onUpPress(),e.preventDefault());break;case i.DOWN:this.props.onDownPress&&(this.props.onDownPress(),e.preventDefault());break;case i.ENTER:this.props.onEnterPress&&(this.props.onEnterPress(),e.preventDefault());break;case i.ESCAPE:document.activeElement&&a(document.activeElement).blur();break;case i.LEFT:this.props.onKeyboardUpdate("down"),e.preventDefault();break;case i.RIGHT:this.props.onKeyboardUpdate("up"),e.preventDefault();break;case i.PAGEDOWN:this.props.onKeyboardUpdate("bigdown"),e.preventDefault();break;case i.PAGEUP:this.props.onKeyboardUpdate("bigup"),e.preventDefault();break;case i.HOME:this.props.onKeyboardUpdate("min"),e.preventDefault();break;case i.END:this.props.onKeyboardUpdate("max"),e.preventDefault()}},t.prototype.onStartDrag=function(e){if("keyboard"!==e.device&&e.target){e.preventDefault(),s.default();var t={x:0,y:0};1===a(e.target).closest(".dcg-thumb").length?t.x=this.pixelsFromValue(this.props.value()):t.x=e.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(e,{origin:t})}},t.prototype.buildFocusManager=function(){return this.props.onFocusedChanged&&this.props.isFocused?this.const({shouldBeFocused:this.props.isFocused,onFocusedChanged:this.props.onFocusedChanged}):this.const(void 0)},t}(o.Class);t.default=d}),define("expressions/slider_limits_view",["require","exports","tslib","jquery","dcgview","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","keys","graphing-calc/models/expression","core/lib/label","core/types/slider-loop-modes"],function(e,t,n,r,i,o,a,s,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=i.Components.If,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-slider_menu dcg-do-blur"),handleEvent:i.const("true"),didMount:function(t){return e.node=t}},i.createElement("div",{class:i.const("dcg-editable-mathquill-container")},i.createElement(p,{predicate:function(){return!e.shouldOnlyShowStep()}},function(){return i.createElement("span",null,i.createElement(o.default,{latex:function(){return e.model.slider.hardMin?e.model.slider.min:""},ariaLabel:function(){return e.controller.raw("sldrmin")},brailleShouldFocus:function(){return"min"===e.getFocusedInput()},onBrailleInput:function(t){return e.handleLatexChanged("min",t)},controller:e.props.controller,hasError:function(){return!l.isSliderMinValid(e.model)},onBrailleFocusedChanged:function(t,n){return e.handleFocusedChanged("min",t,n)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("min",t)},selectOnFocus:e.const(!0),dataDCGLimit:e.const("slidermin")},i.createElement(s.default,{latex:function(){return e.model.slider.hardMin?e.model.slider.min:""},isFocused:function(){return"min"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:e.const(!0),config:e.const({}),getAriaLabel:function(){return e.controller.t("Slider Minimum: ")},getAriaPostLabel:e.const(""),hasError:e.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey("min",t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged("min",t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,n){return e.handleFocusedChanged("min",t,n)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"min"===e.getFocusedInput(),"dcg-invalid":!l.isSliderMinValid(e.model)}},"data-dcg-limit":i.const("slidermin")}))),i.createElement("span",{class:i.const("dcg-interval-interior")},i.createElement(a.default,{latex:e.bindFn(e.getDependentLatex)},i.createElement("span",null))),i.createElement(o.default,{latex:function(){return e.model.slider.hardMax?e.model.slider.max:""},ariaLabel:function(){return e.controller.raw("sldrmax")},brailleShouldFocus:function(){return"max"===e.getFocusedInput()},onBrailleInput:function(t){return e.handleLatexChanged("max",t)},controller:e.props.controller,hasError:function(){return!l.isSliderMaxValid(e.model)},onBrailleFocusedChanged:function(t,n){return e.handleFocusedChanged("max",t,n)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("max",t)},selectOnFocus:e.const(!0),dataDCGLimit:e.const("slidermax")},i.createElement(s.default,{latex:function(){return e.model.slider.hardMax?e.model.slider.max:""},isFocused:function(){return"max"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:e.const(!0),config:e.const({}),getAriaLabel:function(){return e.controller.t("Slider Maximum: ")},getAriaPostLabel:e.const(""),hasError:e.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey("max",t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged("max",t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,n){return e.handleFocusedChanged("max",t,n)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"max"===e.getFocusedInput(),"dcg-invalid":!l.isSliderMaxValid(e.model)}},"data-dcg-limit":i.const("slidermax")}))))}),i.createElement("span",{class:function(){return{"dcg-slider-step-container":!e.shouldOnlyShowStep()}}},i.createElement("span",{class:i.const("dcg-slider-step-label"),"aria-hidden":i.const("true")},function(){return e.controller.t("Step:")}),i.createElement(o.default,{latex:function(){return e.model.slider.step},ariaLabel:function(){return e.controller.raw("sldrstp")},brailleShouldFocus:function(){return"step"===e.getFocusedInput()},onBrailleInput:function(t){return e.handleLatexChanged("step",t)},controller:this.props.controller,hasError:function(){return!l.isSliderStepValid(e.model)},onBrailleFocusedChanged:function(t,n){return e.handleFocusedChanged("step",t,n)},onBrailleKeydown:function(t){return e.handleBrailleKeydown("step",t)},selectOnFocus:this.const(!0),dataDCGLimit:this.const("sliderstep")},i.createElement(s.default,{latex:function(){return e.model.slider.step},isFocused:function(){return"step"===e.getFocusedInput()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t("Slider Step Size: ")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey("step",t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged("step",t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,n){return e.handleFocusedChanged("step",t,n)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"step"===e.getFocusedInput(),"dcg-invalid":!l.isSliderStepValid(e.model)}},"data-dcg-limit":i.const("sliderstep")}))))))},t.prototype.handleBrailleKeydown=function(e,t){var n=c.lookup(t);n&&this.handlePressedKey(e,n,r.Event(t))},t.prototype.handlePressedKey=function(e,t,n){if(!(this.controller.isInEditListMode()||this.shouldOnlyShowStep()||"Esc"!==t&&"Enter"!==t))return void this.controller.dispatch({
type:"set-focus-location",location:{type:"slider-thumb",id:this.id}});var i=s.default.getFocusedMathquill(),a=o.getFocusedBrailleElement();if("Left"===t||"Right"===t||"Down"===t||"Up"===t){return void((i?s.default.applyArrowKeyAndReturnIfWasAtBounds(i,t,n):!(!a||!(0===a.selectionStart&&"Left"===t||a.selectionStart===r(a).val().length&&"Right"===t||"Up"===t||"Down"===t)))&&(n&&n.preventDefault(),"Left"!==t||this.shouldOnlyShowStep()?"Right"!==t||this.shouldOnlyShowStep()?"Down"===t?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):"Up"===t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}):"min"===e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}}):"max"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"step"}}):"max"===e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"min"}}):"step"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}})))}i&&(i.keystroke(t,n),this.handleLatexChanged(e,i.latex()))},t.prototype.shouldOnlyShowStep=function(){return this.model.slider.loopMode===d.SliderLoopMode.PLAY_INDEFINITELY},t.prototype.handleLatexChanged=function(e,t){"min"===e?this.dispatchMinLatexIfChanged(t):"max"===e?this.dispatchMaxLatexIfChanged(t):"step"===e&&this.dispatchStepLatexIfChanged(t)},t.prototype.handleFocusedChanged=function(e,t,n){t&&this.getFocusedInput()!==e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}}):this.getFocusedInput()!==e||"none"!==this.controller.getBrailleMode()||n.relatedTarget&&this.node.contains(n.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-limit",id:this.id,location:e}})},t.prototype.dispatchMinLatexIfChanged=function(e){this.model.slider.min!==e&&this.controller.dispatch({type:"set-slider-minlatex",id:this.id,latex:e})},t.prototype.dispatchMaxLatexIfChanged=function(e){this.model.slider.max!==e&&this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,latex:e})},t.prototype.dispatchStepLatexIfChanged=function(e){this.model.slider.step!==e&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:e})},t.prototype.getDependentLatex=function(){var e=this.model.dependent||"";return" \\le "+u.identifierToLatex(e)+" \\le "},t.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"slider-limit"===e.type&&e.id===this.id)return e.location},t}(i.Class);t.default=h}),define("loadcss!expressions/slider-view",function(){}),define("expressions/slider_view",["require","exports","tslib","jquery","keys","dcgview","dcgview-helpers/slider","./slider_limits_view","dcgview-helpers/static-mathquill-view","graphing-calc/models/expression","core/types/slider-loop-modes","loadcss!./slider-view"],function(e,t,n,r,i,o,a,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=o.Components.If,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return o.createElement("span",{class:o.const("dcg-slider-container"),tapboundary:o.const("true"),onKeydown:function(t){"Tab"!==i.lookup(t)||t.altKey||t.metaKey||t.ctrlKey||(t.shiftKey?e.isSliderMinFocused()&&e.controller.isInEditListMode()?(null!==t.target&&r(t.target).closest(".dcg-expressionitem").find('[tabindex="0"]:visible:first').focus(),t.preventDefault(),t.stopPropagation()):e.isSliderThumbFocused()&&(e.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:e.id,location:"step"}}),t.preventDefault(),t.stopPropagation()):!t.shiftKey&&e.isSliderStepFocused()&&(e.controller.isInEditListMode()?e.controller.dispatch({type:"set-focus-location",location:{type:"slider-icon",id:e.id}}):e.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:e.id}}),t.preventDefault(),t.stopPropagation()))}},o.createElement(d,{predicate:function(){return e.shouldShowSlider()}},function(){return o.createElement("div",{class:o.const("dcg-do-blur dcg-slider"),handleEvent:o.const("true")},o.createElement("div",{class:o.const("dcg-minLabel dcg-template-minlabelhtml"),role:o.const("button"),tabindex:o.const("0"),"aria-label":function(){return e.controller.t("Edit __variable__ Limits",{variable:"none"===e.controller.getBrailleMode()?'"'+e.model.dependent+'"':""+e.model.dependent})},onTap:function(){return e.onEditLimit("min")}},o.createElement(c.default,{latex:function(){return l.getDisplaySliderMin(e.model)}})),o.createElement(a.default,{min:function(){return l.getSliderMin(e.model)},max:function(){return l.getSliderMax(e.model)},step:function(){return l.getSliderStep(e.model)},value:function(){return l.getSliderValue(e.model)},ariaLabel:function(){return"none"===e.controller.getBrailleMode()?'"'+e.model.dependent+'"':""+e.model.dependent},onGrab:e.bindFn(e.onGrab),onDrop:e.bindFn(e.onDrop),onDragUpdate:e.bindFn(e.onDragUpdate),onKeyboardUpdate:e.bindFn(e.onKeyboardUpdate),onUpPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Up"})},onDownPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Down"})},onEnterPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})},isFocused:e.bindFn(e.isSliderThumbFocused),onFocusedChanged:function(t){t?e.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:e.id}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"slider-thumb",id:e.id}})}}),o.createElement("div",{class:o.const("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:function(){return e.onEditLimit("max")}},o.createElement(c.default,{latex:function(){return l.getDisplaySliderMax(e.model)}})))}),o.createElement(d,{predicate:function(){return e.shouldShowLimitInputs()}},function(){return o.createElement(s.default,{model:e.props.model,controller:e.props.controller})}))},t.prototype.onGrab=function(){this.dispatchIsDraggingIfChanged(!0)},t.prototype.onDrop=function(){this.controller.dispatch({type:"set-none-selected"}),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)},t.prototype.onKeyboardUpdate=function(e){this.controller.dispatch({type:"adjust-slider-by-keyboard",id:this.id,adjustment:e})},t.prototype.onDragUpdate=function(e){this.controller.dispatch({type:"adjust-slider-by-dragging-thumb",id:this.model.id,target:e})},t.prototype.onEditLimit=function(e){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}})},t.prototype.dispatchIsPlayingIfChanged=function(e){this.model.slider.isPlaying!==e&&this.controller.dispatch({type:"set-slider-isplaying",id:this.id,isPlaying:e})},t.prototype.dispatchIsDraggingIfChanged=function(e){this.model.sliderDragging!==e&&this.controller.dispatch({type:"set-slider-dragging",id:this.id,dragging:e})},t.prototype.shouldShowLimitInputs=function(){if(this.controller.isInEditListMode())return!0;if(!l.isSliderMinValid(this.model))return!0;if(!l.isSliderMaxValid(this.model))return!0;if(!l.isSliderStepValid(this.model))return!0;if(this.model.slider.loopMode===u.SliderLoopMode.PLAY_INDEFINITELY)return!0;var e=this.controller.getFocusLocation();return!(!e||"slider-limit"!==e.type&&"expression"!==e.type||e.id!==this.id)},t.prototype.shouldShowSlider=function(){return!this.shouldShowLimitInputs()},t.prototype.isSliderThumbFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"slider-thumb"!==e.type||e.id!==this.id)},t.prototype.isSliderMinFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"slider-limit"!==e.type||e.id!==this.id||"min"!==e.location)},t.prototype.isSliderStepFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"slider-limit"!==e.type||e.id!==this.id||"step"!==e.location)},t}(o.Class);t.default=p}),define("loadcss!prompt-sliders",function(){}),define("expressions/promptslider_view",["require","exports","tslib","core/lib/label","jquery","lib/aria","dcgview","loadcss!prompt-sliders"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a.Components,c=s.For,l=s.If,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},t.prototype.template=function(){var e=this;return a.createElement("div",{class:a.const("dcg-create-sliders dcg-action-createslider"),handleEvent:a.const("true"),onTap:this.bindFn(this.onCreateSlider)},a.createElement("span",{class:a.const("dcg-msg")},function(){return e.controller.t("add slider:")}),a.createElement("span",{class:a.const("btns")},a.createElement(c,{each:function(){return e.model.missingVariables.slice(0,4)}},a.createElement("span",null,function(t){return a.createElement("div",{class:a.const("dcg-slider-btn-container"),var_name:e.const(t)},a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:function(){return{"dcg-btn-slider":!0,"dcg-btn-blue":1===e.model.missingVariables.length,"dcg-btn-light-gray":1!==e.model.missingVariables.length}},didMount:function(e){e.innerHTML=r.identifierToHTML(t)}}))})),a.createElement(l,{predicate:function(){return e.model.missingVariables.length>1}},function(){return a.createElement("div",{class:a.const("dcg-slider-btn-container dcg-all")},a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:a.const("dcg-btn-slider dcg-btn-blue")},function(){return e.controller.t("all")}))})))},t.prototype.onCreateSlider=function(e){if(this.controller.dispatch({type:"set-none-selected"}),e.target){var t=i(e.target).closest(".dcg-slider-btn-container");if(t.length){var n=!1;if(t.hasClass("dcg-all"))this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:this.model.missingVariables}),n=!0;else{var r=[t.attr("var_name")];this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:r}),n=1==this.model.missingVariables.length}if("keyboard"===e.device){var o=this.model.id,a=this.props.controller().getItemSelectorById(o);if(!a)return;n?this.controller.dispatch({type:"move-focus-to-item",id:o}):a.find(".dcg-btn-blue").focus()}}}},t.prototype.didMount=function(){var e=this;this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout(function(){for(var t=[],n=e.model.missingVariables,r=0;r<n.length;r++)t.push('"'+n[r]+'"');o.alert(e.controller.t("Add slider for __vars__",{vars:t.join(",")})),e.promptAlertTimeout=0},2e3)},t.prototype.didUnmount=function(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)},t}(a.Class);t.default=u}),define("loadcss!dcgview-helpers/checkbox",function(){}),define("dcgview-helpers/checkbox",["require","exports","tslib","dcgview","jquery","loadcss!./checkbox"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkbox=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-component-checkbox":!0,"dcg-checked":e.props.checked(),"dcg-disabled":e.props.disabled&&e.props.disabled(),"dcg-small":e.props.small&&e.props.small(),"dcg-green":e.props.green&&e.props.green()}},onTap:this.bindFn(this.onChange)},r.createElement("span",{tabindex:r.const(0),class:r.const("dcg-checkbox"),role:r.const("checkbox"),"aria-label":this.props.ariaLabel,"aria-disabled":function(){return e.props.disabled&&e.props.disabled()},"aria-checked":this.props.checked},r.createElement("i",{class:r.const("dcg-icon-check"),"aria-hidden":r.const("true")})),r.createElement("span",{class:r.const("dcg-checkbox-children")},this.children))},t.prototype.onChange=function(e){e.target&&i(e.target).attr("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())},t}(r.Class);t.Checkbox=o}),define("core/math/interpolatedlabel",["require","exports","parsenodes","core/math/types","core/lib/label","./policy"],function(e,t,n,r,i,o){"use strict";function a(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function s(e){for(var t,n=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"],r="\\$({"+n.join("})|\\$({")+"})",i=new RegExp(r,"g"),o=[],a=0,s=0;t=i.exec(e);){s=t.index,s>a&&o.push(e.substr(a,s-a));var c=t[0],l=c.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");o.push({symbol:l,str:c}),a=t.index+c.length}return a<e.length&&o.push(e.substr(a)),{raw:e,parts:o}}function c(e,t){return t?"{"+i.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":i.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}function l(e,t,i){for(var s=[],l=a(e.raw),u=0,d=e.parts;u<d.length;u++){var p=d[u];if("string"==typeof p)s.push(p);else{var h=n.Identifier(p.symbol).tryGetConcreteTree(o.defaultPolicy,t);if(h.valueType===r.Number){var f=h.asValue();if("number"==typeof f){s.push(c(f,l));continue}}else if(h.valueType===r.ListOfNumber&&h.args[i]){var f=h.args[i].asValue();if("number"==typeof f){s.push(c(f,l));continue}}l?s.push("{?}"):s.push("?")}}return s.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.interpolate=t.parse=t.isMathLabel=void 0,t.isMathLabel=a,t.parse=s,t.interpolate=l}),define("loadcss!expressions/label-dropdown-view",function(){}),define("expressions/label-dropdown-view",["require","exports","tslib","dcgview","graphing-calc/models/expression","core/graphing-calc/json/expression","core/types/label-sizes","core/lib/dragmode","core/types/label-orientations","dcgview-helpers/checkbox","core/math/interpolatedlabel","loadcss!./label-dropdown-view"],function(e,t,n,r,i,o,a,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelDropdownView=void 0;var d=r.Components,p=d.For,h=d.IfElse,f=d.If,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-label-dropdown-view dcg-popover dcg-left")},r.createElement("div",{class:r.const("dcg-arrow")}),r.createElement("div",{class:r.const("dcg-label-group-container")},r.createElement("div",{class:r.const("dcg-label-group")},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-label-group-title")},function(){return e.controller.t("Label Position")}),r.createElement(p,{each:this.bindFn(this.getLabelOrientations)},r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Label Position")},class:r.const("dcg-label-options")},function(t){return r.createElement("a",{role:r.const("button"),tabindex:r.const(0),class:function(){return{"dcg-menu-option":!0,"dcg-label-position":!0,"dcg-menu-option-selected":e.isorientationSelected(t)}},"aria-pressed":function(){return e.isorientationSelected(t)},onTap:function(){return e.setorientation(t)},"aria-label":function(){return e.getOrientationText(t)}},r.createElement("span",{class:r.const("dcg-menu-option-icon")},r.createElement("i",{class:r.const("dcg-icon-position-arrows")}),r.createElement("span",{class:function(){var n;return n={"dcg-position-direction-icon":!0},n[e.getPositionIconClass(t)]=!0,n}},h(function(){return"default"===t},{true:function(){return r.createElement("div",{class:r.const("dcg-default-position")})},false:function(){return r.createElement("i",{class:r.const("dcg-icon-position-arrows-single")})}}))),r.createElement("span",{class:r.const("dcg-menu-option-label")},function(){return e.getOrientationText(t)}))}))),r.createElement("div",{class:r.const("dcg-label-group")},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-label-group-title")},function(){return e.controller.t("Font Size")}),r.createElement(p,{each:this.bindFn(this.getLabelSizes)},r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Font Size")},class:r.const("dcg-label-options")},function(t){return r.createElement("a",{role:r.const("button"),tabindex:r.const(0),class:function(){var n;return n={"dcg-menu-option":!0,"dcg-menu-option-selected":e.isSizeSelected(t),"dcg-label-size":!0},n[e.getSizeClass(t)]=!0,n},"aria-pressed":function(){return e.isSizeSelected(t)},onTap:function(){return e.setLabelSize(t)},"aria-label":function(){return e.getSizeText(t)}},r.createElement("span",{class:r.const("dcg-menu-option-icon")},r.const("A")),r.createElement("span",{class:r.const("dcg-menu-option-label")},function(){return e.getSizeText(t)}))})),r.createElement("div",{class:r.const("dcg-label-group dcg-additional-group-in-column")},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-label-group-title")},function(){return e.controller.t("Orientation")}),r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Orientation")}},r.createElement(l.Checkbox,{checked:this.bindFn(this.getVerticalLabel),onChange:this.bindFn(this.setVerticalLabel),ariaLabel:this.const(this.controller.t("Vertical"))},function(){return e.controller.t("Vertical")}))),r.createElement(f,{predicate:function(){return e.controller.canUseAdvancedStyling()}},function(){return r.createElement("div",{class:r.const("dcg-label-group dcg-additional-group-in-column")},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-label-group-title")},function(){return e.controller.t("Advanced")}),r.createElement(l.Checkbox,{checked:e.bindFn(e.getWhiteTextOutline),onChange:e.bindFn(e.setWhiteTextOutline),ariaLabel:e.const("Text outline"),disabled:function(){return e.getEditable()}},r.const("Text outline")),r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Advanced")}},r.createElement(f,{predicate:function(){return e.shouldShowInteractiveLabelCheckbox()}},function(){return r.createElement(l.Checkbox,{checked:e.bindFn(e.getInteractiveLabel),onChange:e.bindFn(e.setInteractiveLabel),ariaLabel:e.const("Interactive Label")},r.const("Show on hover"))}),r.createElement(f,{predicate:e.bindFn(e.shouldShowEditableLabelToggle)},function(){return r.createElement(l.Checkbox,{checked:e.bindFn(e.getEditable),onChange:e.bindFn(e.setEditable),ariaLabel:e.const("Editable")},r.const("Editable"))})))}))))},t.prototype.getLabelOrientations=function(){return[c.LabelOrientation.DEFAULT,c.LabelOrientation.LEFT,c.LabelOrientation.RIGHT,c.LabelOrientation.ABOVE,c.LabelOrientation.BELOW]},t.prototype.getOrientationText=function(e){switch(e){case c.LabelOrientation.DEFAULT:return this.controller.t("Default");case c.LabelOrientation.LEFT:return this.controller.t("Left");case c.LabelOrientation.RIGHT:return this.controller.t("Right");case c.LabelOrientation.ABOVE:return this.controller.t("Above");case c.LabelOrientation.BELOW:return this.controller.t("Below");default:var t=e;throw new Error("Unexpected label orientation: "+t)}},t.prototype.getLabelSizes=function(){return[a.LabelSize.SMALL,a.LabelSize.MEDIUM,a.LabelSize.LARGE]},t.prototype.getSizeText=function(e){switch(e){case a.LabelSize.SMALL:return this.controller.t("Small");case a.LabelSize.LARGE:return this.controller.t("Large");case a.LabelSize.MEDIUM:return this.controller.t("Medium");default:var t=e;throw new Error("Unexpected label size: "+t)}},t.prototype.getSizeClass=function(e){switch(e){case a.LabelSize.SMALL:return"dcg-small-label";case a.LabelSize.LARGE:return"dcg-large-label";case a.LabelSize.MEDIUM:return"dcg-medium-label";default:var t=e;throw new Error("Unexpected label size: "+t)}},t.prototype.isSizeSelected=function(e){return this.model.labelSize===e},t.prototype.isorientationSelected=function(e){return this.model.labelOrientation===e},t.prototype.getPositionIconClass=function(e){switch(e){case c.LabelOrientation.ABOVE:return"dcg-position-icon-above";case c.LabelOrientation.BELOW:return"dcg-position-icon-below";case c.LabelOrientation.LEFT:return"dcg-position-icon-left";case c.LabelOrientation.RIGHT:return"dcg-position-icon-right";case c.LabelOrientation.DEFAULT:return"dcg-position-icon-default";default:var t=e;throw new Error("Unexpected label orientation: "+t)}},t.prototype.setorientation=function(e){this.controller.dispatch({type:"set-item-label-orientation",id:this.id,labelOrientation:e})},t.prototype.setVerticalLabel=function(e){this.controller.dispatch({type:"set-item-vertical-label",id:this.id,verticalLabel:e})},t.prototype.getWhiteTextOutline=function(){return!this.getEditable()&&!this.model.suppressTextOutline},t.prototype.setWhiteTextOutline=function(e){this.controller.dispatch({type:"set-suppress-text-outline",id:this.id,suppressTextOutline:!e})},t.prototype.getVerticalLabel=function(){return!!this.model.verticalLabel},t.prototype.setInteractiveLabel=function(e){this.controller.dispatch({type:"set-item-interactive-label",id:this.id,interactiveLabel:e})},t.prototype.getInteractiveLabel=function(){return!!this.model.interactiveLabel},t.prototype.setEditable=function(e){if(e){var t=u.isMathLabel(this.model.label)?o.EditableLabelMode.Math:o.EditableLabelMode.Text;this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:t})}else this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:o.EditableLabelMode.None})},t.prototype.getEditable=function(){return this.model.editableLabelMode!==o.EditableLabelMode.None},t.prototype.getEditableLabelMode=function(){return this.model.editableLabelMode},t.prototype.shouldShowEditableLabelToggle=function(){return i.isSinglePoint(this.model)},t.prototype.setLabelSize=function(e){this.controller.dispatch({type:"set-item-labelSize",id:this.id,labelSize:e})},t.prototype.getLabelSize=function(){return this.model.labelSize},t.prototype.shouldShowInteractiveLabelCheckbox=function(){return this.model.reconciledDragMode===s.DragMode.NONE},t}(r.Class);t.LabelDropdownView=m}),define("loadcss!expressions/label_view",function(){}),define("loadcss!toggle",function(){}),define("expressions/label_view",["require","exports","tslib","keys","dcgview","graphing-calc/models/expression","./label-dropdown-view","jquery","core/graphing-calc/json/expression","loadcss!./label_view","loadcss!toggle"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i.Components,u=l.Input,d=l.If,p=l.IfElse,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,i.createElement("div",{class:function(){return{"dcg-label-visible":e.getShowLabel(),"dcg-label-container":!0,"dcg-do-blur":!0}},tapboundary:i.const("true"),handleEvent:i.const("true")},i.createElement("span",{role:i.const("checkbox"),"aria-checked":this.bindFn(this.getShowLabel),tabindex:i.const("0"),class:function(){return{"dcg-checkbox":!0,"dcg-checkbox-label-colon":e.getShowLabel()&&!e.hasEditableLabel()}},"aria-label":function(){return e.controller.t("Label")},onTap:this.bindFn(this.onCheckboxInput)},i.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":e.getShowLabel()}}},i.createElement("i",{class:i.const("dcg-icon-check")})),i.const(" "),i.createElement("span",{class:i.const("dcg-checkbox-label"),"aria-hidden":i.const("true")},function(){return e.controller.t("Label")})),p(this.bindFn(this.hasEditableLabel),{true:function(){return i.createElement("div",{class:i.const("dcg-editable-mode-toggle")},i.createElement("div",{class:i.const("dcg-option-toggle-view")},i.createElement("div",{class:i.const("dcg-toggle-container")},i.createElement("div",{class:i.const("dcg-toggle")},i.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.model.editableLabelMode===c.EditableLabelMode.Math}},role:i.const("button"),tabindex:i.const(0),"aria-pressed":function(){return e.model.editableLabelMode===c.EditableLabelMode.Math},"aria-label":function(){return e.controller.t("Editable label mode: Editable Math")},didMount:function(t){void 0!==e.lastToggleOption&&"math"===e.lastToggleOption&&(e.lastToggleOption=void 0,t.focus())},onTap:function(){e.lastToggleOption="Editable Math",e.controller.dispatch({type:"set-item-editable-label-mode",id:e.id,editableLabelMode:c.EditableLabelMode.Math})}},function(){return e.controller.t("Editable Math")}),i.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.model.editableLabelMode===c.EditableLabelMode.Text}},role:i.const("button"),tabindex:i.const(0),"aria-pressed":function(){return e.model.editableLabelMode===c.EditableLabelMode.Text},"aria-label":function(){return e.controller.t("Editable label mode: Editable Text")},didMount:function(t){void 0!==e.lastToggleOption&&"text"===e.lastToggleOption&&(e.lastToggleOption=void 0,t.focus())},onTap:function(){e.lastToggleOption="Editable Text",e.controller.dispatch({type:"set-item-editable-label-mode",id:e.id,editableLabelMode:c.EditableLabelMode.Text})}},function(){return e.controller.t("Editable Text")})))))},false:function(){return i.createElement(u,{class:function(){return{"dcg-label-input":!0,"dcg-disabled-input":e.getIsDisabled(),"dcg-disabled-editable-input":e.hasEditableLabel()}},"aria-label":function(){return e.controller.t("Label Text")},"aria-disabled":function(){return e.getIsDisabled()||e.hasEditableLabel()},value:e.bindFn(e.getLabel),onInput:e.bindFn(e.onLabelInput)})}}),i.createElement("span",{class:function(){return{"dcg-dropdown-container":!0,"dcg-no-label":!e.getShowLabel()}},didMount:function(t){return e.$dropdownContainer=s(t)}},i.createElement("span",{class:i.const("dcg-dropdown-wrench-container"),role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return e.controller.t("Label Settings")},onTap:this.bindFn(this.toggleDropdown),selected:this.bindFn(this.showLabelDropdown),"aria-expanded":this.bindFn(this.showLabelDropdown)},i.createElement("i",{class:i.const("dcg-icon-wrench")})),i.createElement(d,{predicate:this.bindFn(this.showLabelDropdown)},function(){return i.createElement(a.LabelDropdownView,{controller:e.props.controller,model:e.props.model})})))},t.prototype.showLabelDropdown=function(){return this.model.labelDropdownOpen},t.prototype.showDropdown=function(e){var t=this,n=s(e.target);s(document).on("mousedown.dcg-"+this.id+" touchstart.dcg-"+this.id+" pointerdown.dcg-"+this.id,function(e){t.showLabelDropdown()&&(s(e.target).closest(t.$dropdownContainer).length>0||t.hideDropdown())}),s(document).on("keydown.dcg-"+this.id,function(e){r.lookup(e)===r.ESCAPE&&(t.hideDropdown(),n.focus())}),this.controller.dispatch({type:"set-item-label-dropdown-open",id:this.id,open:!0})},t.prototype.hideDropdown=function(){s(document).off(".dcg-"+this.id),this.controller.dispatch({type:"set-item-label-dropdown-open",id:this.id,open:!1})},t.prototype.toggleDropdown=function(e){this.showLabelDropdown()?this.hideDropdown():this.showDropdown(e)},t.prototype.getLabel=function(){return this.model.label||""},t.prototype.hasEditableLabel=function(){return o.hasEditableLabel(this.model)},t.prototype.getShowLabel=function(){return!!this.model.showLabel},t.prototype.getIsDisabled=function(){return 0===this.getLabel().length&&!this.getShowLabel()},t.prototype.onLabelInput=function(e){var t=e;this.controller.dispatch({type:"set-item-label",id:this.id,label:t}),this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!!t})},t.prototype.onCheckboxInput=function(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.getShowLabel()})},t}(i.Class);t.default=h}),define("loadcss!expressions/cdf-footer-view",function(){}),define("expressions/cdf-footer-view",["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./evaluation-view","dcgview-helpers/checkbox","loadcss!./cdf-footer-view"],function(e,t,n,r,i,o,a,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=r.Components.If,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focusedValues={},t}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-cdf-footer-container dcg-do-blur"),tapboundary:r.const("true"),handleEvent:r.const("true")},r.createElement(u.Checkbox,{checked:function(){return a.shouldShowCDFFooter(e.model)},disabled:function(){return a.isListValuedDistribution(e.model)},onChange:function(t){e.controller.dispatch({type:"set-show-cdf",id:e.model.id,showCDF:t})},ariaLabel:function(){return e.controller.t("Find Cumulative Probability (CDF)")}},function(){return e.controller.t("Find Cumulative Probability (CDF)")}),r.createElement(d,{predicate:function(){return a.shouldShowCDFFooter(e.model)}},function(){return r.createElement("div",null,r.createElement("span",{class:r.const("dcg-cdf-limit-name")},function(){return e.controller.t("Min:")}),r.createElement(c.default,{latex:function(){return a.getCDFMin(e.model)},hasError:function(){return!a.isCDFMinValid(e.model)},brailleShouldFocus:function(){return e.isInputFocused("min")},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},ariaLabel:function(){return e.controller.t("Min")},placeholder:function(){return a.getCDFMinPlaceholder(e.model)},onBrailleInput:e.bindFn(e.updateCDFMin),controller:e.props.controller,onBrailleKeydown:function(t){return e.handleBraillePressedKey(t,"min")}},r.createElement(s.default,{latex:function(){return a.getCDFMin(e.model)},hasError:function(){return!a.isCDFMinValid(e.model)},isFocused:function(){return e.isInputFocused("min")},onFocusedChanged:function(t){return e.handleFocusedChanged("min",t)},config:e.const({}),getAriaLabel:function(){return e.controller.t("Min")},getAriaPostLabel:function(){return""},placeholder:function(){return a.getCDFMinPlaceholder(e.model)},onUserPressedKey:function(t,n){return e.handlePressedKey(t,n,"min")},onUserChangedLatex:e.bindFn(e.updateCDFMin),onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return e.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})),r.createElement("span",{class:r.const("dcg-cdf-limit-name")},function(){return e.controller.t("Max:")}),r.createElement(c.default,{latex:function(){return a.getCDFMax(e.model)},hasError:function(){return!a.isCDFMaxValid(e.model)},brailleShouldFocus:function(){return e.isInputFocused("max")},onBrailleFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},ariaLabel:function(){return e.controller.t("Max")},placeholder:function(){return a.getCDFMaxPlaceholder(e.model)},onBrailleInput:e.bindFn(e.updateCDFMax),controller:e.props.controller,onBrailleKeydown:function(t){return e.handleBraillePressedKey(t,"max")}},r.createElement(s.default,{latex:function(){return a.getCDFMax(e.model)},hasError:function(){return!a.isCDFMaxValid(e.model)},isFocused:function(){return e.isInputFocused("max")},onFocusedChanged:function(t){return e.handleFocusedChanged("max",t)},config:e.const({}),getAriaLabel:function(){return e.controller.t("Max")},getAriaPostLabel:function(){return""},placeholder:function(){return a.getCDFMaxPlaceholder(e.model)},
onUserPressedKey:function(t,n){return e.handlePressedKey(t,n,"max")},onUserChangedLatex:e.bindFn(e.updateCDFMax),onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return e.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}})),r.createElement(d,{predicate:e.bindFn(e.showEvaluation)},function(){return r.createElement("div",{class:r.const("dcg-cdf-evaluation-container")},r.createElement(l.default,{val:function(){return a.getCDFEvaluation(e.model)},controller:e.props.controller,dependent:e.const(""),id:function(){return e.model.id},focusable:e.const(!0)}))}))}))},t.prototype.handleBraillePressedKey=function(e,t){var n=o.lookup(e);n&&this.handlePressedKey(n,i.Event(e),t)},t.prototype.handlePressedKey=function(e,t,n){if("Esc"===e)return void this.controller.dispatch({type:"set-focus-location",location:void 0});if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var r=s.default.getFocusedMathquill();r&&(r.keystroke(e,t),"min"===n&&a.getCDFMin(this.model)!==r.latex()&&this.updateCDFMin(r.latex()),"max"===n&&a.getCDFMax(this.model)!==r.latex()&&this.updateCDFMax(r.latex()))},t.prototype.updateCDFMax=function(e){this.controller.dispatch({type:"set-cdf-max",id:this.model.id,latex:e})},t.prototype.updateCDFMin=function(e){this.controller.dispatch({type:"set-cdf-min",id:this.model.id,latex:e})},t.prototype.showEvaluation=function(){return!!a.isCDFMaxValid(this.model)&&!!a.isCDFMinValid(this.model)},t.prototype.isInputFocused=function(e){var t=this.controller.getFocusLocation();return!(!t||"cdf-limit"!==t.type||t.id!==this.id)&&t.location===e},t.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"cdf-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"cdf-limit",id:this.id,location:e}})},t}(r.Class);t.default=p}),define("loadcss!expressions/parameter_suggestions_view",function(){}),define("expressions/parameters_suggestions_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","loadcss!./parameter_suggestions_view"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParametersSuggestionsView=void 0;var o=r.Components,a=o.If,s=o.For,c=o.SwitchUnion,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return c(this.bindFn(this.getSuggestionType),{list:function(){return r.createElement(s,{each:e.bindFn(e.getListOfParameters)},r.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==e.controller.getBrailleMode()}}},function(t){return r.createElement("span",{class:r.const("dcg-parameter-name")},function(){return e.getParamName(t)})}))},listWithDefault:function(){return r.createElement(s,{each:e.bindFn(e.getListOfParameters)},r.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==e.controller.getBrailleMode()}},onTap:e.bindFn(e.fillInDefaults)},function(t){return r.createElement("span",{class:r.const("dcg-parameter-name")},function(){return e.getParamName(t)},r.createElement(a,{predicate:function(){return e.shouldShowDefaultValue(t)}},function(){return r.createElement("span",{class:r.const("dcg-default-marker")},r.const("= "),function(){return e.getDefaultValue(t)})}))}))},individual:function(){return r.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==e.controller.getBrailleMode()}}},e.bindFn(e.getMissingRequiredParamText))},none:function(){}})},t.prototype.getExtractedAndDefaultArgString=function(e){var t=e.params,n=e.values,r=e.defaults;return t.map(function(e,t){var i=n[e],o=r[t];return i||o||""}).join(",")},t.prototype.fillInDefaults=function(){var e=i.parseToplevelFunction(this.model);if(e){var t=e.symbol,n=e.span,r=n.input,o=n.start,a=n.end,s=this.getExtractedAndDefaultArgString(e),c="\\operatorname{"+t+"}\\left("+s+"\\right)",l=""+r.slice(0,o)+c+r.slice(a);this.controller.dispatch({type:"set-item-latex",id:this.id,latex:l}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),this.controller.dispatch({type:"keypad/press-key",key:"Left"})}},t.prototype.isMissingDefault=function(){if(!i.isPrimaryLatexValid(this.model))return!1;var e=i.parseToplevelFunction(this.model);if(!e)return!1;for(var t=0;t<e.params.length;t++)if(this.shouldShowDefaultValue(e.params[t]))return!0;return!1},t.prototype.getSuggestionType=function(){return this.getListOfParameters().length>1?this.isMissingDefault()?"listWithDefault":"list":this.missingRequiredParam()?"individual":"none"},t.prototype.missingRequiredParam=function(){var e=i.parseToplevelFunction(this.model);if(e&&1===e.params.length){var t=e.params[0];if(!this.getDefaultValue(t)&&!this.getParameterExtractedValue(t))return t}},t.prototype.getMissingRequiredParamText=function(){var e=this.missingRequiredParam();return e?this.controller.t("Enter the __param__.",{param:this.getParamName(e)}):""},t.prototype.getDefaultValue=function(e){var t=i.parseToplevelFunction(this.model);if(!t||!t.params)return"";for(var n=0;n<t.params.length;n++)if(t.params[n]===e)return t.defaults[n]||"";return""},t.prototype.getParameterExtractedValue=function(e){var t=i.parseToplevelFunction(this.model);return t?t.values[e]||"":""},t.prototype.shouldShowDefaultValue=function(e){return!this.getParameterExtractedValue(e)&&!!this.getDefaultValue(e)},t.prototype.getListOfParameters=function(){var e=i.parseToplevelFunction(this.model);return e?e.params:[]},t.prototype.getParamName=function(e){switch(e){case"mean":return this.controller.t("Mean");case"stdev":return this.controller.t("Standard Deviation");case"dof":return this.controller.t("Degrees of Freedom");case"probsuccess":return this.controller.t("Success Probability");case"trials":return this.controller.t("Trials");case"data":return this.controller.t("Data Set");case"binwidth":return this.controller.t("Bin Width");case"min":return this.controller.t("Minimum");case"max":return this.controller.t("Maximum");case"height":case"offset":case"data":return e;default:return e}},t}(r.Class);t.ParametersSuggestionsView=l}),define("loadcss!expressions/distribution_parameters_view",function(){}),define("expressions/distribution_parameters_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","expressions/cdf-footer-view","./parameters_suggestions_view","loadcss!./distribution_parameters_view"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-distribution-parameters-container dcg-do-blur"),tapboundary:r.const("true"),handleEvent:r.const("true")},r.createElement(a.ParametersSuggestionsView,{model:this.props.model,controller:this.props.controller}),r.createElement(s,{predicate:function(){return i.shouldShowCDFCheckbox(e.model)}},function(){return r.createElement(o.default,{model:e.props.model,controller:e.props.controller})}))},t}(r.Class);t.default=c}),define("loadcss!expressions/visualization_parameters_view",function(){}),define("expressions/visualization_parameters_view",["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./parameters_suggestions_view","loadcss!./visualization_parameters_view","loadcss!toggle"],function(e,t,n,r,i,o,a,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=r.Components.For,d=r.Components,p=d.SwitchUnion,h=d.If,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-toggle-container")},r.createElement("div",{class:r.const("dcg-expression-footer-title")},this.props.title,r.createElement(h,{predicate:function(){return!!e.props.helpLink}},function(){return r.createElement("a",{"aria-label":function(){return e.props.controller().t("Help")},class:r.const("dcg-expression-footer-title-help"),target:r.const("_blank"),href:e.props.helpLink},r.createElement("i",{class:r.const("dcg-icon-question-sign")}))})),r.createElement(u,{each:this.props.options,key:function(e){return e.name}},r.createElement("div",{class:r.const("dcg-toggle")},function(t){return r.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.isSelected(t.name)}},role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return e.props.title()+": "+t.displayName},"aria-pressed":function(){return e.isSelected(t.name)},onTap:function(){return e.props.controller().dispatch({type:"set-visualization-prop",id:e.props.model().id,prop:e.props.vizProp(),latex:t.name})}},function(){return t.displayName})})))},t.prototype.isSelected=function(e){return a.getVizPropLatex(this.props.model(),this.props.vizProp())===e},t}(r.Class),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-visualization-parameters-container dcg-do-blur"),tapboundary:r.const("true"),handleEvent:r.const("true")},r.createElement(l.ParametersSuggestionsView,n.__assign({},this.props)),r.createElement("div",{class:r.const("dcg-smaller-font")},p(function(){return e.getVisualizationType()},{boxplot:function(){return r.createElement("div",null,r.createElement("div",{class:r.const("dcg-expression-footer-title")},function(){return e.controller.t("Display Properties")}),e.makeMQInput({prop:"axisOffset",siblingProps:["breadth"],default:"1",name:function(){return e.controller.t("Offset")}}),e.makeMQInput({prop:"breadth",siblingProps:["axisOffset"],default:"1",name:function(){return"y"===a.getVizPropLatex(e.model,"alignedAxis")?e.controller.t("Width"):e.controller.t("Height")}}))},dotplot:function(){return r.createElement(h,{predicate:function(){return a.needsDotplotXMode(e.model)}},function(){return r.createElement("div",{class:r.const("dcg-toggles-container")},r.createElement(f,n.__assign({},e.props,{vizProp:function(){return"dotplotXMode"},options:function(){return[{name:"exact",displayName:e.controller.t("Exact")},{name:"bin",displayName:e.controller.t("Binned")}]},title:function(){return e.controller.t("X Values")}})),r.createElement(f,n.__assign({},e.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:e.controller.t("Center")},{name:"left",displayName:e.controller.t("Left")}]},title:function(){return e.controller.t("Bin Alignment")}})))})},histogram:function(){return r.createElement("div",{class:r.const("dcg-toggles-container")},r.createElement(f,n.__assign({},e.props,{vizProp:function(){return"histogramMode"},options:function(){return[{name:"",displayName:e.controller.t("Count")},{name:"relative",displayName:e.controller.t("Relative")},{name:"density",displayName:e.controller.t("Density")}]},title:function(){return e.controller.t("Bar Heights")},helpLink:e.const("https://support.desmos.com/hc/en-us/articles/360022405991")})),r.createElement(f,n.__assign({},e.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:e.controller.t("Center")},{name:"left",displayName:e.controller.t("Left")}]},title:function(){return e.controller.t("Bin Alignment")}})))},none:function(){return r.createElement("span",null)}})))},t.prototype.makeMQInput=function(e){var t=this;return r.createElement("span",null,r.createElement("span",{class:r.const("dcg-parameter-name")},e.name,r.const(":")),r.createElement(c.default,{latex:function(){return a.getVizPropLatex(t.model,e.prop)},ariaLabel:e.name,placeholder:function(){return e.default},brailleShouldFocus:function(){return t.isInputFocused(e.prop)},onBrailleInput:function(n){return t.handleLatexChanged(e.prop,n)},controller:this.props.controller,hasError:function(){return!a.isVizPropValid(t.model,e.prop)},onBrailleFocusedChanged:function(n){return t.handleFocusedChanged(e.prop,n)},onBrailleKeydown:function(n){return t.handleBraillePressedKey(n,e.prop)}},r.createElement(s.default,{latex:function(){return a.getVizPropLatex(t.model,e.prop)},hasError:function(){return!a.isVizPropValid(t.model,e.prop)},isFocused:function(){return t.isInputFocused(e.prop)},onFocusedChanged:function(n){return t.handleFocusedChanged(e.prop,n)},placeholder:function(){return e.default},config:this.const({}),getAriaLabel:e.name,onUserPressedKey:function(n,r){return t.handlePressedKey(n,r,e.prop)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(n){return t.handleLatexChanged(e.prop,n)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return t.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})))},t.prototype.handleBraillePressedKey=function(e,t){var n=o.lookup(e);n&&this.handlePressedKey(n,i.Event(e),t)},t.prototype.handlePressedKey=function(e,t,n){if("Esc"===e)return void this.controller.dispatch({type:"set-focus-location",location:void 0});if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var r=s.default.getFocusedMathquill();r&&(r.keystroke(e,t),this.handleLatexChanged(n,r.latex()))},t.prototype.isInputFocused=function(e){var t=this.controller.getFocusLocation();return!(!t||"visualization-prop"!==t.type||t.id!==this.id)&&t.location===e},t.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"visualization-prop",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"visualization-prop",id:this.id,location:e}})},t.prototype.handleLatexChanged=function(e,t){a.getVizPropLatex(this.model,e)!==t&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:e,latex:t})},t.prototype.getVisualizationType=function(){return a.isPrimaryLatexValid(this.model)?a.isBoxPlot(this.model)?"boxplot":a.isDotPlot(this.model)?"dotplot":a.isHistogram(this.model)?"histogram":"none":"none"},t}(r.Class);t.default=m}),define("loadcss!expressions/ttest_footer_view",function(){}),define("expressions/ttest_footer_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","core/lib/number-to-latex","dcgview-helpers/static-mathquill-view","loadcss!./ttest_footer_view"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-ttest-footer-container dcg-do-blur"),handleEvent:r.const("true")},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Less than: "+e.getLessThan()}},r.createElement("span",{class:r.const("dcg-operator")},r.createElement(a.default,{latex:this.const("<")})),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(a.default,{latex:function(){return e.getLessThan()}}))))),r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Greater than: "+e.getGreaterThan()}},r.createElement("span",{class:r.const("dcg-operator")},r.createElement(a.default,{latex:this.const(">")})),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(a.default,{latex:function(){return e.getGreaterThan()}}))))),r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Not equal: "+e.getNotEqual()}},r.createElement("span",{class:r.const("dcg-operator")},r.createElement(a.default,{latex:this.const("≠")})),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(a.default,{latex:function(){return e.getNotEqual()}})))))))},t.prototype.getLessThan=function(){var e=i.getTTestResults(this.model);return e?o.numberToStatsConfidenceLatex(e.lessThan,5):""},t.prototype.getGreaterThan=function(){var e=i.getTTestResults(this.model);return e?o.numberToStatsConfidenceLatex(e.greaterThan,5):""},t.prototype.getNotEqual=function(){var e=i.getTTestResults(this.model);return e?o.numberToStatsConfidenceLatex(e.notEqual,5):""},t}(r.Class);t.default=s}),define("loadcss!expressions/stats_footer_view",function(){}),define("expressions/stats_footer_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","dcgview-helpers/static-mathquill-view","core/lib/number-to-latex","loadcss!./stats_footer_view"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-stats-footer-container dcg-do-blur"),handleEvent:r.const("true")},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Min: "+e.getMin()}},r.createElement("span",{class:r.const("dcg-row-header")},r.const("Min")),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(o.default,{latex:this.bindFn(this.getMin)}))))),r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Q1: "+e.getQ1()}},r.createElement("span",{class:r.const("dcg-row-header")},r.const("Q1")),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(o.default,{latex:this.bindFn(this.getQ1)}))))),r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Median: "+e.getMedian()}},r.createElement("span",{class:r.const("dcg-row-header")},r.const("Median")),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(o.default,{latex:this.bindFn(this.getMedian)}))))),r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Q3: "+e.getQ3()}},r.createElement("span",{class:r.const("dcg-row-header")},r.const("Q3")),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(o.default,{latex:this.bindFn(this.getQ3)}))))),r.createElement("tr",null,r.createElement("td",null,r.createElement("div",{class:r.const("dcg-value"),role:r.const("textbox"),"aria-readonly":r.const("true"),tabindex:r.const("0"),"aria-label":function(){return"Max: "+e.getMax()}},r.createElement("span",{class:r.const("dcg-row-header")},r.const("Max")),r.createElement("span",{class:r.const("dcg-evaluation")},r.createElement(o.default,{latex:this.bindFn(this.getMax)})))))))},t.prototype.getMin=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.min):""},t.prototype.getQ1=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.q1):""},t.prototype.getMedian=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.median):""},t.prototype.getQ3=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.q3):""},t.prototype.getMax=function(){var e=i.getStatsResults(this.model);return e?a.numberToDecimalString(e.max):""},t}(r.Class);t.default=s}),define("loadcss!expressions/expression-edit-actions",function(){}),define("expressions/expression-edit-actions",["require","exports","parser","tslib","dcgview","lib/tooltip","core/lib/dragmode","core/types/styles","graphing-calc/models/expression","lib/aria","loadcss!./expression-edit-actions"],function(e,t,n,r,i,o,a,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionEditActions=void 0;var u=i.Components.If,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return i.createElement(u,{predicate:function(){return e.controller.isInEditListMode()}},function(){return i.createElement("span",{class:function(){return{"dcg-expression-edit-actions":!0,"dcg-limited-height":e.limitedHeight()}},style:function(){return{background:e.controller.getBackgroundColor()}},didMount:function(){e.controller.isInEditListMode()&&l.alert(e.controller.t("Edit list mode on."))},didUnmount:function(){e.controller.isInEditListMode()||l.alert(e.controller.t("Edit list mode off."))}},i.createElement(u,{predicate:function(){return!e.controller.hasBackgroundColor()}},function(){return i.createElement("span",{class:i.const("dcg-graphic"),handleEvent:i.const("true ")})}),i.createElement(u,{predicate:e.bindFn(e.canConvertToTable)},function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Convert to Table")},gravity:e.const("s")},i.createElement("span",{class:i.const("dcg-action-createtable dcg-exp-action-button"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.t("Convert to Table")},onTap:e.bindFn(e.onCreateTable)},i.createElement("i",{class:i.const("dcg-icon-table")})))}),i.createElement(u,{predicate:e.bindFn(e.canDuplicate)},function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Duplicate")},gravity:e.const("s")},i.createElement("span",{class:i.const("dcg-duplicate-btn dcg-exp-action-button"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.t("Duplicate")},onTap:e.bindFn(e.onDuplicateWithoutFocus)},i.createElement("i",{class:i.const("dcg-icon-duplicate")})))}),i.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Delete")},gravity:e.const("sw")},i.createElement("span",{class:i.const("dcg-delete-btn dcg-exp-action-button"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.t("Delete")},onTap:e.bindFn(e.onDelete)},i.createElement("i",{class:i.const("dcg-icon-remove")}))))})},t.prototype.model=function(){return this.controller.getItemModel(this.props.id())},t.prototype.canConvertToTable=function(){var e=this.model();return!(!e||"expression"!==e.type||!e.isTableable)},t.prototype.canDuplicate=function(){var e=this.model();return!(!e||"expression"!==e.type||this.isSlider())},t.prototype.limitedHeight=function(){var e=this.model();return e&&("image"===e.type||this.isSlider())},t.prototype.isSlider=function(){var e=this.model();return e&&"expression"===e.type&&e.sliderExists},t.prototype.generateSubscriptedTableColumns=function(e,t,r){var i={independent:t,dependent:r};if("x"===t)return i;if("Identifier"!==n.parse(t).type)return i;var o=n.parse(r);if("FunctionCall"!==o.type)return i;if(1!==o.args.length)return i;var a=o.args[0];if("Identifier"!==a.type)return i;if(a._symbol!==t)return i;var s=o.getInputString(),c=a.getInputSpan(),l=s.substr(0,c.start),u=s.substr(c.end);return i.independent="x_{"+e+"}",i.dependent=l+i.independent+u,i},t.prototype.onCreateTable=function(){var e=this.model();if(e&&"expression"===e.type){var t=e.formula;if(e.isTableable){var n=t.table_info,r=e.index,i=n.independent_variable,o=n.dependent_column;if(n.by_reference){var l=this.generateSubscriptedTableColumns(this.controller.generateTableXSubscript(),i,o);i=l.independent,o=l.dependent}var u,d=[],p=[];if(n.values)for(u=0;u<n.values.length;u++){var h=n.values[u][0];d.push(isNaN(h)?"":h+"");var f=n.values[u][1];p.push(isNaN(f)?"":f+"")}else for(u=-2;u<=2;u++)d.push(u+""),p.push("");var m={id:this.controller.generateId(),type:"table",columns:[{id:this.controller.generateId(),latex:i,color:this.controller.getNextColor(),hidden:!1,values:d,points:!0,lines:!1,dragMode:a.DragMode.NONE,pointStyle:s.PointStyle.POINT,lineStyle:s.LineStyle.SOLID},{id:this.controller.generateId(),latex:o,color:e.color,hidden:!1,values:p,points:!0,lines:!(c.isPointOrPointList(e)||e.hidden),dragMode:a.DragMode.NONE,pointStyle:s.PointStyle.POINT,lineStyle:s.LineStyle.SOLID}]},g=this.controller;this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}),n.by_reference?this.controller.dispatch({type:"insert-item-at-index",index:r+1,state:m,folderId:e.folderId,focus:!0}):this.controller.dispatch({type:"replace-item-at-index",index:r,state:m,focus:!0});var y=function(){g.dispatch({type:"undo"}),g.dispatch({type:"set-edit-list-mode",isEditListMode:!0,focusExpressionList:!1})};this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Table created."),undoCallback:y}})}}},t.prototype.onDelete=function(e){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.props.id(),setFocusAfterDelete:"keyboard"===e.device})},t.prototype.onDuplicateWithoutFocus=function(){this.controller.dispatch({type:"duplicate-expression",id:this.props.id()})},t}(i.Class);t.ExpressionEditActions=d}),define("loadcss!expressions/suggested-zoom-view",function(){}),define("expressions/suggested-zoom-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!./suggested-zoom-view"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestedZoomView=void 0;var o=r.Components.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},t.prototype.template=function(){var e=this;return r.createElement(o,{predicate:function(){return e.controller.shouldExpressionZoomFit(e.model)}},function(){return r.createElement("div",{class:r.const("dcg-suggested-zoom-view dcg-do-blur"),handleEvent:r.const(!0)},r.createElement(i.Tooltip,{tooltip:e.bindFn(e.getZoomText),gravity:function(){return"e"}},r.createElement("i",{onTap:e.bindFn(e.onZoom),role:r.const("button"),"aria-label":e.bindFn(e.getZoomText),class:r.const("dcg-icon-zoom-fit")})))})},t.prototype.getZoomText=function(){return this.controller.t("Zoom Fit")},t.prototype.onZoom=function(){this.controller.dispatch({type:"expression-zoom-fit",id:this.model.id})},t}(r.Class);t.SuggestedZoomView=a}),define("loadcss!expressions/clickable_info_view",function(){}),define("expressions/clickable_info_view",["require","exports","tslib","dcgview","graphing-calc/models/expression","graphing-calc/models/image","dcgview-helpers/mathquill-view","../dcgview-helpers/tooltipped-error","loadcss!./clickable_info_view"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableInfoView=void 0;var c=r.Components,l=c.Input,u=c.For,d=c.If,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-clickable-info-container dcg-do-blur"),tapboundary:r.const("true"),handleEvent:r.const("true")},r.createElement("div",{class:r.const("dcg-smaller-font")},r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Clickable Properties")}},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-expression-footer-title")},function(){return e.controller.t("When Clicked:")},r.createElement("div",{class:r.const("dcg-add-new-rule"),onTap:function(){return e.addRule()}},r.createElement("i",{class:r.const("dcg-icon-plus")}),r.const(" "),function(){return e.controller.t("Add action")})),r.createElement(u,{each:this.bindFn(this.getRuleIds)},r.createElement("div",null,function(t){return r.createElement("div",{class:r.const("dcg-clickable-property-row")},e.const(e.controller.t("Set")),e.makeMQInput({ruleId:t,prop:"assignment",name:function(){return e.controller.t("Assignment")}}),e.const(e.controller.t("to")),e.makeMQInput({ruleId:t,prop:"expression",name:function(){return e.controller.t("Expression")}}),r.createElement(d,{predicate:function(){return e.doesRuleHaveError(t)}},function(){return r.createElement("span",{class:r.const("dcg-clickable-info-error-container")},r.createElement(s.TooltippedError,{error:function(){return e.getRuleErrorString(t)},gravity:e.const("s"),size:e.const("small")}))}),r.createElement("span",{class:r.const("dcg-remove-rule"),onTap:function(){return e.removeRule(t)}},r.createElement("i",{class:r.const("dcg-icon-remove")})))}))),r.createElement(l,{"aria-label":function(){return e.controller.t("Screen reader label")},placeholder:function(){return e.controller.t("Add screen reader label")},value:function(){return e.model.clickableInfo.description},onInput:function(t){return e.controller.dispatch({type:"set-clickableinfo-prop",id:e.model.id,prop:"description",value:t})}})))},t.prototype.getRuleIds=function(){return this.model.clickableInfo.rules.map(function(e){return e.id})},t.prototype.addRule=function(){this.controller.dispatch({type:"add-clickableinfo-rule",id:this.model.id})},t.prototype.removeRule=function(e){this.controller.dispatch({type:"remove-clickableinfo-rule",id:this.model.id,ruleId:e})},t.prototype.makeMQInput=function(e){var t=this;return r.createElement(a.default,{latex:function(){return t.getClickableInfoPropLatex(e)},hasError:this.const(!1),isFocused:function(){return t.isInputFocused(e)},onFocusedChanged:function(n){return t.handleFocusedChanged(e,n)},config:this.const({}),getAriaLabel:e.name,onUserPressedKey:function(n,r){return t.handlePressedKey(n,r,e)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(n){return t.handleLatexChanged(e,n)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return!!t.model.controller.getGraphSettings().config.capExpressionSize},needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})},t.prototype.handlePressedKey=function(e,t,n){if("Esc"===e)return void this.controller.dispatch({type:"set-focus-location",location:void 0});if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var r=a.default.getFocusedMathquill();r&&(r.keystroke(e,t),this.handleLatexChanged(n,r.latex()))},t.prototype.isInputFocused=function(e){
var t=this.controller.getFocusLocation();return!(!t||"clickableinfo-rule"!==t.type||t.id!==this.id||t.location.ruleId!==e.ruleId||t.location.prop!==e.prop)},t.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"clickableinfo-rule",id:this.id,location:{ruleId:e.ruleId,prop:e.prop}}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"clickableinfo-rule",id:this.id,location:{ruleId:e.ruleId,prop:e.prop}}})},t.prototype.getRulePackedError=function(e){return"image"===this.model.type?o.getClickableInfoRulePackedError(this.model,e):i.getClickableInfoRulePackedError(this.model,e)},t.prototype.doesRuleHaveError=function(e){return!!this.getRulePackedError(e)},t.prototype.getRuleErrorString=function(e){return this.controller.unpack(this.getRulePackedError(e))},t.prototype.getClickableInfoPropLatex=function(e){var t=e.ruleId,n=e.prop;return"image"===this.model.type?o.getClickableInfoPropLatex(this.model,t,n):i.getClickableInfoPropLatex(this.model,t,n)},t.prototype.handleLatexChanged=function(e,t){this.getClickableInfoPropLatex(e)!==t&&this.controller.dispatch({type:"set-clickableinfo-rule-prop",id:this.id,ruleId:e.ruleId,prop:e.prop,value:t})},t}(r.Class);t.ClickableInfoView=p}),define("loadcss!expressions/expression-footer",function(){}),define("expressions/expression_view",["require","exports","config","tslib","browser","keys","jquery","./abstract-item-view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","lib/conditional_blur","./expression-icon-view","./evaluation-view","expressions/unresolved_view","expressions/domain_view","expressions/regression_view","expressions/slider_view","expressions/promptslider_view","expressions/label_view","expressions/distribution_parameters_view","expressions/visualization_parameters_view","expressions/ttest_footer_view","expressions/stats_footer_view","graphing-calc/models/expression","core/lib/label","./expression-edit-actions","./suggested-zoom-view","dcgview","./clickable_info_view","main/manage-focus-helper","dcgview-helpers/mathquill-braille-wrapper","jquery.handleevent","loadcss!./expression-footer"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x,E,w,_,S,M,k,C,I,T,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var D=C.Components,P=D.If,A=D.SwitchUnion,O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.didMountRootNode=function(e){this.rootNode=e},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return C.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-mathitem":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id)&&!e.controller.isInEditListMode(),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-hasSlider":e.hasSlider(),"dcg-hasEvaluation":e.controller.shouldShowEvaluationForItem(e.id),"dcg-hasRegression":e.hasRegression(),"dcg-hasDomain":e.hasDomain()}},"expr-id":function(){return e.model.id},didMount:this.bindFn(this.didMountRootNode)},C.createElement("div",{class:C.const("dcg-fade-container"),onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},C.createElement("div",{class:C.const("dcg-main")},C.createElement(P,{predicate:function(){return!e.controller.isInEditListMode()}},function(){return C.createElement(L.default,{latex:function(){return _.getDisplayLatex(e.model)},ariaLabel:function(){return e.getAriaLabel("braille")},brailleShouldFocus:function(){return e.isFocused()},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,onBrailleFocusedChanged:function(t,n){return e.handleMQFocusedChanged(t,n)},onBrailleKeydown:e.bindFn(e.handleBraillePressedKey)},C.createElement(c.default,{latex:function(){return _.getDisplayLatex(e.model)},getAriaLabel:function(){return e.getAriaLabel("speech")},getAriaPostLabel:e.bindFn(e.getFormulaAria),isFocused:function(){return e.isFocused()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.const({}),hasError:e.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t,n){return e.handleMQFocusedChanged(t,n)},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},C.createElement("div",{class:C.const("dcg-expression-mathquill")})))}),C.createElement(P,{predicate:function(){return e.controller.isInEditListMode()}},function(){return C.createElement("div",{class:C.const("dcg-edit-list-mathquill"),tabindex:function(){return"none"===e.controller.getBrailleMode()?"0":"-1"},onTap:e.bindFn(e.exitEditListMode),manageFocus:e.const({shouldBeFocused:function(){return"none"===e.controller.getBrailleMode()&&T.defaultShouldBeFocused({controller:e.controller,location:{type:"readonly-expression",id:e.model.id}})},onFocusedChanged:function(t){"none"===e.controller.getBrailleMode()&&(t?e.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:e.model.id}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:e.model.id}}))}})},C.createElement(L.default,{latex:function(){return _.getDisplayLatex(e.model)},ariaLabel:function(){return e.getAriaLabel("braille")},controller:e.props.controller,isStatic:e.const(!0),brailleShouldFocus:function(){var t=e.controller.getFocusLocation();return!!t&&("readonly-expression"===t.type&&t.id===e.id)},onBrailleFocusedChanged:function(t){t?e.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:e.model.id}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:e.model.id}})}},C.createElement(l.default,{latex:function(){return _.getDisplayLatex(e.model)},getAriaLabel:function(){return e.getAriaLabel("speech")}})))})),C.createElement("i",{class:C.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:C.const("true"),onTap:this.bindFn(this.onDelete)}),C.createElement(P,{predicate:this.bindFn(this.shouldShowFooter)},function(){return C.createElement("div",{class:e.getFooterClass()},A(function(){return e.getFooterType()},{none:function(){},regression:function(){return C.createElement(m.default,{model:e.props.model,controller:e.props.controller})},label:function(){return C.createElement(v.default,{model:e.props.model,controller:e.props.controller})},slider:function(){return C.createElement(g.default,{model:e.props.model,controller:e.props.controller})},domain:function(){return C.createElement(f.default,{model:e.props.model,controller:e.props.controller})},evaluation:function(){return C.createElement(p.default,{id:function(){return e.props.model().id},dependent:function(){return e.model.dependent||""},val:function(){return e.controller.getEvaluationValueForItem(e.id)},controller:e.props.controller,focusable:e.const(!1)})},distribution:function(){return C.createElement(b.default,{model:e.props.model,controller:e.props.controller})},visualization:function(){return C.createElement(x.default,{model:e.props.model,controller:e.props.controller})},ttest:function(){return C.createElement(E.default,{model:e.props.model,controller:e.props.controller})},stats:function(){return C.createElement(w.default,{model:e.props.model,controller:e.props.controller})},unresolved:function(){return C.createElement(h.default,{controller:e.props.controller})}}),C.createElement(P,{predicate:e.bindFn(e.shouldShowClickableProperties)},function(){return C.createElement(I.ClickableInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}})}),C.createElement(P,{predicate:e.bindFn(e.shouldShowBrailleError)},function(){return C.createElement("div",{tabindex:C.const(0),class:C.const("dcg-expression-braille-error"),"aria-roledescription":C.const("error"),"aria-label":function(){return e.controller.unpack(e.model.error)}},C.createElement("i",{class:C.const("dcg-icon-error")}),function(){return e.controller.unpack(e.model.error)})}),C.createElement(P,{predicate:e.bindFn(e.shouldShowSliderPrompt)},function(){return C.createElement(y.default,{model:e.props.model,controller:e.props.controller})}))})),C.createElement("span",{class:C.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:C.const("true"),tapboundary:C.const("true"),disablescroll:C.const("true"),style:C.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},C.createElement("span",{class:C.const("dcg-num")},function(){return e.model.displayIndex}),C.createElement("div",{class:C.const("dcg-tab-interior dcg-action-icon-mouse")},C.createElement(d.default,{model:this.props.model,controller:this.props.controller})),C.createElement(k.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),C.createElement(M.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},t.prototype.shouldShowFooter=function(){return!!this.shouldShowBrailleError()||(!!this.shouldShowSliderPrompt()||(!!this.shouldShowClickableProperties()||"none"!==this.getFooterType()))},t.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&(!!_.isClickableAllowed(this.model)&&this.model.clickableInfo.enabled)},t.prototype.getFooterType=function(){return this.hasRegression()?"regression":this.shouldShowLabelView()?"label":this.hasSlider()?"slider":this.hasDomain()?"domain":this.isTTest()?"ttest":this.isStats()?"stats":this.controller.shouldShowEvaluationForItem(this.id)?"evaluation":this.isToplevelDistribution()?"distribution":this.isVisualization()?"visualization":this.model.unresolved?"unresolved":"none"},t.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-indent-in-folder dcg-fadein-bottom")},t.prototype.onCreateSliders=function(e){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:e})},t.prototype.shouldShowLabelView=function(){return n.get("labels")&&_.isPointOrPointList(this.model)},t.prototype.shouldShowSliderPrompt=function(){return!!this.controller.areSlidersEnabled()&&this.model.missingVariables.length>0},t.prototype.shouldShowBrailleError=function(){return"none"!==this.controller.getBrailleMode()&&this.hasError()},t.prototype.hasRegression=function(){return!(!this.model.formula||!this.model.formula.is_regression)},t.prototype.hasDomain=function(){return _.hasDomain(this.model)},t.prototype.isToplevelDistribution=function(){return _.isToplevelDistribution(this.model)},t.prototype.isVisualization=function(){return _.isVisualization(this.model)},t.prototype.isTTest=function(){return _.isTTest(this.model)},t.prototype.isStats=function(){return _.isStats(this.model)},t.prototype.hasSlider=function(){return!!this.model.sliderExists},t.prototype.getLabelOptions=function(){return this.controller.getEvaluationLabelOptionsForItem(this.model.id)},t.prototype.getAriaLabel=function(e){if(this.shouldShowLabelView()){var t;t=this.model.label&&""!==this.model.label?this.model.label:"speech"===e?this.controller.t("Label"):this.controller.raw("lbl");return this.model.showLabel?t:"speech"===e?this.controller.t("Hidden __label__",{label:t}):this.controller.raw("h __label__",{label:t})}return"speech"===e?this.controller.t("Expression __index__",{index:this.model.displayIndex}):this.controller.raw("eq__index__",{index:this.model.displayIndex})},t.prototype.getFormulaAria=function(){var e=this.model.formula,t="";if(!e)return t;if(_.isEmpty(this.model))return t;if(this.controller.shouldShowEvaluationForItem(this.id)){t="equals ";var n=e.zero_values&&e.zero_values.length?e.zero_values[0].val:e.constant_value;Array.isArray(n)?t+=n.length+" element list.":t+=S.truncatedAriaLabel(n,this.getLabelOptions())}else e.error&&!this.shouldShowSliderPrompt()?t=this.controller.unpack(e.error):_.isToplevelDistribution(this.model)?t=this.controller.t("is distribution. "):this.isTTest()&&(t=this.controller.t("is T test. To access statistics, press Tab."));if(this.model.shouldGraph&&(e.is_graphable||e.is_regression)){e.is_graphable&&e.is_regression?t+=this.controller.t("Has graph and regression. To access statistics, press Tab."):e.is_regression?t+=this.controller.t("Has regression. To access statistics, press Tab."):t+=this.controller.t("Has graph.");var r=this.controller.getAudioGraph();r&&r.agNavigator.canTrace(this.model)&&(i.IS_APPLE?t+=this.controller.t(" To audio trace, press OPTION+T."):t+=this.controller.t(" To audio trace, press ALT+T."))}return t},t.prototype.handleBraillePressedKey=function(e){var t=o.lookup(e);if(t)if("Esc"===t)u.default(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}});else if("Up"===t||"Down"===t||"Enter"===t)this.controller.dispatch({type:"on-special-key-pressed",key:t});else if("Del"===t||"Backspace"===t){var n=L.getFocusedBrailleElement();_.isEmpty(this.model)&&L.brailleInputIsEmpty(n)&&(this.controller.dispatch({type:"on-special-key-pressed",key:"Del"===t?"Delete":t}),e.preventDefault(),e.stopPropagation())}},t.prototype.handlePressedKey=function(e,t){var n=c.default.getFocusedMathquill();if(n){if("Esc"===e)return u.default(),void(this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}}));if("Up"===e||"Down"===e){return c.default.applyArrowKeyAndReturnIfWasAtBounds(n,e,t)?this.controller.dispatch({type:"on-special-key-pressed",key:e}):void 0}if("Delete"===e||"Backspace"===e){if(_.isEmpty(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if("Enter"===e)return t&&(t.preventDefault(),t.stopPropagation()),this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});n.keystroke(e,t),this.handleLatexChanged(n.latex())}},t.prototype.handleLatexChanged=function(e){e!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:e})},t.prototype.doesNodeBelongToSliderLimit=function(e){return!!e&&(!!this.rootNode.contains(e)&&!!a(e).closest("[data-dcg-limit]").length)},t.prototype.handleMQFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):this.doesNodeBelongToSliderLimit(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})},t.prototype.onMouseSelect=function(e){"keyboard"!==e.device&&("dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))},t.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!!e&&("expression"===e.type&&e.id===this.id)},t.prototype.isSliderThumbFocused=function(){var e=this.controller.getFocusLocation();return!!e&&("slider-thumb"===e.type&&e.id===this.id)},t.prototype.hasError=function(){return!!this.model.error&&!_.isEmpty(this.model)},t}(s.default);t.default=O}),define("loadcss!expressions/smart_textarea",function(){}),define("expressions/smart_textarea",["require","exports","tslib","keys","browser","dcgview","jquery","lib/conditional_blur","jquery.handleevent","loadcss!./smart_textarea"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=o.Components.Textarea,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-smart-textarea-container")},o.createElement("div",{class:o.const("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),o.createElement(c,{class:function(){return{"dcg-do-blur":!0,"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!e.props.text()}},"aria-label":function(){return e.props.ariaLabel?e.props.ariaLabel():void 0},placeholder:this.props.placeholder,readonly:function(){return!!e.props.readonly()||void 0},value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeydown:this.bindFn(this.onKeydownEvent)}))},t.prototype.getDisplayTextHTML=function(){var e=this.props.text()||"";if(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),!this.props.showLinks())return e;var t=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e=e.replace(t,"<a href='$1' target ='_blank'>$1</a>")},t.prototype.willUnmount=function(){this.textareaNode=void 0},t.prototype.didMountDisplay=function(e){this.displayNode=e,a(e).on("touchend",function(e){e.preventDefault()}),a(e).on("dcg-tap dcg-tapstart","a",function(e){e.handle()}),this.renderDisplayText()},t.prototype.didMountTextarea=function(e){var t=this;this.textareaNode=e,a(e).on("dcg-tapstart",function(e){e.handle()}),a(e).on("focusin focusout",function(){return t.onFocusEvent()}),this.updateFocused()},t.prototype.didUpdate=function(){this.updateFocused(),this.renderDisplayText()},t.prototype.onFocusEvent=function(){if(this.textareaNode){var e=document.activeElement===this.textareaNode;this.shouldBeFocused()!==e&&this.props.onFocusChange(e)}},t.prototype.renderDisplayText=function(){if(this.displayNode){var e=this.getDisplayTextHTML();this.lastDisplayTextHTML!==e&&(this.lastDisplayTextHTML=e,this.displayNode.innerHTML=e)}},t.prototype.isFocused=function(){return document.activeElement===this.textareaNode},t.prototype.shouldBeFocused=function(){return this.props.shouldFocus()},t.prototype.updateFocused=function(){if(this.textareaNode){var e=this.isFocused(),t=this.shouldBeFocused();if(e!==t)if(t){if(i.IS_IPAD&&i.IS_IN_IFRAME)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}else this.textareaNode.blur()}},t.prototype.onKeydownEvent=function(e){var t=this.textareaNode;if(t){var n=r.lookup(e);if(this.props.readonly()&&void 0!==this.props.readonlyAction)return void(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||n!==r.ENTER&&n!==r.SPACEBAR||(e.preventDefault(),this.props.readonlyAction()));n!==r.ENTER||e.metaKey?n===r.ESCAPE?s.default():n===r.UP?0===t.selectionStart&&0===t.selectionEnd&&(e.preventDefault(),this.props.onSpecialKey("Up")):n===r.DOWN?t.selectionStart===t.value.length&&t.selectionEnd===t.value.length&&(e.preventDefault(),this.props.onSpecialKey("Down")):n===r.BACKSPACE?0===t.value.length&&(e.preventDefault(),this.props.onSpecialKey("Backspace")):n===r.DELETE&&0===t.value.length&&(e.preventDefault(),this.props.onSpecialKey("Delete")):(e.preventDefault(),this.props.onSpecialKey("Enter")),this.props.onKeydown&&this.props.onKeydown(e)}},t}(o.Class);t.default=l}),define("expressions/text_view",["require","exports","tslib","./abstract-item-view","./smart_textarea","dcgview","./expression-edit-actions","jquery.handleevent"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressiontext":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":!!e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id)}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},o.createElement("div",{class:o.const("dcg-fade-container")},o.createElement("div",{class:o.const("dcg-main")},o.createElement(i.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return e.model.text},placeholder:function(){return e.controller.t("Enter a note...")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),readonly:function(){return e.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)})),o.createElement("i",{class:o.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:o.const("true"),onTap:this.bindFn(this.onDelete)})),o.createElement("span",{class:o.const("dcg-tab dcg-action-drag"),handleevent:o.const("true"),tapboundary:o.const("true"),disablescroll:o.const("true"),style:o.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},o.createElement("span",{class:o.const("dcg-num")},function(){return e.model.displayIndex}),o.createElement("div",{class:o.const("dcg-tab-interior")}),o.createElement("i",{class:o.const("dcg-icon-text")})),o.createElement(a.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},t.prototype.onInput=function(e){this.controller.dispatch({type:"set-note-text",id:this.id,text:e})},t.prototype.onFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})},t.prototype.onSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},t.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"text"!==e.type||e.id!==this.id)},t}(r.default);t.default=s}),define("expressions/tables/table_icon_view",["require","exports","tslib","dcgview","dcgview-helpers/tooltipped-error","../circular-icon-view","jquery.handleevent"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r.Components.SwitchUnion,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-table-icon-container")},a(this.bindFn(this.typeOfIcon),{error:function(){return r.createElement(i.TooltippedError,{error:function(){return e.controller.unpack(e.model.error)},gravity:e.const("se")})},none:function(){return r.createElement("span",null)},icon:function(){return r.createElement("div",{class:r.const("dcg-circular-icon-container"),role:r.const("button"),handleevent:r.const("true"),onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return e.myOptionsOpen()?e.toggleOptions():e.controller.isInEditListMode()?e.toggleOptions():void e.toggleGraphShown()},didMount:function(t){return e.rootElt=t},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),e.toggleOptions()}},r.createElement(o.CircularIconView,{iconType:e.bindFn(e.getIcon),backgroundColor:function(){return e.model.color}}))}}))},t.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},t.prototype.toggleOptions=function(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-column",model:this.model,icon:this.rootElt,focusFirstOption:!1}})},t.prototype.didMountRoot=function(e){this.rootElt=e},t.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})},t.prototype.hasError=function(){return!!this.model.error},t.prototype.getIcon=function(){return this.model.shouldGraph?this.controller.isInEditListMode()?"none":this.model.points&&this.model.lines?"table-points-and-lines":this.model.points&&!this.model.lines?"table-points":!this.model.points&&this.model.lines?"table-lines":"none":"hidden"},t.prototype.typeOfIcon=function(){return""===this.model.latex?"none":this.controller.getGraphSettings().config.graphpaper?this.model.error?"error":0===this.model.index?"none":"icon":"none"},t}(r.Class);t.default=s}),define("expressions/tables/header-view",["require","exports","tslib","keys","jquery","browser","dcgview","./table_icon_view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","core/lib/dragmode","dcgview-helpers/mathquill-braille-wrapper"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=a.Components.If,m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.table},t.prototype.isRightSide=function(){return this.lookupCellPosition().column>=this.table.columnModels.length-1},t.prototype.template=function(){var e=this;return a.createElement("div",{role:a.const("columnheader"),class:function(){return{"dcg-cell":!0,"dcg-table-header":!0,"dcg-do-not-blur":!0,"dcg-left":0===e.model.index,"dcg-right":e.isRightSide(),"dcg-selected":e.shouldFocus(),"dcg-error":!!e.model.error}},index:function(){return e.model.index},onTapStart:this.bindFn(this.focusThisCell)},a.createElement("div",{class:a.const("dcg-inner-border")}),a.createElement(f,{predicate:function(){return!e.isRightSide()}},function(){return a.createElement(s.default,{model:e.props.model,controller:e.props.controller})}),a.createElement(f,{predicate:function(){return!e.controller.isInEditListMode()}},function(){return a.createElement(h.default,{latex:function(){return e.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:e.bindFn(e.shouldFocus),ariaLabel:function(){return e.getAriaLabel("braille")},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,onBrailleFocusedChanged:e.bindFn(e.handleMQFocusedChanged),selectOnFocus:e.const(!0),onBrailleKeydown:e.bindFn(e.handleKeydownOnBrailleInput)},a.createElement(c.default,{latex:function(){return e.model.latex||""},isFocused:e.bindFn(e.shouldFocus),capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.const({}),getAriaLabel:function(){return e.getAriaLabel("speech")},getAriaPostLabel:e.bindFn(e.getAriaPostLabel),hasError:e.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:e.bindFn(e.handleMQFocusedChanged),selectOnFocus:e.const(!0),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},a.createElement("span",{class:a.const("dcg-math-field dcg-cell-math-content")})))}),a.createElement(f,{predicate:function(){return e.controller.isInEditListMode()}},function(){return a.createElement(h.default,{latex:function(){return e.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},ariaLabel:function(){return e.getAriaLabel("braille")},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,tabindex:e.const(-1),isStatic:e.const(!0),brailleShouldFocus:e.bindFn(e.shouldFocusNonEditCell),onBrailleFocusedChanged:e.bindFn(e.handleMQFocusedChanged)},a.createElement(l.default,{latex:function(){return e.model.latex||""},getAriaLabel:function(){return e.getAriaLabel("speech")}},a.createElement("span",{class:a.const("dcg-math-field dcg-cell-math-content"),role:a.const("textbox"),"aria-roledescription":a.const("cell"),"aria-readonly":a.const("true"),tabindex:a.const("-1")})))}),a.createElement(f,{predicate:function(){return e.model.dragMode!==p.DragMode.NONE&&!e.model.error}},function(){return a.createElement("span",{class:a.const("dcg-drag-icon"),"dcg-drag-mode":function(){return e.model.dragMode},style:function(){return{color:e.model.color}}},a.createElement("i",{class:function(){return{"dcg-icon-move":e.model.dragMode===p.DragMode.XY,"dcg-icon-move-horizontal":e.model.dragMode===p.DragMode.X,"dcg-icon-move-vertical":e.model.dragMode===p.DragMode.Y}}}))}),a.createElement("div",{class:a.const("dcg-empty-line")}),a.createElement(f,{predicate:function(){return e.isRightSide()}},function(){return a.createElement("span",{class:a.const("dcg-fade-right")})}))},t.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},t.prototype.lookupCellPosition=function(){return{row:0,column:this.model.index}},t.prototype.getAriaLabel=function(e){var t=this.lookupCellPosition();return"speech"===e?this.controller.t("Column header __column__",{column:t.column+1}):this.controller.raw("h__column__",{column:t.column+1})},t.prototype.getAriaPostLabel=function(){var e="",t=this.model;return t.shouldGraph&&(t.points||t.lines)&&!d.isColumnEmpty(t)&&(e=this.controller.t("Has graph."),o.IS_APPLE?e+=" "+this.controller.t("To audio trace, press OPTION+T."):e+=" "+this.controller.t(" To audio trace, press ALT+T.")),e},t.prototype.handlePressedKey=function(e,t){var n=c.default.getFocusedMathquill();if(n){c.default.handleKeystrokeAndDecideIfSpecialEvent(n,e,t)?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(n.latex())}},t.prototype.handleKeydownOnBrailleInput=function(e){var t=r.lookup(e);if(t){var n="Enter"===t||"Up"===t||"Down"===t,o=h.getFocusedBrailleElement(),a=o&&"Left"===t&&0===o.selectionStart||"Right"===t&&o.selectionStart===i(o).val().length,s=0===this.model.latex.length&&h.brailleInputIsEmpty(o),c="Del"===t||"Backspace"===t;(n||a||c&&s)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:"Del"===t?"Delete":t}),e.preventDefault())}},t.prototype.handleLatexChanged=function(e){this.model.latex!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},t.prototype.shouldFocus=function(){return!this.controller.isInEditListMode()&&u.isEqual(this.lookupCellPosition(),d.getSelectedCell(this.table))},t.prototype.shouldFocusNonEditCell=function(){return u.isEqual(this.lookupCellPosition(),d.getSelectedCell(this.table))},t.prototype.isNodeWithinTableCell=function(e){if(!e)return!1;if(0===i(e).closest(".dcg-cell").length)return!1;var t=this.controller.getItemRootNodeById(this.table.id);return!!t&&i.contains(t,e)},t.prototype.handleMQFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},t}(a.Class);t.default=m}),define("expressions/tables/cell-view",["require","exports","tslib","keys","dcgview","jquery","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","../../dcgview-helpers/tooltipped-error","lib/conditional_blur","dcgview-helpers/mathquill-braille-wrapper"],function(e,t,n,r,i,o,a,s,c,l,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=i.Components.If,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.column.table},t.prototype.template=function(){var e=this;return i.createElement("div",{role:i.const("gridcell"),class:function(){return{"dcg-cell":!0,"dcg-do-not-blur":!0,"dcg-empty":e.isEmpty(),"dcg-non-editable":!!e.model.column.disabled,"dcg-error":!!e.hasError(),"dcg-selected":e.shouldFocus()}},onTapStart:this.bindFn(this.focusThisCell)
},i.createElement("div",{class:i.const("dcg-inner-border")}),i.createElement(h,{predicate:this.bindFn(this.hasError)},function(){return i.createElement("span",{class:i.const("dcg-table-icon-error-container")},i.createElement(u.TooltippedError,{error:e.bindFn(e.getErrorMessage),gravity:e.const("se"),size:e.const("small")}))}),i.createElement(h,{predicate:function(){return!!e.model.column.disabled||e.controller.isInEditListMode()}},function(){return i.createElement(p.default,{latex:function(){return e.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:e.bindFn(e.shouldFocusReadonlyCell),ariaLabel:function(){return e.getAriaLabel("braille")},controller:e.props.controller,tabindex:function(){return e.controller.isInEditListMode()?-1:0},isStatic:e.const(!0),onBrailleFocusedChanged:e.bindFn(e.handleFocusedChanged),onBrailleKeydown:function(t){return e.handleKeydownOnReadonlyCell(t),!0}},i.createElement(s.default,{getAriaLabel:function(){return e.getAriaLabel("speech")},latex:function(){return e.getValue()}},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),role:i.const("textbox"),"aria-roledescription":i.const("computed cell"),"aria-readonly":i.const("true"),tabindex:function(){return e.controller.isInEditListMode()||e.isEmpty()?-1:0},onKeyDown:e.bindFn(e.handleKeydownOnReadonlyCell),manageFocus:e.const({shouldBeFocused:e.bindFn(e.shouldFocusReadonlyCell),onFocusedChanged:e.bindFn(e.handleFocusedChanged)})})))}),i.createElement(h,{predicate:function(){return!e.model.column.disabled&&!e.controller.isInEditListMode()}},function(){return i.createElement(p.default,{latex:function(){return e.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:e.bindFn(e.shouldFocusEditableCell),ariaLabel:function(){return e.getAriaLabel("braille")},onBrailleInput:function(t){return e.handleLatexChanged(t)},controller:e.props.controller,onBrailleFocusedChanged:e.bindFn(e.handleFocusedChanged),onBrailleKeydown:e.bindFn(e.handleKeydownOnBrailleInput),selectOnFocus:e.const(!0)},i.createElement(a.default,{latex:function(){return e.getValue()},isFocused:e.bindFn(e.shouldFocusEditableCell),capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.const({}),getAriaLabel:function(){return e.getAriaLabel("speech")},getAriaPostLabel:e.bindFn(e.getErrorMessage),hasError:e.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:function(t){return e.handleLatexChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:e.bindFn(e.handleFocusedChanged),selectOnFocus:e.const(!0),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},i.createElement("span",{class:i.const("dcg-math-field dcg-cell-math-content")})))}),i.createElement("div",{class:i.const("dcg-empty-line")}))},t.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},t.prototype.handlePressedKey=function(e,t){var n=a.default.getFocusedMathquill();if(n){var i=a.default.handleKeystrokeAndDecideIfSpecialEvent(n,e,t);e===r.ESCAPE&&d.default(),i?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(n.latex())}},t.prototype.handleKeydownOnBrailleInput=function(e){var t=r.lookup(e);if(t){t===r.ESCAPE&&d.default();var n="Enter"===t||"Up"===t||"Down"===t,i=p.getFocusedBrailleElement(),a=i&&"Left"===t&&0===i.selectionStart||"Right"===t&&i.selectionStart===o(i).val().length,s="Del"===t||"Backspace"===t;(n||a||s&&0===this.getValue().length)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:"Del"===t?"Delete":t}),e.preventDefault())}},t.prototype.handleKeydownOnReadonlyCell=function(e){var t=r.lookup(e);"Tab"!==t&&(e.preventDefault(),"Esc"===t&&d.default(),t&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:t}))},t.prototype.handleLatexChanged=function(e){this.getValue()!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},t.prototype.shouldFocus=function(){return c.isEqual(this.lookupCellPosition(),l.getSelectedCell(this.table))},t.prototype.shouldFocusReadonlyCell=function(){return!this.controller.isInEditListMode()&&!!this.model.column.disabled&&this.shouldFocus()},t.prototype.shouldFocusEditableCell=function(){return!this.model.column.disabled&&this.shouldFocus()},t.prototype.isNodeWithinTableCell=function(e){if(!e)return!1;if(0===o(e).closest(".dcg-cell").length)return!1;var t=this.controller.getItemRootNodeById(this.table.id);return!!t&&o.contains(t,e)},t.prototype.handleFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},t.prototype.lookupCellPosition=function(){return{row:this.model.row.index,column:this.model.column.index}},t.prototype.getPackedError=function(){return this.model.column.packedErrors[this.model.row.index-1]},t.prototype.hasError=function(){return!!this.getPackedError()},t.prototype.getErrorMessage=function(){var e=this.getPackedError();return e?this.controller.unpack(e):""},t.prototype.getValue=function(){var e=this.model.column.index,t=this.model.row.index-1;return this.model.column.disabled?this.model.column.computedValues[t]||"":this.table.columns[e].values[t]||""},t.prototype.isEmpty=function(){var e=p.getFocusedBrailleElement();return""===this.getValue()&&p.brailleInputIsEmpty(e)},t.prototype.getAriaLabel=function(e){var t=this.lookupCellPosition(),n=t.row,r=t.column+1;return"speech"===e?this.controller.t("Row __row__ Col __column__",{row:n.toString(),column:r.toString()}):this.controller.raw("r__row__c__column__",{row:n.toString(),column:r.toString()})},t}(i.Class);t.default=f}),define("loadcss!expressions/table-view",function(){}),define("expressions/table-view",["require","exports","tslib","keys","lib/aria","./abstract-item-view","dcgview","./tables/header-view","./tables/cell-view","graphing-calc/models/table","vendor/mathquill","jquery","./expression-edit-actions","expressions/measure-expressions","./suggested-zoom-view","main/manage-focus-helper","loadcss!./table-view","jquery.handleevent"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=a.Components.For,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return a.createElement("div",{class:function(){return{"dcg-expressionitem":!0,"dcg-expressiontable":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":!!e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-no-faded-h":e.isRightFocused(),"dcg-no-faded-v":e.isBottomFocused()}},"expr-id":function(){return e.model.id},didMount:this.bindFn(this.didMountContainer),onKeydown:this.bindFn(this.onKeydown)},a.createElement("div",{class:a.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")},a.createElement("div",{class:a.const("dcg-main")},a.createElement("div",{class:a.const("dcg-table-container"),tabindex:function(){return e.controller.isInEditListMode()?0:-1},"aria-label":function(){return"none"===e.controller.getBrailleMode()?e.controller.t("Expression __index__ table",{index:e.model.displayIndex}):e.controller.t("eq__index__ table",{index:e.model.displayIndex})},didMount:this.bindFn(this.didMountContainer),manageFocus:this.const(m.manageFocusHelper({controller:this.controller,location:{type:"table-container",id:this.model.id}}))},a.createElement("div",{class:a.const("dcg-table-sliding-container"),style:function(){return{transform:"translateX("+e.computeScrolledX()+"px)"}}},a.createElement(g,{each:function(){return e.getVisibleRowModels()},key:function(t){return"blank-row"===t.type?"blank-row-"+t.guid+"-"+t.rows+"-"+e.getCols():t.guid}},a.createElement("div",{role:a.const("grid"),class:function(){return{"dcg-tabledata":!0,"dcg-focus-in-bottom-row":e.isBottomFocused(),"dcg-focus-in-right-column":e.isRightFocused()}}},function(t){return"show-more"===t.type?a.createElement("tr",{role:a.const("row"),class:a.const("dcg-show-more-row")},a.createElement("td",{colspan:e.bindFn(e.getCols)},e.bindFn(e.missingRowMessage),a.createElement("div",{tabindex:a.const(0),role:a.const("button"),class:a.const("dcg-show-more"),onTap:function(){return e.controller.dispatch({type:"table-show-more-rows",id:e.id})}},function(){return e.controller.t("Show all")}))):"blank-row"===t.type?a.createElement("tr",{role:a.const("row"),class:a.const("dcg-blank-row")},a.createElement("td",{colspan:e.bindFn(e.getCols),style:function(){return{height:t.rows*e.getRowHeight()+"px"}}})):a.createElement(g,{each:function(){return t.cells},key:function(e){return e.guid}},a.createElement("tr",{role:a.const("row"),"aria-rowindex":function(){return t.index},class:function(){return{"dcg-row":t,"dcg-braille-row":"none"!==e.controller.getBrailleMode()}}},function(t){return"header"===t.type?a.createElement(s.default,{controller:e.props.controller,model:e.const(t)}):a.createElement(c.default,{controller:e.props.controller,model:e.const(t)})}))}))))),a.createElement("i",{class:a.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:a.const("true"),onTap:this.bindFn(this.onDelete)})),a.createElement("span",{class:a.const("dcg-tab dcg-action-drag"),handleevent:a.const("true"),tapboundary:a.const("true"),disablescroll:a.const("true"),style:a.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},a.createElement("span",{class:a.const("dcg-num")},function(){return e.model.displayIndex}),a.createElement("div",{class:a.const("dcg-tab-interior")}),a.createElement(f.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),a.createElement(p.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},t.prototype.getCols=function(){return this.model.rowModels[0].cells.length-1},t.prototype.getRowHeight=function(){return this.controller.getGraphSettings().config.projectorMode?38:33},t.prototype.getVisibleRowModels=function(){var e=this.model.rowModels;if(e.length<=25)return e;var t=l.getCollapsedRange(this.model);if(void 0!==t){var n=e.slice(0,t.min);return n=n.concat({type:"show-more",guid:"show-more"}),n.concat(e.slice(t.max))}var r=h.getExppanelRect(this.controller),i=r?r.height:0,o=d(this.node).offset(),a=(o?o.top:0)-(r?r.top:0),s=d(this.node).find(".dcg-row:eq(0)").height(),c=this.getRowHeight();if(i/c>e.length)return e;for(var u=[],p=(-a-s)/c,f=(i-a)/c,m=0;m<e.length;m++){var g=l.getSelectedCell(this.model);if(0===m||m===e.length-2||g&&g.row===m)u.push(e[m]);else if(m>f||m<p){var y=u[u.length-1];y&&"blank-row"===y.type?y.rows++:u.push({type:"blank-row",guid:e[m].guid,rows:1})}else u.push(e[m])}return u},t.prototype.missingRowMessage=function(){var e=l.getCollapsedRange(this.model);return void 0===e?"":this.controller.t("__rowCount__ more rows",{rowCount:e.max-e.min})},t.prototype.didMountContainer=function(e){this.node=e,d(e).on("scroll",function(){return e.scrollLeft=0})},t.prototype.getSelectedCell=function(){return l.getSelectedCell(this.model)},t.prototype.computeScrolledX=function(){if(!this.getSelectedCell()||!this.node)return 0;var e=this.node.children[0],t=this.node.querySelector(".dcg-selected");if(null===e||null===t)return 0;var n=this.node.getBoundingClientRect(),r=t.getBoundingClientRect(),i=r.left-e.getBoundingClientRect().left,o=n.width-i-r.width-80,a=Math.min(0,n.width-e.scrollWidth-30);return o=Math.max(o,a),Math.min(0,o)},t.prototype.isBottomFocused=function(){var e=this.getSelectedCell();return!!e&&e.row===this.model.columnModels[0].cells.length},t.prototype.isRightFocused=function(){var e=this.getSelectedCell();return!!e&&e.column===this.model.columnModels.length-1},t.prototype.isFocused=function(){return!!this.getSelectedCell()},t.prototype.onKeydown=function(e){this.controller.isInEditListMode()||!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||("Up"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInColumn()):"Down"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInColumn()):"Left"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInRow()):"Right"===r.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInRow()):"H"===r.lookupChar(e)&&(e.preventDefault(),e.stopPropagation(),this.speakColumnHeader()))},t.prototype.moveToFirstCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:0,column:e.column}}})},t.prototype.moveToLastCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:this.model.rowModels.length-1,column:e.column}}})},t.prototype.moveToFirstCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:0}}})},t.prototype.moveToLastCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:this.model.columnModels[0].cells.length-1}}})},t.prototype.speakColumnHeader=function(){var e=this.controller.t("No column header"),t=this.getSelectedCell();if(t){var n=this.model.rowModels[0].cells[t.column];if(n&&"header"===n.type&&n.latex&&""!==n.latex){e=u.MQ.StaticMath(d("<span>"+n.latex+"</span>")[0]).mathspeak()}}i.alert(e)},t}(o.default);t.default=y}),define("loadcss!expressions/folder-view",function(){}),define("expressions/folder-view",["require","exports","tslib","browser","keys","lib/aria","./expression-edit-actions","./abstract-item-view","./smart_textarea","dcgview","./circular-icon-view","jquery.handleevent","loadcss!./folder-view"],function(e,t,n,r,i,o,a,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return l.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionfolder":!0,"dcg-inFolder":!1,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-collapsed":!!e.model.collapsed,"dcg-hidden":!!e.model.hidden,"dcg-has-items":e.controller.getNumberOfItemsInFolder(e.id)>0,"dcg-secretFolder":e.model.secret&&!e.controller.canAdministerSecretFolders()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},l.createElement("div",{class:l.const("dcg-fade-container")},l.createElement("div",{class:l.const("dcg-main")},l.createElement("div",{role:l.const("button"),tabindex:l.const("0"),"aria-pressed":function(){return e.model.collapsed},"aria-label":function(){return e.controller.t("Collapse Folder")},class:l.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:l.const("true"),onTap:this.bindFn(this.toggleCollapsed)},l.createElement("i",{class:l.const("dcg-icon-caret-down")})),l.createElement(c.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return e.model.title},placeholder:function(){return e.controller.t("Enter a note...")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel),readonly:function(){return e.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)}),l.createElement("div",{role:l.const("checkbox"),"aria-checked":function(){return e.model.secret},"aria-label":function(){return e.controller.t("Hide this folder from students")},class:function(){return{"dcg-action-toggle-secret-folder":!0,"dcg-do-not-blur":!0,"dcg-checked":e.model.secret}},style:function(){return{display:e.controller.canAdministerSecretFolders()?void 0:"none"}},handleEvent:l.const("true"),onTap:this.bindFn(this.toggleSecret)},l.createElement("span",{class:l.const("dcg-checkbox-box")},l.createElement("i",{class:l.const("dcg-icon-check")})),l.createElement("span",{class:l.const("dcg-checkbox-label")},function(){return e.controller.t("Hide this folder from students.")}))),l.createElement("i",{class:l.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:l.const("true"),onTap:this.bindFn(this.onDelete)})),l.createElement("span",{class:l.const("dcg-tab dcg-action-drag"),handleevent:l.const("true"),tapboundary:l.const("true"),disablescroll:l.const("true"),style:l.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},l.createElement("span",{class:l.const("dcg-num")},function(){return e.model.displayIndex}),l.createElement("div",{class:l.const("dcg-tab-interior")},l.createElement("span",{role:l.const("button"),tabindex:l.const("0"),"aria-pressed":function(){return!!e.model.hidden},"aria-label":function(){return e.controller.t("Hide Folder")},class:l.const("dcg-circular-icon-container dcg-expression-icon-container"),onTap:this.bindFn(this.toggleHidden)},l.createElement(u.CircularIconView,{iconType:function(){return e.model.hidden?"hidden":"folder"},whiteIcon:function(){return e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)}})))),l.createElement(a.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},t.prototype.toggleHidden=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})},t.prototype.toggleSecret=function(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})},t.prototype.toggleCollapsed=function(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})},t.prototype.onInput=function(e){this.controller.dispatch({type:"set-folder-title",id:this.id,title:e})},t.prototype.onFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})},t.prototype.onSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},t.prototype.onKeydown=function(e){var t=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,n=e.metaKey&&!e.altKey&&!e.shiftKey&&!e.ctrlKey;(r.IS_APPLE?n:t)&&i.lookup(e)===i.UP&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed}),this.model.collapsed?o.alert(this.controller.t("folder collapsed")):o.alert(this.controller.t("folder expanded")))},t.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"folder"!==e.type||e.id!==this.id)},t.prototype.getAriaLabel=function(){var e="";this.model.hidden||this.model.collapsed||this.model.secret?!this.model.hidden||this.model.collapsed||this.model.secret?this.model.hidden||!this.model.collapsed||this.model.secret?this.model.hidden||this.model.collapsed||!this.model.secret?this.model.hidden&&this.model.collapsed&&!this.model.secret?e=this.controller.t("Hidden Collapsed Folder"):this.model.hidden&&!this.model.collapsed&&this.model.secret?e=this.controller.t("Hidden Secret Folder"):!this.model.hidden&&this.model.collapsed&&this.model.secret?e=this.controller.t("Collapsed Secret Folder"):this.model.hidden&&this.model.collapsed&&this.model.secret&&(e=this.controller.t("Hidden Collapsed Secret Folder")):e=this.controller.t("Secret Folder"):e=this.controller.t("Collapsed Folder"):e=this.controller.t("Hidden Folder"):e=this.controller.t("Folder");var t=this.controller.getNumberOfItemsInFolder(this.id);return t>0?this.controller.t("__folder__ has __count__ items",{folder:e,count:t}):e},t}(s.default);t.default=d}),define("lib/coerce-url",["require","exports"],function(e,t){"use strict";function n(e){var t=document.createElement("a");return t.href=e,t.href}Object.defineProperty(t,"__esModule",{value:!0}),t.coerceURL=void 0,t.coerceURL=n}),define("loadcss!expressions/image-icon-view",function(){}),define("expressions/image-icon-view",["require","exports","tslib","lib/coerce-url","dcgview","main/manage-focus-helper","../dcgview-helpers/tooltipped-error","./circular-icon-view","jquery.handleevent","loadcss!./image-icon-view"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=i.Components.SwitchUnion,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-expression-icon-container dcg-image-icon-container")},c(this.bindFn(this.typeOfIcon),{error:function(){return i.createElement(a.TooltippedError,{error:function(){return e.controller.unpack(e.model.error)},isWhite:e.bindFn(e.isSelected),gravity:e.const("se")})},failed:function(){return i.createElement("span",null)},loading:function(){return i.createElement(s.CircularIconView,{iconType:e.const("loading")})},hidden:function(){return e.buildIconView()},image:function(){return e.buildIconView()}}))},t.prototype.buildIconView=function(){var e=this;return i.createElement("div",{class:i.const("dcg-circular-icon-container"),role:i.const("button"),tabindex:i.const("0"),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return e.myOptionsOpen()?e.toggleOptions(t):e.controller.isInEditListMode()?e.toggleOptions(t):void e.toggleImageShown()},didMount:function(t){return e.rootElt=t},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),e.toggleOptions(t)},manageFocus:this.const(o.manageFocusHelper({controller:this.controller,location:{type:"image-icon",id:this.model.id}}))},i.createElement(s.CircularIconView,{iconType:function(){return"hidden"===e.typeOfIcon()?"hidden":"background"},backgroundImage:this.bindFn(this.getBackgroundImage),backgroundOpacity:this.const(1),whiteIcon:this.bindFn(this.isSelected)}))},t.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},t.prototype.typeOfIcon=function(){return"loading"===this.model.loadStatus?"loading":"failed"===this.model.loadStatus?"failed":this.hasError()?"error":this.model.shouldGraph?"image":"hidden"},t.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},t.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,icon:this.rootElt,focusFirstOption:"keyboard"===e.device}})},t.prototype.hasError=function(){return!!this.model.error&&"none"===this.controller.getBrailleMode()},t.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+r.coerceURL(this.model.image_url)+'")',this.lastEncodedURL)},t.prototype.toggleImageShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}),this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:this.model.id}})},t.prototype.getIconAriaLabel=function(){return this.controller.isInEditListMode()?this.myOptionsOpen()?this.controller.t("Hide Options"):this.controller.t("Show Options"):this.model.hidden?this.controller.t("Show Image"):this.controller.t("Hide Image")},t}(i.Class);t.default=l}),define("expressions/image-upload-view",["require","exports","tslib","dcgview","jquery","main/manage-focus-helper"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageUploadView=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){return r.createElement("div",{class:r.const("dcg-do-not-blur"),onTap:this.bindFn(this.newImage),handleEvent:r.const("true"),role:r.const("button"),tabindex:r.const(0),"aria-label":this.props.ariaLabel,manageFocus:this.const(this.props.location?o.manageFocusHelper({controller:this.controller,location:this.props.location()}):void 0)},this.children,r.createElement("input",{type:r.const("file"),accept:r.const("image/*"),style:r.const("display: none"),didMount:this.bindFn(this.didMountFileInput)}))},t.prototype.didMountFileInput=function(e){var t=this;this.fileInputNode=e,i(e).on("change",function(){t.props.onFileChange(e.files),i(e).val("")})},t.prototype.newImage=function(){this.fileInputNode.click()},t}(r.Class);t.ImageUploadView=a}),define("loadcss!expressions/clickable_image_info_view",function(){}),define("expressions/clickable_image_info_view",["require","exports","tslib","dcgview","./circular-icon-view","../lib/tooltip","./image-upload-view","./clickable_info_view","loadcss!./clickable_image_info_view"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClickableImageInfoView=void 0;var c=r.Components.Switch,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-do-blur dcg-indent-in-folder"),tapboundary:r.const("true"),handleEvent:r.const("true")},r.createElement(s.ClickableInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}}),r.createElement("div",{class:r.const("dcg-clickable-image-info-view"),role:r.const("group"),"aria-label":function(){return e.controller.t("Clickable Image Options")}},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-clickable-image-label")},r.const("Hovered:")),r.createElement(o.Tooltip,{tooltip:function(){return e.tooltip("hovered")},gravity:this.const("s")},r.createElement(a.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.tooltip("hovered")},onFileChange:function(t){return e.updateImage("hovered",t)}},r.createElement(c,{key:this.bindFn(this.hoveredStatus)},function(){return r.createElement(i.CircularIconView,{iconType:e.bindFn(e.hoveredStatus),backgroundImage:e.const("background"===e.hoveredStatus()?"url("+e.model.clickableInfo.hoveredImage+")":"")})}))),r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-clickable-image-label")},r.const("Depressed:")),r.createElement(o.Tooltip,{tooltip:function(){return e.tooltip("depressed")},gravity:this.const("s")},r.createElement(a.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.tooltip("depressed")},onFileChange:function(t){return e.updateImage("depressed",t)}},r.createElement(c,{key:this.bindFn(this.depressedStatus)},function(){return r.createElement(i.CircularIconView,{iconType:function(){return e.depressedStatus()},backgroundImage:e.const("background"===e.depressedStatus()?"url("+e.model.clickableInfo.depressedImage+")":"")})})))))},t.prototype.hoveredStatus=function(){return this.hoveredUploading?"loading":this.model.clickableInfo.hoveredImage?"background":"hidden"},t.prototype.depressedStatus=function(){return this.depressedUploading?"loading":this.model.clickableInfo.depressedImage?"background":"hidden"},t.prototype.tooltip=function(e){return("hovered"===e?this.model.clickableInfo.hoveredImage:this.model.clickableInfo.depressedImage)?"depressed"===e?this.controller.t("Change Depressed Image"):this.controller.t("Change Hovered Image"):"depressed"===e?this.controller.t("Add Depressed Image"):this.controller.t("Add Hovered Image")},t.prototype.updateImage=function(e,t){var n=this;if(t&&t[0]){var r=t[0];"hovered"===e&&(this.hoveredUploading=!0),"depressed"===e&&(this.depressedUploading=!0),this.controller.getGraphSettings().config.imageUploadCallback(r,function(t,r){"hovered"===e&&(n.hoveredUploading=!1),"depressed"===e&&(n.depressedUploading=!1),!t&&r&&("hovered"===e?n.controller.dispatch({type:"set-hovered-image",id:n.model.id,url:r}):n.controller.dispatch({type:"set-depressed-image",id:n.model.id,url:r}))})}},t}(r.Class);t.ClickableImageInfoView=l}),define("loadcss!expressions/image-view",function(){}),define("expressions/image-view",["require","exports","tslib","keys","jquery","underscore","./abstract-item-view","./smart_textarea","dcgview","dcgview-helpers/mathquill-view","lib/conditional_blur","expressions/promptslider_view","./image-icon-view","./clickable_image_info_view","graphing-calc/models/image","./expression-edit-actions","../dcgview-helpers/mathquill-braille-wrapper","jquery.handleevent","loadcss!./image-view"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y=c.Components,v=y.If,b=y.SwitchUnion,x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return c.createElement("div",{class:c.const("dcg-image-input-mathquill")},c.createElement(g.default,{latex:function(){return e.model[e.props.name()]},controller:this.props.controller,brailleShouldFocus:function(){return e.props.focusedInput()===e.props.name()},selectOnFocus:this.const(!0),onBrailleInput:this.bindFn(this.handleLatexChanged),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged),onBrailleKeydown:this.bindFn(this.handleBrailleKeydown),hasError:function(){return f.hasInputError(e.model,e.props.name())},ariaLabel:function(){return e.controller.t(e.props.name())}},c.createElement(l.default,{latex:function(){return e.model[e.props.name()]},isFocused:function(){return e.props.focusedInput()===e.props.name()},capExpressionSize:function(){return e.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.const({}),getAriaLabel:function(){return e.controller.t(e.props.name())},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(t,n){return e.handlePressedKey(t,n)},onUserChangedLatex:this.bindFn(this.handleLatexChanged),onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:this.bindFn(this.handleMQFocusedChanged),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}},c.createElement("span",{class:function(){return{"dcg-focus":e.props.focusedInput()===e.props.name(),"dcg-invalid":f.hasInputError(e.model,e.props.name())}}}))))},t.prototype.getInputs=function(){return this.controller.canUseAdvancedStyling()?["center","angle","opacity","width","height"]:["center","angle","width","height"]},t.prototype.handlePressedKey=function(e,t){var n=this.props.name(),r=l.default.getFocusedMathquill(),o=this.getInputs(),a=o.indexOf(n);if(!this.controller.isInEditListMode()){if("Enter"===e)return this.controller.dispatch({
type:"on-special-key-pressed",key:"Enter"});if("Esc"===e)return void u.default()}var s=-1;"Up"===e&&(s=a-1),"Down"===e&&(s=a+1),"Left"===e&&(s=a-2),"Right"===e&&(s=a+2);var c=e;if(s>=0&&s<o.length){var d=!1;if(r)d=l.default.applyArrowKeyAndReturnIfWasAtBounds(r,c,t);else if("Up"===e||"Down"===e)d=!0;else{var p=g.getFocusedBrailleElement();d=p&&("Left"===e&&0===p.selectionStart||"Right"===e&&p.selectionStart===i(p).val().length)}return void(d&&(this.focusInput(o[s]),t&&t.preventDefault()))}r&&(r.keystroke(e,t),this.handleLatexChanged(r.latex()))},t.prototype.handleBrailleKeydown=function(e){var t=r.lookup(e);t&&this.handlePressedKey(t,i.Event(e))},t.prototype.focusInput=function(e){this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:e}})},t.prototype.anyInputHasError=function(){var e=this;return o.any(this.getInputs(),function(t){return f.hasInputError(e.model,t)})},t.prototype.handleLatexChanged=function(e){var t=this.props.name();this.model.draggingOnGraphpaper||f.getMQAttribute(this.model,t)!==e&&this.controller.dispatch({type:"set-image-mq-attribute",id:this.model.id,attribute:t,latex:e})},t.prototype.handleMQFocusedChanged=function(e){var t=this.props.name();e?this.props.focusedInput()!==t&&this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.model.id,location:t}})},t}(c.Class),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e=this;return c.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionimage":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-input-focused":e.getFocusedInput()&&"name"!==e.getFocusedInput()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},c.createElement("div",{class:c.const("dcg-fade-container")},c.createElement("div",{class:c.const("dcg-main")},b(function(){return e.model.loadStatus},{failed:function(){return c.createElement("div",null,c.createElement("div",{class:c.const("dcg-image-failed")},function(){return e.controller.t("Failed to load image.")}),c.createElement("div",{role:c.const("button"),tabindex:c.const(0),class:c.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},function(){return e.controller.t("Retry.")}))},loading:function(){return c.createElement("div",null,c.createElement("div",{class:c.const("dcg-image-loading")},function(){return e.controller.t("Loading image...")}),c.createElement("div",{role:c.const("button"),tabindex:c.const(0),class:c.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},function(){return e.controller.t("Retry.")}))},loaded:function(){return c.createElement("div",{class:c.const("dcg-image-loaded")},c.createElement(s.default,{shouldFocus:function(){return"name"===e.getFocusedInput()},text:function(){return e.model.name},placeholder:function(){return e.controller.t("Enter a note...")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:e.bindFn(e.onNameInput),onFocusChange:e.bindFn(e.onNameFocusChange),onSpecialKey:e.bindFn(e.onNameSpecialKey),readonly:e.const(!1)}),c.createElement("div",{class:function(){return{"dcg-do-blur":!0,"dcg-image-input-grid":!0}},handleEvent:c.const("true")},c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.t("Center:")}),c.createElement(x,{name:e.const("center"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.t("Width:")}),c.createElement(x,{name:e.const("width"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.t("Angle:")}),c.createElement(x,{name:e.const("angle"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.t("Height:")}),c.createElement(x,{name:e.const("height"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement(v,{predicate:function(){return e.controller.canUseAdvancedStyling()}},function(){return c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.t("Opacity:")})}),c.createElement(v,{predicate:function(){return e.controller.canUseAdvancedStyling()}},function(){return c.createElement(x,{name:e.const("opacity"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)})})))}})),c.createElement("span",{class:c.const("dcg-fadeout")}),c.createElement("i",{class:c.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:c.const("true"),onTap:this.bindFn(this.onDelete)}),c.createElement(v,{predicate:function(){return e.shouldShowClickableProperties()}},function(){return c.createElement(h.ClickableImageInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}})}),c.createElement(v,{predicate:this.bindFn(this.shouldShowBrailleError)},function(){return c.createElement("div",{class:e.getFooterClass()},c.createElement("div",{tabindex:c.const(0),class:c.const("dcg-expression-braille-error"),"aria-roledescription":c.const("error"),"aria-label":function(){return e.controller.unpack(e.model.error)}},c.createElement("i",{class:c.const("dcg-icon-error")}),function(){return e.controller.unpack(e.model.error)}))}),c.createElement(v,{predicate:function(){return e.model.missingVariables.length>0&&e.controller.areSlidersEnabled()}},function(){return c.createElement("div",{class:e.getFooterClass()},c.createElement(d.default,{model:e.props.model,controller:e.props.controller}))})),c.createElement("span",{class:c.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:c.const("true"),tapboundary:c.const("true"),disablescroll:c.const("true"),style:c.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},c.createElement("span",{class:c.const("dcg-num")},function(){return e.model.displayIndex}),c.createElement("div",{class:c.const("dcg-tab-interior dcg-action-icon-mouse")},c.createElement(p.default,{model:this.props.model,controller:this.props.controller}))),c.createElement(m.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},t.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")},t.prototype.onNameInput=function(e){this.controller.dispatch({type:"set-image-name",id:this.id,name:e})},t.prototype.onNameFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):"name"===this.getFocusedInput()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})},t.prototype.onNameSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},t.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"image"===e.type&&e.id===this.model.id)return e.location},t.prototype.onRetryLoad=function(){this.controller.dispatch({type:"image-retry-loading",id:this.id})},t.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&this.model.clickableInfo.enabled},t.prototype.shouldShowBrailleError=function(){return"none"!==this.controller.getBrailleMode()&&!!this.model.error},t.prototype.onMouseSelect=function(e){"dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},t}(a.default);t.default=E}),define("expressions/shell_view",["require","exports","tslib","dcgview","./abstract-item-view"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMount=function(){this.onItemViewMounted()},t.prototype.willUnmount=function(){this.onItemViewUnmounted()},t.prototype.template=function(){var e="";return this.model.cachedRenderHeight&&(e="height:"+this.model.cachedRenderHeight+"px"),r.createElement("div",{class:r.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:r.const(e)})},t}(i.default);t.default=o});define("expressions/drag_container_view",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-drag-container"),style:function(){return{top:e.getTopPx()}}},this.children)},t.prototype.getTopPx=function(){var e=this.controller.getRawDragState();if(e)return e.itemTop+"px"},t}(r.Class);t.default=i}),define("vendor/papaparse",["require","jquery"],function(e){"use strict";function t(e,t){var n=s(t);if("string"==typeof e){if(!n.download){return new o(n).parse(e)}var a=new r(n);a.stream(e)}else if(e instanceof File)if(n.step||n.chunk){var a=new i(n);a.stream(e)}else{new o(n);reader=new FileReader,reader.onload=function(e){var t=new o(n);t.parse(e.target.result)},reader.onerror=function(){l(n.error)&&n.error(reader.error,e)},reader.readAsText(e,n.encoding)}}function n(e,t){function n(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function r(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var r=e instanceof Array&&e.length>0,o=!(t[0]instanceof Array);if(r){for(var a=0;a<e.length;a++)a>0&&(n+=s),n+=i(e[a],a);t.length>0&&(n+=c)}for(var l=0;l<t.length;l++){for(var u=r?e.length:t[l].length,d=0;d<u;d++){d>0&&(n+=s);var p=r&&o?e[d]:d;n+=i(t[l][p],d)}l<t.length-1&&(n+=c)}return n}function i(e,t){return void 0===e||null===e?"":(e=e.toString().replace(/"/g,'""'),"boolean"==typeof a&&a||a instanceof Array&&a[t]||o(e,p.BAD_DELIMITERS)||e.indexOf(s)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1)?'"'+e+'"':e)}function o(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var a=!1,s=",",c="\r\n";if(function(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==p.BAD_DELIMITERS.indexOf(t.delimiter)&&(s=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(a=t.quotes),"string"==typeof t.newline&&(c=t.newline))}(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return r(null,e);if("object"==typeof e[0])return r(n(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:n(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),r(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function r(e){e=e||{},e.chunkSize||(e.chunkSize=p.RemoteChunkSize);var t,n,r=0,i=0,a="",s="",u=new o(c(e));this.stream=function(o){function c(){if(t=new XMLHttpRequest,t.onload=d,t.onerror=p,t.open("GET",o,!0),e.step){var n=r+e.chunkSize-1;i&&n>i&&(n=i),t.setRequestHeader("Range","bytes="+r+"-"+n)}t.send(),r+=e.chunkSize}function d(){if(4==t.readyState){if(t.status<200||t.status>=400)return void p();a+=s+t.responseText,s="";var i=!e.step||r>h(t);if(!i){var o=a.lastIndexOf("\n");if(o<0&&(o=a.lastIndexOf("\r")),!(o>-1))return void n();s=a.substring(o+1),a=a.substring(0,o)}var c=u.parse(a);a="",l(e.chunk)&&(e.chunk(c),c=void 0),i||c.meta.paused||n()}}function p(){l(e.error)&&e.error(t.statusText)}function h(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}(n=function(){c()})()}}function i(e){e=e||{},e.chunkSize||(e.chunkSize=p.LocalChunkSize);var t,n=0,r="",i="",a=new o(c(e)),s="function"==typeof FileReader;this.stream=function(o){function c(){n<o.size&&u()}function u(){var r=Math.min(n+e.chunkSize,o.size),i=t.readAsText(h.call(o,n,r),e.encoding);s||d({target:{result:i}})}function d(t){n+=e.chunkSize,r+=i+t.target.result,i="";var s=n>=o.size;if(!s){var u=r.lastIndexOf("\n");if(u<0&&(u=r.lastIndexOf("\r")),!(u>-1))return void c();i=r.substring(u+1),r=r.substring(0,u)}var d=a.parse(r);r="",l(e.chunk)&&(e.chunk(d,o),d=void 0),s||d.meta.paused||c()}function p(){l(e.error)&&e.error(t.error,o)}var h=o.slice||o.webkitSlice||o.mozSlice;s?(t=new FileReader,t.onload=d,t.onerror=p):t=new FileReaderSync,c()}}function o(e){function t(){return b&&f&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),f=!1),n()&&r(),i()}function n(){return e.header&&0==v.length}function r(){if(b){for(var e=0;n()&&e<b.data.length;e++)for(var t=0;t<b.data[e].length;t++)v.push(b.data[e][t]);b.data.splice(0,1)}}function i(){if(!b||!e.header&&!e.dynamicTyping)return b;for(var t=0;t<b.data.length;t++){for(var n={},r=0;r<b.data[t].length;r++){if(e.dynamicTyping){var i=b.data[t][r];b.data[t][r]="true"==i||"false"!=i&&s(i)}e.header&&(r>=v.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(b.data[t][r])):n[v[r]]=b.data[t][r])}e.header&&(b.data[t]=n,r>v.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+r,t):r<v.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+r,t))}return e.header&&b.meta&&(b.meta.fields=v),b}function o(t){for(var n,r,i,o=[",","\t","|",";",p.RECORD_SEP,p.UNIT_SEP],s=0;s<o.length;s++){var c=o[s],l=0,u=0;i=void 0;for(var d=new a({delimiter:c,preview:10}).parse(t),h=0;h<d.data.length;h++){var f=d.data[h].length;u+=f,void 0!==i?f>1&&(l+=Math.abs(f-i),i=f):i=f}u/=d.data.length,(void 0===r||l<r)&&u>1.99&&(r=l,n=c)}return e.delimiter=n,{successful:!!n,bestDelimiter:n}}function s(e){return m.test(e)?parseFloat(e):e}function u(e,t,n,r){b.errors.push({type:e,code:t,message:n,row:r})}var d,h,f,m=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,g=this,y=!1,v=[],b={data:[],errors:[],meta:{}};e=c(e),this.parse=function(r){if(f=!1,!e.delimiter){var i=o(r);i.successful?e.delimiter=i.bestDelimiter:(f=!0,e.delimiter=p.DefaultDelimiter),b.meta.delimiter=e.delimiter}if(l(e.step)){var s=e.step;e.step=function(e){b=e,n()?t():s(t(),g)}}return e.preview&&e.header&&e.preview++,d=r,h=new a(e),b=h.parse(d),t(),l(e.complete)&&!y&&e.complete(b),y?{meta:{paused:!0}}:b},this.pause=function(){y=!0,h.abort(),d=d.substr(h.getCharIndex())},this.resume=function(){y=!1,h=new a(e),h.parse(d),l(e.complete)&&!y&&e.complete(b)},this.abort=function(){h.abort(),l(e.complete)&&e.complete(b),d=""}}function a(e){function t(){for(;D<M.length&&!j&&!(T>0&&R>=T);)'"'==L?i():P?o():a(),n();return r()}function n(){D++,L=M[D]}function r(){if(j&&E("Abort","ParseAbort","Parsing was aborted by the user's step function"),P&&E("Quotes","MissingQuotes","Unescaped or mismatched quotes"),f(),!l(I))return S()}function i(){b()&&!v()?P=!P:(u(),P&&v()?D++:E("Quotes","UnexpectedQuotes","Unexpected quotes"))}function o(){(g(D)||y(D))&&A++,u()}function a(){L==k?d():g(D)?(h(),n()):y(D)?h():s()?c():u()}function s(){return!!C&&((0==D||y(D-1)||g(D-2))&&M[D]===C)}function c(){for(;!g(D)&&!y(D)&&D<M.length;)n()}function u(){O[N][q]+=L}function d(){O[N].push(""),q=O[N].length-1}function h(){f(),A++,R++,O.push([]),N=O.length-1,d()}function f(){m(),l(I)&&(O[N]&&I(S()),_())}function m(){1==O[N].length&&B.test(O[N][0])&&(e.keepEmptyRows?O[N].splice(0,1):O.splice(N,1),N=O.length-1)}function g(e){return e<M.length-1&&("\r"==M[e]&&"\n"==M[e+1]||"\n"==M[e]&&"\r"==M[e+1])}function y(e){return"\r"==M[e]||"\n"==M[e]}function v(){return!b()&&D<M.length-1&&'"'==M[D+1]}function b(){return!P&&x(D-1)||x(D+1)}function x(e){"number"!=typeof e&&(e=D);var t=M[e];return e<=-1||e>=M.length||t==k||"\r"==t||"\n"==t}function E(e,t,n){F.push({type:e,code:t,message:n,line:A,row:N,index:D})}function w(e){M=e,P=!1,D=0,R=0,A=1,_(),O=[[""]],L=M[D]}function _(){O=[],F=[],N=0,q=0}function S(){return{data:O,errors:F,meta:{lines:A,delimiter:k,aborted:j,truncated:T>0&&D<M.length}}}var M,k,C,I,T,L,D,P,A,O,F,N,q,R,B=/^\s*$/,j=!1;e=e||{},k=e.delimiter,C=e.comments,I=e.step,T=e.preview,("string"!=typeof k||1!=k.length||p.BAD_DELIMITERS.indexOf(k)>-1)&&(k=","),!0===C?C="#":("string"!=typeof C||1!=C.length||p.BAD_DELIMITERS.indexOf(C)>-1||C==k)&&(C=!1),this.parse=function(e){if("string"!=typeof e)throw"Input must be a string";return w(e),t()},this.abort=function(){j=!0},this.getCharIndex=function(){return D}}function s(e){"object"!=typeof e&&(e={});var t=c(e);return("string"!=typeof t.delimiter||1!=t.delimiter.length||p.BAD_DELIMITERS.indexOf(t.delimiter)>-1)&&(t.delimiter=d.delimiter),"boolean"!=typeof t.header&&(t.header=d.header),"boolean"!=typeof t.dynamicTyping&&(t.dynamicTyping=d.dynamicTyping),"number"!=typeof t.preview&&(t.preview=d.preview),"function"!=typeof t.step&&(t.step=d.step),"function"!=typeof t.complete&&(t.complete=d.complete),"function"!=typeof t.error&&(t.error=d.error),"string"!=typeof t.encoding&&(t.encoding=d.encoding),"boolean"!=typeof t.download&&(t.download=d.download),"boolean"!=typeof t.keepEmptyRows&&(t.keepEmptyRows=d.keepEmptyRows),t}function c(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=c(e[n]);return t}function l(e){return"function"==typeof e}var u=e("jquery"),d={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",comments:!1,complete:void 0,error:void 0,download:!1,chunk:void 0,keepEmptyRows:!1},p={};return p.parse=t,p.unparse=n,p.RECORD_SEP=String.fromCharCode(30),p.UNIT_SEP=String.fromCharCode(31),p.BYTE_ORDER_MARK="\ufeff",p.BAD_DELIMITERS=["\r","\n",'"',p.BYTE_ORDER_MARK],p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=a,p.ParserHandle=o,p.NetworkStreamer=r,p.FileStreamer=i,u.fn.parse=function(e){function t(){if(0!=o.length){var t=o[0];if(l(e.before)){var i=e.before(t.file,t.inputElem);if("object"==typeof i){if("abort"==i.action)return void n("AbortError",t.file,t.inputElem,i.reason);if("skip"==i.action)return void r();"object"==typeof i.config&&(t.instanceConfig=u.extend(t.instanceConfig,i.config))}else if("skip"==i)return void r()}var a=t.instanceConfig.complete;t.instanceConfig.complete=function(e){l(a)&&a(e,t.file,t.inputElem),r()},p.parse(t.file,t.instanceConfig)}}function n(t,n,r,i){l(e.error)&&e.error({name:t},n,r,i)}function r(){o.splice(0,1),t()}var i=e.config||{},o=[];return this.each(function(e){if("INPUT"!=u(this).prop("tagName").toUpperCase()||"file"!=u(this).attr("type").toLowerCase()||!window.FileReader||!this.files||0==this.files.length)return!0;for(var t=0;t<this.files.length;t++)o.push({file:this.files[t],inputElem:this,instanceConfig:u.extend({},i)})}),t(),this},p}),define("geometry/math/isNumber",["require","exports"],function(e,t){"use strict";function n(e){var t;if("number"==typeof e)t=e+"";else{if("string"!=typeof e)return!1;t=e}return t.trim().match(/^-?[0-9]*\.?[0-9]*$/)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=void 0,t.isNumber=n}),define("main/data_helpers",["require","exports","vendor/papaparse","underscore","bugsnag","geometry/math/isNumber"],function(e,t,n,r,i,o){"use strict";function a(e){var t=e.split(/\r?\n/),n=[],i=!1;if(!(t.length<2)){for(var a=0;a<t.length;a++){var s=t[a];if(s.trim()){a>0&&!o.isNumber(s.replace(/,(\d{3})/g,"$1"))&&(i=!0);var c={content:s};n.push(c)}}if(!i){var l=r.pluck(n,"content").map(function(e){return e.replace(/,(\d{3})/g,"$1")});return o.isNumber(l[0])||(l=l.slice(1)),[{content:"\\left["+l.join(",")+"\\right]",numberList:!0}]}return n}}function s(e){if(!/^\s*$/.test(e)){var t=n.parse(e,{preview:1e3}),r=[];if(t.errors.length&&!t.data.length)return void i.notify("PapaParse.parse returned errors.",{metaData:{input:e,output:t.errors}});if(t.data.length&&!(t.data.length<2)){for(var o=t.data[0].length,a=0;a<o;a++)r.push([]);for(var s=0;s<t.data.length;s++)if(0!==s||!isNaN(parseFloat(t.data[s][0]))){if(t.data[s].length<2)return;if(t.data[s][0]||t.data[s][1])for(var a=0;a<o;a++){var c=(t.data[s][a]||"").replace(/,(\d{3})/g,"$1");if(c&&isNaN(parseFloat(c)))return;r[a].push(c)}}if(!(r[0].length<2))return r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=t.getExpressions=void 0,t.getExpressions=a,t.parse=s}),define("loadcss!new_expression",function(){}),define("expressions/new_expression_view",["require","exports","tslib","dcgview","loadcss!new_expression"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return this.controller=this.props.controller(),r.createElement("div",{class:r.const("dcg-expressionitem dcg-new-expression dcg-opened")},r.createElement("div",{class:r.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)},r.createElement("div",{class:r.const("dcg-new-expression-fade")})),r.createElement("span",{class:r.const("dcg-tab")},r.createElement("span",{class:r.const("dcg-num dcg-variable-index")},this.bindFn(this.getIndex)),r.createElement("div",{class:r.const("dcg-tab-interior")})))},t.prototype.getIndex=function(){return this.controller.getNextDisplayIndex()},t.prototype.newMath=function(){this.controller.dispatch({type:"new-expression-at-end"})},t}(r.Class);t.default=i}),define("loadcss!add_expression",function(){}),define("expressions/add_expression_view",["require","exports","tslib","keys","browser","lib/tooltip","dcgview","jquery","./image-upload-view","main/manage-focus-helper","loadcss!add_expression"],function(e,t,n,r,i,o,a,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=a.Components.If,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return a.createElement("div",{class:a.const("dcg-add-expression-container")},a.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Add Item")},gravity:function(){return e.controller.isNarrow()?"ne":"se"}},a.createElement("span",{class:function(){return{"dcg-icon-btn":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-do-blur":!0,"dcg-active":e.controller.isAddExpressionOpen()}},handleEvent:a.const("true"),role:a.const("button"),tabindex:a.const("0"),"aria-haspopup":a.const("true"),"aria-expanded":function(){return e.controller.isAddExpressionOpen()},"aria-label":function(){return e.controller.t("Add Item")},didMount:function(t){e.toggleButtonNode=t},onTap:this.bindFn(this.toggleAddExpression),manageFocus:this.const(l.manageFocusHelper({controller:this.controller,location:{type:"add-item-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-plus")}))),a.createElement(u,{predicate:function(){return e.controller.isAddExpressionOpen()}},function(){return a.createElement("div",{class:function(){return{"dcg-add-expression-dropdown":!0,"dcg-popover":!0,"dcg-bottom":!e.controller.isNarrow(),"dcg-right":e.controller.isNarrow()}},role:a.const("complementary"),"aria-label":a.const("Add Item Menu"),didMount:e.bindFn(e.didMountPopover),didUnmount:e.bindFn(e.didUnmountPopover)},a.createElement("div",{class:a.const("dcg-popover-interior")},a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.t("Add Expression")},onTap:e.bindFn(e.newExpression),handleEvent:a.const("true"),manageFocus:e.const(l.manageFocusHelper({controller:e.controller,location:{type:"add-expression-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-new-expression dcg-expression-icon")}),function(){return e.controller.t("expression")}),a.createElement(u,{predicate:function(){return e.controller.areNotesEnabled()}},function(){return a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.t("Add Note")},onTap:e.bindFn(e.newText),handleEvent:a.const("true")},a.createElement("i",{class:a.const("dcg-icon-new-text dcg-expression-icon")}),function(){return e.controller.t("note")})}),a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.t("Add Table")},onTap:e.bindFn(e.newTable),handleEvent:a.const("true"),manageFocus:e.const(l.manageFocusHelper({controller:e.controller,location:{type:"add-table-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-new-table dcg-expression-icon")}),function(){return e.controller.t("table")}),a.createElement(u,{predicate:function(){return e.controller.areFoldersEnabled()}},function(){return a.createElement("div",{class:a.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),role:a.const("button"),tabindex:a.const(0),"aria-label":function(){return e.controller.t("Add Folder")},onTap:e.bindFn(e.newFolder),handleEvent:a.const("true"),manageFocus:e.const(l.manageFocusHelper({controller:e.controller,location:{type:"add-folder-btn"}}))},a.createElement("i",{class:a.const("dcg-icon-new-folder dcg-expression-icon")}),function(){return e.controller.t("folder")})}),a.createElement(u,{predicate:function(){return e.controller.areImagesEnabled()}},function(){return a.createElement(c.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.controller.t("Add Image")},onFileChange:function(t){return e.insertFiles(t)},location:e.const({type:"add-image-btn"})},a.createElement("div",{class:a.const("dcg-new-item dcg-action-newimage")},a.createElement("i",{class:a.const("dcg-icon-new-image dcg-expression-icon")}),function(){return e.controller.t("image")}))})),a.createElement("span",{class:a.const("dcg-arrow")}))}))},t.prototype.didMountPopover=function(e){var t=this;this.popoverNode=e,s(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",function(e){t.eventShouldClosePopover(e)&&t.controller.dispatch({type:"close-add-expression",focusIconAfterClose:"keyboard"===e.device})}),s(document).on("keydown.add-expression-view",function(e){if("Esc"===r.lookup(e)&&t.controller.dispatch({type:"close-add-expression",focusIconAfterClose:!0}),"Tab"===r.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var n=t.controller.getFocusLocation();if(!n)return;var i=void 0;i=t.controller.areImagesEnabled()?{type:"add-image-btn"}:t.controller.areFoldersEnabled()?{type:"add-folder-btn"}:{type:"add-table-btn"},e.shiftKey||n.type!==i.type?e.shiftKey&&"add-item-btn"===n.type&&(t.controller.dispatch({type:"set-focus-location",location:i}),e.preventDefault(),e.stopPropagation()):(t.controller.dispatch({type:"set-focus-location",location:{type:"add-item-btn"}}),e.preventDefault(),e.stopPropagation())}}),i.IS_IPAD&&i.IS_IN_IFRAME&&s(e).on("dcg-tapstart",function(e){return e.preventDefault()}),s(e).find(".dcg-new-item").on("touchstart",function(e){return e.preventDefault()})},t.prototype.didUnmountPopover=function(){s(document).off(".add-expression-view")},t.prototype.toggleAddExpression=function(e){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:"keyboard"===e.device})},t.prototype.newExpression=function(){this.controller.dispatch({type:"new-expression"})},t.prototype.newText=function(){this.controller.dispatch({type:"new-text"})},t.prototype.newFolder=function(){this.controller.dispatch({type:"new-folder"})},t.prototype.newTable=function(){this.controller.dispatch({type:"new-table"})},t.prototype.insertFiles=function(e){this.controller.dispatch({type:"new-images",files:e})},t.prototype.eventShouldClosePopover=function(e){var t=!!s(e.target).closest(this.popoverNode).length,n=!!s(e.target).closest(this.toggleButtonNode).length;return!(t||n)},t}(a.Class);t.default=d}),define("loadcss!expressions/expressions-header",function(){}),define("expressions/expressions-header",["require","exports","tslib","./add_expression_view","dcgview","lib/tooltip","main/manage-focus-helper","loadcss!./expressions-header"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){return{"dcg-expression-top-bar":!0,"dcg-expressions-scrolled":e.props.expsScrolled()}},role:i.const("toolbar"),"aria-label":function(){return e.controller.t("Expression Bar")},didMount:function(t){e.node=t},onTapStart:this.bindFn(this.clearSelectionOnMobile),style:function(){return{background:e.controller.hasBackgroundColor()?e.controller.getPillboxBackgroundColor():void 0}}},i.createElement("div",{class:i.const("dcg-left-buttons")},i.createElement(s,{predicate:this.bindFn(this.showHamburger)},function(){return i.createElement("span",{class:i.const("dcg-action-opendrawer dcg-tooltip dcg-icon-btn dcg-in-api-action-opendrawer"),handleEvent:i.const("true"),tooltip:function(){return e.controller.t("Open Graph (ctrl+o)")},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.t("Open Graph")},onTap:function(){return e.controller.dispatch({type:"open-drawer"})}},i.createElement("i",{class:i.const("dcg-icon-hamburger")}))}),i.createElement(s,{predicate:function(){return!e.controller.isInEditListMode()}},function(){return i.createElement(r.default,{controller:function(){return e.props.controller()}})}),i.createElement(s,{predicate:this.bindFn(this.showRerandomize)},function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Randomize")},gravity:function(){return e.controller.isNarrow()?"n":"s"}},i.createElement("span",{class:i.const("dcg-icon-btn"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.t("Randomize")},onTap:function(){return e.controller.dispatch({type:"re-randomize"})}},i.createElement("i",{class:i.const("dcg-icon-randomize")})))}),i.createElement(s,{predicate:function(){return e.controller.isInEditListMode()&&!e.controller.hasDefaultState()}},function(){return i.createElement("span",{class:i.const("dcg-btn-red dcg-action-clearall"),role:i.const("button"),tabindex:i.const("0"),onTap:function(){return e.controller.dispatch({type:"clear-graph"})}},function(){return e.controller.t("Delete All")})}),i.createElement(s,{predicate:function(){return e.controller.isInEditListMode()&&e.controller.hasDefaultState()}},function(){return i.createElement("span",{class:i.const("dcg-btn-red dcg-action-reset"),role:i.const("button"),tabindex:i.const("0"),onTap:function(){return e.controller.dispatch({type:"reset-graph"})}},function(){return e.controller.t("Reset")})})),i.createElement("div",{class:i.const("dcg-center-buttons")},i.createElement(o.Tooltip,{tooltip:function(){
return e.controller.t("Undo (ctrl+z)")},gravity:function(){return e.controller.isNarrow()?"n":"s"},disabled:function(){return!e.controller.canUndo()}},i.createElement("span",{class:function(){return{"dcg-action-undo":!0,"dcg-icon-btn":!0,"dcg-disabled":!e.controller.canUndo()}},role:i.const("button"),tabindex:function(){return e.controller.canUndo()?0:-1},"aria-label":function(){return e.controller.t("Undo")},onTap:function(){return e.controller.dispatch({type:"undo"})},"aria-disabled":function(){return!e.controller.canUndo()}},i.createElement("i",{class:i.const("dcg-icon-undo")}))),i.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Redo (ctrl+y)")},gravity:function(){return e.controller.isNarrow()?"n":"s"},disabled:function(){return!e.controller.canRedo()}},i.createElement("span",{class:function(){return{"dcg-action-redo":!0,"dcg-icon-btn":!0,"dcg-disabled":!e.controller.canRedo()}},role:i.const("button"),tabindex:function(){return e.controller.canRedo()?0:-1},"aria-label":function(){return e.controller.t("Redo")},onTap:function(){return e.controller.dispatch({type:"redo"})},"aria-disabled":function(){return!e.controller.canRedo()}},i.createElement("i",{class:i.const("dcg-icon-redo")})))),i.createElement("div",{class:i.const("dcg-right-buttons")},i.createElement(s,{predicate:function(){return!e.controller.isInEditListMode()}},function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Edit List")},gravity:function(){return e.controller.isNarrow()?"n":"s"}},i.createElement("span",{class:i.const("dcg-icon-btn dcg-action-toggle-edit"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.t("Edit Expression List")},onTap:e.bindFn(e.toggleEditListMode),manageFocus:e.const(a.manageFocusHelper({controller:e.controller,location:{type:"edit-list-toggle"}}))},i.createElement("i",{class:i.const("dcg-icon-settings")})))}),i.createElement(s,{predicate:function(){return e.controller.isInEditListMode()}},function(){return i.createElement("span",{class:i.const("dcg-btn-blue dcg-action-toggle-edit dcg-do-not-blur"),handleEvent:i.const("true"),role:i.const("button"),tabindex:i.const("0"),onTap:e.bindFn(e.toggleEditListMode),manageFocus:e.const(a.manageFocusHelper({controller:e.controller,location:{type:"edit-list-toggle"}}))},function(){return e.controller.t("Done")})}),i.createElement(s,{predicate:function(){return!e.controller.isInEditListMode()&&e.controller.getGraphSettings().config.graphpaper}},function(){return i.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Hide Expression List")},gravity:function(){return e.controller.isNarrow()?"nw":"sw"}},i.const(" "),i.createElement("span",{class:function(){return{"dcg-resize-list-btn":!0,"dcg-action-hideexpressions":!0,"dcg-icon-btn":!0,"dcg-rotated":e.controller.isNarrow()}},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.t("Hide Expression List")},onTap:function(){return e.controller.dispatch({type:"hide-expressions-list"})}},i.createElement("i",{class:i.const("dcg-icon-hide")})))})))},t.prototype.showRerandomize=function(){return this.controller.anyItemDependsOnRandomSeed()},t.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&(!this.controller.isInEditListMode()&&!this.controller.isNarrow())},t.prototype.clearSelectionOnMobile=function(e){e.wasHandled()||this.controller.dispatch({type:"set-none-selected"})},t.prototype.toggleEditListMode=function(e){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!this.controller.isInEditListMode(),focusExpressionList:!1}),"keyboard"===e.device&&this.controller.dispatch({type:"set-focus-location",location:{type:"edit-list-toggle"}})},t}(i.Class);t.default=c}),define("main/load-graph-from-link",["require","exports","core/graphing-calc/migrate-state","jquery"],function(e,t,n,r){"use strict";function i(e,t,i,o){var a=!1;e.dispatch({type:"toast/show",toast:{message:e.t("Importing graph..."),hideAfter:0,toastStyle:"cover",onHide:function(){a=!0}}});var s=e.getState(),c=function(){a||e.dispatch({type:"toast/show",toast:{message:e.t("Error importing graph. Check the URL?"),toastStyle:"error",hideAfter:12e3}})},l=function(e){if(!e||!e.expressions||!e.expressions.list)return!1;for(var t=e.expressions.list,n=0;n<t.length;n++)if("folder"===t[n].type)return!1;return!0},u=function(t,n){if(!a){var r=e.getSelectedItem();if(!l(t))return void e.dispatch({type:"toast/show",toast:{message:e.t("Only graphs without folders can be inserted into a folder."),toastStyle:"error",hideAfter:12e3}});r&&e.dispatch({type:"set-folder-title",id:r.id,title:n}),t.expressions.list.forEach(function(t){t.id=e.generateId()}),e.dispatch({type:"insert-several-expressions",expressions:t.expressions.list}),e.dispatch({type:"toast/show",toast:{message:e.t("Graph imported!")}})}},d=function(t){a||(e.dispatch({type:"set-state",state:t}),e.dispatch({type:"toast/show",toast:{message:e.t("Graph imported!"),undoCallback:function(){e.dispatch({type:"set-state",state:s})}}}))};r.getJSON(t).done(function(e){var t=n.migrateToLatest(e.state);o(t,function(t,n){t||!n?c():"set-state"===i?d(n):u(n,e.title)})}).fail(c)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}),define("lib/get-clipboard-data",["require","exports"],function(e,t){"use strict";function n(e){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):e&&e.clipboardData&&e.clipboardData.getData?e.clipboardData.getData("text/plain"):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("loadcss!expressions/exp-list-resizer",function(){}),define("expressions/exp-list-resizer",["require","exports","tslib","dcgview","jquery","underscore","loadcss!./exp-list-resizer"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpListResizer=void 0;var a=r.Components.If,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.guid=o.uniqueId("dcg-exp-list-resize")},t.prototype.template=function(){var e=this;return r.createElement(a,{predicate:this.bindFn(this.isVisible)},function(){return r.createElement("div",{class:r.const("dcg-exp-list-resizer"),onTapStart:e.bindFn(e.onTapStart)})})},t.prototype.isVisible=function(){return!this.props.controller().expressionsAreFullWidth()&&this.props.controller().isListVisible()},t.prototype.onTapStart=function(e){var t=this;this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=e.changedTouches[0].clientX,i(document).on("dcg-tapmove."+this.guid,function(e){if(void 0!==t.initialLeft&&void 0!==t.initialWidth){var n=e.changedTouches[0].clientX-t.initialLeft+t.initialWidth;t.props.controller().dispatch({type:"resize-exp-list",expListWidth:n})}}),i(document).on("dcg-tapend."+this.guid,this.bindFn(this.onTapEnd)),i(document).on("dcg-tapcancel."+this.guid,this.bindFn(this.onTapEnd))},t.prototype.onTapEnd=function(){i(document).off("."+this.guid),this.initialLeft=void 0,this.initialWidth=void 0},t}(r.Class);t.ExpListResizer=s}),define("loadcss!expressions/color-menu",function(){}),define("expressions/color-menu",["require","exports","tslib","dcgview","underscore","core/lib/color-helpers","expressions/colors","./circular-icon-view","loadcss!./color-menu"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components,l=c.For,u=c.If,d=c.Input,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.inputColor=this.props.selectedColor()},t.prototype.template=function(){var e=this;return r.createElement("div",null,r.createElement(l,{each:function(){return i.values(e.controller.getColors())}},r.createElement("div",{class:r.const("dcg-color-menu dcg-do-not-blur")},function(t){return r.createElement("span",{class:r.const("dcg-color-option"),handleevent:r.const("true"),role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return a.getColorName(e.controller,t)},"aria-pressed":function(){return e.props.selectedColor()===t},onTap:function(){e.inputColor=t,e.props.onColorSelected(t)}},r.createElement(s.CircularIconView,{iconType:function(){return e.props.selectedColor()===t?"check":"none"},backgroundColor:function(){return t}}))})),r.createElement(u,{predicate:function(){return e.controller.canUseAdvancedStyling()}},function(){return r.createElement("div",{class:r.const("dcg-advanced-color-styling")},r.const("Hex:"),r.createElement(d,{class:function(){return{"dcg-error":!o.isValidHexColor(e.inputColor)}},value:function(){return e.inputColor},onInput:function(t){e.inputColor=t,o.isValidHexColor(t)&&e.props.onColorSelected(t)},onBlur:function(){e.inputColor=e.props.selectedColor()}}))}))},t}(r.Class);t.default=p}),define("loadcss!expressions/toggle-view",function(){}),define("expressions/toggle-view",["require","exports","tslib","dcgview","loadcss!./toggle-view"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-toggle-view":!0,"dcg-toggled":e.props.toggled()}},"aria-label":function(){return e.props.ariaLabel()},role:r.const("checkbox"),tabindex:r.const("0"),"aria-checked":function(){return e.props.toggled()},toggled:function(){return e.props.toggled()},onTap:this.bindFn(this.props.onChange)},r.createElement("div",{class:r.const("dcg-toggle-switch")}))},t}(r.Class);t.default=i}),define("core/types/line-width",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THICK=t.DEFAULT=t.THIN=void 0,t.THIN=1,t.DEFAULT=2.5,t.THICK=5}),define("core/types/line-opacity",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIGH=t.DEFAULT=t.LOW=void 0,t.LOW=.5,t.DEFAULT=.7,t.HIGH=.9}),define("expressions/expression_options_view",["require","exports","tslib","dcgview","underscore","core/lib/dragmode","./color-menu","core/math/expression-types","graphing-calc/models/expression","core/types/styles","expressions/toggle-view","dcgview-helpers/checkbox","./circular-icon-view","lib/aria","dcgview-helpers/mathquill-view","core/types/opacity","core/types/line-width","core/types/line-opacity"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionOptionsMenuView=void 0;var v=r.Components,b=v.For,x=v.If,E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-exp-options-menu":!0,"dcg-options-menu":!0,"dcg-colors-only":0===e.sections().length}},role:r.const("group"),"aria-label":function(){return e.controller.t("Options Menu")},didMount:function(){h.alert(e.controller.t("Options menu open."))},didUnmount:function(){h.alert(e.controller.t("Options menu closed."))}},r.createElement("div",{class:r.const("dcg-triangle")}),r.createElement("div",{class:r.const("dcg-options-menu-column-left")},r.createElement(x,{predicate:function(){return e.sections().indexOf("pointStyles")>=0}},function(){return r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section dcg-styles-section")},r.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":e.hasNextSection("pointStyles")}},role:r.const("group"),"aria-label":function(){return e.controller.t("Point Style Options")}},r.createElement("span",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-toggle-title")},function(){return e.shouldPreventPointsToggle()?e.controller.t("Style"):e.controller.t("Points")}),r.createElement(x,{predicate:function(){return!e.shouldPreventPointsToggle()}},function(){return r.createElement(u.default,{ariaLabel:function(){return e.controller.t("Points")},toggled:function(){return e.getDisplayProps().points},onChange:e.bindFn(e.onTogglePoints)})}),r.createElement(x,{predicate:function(){return e.getDisplayProps().points||e.shouldPreventPointsToggle()}},function(){return r.createElement(b,{each:e.bindFn(e.getValidPointStyles)},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("div",{class:r.const("dcg-style-icon-container"),onTap:function(){return e.onPointStyleSelected(t)},role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return t},"aria-pressed":function(){return e.model.pointStyle!==t}},r.createElement(p.CircularIconView,{backgroundColor:function(){return e.model.color},semiTransparent:function(){return e.model.pointStyle!==t},iconType:function(){return"CROSS"===t?"point-cross":"OPEN"===t?"point-open":"point-default"}}))}))})))}),r.createElement(x,{predicate:function(){return e.sections().indexOf("pointSizes")>=0}},function(){return r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section dcg-sizes-section")},r.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":e.hasNextSection("pointSizes")}},role:r.const("group"),"aria-label":function(){return e.controller.t("Size Options")}},r.createElement("span",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-toggle-title")},function(){return e.controller.t("Size")}),r.createElement(b,{each:e.bindFn(e.getValidPointSizes)},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("div",{class:r.const("dcg-style-icon-container"),onTap:function(){return e.onDotplotPointSizeSelected(t)},role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return t},"aria-pressed":function(){return e.model.vizProps.dotplotSize!==t}},r.createElement(p.CircularIconView,{backgroundColor:function(){return e.model.color},semiTransparent:function(){return e.model.vizProps.dotplotSize!==t},iconType:function(){return"CROSS"===e.model.pointStyle?"point-cross":"OPEN"===e.model.pointStyle?"point-open":"point-default"},iconModifier:function(){return"medium"===t?"medium":"large"===t?"large":"small"}}))}))))}),r.createElement(x,{predicate:function(){return e.sections().indexOf("lineStyles")>=0}},function(){return r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section dcg-lines-menu")},r.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":e.hasNextSection("lineStyles")}},role:r.const("group"),"aria-label":function(){return e.controller.t("Line Style Options")}},r.createElement("span",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-toggle-title")},function(){return e.shouldShowLinesToggle()?e.controller.t("Lines"):e.controller.t("Style")}),r.createElement(x,{predicate:function(){return e.shouldShowLinesToggle()}},function(){return r.createElement(u.default,{ariaLabel:function(){return e.controller.t("Lines")},toggled:function(){return e.getDisplayProps().lines},onChange:e.bindFn(e.onToggleLines)})}),r.createElement(x,{predicate:function(){return e.shouldShowLineStyles()}},function(){return r.createElement(b,{each:e.bindFn(e.getValidLineStyles)},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("div",{class:r.const("dcg-style-icon-container"),onTap:function(){return e.onLineStyleSelected(t)},role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return t},"aria-pressed":function(){return e.model.lineStyle!==t}},r.createElement(p.CircularIconView,{backgroundColor:function(){return e.model.color},semiTransparent:function(){return e.model.lineStyle!==t},iconType:function(){return"DOTTED"===t?"graph-dotted":"DASHED"===t?"graph-dashed":"graph-default"}}))}))}),r.createElement(x,{predicate:function(){return e.shouldShowLineStyles()&&e.controller.canUseAdvancedStyling()&&!e.isRegresssion()}},function(){return r.createElement("div",null,r.createElement("div",{class:r.const("dcg-variable-width")},r.const("Width:"),r.createElement(f.default,{latex:function(){return e.model.lineWidth},placeholder:function(){return""+g.DEFAULT},isFocused:function(){return"linewidth"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.const({}),getAriaLabel:function(){return e.controller.t("Line Width: ")},getAriaPostLabel:e.const(""),hasError:function(){return!c.isLineWidthValid(e.model)},onUserChangedLatex:function(t){return e.dispatchLineWidthLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"linewidth")},dataLabelAttributeValue:e.const("line-width")})),r.createElement("div",{class:r.const("dcg-variable-line-opacity")},r.const("Opacity:"),r.createElement(f.default,{latex:function(){return e.model.lineOpacity},placeholder:function(){return""+y.DEFAULT},isFocused:function(){return"lineopacity"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.const({}),getAriaLabel:function(){return e.controller.t("Line Opacity: ")},getAriaPostLabel:e.const(""),hasError:function(){return!c.isLineOpacityValid(e.model)},onUserChangedLatex:function(t){return e.dispatchLineOpacityLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"lineopacity")},dataLabelAttributeValue:e.const("line-opacity")})))})))}),r.createElement(x,{predicate:function(){return e.sections().indexOf("dragModes")>=0}},function(){return r.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":e.hasNextSection("dragModes")}},role:r.const("group"),"aria-label":function(){return e.controller.t("Drag Options")}},r.createElement("div",{class:r.const("dcg-drag-menu")},r.createElement("span",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-toggle-title")},function(){return e.controller.t("Drag")}),r.createElement(u.default,{ariaLabel:function(){return e.controller.t("Drag")},toggled:function(){return e.model.reconciledDragMode!==o.DragMode.NONE},onChange:e.bindFn(e.onToggleDrag)}),r.createElement(x,{predicate:function(){return e.model.reconciledDragMode!==o.DragMode.NONE}},function(){return r.createElement(b,{each:function(){return e.getUIDragModes()}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("div",{class:function(){return{"dcg-style-icon-container":!0,"dcg-disabled":e.isDisabled(t)}},onTap:function(){return e.onDragModeSelected(t)},role:r.const("button"),tabindex:function(){return e.isDisabled(t)?-1:0},"aria-label":function(){return t},"aria-pressed":function(){return e.model.reconciledDragMode!==t}},r.createElement(p.CircularIconView,{backgroundColor:function(){return e.isDisabled(t)?"#bbb":e.model.color},semiTransparent:function(){return e.model.reconciledDragMode!==t},iconType:function(){return"X"===t?"movable-horizontal":"Y"===t?"movable-vertical":"movable-both"}}))}))})))}),r.createElement(x,{predicate:function(){return e.sections().indexOf("isFillable")>=0}},function(){return r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-styles-menu")},r.createElement(d.Checkbox,{checked:function(){return e.getDisplayProps().fill},onChange:e.bindFn(e.onToggleFill),ariaLabel:function(){return e.controller.t("Fill")}},function(){return e.controller.t("Fill")}),r.createElement(x,{predicate:function(){return e.getDisplayProps().fill&&e.controller.canUseAdvancedStyling()}},function(){return r.createElement("div",{class:r.const("dcg-variable-opacity")},r.const("Opacity:"),r.createElement(f.default,{latex:function(){return e.model.fillOpacity},placeholder:function(){return""+m.DEFAULT},isFocused:function(){return"opacity"===e.getFocusedInput()},capExpressionSize:function(){return!!e.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:e.const(!0),config:e.const({}),getAriaLabel:function(){return e.controller.t("Fill Opacity: ")},getAriaPostLabel:e.const(""),hasError:function(){return!c.isFillOpacityValid(e.model)},onUserChangedLatex:function(t){return e.dispatchOpacityLatexIfChanged(t)},onExpressionSizeExceeded:function(){return e.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(t){return e.handleFocusedChanged(t,"opacity")},dataLabelAttributeValue:e.const("fill-opacity"),needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()}}))})))}),r.createElement(x,{predicate:function(){return e.sections().indexOf("isClickable")>=0}},function(){return r.createElement("div",null,r.createElement(d.Checkbox,{checked:function(){return!!e.model.clickableInfo.enabled},onChange:function(t){e.controller.dispatch({type:"set-clickableinfo-prop",id:e.model.id,prop:"enabled",value:t})},ariaLabel:function(){return e.controller.t("Clickable")}},function(){return e.controller.t("Clickable")}))})),r.createElement("div",{class:r.const("dcg-options-menu-column-right")},r.createElement("div",{class:r.const("dcg-colors-div dcg-options-menu-section"),role:r.const("group"),"aria-label":function(){return e.controller.t("Color Options")}},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-title")},function(){return e.controller.t("Color")}),r.createElement(a.default,{controller:function(){return e.props.controller()},selectedColor:function(){return e.model.color},onColorSelected:this.bindFn(this.onColorSelected)}))))},t.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"expression-menu"===e.type&&e.id===this.id)return e.location},t.prototype.handleFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:this.id,location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:this.id,location:t}})},t.prototype.dispatchOpacityLatexIfChanged=function(e){this.model.fillOpacity!==e&&this.controller.dispatch({type:"set-item-fillopacity",id:this.id,fillOpacity:e})},t.prototype.dispatchLineOpacityLatexIfChanged=function(e){this.model.lineOpacity!==e&&this.controller.dispatch({type:"set-item-lineopacity",id:this.id,lineOpacity:e})},t.prototype.dispatchLineWidthLatexIfChanged=function(e){this.model.lineWidth!==e&&this.controller.dispatch({type:"set-item-linewidth",id:this.id,lineWidth:e})},t.prototype.hasNextSection=function(e){var t=this.sections();return t.indexOf(e)<t.length-1},t.prototype.sections=function(){if(c.isToplevelDistribution(this.model))return[];var e=[];return this.getValidPointStyles().length>0&&e.push("pointStyles"),this.shouldShowDotplotPointSizes()&&e.push("pointSizes"),this.getValidLineStyles().length>0&&!c.isSinglePoint(this.model)&&e.push("lineStyles"),this.getUIDragModes().length>0&&e.push("dragModes"),(c.isPolygon(this.model)||c.isParametric(this.model))&&e.push("isFillable"),this.shouldShowClickable()&&e.push("isClickable"),e},t.prototype.getValidPointStyles=function(){return c.isPointOrPointList(this.model)||c.isDotPlot(this.model)?[l.PointStyle.POINT,l.PointStyle.OPEN,l.PointStyle.CROSS]:[]},t.prototype.getValidPointSizes=function(){return c.isDotPlot(this.model)?["small","medium","large"]:[]},t.prototype.shouldShowDotplotPointSizes=function(){return this.getValidPointSizes().length>0},t.prototype.shouldShowClickable=function(){return!!this.controller.canAuthorClickableObjects()&&c.isClickableAllowed(this.model)},t.prototype.getUIDragModes=function(){return this.model.formula.move_strategy?[o.DragMode.X,o.DragMode.Y,o.DragMode.XY]:[]},t.prototype.getValidLineStyles=function(){return c.isVisualization(this.model)?[]:this.model.formula.is_inequality||c.isSinglePoint(this.model)?[]:[l.LineStyle.SOLID,l.LineStyle.DASHED,l.LineStyle.DOTTED]},t.prototype.shouldPreventPointsToggle=function(){return c.isSinglePoint(this.model)||c.isDotPlot(this.model)},t.prototype.onToggleFill=function(){this.controller.dispatch({type:"set-item-fill",id:this.id,fill:!this.getDisplayProps().fill})},t.prototype.onColorSelected=function(e){this.controller.dispatch({type:"set-item-color",id:this.id,color:e})},t.prototype.shouldShowLinesToggle=function(){return c.isPointOrPointList(this.model)||c.isParametric(this.model)||c.isPolygon(this.model)},t.prototype.shouldShowLineStyles=function(){return this.getDisplayProps().lines||!this.shouldShowLinesToggle()},t.prototype.onTogglePoints=function(){this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.getDisplayProps().points})},t.prototype.onPointStyleSelected=function(e){this.model.pointStyle!==e&&this.controller.dispatch({type:"set-item-pointstyle",id:this.id,pointStyle:e})},t.prototype.onDotplotPointSizeSelected=function(e){this.model.vizProps.dotplotSize!==e&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"dotplotSize",latex:e})},t.prototype.onToggleLines=function(){this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.getDisplayProps().lines})},t.prototype.onLineStyleSelected=function(e){this.model.lineStyle!==e&&this.controller.dispatch({type:"set-item-linestyle",id:this.id,lineStyle:e})},t.prototype.isDisabled=function(e){var t=this.controller.getEnabledDragModesForItem(this.id);return!i.contains(t,e)},t.prototype.getDragMode=function(){return this.model.reconciledDragMode||this.model.dragMode},t.prototype.getDisplayProps=function(){var e=this.model,t=e.points,n=e.lines,r=e.fill;return s.getReconciledExpressionProps(this.model.formula.expression_type,{points:t,lines:n,fill:r})},t.prototype.onToggleDrag=function(){var e=this.model.reconciledDragMode!==o.DragMode.NONE?o.DragMode.NONE:o.DragMode.XY;this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})},t.prototype.onDragModeSelected=function(e){this.isDisabled(e)||this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})},t.prototype.isRegresssion=function(){return this.model.formula&&this.model.formula.is_regression},t}(r.Class);t.ExpressionOptionsMenuView=E}),define("expressions/image_options_view",["require","exports","tslib","dcgview","dcgview-helpers/checkbox","./circular-icon-view","./image-upload-view","lib/coerce-url"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageOptionsView=void 0;var c=r.Components,l=c.For,u=c.If,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-exp-options-menu dcg-image-options-menu dcg-options-menu")},r.createElement("div",{class:r.const("dcg-triangle")}),r.createElement("div",{class:r.const("dcg-opacities-menu dcg-dividing-line-after")},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-title")},function(){return e.controller.t("Opacity")}),r.createElement(l,{each:function(){return e.controller.getImageOpacities()}},r.createElement("div",{class:r.const("dcg-opacities-menu"),role:r.const("group"),"aria-label":function(){return e.controller.t("Opacity")}},function(t){return r.createElement("span",{class:r.const("dcg-opacity-option"),role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return"opacity: "+t},"aria-pressed":function(){return e.isOpacitySelected(t)},handleevent:r.const("true"),onTap:function(){return e.onSelectOpacity(t)}},r.createElement(o.CircularIconView,{backgroundImage:e.bindFn(e.getBackgroundImage),iconType:function(){return e.isOpacitySelected(t)?"check":"none"},backgroundOpacity:function(){return parseFloat(t)}}))}))),r.createElement("div",{class:r.const("dcg-styles-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-styles-menu"),role:r.const("group"),"aria-label":function(){return e.controller.t("Styles")}},r.createElement(i.Checkbox,{checked:function(){return!e.model.foreground},onChange:this.bindFn(this.onToggleForeground),ariaLabel:function(){return e.controller.t("Place behind graphs")}},function(){return e.controller.t("Place behind graphs")})),r.createElement(u,{predicate:this.bindFn(this.shouldShowClickable)},function(){return r.createElement("div",null,r.createElement(i.Checkbox,{checked:function(){return!!e.model.clickableInfo.enabled},onChange:function(t){e.controller.dispatch({type:"set-clickableinfo-prop",id:e.model.id,prop:"enabled",value:t})},ariaLabel:function(){return e.controller.t("Clickable")}},function(){return e.controller.t("Clickable")}))}),r.createElement(u,{predicate:function(){return e.controller.canUseAdvancedStyling()}},function(){return r.createElement(a.ImageUploadView,{controller:function(){return e.controller},ariaLabel:function(){return e.controller.t("Change Image")},onFileChange:function(t){return e.insertFiles(t)},location:e.const({type:"change-image-btn",id:e.id})},r.createElement("div",{class:r.const("dcg-action-changeimage")},function(){return e.controller.t("Change Image")}))})))},t.prototype.onToggleForeground=function(e){this.controller.dispatch({type:"set-image-in-foreground",id:this.id,foreground:!e})},t.prototype.onSelectOpacity=function(e){this.controller.dispatch({type:"set-image-opacity",id:this.id,opacity:e})},t.prototype.isOpacitySelected=function(e){return this.model.opacity===e},t.prototype.insertFiles=function(e){this.controller.dispatch({type:"change-image",files:e,id:this.id})},t.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL?this.lastEncodedURL:(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+s.coerceURL(this.model.image_url)+'")',this.lastEncodedURL)},t.prototype.shouldShowClickable=function(){return!!this.controller.canAuthorClickableObjects()},t}(r.Class);t.ImageOptionsView=d}),define("expressions/tables/table_column_menu_view",["require","exports","tslib","dcgview","expressions/color-menu","core/lib/dragmode","core/types/styles","expressions/toggle-view","../circular-icon-view"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableColumnMenuView=void 0;var l=r.Components,u=l.For,d=l.If,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.columnId=this.model.id,this.tableModel=this.model.table,this.tableId=this.tableModel.id,r.createElement("div",{class:r.const("dcg-table-column-menu dcg-options-menu")},r.createElement("div",{class:r.const("dcg-triangle")}),r.createElement("div",{class:r.const("dcg-options-menu-column-left")},r.createElement("div",{class:r.const("dcg-options-menu-section")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Points")}),r.createElement(s.default,{ariaLabel:function(){return e.controller.t("Points")},toggled:function(){return e.model.points},onChange:function(){return e.onTogglePoints(!e.model.points)}}),r.createElement(d,{predicate:function(){return e.model.points}},function(){return r.createElement(u,{each:function(){return e.controller.getPointStyles()}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("div",{class:r.const("dcg-style-icon-container"),onTap:function(){
return e.onPointStyleSelected(t)}},r.createElement(c.CircularIconView,{backgroundColor:function(){return e.model.color},semiTransparent:function(){return e.model.pointStyle!==t},iconType:function(){return"CROSS"===t?"point-cross":"OPEN"===t?"point-open":"point-default"}}))}))})),r.createElement("div",{class:r.const("dcg-options-menu-section")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Lines")}),r.createElement(s.default,{ariaLabel:function(){return e.controller.t("Lines")},toggled:function(){return e.model.lines},onChange:function(){return e.onToggleLines(!e.model.lines)}}),r.createElement(d,{predicate:function(){return e.model.lines}},function(){return r.createElement("div",{class:r.const("dcg-line-options")},r.createElement(u,{each:function(){return e.controller.getLineStyles()}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("div",{class:r.const("dcg-style-icon-container"),onTap:function(){return e.onLineStyleSelected(t)}},r.createElement(c.CircularIconView,{backgroundColor:function(){return e.model.color},semiTransparent:function(){return e.model.lineStyle!==t},iconType:function(){return"DOTTED"===t?"graph-dotted":"DASHED"===t?"graph-dashed":"graph-default"}}))})))})),r.createElement(d,{predicate:function(){return e.model.draggable}},function(){return r.createElement("div",{class:r.const("dcg-drag-div dcg-options-menu-section")},r.createElement("span",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Drag")}),r.createElement(s.default,{ariaLabel:function(){return e.controller.t("Drag")},toggled:function(){return e.model.dragMode!==o.DragMode.NONE},onChange:function(){return e.onToggleDrag()}}),r.createElement(d,{predicate:function(){return e.model.dragMode!==o.DragMode.NONE}},function(){return r.createElement(u,{each:function(){return e.controller.getUIDragModes()}},r.createElement("div",{class:r.const("dcg-style-icons")},function(t){return r.createElement("div",{class:r.const("dcg-style-icon-container"),onTap:function(){return e.onDragModeSelected(t)}},r.createElement(c.CircularIconView,{backgroundColor:function(){return e.model.color},semiTransparent:function(){return e.model.dragMode!==t},iconType:function(){return"X"===t?"movable-horizontal":"Y"===t?"movable-vertical":"movable-both"}}))}))}))})),r.createElement("div",{class:r.const("dcg-options-menu-column-right")},r.createElement("div",{class:r.const("dcg-colors-div dcg-options-menu-section")},r.createElement("div",{class:r.const("dcg-toggle-title")},function(){return e.controller.t("Color")}),r.createElement(i.default,{controller:function(){return e.props.controller()},selectedColor:function(){return e.model.color},onColorSelected:this.bindFn(this.onColorSelected)}))))},t.prototype.getPointStyleClass=function(e){switch(e){case a.PointStyle.CROSS:return"dcg-graph-CROSS";case a.PointStyle.OPEN:return"dcg-graph-OPEN";default:return"dcg-graph-POINT"}},t.prototype.getLineStyleClass=function(e){switch(e){case a.LineStyle.DASHED:return"dcg-graph-DASHED";case a.LineStyle.DOTTED:return"dcg-graph-DOTTED";default:return"dcg-graph-SOLID"}},t.prototype.onColorSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-color",tableId:this.tableId,columnId:this.columnId,color:e})},t.prototype.onTogglePoints=function(e){this.controller.dispatch({type:"set-tablecolumn-points",tableId:this.tableId,columnId:this.columnId,bool:e})},t.prototype.onPointStyleSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-pointstyle",tableId:this.tableId,columnId:this.columnId,pointStyle:e})},t.prototype.onToggleLines=function(e){this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.tableId,columnId:this.columnId,bool:e})},t.prototype.onLineStyleSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.tableId,columnId:this.columnId,lineStyle:e})},t.prototype.onToggleDrag=function(){var e=this.columnId,t=this.tableId,n=this.model.dragMode===o.DragMode.NONE?o.DragMode.XY:o.DragMode.NONE;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:t,columnId:e,dragMode:n})},t.prototype.onDragModeSelected=function(e){var t=this.columnId,n=this.tableId;this.model.dragMode!==e&&this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:n,columnId:t,dragMode:e})},t}(r.Class);t.TableColumnMenuView=p}),define("loadcss!expressions/slider-speed-view",function(){}),define("expressions/slider_speed_view",["require","exports","tslib","underscore","lib/aria","dcgview","core/graphing-calc/json/expression","loadcss!./slider-speed-view"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],c=r.min(s),l=r.max(s),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},t.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:o.const("true")},o.createElement("span",{class:function(){return{"dcg-action-slower":!0,"dcg-disabled":e.isSlowerDisabled()}},onTap:function(){return e.animateSlower()},role:o.const("button"),"aria-label":function(){return e.getSlowerAriaLabel()},tabindex:function(){return e.isSlowerDisabled()?-1:0},"aria-disabled":function(){return e.isSlowerDisabled()}},o.createElement("i",{class:o.const("dcg-icon-show")})),o.createElement("span",{class:o.const("dcg-variable-speed")},this.bindFn(this.computeSpeed),o.const("x")),o.createElement("span",{class:function(){return{"dcg-action-faster":!0,"dcg-disabled":e.isFasterDisabled()}},onTap:function(){return e.animateFaster()},role:o.const("button"),"aria-label":function(){return e.getFasterAriaLabel()},tabindex:function(){return e.isFasterDisabled()?-1:0},"aria-disabled":function(){return e.isFasterDisabled()}},o.createElement("i",{class:o.const("dcg-icon-show")})))},t.prototype.computeSpeed=function(){var e=a.DEFAULT_SLIDER_PERIOD/this.model.slider.animationPeriod;return e=Number(e.toFixed(3))},t.prototype.isSlowerDisabled=function(){return c>=this.computeSpeed()},t.prototype.isFasterDisabled=function(){return l<=this.computeSpeed()},t.prototype.animateSlower=function(){var e=this.computeSpeed(),t=r.filter(s,function(t){return t<e});0!==t.length&&this.setPeriodFromSpeed(r.max(t))},t.prototype.animateFaster=function(){var e=this.computeSpeed(),t=r.filter(s,function(t){return t>e});0!==t.length&&this.setPeriodFromSpeed(r.min(t))},t.prototype.setPeriodFromSpeed=function(e){var t=a.DEFAULT_SLIDER_PERIOD/e;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:t}),i.alert(this.controller.t("Animating at __speed__x",{speed:e+""}))},t.prototype.getSlowerAriaLabel=function(){return this.controller.t("Animate Slower")},t.prototype.getFasterAriaLabel=function(){return this.controller.t("Animate Faster")},t}(o.Class);t.default=u}),define("loadcss!expressions/slider-options-view",function(){}),define("expressions/slider-options-view",["require","exports","tslib","dcgview","core/types/slider-loop-modes","../lib/tooltip","./slider_speed_view","loadcss!toggle","loadcss!./slider-options-view"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderOptionsView=void 0;var s=r.Components.For,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-exp-options-menu dcg-slider-options-view dcg-options-menu")},r.createElement("div",{class:r.const("dcg-triangle")}),r.createElement("div",{class:r.const("dcg-slider-menu")},r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.controller.t("Animation Mode")}},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-title")},function(){return e.controller.t("Animation Mode")}),r.createElement(s,{each:this.bindFn(this.getAnimationOptions),key:function(e){return e.key}},r.createElement("div",{class:r.const("dcg-toggle")},function(t){return r.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":e.isSelected(t.key)}},role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return t.aria},"aria-pressed":function(){return e.isSelected(t.key)},onTap:function(){return e.props.controller().dispatch({type:"set-slider-loopmode",id:e.props.model().id,loopMode:t.key})}},r.createElement(o.Tooltip,{tooltip:function(){return t.aria},offset:function(){return{top:5}},gravity:e.getAnimationOptionTooltipGravity(t)},r.createElement("i",{class:function(){return i.getSliderIcon(t.key)}})))})))),r.createElement("div",{class:r.const("dcg-slider-menu dcg-slider-speed-menu"),role:r.const("group"),"aria-label":function(){return e.controller.t("Speed")}},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("2"),class:r.const("dcg-title")},function(){return e.controller.t("Speed")}),r.createElement("div",{class:r.const("dcg-slider-speed-container")},r.createElement(a.default,n.__assign({},this.props)))))},t.prototype.getAnimationOptionTooltipGravity=function(e){return this.getAnimationOptions()[0].key===e.key?this.const("se"):this.const("s")},t.prototype.getAnimationOptions=function(){return[{key:i.SliderLoopMode.LOOP_FORWARD_REVERSE,aria:this.controller.t("Loop forwards and backwards")},{key:i.SliderLoopMode.LOOP_FORWARD,aria:this.controller.t("Repeat in one direction")},{key:i.SliderLoopMode.PLAY_ONCE,aria:this.controller.t("Play once")},{key:i.SliderLoopMode.PLAY_INDEFINITELY,aria:this.controller.t("Play indefinitely")}]},t.prototype.isSelected=function(e){return this.model.slider.loopMode===e},t}(r.Class);t.SliderOptionsView=c}),define("loadcss!expressions/item-settings-view",function(){}),define("expressions/item-settings-view",["require","exports","tslib","dcgview","keys","underscore","jquery","./expression_options_view","./image_options_view","./tables/table_column_menu_view","./slider-options-view","lib/animation-frame","loadcss!./item-settings-view"],function(e,t,n,r,i,o,a,s,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemSettingsView=void 0;var p=r.Components.Switch,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement(p,{key:this.bindFn(this.getActiveGuid)},function(){var t=e.controller.getOpenItemMenu();return t?"expression"===t.type?r.createElement("div",{class:r.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},r.createElement(s.ExpressionOptionsMenuView,{controller:e.props.controller,model:function(){return t.model}})):"image"===t.type?r.createElement("div",{class:r.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},r.createElement(c.ImageOptionsView,{controller:e.props.controller,model:function(){return t.model}})):"table-column"===t.type?r.createElement("div",{class:r.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},r.createElement(l.TableColumnMenuView,{controller:e.props.controller,model:function(){return t.model}})):"slider"===t.type?r.createElement("div",{class:r.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},r.createElement(u.SliderOptionsView,{controller:e.props.controller,model:function(){return t.model}})):t:r.createElement("span",null)})},t.prototype.getActiveGuid=function(){var e=this.controller.getOpenItemMenu();if(e)return e.model.guid},t.prototype.getActiveIcon=function(){var e=this.controller.getOpenItemMenu();if(e)return a(e.icon)},t.prototype.didMountView=function(e){var t=this;this.guid=o.uniqueId("dcg-item-settings-view"),this.openView=e,this.positionMenu(),this.moveFocusIfAppropriate(),a(document).on("keydown."+this.guid,function(e){var n=i.lookup(e);"Esc"===n?(t.focusIcon(),t.hideOptions()):"Tab"!==n||e.altKey||e.ctrlKey||e.metaKey||(e.shiftKey?e.shiftKey&&(t.isIconModelFocused()?(e.preventDefault(),e.stopPropagation(),t.focusLastOption()):t.isFirstOptionViewFocused()?(e.preventDefault(),e.stopPropagation(),t.focusIcon()):t.focusAnywhere()):t.isIconModelFocused()?(e.preventDefault(),e.stopPropagation(),t.focusFirstOption()):t.isLastOptionViewFocused()?(e.preventDefault(),e.stopPropagation(),t.focusIcon()):t.focusAnywhere())}),d.requestAnimationFrame(function(){if(t.openView){t.controller.getExppanelSelectorOrThrow().on("scroll."+t.guid,function(){t.hideOptions()})}}),a(document).on("dcg-tapstart."+this.guid,function(e){if(t.openView){var n=a(e.target);if(!n.closest(t.getActiveIcon()).length){if(n.closest(t.openView).length){if(!n.is(':input, [role="textbox"], [tabindex="0"]:visible'))return;var r=t.getDOMTabStops(),i=r.$first,o=r.$last;return void(void 0!==i&&i.is(n)?t.focusFirstOption():void 0!==o&&o.is(n)?t.focusLastOption():e.target.hasAttribute("dataLabelAttributeValue")||"fill-opacity"===e.target.getAttribute("dataLabelAttributeValue")||t.focusAnywhere())}n.closest(".dcg-keypad,.dcg-show-keypad-container").length||t.hideOptions()}}})},t.prototype.didUnmountView=function(){a(document).off("."+this.guid),this.openView=void 0},t.prototype.didUpdate=function(){this.moveFocusIfAppropriate()},t.prototype.moveFocusIfAppropriate=function(){var e=this.getDOMTabStops(),t=e.$first,n=e.$last;void 0!==t&&void 0!==n&&(this.shouldMoveFocusToFirstOption()?t.focus():this.shouldMoveFocusToLastOption()&&n.focus())},t.prototype.open=function(){return!!this.controller.getOpenItemMenu()},t.prototype.hideOptions=function(){this.open()&&this.controller.dispatch({type:"close-item-settings-menu"})},t.prototype.positionMenu=function(){var e=this.getActiveIcon();if(e&&this.openView){var t=this.controller.getExppanelSelectorOrThrow(),n=e.offset(),r={top:n.top-t.closest(".dcg-container").offset().top,left:n.left-t.closest(".dcg-container").offset().left};a(this.openView).css({top:r.top+"px",left:r.left+"px",display:"block"})}},t.prototype.isIconModelFocused=function(){var e=this.controller.getOpenItemMenu();return void 0!==e&&("slider"===e.type?this.controller.isFocusLocationFocused({type:"slider-animation-properties-icon",id:e.model.id}):"image"===e.type?this.controller.isFocusLocationFocused({type:"image-icon",id:e.model.id}):this.controller.isFocusLocationFocused({type:"expression-icon",id:e.model.id}))},t.prototype.focusIcon=function(){var e=this.controller.getOpenItemMenu();e&&("slider"===e.type?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:e.model.id}}):"image"===e.type?this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:e.model.id}}):this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:e.model.id}}))},t.prototype.isFirstOptionViewFocused=function(){var e=this.getDOMTabStops().$first;return void 0!==e&&e.is(":focus")},t.prototype.shouldMoveFocusToFirstOption=function(){var e=this.controller.getOpenItemMenu();return void 0!==e&&!this.isFirstOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:e.model.id,location:"start"})},t.prototype.focusFirstOption=function(){var e=this.controller.getOpenItemMenu();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:e.model.id,location:"start"}})},t.prototype.isLastOptionViewFocused=function(){var e=this.getDOMTabStops().$last;return void 0!==e&&e.is(":focus")},t.prototype.shouldMoveFocusToLastOption=function(){var e=this.controller.getOpenItemMenu();return void 0!==e&&!this.isLastOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:e.model.id,location:"end"})},t.prototype.focusLastOption=function(){var e=this.controller.getOpenItemMenu();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:e.model.id,location:"end"}})},t.prototype.focusAnywhere=function(){var e=this.controller.getOpenItemMenu();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:e.model.id,location:"anywhere"}})},t.prototype.getDOMTabStops=function(){if(void 0===this.openView)return{};var e=a(this.openView),t=e.find(':input, [role="textbox"], [tabindex="0"]:visible');return{$first:t.first(),$last:t.last()}},t}(r.Class);t.ItemSettingsView=h}),define("loadcss!expressions/expression-search-bar",function(){}),define("expressions/expression-search-bar",["require","exports","tslib","dcgview","../dcgview-helpers/mathquill-view","loadcss!./expression-search-bar"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionSearchBar=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-expression-search-bar":!0,"dcg-expressions-scrolled":e.props.expsScrolled()}}},r.createElement("div",{class:r.const("dcg-search-mathquill-container")},r.createElement(i.default,{hasError:this.const(!1),getAriaPostLabel:this.const(""),capExpressionSize:this.const(!1),onUserChangedLatex:this.bindFn(this.onChange),latex:function(){return e.controller.getExpressionSearchStr()},getAriaLabel:function(){return"search through expressions"},isFocused:this.bindFn(this.isFocused),config:this.const({}),onFocusedChanged:this.bindFn(this.onFocusChanged),selectOnFocus:this.const(!0),noFadeout:this.const(!0),onUserPressedKey:function(t,n){if("Esc"===t)e.closeSearch();else if("Enter"===t)e.controller.dispatch({type:"update-expression-search-str",str:e.controller.getExpressionSearchStr()});else{var r=i.default.getFocusedMathquill();if(!r)return;r.keystroke(t,n),e.onChange(r.latex())}}}),r.createElement("i",{class:r.const("dcg-icon-search")}),r.createElement("i",{onTap:function(){return e.onChange("")},class:r.const("dcg-icon-remove dcg-do-not-blur")})),r.createElement("div",{class:r.const("dcg-search-cancel"),tabindex:r.const(0),role:r.const("button"),onTap:this.bindFn(this.closeSearch)},function(){return e.controller.t("cancel")}))},t.prototype.closeSearch=function(){this.controller.dispatch({type:"close-expression-search"})},t.prototype.onChange=function(e){this.controller.dispatch({type:"update-expression-search-str",str:e})},t.prototype.onFocusChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"search-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"search-expressions"}})},t.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!!e&&"search-expressions"===e.type},t}(r.Class);t.ExpressionSearchBar=o}),define("loadcss!expressions/list-view",function(){}),define("loadcss!expressions",function(){}),define("expressions/list-view",["require","exports","tslib","touchtracking","keys","dcgview","jquery","underscore","lib/conditional_blur","./expression_view","./text_view","./table-view","./folder-view","./image-view","./shell_view","./drag_container_view","main/data_helpers","./new_expression_view","./expressions-header","main/load-graph-from-link","lib/get-clipboard-data","graphing-calc/models/abstract-item","graphing-calc/models/list","./exp-list-resizer","./item-settings-view","./expression-search-bar","loadcss!./list-view","loadcss!expressions","jquery.handleevent"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x,E,w,_,S,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var k=o.Components,C=k.If,I=k.For,T=k.Switch,L=k.SwitchUnion,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guid=s.uniqueId("listView"),t}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return o.createElement("div",{didMount:this.bindFn(this.didMountContainer)},o.createElement("div",{class:o.const("dcg-exppanel-outer"),onDrop:this.bindFn(this.onDrop),style:function(){return e.computeExppanelOuterStyle()}},o.createElement(C,{predicate:function(){return e.controller.isFileDraggedOver()}},function(){return o.createElement("div",{class:o.const("dcg-drop-image")},o.createElement("span",null,function(){return e.controller.t("Drop Image Here")}))}),o.createElement("div",{class:function(){return{"dcg-exppanel-container":!0,"dcg-add-shadow":e.controller.shouldRenderList()}},style:function(){return{transform:e.controller.isListVisible()?void 0:e.controller.isNarrow()?"translate(0, 100%)":"translate(-100%, 0)"}}},o.createElement(C,{predicate:function(){return e.controller.shouldRenderList()}},function(){return o.createElement(v.default,{controller:e.props.controller,expsScrolled:function(){return!!e.exppanel&&e.exppanel.scrollTop>0}})}),o.createElement(C,{predicate:function(){return e.controller.getExpressionSearchOpen()}},function(){return o.createElement(M.ExpressionSearchBar,{controller:e.props.controller,expsScrolled:function(){return!!e.exppanel&&e.exppanel.scrollTop>0}})}),o.createElement(C,{predicate:function(){return e.controller.shouldRenderList()}},function(){return o.createElement("div",{class:function(){return{"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":e.controller.isDragDropActive(),"dcg-has-background-color":e.controller.hasBackgroundColor()}},style:function(){return{background:e.controller.getBackgroundColor()}},onPaste:e.bindFn(e.onPaste),onTapStart:e.bindFn(e.onExppanelTapstart),didMount:e.bindFn(e.didMountExppanel)},o.createElement("div",{class:o.const("dcg-expressionlist"),role:o.const("complementary"),"aria-label":o.const("Expression List")},o.createElement(I,{each:function(){return e.controller.getAllItemModels()},key:function(e){return e.guid}},o.createElement("span",{class:o.const("dcg-template-expressioneach")},function(t){return L(function(){return E.getDisplayState(t)},{shell:function(){return e.makeShellViewForModel(t)},render:function(){return e.makeViewForModel(t)},none:function(){}})})),o.createElement(y.default,{controller:function(){return e.props.controller()}}),o.createElement(T,{key:function(){return e.controller.getDraggedItemId()}},function(t){if(t){var n=e.controller.getItemModel(t);return o.createElement(m.default,{controller:e.props.controller},e.makeDragCopyViewForModel(n))}}),o.createElement("div",{class:o.const("dcg-expressions-branding"),style:function(){return{opacity:e.controller.isKeypadOpen()?0:1}}},o.createElement(C,{predicate:function(){return e.controller.canEditOnWeb()}},function(){return o.createElement("span",{role:o.const("link"),tabindex:o.const(0),class:o.const("dcg-edit-branding"),onTap:function(){return e.controller.dispatch({type:"open-on-web"})}},o.createElement("div",{class:o.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Edit graph on Desmos")}},function(){return e.controller.t("edit graph on")}),o.createElement("i",{class:o.const("dcg-icon-desmos")}))}),o.createElement(C,{predicate:function(){return!e.controller.canEditOnWeb()}},function(){return o.createElement("span",{class:o.const("dcg-noedit-branding")},o.createElement("div",{class:o.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("powered by Desmos")}},function(){return e.controller.t("powered by")}),o.createElement("i",{class:o.const("dcg-icon-desmos")}))}))))})),o.createElement(_.ExpListResizer,{controller:this.props.controller})),o.createElement(S.ItemSettingsView,{controller:this.props.controller}))},t.prototype.makeShellViewForModel=function(e){return o.createElement(f.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(){},isDragCopy:function(){return!1}})},t.prototype.computeExppanelOuterStyle=function(){this.getListBottomAndUpdateLastExpressionPadding();var e=this.controller.computeMajorLayout().list,t=e.top;return e.top>0&&!this.controller.isListVisible()&&(t-=e.height),{position:"absolute",left:"0px",top:t+"px",width:e.width+"px",height:e.height+"px"}},t.prototype.makeDragCopyViewForModel=function(e){return this.makeViewForModel(e,!0)},t.prototype.makeViewForModel=function(e,t){var n=this;void 0===t&&(t=!1);var r;if("table"===e.type)r=o.createElement(d.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("folder"===e.type)r=o.createElement(p.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("text"===e.type)r=o.createElement(u.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else if("image"===e.type)r=o.createElement(h.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}});else{if("expression"!==e.type)return;r=o.createElement(l.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(t){return n.onDragPending(t,e.id)},isDragCopy:function(){return t}})}return r},t.prototype.didUnmount=function(){a(document.documentElement).off("."+this.guid)},t.prototype.didMountContainer=function(e){this.node=e,a(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown))},t.prototype.didMountExppanel=function(e){this.exppanel=e},t.prototype.getListBottomAndUpdateLastExpressionPadding=function(){var e=this.controller.getKeypadHeight(),t=this.__listBottom||0;return this.__listBottom=e,0===e&&0!==t&&r.isTapActive()&&this.padLastExpressionUntilTapEnd(t),e},t.prototype.padLastExpression=function(e){a(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom",e+"px")},t.prototype.unpadLastExpression=function(){a(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom","0")},t.prototype.padLastExpressionUntilTapEnd=function(e){var t=this;this.padLastExpression(e),a(document).on("dcg-tap.animating-bottom",function(){t.unpadLastExpression(),a(document).off("dcg-tap.animating-bottom")})},t.prototype.handleKeyDown=function(e){if(!this.controller.inAudioTraceMode()){var t=i.lookup(e);if(!this.controller.isInEditListMode()||e.altKey||e.ctrlKey||e.metaKey){if((!document.activeElement||!a.contains(document.body,document.activeElement))&&!a(e.target).closest(this.exppanel).length&&a.contains(document.documentElement,e.target)){var n=this.controller.getSelectedItem();if(n)switch(t){case i.UP:e.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case i.DOWN:e.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case i.ESCAPE:e.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case i.RIGHT:e.preventDefault(),n&&("expression"===n.type&&n.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:n.id,adjustment:"up"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:n.id}})):this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"start"}));break;case i.TAB:e.preventDefault(),n&&this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"start"});break;case i.LEFT:e.preventDefault(),n&&("expression"===n.type&&n.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:n.id,adjustment:"down"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:n.id}})):this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"end"}));break;case i.BACKSPACE:e.preventDefault(),n&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case i.DELETE:e.preventDefault(),n&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case i.ENTER:e.wasHandled("create-expression-with-keyboard")||(e.preventDefault(),e.handle("create-expression-with-keyboard"),n&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}));break;default:if(e.metaKey||e.ctrlKey||t===i.SHIFT||t===i.SPACEBAR)return;n&&("table"===n.type||this.controller.dispatch({type:"move-focus-to-item",id:n.id,where:"end"}))}}}else if(t===i.TAB){var r=this.controller.getItemModelByIndex(0);if(!r)return;var o=this.controller.getFocusLocation();if(!o)return;var s=("readonly-expression"===o.type&&"expression"===r.type||"table-container"===o.type&&"table"===r.type||o.type===r.type)&&o.id===r.id,c={type:"edit-list-toggle"},l=this.controller.isFocusLocationFocused(c);e.shiftKey&&s?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:c})):!e.shiftKey&&l&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"move-focus-to-item",id:r.id,where:"table"===r.type?"container":void 0}))}else if(t===i.UP||t===i.DOWN){var n=this.controller.getSelectedItem();if(!n)return;var u=this.controller.getListModel(),d=t===i.UP?w.findPrevSelectableItem(u,n.index):w.findNextSelectableItem(u,n.index);if(!d)return;this.controller.dispatch({type:"move-focus-to-item",id:d.id,where:"table"===d.type?"container":"start"})}}},t.prototype.onDragPending=function(e,t){var n=this;e.preventDefault(),c.default();var r=e.touches[0].clientY,i=r,o=setTimeout(function(){a(document).off(".dragpending"),n.onDragStart(e,t,r,i)},500);a(document).on("dcg-tapmove.dragpending",function(s){i=s.touches[0].clientY,Math.abs(i-r)>3&&(clearTimeout(o),a(document).off(".dragpending"),n.onDragStart(e,t,r,i))}),a(document).on("dcg-tapend.dragpending",function(){clearTimeout(o),a(document).off(".dragpending")})},t.prototype.onDragStart=function(e,t,n,r){1===e.touches.length&&(e.wasHandled("dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",id:t,grabY:n,mouseY:r}))},t.prototype.onExppanelTapstart=function(e){"mouse"!==e.device&&0===a(e.target).closest(".dcg-expressionitem").length&&c.default()},t.prototype.onPaste=function(e){var t=this,n=this.controller.getGraphSettings().config,r=x.default(e);if(r){var i=/^\s*https?:\/\/([a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(r),o=this.controller.getSelectedItem();if(n.pasteGraphLink&&o&&"folder"===o.type&&i&&""===o.title&&0===this.controller.getNumberOfItemsInFolder(o.id))return e.stopPropagation(),e.preventDefault(),void b.default(this.controller,r,"inject",function(e,t){return t(null,e)});if(!o||"text"!==o.type&&"folder"!==o.type){if(n.pasteGraphLink&&i){e.stopPropagation(),e.preventDefault();var a=n.pasteGraphLinkCallback?n.pasteGraphLinkCallback:function(e,t){return t(null,e)};return void b.default(this.controller,r,"set-state",a)}if(n.pasteTableData){var s=g.parse(r);if(void 0!==s)return e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"paste-table",data:s})}var c=g.getExpressions(r);if(void 0!==c){e.stopPropagation(),e.preventDefault();var l=[];return void(1===c.length&&c[0].numberList?this.controller.dispatch({type:"append-number-list",latex:c[0].content}):(c.forEach(function(e){l.push({type:"expression",id:t.controller.generateId(),latex:e.content})}),this.controller.dispatch({type:"insert-several-expressions",expressions:l})))}}}},t.prototype.onDrop=function(e){if(this.controller.areImagesEnabled()){var t=e.dataTransfer&&e.dataTransfer.files;t&&this.controller.dispatch({type:"new-images",files:t})}},t}(o.Class);t.default=D}),
define("graphing-calc/keypads/dcgview-graphing",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch},t}(r.Class);t.default=i}),define("loadcss!keypad/btn",function(){}),define("keypad/btn",["require","exports","tslib","dcgview","loadcss!./btn"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-keypad-btn-container":!0,"dcg-keypad-short-btn":"popover-short"===e.props.style()}},style:function(){return{"flex-grow":e.getColSpan()}}},r.createElement("span",{role:r.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),onTap:this.props.onTap},r.createElement("span",{class:r.const("dcg-keypad-btn-content")},this.children)))},t.prototype.getClasses=function(){var e={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},t=this.props.style();switch(t){case"default":e["dcg-btn-light-on-gray"]=!0;break;case"highlight":e["dcg-btn-dark-on-gray"]=!0;break;case"popover-short":case"popover":e["dcg-btn-light-gray"]=!0;break;case"blue":e["dcg-btn-short-blue"]=!0;break;case"tall-blue":e["dcg-btn-tall-blue"]=!0;break;default:return t}return e},t.prototype.isActive=function(){return!!this.props.active&&this.props.active()},t.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},t.prototype.getColSpan=function(){return this.props.colspan?this.props.colspan():void 0},t}(r.Class);t.default=i}),define("keypad/keys",["require","exports","./btn","dcgview-helpers/static-mathquill-view","dcgview","lib/i18n"],function(e,t,n,r,i,o){"use strict";function a(e,t){return void 0===e?i.const(t):i.const(e)}function s(e){return function(t,o,s){return void 0===s&&(s={}),i.createElement(n.default,{command:i.const(e.command||e.typedText||e.keys[0]),ariaLabel:i.const(e.ariaLabel||e.typedText||e.keys[0]),colspan:a(s.colspan,1),style:function(){return s.style||"default"},onTap:function(){return o({type:"keypad/type-text",text:e.typedText||e.keys[0]})}},m(function(){return"{"===e.keys[0]||"["===e.keys[0]},{true:function(){return i.createElement("span",{class:i.const("dcg-mq-math-mode"),style:i.const("font-size: 120%")},i.const(e.keys[0]),i.const(" "),i.createElement("span",{style:i.const("color: #999")},i.const(e.keys[1])))},false:function(){return i.createElement("span",null,i.createElement(r.default,{latex:i.const(e.keys[0])}),i.createElement("span",{style:i.const("color: #999")},i.createElement(r.default,{latex:i.const(e.keys[1])})))}}))}}function c(e){return function(t,o,s){return void 0===s&&(s={}),i.createElement(n.default,{command:i.const(e.command||e.typedText||e.keys[1]),ariaLabel:i.const(e.ariaLabel||e.typedText||e.keys[1]),colspan:a(s.colspan,1),style:a(s.style,"default"),onTap:function(){return o({type:"keypad/type-text",text:e.typedText||e.keys[1]})}},m(function(){return"}"===e.keys[1]||"]"===e.keys[1]},{true:function(){return i.createElement("span",{class:i.const("dcg-mq-math-mode"),style:i.const("font-size: 120%")},i.createElement("span",{style:i.const("color: #999")},i.const(e.keys[0])),i.const(" "),i.const(e.keys[1]))},false:function(){return i.createElement("span",null,i.createElement("span",{style:i.const("color: #999")},i.createElement(r.default,{latex:i.const(e.keys[0])})),i.createElement(r.default,{latex:i.const(e.keys[1])}))}}))}}function l(e){return function(t,o,s){return void 0===s&&(s={}),i.createElement(n.default,{command:i.const(e.command||t),ariaLabel:i.const(e.ariaLabel||t),colspan:a(s.colspan,1),style:function(){return s.style||"default"},onTap:function(){return o({type:"keypad/type-text",text:e.typedText||t})}},i.createElement(r.default,{latex:i.const(e.content||t)}))}}function u(e){return function(t,r,o){return void 0===o&&(o={}),i.createElement(n.default,{command:i.const(e.command||t),ariaLabel:i.const(e.ariaLabel||t),colspan:a(o.colspan,1),style:function(){return o.style||"default"},onTap:function(){return r({type:"keypad/type-text",text:e.typedText||t})}},i.createElement("span",{class:i.const("dcg-mq-math-mode")},i.const(e.content||t)))}}function d(e){return function(t,o,s){return void 0===s&&(s={}),i.createElement(n.default,{command:i.const(t),ariaLabel:i.const(e.ariaLabel||t),colspan:a(s.colspan,1),style:function(){return s.style||"default"},onTap:function(){return o({type:"keypad/type-text",text:t+"("})}},i.createElement(r.default,{latex:i.const(t)}))}}function p(e){return function(t,o,s){return void 0===s&&(s={}),i.createElement(n.default,{command:i.const(e.command),ariaLabel:i.const(e.ariaLabel||e.command),colspan:a(s.colspan,1),style:function(){return s.style||"default"},onTap:function(){o({type:"keypad/custom-command",command:e.command})}},i.createElement(r.default,{latex:i.const(e.content)}))}}function h(e,t,n){void 0===n&&(n={});var r=e.dispatch;return g[t](t,r,n)}function f(e){return void 0===e&&(e=1),i.createElement("div",{style:i.const("flex-grow:"+e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.spacer=t.view=void 0;var m=i.Components.IfElse,g={"{":u({ariaLabel:o.t("Left Bracket")}),"}":u({ariaLabel:o.t("Right Bracket")}),"(":l({ariaLabel:o.t("Left Parenthesis")}),")":l({ariaLabel:o.t("Right Parenthesis")}),sqrt:l({content:"\\sqrt{}",ariaLabel:o.t("Square Root")}),"/":l({content:"÷",ariaLabel:o.t("Divide")}),"*":l({content:"×",ariaLabel:o.t("Times")}),"-":l({ariaLabel:o.t("Minus")}),"+":l({ariaLabel:o.t("Plus")}),".":l({ariaLabel:o.t("Decimal")}),ans:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Answer")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},onTap:function(){return t({type:"keypad/type-text",text:e})}},i.const("ans"))},enter:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Enter")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Enter"})}},i.createElement("i",{class:i.const("dcg-icon-arrow-enter")}))},shift:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Shift")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},active:a(r.active,!1),onTap:function(){return t({type:"keypad/shift"})}},i.createElement("i",{class:i.const("dcg-icon-shift")}))},left:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Left Arrow")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Left"})}},i.createElement("i",{class:i.const("dcg-icon-arrow-left")}))},right:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Right Arrow")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Right"})}},i.createElement("i",{class:i.const("dcg-icon-arrow-right")}))},123:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Toggle Numbers")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},onTap:function(){return t({type:"keypad/123"})}},i.const("1 2 3"))},ABC:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Toggle Letters")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},onTap:function(){return t({type:"keypad/abc"})}},i.const("A B C"))},backspace:function(e,t,r){return void 0===r&&(r={}),i.createElement(n.default,{command:i.const(e),ariaLabel:function(){return o.t("Backspace")},colspan:a(r.colspan,1),style:function(){return r.style||"default"},onTap:function(){return t({type:"keypad/press-key",key:"Backspace"})}},i.createElement("i",{class:i.const("dcg-icon-delete")}))},pi:l({content:"\\pi",ariaLabel:o.t("Pi")}),alpha:l({content:"\\alpha",ariaLabel:o.t("Alpha")}),beta:l({content:"\\beta",ariaLabel:o.t("Beta")}),theta:l({content:"\\theta",ariaLabel:o.t("Theta")}),tau:l({content:"\\tau",ariaLabel:o.t("Tau")}),"a^2":p({command:"a^2",content:"a^2",ariaLabel:o.t("Squared")}),"a^3":p({command:"a^3",content:"a^3",ariaLabel:o.t("Cubed")}),"x^3":p({command:"a^3",content:"x^3",ariaLabel:o.t("Cubed")}),"a^b":l({content:"a^b",typedText:"^",ariaLabel:o.t("Superscript")}),a_b:l({content:"a_b",typedText:"_",ariaLabel:o.t("Subscript")}),"a/b":l({content:"\\frac{a}{b}",typedText:"/",ariaLabel:o.t("A over B")}),"x^2":p({command:"a^2",content:"x^2",ariaLabel:o.t("Squared")}),"x^y":l({content:"x^y",typedText:"^",ariaLabel:o.t("Superscript")}),"x/y":l({content:"\\frac{x}{y}",typedText:"/",ariaLabel:o.t("A over B")}),nthroot:p({command:"nthroot",content:"\\sqrt[n]{}",ariaLabel:o.t("Nth Root")}),ythroot:p({command:"nthroot",content:"\\sqrt[y]{}",ariaLabel:o.t("Yth Root")}),sin:d({ariaLabel:o.t("Sine")}),cos:d({ariaLabel:o.t("Cosine")}),tan:d({ariaLabel:o.t("Tangent")}),sec:d({ariaLabel:o.t("Secant")}),csc:d({ariaLabel:o.t("Cosecant")}),cot:d({ariaLabel:o.t("Cotangent")}),sinh:d({ariaLabel:o.t("Hyperbolic Sine")}),cosh:d({ariaLabel:o.t("Hyperbolic Cosine")}),tanh:d({ariaLabel:o.t("Hyperbolic Tangent")}),sech:d({ariaLabel:o.t("Hyperbolic Secant")}),csch:d({ariaLabel:o.t("Hyperbolic Cosecant")}),coth:d({ariaLabel:o.t("Hyperbolic Cotangent")}),arcsin:p({command:"arcsin",content:"sin^{-1}",ariaLabel:o.t("Inverse Sine")}),arccos:p({command:"arccos",content:"cos^{-1}",ariaLabel:o.t("Inverse Cosine")}),arctan:p({command:"arctan",content:"tan^{-1}",ariaLabel:o.t("Inverse Tangent")}),arccsc:p({command:"arccsc",content:"csc^{-1}",ariaLabel:o.t("Inverse Cosecant")}),arcsec:p({command:"arcsec",content:"sec^{-1}",ariaLabel:o.t("Inverse Secant")}),arccot:p({command:"arccot",content:"cot^{-1}",ariaLabel:o.t("Inverse Cotangent")}),"|a|":l({typedText:"|",ariaLabel:o.t("Absolute Value")}),"|x|":l({typedText:"|",ariaLabel:o.t("Absolute Value")}),ln:d({ariaLabel:o.t("Natural Log")}),log:d({ariaLabel:o.t("Log")}),quantile:d({ariaLabel:o.t("Quantile")}),quartile:d({ariaLabel:o.t("Quartile")}),var:d({}),varp:d({}),nCr:d({}),loga:p({command:"loga",content:"log_a",ariaLabel:o.t("Log A")}),stdev:d({ariaLabel:o.t("Standard Deviation")}),mad:d({}),nPr:d({}),total:d({}),length:d({}),min:d({}),max:d({}),cov:d({ariaLabel:o.t("Co Variance")}),corr:d({ariaLabel:o.t("Correlation")}),spearman:d({ariaLabel:o.t("Spearman Rank Correlation")}),stats:d({ariaLabel:o.t("Summary statistics")}),polygon:d({ariaLabel:o.t("Polygon")}),mean:d({ariaLabel:o.t("Mean")}),stdevp:d({ariaLabel:o.t("Standard Deviation of Population")}),mod:d({}),"e^x":l({typedText:"e^",ariaLabel:o.t("Exponent")}),"10^n":l({content:"\\times10^{n}",typedText:"*10^",ariaLabel:o.t("Times ten to the power of")}),"a^{-1}":l({typedText:"^-1",ariaLabel:o.t("Reciprocal")}),sum:l({content:"\\sum",ariaLabel:o.t("Sum")}),prod:l({content:"\\prod",ariaLabel:o.t("Product")}),floor:d({ariaLabel:o.t("Floor")}),ceil:d({ariaLabel:o.t("Ceiling")}),round:d({ariaLabel:o.t("Round")}),abs:d({ariaLabel:o.t("Absolute Value")}),"!":l({ariaLabel:o.t("Factorial")}),"n!":l({typedText:"!",ariaLabel:o.t("Factorial")}),median:d({ariaLabel:o.t("Median")}),lcm:d({}),gcd:d({}),gcf:d({}),ddx:p({command:"ddx",content:"\\frac{d}{dx}"}),int:l({content:"\\int",ariaLabel:o.t("Integral")}),"%":l({content:"\\%",ariaLabel:o.t("Percent Of")}),exp:l({}),sign:d({}),normaldist:d({ariaLabel:o.t("Normal Distribution")}),poissondist:d({ariaLabel:o.t("Poisson Distribution")}),binomialdist:d({ariaLabel:o.t("Binomial Distribution")}),uniformdist:d({ariaLabel:o.t("Uniform Distribution")}),erf:d({ariaLabel:o.t("Error Function")}),histogram:d({ariaLabel:o.t("Histogram")}),boxplot:d({ariaLabel:o.t("Box Plot")}),dotplot:d({ariaLabel:o.t("Dot Plot")}),tscore:d({ariaLabel:o.t("T Score")}),ittest:d({ariaLabel:o.t("Independent T Test")}),ttest:d({ariaLabel:o.t("T Test")}),tdist:d({ariaLabel:o.t("Student-t Distribution")}),pdf:d({ariaLabel:o.t("Probability Density Function")}),cdf:d({ariaLabel:o.t("Cumulative Density Function")}),random:d({ariaLabel:o.t("Random Number")}),inversecdf:d({ariaLabel:o.t("Inverse CDF function")}),sort:d({}),shuffle:d({}),join:d({}),"A^-1":p({command:"A^-1",content:"A^{-1}",ariaLabel:o.t("Inverse")}),"A^T":p({command:"A^T",content:"A^T",ariaLabel:o.t("Transpose")}),"A^2":p({command:"A^2",content:"A^2",ariaLabel:o.t("Squared")}),det:d({ariaLabel:"Determinant"}),"A^n":l({content:"A^n",typedText:"^",ariaLabel:o.t("Exponent")}),a:l({}),b:l({}),c:l({}),d:l({}),e:l({}),f:l({}),g:l({}),h:l({}),i:l({}),j:l({}),k:l({}),l:l({}),m:l({}),n:l({}),o:l({}),p:l({}),q:l({}),r:l({}),s:l({}),t:l({}),u:l({}),v:l({}),w:l({}),x:l({}),boldX:l({content:"x",typedText:"x"}),y:l({}),boldY:l({content:"y",typedText:"y"}),z:l({}),A:l({}),B:l({}),C:l({}),D:l({}),E:l({}),F:l({}),G:l({}),H:l({}),I:l({}),J:l({}),K:l({}),L:l({}),M:l({}),N:l({}),O:l({}),P:l({}),Q:l({}),R:l({}),S:l({}),T:l({}),U:l({}),V:l({}),W:l({}),X:l({}),Y:l({}),Z:l({}),0:l({}),1:l({}),2:l({}),3:l({}),4:l({}),5:l({}),6:l({}),7:l({}),8:l({}),9:l({}),",":l({}),"=":l({}),"[":l({}),"]":l({}),"{}_left":s({keys:["{","}"]}),"{}_right":c({keys:["{","}"]}),"()_left":s({keys:["(",")"]}),"()_right":c({keys:["(",")"]}),"[]_left":s({keys:["[","]"]}),"[]_right":c({keys:["[","]"]}),",'_left":s({keys:[",","′"]}),",'_right":c({keys:[",","′"],typedText:"'"}),'"':l({}),"'":l({}),"~":l({}),":":l({}),">":l({}),"<":l({}),">=":l({content:"\\ge"}),"<=":l({content:"\\le"}),"!%_left":s({keys:["!","{}^{%}"]}),"!%_right":c({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":s({keys:["~","{}^{:}"]}),"~:_right":c({keys:["~","{}^{:}"],typedText:":"})};t.view=h,t.spacer=f}),define("keypad/dcgview-keypad",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t}(r.Class);t.default=i}),define("loadcss!keypad/keypad",function(){}),define("keypad/keypad",["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./keypad"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement("div",{class:r.const("dcg-basic-keypad dcg-do-not-blur")},this.children)},t}(i.default);t.default=o}),define("loadcss!keypad/row",function(){}),define("keypad/row",["require","exports","tslib","dcgview","loadcss!./row"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement("div",{class:r.const("dcg-keypad-row")},this.children)},t}(r.Class);t.default=i}),define("graphing-calc/keypads/qwerty",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"q"),o.view(this,"w"),o.view(this,"e"),o.view(this,"r"),o.view(this,"t"),o.view(this,"y"),o.view(this,"u"),o.view(this,"i"),o.view(this,"o"),o.view(this,"p")),r.createElement(s.default,null,o.view(this,"a"),o.view(this,"s"),o.view(this,"d"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"j"),o.view(this,"k"),o.view(this,"l"),o.view(this,"theta")),r.createElement(s.default,null,o.view(this,"shift",{colspan:1.364,style:"highlight"}),o.spacer(.136),o.view(this,"z"),o.view(this,"x"),o.view(this,"c"),o.view(this,"v"),o.view(this,"b"),o.view(this,"n"),o.view(this,"m"),o.spacer(.136),o.view(this,"backspace",{colspan:1.364,style:"highlight"})),r.createElement(s.default,null,o.view(this,"123",{colspan:1.818,style:"highlight"}),o.spacer(.182),o.view(this,"a_b"),o.view(this,"!%_left"),o.view(this,"[]_left"),o.view(this,"{}_left"),o.view(this,"~:_left"),o.view(this,",'_left"),o.spacer(.182),o.view(this,"enter",{colspan:1.818,style:"blue"})))},t}(i.default);t.default=c}),define("graphing-calc/keypads/qwerty-capital",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"Q"),o.view(this,"W"),o.view(this,"E"),o.view(this,"R"),o.view(this,"T"),o.view(this,"Y"),o.view(this,"U"),o.view(this,"I"),o.view(this,"O"),o.view(this,"P")),r.createElement(s.default,null,o.view(this,"A"),o.view(this,"S"),o.view(this,"D"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"J"),o.view(this,"K"),o.view(this,"L"),o.view(this,"tau")),r.createElement(s.default,null,o.view(this,"shift",{colspan:1.364,active:!0,style:"highlight"}),o.spacer(.136),o.view(this,"Z"),o.view(this,"X"),o.view(this,"C"),o.view(this,"V"),o.view(this,"B"),o.view(this,"N"),o.view(this,"M"),o.spacer(.136),o.view(this,"backspace",{colspan:1.364,style:"highlight"})),r.createElement(s.default,null,o.view(this,"123",{colspan:1.818,style:"highlight"}),o.spacer(.182),o.view(this,"a^b"),o.view(this,"!%_right"),o.view(this,"[]_right"),o.view(this,"{}_right"),o.view(this,"~:_right"),o.view(this,",'_right"),o.spacer(.182),o.view(this,"enter",{colspan:1.818,style:"blue"})))},t}(i.default);t.default=c}),define("graphing-calc/keypads/numbers",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row","keypad/btn"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"boldX"),o.view(this,"boldY"),o.view(this,"a^2"),o.view(this,"a^b"),o.spacer(.5),o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/"),o.spacer(.5),r.createElement(c.default,{command:this.const("functions"),ariaLabel:function(){return e.controller.t("Functions")},colspan:this.const(2),style:this.const("highlight"),active:function(){return e.controller.isKeypadFunctionsPopoverOpen()},onTap:function(){return e.dispatch({type:"keypad/functions"})}},this.bindFn(this.getFuncsBtnText))),r.createElement(s.default,null,o.view(this,"("),o.view(this,")"),o.view(this,"<"),o.view(this,">"),o.spacer(.5),o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*"),o.spacer(.5),o.view(this,"left",{style:"highlight"}),o.view(this,"right",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"|a|"),o.view(this,","),o.view(this,"<="),o.view(this,">="),o.spacer(.5),o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-"),o.spacer(1),o.view(this,"backspace",{colspan:1.5,style:"highlight"})),r.createElement(s.default,null,o.view(this,"ABC",{colspan:2,style:"highlight"}),o.view(this,"sqrt"),o.view(this,"pi"),o.spacer(.5),o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"="),o.view(this,"+"),o.spacer(.5),o.view(this,"enter",{colspan:2,style:"blue"})))},t.prototype.getFuncsBtnText=function(){return this.controller.isNarrow()?this.controller.t("funcs"):this.controller.t("functions")},t}(i.default);t.default=l}),define("graphing-calc/keypads/letters",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"a"),o.view(this,"b"),o.view(this,"c"),o.view(this,"d"),o.view(this,"e"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"i"),o.view(this,"j")),r.createElement(s.default,null,o.view(this,"k"),o.view(this,"l"),o.view(this,"m"),o.view(this,"n"),o.view(this,"o"),o.view(this,"p"),o.view(this,"q"),o.view(this,"r"),o.view(this,"s"),o.view(this,"t")),r.createElement(s.default,null,o.view(this,"shift",{style:"highlight"}),o.view(this,"u"),o.view(this,"v"),o.view(this,"w"),o.view(this,"x"),o.view(this,"y"),o.view(this,"z"),o.view(this,"theta"),o.view(this,"backspace",{colspan:2,style:"highlight"})),r.createElement(s.default,null,o.view(this,"123",{colspan:2,style:"highlight"}),o.view(this,"a_b"),o.view(this,"!%_left"),o.view(this,"[]_left"),o.view(this,"{}_left"),o.view(this,"~:_left"),o.view(this,",'_left"),o.view(this,"enter",{colspan:2,style:"blue"})))},t}(i.default);t.default=c}),define("graphing-calc/keypads/letters-capital",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"A"),o.view(this,"B"),o.view(this,"C"),o.view(this,"D"),o.view(this,"E"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"I"),o.view(this,"J")),r.createElement(s.default,null,o.view(this,"K"),o.view(this,"L"),o.view(this,"M"),o.view(this,"N"),o.view(this,"O"),o.view(this,"P"),o.view(this,"Q"),o.view(this,"R"),o.view(this,"S"),o.view(this,"T")),r.createElement(s.default,null,o.view(this,"shift",{style:"highlight"}),o.view(this,"U"),o.view(this,"V"),o.view(this,"W"),o.view(this,"X"),o.view(this,"Y"),o.view(this,"Z"),o.view(this,"tau"),o.view(this,"backspace",{colspan:2,style:"highlight"})),r.createElement(s.default,null,o.view(this,"123",{colspan:2,style:"highlight"}),o.view(this,"a^b"),o.view(this,"!%_right"),o.view(this,"[]_right"),o.view(this,"{}_right"),o.view(this,"~:_right"),o.view(this,",'_right"),o.view(this,"enter",{colspan:2,style:"blue"})))},t}(i.default);t.default=c}),define("graphing-calc/keypads/trig",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(a.default,{controller:this.props.controller},this.b("sin"),this.b("arcsin"),this.b("sinh"),this.b("cos"),this.b("arccos"),this.b("cosh"),this.b("tan"),this.b("arctan"),this.b("tanh"),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("csc")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("arccsc")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("csch")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("sec")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("arcsec")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("sech")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("cot")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("arccot")}),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("coth")}))},t.prototype.b=function(e){return o.view(this,e,{style:"popover"})},t.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},t}(i.default);t.default=c}),define("graphing-calc/keypads/stats",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(a.default,{controller:this.props.controller},this.b("total"),this.b("length"),this.b("mean"),this.b("median"),this.b("min"),this.b("max"),this.b("quartile"),this.b("quantile"),this.b("stdev"),this.b("stdevp"),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("mad")}),this.b("var"),r.createElement(s,{predicate:this.bindFn(this.isNotRestricted)},function(){return e.b("cov")}),this.b("corr"),this.b("spearman"),this.b("nCr"),this.b("nPr"),this.b("stats"),r.createElement(s,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return e.b("ttest")}),r.createElement(s,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return e.b("tscore")}),r.createElement(s,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return e.b("ittest")}))},t.prototype.b=function(e){return o.view(this,e,{style:"popover-short"})},t.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},t.prototype.areDistributionsEnabled=function(){return this.controller.areDistributionsEnabled()},t}(i.default);t.default=c}),define("graphing-calc/keypads/misc",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},this.b("join"),this.b("sort"),this.b("shuffle"),this.b("lcm"),this.b("gcd"),this.b("mod"),this.b("ceil"),this.b("floor"),this.b("round"),this.b("sign"),this.b("%"),this.b("exp"),this.b("ln"),this.b("nthroot"),this.b("polygon"),this.b("log"),this.b("loga"),this.b("ddx"),this.b("int"),this.b("sum"),this.b("prod"))},t.prototype.b=function(e){return o.view(this,e,{style:"popover-short"})},t}(i.default);t.default=s}),define("graphing-calc/keypads/distributions",["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(a.default,{controller:this.props.controller},r.createElement("div",{class:r.const("dcg-section-heading")},function(){return e.controller.t("Visualizations")},r.createElement("a",{href:r.const("https://support.desmos.com/hc/en-us/articles/360022405991"),target:r.const("_blank"),"aria-label":function(){return e.controller.t("Visualizations")}},r.createElement("i",{class:r.const("dcg-icon-question-sign")}))),this.b("histogram"),this.b("dotplot"),this.b("boxplot"),r.createElement("div",{class:r.const("dcg-section-heading")},function(){return e.controller.t("Distributions")},r.createElement("a",{href:r.const("https://support.desmos.com/hc/en-us/articles/360022401451#distributions"),target:r.const("_blank"),"aria-label":function(){return e.controller.t("Distributions")}},r.createElement("i",{class:r.const("dcg-icon-question-sign")}))),this.b("normaldist"),this.b("tdist"),this.b("poissondist"),this.b("binomialdist"),this.b("uniformdist"),r.createElement("div",{class:r.const("dcg-popover-section-separator")}),this.b("pdf"),this.b("cdf"),this.b("inversecdf"),this.b("random"))},t.prototype.b=function(e){return o.view(this,e,{style:"popover-short"})},t}(i.default);t.default=s}),define("loadcss!graphing-calc/keypads/functions-popover",function(){}),define("graphing-calc/keypads/functions-popover",["require","exports","tslib","dcgview","./dcgview-graphing","./trig","./stats","./misc","./distributions","loadcss!./functions-popover"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r.Components,u=l.SwitchUnion,d=l.If,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-functions-popover dcg-popover dcg-top")},r.createElement("div",{class:r.const("dcg-popover-interior")},r.createElement("div",{class:r.const("dcg-popover-header")},r.createElement("span",{role:r.const("button"),"dcg-command":r.const("trigTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"trig"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"trig"})}},function(){return e.controller.t("trig")}),r.createElement("span",{role:r.const("button"),"dcg-command":r.const("statsTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"stats"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"stats"})}},function(){return e.controller.t("stats")}),r.createElement(d,{predicate:function(){return e.controller.areDistributionsEnabled()}},function(){return r.createElement("span",{role:r.const("button"),"dcg-command":r.const("distTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"dist"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"dist"})}},function(){return e.controller.t("dist")})}),r.createElement("span",{role:r.const("button"),"dcg-command":r.const("miscTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"misc"===e.controller.getKeypadFunctionsTab()}},onTap:function(){e.dispatch({type:"keypad/set-functions-tab",tab:"misc"})}},function(){return e.controller.t("misc")})),r.createElement("div",{class:r.const("dcg-interior-buttons")},u(function(){return e.controller.getKeypadFunctionsTab()},{trig:function(){return r.createElement(o.default,{controller:e.props.controller})},stats:function(){return r.createElement(a.default,{controller:e.props.controller})},misc:function(){return r.createElement(s.default,{controller:e.props.controller})},dist:function(){return r.createElement(c.default,{controller:e.props.controller})}}))),r.createElement("div",{class:r.const("dcg-arrow")}))},t}(i.default);t.default=p}),define("loadcss!graphing-calc/keypads/graphing-keypad-container",function(){}),define("graphing-calc/keypads/main",["require","exports","tslib","dcgview","./dcgview-graphing","./qwerty","./qwerty-capital","./numbers","./letters","./letters-capital","./functions-popover","jquery","underscore","../../lib/tooltip","loadcss!./graphing-keypad-container"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0})
;var f=r.Components,m=f.SwitchUnion,g=f.If,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-keypad"),role:r.const("complementary"),"aria-label":r.const("Keypad")},r.createElement("div",{class:r.const("dcg-keys-container"),style:this.bindFn(this.computeStyles),didMount:this.bindFn(this.didMountContainer)},r.createElement("div",{class:r.const("dcg-keys-background dcg-do-not-blur"),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},r.createElement("div",{class:r.const("dcg-keys")},m(function(){return e.controller.getKeypadLayout()},{letters:function(){return r.createElement(o.default,{controller:e.props.controller})},capitalLetters:function(){return r.createElement(a.default,{controller:e.props.controller})},mainNumbers:function(){return r.createElement(s.default,{controller:e.props.controller})},noQwertyLetters:function(){return r.createElement(c.default,{controller:e.props.controller})},noQwertyCapitalLetters:function(){return r.createElement(l.default,{controller:e.props.controller})}}),r.createElement(g,{predicate:function(){return e.controller.isKeypadFunctionsPopoverOpen()}},function(){return r.createElement(u.default,{controller:e.props.controller})})),r.createElement(g,{predicate:this.bindFn(this.isHideKeypadButtonVisible)},function(){return r.createElement("div",{class:r.const("dcg-minimize-keypad-container")},r.createElement(h.Tooltip,{tooltip:function(){return e.controller.t("Hide Keypad")},gravity:e.const("ne"),offset:e.const({left:6})},r.createElement("div",{role:r.const("button"),"aria-label":function(){return e.controller.t("Hide Keypad")},class:r.const("dcg-minimize-keypad"),style:function(){return{"border-bottom-color":e.controller.getPillboxBackgroundColor(),background:e.controller.getPillboxBackgroundColor()}},onTap:function(){e.controller.dispatch({type:"keypad/set-minimized",minimized:!0})}},r.createElement("i",{class:r.const("dcg-icon-keyboard")}),r.createElement("i",{class:r.const("dcg-icon-caret-down")}))))}))),r.createElement(g,{predicate:this.bindFn(this.isShowKeypadButtonVisible)},function(){return r.createElement("div",{class:r.const("dcg-show-keypad-container")},r.createElement(h.Tooltip,{tooltip:function(){return e.controller.t("Show Keypad")},gravity:e.const("ne")},r.createElement("div",{role:r.const("button"),"aria-label":function(){return e.controller.t("Show Keypad")},class:r.const("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),style:function(){return{background:e.controller.getPillboxBackgroundColor()}},onTap:function(){e.controller.dispatch({type:"keypad/set-minimized",minimized:!1})}},r.createElement("i",{class:r.const("dcg-icon-keyboard")}),r.createElement("i",{class:r.const("dcg-icon-caret-up dcg-do-not-blur")}))))}))},t.prototype.didMountContainer=function(e){this.containerElt=e},t.prototype.isShowKeypadButtonVisible=function(){return"none"===this.controller.getBrailleMode()&&(!this.controller.isKeypadOpen()&&!this.controller.isNarrow()&&!this.controller.isInEditListMode()&&this.controller.isListVisible())},t.prototype.isHideKeypadButtonVisible=function(){return"none"===this.controller.getBrailleMode()&&this.controller.isKeypadOpen()&&!this.controller.isNarrow()},t.prototype.didMount=function(){this.updatePopoverPosition()},t.prototype.didUpdate=function(){this.updatePopoverPosition()},t.prototype.computeStyles=function(){var e={};return this.controller.isNarrow()||(e.transition="transform .3s, opacity .3s"),this.controller.isKeypadOpen()||(e.opacity="0",e.transform="translate3d(0, 255px, 0)"),e},t.prototype.updatePopoverPosition=function(){if(!this.controller.isKeypadFunctionsPopoverOpen())return void(this.__popoverCache=void 0);var e=this.controller.computeMajorLayout(),t={keypadTop:e.keypad.top,keypadWidth:e.keypad.width,keypadHeight:e.keypad.height,showToLeft:e.grapher.height<525};if(!p.isEqual(t,this.__popoverCache)){this.__popoverCache=t;var n=d(this.containerElt),r=n.find("[dcg-command=functions]"),i=n.find(".dcg-functions-popover"),o=n.find(".dcg-arrow");if(t.showToLeft){i.removeClass("dcg-top").addClass("dcg-left");var a=t.keypadHeight-(r.offset().top-n.offset().top),s=a-r.outerHeight()/2-2-10;o.css({left:"auto",bottom:s})}else i.removeClass("dcg-left").addClass("dcg-top"),o.css({left:i.width()-r.width()/2,bottom:"auto"})}},t}(i.default);t.default=y}),define("loadcss!pillboxes",function(){}),define("main/graphpaper-branding-view",["require","exports","tslib","dcgview","loadcss!pillboxes"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.Components.SwitchUnion,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),i(function(){return e.controller.getBrandingMode()},{"static-edit-link":function(){return r.createElement("div",{class:r.const("dcg-graphpaper-branding")},r.createElement("a",{href:function(){return e.controller.getEditLink()},target:r.const("_blank")},r.createElement("span",{class:r.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Edit graph on Desmos")}},function(){return e.controller.t("edit graph on")}),r.createElement("i",{class:r.const("dcg-icon-desmos")})))},"edit-link":function(){return r.createElement("div",{class:r.const("dcg-graphpaper-branding")},r.createElement("span",{class:r.const("dcg-edit-branding"),onTap:function(){return e.controller.dispatch({type:"open-on-web"})}},r.createElement("span",{class:r.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Edit graph on Desmos")}},function(){return e.controller.t("edit graph on")}),r.createElement("i",{class:r.const("dcg-icon-desmos")})))},"powered-by":function(){return r.createElement("div",{class:r.const("dcg-graphpaper-branding dcg-unclickable")},r.createElement("span",{class:r.const("dcg-powered-by"),"aria-label":function(){return e.controller.t("Powered by Desmos")}},function(){return e.controller.t("powered by")}),r.createElement("i",{class:r.const("dcg-icon-desmos")}))}})},t}(r.Class);t.default=o}),define("loadcss!main/settings-view",function(){}),define("main/settings-view",["require","exports","tslib","keys","scroll_helpers","lib/tooltip","dcgview","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","jquery","core/graphing-calc/json/graph-settings","core/math/evaluate-single-expression","graphing/viewport","dcgview-helpers/checkbox","main/manage-focus-helper","../dcgview-helpers/mathquill-braille-wrapper","loadcss!./settings-view"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=a.Components,y=g.Input,v=g.If,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return a.createElement(m.default,{latex:function(){return e.props.parent().getLimitLatex(e.props.limit())},controller:this.props.controller,ariaLabel:function(){return e.props.ariaLabel()},onBrailleInput:function(t){return e.props.parent().setLimitLatex(e.props.limit(),t)},onBrailleFocusedChanged:function(t){return e.props.parent().onFocusedChanged(e.props.limit(),t)},brailleShouldFocus:function(){return e.props.parent().getFocusedLimit()===e.props.limit()},hasError:function(){return e.props.parent().isLimitInvalid(e.props.limit())},onExpressionSizeExceeded:function(){},dataDCGLimit:function(){return e.props.limit()}},a.createElement(c.default,{isFocused:function(){return e.props.parent().getFocusedLimit()===e.props.limit()},latex:function(){return e.props.parent().getLimitLatex(e.props.limit())},capExpressionSize:function(){return e.props.parent().getCapExpressionSize()},config:this.const({}),getAriaLabel:function(){return e.props.ariaLabel()},getAriaPostLabel:this.const(""),onUserChangedLatex:function(t){return e.props.parent().setLimitLatex(e.props.limit(),t)},onFocusedChanged:function(t){return e.props.parent().onFocusedChanged(e.props.limit(),t)},hasError:this.const(!1),selectOnFocus:this.const(!0),needsSystemKeypad:function(){return e.props.needsSystemKeypad()}},a.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-math-input":!0,"dcg-invalid":e.props.parent().isLimitInvalid(e.props.limit()),"dcg-focus":e.props.parent().getFocusedLimit()===e.props.limit()}},"data-dcg-limit":function(){return e.props.limit()}})))},t}(a.Class),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),a.createElement("div",{class:a.const("dcg-settings-view-container")},a.createElement(o.Tooltip,{tooltip:function(){return e.controller.t("Graph Settings")},gravity:this.const("w")},a.createElement("div",{class:a.const("dcg-btn-flat-gray dcg-settings-pillbox dcg-action-settings"),role:a.const("button"),tabindex:a.const("0"),"aria-haspopup":a.const("true"),"aria-expanded":function(){return e.controller.isGraphSettingsOpen()},"aria-label":function(){return e.controller.t("Graph Settings")},onTap:this.bindFn(this.onTapSettingsButton),manageFocus:this.const(f.manageFocusHelper({controller:this.controller,location:{type:"settings",location:"icon"}})),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},a.createElement("i",{class:a.const("dcg-icon-wrench"),"aria-hidden":a.const("true")}))),a.createElement(v,{predicate:function(){return e.controller.isGraphSettingsOpen()}},function(){return a.createElement("div",{class:a.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:e.bindFn(e.getContainerStyle),didMount:e.bindFn(e.didMountContainer),didUnmount:e.bindFn(e.didUnmountContainer)},a.createElement("div",{class:a.const("dcg-popover-interior"),role:a.const("complementary"),"aria-label":a.const("Graph Settings")},a.createElement("div",{class:a.const("dcg-visual-settings")},a.createElement("div",{class:function(){return{"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":e.getProjectorMode()}},role:a.const("button"),tabindex:a.const("0"),"aria-label":function(){return e.controller.t("Projector Mode")},"aria-pressed":e.bindFn(e.getProjectorMode),onTap:e.bindFn(e.toggleProjectorMode),manageFocus:e.const(f.manageFocusHelper({controller:e.controller,location:{type:"settings",location:"projector-mode"}}))},function(){return e.controller.t("Projector Mode")}),a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("Reverse Contrast")},onChange:e.bindFn(e.toggleInvertedColors),checked:function(){return e.controller.getInvertedColors()},green:e.const(!0)},function(){return e.controller.t("Reverse Contrast")})),a.createElement("div",{class:a.const("dcg-braille-container")},a.createElement("div",{class:a.const("dcg-group-title")},a.const("Braille Mode")),a.createElement("div",{role:a.const("group"),"aria-label":function(){return e.controller.t("Braille Mode")},class:a.const("dcg-braille-options-buttons")},a.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":"none"===e.controller.getBrailleMode()}},role:a.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"none"})},tabindex:a.const(0),"aria-label":function(){return e.controller.t("Off")},"aria-pressed":function(){return"none"===e.controller.getBrailleMode()}},function(){return e.controller.t("Off")}),a.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":"nemeth"===e.controller.getBrailleMode()}},role:a.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"nemeth"})},tabindex:a.const(0),"aria-label":function(){return e.controller.t("Nemeth")},"aria-pressed":function(){return"nemeth"===e.controller.getBrailleMode()}},function(){return e.controller.t("Nemeth")}),a.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":"ueb"===e.controller.getBrailleMode()}},role:a.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"ueb"})},tabindex:a.const(0),"aria-label":function(){return e.controller.t("UEB")},"aria-pressed":function(){return"ueb"===e.controller.getBrailleMode()}},function(){return e.controller.t("UEB")})),a.createElement(v,{predicate:function(){return"none"!==e.controller.getBrailleMode()}},function(){return a.createElement("div",{class:a.const("dcg-checkbox-title dcg-six-key-checkbox")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("Six Key Braille Input")},onChange:function(t){return e.controller.dispatch({type:"set-six-key-input",useSixKeyInput:t})},checked:function(){return e.controller.getSixKeyInput()},green:e.const(!0)},function(){return e.controller.t("Six Key Braille Input")}),a.createElement("a",{href:a.const("https://www.desmos.com/accessibility#braille"),class:a.const("dcg-six-key-info"),target:a.const("_blank")},a.createElement("i",{class:a.const("dcg-icon-question-sign")})))})),a.createElement("div",{class:a.const("dcg-top-section-flex dcg-grid-settings-container")},a.createElement("div",{class:a.const("dcg-grid-settings")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("Grid")},onChange:e.bindFn(e.toggleGrid),checked:e.bindFn(e.getShowGrid),green:e.const(!0)},function(){return e.controller.t("Grid")}),a.createElement(v,{predicate:e.bindFn(e.getShowGrid)},function(){return a.createElement("div",{class:a.const("dcg-circle-icon-group dcg-grid-group")},a.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-cartesian":!0,"dcg-active":!e.getPolarMode()}},role:a.const("button"),tabindex:a.const("0"),ariaPressed:function(){return!e.getPolarMode()},"aria-label":function(){return e.controller.t("Cartesian Grid")},onTap:e.bindFn(e.setCartesianMode)}),a.const(" "),a.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-polar":!0,"dcg-active":e.getPolarMode()}},role:a.const("button"),tabindex:a.const("0"),ariaPressed:function(){return e.getPolarMode()},"aria-label":function(){return e.controller.t("Polar Grid")},onTap:e.bindFn(e.setPolarMode)}))}),a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("Arrows")},onChange:e.bindFn(e.toggleArrows),checked:function(){return e.getAxisArrowMode()!==u.AxisArrowModes.NONE},green:e.const(!0)},function(){return e.controller.t("Arrows")}),a.createElement(v,{predicate:function(){return e.getAxisArrowMode()!==u.AxisArrowModes.NONE}},function(){return a.createElement("div",{class:a.const("dcg-circle-icon-group dcg-arrow-group")},a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===u.AxisArrowModes.BOTH}},"dcg-arrows":a.const("BOTH"),"aria-label":function(){return e.controller.t("Show Both")},"aria-pressed":function(){return e.getAxisArrowMode()===u.AxisArrowModes.BOTH},onTap:function(){return e.setAxisArrowMode(u.AxisArrowModes.BOTH)}},a.createElement("i",{class:a.const("dcg-icon-arrows-two")})),a.const(" "),a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===u.AxisArrowModes.POSITIVE}},"dcg-arrows":a.const("POSITIVE"),"aria-label":function(){return e.controller.t("Show Positive")},"aria-pressed":function(){return e.getAxisArrowMode()===u.AxisArrowModes.POSITIVE},onTap:function(){return e.setAxisArrowMode(u.AxisArrowModes.POSITIVE)}},a.createElement("i",{class:a.const("dcg-icon-arrows-one")})))})),a.createElement("div",{class:a.const("dcg-top-checkboxes-container")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("Axis Numbers")},onChange:e.bindFn(e.toggleAxisNumbers),checked:e.bindFn(e.getAxisNumbers),small:e.const(!0),green:e.const(!0)},function(){return e.controller.t("Axis Numbers")}),a.createElement(v,{predicate:function(){return e.getShowGrid()&&!e.getPolarMode()}},function(){return a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("Minor Gridlines")},onChange:e.bindFn(e.toggleMinorGridlines),checked:e.bindFn(e.getMinorGridlines),small:e.const(!0),green:e.const(!0)},function(){return e.controller.t("Minor Gridlines")})}),a.createElement(v,{predicate:function(){return e.controller.canUseAdvancedStyling()&&!e.getPolarMode()}},function(){return a.createElement(h.Checkbox,{checked:function(){return e.controller.getGraphSettings().restrictGridToFirstQuadrant},ariaLabel:e.const("One Quadrant"),onChange:function(t){return e.controller.dispatch({type:"set-graph-settings",restrictGridToFirstQuadrant:t})},small:e.const(!0),green:e.const(!0)},a.const("One Quadrant"))}),a.createElement(v,{predicate:function(){return!e.getSquareAxes()}},function(){return a.createElement("div",{role:a.const("button"),tabindex:a.const("0"),class:a.const("dcg-action-zoom-square dcg-btn-light-gray"),onTap:e.bindFn(e.zoomSquare)},function(){return e.controller.t("Zoom Square")})}))),a.createElement("div",{class:a.const("dcg-axes-settings-container")},a.createElement("div",{class:a.const("dcg-checkbox-title dcg-x-axis-title")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("X-Axis")},onChange:e.bindFn(e.toggleXAxis),checked:e.bindFn(e.getShowXAxis),green:e.const(!0)},function(){return e.controller.t("X-Axis")}),a.createElement(y,{class:e.const("dcg-axis-label dcg-x-axis-label"),placeholder:function(){return e.controller.t("add a label")},"aria-label":function(){return e.controller.t("add x-axis label")},disabled:function(){return!e.getShowXAxis()||void 0},"aria-disabled":function(){return!e.getShowXAxis()||void 0},onInput:e.bindFn(e.onXAxisLabelInput),value:e.bindFn(e.getXAxisLabel)})),a.createElement("div",{class:a.const("dcg-editable-mathquill-container dcg-x-axis-options")},a.createElement(b,{limit:e.const("xmin"),ariaLabel:function(){return e.controller.t("X Axis Minimum: ")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(s.default,{latex:e.const("\\le x\\le")},a.createElement("span",{class:a.const("dcg-interval-interior")})),a.createElement(b,{limit:e.const("xmax"),ariaLabel:function(){return e.controller.t("X Axis Maximum: ")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(v,{predicate:function(){return!e.getPolarMode()}},function(){return a.createElement("span",{class:a.const("dcg-step-container")},a.createElement("span",{class:a.const("dcg-step-label"),"aria-hidden":a.const("true")},function(){return e.controller.t("Step:")}),a.createElement(b,{limit:e.const("xstep"),ariaLabel:function(){return e.controller.t("X Axis Step Size: ")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}))})),a.createElement("div",{class:a.const("dcg-checkbox-title dcg-y-axis-title")},a.createElement(h.Checkbox,{ariaLabel:function(){return e.controller.t("Y-Axis")},onChange:e.bindFn(e.toggleYAxis),checked:e.bindFn(e.getShowYAxis),green:e.const(!0)},function(){return e.controller.t("Y-Axis")}),a.createElement(y,{class:e.const("dcg-axis-label dcg-y-axis-label"),placeholder:function(){return e.controller.t("add a label")},"aria-label":function(){return e.controller.t("add y-axis label")},disabled:function(){return!e.getShowYAxis()||void 0},"aria-disabled":function(){return!e.getShowYAxis()||void 0},onInput:e.bindFn(e.onYAxisLabelInput),value:e.bindFn(e.getYAxisLabel)})),a.createElement("div",{class:a.const("dcg-editable-mathquill-container dcg-y-axis-options")},a.createElement(b,{limit:e.const("ymin"),ariaLabel:function(){return e.controller.t("Y Axis Minimum: ")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(s.default,{latex:e.const("\\le y\\le")},a.createElement("span",{class:a.const("dcg-interval-interior")})),a.createElement(b,{limit:e.const("ymax"),ariaLabel:function(){return e.controller.t("Y Axis Maximum: ")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),a.createElement(v,{predicate:function(){return!e.getPolarMode()}},function(){return a.createElement("span",{class:a.const("dcg-step-container")},a.createElement("span",{class:a.const("dcg-step-label"),"aria-hidden":a.const("true")},function(){return e.controller.t("Step:")}),a.createElement(b,{limit:e.const("ystep"),ariaLabel:function(){return e.controller.t("Y Axis Step Size: ")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}))}))),a.createElement("div",{class:a.const("dcg-radiangroup"),role:a.const("group"),"aria-label":function(){return e.controller.t("Angle Settings")}},a.createElement("div",{class:function(){return{"dcg-action-radianmode":!0,"dcg-modern-btn":!0,"dcg-active":!e.getDegreeMode()}},"aria-pressed":function(){return!e.getDegreeMode()},role:a.const("button"),tabindex:a.const("0"),"aria-label":function(){return e.controller.t("Radians")},onTap:e.bindFn(e.setRadianMode)},function(){return e.controller.t("Radians")}),a.createElement("div",{class:function(){return{"dcg-action-degreemode":!0,"dcg-modern-btn":!0,"dcg-active":e.getDegreeMode()}},"aria-pressed":e.bindFn(e.getDegreeMode),role:a.const("button"),tabindex:a.const("0"),"aria-label":function(){return e.controller.t("Degrees")},onTap:e.bindFn(e.setDegreeMode),manageFocus:e.const(f.manageFocusHelper({controller:e.controller,location:{type:"settings",location:"degree-mode"}}))},function(){return e.controller.t("Degrees")})),a.createElement("div",{class:a.const("dcg-arrow")})))}))},t.prototype.didMountContainer=function(e){var t=this;this.node=e,l(document).on("dcg-tapstart.settings-view wheel.settings-view",function(e){t.eventShouldClosePopover(e)&&t.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:"keyboard"===e.device})}),l(document).on("keydown.settings-view",function(e){if("Esc"===r.lookup(e)&&t.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),t.controller.isGraphSettingsOpen()&&"Tab"===r.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var n=t.controller.getFocusLocation();if(!n||"settings"!==n.type)return;e.shiftKey||"degree-mode"!==n.location?e.shiftKey&&"icon"===n.location&&(t.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),e.preventDefault(),e.stopPropagation()):(t.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),e.preventDefault(),e.stopPropagation())}})},t.prototype.didUnmountContainer=function(){l(document).off(".settings-view")},t.prototype.didUpdate=function(){if(this.controller.isGraphSettingsOpen()){var e=this.controller.getKeypadHeight();e!==this.cachedKeypadHeight&&document.activeElement&&l(document.activeElement).closest(this.node).length&&i.scrollVisible(l(document.activeElement),l(this.node).find(".dcg-popover-interior"),50),this.cachedKeypadHeight=e}},t.prototype.eventShouldClosePopover=function(e){var t=l(e.target),n=!!t.closest(this.node).length,r=!!t.closest(".dcg-action-settings").length,i=this.isMathquillFocused()&&t.closest(".dcg-keypad").length,o=!!t.closest(".dcg-action-undo").length||!!t.closest(".dcg-action-redo").length;return!(n||r||i||o)},t.prototype.onTapSettingsButton=function(e){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:"keyboard"===e.device})},t.prototype.isMathquillFocused=function(){return void 0!==this.getFocusedLimit()},t.prototype.getLimitLatex=function(e){return this.controller.getSettingsViewModel().limitLatex[e]},t.prototype.setLimitLatex=function(e,t){t!==this.controller.getSettingsViewModel().limitLatex[e]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:e,latex:t})},t.prototype.getFocusedLimit=function(){var e=this.controller.getFocusLocation();if(e&&"settings"===e.type)return e.location},t.prototype.getInvalidLimits=function(){var e=!!this.controller.getGraphSettings().degreeMode,t=d.default(this.getLimitLatex("xmin"),e),n=d.default(this.getLimitLatex("xmax"),e),r=d.default(this.getLimitLatex("ymin"),e),i=d.default(this.getLimitLatex("ymax"),e),o=""===this.getLimitLatex("xstep")?0:d.default(this.getLimitLatex("xstep"),e),a=""===this.getLimitLatex("ystep")?0:d.default(this.getLimitLatex("ystep"),e),s={},c=new p.Viewport(t,n,r,i);return isFinite(t)&&isFinite(n)?(s.xmin=!c.isXValid(),s.xmax=s.xmin):(s.xmin=!isFinite(t),s.xmax=!isFinite(n)),isFinite(r)&&isFinite(i)?(s.ymin=!c.isYValid(),s.ymax=s.ymin):(s.ymin=!isFinite(r),s.ymax=!isFinite(i)),s.xstep=!isFinite(o)||o<0,s.ystep=!isFinite(a)||a<0,s},t.prototype.isLimitInvalid=function(e){return this.getInvalidLimits()[e]},t.prototype.onFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:e}})},t.prototype.onXAxisLabelInput=function(e){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:e})},t.prototype.onYAxisLabelInput=function(e){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:e})},t.prototype.getXAxisLabel=function(){return this.controller.getGraphSettings().xAxisLabel},t.prototype.getYAxisLabel=function(){return this.controller.getGraphSettings().yAxisLabel},t.prototype.getShowXAxis=function(){return!!this.controller.getGraphSettings().showXAxis},t.prototype.toggleXAxis=function(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})},t.prototype.getShowYAxis=function(){return!!this.controller.getGraphSettings().showYAxis},t.prototype.toggleYAxis=function(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})},t.prototype.getAxisNumbers=function(){return!!this.controller.getGraphSettings().xAxisNumbers},t.prototype.toggleAxisNumbers=function(){var e=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!e,yAxisNumbers:!e,polarNumbers:!e})},t.prototype.getMinorGridlines=function(){return 0===this.controller.getGraphSettings().xAxisMinorSubdivisions},t.prototype.toggleMinorGridlines=function(){var e=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:e,xAxisMinorSubdivisions:e})},t.prototype.getPolarMode=function(){return!!this.controller.getGraphSettings().polarMode},t.prototype.setPolarMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!0})},t.prototype.setCartesianMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!1})},t.prototype.getDegreeMode=function(){return!!this.controller.getGraphSettings().degreeMode},t.prototype.setRadianMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!1})},t.prototype.setDegreeMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!0})},t.prototype.getProjectorMode=function(){return!!this.controller.getGraphSettings().config.projectorMode},t.prototype.toggleInvertedColors=function(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})},t.prototype.toggleProjectorMode=function(){this.controller.dispatch({type:"set-projector-mode",value:!this.getProjectorMode()})},t.prototype.getAxisArrowMode=function(){return this.controller.getGraphSettings().xAxisArrowMode},t.prototype.setAxisArrowMode=function(e){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})},t.prototype.getShowGrid=function(){return this.controller.getGraphSettings().showGrid},t.prototype.toggleGrid=function(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})},t.prototype.toggleArrows=function(){var e=this.getAxisArrowMode()===u.AxisArrowModes.NONE?u.AxisArrowModes.BOTH:u.AxisArrowModes.NONE;this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:e,yAxisArrowMode:e})},t.prototype.getSquareAxes=function(){return!!this.controller.getGraphSettings().squareAxes},t.prototype.getContainerStyle=function(){return this.controller.getKeypadHeight()?"bottom: 0":""},t.prototype.zoomSquare=function(){this.controller.dispatch({type:"zoom",direction:"square"})},t.prototype.getCapExpressionSize=function(){return!!this.controller.getGraphSettings().config.capExpressionSize},t}(a.Class);t.default=x}),define("main/zoom-buttons-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-zoom-container")},r.createElement("div",{class:r.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group"),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},r.createElement(i.Tooltip,{tooltip:function(){return e.controller.t("Zoom In")},gravity:this.const("w")},r.createElement("div",{class:r.const("dcg-action-zoomin"),role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Zoom In")},onTap:this.bindFn(this.zoomIn),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},r.createElement("i",{class:r.const("dcg-icon dcg-icon-plus"),"aria-hidden":r.const("true")}))),r.createElement(i.Tooltip,{tooltip:function(){return e.controller.t("Zoom Out")},gravity:this.const("w")},r.createElement("div",{class:r.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),tooltip:function(){return e.controller.t("Zoom Out")},role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Zoom Out")},onTap:this.bindFn(this.zoomOut),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},r.createElement("i",{class:r.const("dcg-icon dcg-icon-minus"),"aria-hidden":r.const("true")})))),r.createElement(i.Tooltip,{tooltip:function(){return e.controller.t("Default Zoom")},gravity:this.const("w")},r.createElement("div",{class:function(){return{"dcg-btn-flat-gray":!0,"dcg-option":!0,"dcg-action-zoomrestore":!0,"dcg-disabled":e.getZoomedDefault()}},"aria-disabled":this.bindFn(this.getZoomedDefault),role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Restore Default Zoom")},onTap:this.bindFn(this.zoomRestore),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},r.createElement("i",{class:r.const("dcg-icon dcg-icon-home"),"aria-hidden":r.const("true")}))))},t.prototype.zoomIn=function(){this.controller.dispatch({type:"zoom",direction:"in"})},t.prototype.zoomOut=function(){this.controller.dispatch({type:"zoom",direction:"out"})},t.prototype.zoomRestore=function(){this.controller.dispatch({type:"zoom",direction:"default"})},t.prototype.getZoomedDefault=function(){return this.controller.getGraphSettings().zoomedDefault},t}(r.Class);t.default=o}),define("main/reset-button-view",["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-reset-container")},r.createElement(i.Tooltip,{tooltip:function(){
return e.controller.t("Reset")},gravity:this.const("w")},r.createElement("div",{class:r.const("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray"),role:r.const("button"),tabindex:r.const("0"),"aria-label":function(){return e.controller.t("Reset")},onTap:this.bindFn(this.reset),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},r.createElement("i",{class:r.const("dcg-icon dcg-icon-reset"),"aria-hidden":r.const("true")}))))},t.prototype.reset=function(){this.controller.dispatch({type:"reset-graph"})},t}(r.Class);t.default=o}),define("main/pillbox-view",["require","exports","tslib","dcgview","./graphpaper-branding-view","./settings-view","./zoom-buttons-view","./reset-button-view","loadcss!pillboxes"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",null,r.createElement(c,{predicate:this.bindFn(this.shouldShowContainer)},function(){return r.createElement("div",{class:r.const("dcg-pillbox-container"),role:r.const("group"),"aria-label":function(){return e.controller.t("Graph Settings Controls")}},r.createElement("div",{class:r.const("dcg-overgraph-pillbox-elements"),style:e.bindFn(e.getContainerStyle)},r.createElement(c,{predicate:e.bindFn(e.shouldShowSettings)},function(){return r.createElement(o.default,{controller:e.props.controller})}),r.createElement(c,{predicate:e.bindFn(e.shouldShowResetButton)},function(){return r.createElement(s.default,{controller:e.props.controller})}),r.createElement(c,{predicate:e.bindFn(e.shouldShowZoomButtons)},function(){return r.createElement(a.default,{controller:e.props.controller})})))}),r.createElement(i.default,{controller:function(){return e.props.controller()}}))},t.prototype.getContainerStyle=function(){var e=this.controller.isKeypadOpen()?this.controller.getKeypadHeight():0;return this.controller.isGraphSettingsOpen()?"bottom: "+e+"px;":"bottom: auto"},t.prototype.shouldShowContainer=function(){return this.shouldShowSettings()||this.shouldShowZoomButtons()||this.shouldShowResetButton()},t.prototype.shouldShowSettings=function(){return this.controller.getGraphSettings().config.settingsMenu},t.prototype.shouldShowZoomButtons=function(){return this.controller.getGraphSettings().config.zoomButtons},t.prototype.shouldShowResetButton=function(){return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper&&this.controller.hasDefaultState()},t}(r.Class);t.default=l}),define("loadcss!main/toast-view",function(){}),define("main/toast-view",["require","exports","tslib","dcgview","loadcss!./toast-view"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToastView=void 0;var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("span",{class:r.const("dcg-toast")},r.createElement("i",{class:r.const("dcg-icon-error")}),r.createElement(i,{predicate:function(){return!e.props.showUndo()&&(!e.props.showClose||e.props.showClose())}},function(){return r.createElement("i",{class:r.const("dcg-icon-remove"),onTap:function(){return e.props.onClose&&e.props.onClose()},role:r.const("link"),tabindex:r.const(0),"aria-label":r.const("Dismiss Notice")})}),r.createElement("span",{class:r.const("dcg-msg"),"aria-atomic":function(){return!e.props.noAria()},"aria-live":function(){return e.props.noAria()?"":"assertive"}},function(){return e.props.t(e.props.message())}),r.createElement(i,{predicate:this.props.showUndo},function(){return r.createElement("a",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-undo"),onTap:function(){return e.props.onUndo&&e.props.onUndo()}},function(){return e.props.t("Undo")})}),r.createElement(i,{predicate:this.props.showLearnMore},function(){return r.createElement("a",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-learn-more-link"),target:r.const("_blank"),onTap:function(){return e.props.onLearnMore&&e.props.onLearnMore()}},function(){return e.props.t("Learn more")})}),r.createElement(i,{predicate:function(){return!!e.props.link&&!!e.props.link()}},function(){return r.createElement("a",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-learn-more-link"),target:r.const("_blank"),href:function(){return e.props.link().url}},function(){return e.props.link().text})}))},t.prototype.shouldUpdate=function(){return!!this.props.message()},t}(r.Class),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-toast-view":!0,"dcg-visible":!!e.props.message()}},"toast-style":function(){return e.props.toastStyle&&e.props.toastStyle()}},r.createElement(i,{predicate:function(){return!!e.props.message()}},function(){return r.createElement("div",{class:r.const("dcg-toast-wrapper")},r.createElement("div",{class:r.const("dcg-toast-cover")}),r.createElement(o,n.__assign({},e.props)))}))},t}(r.Class);t.ToastView=a}),define("main/disable-dragdrop-events",["require","exports"],function(e,t){"use strict";function n(e){e.on("drag dragend dragenter dragover dragleave drop",function(e){e.preventDefault(),e.stopPropagation()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("graphing-calc/views/main",["require","exports","tslib","touchtracking","ipad.scrollfix","dcgview","jquery","../../expressions/list-view","graphing-calc/keypads/main","main/pillbox-view","main/toast-view","main/disable-dragdrop-events","lib/tooltip"],function(e,t,n,r,i,o,a,s,c,l,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=o.Components.If,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.settings=function(){return this.controller.getGraphSettings()},t.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-calculator-api-container"),style:o.const("width: 100%; height: 100%; position: relative;")},o.createElement("div",{class:function(){return{"dcg-container":!0,"dcg-fullscreen":!e.controller.isListVisible(),"dcg-narrow":e.controller.isNarrow(),"dcg-PROJECTOR-MODE":e.settings().config.projectorMode,"dcg-inverted-colors":!!e.settings().config.invertedColors,"dcg-EDIT-LIST-MODE":e.controller.isInEditListMode(),"dcg-no-graphpaper":!e.settings().config.graphpaper,"dcg-no-branding":!e.settings().config.branding,"dcg-no-expression-topbar":!e.settings().config.expressionsTopbar,"dcg-default-border":!!e.settings().config.border,"dcg-no-hyperlinks":!e.settings().config.links,"dcg-has-background-color":e.controller.hasBackgroundColor(),"dcg-is-interactive":e.settings().config.expressions||!e.settings().config.lockViewport}},style:function(){return{"font-size":e.settings().config.fontSize+"px",background:e.getContainerBackgroundColor(),color:e.controller.getTextColor()}},role:o.const("application"),"aria-label":function(){return e.controller.t("Desmos Graphing Calculator")},"x-ms-format-detection":o.const("none"),didMount:this.bindFn(this.didMountRoot)},o.createElement(h,{predicate:function(){return e.controller.getGraphSettings().config.expressions}},function(){return o.createElement(s.default,{controller:e.props.controller})}),o.createElement(h,{predicate:function(){return e.controller.isListEnabled()&&!e.controller.isListVisible()}},function(){return o.createElement("div",{class:function(){return{"dcg-overgraph-icon-container":!0,"dcg-bottom-right":e.controller.isNarrow()}}},o.createElement(p.Tooltip,{tooltip:function(){return e.controller.t("Show List")},gravity:function(){return e.controller.isNarrow()?"nw":"se"}},o.createElement("div",{class:function(){return{"dcg-show-expressions-tab":!0,"dcg-overgraph-icon":!0,"dcg-rotated":e.controller.isNarrow()}},"aria-label":function(){return e.controller.t("Show List")},role:o.const("button"),tabindex:o.const("0"),onTap:function(){return e.controller.dispatch({type:"show-expressions-list"})}},o.createElement("i",{class:o.const("dcg-icon-show")}))))}),o.createElement(h,{predicate:this.bindFn(this.showHamburger)},function(){return o.createElement("div",{class:o.const("dcg-overgraph-icon-container")},o.createElement(p.Tooltip,{tooltip:function(){return e.controller.t("Open Graph")},gravity:e.const("se")},o.createElement("div",{role:o.const("button"),"aria-label":function(){return e.controller.t("Open Graph")},class:o.const("dcg-action-opendrawer dcg-in-api-action-opendrawer dcg-overgraph-icon"),onTap:function(){return e.controller.dispatch({type:"open-drawer"})}},o.createElement("i",{class:o.const("dcg-icon-hamburger")}))))}),o.createElement(l.default,{controller:this.props.controller}),o.createElement(u.ToastView,{message:function(){var t=e.controller.getToastData().message;return t||""},link:function(){return e.controller.getToastData().link||void 0},showUndo:function(){return!!e.controller.getToastData().undoCallback},showLearnMore:function(){return!!e.controller.getToastData().learnMoreCallback},noAria:function(){return!!e.controller.getToastData().noAria},toastStyle:function(){return e.controller.getToastData().toastStyle},t:this.controller.t,onUndo:function(){return e.controller.dispatch({type:"toast/undo"})},onLearnMore:function(){return e.controller.dispatch({type:"toast/learn-more"})},onClose:function(){return e.controller.dispatch({type:"toast/close"})}}),o.createElement("div",{class:o.const("dcg-grapher")}),o.createElement(h,{predicate:function(){return e.controller.getGraphSettings().config.keypad}},function(){return o.createElement(c.default,{controller:e.props.controller})})))},t.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&(!this.controller.isInEditListMode()&&this.controller.isNarrow())},t.prototype.getContainerBackgroundColor=function(){return this.controller.hasTransparentBackground()?"none":this.controller.getBackgroundColor()},t.prototype.didMountRoot=function(e){r.monitor(e),this.controller.getGraphSettings().config.disableScrollFix||i.limitScrollOnElement(e),this.setupFileDragDrop(e)},t.prototype.setupFileDragDrop=function(e){function t(){i=a(),r.off(".filedraggedover"),o.controller.dispatch({type:"file-is-not-dragged-over"})}var n=this,r=a(e);d.default(r);var i=a(),o=this;r.on("dragenter",function(e){n.controller.areImagesEnabled()&&(0===i.length&&r.on("dcg-tapstart.filedraggedover",t),i=i.add(e.target),n.controller.dispatch({type:"file-is-dragged-over"}))}).on("dragleave",function(e){i=i.not(e.target),0===i.length&&t()}).on("drop",t)},t}(o.Class);t.default=f}),define("worker/workerpoolconnection",["require","pjs","underscore_model"],function(e){"use strict";return e("pjs")(e("underscore_model").UnderscoreModel,function(e,t){e.init=function(e){t.init.call(this),this.workerPool=e,this.worker=e.allocateWorker(),this.worker.__connections[this.guid]=this},e.destroy=function(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]},e.killWorker=function(){this.worker.__isFake||this.workerPool.killWorker(this.worker)},e.onWorkerKilled=function(){},e.onResponse=function(e){},e.sendMessage=function(e){this.worker.__isFake?this.worker.postMessage(e):this.worker.postMessage({connectionId:this.guid,originalMessage:e})}})}),define("text!worker_src_underlying",[],function(){
return'var requirejs,require,define;!function(e){function t(e,t){return g.call(e,t)}function r(e,t){var r,n,i,a,o,s,u,c,l,p,f=t&&t.split("/"),h=m.map,d=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),c=0;c<e.length;c+=1)if("."===(p=e[c]))e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||d)&&h){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if((i=h[f.slice(0,l).join("/")])&&(i=i[n])){a=i,o=c;break}if(a)break;!s&&d&&d[n]&&(s=d[n],u=c)}!a&&s&&(a=s,o=u),a&&(r.splice(0,o,a),e=r.join("/"))}return e}function n(t,r){return function(){return l.apply(e,v.call(arguments,0).concat([t,r]))}}function i(e){return function(t){return r(t,e)}}function a(e){return function(t){h[e]=t}}function o(r){if(t(d,r)){var n=d[r];delete d[r],y[r]=!0,c.apply(e,n)}if(!t(h,r)&&!t(y,r))throw new Error("No "+r);return h[r]}function s(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function u(e){return function(){return m&&m.config&&m.config[e]||{}}}var c,l,p,f,h={},d={},m={},y={},g=Object.prototype.hasOwnProperty,v=[].slice;p=function(e,t){var n,a=s(e),u=a[0];return e=a[1],u&&(u=r(u,t),n=o(u)),u?e=n&&n.normalize?n.normalize(e,i(t)):r(e,t):(e=r(e,t),a=s(e),u=a[0],e=a[1],u&&(n=o(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:n}},f={require:function(e){return n(e)},exports:function(e){var t=h[e];return void 0!==t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:u(e)}}},c=function(r,i,s,u){var c,l,m,g,v,b,x=[];if(u=u||r,"function"==typeof s){for(i=!i.length&&s.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(g=p(i[v],u),"require"===(l=g.f))x[v]=f.require(r);else if("exports"===l)x[v]=f.exports(r),b=!0;else if("module"===l)c=x[v]=f.module(r);else if(t(h,l)||t(d,l)||t(y,l))x[v]=o(l);else{if(!g.p)throw new Error(r+" missing "+l);g.p.load(g.n,n(u,!0),a(l),{}),x[v]=h[l]}m=s.apply(h[r],x),r&&(c&&c.exports!==e&&c.exports!==h[r]?h[r]=c.exports:m===e&&b||(h[r]=m))}else r&&(h[r]=s)},requirejs=require=l=function(t,r,n,i,a){return"string"==typeof t?f[t]?f[t](r):o(p(t,r).f):(t.splice||(m=t,r.splice?(t=r,r=n,n=null):t=e),r=r||function(){},"function"==typeof n&&(n=i,i=a),i?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),l)},l.config=function(e){return m=e,m.deps&&l(m.deps,m.callback),l},define=function(e,r,n){r.splice||(n=r,r=[]),t(h,e)||t(d,e)||(d[e]=[e,r,n])},define.amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs),define("core/vendor/almond",function(){}),define("pjs",[],function(){return function(e,t,r){function n(e){return"object"==typeof e}function i(e){return"function"==typeof e}function a(){}function o(s,u){function c(){var e=new l;return i(e.init)&&e.init.apply(e,arguments),e}function l(){}u===r&&(u=s,s=Object),c.Bare=l;var p,f=a[e]=s[e],h=l[e]=c[e]=new a;return h.constructor=c,c.mixin=function(t){return l[e]=c[e]=o(c,t)[e],c},(c.open=function(e){if(p={},i(e)?p=e.call(c,h,f,c,s):n(e)&&(p=e),n(p))for(var r in p)t.call(p,r)&&(h[r]=p[r]);return i(h.init)||(h.init=s),c})(u)}return o}("prototype",{}.hasOwnProperty)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("underscore",t):function(){var r=e._,n=t();e._=n,n.noConflict=function(){return e._=r,n}}()}(this,function(){function e(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)}function t(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)}}return function(){return e.apply(t,arguments)}}function r(e,r,n){return null==e?Ce:Bt(e)?t(e,r,n):Me(e)&&!Rt(e)?Fe(e):Ae(e)}function n(e,t){return r(e,t,1/0)}function i(t,i,a){return e.iteratee!==n?e.iteratee(t,i):r(t,i,a)}function a(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var a=Array(t+1);for(i=0;i<t;i++)a[i]=arguments[i];return a[t]=n,e.apply(this,a)}}function o(e){if(!Me(e))return{};if(tt)return tt(e);it.prototype=e;var t=new it;return it.prototype=null,t}function s(e){return function(t){return null==t?void 0:t[e]}}function u(e,t){return null!=e&&Ke.call(e,t)}function c(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function l(e){var t=st(e);return"number"==typeof t&&t>=0&&t<=ot}function p(e,r,n){r=t(r,n);var i,a;if(l(e))for(i=0,a=e.length;i<a;i++)r(e[i],i,e);else{var o=ne(e);for(i=0,a=o.length;i<a;i++)r(e[o[i]],o[i],e)}return e}function f(e,t,r){t=i(t,r);for(var n=!l(e)&&ne(e),a=(n||e).length,o=Array(a),s=0;s<a;s++){var u=n?n[s]:s;o[s]=t(e[u],u,e)}return o}function h(e){var r=function(t,r,n,i){var a=!l(t)&&ne(t),o=(a||t).length,s=e>0?0:o-1;for(i||(n=t[a?a[s]:s],s+=e);s>=0&&s<o;s+=e){var u=a?a[s]:s;n=r(n,t[u],u,t)}return n};return function(e,n,i,a){var o=arguments.length>=3;return r(e,t(n,a,4),i,o)}}function d(e,t,r){var n=l(e)?xt:pe,i=n(e,t,r);if(void 0!==i&&-1!==i)return e[i]}function m(e,t,r){var n=[];return t=i(t,r),p(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function y(e,t,r){return m(e,K(i(t)),r)}function g(e,t,r){t=i(t,r);for(var n=!l(e)&&ne(e),a=(n||e).length,o=0;o<a;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0}function v(e,t,r){t=i(t,r);for(var n=!l(e)&&ne(e),a=(n||e).length,o=0;o<a;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1}function b(e,t,r,n){return l(e)||(e=ae(e)),("number"!=typeof r||n)&&(r=0),St(e,t,r)>=0}function x(e,t){return f(e,Ae(t))}function _(e,t){return m(e,Fe(t))}function S(e,t){return d(e,Fe(t))}function M(e,t,r){var n,a,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=l(e)?e:ae(e);for(var u=0,c=e.length;u<c;u++)null!=(n=e[u])&&n>o&&(o=n)}else t=i(t,r),p(e,function(e,r,n){((a=t(e,r,n))>s||a===-1/0&&o===-1/0)&&(o=e,s=a)});return o}function E(e,t,r){var n,a,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e){e=l(e)?e:ae(e);for(var u=0,c=e.length;u<c;u++)null!=(n=e[u])&&n<o&&(o=n)}else t=i(t,r),p(e,function(e,r,n){((a=t(e,r,n))<s||a===1/0&&o===1/0)&&(o=e,s=a)});return o}function D(e){return w(e,1/0)}function w(e,t,r){if(null==t||r)return l(e)||(e=ae(e)),e[Re(e.length-1)];var n=l(e)?de(e):ae(e),i=st(n);t=Math.max(Math.min(t,i),0);for(var a=i-1,o=0;o<t;o++){var s=Re(o,a),u=n[o];n[o]=n[s],n[s]=u}return n.slice(0,t)}function T(e,t,r){var n=0;return t=i(t,r),x(f(e,function(e,r,i){return{value:e,index:n++,criteria:t(e,r,i)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")}function P(e,t){return function(r,n,a){var o=t?[[],[]]:{};return n=i(n,a),p(r,function(t,i){var a=n(t,i,r);e(o,t,a)}),o}}function I(e){return e?Rt(e)?Ze.call(e):kt(e)?e.match(dt):l(e)?f(e,Ce):ae(e):[]}function C(e){return null==e?0:l(e)?e.length:ne(e).length}function O(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[0]:L(e,e.length-t)}function L(e,t,r){return Ze.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function A(e,t,r){return null==e||e.length<1?null==t?void 0:[]:null==t||r?e[e.length-1]:N(e,Math.max(0,e.length-t))}function N(e,t,r){return Ze.call(e,null==t||r?1:t)}function F(e){return m(e,Boolean)}function q(e,t,r,n){n=n||[];for(var i=n.length,a=0,o=st(e);a<o;a++){var s=e[a];if(l(s)&&(Rt(s)||Vt(s)))if(t)for(var u=0,c=s.length;u<c;)n[i++]=s[u++];else q(s,t,r,n),i=n.length;else r||(n[i++]=s)}return n}function R(e,t){return q(e,t,!1)}function V(e,t,r,n){we(t)||(n=r,r=t,t=!1),null!=r&&(r=i(r,n));for(var a=[],o=[],s=0,u=st(e);s<u;s++){var c=e[s],l=r?r(c,s,e):c;t&&!r?(s&&o===l||a.push(c),o=l):r?b(o,l)||(o.push(l),a.push(c)):b(a,c)||a.push(c)}return a}function B(e){for(var t=[],r=arguments.length,n=0,i=st(e);n<i;n++){var a=e[n];if(!b(t,a)){var o;for(o=1;o<r&&b(arguments[o],a);o++);o===r&&t.push(a)}}return t}function k(e){for(var t=e&&M(e,st).length||0,r=Array(t),n=0;n<t;n++)r[n]=x(e,n);return r}function j(e,t){for(var r={},n=0,i=st(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function z(e){return function(t,r,n){r=i(r,n);for(var a=st(t),o=e>0?0:a-1;o>=0&&o<a;o+=e)if(r(t[o],o,t))return o;return-1}}function G(e,t,r,n){r=i(r,n,1);for(var a=r(t),o=0,s=st(e);o<s;){var u=Math.floor((o+s)/2);r(e[u])<a?o=u+1:s=u}return o}function U(e,t,r){return function(n,i,a){var o=0,s=st(n);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(r&&a&&s)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=t(Ze.call(n,o,s),De),a>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&a<s;a+=e)if(n[a]===i)return a;return-1}}function W(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),a=0;a<n;a++,e+=r)i[a]=e;return i}function Y(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(Ze.call(e,n,n+=t));return r}function X(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var a=o(e.prototype),s=e.apply(a,i);return Me(s)?s:a}function H(e,t){var r=function(n){var i=r.cache,a=""+(t?t.apply(this,arguments):n);return u(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return r.cache={},r}function Q(e,t,r){var n,i,a,o,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Jt(),n=null,o=e.apply(i,a),n||(i=a=null)},c=function(){var c=Jt();s||!1!==r.leading||(s=c);var l=t-(c-s);return i=this,a=arguments,l<=0||l>t?(n&&(clearTimeout(n),n=null),s=c,o=e.apply(i,a),n||(i=a=null)):n||!1===r.trailing||(n=setTimeout(u,l)),o};return c.cancel=function(){clearTimeout(n),s=0,n=i=a=null},c}function Z(e,t,r){var n,i,o=function(t,r){n=null,r&&(i=e.apply(t,r))},s=a(function(a){if(n&&clearTimeout(n),r){var s=!n;n=setTimeout(o,t),s&&(i=e.apply(this,a))}else n=Tt(o,t,this,a);return i});return s.cancel=function(){clearTimeout(n),n=null},s}function J(e,t){return Dt(t,e)}function K(e){return function(){return!e.apply(this,arguments)}}function $(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function ee(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function te(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}function re(e,t){var r=Ot.length,n=e.constructor,i=Bt(n)&&n.prototype||Xe,a="constructor";for(u(e,a)&&!b(t,a)&&t.push(a);r--;)(a=Ot[r])in e&&e[a]!==i[a]&&!b(t,a)&&t.push(a)}function ne(e){if(!Me(e))return[];if(et)return et(e);var t=[];for(var r in e)u(e,r)&&t.push(r);return Ct&&re(e,t),t}function ie(e){if(!Me(e))return[];var t=[];for(var r in e)t.push(r);return Ct&&re(e,t),t}function ae(e){for(var t=ne(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function oe(e,t,r){t=i(t,r);for(var n=ne(e),a=n.length,o={},s=0;s<a;s++){var u=n[s];o[u]=t(e[u],u,e)}return o}function se(e){for(var t=ne(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function ue(e){for(var t={},r=ne(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function ce(e){var t=[];for(var r in e)Bt(e[r])&&t.push(r);return t.sort()}function le(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var a=arguments[i],o=e(a),s=o.length,u=0;u<s;u++){var c=o[u];t&&void 0!==r[c]||(r[c]=a[c])}return r}}function pe(e,t,r){t=i(t,r);for(var n,a=ne(e),o=0,s=a.length;o<s;o++)if(n=a[o],t(e[n],n,e))return n}function fe(e,t,r){return t in r}function he(e,t){var r=o(e);return t&&At(r,t),r}function de(e){return Me(e)?Rt(e)?e.slice():Lt({},e):e}function me(e,t){return t(e),e}function ye(e,t){var r=ne(t),n=r.length;if(null==e)return!n;for(var i=Object(e),a=0;a<n;a++){var o=r[a];if(t[o]!==i[o]||!(o in i))return!1}return!0}function ge(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!==e)return t!==t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&ve(e,t,r,n)}function ve(t,r,n,i){t instanceof e&&(t=t._wrapped),r instanceof e&&(r=r._wrapped);var a=Je.call(t);if(a!==Je.call(r))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!=+t?+r!=+r:0==+t?1/+t==1/r:+t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object Symbol]":return He.valueOf.call(t)===He.valueOf.call(r)}var o="[object Array]"===a;if(!o){if("object"!=typeof t||"object"!=typeof r)return!1;var s=t.constructor,c=r.constructor;if(s!==c&&!(Bt(s)&&s instanceof s&&Bt(c)&&c instanceof c)&&"constructor"in t&&"constructor"in r)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===t)return i[l]===r;if(n.push(t),i.push(r),o){if((l=t.length)!==r.length)return!1;for(;l--;)if(!ge(t[l],r[l],n,i))return!1}else{var p,f=ne(t);if(l=f.length,ne(r).length!==l)return!1;for(;l--;)if(p=f[l],!u(r,p)||!ge(t[p],r[p],n,i))return!1}return n.pop(),i.pop(),!0}function be(e,t){return ge(e,t)}function xe(e){return null==e||(l(e)&&(Rt(e)||kt(e)||Vt(e))?0===e.length:0===ne(e).length)}function _e(e){return!(!e||1!==e.nodeType)}function Se(e){return function(t){return Je.call(t)==="[object "+e+"]"}}function Me(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function Ee(e){return!Wt(e)&&nt(e)&&!rt(parseFloat(e))}function De(e){return jt(e)&&rt(e)}function we(e){return!0===e||!1===e||"[object Boolean]"===Je.call(e)}function Te(e){return null===e}function Pe(e){return void 0===e}function Ie(e,t){if(!Rt(t))return u(e,t);for(var r=t.length,n=0;n<r;n++){var i=t[n];if(null==e||!Ke.call(e,i))return!1;e=e[i]}return!!r}function Ce(e){return e}function Oe(e){return function(){return e}}function Le(){}function Ae(e){return Rt(e)?function(t){return c(t,e)}:s(e)}function Ne(e){return null==e?function(){}:function(t){return Rt(t)?c(e,t):e[t]}}function Fe(e){return e=At({},e),function(t){return ye(t,e)}}function qe(e,r,n){var i=Array(Math.max(0,e));r=t(r,n,1);for(var a=0;a<e;a++)i[a]=r(a);return i}function Re(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}function Ve(e){var t=function(t){return e[t]},r="(?:"+ne(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}}function Be(e,t,r){Rt(t)||(t=[t]);var n=t.length;if(!n)return Bt(r)?r.call(e):r;for(var i=0;i<n;i++){var a=null==e?void 0:e[t[i]];void 0===a&&(a=r,i=n),e=Bt(a)?a.call(e):a}return e}function ke(e){var t=++rr+"";return e?e+t:t}function je(t,r,n){!r&&n&&(r=n),r=qt({},r,e.templateSettings);var i=RegExp([(r.escape||ir).source,(r.interpolate||ir).source,(r.evaluate||ir).source].join("|")+"|$","g"),a=0,o="__p+=\'";t.replace(i,function(e,r,n,i,s){return o+=t.slice(a,s).replace(or,sr),a=s+e.length,r?o+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":n?o+="\'+\\n((__t=("+n+"))==null?\'\':__t)+\\n\'":i&&(o+="\';\\n"+i+"\\n__p+=\'"),e}),o+="\';\\n",r.variable||(o="with(obj||{}){\\n"+o+"}\\n"),o="var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\\n"+o+"return __p;\\n";var s;try{s=new Function(r.variable||"obj","_",o)}catch(e){throw e.source=o,e}var u=function(t){return s.call(this,t,e)};return u.source="function("+(r.variable||"obj")+"){\\n"+o+"}",u}function ze(t){var r=e(t);return r._chain=!0,r}function Ge(t,r){return t._chain?e(r).chain():r}function Ue(t){return p(ce(t),function(r){var n=e[r]=t[r];e.prototype[r]=function(){var t=[this._wrapped];return Qe.apply(t,arguments),Ge(this,n.apply(e,t))}}),e}var We="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},Ye=Array.prototype,Xe=Object.prototype,He="undefined"!=typeof Symbol?Symbol.prototype:null,Qe=Ye.push,Ze=Ye.slice,Je=Xe.toString,Ke=Xe.hasOwnProperty,$e=Array.isArray,et=Object.keys,tt=Object.create,rt=We.isNaN,nt=We.isFinite,it=function(){},at=e.VERSION="1.10.2";e.iteratee=n;var ot=Math.pow(2,53)-1,st=s("length"),ut=h(1),ct=h(-1),lt=a(function(e,t,r){var n,i;return Bt(t)?i=t:Rt(t)&&(n=t.slice(0,-1),t=t[t.length-1]),f(e,function(e){var a=i;if(!a){if(n&&n.length&&(e=c(e,n)),null==e)return;a=e[t]}return null==a?a:a.apply(e,r)})}),pt=P(function(e,t,r){u(e,r)?e[r].push(t):e[r]=[t]}),ft=P(function(e,t,r){e[r]=t}),ht=P(function(e,t,r){u(e,r)?e[r]++:e[r]=1}),dt=/[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g,mt=P(function(e,t,r){e[r?0:1].push(t)},!0),yt=a(function(e,t){return vt(e,t)}),gt=a(function(e){return V(q(e,!0,!0))}),vt=a(function(e,t){return t=q(t,!0,!0),m(e,function(e){return!b(t,e)})}),bt=a(k),xt=z(1),_t=z(-1),St=U(1,xt,G),Mt=U(-1,_t),Et=a(function(e,t,r){if(!Bt(e))throw new TypeError("Bind must be called on a function");var n=a(function(i){return X(e,n,t,this,r.concat(i))});return n}),Dt=a(function(e,t){var r=Dt.placeholder,n=function(){for(var i=0,a=t.length,o=Array(a),s=0;s<a;s++)o[s]=t[s]===r?arguments[i++]:t[s];for(;i<arguments.length;)o.push(arguments[i++]);return X(e,n,this,this,o)};return n});Dt.placeholder=e;var wt=a(function(e,t){t=q(t,!1,!1);var r=t.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=Et(e[n],e)}}),Tt=a(function(e,t,r){return setTimeout(function(){return e.apply(null,r)},t)}),Pt=Dt(Tt,e,1),It=Dt(te,2),Ct=!{toString:null}.propertyIsEnumerable("toString"),Ot=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Lt=le(ie),At=le(ne),Nt=a(function(e,r){var n={},i=r[0];if(null==e)return n;Bt(i)?(r.length>1&&(i=t(i,r[1])),r=ie(e)):(i=fe,r=q(r,!1,!1),e=Object(e));for(var a=0,o=r.length;a<o;a++){var s=r[a],u=e[s];i(u,s,e)&&(n[s]=u)}return n}),Ft=a(function(e,t){var r,n=t[0];return Bt(n)?(n=K(n),t.length>1&&(r=t[1])):(t=f(q(t,!1,!1),String),n=function(e,r){return!b(t,r)}),Nt(e,n,r)}),qt=le(ie,!0),Rt=$e||Se("Array"),Vt=Se("Arguments"),Bt=Se("Function"),kt=Se("String"),jt=Se("Number"),zt=Se("Date"),Gt=Se("RegExp"),Ut=Se("Error"),Wt=Se("Symbol"),Yt=Se("Map"),Xt=Se("WeakMap"),Ht=Se("Set"),Qt=Se("WeakSet");!function(){Vt(arguments)||(Vt=function(e){return u(e,"callee")})}();var Zt=We.document&&We.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Zt&&(Bt=function(e){return"function"==typeof e||!1});var Jt=Date.now||function(){return(new Date).getTime()},Kt={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},$t=ue(Kt),er=Ve(Kt),tr=Ve($t),rr=0,nr=e.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},ir=/(.)^/,ar={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},or=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g,sr=function(e){return"\\\\"+ar[e]};p(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=Ye[t];e.prototype[t]=function(){var e=this._wrapped;return r.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0],Ge(this,e)}}),p(["concat","join","slice"],function(t){var r=Ye[t];e.prototype[t]=function(){return Ge(this,r.apply(this._wrapped,arguments))}}),e.prototype.value=function(){return this._wrapped},e.prototype.valueOf=e.prototype.toJSON=e.prototype.value,e.prototype.toString=function(){return String(this._wrapped)};var ur={default:e,VERSION:at,iteratee:n,restArguments:a,each:p,forEach:p,map:f,collect:f,reduce:ut,foldl:ut,inject:ut,reduceRight:ct,foldr:ct,find:d,detect:d,filter:m,select:m,reject:y,every:g,all:g,some:v,any:v,contains:b,includes:b,include:b,invoke:lt,pluck:x,where:_,findWhere:S,max:M,min:E,shuffle:D,sample:w,sortBy:T,groupBy:pt,indexBy:ft,countBy:ht,toArray:I,size:C,partition:mt,first:O,head:O,take:O,initial:L,last:A,rest:N,tail:N,drop:N,compact:F,flatten:R,without:yt,uniq:V,unique:V,union:gt,intersection:B,difference:vt,unzip:k,zip:bt,object:j,findIndex:xt,findLastIndex:_t,sortedIndex:G,indexOf:St,lastIndexOf:Mt,range:W,chunk:Y,bind:Et,partial:Dt,bindAll:wt,memoize:H,delay:Tt,defer:Pt,throttle:Q,debounce:Z,wrap:J,negate:K,compose:$,after:ee,before:te,once:It,keys:ne,allKeys:ie,values:ae,mapObject:oe,pairs:se,invert:ue,functions:ce,methods:ce,extend:Lt,extendOwn:At,assign:At,findKey:pe,pick:Nt,omit:Ft,defaults:qt,create:he,clone:de,tap:me,isMatch:ye,isEqual:be,isEmpty:xe,isElement:_e,isArray:Rt,isObject:Me,isArguments:Vt,isFunction:Bt,isString:kt,isNumber:jt,isDate:zt,isRegExp:Gt,isError:Ut,isSymbol:Wt,isMap:Yt,isWeakMap:Xt,isSet:Ht,isWeakSet:Qt,isFinite:Ee,isNaN:De,isBoolean:we,isNull:Te,isUndefined:Pe,has:Ie,identity:Ce,constant:Oe,noop:Le,property:Ae,propertyOf:Ne,matcher:Fe,matches:Fe,times:qe,random:Re,now:Jt,escape:er,unescape:tr,result:Be,uniqueId:ke,templateSettings:nr,template:je,chain:ze,mixin:Ue},cr=Ue(ur);return cr._=cr,cr}),function(){var e,t,r,n,i,a,o,s,u,c,l,p,f,h,d,m,y,g,v,b,x={};!function(e){function t(e,t){return e!==r&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}var r="object"==typeof x?x:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):e("object"==typeof module&&"object"==typeof module.exports?t(r,t(module.exports)):t(r))}(function(x){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};e=function(e,t){function r(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},n=function(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},i=function(e,t){return function(r,n){t(r,n,e)}},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}u((n=n.apply(e,t||[])).next())})},s=function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,a=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(o=u.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(e){r=[6,e],a=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var i,a,o,s,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},u=function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},c=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},l=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e},f=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n},h=function(e){return this instanceof h?(this.v=e,this):new h(e)},d=function(e,t,r){function n(e){l[e]&&(c[e]=function(t){return new Promise(function(r,n){p.push([e,t,r,n])>1||i(e,t)})})}function i(e,t){try{a(l[e](t))}catch(e){u(p[0][3],e)}}function a(e){e.value instanceof h?Promise.resolve(e.value.v).then(o,s):u(p[0][2],e)}function o(e){i("next",e)}function s(e){i("throw",e)}function u(e,t){e(t),p.shift(),p.length&&i(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=r.apply(e,t||[]),p=[];return c={},n("next"),n("throw"),n("return"),c[Symbol.asyncIterator]=function(){return this},c},m=function(e){function t(t,i){r[t]=e[t]?function(r){return(n=!n)?{value:h(e[t](r)),done:"return"===t}:i?i(r):r}:i}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r},y=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(i,a){n=e[t](n),r(i,a,n.done,n.value)})}}function r(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof c?c(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},g=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},b=function(e){return e&&e.__esModule?e:{default:e}},x("__extends",e),x("__assign",t),x("__rest",r),x("__decorate",n),x("__param",i),x("__metadata",a),x("__awaiter",o),x("__generator",s),x("__exportStar",u),x("__values",c),x("__read",l),x("__spread",p),x("__spreadArrays",f),x("__await",h),x("__asyncGenerator",d),x("__asyncDelegator",m),x("__asyncValues",y),x("__makeTemplateObject",g),x("__importStar",v),x("__importDefault",b)})}(),define("core/math/distance",["require","exports"],function(e,t){"use strict";function r(e){return e===1/0||e===-1/0}function n(e,t){return e>0==t>0?e+.5*(t-e):.5*(e+t)}function i(e,t,r,n,i,a){return e*n+t*i+r*a}function a(e,r,n,a,o,s,u,c,l){var p=t.hypot(u-a,c-o,l-s);return 0===p?0:i((e-a)/p,(r-o)/p,(n-s)/p,(u-a)/p,(c-o)/p,(l-s)/p)}function o(e,t,r,n,i,o){var s=a(e,t,0,r,n,0,i,o,0);return s<=0?[r,n]:s>=1?[i,o]:[r+s*(i-r),n+s*(o-n)]}function s(e,r,n,i,a,s){var u=o(e,r,n,i,a,s);return t.hypot(e-u[0],r-u[1])}function u(e,t,r){if(void 0===r&&(r=1),e===t)return!0;if(!isFinite(e)||!isFinite(t))return!1;if(r>50)throw new Error("Within "+(52-r)+" bits isn\'t really approximate any more");var n=Math.max(Math.max(Math.abs(e),Math.abs(t)),1);return n===n+(1===r?.5:Math.pow(.5,r))*Math.abs(t-e)}Object.defineProperty(t,"__esModule",{value:!0}),t.approx=t.pointToSegment=t.closestPointOnSegment=t.pointToSegmentParameter=t.mean=t.hypot=void 0;var c=Math.hypot&&Math.hypot(1/0,NaN)===1/0;t.hypot=c?Math.hypot:function(e,t,n){if(r(e)||r(t)||void 0!==n&&r(n))return 1/0;if(isNaN(e)||isNaN(t)||void 0!==n&&isNaN(n))return NaN;if(0===e&&0===t&&(void 0===n||0===n))return 0;for(var i=0,a=0,o=0;o<arguments.length;o+=1){var s=Math.abs(Number(arguments[o]));s>i&&(a*=i/s*(i/s),i=s),a+=0===s&&0===i?0:s/i*(s/i)}return i===1/0?1/0:i*Math.sqrt(a)},t.mean=n,t.pointToSegmentParameter=a,t.closestPointOnSegment=o,t.pointToSegment=s,t.approx=u}),define("core/math/poi",["require","exports","core/math/distance"],function(e,t,r){"use strict";function n(e,t){var n;e>t&&(n=e,e=t,t=n);var i=e>0,a=t>0,o=Math.abs(e)>.01,s=Math.abs(t)>.01;if(o||s)return r.mean(e,t);if(0===e)return t*Math.abs(t);if(0===t)return e*Math.abs(e);if(i!==a)return 0;var u=i?Math.sqrt(e*t):-Math.sqrt(e*t);return u>=e&&t>=u?u:r.mean(e,t)}function i(e,t,r,i,o){if(!isNaN(t)&&!isNaN(i)&&t<0!=i<0)for(;;){var s=n(e,r),u=o(s);if(!isFinite(u))return;if(s===e||s===r)return Math.abs(t)<=Math.abs(i)?[e,t]:[r,i];if(0===u)return a(e,t,s,u,r,i,o);t<0!=u<0?(r=s,i=u):(e=s,t=u)}}function a(e,t,r,i,a,u,c){var l;if(isFinite(i)){isFinite(t)||(l=o(e,t,r,i,c))&&(e=l[0],t=l[1]),isFinite(u)||(l=o(r,i,a,u,c))&&(a=l[0],u=l[1]);var p,f;p=t===i?[e,t]:s(e,t,r,i,c,i),f=u===i?[a,u]:s(r,i,a,u,c,i);var h;return p&&f&&(h=n(p[0],f[0])),void 0!==h?[h,c(h)]:void 0}}function o(e,t,r,i,a){if(isFinite(t)!==isFinite(i))for(;;){var o=n(e,r),s=a(o);if(o===e||o===r)return isFinite(t)?[e,t]:[r,i];isFinite(s)!==isFinite(t)?(r=o,i=s):(e=o,t=s)}}function s(e,t,r,i,a,o){if(t===o!=(i===o))for(;;){var s=n(e,r),u=a(s);if(s===e||s===r)return t===o?[e,t]:[r,i];u===o!=(t===o)?(r=s,i=u):(e=s,t=u)}}function u(e,t,r,i,o,s,u){if(e<r&&r<o&&isFinite(t)&&isFinite(i)&&isFinite(s)&&t!==i&&i!==s&&i>t==i>s)for(;;){var c=n(e,r),l=u(c),p=n(r,o),f=u(p);if(!isFinite(l)||!isFinite(f))return;if(c===e||c===r||p===r||p===o)return l>i==i>t?[c,l]:f>i==i>t?[p,f]:[r,i];if(l===i||f===i)return a(e,t,r,i,o,s,u);l>t==i>t&&l>t==l>i?(o=r,s=i,r=c,i=l):f>s==i>s&&f>i==f>s?(e=r,t=i,r=p,i=f):(e=c,t=l,o=p,s=f)}}function c(e,t){var r=e[0],n=e[1],i=t[0],a=t[1];return(i-r)*(i-r)+(a-n)*(a-n)}function l(e,t,r,i,a,o){var s,u,l,p,f,h,d,m,y,g=o(e),v=o(t),b=o(r),x=c(g,i),_=c(v,i),S=c(b,i);if(!(t<=e||r<=t)&&isFinite(x)&&isFinite(_)&&isFinite(S)&&!(_>=x||_>=S))for(;;){if(Math.abs(b[0]-g[0])<a&&Math.abs(b[1]-g[1])<a)return[e,r];var M=n(e,t),E=o(M),D=c(E,i),w=n(t,r),T=o(w),P=c(T,i);if(!isFinite(D)||!isFinite(P))return;if(M===e||M===t||w===t||w===r)return D<_&&D<P?[M,M]:P<D&&P<_?[w,w]:[t,t];if((D===_||P===_)&&(t=.5*(M+t),v=o(t),_=c(v,i),D===_||P===_))return[e,r];D<_&&D<P?(s=[t,M],r=s[0],t=s[1],u=[v,E],b=u[0],v=u[1],l=[_,D],S=l[0],_=l[1]):P<D&&P<_?(p=[t,w],e=p[0],t=p[1],f=[v,T],g=f[0],v=f[1],h=[_,P],x=h[0],_=h[1]):(d=[M,w],e=d[0],r=d[1],m=[E,T],g=m[0],b=m[1],y=[D,P],x=y[0],S=y[1])}}function p(e,t,r){return void 0===t&&(t=-1/0),void 0===r&&(r=1/0),Math.min(r,Math.max(t,e))}function f(e,t,r,n,i,a){var o,s,u,f,h;if(void 0!==n&&void 0!==i){h=r+.01*(r<.5*(n+i)?i-n:n-i)}else h=Math.abs(r)>1?1.00001*r:r+1e-5;var d=e(r),m=e(h),y=c(d,t),g=c(m,t);if(isFinite(y)&&isFinite(g)){if(y===g)return[r,h];for(g>y&&(o=[h,r],r=o[0],h=o[1],s=[m,d],d=s[0],m=s[1],u=[g,y],y=u[0],g=u[1]);isFinite(r)&&isFinite(h)&&r!==h;){if(void 0!==i&&h>i)return[i,i];if(void 0!==n&&h<n)return[n,n];var v=r+3*(h-r),b=e(v),x=c(b,t);if(!isFinite(x))return[r,h];if(x===g)return[r,h];if(x>g){var _=h>r?l(r,h,v,t,a,e):l(v,h,r,t,a,e);return _?[p(_[0],n,i),p(_[1],n,i)]:_}f=[h,g,v,x],r=f[0],y=f[1],h=f[2],g=f[3]}return[r,h]}}function h(e,t,r,n){return!r||!!n&&Math.min(c(e(n[0]),t),c(e(n[1]),t))<Math.min(c(e(r[0]),t),c(e(r[1]),t))}function d(e,t,r,n,i,a){var o=f(e,t,r,n,i,a);if(void 0!==n){var s=f(e,t,n,n,i,a);h(e,t,o,s)&&(o=s)}if(void 0!==i){var u=f(e,t,i,n,i,a);h(e,t,o,u)&&(o=u)}return o}function m(e,t,r,n,i,a,o,s){var u=Math.abs(n-t),c=Math.abs(a-n),l=Math.abs(s-a);return u>c&&u>l?[[e,t],[r,n]]:l>c&&l>u?[[i,a],[o,s]]:[[r,n],[i,a]]}function y(e,t,i,a,s,u,c,l){if(l||(l=0),!((i-e)*(s-i)<=0)&&isFinite(e)&&isFinite(i)&&isFinite(s)&&isFinite(t)&&isFinite(u)){if(!isFinite(a)){var p=o(e,t,i,a,c),f=o(i,a,s,u,c);if(!p||!f)return;return[p,f]}if(!(Math.abs(a-((s-i)*t+(i-e)*u)/(s-e))<l))for(;;){\nvar h=n(e,i),d=c(h),y=n(i,s),g=c(y),v=Math.abs(d-r.mean(t,a)),b=Math.abs(a-r.mean(d,g)),x=Math.abs(g-r.mean(a,u));if(v<=l&&b<=l&&x<=l)return;if(!isFinite(d)){var p=o(e,t,h,d,c),f=o(h,d,s,u,c);if(!p||!f)return;return[p,f]}if(!isFinite(g)){var p=o(e,t,y,g,c),f=o(y,g,s,u,c);if(!p||!f)return;return[p,f]}if(!(h!==e&&h!==i||y!==i&&y!==s))return Math.abs(a-t)>Math.abs(u-a)?[[e,t],[i,a]]:[[i,a],[s,u]];if(h===e||h===i)return m(e,t,i,a,y,g,s,u);if(y===i||y===s)return m(e,t,h,d,i,a,s,u);v>x&&v>=b?(s=i,u=a,i=h,a=d):x>v&&x>=b?(e=i,t=a,i=y,a=g):(e=h,t=d,s=y,u=g)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.bisectJump=t.findLocalClosestPointOnParametric=t.bisectClosestPointOnParametric=t.bisectExtremum=t.bisectFinite=t.flatCenter=t.bisectZero=t.floatMiddle=void 0,t.floatMiddle=n,t.bisectZero=i,t.flatCenter=a,t.bisectFinite=o,t.bisectExtremum=u,t.bisectClosestPointOnParametric=l,t.findLocalClosestPointOnParametric=d,t.bisectJump=y}),define("core/math/curve-accumulator",["require","exports","core/math/distance"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accumulator=void 0;var n=function(){function e(e){e?(this.xtolerance=e.xtolerance||e.tolerance||0,this.ytolerance=e.ytolerance||e.tolerance||0,this.ztolerance=e.ztolerance||e.tolerance||0,this.map=e.map):this.xtolerance=this.ytolerance=this.ztolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}return e.prototype.colinear=function(e,t,n){this.map&&(e=this.map(e),t=this.map(t),n=this.map(n));var i=r.pointToSegmentParameter(n[0],n[1],n[2]||0,e[0],e[1],e[2]||0,t[0],t[1],t[2]||0);if(i<1)return!1;var a=[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1]),3===e.length?e[2]+i*(t[2]-e[2]):0];return Math.abs(n[0]-a[0])<=this.xtolerance&&Math.abs(n[1]-a[1])<=this.ytolerance&&(2===e.length||Math.abs(n[2]-a[2])<=this.ztolerance)},e.prototype.addPoint=function(e){if(this.dimensions=e.length,this.xtolerance<0&&this.ytolerance<0&&(2===this.dimensions||this.ztolerance<0))return void this.segment.push.apply(this.segment,e);if(!this.segment.length)return void this.segment.push.apply(this.segment,e);var t=2===this.dimensions?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=e,void(this.pendingPoint=e);(!this.colinear(t,this.pivotPoint,e)||r.hypot(t[0]-e[0],t[1]-e[1],(t[2]||0)-(e[2]||0))<r.hypot(t[0]-this.pendingPoint[0],t[1]-this.pendingPoint[1],(t[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=e),this.pendingPoint=e}},e.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)},e.prototype.breakSegment=function(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]},e.prototype.getSegments=function(){return this.breakSegment(),this.segments},e.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},e}();t.Accumulator=n}),define("core/math/implicit-plotter",["require","exports","core/math/distance","./curve-accumulator"],function(e,t,r,n){"use strict";function i(e,t){var r=a(e,t);return{segments:r.contours.strokeSegments,fillSegments:r.contours.fillSegments,resolved:r.quadTree.resolved}}function a(e,t){var r=Math.pow(2,-W),n=c(t,r),i=c(t,2*r),a=f(e,n,i),o=P(a.root,e,n);return{paddedDomain:n,rootDomain:i,quadTree:a,triangles:o,contours:j(o,e,n)}}function o(e,t,r){return{x:e,y:t,z:r}}function s(e,t,r){return{x:e,y:t,isZero:r}}function u(e,t,r){return{vertices:[e,t,r],visited:!1,next:void 0}}function c(e,t){var r=(1+t)*e.xmin-t*e.xmax,n=(1+t)*e.xmax-t*e.xmin;return{xmin:r,ymin:(1+t)*e.ymin-t*e.ymax,xmax:n,ymax:(1+t)*e.ymax-t*e.ymin,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function l(e,t){return{depth:e,vertices:t,children:void 0,center:void 0}}function p(e,t,r){e.center=E(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],t,r)}function f(e,t,r){var n=h(e,r),i=[],a=[];a.push(n);var o=1,s=!0;e:for(;a.length;){var u=i;i=a,a=u;for(var c=void 0;c=i.pop();)if(m(c,e,t)){if(d(c,e),!c.children){s=!1;break e}if(a.push(c.children[0]),a.push(c.children[1]),a.push(c.children[2]),a.push(c.children[3]),(o+=3)>=Y){s=!1;break e}}else p(c,e,t)}for(var l=0;l<i.length;l++)p(i[l],e,t);for(var l=0;l<a.length;l++)p(a[l],e,t);return{root:n,resolved:s}}function h(e,t){var r=t.xmin,n=t.xmax,i=t.ymin,a=t.ymax;return l(0,[_(r,a,e),_(n,a,e),_(n,i,e),_(r,i,e)])}function d(e,t){var r=e.depth+1,n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],o=e.vertices[3],s=S(n,i,t),u=S(i,a,t),c=S(a,o,t),p=S(o,n,t),f=S(n,a,t);e.children=[l(r,[n,s,f,p]),l(r,[s,i,u,f]),l(r,[f,u,a,c]),l(r,[p,f,c,o])]}function m(e,t,r){if(e.depth<W)return!0;if(b(e,r))return!1;if(v(e,r))return!1;var n=e.vertices[0],i=e.vertices[1],a=e.vertices[2],o=e.vertices[3];if(isNaN(n.z)&&isNaN(i.z)&&isNaN(a.z)&&isNaN(o.z))return!1;if(isNaN(n.z)||isNaN(i.z)||isNaN(a.z)||isNaN(o.z))return!0;var s=E(n,i,a,o,t,r),u=M(n,i,t,r),c=M(i,a,t,r),l=M(a,o,t,r),p=M(o,n,t,r);return g(n,u,t)||g(i,u,t)||g(i,c,t)||g(a,c,t)||g(a,l,t)||g(o,l,t)||g(o,p,t)||g(n,p,t)||y(n,u,s,t,r)||y(u,i,s,t,r)||y(i,c,s,t,r)||y(c,a,s,t,r)||y(a,l,s,t,r)||y(l,o,s,t,r)||y(o,p,s,t,r)||y(p,n,s,t,r)}function y(e,t,n,i,a){if(e.z>0==t.z>0&&t.z>0==n.z>0)return!1;var o,s,u,c;if(e.z>0==t.z>0){if(o=S(e,t,i),o.z>0!=e.z>0)return!0;s=w(e,n,i,a),u=w(t,n,i,a),c=w(o,n,i,a)}else if(t.z>0==n.z>0){if(o=S(t,n,i),o.z>0!=t.z>0)return!0;s=w(t,e,i,a),u=w(n,e,i,a),c=w(o,e,i,a)}else{if(o=S(n,e,i),o.z>0!=n.z>0)return!0;s=w(n,t,i,a),u=w(e,t,i,a),c=w(o,t,i,a)}var l=a.xtolerance,p=a.ytolerance;return r.pointToSegment(p*c.x,l*c.y,p*s.x,l*s.y,p*u.x,l*u.y)>l*p}function g(e,t,r){if(isNaN(e.z)&&isNaN(t.z))return!1;if(isNaN(e.z)||isNaN(t.z))return e.z>0||t.z>0;var n=S(e,t,r),i=4*n.z-t.z-3*e.z,a=(r(.9999*e.x+1e-4*t.x,.9999*e.y+1e-4*t.y)-e.z)/1e-4,o=Math.max(Math.abs(e.z),Math.abs(t.z));return Math.abs(i-a)>.125*o}function v(e,t){return e.vertices[1].x-e.vertices[0].x<10*t.xtolerance||e.vertices[0].y-e.vertices[3].y<10*t.ytolerance}function b(e,t){return e.vertices[0].x<t.xmin||e.vertices[0].y>t.ymax||e.vertices[2].x>t.xmax||e.vertices[2].y<t.ymin}function x(e,t){return e.x<t.xmin||e.x>t.xmax||e.y<t.ymin||e.y>t.ymax}function _(e,t,r){return o(e,t,r(e,t))}function S(e,t,r){return _(.5*(e.x+t.x),.5*(e.y+t.y),r)}function M(e,t,r,n){if(x(e,n)||x(t,n))return S(e,t,r);if(isNaN(e.z)||isNaN(t.z))return T(e,t,r,n);if(e.z>0!=t.z>0)return S(e,t,r);var i=r(.99*e.x+.01*t.x,.99*e.y+.01*t.y)-e.z,a=t.z-r(.01*e.x+.99*t.x,.01*e.y+.99*t.y);return isNaN(i)||isNaN(a)?S(e,t,r):i>0==a>0?S(e,t,r):D(o(e.x,e.y,i),o(t.x,t.y,a),r)}function E(e,t,r,n,i,a){var o=M(e,r,i,a);return e.z>0==r.z>0&&o.z>0!=e.z>0?o:(o=M(t,n,i,a),t.z>0==n.z>0&&o.z>0!=t.z>0?o:S(e,r,i))}function D(e,t,r){if(isNaN(e.z))return t;if(isNaN(t.z))return e;if(isFinite(e.z)||isFinite(t.z)){if(isFinite(e.z)){if(isFinite(t.z)){var n=1-e.z/t.z,i=1-t.z/e.z;return _(e.x/n+t.x/i,e.y/n+t.y/i,r)}return e}return t}return S(e,t,r)}function w(e,t,r,n){var i=e.x,a=t.x,u=e.y,c=t.y,l=e.z,p=t.z,f=n.xtolerance,h=n.ytolerance;if(x(e,n)||x(t,n)){var d=S(e,t,r);return s(d.x,d.y,!1)}for(;Math.abs(i-a)>f||Math.abs(u-c)>h;){var m=.5*(i+a),y=.5*(u+c),g=r(m,y);g>0==l>0?(i=m,u=y,l=g):(a=m,c=y,p=g)}if(isNaN(l))return s(a,c,!1);if(isNaN(p))return s(i,u,!1);var v=D(o(i,u,l),o(a,c,p),r),b=0===l||0===p||0===v.z||v.z>=l==p>=v.z&&Math.abs(v.z)<1e250;return s(v.x,v.y,b)}function T(e,t,r,n){if(isNaN(e.z)===isNaN(t.z))return S(e,t,r);if(isNaN(e.z)){var i=e;e=t,t=i}for(var a=e.x,s=t.x,u=e.y,c=t.y,l=e.z,p=n.xtolerance,f=n.ytolerance;Math.abs(a-s)>p||Math.abs(u-c)>f;){var h=.5*(a+s),d=.5*(u+c),m=r(h,d);isNaN(m)===isNaN(l)?(a=h,u=d,l=m):(s=h,c=d)}return o(a,u,l)}function P(e,t,r){var n={triangles:[],edgeCache:{},domain:r,fn:t};return I(e,n),n.triangles}function I(e,t){e.children&&(I(e.children[0],t),I(e.children[1],t),I(e.children[2],t),I(e.children[3],t),C(e.children[0],e.children[1],t),C(e.children[3],e.children[2],t),O(e.children[1],e.children[2],t),O(e.children[0],e.children[3],t))}function C(e,t,r){e.children&&t.children?(C(e.children[1],t.children[0],r),C(e.children[2],t.children[3],r)):e.children?(C(e.children[1],t,r),C(e.children[2],t,r)):t.children?(C(e,t.children[0],r),C(e,t.children[3],r)):L(e,t,r)}function O(e,t,r){e.children&&t.children?(O(e.children[2],t.children[1],r),O(e.children[3],t.children[0],r)):e.children?(O(e.children[2],t,r),O(e.children[3],t,r)):t.children?(O(e,t.children[1],r),O(e,t.children[0],r)):A(e,t,r)}function L(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[1],e.vertices[2],r.fn,r.domain),i=N(e.vertices[1],t.center,e.vertices[2],e.center,n)):(n=M(t.vertices[0],t.vertices[3],r.fn,r.domain),i=N(t.vertices[0],t.center,t.vertices[3],e.center,n)),R(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function A(e,t,r){if(e.center&&t.center){var n,i;e.depth>=t.depth?(n=M(e.vertices[3],e.vertices[2],r.fn,r.domain),i=N(e.vertices[2],t.center,e.vertices[3],e.center,n)):(n=M(t.vertices[1],t.vertices[0],r.fn,r.domain),i=N(t.vertices[1],t.center,t.vertices[0],e.center,n)),R(i,r.edgeCache,r.domain);for(var a=0;a<4;a++)r.triangles.push(i[a])}}function N(e,t,r,n,i){return[u(e,i,t),u(t,i,r),u(r,i,n),u(n,i,e)]}function F(e,t,r){return e.z>0&&!x(e,r)&&(!(t.z>0)||x(t,r))}function q(e,t){return e.x+","+e.y+","+t.x+","+t.y}function R(e,t,r){V(e[0],e[1],e[2],q(e[1].vertices[2],e[1].vertices[0]),t,r),V(e[1],e[2],e[3],q(e[2].vertices[0],e[2].vertices[2]),t,r),V(e[2],e[3],e[0],q(e[3].vertices[2],e[3].vertices[0]),t,r),V(e[3],e[0],e[1],q(e[0].vertices[0],e[0].vertices[2]),t,r)}function V(e,t,r,n,i,a){var o=t.vertices[0],s=t.vertices[1],u=t.vertices[2];F(s,u,a)&&(t.next=r),F(o,s,a)&&(t.next=e),F(u,o,a)&&k(t,n,i),F(o,u,a)&&B(t,n,i)}function B(e,t,r){r[t]?r[t].next=e:r[t]=e}function k(e,t,r){r[t]?e.next=r[t]:r[t]=e}function j(e,t,r){for(var i={fillAccumulator:new n.Accumulator(r),strokeAccumulator:new n.Accumulator(r),fn:t,domain:r},a=0;a<e.length;a++){var o=e[a];o.next&&!o.visited&&z(o,i)}return{strokeSegments:i.strokeAccumulator.finish().segments,fillSegments:i.fillAccumulator.finish().segments}}function z(e,t){for(;;){var r=e.vertices[0],n=e.vertices[1],i=e.vertices[2];if(G(r,n,t),G(n,i,t),G(i,r,t),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}t.strokeAccumulator.breakSegment(),t.fillAccumulator.breakSegment()}function G(e,t,r){if(F(e,t,r.domain)){var n=w(e,t,r.fn,r.domain);r.fillAccumulator.addPoint([n.x,n.y]),n.isZero?r.strokeAccumulator.addPoint([n.x,n.y]):r.strokeAccumulator.breakSegment()}}function U(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.displayTriangles=t.traceContours=t.triangulate=t.buildQuadTree=t.sampleImplicitDiagnostic=t.sampleImplicit=void 0;var W=5,Y=Math.pow(2,14);t.sampleImplicit=i,t.sampleImplicitDiagnostic=a,t.buildQuadTree=f,t.triangulate=P,t.traceContours=j,t.displayTriangles=U}),define("core/math/workerconfig",[],function(){"use strict";return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0}}),define("core/math/poi-finding-accumulator",["require","exports","core/math/workerconfig","tslib","./curve-accumulator","./poi"],function(e,t,r,n,i,a){"use strict";function o(e){return Math.abs(e)<5e-8}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.domain=t,i.fn=r,i.derivative=n,i.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},i.zeroBuffer=[],i.extremumBuffer=[],i}return n.__extends(t,e),t.prototype.getPOI=function(){return r.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},t.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},t.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},t.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||(e<this.domain.min||e>this.domain.max||isNaN(e))},t.prototype.addPoint=function(t){0===this.segment.length&&o(t[1])&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.updateZeroBuffer(t),this.updateExtremumBuffer(t),e.prototype.addPoint.call(this,t)},t.prototype.updateZeroBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.zeroBuffer.length){case 0:if(o(e[1]))return;return void this.zeroBuffer.push(e);case 1:if(0===e[1])return void this.zeroBuffer.push(e);if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=a.bisectZero(this.zeroBuffer[0][0],this.zeroBuffer[0][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e);case 2:if(0===e[1])return;if(e[1]>0!=this.zeroBuffer[0][1]>0){var t=a.flatCenter(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],e[0],e[1],this.fn);return t&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}return this.zeroBuffer.length=0,void this.zeroBuffer.push(e)}}},t.prototype.updateExtremumBuffer=function(e){if(this.fn){if(!isFinite(e[0])||!isFinite(e[1]))return void(this.zeroBuffer.length=0);switch(this.extremumBuffer.length){case 0:return void this.extremumBuffer.push(e);case 1:return e[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),void this.extremumBuffer.push(e);case 2:if(e[1]===this.extremumBuffer[1][1])return void this.extremumBuffer.push(e);if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1]);if(t){this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1]);!!!a.bisectJump(this.extremumBuffer[0][0],this.extremumBuffer[0][1],t[0],t[1],e[0],e[1],this.fn,this.ytolerance)&&t[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=t)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),void this.extremumBuffer.push(e);case 3:if(e[1]===this.extremumBuffer[1][1])return;if(e[1]>this.extremumBuffer[1][1]!=this.extremumBuffer[1][1]>this.extremumBuffer[0][1]){var t=void 0,r=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),n=this.fn(r);return t=n===this.extremumBuffer[1][1]?a.flatCenter(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1],this.fn):this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],r,n,this.extremumBuffer[2][0],this.extremumBuffer[2][1]),t&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}return this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}}},t.prototype.bisectExtremumUsingDerivative=function(e,t,r,n,i,o){if(this.fn){var s;if(this.derivative){var u=this.derivative(e),c=this.derivative(i);if(!isNaN(u)&&!isNaN(c)&&u<0!=c<0){var l=a.bisectZero(e,u,i,c,this.derivative);l&&(s=[l[0],this.fn(l[0])])}}return s||(s=a.bisectExtremum(e,t,r,n,i,o,this.fn)),s}},t.prototype.breakSegment=function(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),this.segment.length>2&&(this.segments.push(this.segment),o(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]},t.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},t.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},t}(i.Accumulator);t.default=s}),define("core/types/graphmode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETRIC_CURVE_3D=t.Z_3D=t.OBJECT3D=t.VISUALIZATION=t.NONE=t.IMPLICIT=t.POLYGONFILL=t.POLAR=t.PARAMETRIC=t.XYPOINT_MOVABLE=t.XYPOINT=t.Y=t.X=void 0,t.X=1,t.Y=2,t.XYPOINT=3,t.XYPOINT_MOVABLE=4,t.PARAMETRIC=5,t.POLAR=6,t.POLYGONFILL=7,t.IMPLICIT=8,t.NONE=10,t.VISUALIZATION=11,t.OBJECT3D=12,t.Z_3D=13,t.PARAMETRIC_CURVE_3D=14}),define("core/math/domaintypes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectDomains=t.allReals=t.knownDomain=t.unknownDomain=t.emptyDomain=void 0,t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(e){return isNaN(e[0])||isNaN(e[1])||e[1]<e[0]?t.emptyDomain():{type:"known",bounds:e}},t.allReals=function(){return t.knownDomain([-1/0,1/0])},t.intersectDomains=function(e,r){if("empty"===e.type||"empty"===r.type)return t.emptyDomain();if("unknown"===e.type||"unknown"===r.type)return t.unknownDomain();if(e.bounds&&r.bounds){var n=[Math.max(e.bounds[0],r.bounds[0]),Math.min(e.bounds[1],r.bounds[1])];return t.knownDomain(n)}return t.emptyDomain()}}),define("core/math/plotter",["require","exports","tslib","core/math/distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","core/types/graphmode","./domaintypes"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(e,t){for(var r,n=new s.default(t,e),i=t.min;i<=t.max+t.step/2;i+=t.step)r=e(i),isFinite(r)?n.addPoint([i,r]):n.breakSegment();return n.finish()}function p(e,t){var r=new s.default(t),n=e[0]+t.min*e[1],i=e[0]+t.max*e[1];return isFinite(n)&&isFinite(i)?(r.addPoint([t.min,n]),r.addPoint([t.max,i]),r.addLinearZero(e),r.addLinearIntercept(e),r.finish()):r.finish()}function f(e,t){var r=p(e[0],t),n=p(e[1],t);return r.segments.length&&n.segments.length&&4===r.segments[0].length&&4===n.segments[0].length?{segments:[[r.segments[0][1],n.segments[0][1],r.segments[0][3],n.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}}function h(e,t){var n=e(t);return{segments:[r.__spreadArrays(n,n)],resolved:!0}}function d(e,t,r){var a=r.fn,o=r.jumpTolerance,s=e[0],u=e[1],c=t[0],l=t[1],p=n.mean(s,c),f=a(p);return i.bisectJump(s,u,p,f,c,l,a,o)}function m(e,t,r){var n=t,i=e(n);return isFinite(i)||(n=t+r,i=e(n)),isFinite(i)||(n=t-r,i=e(n)),[n,i]}function y(e,t,r){var n,a,o,s,u,c,l,p=new O(e,t,r),f=t.step/10,h=t.min;n=m(e,h,f),l=n[0],c=n[1];var d=[l,c];isFinite(c)&&p.accumulator.addPoint([l,c]);for(var y=Math.ceil((t.max-t.min)/t.step),g=1;g<=y;g++)h=(y-g)/y*t.min+g/y*t.max,a=m(e,h,f),l=a[0],c=a[1],isFinite(c)&&isFinite(d[1])?(o=C(d,[l,c],p),l=o[0],c=o[1],p.accumulator.addPoint([l,c])):isFinite(c)&&!isFinite(d[1])?(u=i.bisectFinite(d[0],d[1],l,c,e))&&(u[0]!==l&&p.accumulator.addPoint(u),s=C(u,[l,c],p),l=s[0],c=s[1],p.accumulator.addPoint([l,c])):!isFinite(c)&&isFinite(d[1])&&(u=i.bisectFinite(d[0],d[1],l,c,e))&&(u=C(d,u,p),u[0]!==d[0]&&p.accumulator.addPoint(u),p.accumulator.breakSegment()),d=[l,c];return p.accumulator.finish()}function g(e){for(var t=e.fn,r=e.domain,n=r.min,i=r.max,a=Math.floor(n),o=Math.ceil(i),s=[],u=a;u<=o;u++){var c=t(u);isFinite(u)&&isFinite(c)&&s.push([u,c])}return{segments:s,resolved:!0}}function v(e,t,r,n){function i(e,t){var i=t%2==0?1:-1;if(!n&&-1===i)return!1;for(var a=t*(Math.PI/r),o=[u,u+1,u+2,u+3],s=!1,c=0,p=o.length;c<p;c++){var f=e(o[c]),h=e(o[c]+a);if(isFinite(f)&&isFinite(h)&&(s=!0),isFinite(f)!==isFinite(h)||Math.abs(f-i*h)>l)return!1}return!!s}var a,o,s,u=t.min,c=t.max-t.min,l=t.xtolerance&&t.ytolerance?Math.min(t.xtolerance,t.ytolerance):t.tolerance?t.tolerance:0,p=Math.floor(c/(Math.PI/r));for(a=1;a<=p;a++)if(i(e,a)){for(s=a,o=2;o*a<=p;o++)i(e,o*a)||(s=void 0);if(s)break}return s?s*(Math.PI/r):null}function b(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function x(e,t){return t.map=b,y(e,t)}function _(e,t){for(var r=e.min,n=e.max,i=e.step,a=n-r,o=Math.ceil(a/i),s=a/o,u=0;u<o;u++)t(r+u*s);t(n)}function S(e,t){if(t.max<t.min)return{segments:[],resolved:!0};var r=new o.Accumulator(t),n=t.min,i=e(n);isFinite(i[0])&&isFinite(i[1])&&r.addPoint(i);var a;return _(t,function(t){a=e(t),M(e,n,i,t,a,10,r),n=t,i=a}),r.finish()}function M(e,t,r,i,a,o,s){if(i!==t){var u=s.xtolerance,c=s.ytolerance,l=s.ztolerance,p=n.mean(t,i),f=e(p),h=isFinite(r[0])&&isFinite(r[1])&&(2===r.length||isFinite(r[2])),d=isFinite(a[0])&&isFinite(a[1])&&(2===a.length||isFinite(a[2])),m=isFinite(f[0])&&isFinite(f[1])&&(2===f.length||isFinite(f[2]));if(0===o||p===t||p===i)return s.breakSegment(),void(d&&s.addPoint(a));if(h||d){if(h!==d){for(var y=t,g=i,v=r,b=a;t!==p&&p!==i;)m==h?(t=p,r=f,h=m):(i=p,a=f,d=m),p=t+(i-t)/2,f=e(p),m=isFinite(f[0])&&isFinite(f[1])&&(2===f.length||isFinite(f[2]));return void(h?(M(e,y,v,t,r,o-1,s),s.breakSegment()):(s.breakSegment(),s.addPoint(a),M(e,i,a,g,b,o-1,s)))}if(h&&m&&d){var x=n.pointToSegmentParameter(f[0],f[1],f[2]||0,r[0],r[1],r[2]||0,a[0],a[1],a[2]||0);if(x>.2&&x<.8&&Math.abs(f[0]-(r[0]+x*(a[0]-r[0])))<=u&&Math.abs(f[1]-(r[1]+x*(a[1]-r[1])))<=c&&(2===r.length||Math.abs(f[2]-(r[2]+x*(a[2]-r[2])))<=l))return void s.addPoint(a)}r[0]===f[0]&&r[1]===f[1]||M(e,t,r,p,f,o-1,s),a[0]===f[0]&&a[1]===f[1]||M(e,p,f,i,a,o-1,s)}}}function E(e,t){for(var r=e.fn,n=t.xmin,i=t.xmax,a=t.ymin,o=t.ymax,s=(i-n)/30,u=(o-a)/30,c=[],l=[],p=[],f=s/1e3,h=u/1e3,d=0;d<30;d++)for(var m=0;m<30;m++){var y=n+d*s,g=a+m*u,v=r(y,g);c.push(y,g,v);var b=r(y+f,g)-v,x=r(y,g+h)-v,_=b*h,S=x*f,M=-f*h,E=Math.sqrt(_*_+S*S+M*M);l.push(_/E,S/E,M/E)}for(var d=0;d<29;d++)for(var m=0;m<29;m++){var D=30*m+d,w=30*m+d+1,T=30*(m+1)+d,P=30*(m+1)+d+1;p.push(D,T,w),p.push(T,P,w)}return{cacheKey:e.source+":"+JSON.stringify(t),positions:new Float32Array(c),normals:new Float32Array(l),faces:new Int16Array(p)}}function D(e){if(!e)return!1;var t=e.viewport.xmin,r=e.viewport.xmax,n=e.viewport.ymin,i=e.viewport.ymax;return!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(n)||!isFinite(i)||i<=n)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))}function w(e,t,r){var n,i,a=e.viewport.xmin,o=e.viewport.xmax,s=e.viewport.ymin,l=e.viewport.ymax,p=e.trigAngleMultiplier||1,f=e.oversample||4,h=1/f*(o-a)/e.screen.width,d=1/f*(l-s)/e.screen.height,m=t.domainBound;switch(t.graphMode){case u.X:switch(n=c.intersectDomains(c.knownDomain([s,l]),m),n.type){case"empty":return!1;case"known":s=n.bounds[0],l=n.bounds[1]}i={min:s,max:l,xtolerance:d,ytolerance:h,step:d};break;case u.Y:switch(n=c.intersectDomains(c.knownDomain([a,o]),m),n.type){case"empty":return!1;case"known":a=n.bounds[0],o=n.bounds[1]}i={min:a,max:o,xtolerance:h,ytolerance:d,step:h};break;case u.POLAR:if(!t.domain)throw new Error("Expected polar graph to have domain");if(i={min:t.domain.min,max:t.domain.max,step:2*Math.PI/p/1e3,tolerance:Math.min(h,d)},!t.domain.isExplicit){var y=v(r,i,p,"="===t.operator);y&&(i.max=i.min+y)}i.step=Math.max(i.step,(i.max-i.min)/11999);break;case u.PARAMETRIC:case u.PARAMETRIC_CURVE_3D:var g=t.domain?t.domain.min:0,b=t.domain?t.domain.max:1,x=t.domain?t.domain.step:.01;switch(n=c.intersectDomains(c.knownDomain([g,b]),m),n.type){case"empty":return!1;case"known":g=n.bounds[0],b=n.bounds[1]}i={min:g,max:b,step:x,xtolerance:h,ytolerance:d,ztolerance:Math.min(h,d)};break;case u.IMPLICIT:i={xmin:a,xmax:o,ymin:s,ymax:l,xtolerance:h,ytolerance:d};break;case u.Z_3D:return{xmin:-10,xmax:10,ymin:-10,ymax:10};default:return!1}return i}function T(e){var t,r,n,i=e.viewState,o=e.graphInfo,s=e.compiled,c=e.derivative,l=e.discrete,d=e.maxOverride,m=s.fn,v=w(i,o,m),b=o.graphMode;if(v){switch(b){case u.X:case u.Y:var _=c?c.fn:void 0;if(l){var M=v,D=M.min,T=M.max,P=M.step;t=g({fn:m,domain:{min:Math.max(D,0),max:void 0!==d?Math.min(d,T):T,step:P}})}else t=o.isLinear?p(o.linearCoefficients,v):y(m,v,_);break;case u.POLAR:t=x(m,v);break;case u.IMPLICIT:t=a.sampleImplicit(m,v);break;case u.PARAMETRIC:v.step||(v.step=(v.max-v.min)/1e3),t=v.max===v.min?h(m,v.min):o.isLinear?f(o.linearCoefficients,v):S(m,v);break;case u.PARAMETRIC_CURVE_3D:return v.step||(v.step=(v.max-v.min)/1e3),t=v.max===v.min?h(m,v.min):S(m,v),{graphMode:u.PARAMETRIC_CURVE_3D,segments:t.segments,cacheKey:s.source+":"+JSON.stringify(v),color:o.color,style:"dummy"};case u.Z_3D:return{meshData:E(s,v),color:o.color,graphMode:u.Z_3D,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},compiled:s,style:"dummy"};default:throw new Error("Programming Error: unexpected graphmode "+b)}n=t.poi}else t={segments:[],resolved:!0};if((!n||n.zeros.x.length+n.extrema.x.length+n.intercept.x.length>250)&&(n={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),b===u.X)for(var I in n)if(n.hasOwnProperty(I)){var C=I;r=n[C].y,n[C].y=n[C].x,n[C].x=r}var O={segments:t.segments,resolved:t.resolved,graphMode:b,color:o.color,style:l?o.pointStyle:o.lineStyle,lineWidth:o.lineWidth,lineOpacity:o.lineOpacity,operator:o.operator,poi:n,compiled:s};if(b===u.POLAR){var L=v;O.sampledDomain={min:L.min,max:L.max,step:L.step}}return t.fillSegments&&(O.fillSegments=t.fillSegments),O}function P(e,t,r){var n,i,a,o,s=[],c=null;switch(r){case u.POLAR:c=b;break;case u.X:c=function(e){return[e[1],e[0]]}}for(n=0;n<e.length;n++)for(o=e[n],i=0;i<o.length;i+=2)a=[o[i],o[i+1]],c&&(a=c(a)),s.push(a[0],a[1]);for(n=t.length-1;n>=0;n--)for(o=t[n],i=o.length-2;i>=0;i-=2)a=[o[i],o[i+1]],c&&(a=c(a)),s.push(a[0],a[1]);return s}function I(e,t,r){for(var i=function(e){var t=e[e.length-1];return t[t.length-2]},a=[],o=0,s=0,u=[],c=[],l=-1/0,p=-1/0;;){if(l<=p){if(o>=t.length)break;c.push(t[o++])}if(p<=l){if(s>=e.length)break;u.push(e[s++])}if(l=i(c),p=i(u),n.approx(l,p,4)){a.push(P(u,c,r)),c=[],u=[];var f=Math.max(l,p);l=f,p=f}}return a}Object.defineProperty(t,"__esModule",{value:!0});var C=function(e,t,r){var n=r.fn,i=r.jumpTolerance,a=r.accumulator;if(!isFinite(i)||i<=0)return t;var o=d(e,t,r);if(!o)return t;for(var s=(t[0]-e[0])/10,u=[-s,s],c=t,l=0;l<u.length;l++){var p=e[0]+u[l],f=n(p);isFinite(f)||(p=e[0],f=e[1],p=e[0],f=e[1]);var h=t[0]+u[l],m=n(h);if(isFinite(m)?c=[h,m]:(h=t[0],m=t[1]),d([p,f],[h,m],r)){var y=o[0],g=o[1];return a.addPoint(y),a.breakSegment(),a.addPoint(g),t}}return c},O=function(){function e(e,t,r){this.derivative=r,this.accumulator=new s.default(t,e,r),this.fn=e,this.jumpTolerance=t.ytolerance||t.tolerance||0}return e}();t.default={sampleXYNaive:l,sampleLinear:p,sampleXY:y,findPiPeriod:v,samplePolar:x,sampleParametricRecursive:S,subsampleParametricRecursive:M,validateViewState:D,computeDomain:w,computeGraphData:T,polygonsFromSegments:I}}),define("core/lib/worker-i18n",["require","exports"],function(e,t){"use strict";function r(e,t){return{msg:e,vars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.t=void 0,t.t=r}),define("core/math/mathshim",["require"],function(e){"use strict";var t={};return t.cosh=Math.cosh||function(e){return.5*(Math.exp(e)+Math.exp(-e))},t.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,.5*-r*Math.exp(e)*t.expm1(-2*e)},t.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(e){var r=e>0?1:-1;e=e>0?e:-e;var n=t.expm1(-2*e);return-r*n/(2+n)},t.acosh=Math.acosh||function(e){return e<1?NaN:Math.log(e+t.sqrtxsqm1(e))},t.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(e){var r=e>0?1:-1;return e=e>0?e:-e,1+e*e==1?r*t.log1p(e):r*Math.log(e+t.sqrtxsqp1(e))},t.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(e){return.5*(t.log1p(e)-t.log1p(-e))},t.expm1=Math.expm1||function(e){return e+.5*e*e===e?e:Math.exp(e)-1},t.log1p=Math.log1p||function(e){return e-.5*e*e===e?e:Math.log(1+e)},t.sqrtxsqp1=function(e){var t=e*e;return 1+t===1?1:1+t===t?Math.abs(e):Math.sqrt(t+1)},t.sqrtxsqm1=function(e){var t=e*e;return t<1?NaN:t-1===t?Math.abs(e):Math.sqrt(t-1)},t}),define("core/math/quadrature",["require","core/math/mathshim","core/math/poi"],function(e){"use strict";function t(e,t,r){return.5*(t*(2-r)+e*r)}function r(e,t,r){var n=.5*(t+r),i=l(t,e(t),n,e(n),r,e(r),e,0);return i?.5*(i[0][0]+i[1][0]):n}function n(e,t,r,n,i){return{x1:e,x2:t,value:r,error:n,minerror:i}}function i(e,r,n){var i=Math.abs(e(t(r,n,d))),a=Math.abs(e(t(r,n,2*d)));return!(i<d||a<d)&&i>1.95*a}function a(e,r,a){var o,s,u=t(a,r,v[0]),c=t(r,a,v[0]),l=e(u),f=e(c),h=t(r,a,1),d=e(h);if(isFinite(d)&&!isFinite(l)){if(o=p(u,l,h,d,e),Math.abs((o[0]-r)/(a-r))>y)return n(r,a,NaN,NaN,NaN);r=o[0],l=o[1]}if(isFinite(d)&&!isFinite(f)){if(s=p(h,d,c,f,e),Math.abs((s[0]-a)/(a-r))>y)return n(r,a,NaN,NaN,NaN);a=s[0],f=s[1]}if(isFinite(l)&&isFinite(f)&&!isFinite(d)){if(o=p(u,l,h,d,e),s=p(h,d,c,f,e),Math.abs((s[0]-o[0])/(a-r))>y)return n(r,a,NaN,NaN,NaN);d=.5*(o[1]+s[1])}if(i(e,r,a)||i(e,a,r))return n(r,a,NaN,NaN,NaN);for(var m=d,x=0,_=0,M=0,E=0,D=0,w=0,T=0;T<g;T+=4)D=e(t(r,a,v[T])),w=e(t(a,r,v[T])),E=Math.max(E,Math.abs(D),Math.abs(w)),x+=b[T]*(D+w),D=e(t(r,a,v[T+1])),w=e(t(a,r,v[T+1])),E=Math.max(E,Math.abs(D),Math.abs(w)),M+=b[T+1]*(D+w),D=e(t(r,a,v[T+2])),w=e(t(a,r,v[T+2])),E=Math.max(E,Math.abs(D),Math.abs(w)),_+=b[T+2]*(D+w),D=e(t(r,a,v[T+3])),w=e(t(a,r,v[T+3])),E=Math.max(E,Math.abs(D),Math.abs(w)),M+=b[T+3]*(D+w);var P,I=m+x,C=I+_,O=C+M,L=Math.abs(_-I),A=Math.abs(M-C),N=S*(a-r)*O,F=S*Math.abs(a-r)*E*b[0];return P=0===L?S*Math.abs(a-r)*A:S*Math.abs(a-r)*A*(A/L)*(A/L),P=Math.max(P,F),n(r,a,N,P,F)}function o(e){for(var t=-1/0,r=-1/0,n=-1,i=0,a=0;a<e.length;a++){var o=e[a];i+=o.value,o.error>t&&(t=o.error,n=a),o.minerror>r&&(r=o.minerror)}return{maxerror:t,maxminerror:r,maxindex:n,totalvalue:i}}function s(e,n,i,s){if(void 0===s&&(s=32),!isFinite(n)||!isFinite(i))return NaN;for(var u=[a(e,n,i)],c=o(u),l=1;l<s&&(!(Math.abs(c.maxerror/c.totalvalue)<=32*m||c.maxerror<=32*m||c.maxerror<=32*c.maxminerror)&&isFinite(c.maxerror)&&isFinite(c.maxminerror));l++){var p=u[u.length-1];u[u.length-1]=u[c.maxindex],u[c.maxindex]=p;var f=u.pop(),h=r(e,t(f.x2,f.x1,.125),t(f.x1,f.x2,.125));u.push(a(e,f.x1,h)),u.push(a(e,h,f.x2)),c=o(u)}return isFinite(c.maxerror)&&isFinite(c.maxminerror)?Math.abs(c.totalvalue)<=10*c.maxminerror?0:c.totalvalue:NaN}var u=e("core/math/mathshim"),c=e("core/math/poi"),l=c.bisectJump,p=c.bisectFinite,f=3.154019550531224,h=Math.pow(2,-13),d=h*h,m=d*d,y=d,g=32,v=[],b=[];!function(e,t){for(var r=g;r>0;r--){var n=f/g*r,i=u.sinh(n),a=u.cosh(Math.PI/2*i),o=1/(Math.exp(Math.PI/2*i)*a),s=u.cosh(n)/(a*a);e.push(o),t.push(s)}}(v,b);for(var x=0,_=0;_<b.length;_++)x+=b[_];var S=1/(1+2*x);return{quad:s}}),define("core/math/tofraction",["require","exports"],function(e,t){"use strict";function r(e,t){if(void 0===t&&(t=1e6),e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};for(var r,n,i,a=0,o=1,s=1,u=0;;){if(r=Math.floor(e),n=r*o+a,(i=r*u+s)>t)break;if(a=o,s=u,o=n,u=i,e===r)break;e=1/(e-r)}return{n:o,d:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),function(e){"use strict";function t(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e,t){return e<<t|e>>>32-t}function n(e,n,i,a,o,s){return t(r(t(t(n,e),t(a,s)),o),i)}function i(e,t,r,i,a,o,s){return n(t&r|~t&i,e,t,a,o,s)}function a(e,t,r,i,a,o,s){return n(t&i|r&~i,e,t,a,o,s)}function o(e,t,r,i,a,o,s){return n(t^r^i,e,t,a,o,s)}function s(e,t,r,i,a,o,s){return n(r^(t|~i),e,t,a,o,s)}function u(e,r){e[r>>5]|=128<<r%32,e[14+(r+64>>>9<<4)]=r;var n,u,c,l,p,f=1732584193,h=-271733879,d=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)u=f,c=h,l=d,p=m,f=i(f,h,d,m,e[n],7,-680876936),m=i(m,f,h,d,e[n+1],12,-389564586),\nd=i(d,m,f,h,e[n+2],17,606105819),h=i(h,d,m,f,e[n+3],22,-1044525330),f=i(f,h,d,m,e[n+4],7,-176418897),m=i(m,f,h,d,e[n+5],12,1200080426),d=i(d,m,f,h,e[n+6],17,-1473231341),h=i(h,d,m,f,e[n+7],22,-45705983),f=i(f,h,d,m,e[n+8],7,1770035416),m=i(m,f,h,d,e[n+9],12,-1958414417),d=i(d,m,f,h,e[n+10],17,-42063),h=i(h,d,m,f,e[n+11],22,-1990404162),f=i(f,h,d,m,e[n+12],7,1804603682),m=i(m,f,h,d,e[n+13],12,-40341101),d=i(d,m,f,h,e[n+14],17,-1502002290),h=i(h,d,m,f,e[n+15],22,1236535329),f=a(f,h,d,m,e[n+1],5,-165796510),m=a(m,f,h,d,e[n+6],9,-1069501632),d=a(d,m,f,h,e[n+11],14,643717713),h=a(h,d,m,f,e[n],20,-373897302),f=a(f,h,d,m,e[n+5],5,-701558691),m=a(m,f,h,d,e[n+10],9,38016083),d=a(d,m,f,h,e[n+15],14,-660478335),h=a(h,d,m,f,e[n+4],20,-405537848),f=a(f,h,d,m,e[n+9],5,568446438),m=a(m,f,h,d,e[n+14],9,-1019803690),d=a(d,m,f,h,e[n+3],14,-187363961),h=a(h,d,m,f,e[n+8],20,1163531501),f=a(f,h,d,m,e[n+13],5,-1444681467),m=a(m,f,h,d,e[n+2],9,-51403784),d=a(d,m,f,h,e[n+7],14,1735328473),h=a(h,d,m,f,e[n+12],20,-1926607734),f=o(f,h,d,m,e[n+5],4,-378558),m=o(m,f,h,d,e[n+8],11,-2022574463),d=o(d,m,f,h,e[n+11],16,1839030562),h=o(h,d,m,f,e[n+14],23,-35309556),f=o(f,h,d,m,e[n+1],4,-1530992060),m=o(m,f,h,d,e[n+4],11,1272893353),d=o(d,m,f,h,e[n+7],16,-155497632),h=o(h,d,m,f,e[n+10],23,-1094730640),f=o(f,h,d,m,e[n+13],4,681279174),m=o(m,f,h,d,e[n],11,-358537222),d=o(d,m,f,h,e[n+3],16,-722521979),h=o(h,d,m,f,e[n+6],23,76029189),f=o(f,h,d,m,e[n+9],4,-640364487),m=o(m,f,h,d,e[n+12],11,-421815835),d=o(d,m,f,h,e[n+15],16,530742520),h=o(h,d,m,f,e[n+2],23,-995338651),f=s(f,h,d,m,e[n],6,-198630844),m=s(m,f,h,d,e[n+7],10,1126891415),d=s(d,m,f,h,e[n+14],15,-1416354905),h=s(h,d,m,f,e[n+5],21,-57434055),f=s(f,h,d,m,e[n+12],6,1700485571),m=s(m,f,h,d,e[n+3],10,-1894986606),d=s(d,m,f,h,e[n+10],15,-1051523),h=s(h,d,m,f,e[n+1],21,-2054922799),f=s(f,h,d,m,e[n+8],6,1873313359),m=s(m,f,h,d,e[n+15],10,-30611744),d=s(d,m,f,h,e[n+6],15,-1560198380),h=s(h,d,m,f,e[n+13],21,1309151649),f=s(f,h,d,m,e[n+4],6,-145523070),m=s(m,f,h,d,e[n+11],10,-1120210379),d=s(d,m,f,h,e[n+2],15,718787259),h=s(h,d,m,f,e[n+9],21,-343485551),f=t(f,u),h=t(h,c),d=t(d,l),m=t(m,p);return[f,h,d,m]}function c(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function l(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function p(e){return c(u(l(e),8*e.length))}function f(e,t){var r,n,i=l(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=u(i,8*e.length)),r=0;r<16;r+=1)a[r]=909522486^i[r],o[r]=1549556828^i[r];return n=u(a.concat(l(t)),512+8*t.length),c(u(o.concat(n),640))}function h(e){var t,r,n="0123456789abcdef",i="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i}function d(e){return unescape(encodeURIComponent(e))}function m(e){return p(d(e))}function y(e){return h(m(e))}function g(e,t){return f(d(e),d(t))}function v(e,t){return h(g(e,t))}function b(e,t,r){return t?r?g(t,e):v(t,e):r?m(e):y(e)}"function"==typeof define&&define.amd?define("core/lib/md5",[],function(){return b}):"object"==typeof module&&module.exports?module.exports=b:e.md5=b}(this),define("core/math/builtin",["require","core/math/mathshim","core/math/distance","core/math/quadrature","core/math/tofraction","core/math/poi","core/lib/md5"],function(e){"use strict";function t(e,t,r){return Math.max(t,Math.min(r,e))}function r(e){return!(e>1e12)&&Math.round(m*e)*Math.PI===e}function n(e){if(e>1e12)return!1;var t=Math.round(2*m*e);return t%2==1&&t*Math.PI==2*e}function i(e,t,r){return r<0?p.tcdf(-1/0,e,t):r>0?p.tcdf(-1/0,-e,t):2*p.tcdf(-1/0,-Math.abs(e),t)}var a=e("core/math/mathshim"),o=e("core/math/distance"),s=e("core/math/quadrature"),u=e("core/math/tofraction").default,c=e("core/math/poi").floatMiddle,l=e("core/lib/md5"),p={};p.cosh=a.cosh,p.sinh=a.sinh,p.tanh=a.tanh,p.acosh=a.acosh,p.asinh=a.asinh,p.atanh=a.atanh,p.expm1=a.expm1,p.log1p=a.log1p,p.sqrtxsqp1=a.sqrtxsqp1,p.sqrtxsqm1=a.sqrtxsqm1,p.mod=function(e,t){return e-t*Math.floor(e/t)},p.round=function(e,t){if(void 0===t&&(t=0),0===(t=Math.round(t)))return Math.round(e);var r=Math.pow(10,t);return Math.round(e*r)/r},p.sign=Math.sign||function(e){return 0===e?0:e>0?1:e<0?-1:NaN},p.lcm=function(e,t){e=Math.round(e),t=Math.round(t);var r=p.gcd(e,t);return Math.abs(e/r*t)},p.gcd=function(e,t){if(e=Math.round(e),t=Math.round(t),e<0&&(e=-e),t<0&&(t=-t),t>e){var r=t;t=e,e=r}if(0===t)return e;for(var n=e%t;n>0;)e=t,t=n,n=e%t;return t},p.listGCD=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=p.gcd(t,e[r]);return t},p.listLCM=function(e){if(0===e.length)return NaN;for(var t=e[0],r=1;r<e.length;r++)t=p.lcm(t,e[r]);return t},p.nCr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var r=1,n=0;n<t;n++)r*=(e-n)/(n+1);return r},p.nPr=function(e,t){if(e=Math.round(e),(t=Math.round(t))>e||e<0||t<0)return 0;if(t===1/0||e===1/0)return NaN;for(var r=1,n=0;n<t;n++)r*=e-n;return r},p.factorial=function(e){return p.gamma(e+1)},p.gamma=function(e){if(e<0)return Math.PI/(p.sin(Math.PI*e)*p.gamma(1-e));if(e>170)return 1/0;var t,r=Math.round(e)===e;return t=e<15?f(e):e<120?h(e):Math.exp(d(e)),r?Math.round(t):t};var f=function(e){var t=1+e*(4.077131788261185+e*(7.024675027156382+e*(6.657107767450176+e*(3.766266976716022+e*(1.2792371666711133+e*(.24304596436338005+.020049769312165774*e)))))),r=1+e*(4.154347453162709+e*(7.270007565107539+e*(6.97805297331391+e*(3.989651532924167+e*(1.367176195613119+e*(.26175627691546965+.021742722739397567*e))))));return Math.E*Math.pow((1+e)/Math.E,1+e)/(e*Math.sqrt(1+e))*(t/r)},h=function(e){var t=e-1;return Math.pow(t,t)*Math.exp(g(t)-t)*Math.sqrt(2*Math.PI*t)},d=function(e){var t=e-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+g(t)};p.lnGamma=function(e){return e<0?NaN:e<15?Math.log(f(e)):d(e)},p.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],p.cotDerivative=function(e,t){if(e!==Math.floor(e))return NaN;if(e<0)return NaN;if(0===e)return 1/p.tan(t);var r=p.sin(t);if(1===e)return-1/(r*r);var n=p.cos(t);if(2===e)return 2*n/(r*r*r);var i,a,o,s,u,c=[0,2];for(a=3;a<=e;a++){for(i=[],o=0;o<a;o++)s=0,u=0,o>0&&(s=(a-o+1)*c[o-1]),o+2<a&&(u=(o+1)*c[o+1]),i.push(-(s+u));c=i}var l=0;for(o=e-1;o>=0;o--)l=i[o]+n*l;return l/Math.pow(r,e+1)},p.polyGamma=function(e,t){if(e<0)return NaN;if(e!==Math.floor(e))return NaN;var r=e%2==0?-1:1;if(t<0)return-r*p.polyGamma(e,1-t)-Math.pow(Math.PI,e+1)*p.cotDerivative(e,Math.PI*t);for(var n=p.factorial(e),i=0,a=Math.pow(t,-(e+1));t<10;)i+=a,t++,a=Math.pow(t,-(e+1));i+=0===e?-Math.log(t):a*t/e,i+=.5*a;for(var o=p.bernoulliTable,s=e+1,u=2,c=a*t*s/u,l=1/(t*t),f=1;f<=14;f++)c*=l,i+=c*o[f-1],s++,u++,c*=s/u,s++,u++,c*=s/u;return n*r*i},p.toFraction=u,p.log=function(e){var t=Math.log(e);return Math.exp(Math.round(t))===e?Math.round(t):t},p.log_base=function(e,t){if(0===t)return NaN;var r=Math.log(e)/Math.log(t);return Math.pow(t,Math.round(r))===e?Math.round(r):r},p.common_log=function(e){return p.log_base(e,10)},p.pow=function(e,t){if(!isFinite(e)&&0===t)return NaN;if(e>=0||t===Math.floor(t))return Math.pow(e,t);var r=p.toFraction(t,100);return o.approx(r.n/r.d,t,2)&&r.d%2==1?(r.n%2==0?1:-1)*Math.pow(-e,t):NaN},p.nthroot=function(e,t){return p.pow(e,1/t)};var m=1/Math.PI;p.sin=function(e){return r(Math.abs(e))?0:Math.sin(e)},p.cos=function(e){return n(Math.abs(e))?0:Math.cos(e)},p.tan=function(e){var t=Math.abs(e);return r(t)?0:n(t)?1/0:Math.tan(e)},p.sec=function(e){return n(Math.abs(e))?1/0:1/Math.cos(e)},p.csc=function(e){return r(Math.abs(e))?1/0:1/Math.sin(e)},p.cot=function(e){var t=Math.abs(e);return r(t)?1/0:n(t)?0:1/Math.tan(e)},p.acot=function(e){return Math.PI/2-Math.atan(e)},p.acsc=function(e){return Math.asin(1/e)},p.asec=function(e){return Math.acos(1/e)},p.sech=function(e){return 1/p.cosh(e)},p.csch=function(e){return 1/p.sinh(e)},p.coth=function(e){return 1/p.tanh(e)},p.asech=function(e){return p.acosh(1/e)},p.acsch=function(e){return p.asinh(1/e)},p.acoth=function(e){return p.atanh(1/e)},p.mean=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t/e.length},p.total=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t};var y=function(e){return e>50?Math.exp(.5*((1-e)*a.log1p(-1/(e-1))-1)+g(.5*(e-1))-g(.5*(e-2)))*Math.sqrt((1-1/e)/(2*Math.PI)):p.gamma((e+1)/2)/(p.gamma(e/2)*Math.sqrt(e*Math.PI))},g=function(e){var t=e*e;return(.08333333333333333-(.002777777777777778-(.0007936507936507937-(.0005952380952380953-.0008417508417508417/t)/t)/t)/t)/e};p.tpdf=function(e,t){return t<=0?NaN:y(t)*Math.pow(1+e*e/t,-(t+1)/2)};var v=function(e,t){if(t>0)return 1-v(e,-t);if(t===-1/0)return 0;var r=Math.sqrt(2*e/(e+1));if(Math.abs(t/r)<.001)return.5*(1+Math.sqrt(Math.PI)*y(e)*r*p.erf(t/r));if(t/e<-1e3){var n=t*t;return y(e)*Math.pow(e,.5*(e-1))*Math.pow(Math.abs(t),-e)*(1-e*e*(e+1)*(1/(2+e)+e*(e+3)/(4*(4+e)*n))/(2*n))}var i=Math.sqrt(t*t+e);return b((t+i)/(2*i),e/2,e/2)};p.tcdf=function(e,t,r){return r<=0?NaN:e===-1/0?v(r,t):e>0&&t>0?v(r,-e)-v(r,-t):v(r,t)-v(r,e)};var b=function(e,t,r){if(e<0||e>1)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===r)return e;if(0===e)return 0;if(1===e)return 1;if(0===t)return 1;if(0===r)return 0;var n=Math.exp(p.lnGamma(t+r)-p.lnGamma(t)-p.lnGamma(r)+t*Math.log(e)+r*a.log1p(-e));return e<(t+1)/(t+r+2)?n*x(e,t,r)/t:1-n*x(1-e,r,t)/r},x=function(e,t,r){var n,i,a,o,s,u,c,l,p,f=1;for(c=t+r,p=t+1,l=t-1,a=1,o=1-c*e/p,Math.abs(o)<1e-30&&(o=1e-30),o=1/o,u=o;f<=100&&(n=2*f,i=f*(r-f)*e/((l+n)*(t+n)),o=1+i*o,Math.abs(o)<1e-30&&(o=1e-30),a=1+i/a,Math.abs(a)<1e-30&&(a=1e-30),o=1/o,u*=o*a,i=-(t+f)*(c+f)*e/((t+n)*(p+n)),o=1+i*o,Math.abs(o)<1e-30&&(o=1e-30),a=1+i/a,Math.abs(a)<1e-30&&(a=1e-30),o=1/o,s=o*a,u*=s,!(Math.abs(s-1)<3e-7));f++);return u},_=function(e,t,r){return(e-t)/(Math.SQRT2*Math.abs(r))},S=function(e){return e<0?.5*Math.exp(-e*e)*p.erfcx(-e):1-.5*Math.exp(-e*e)*p.erfcx(e)};p.normalcdf=function(e,t,r,n){var i=_(t,r,n);if(e===-1/0)return S(i);var a=_(e,r,n);return e>0&&t>0?S(-a)-S(-i):S(i)-S(a)},p.normalpdf=function(e,t,r){return 1/Math.sqrt(2*Math.PI*r*r)*Math.exp(-(e-t)*(e-t)/(2*r*r))},p.random=function(e){var t=l(e);return(4294967296*(2097151&parseInt(t.slice(0,8),16))+parseInt(t.slice(8,16),16))/9007199254740992},p.shuffle=function(e,t){for(var r=t.length-1;r>0;r--){var n=e+"::sc"+r,i=Math.floor(p.random(n)*(r+1)),a=t[r];t[r]=t[i],t[i]=a}},p.randomPerm=function(e,t){for(var r=[],n=0;n<t;n++)r.push(n);return p.shuffle(e,r),r},p.uniformSample=function(e,t,r){return p.random(e)*(r-t)+t},p.normalSample=function(e,t,r){var n,i,a,o,s=0;do{n=e+"::sc"+s,s+=1,i=2*p.uniformSample(n,0,1)-1,n=e+"::sc"+s,s+=1,a=2*p.uniformSample(n,0,1)-1,o=i*i+a*a}while(o>=1||0===o);return t+r*i*Math.sqrt(-2*Math.log(o)/o)},p.tSample=function(e,t){if(t<=0)return NaN;var r,n,i,a,o=0;do{r=e+"::sc"+o,o+=1,n=2*p.uniformSample(r,0,1)-1,r=e+"::sc"+o,o+=1,i=2*p.uniformSample(r,0,1)-1,a=n*n+i*i}while(a>1);var s=n*n/a,u=t*(Math.pow(a,-2/t)-1);return r=e+"::sc"+o,o+=1,(p.uniformSample(r,0,1)<.5?-1:1)*Math.sqrt(s*u)},p.binomSample=function(e,r,n){return(r=t(Math.round(r),0,1/0))===1/0?NaN:(n=t(n,0,1),p.invBinom(p.uniformSample(e,0,1),r,n))},p.poissonSample=function(e,t){return t<=0?NaN:p.invPoisson(p.uniformSample(e,0,1),t)};var M=function(e,t,r){if(e>=t)return 1;if(e<0)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,o=1;o<=Math.min(t,e);o++)i*=(t-o+1)/o*n,a+=i;return a};p.binomcdf=function(e,r,n,i){return(n=t(Math.round(n),0,1/0))===1/0?NaN:(i=t(i,0,1),r<0?0:(e=Math.ceil(e),r=Math.floor(r),e===-1/0?M(r,n,i):M(r,n,i)-M(e-1,n,i)))},p.binompdf=function(e,r,n){return e=Math.round(e),(r=t(Math.round(r),0,1/0))===1/0?NaN:(n=t(n,0,1),e<0||e>r?0:p.nCr(r,e)*Math.pow(n,e)*Math.pow(1-n,r-e))},p.poissonpdf=function(e,t){return t<=0?NaN:(e=Math.round(e),e<0?0:Math.exp(-t+e*Math.log(t)-p.lnGamma(e+1)))};var E=function(e,t){if(e===1/0)return 1;if(e<0)return 0;for(var r=1,n=1,i=1;i<=e;i++){r*=t/i;var a=n;if((n+=r)===a)break}return Math.exp(-t)*n};p.poissoncdf=function(e,t,r){return r<=0?NaN:(e=Math.ceil(e),t=Math.floor(t),t<0?0:e===-1/0?E(t,r):E(t,r)-E(e-1,r))},p.uniformpdf=function(e,t,r){return r<=t?NaN:e<t||e>r?0:1/(r-t)};var D=function(e,t,r){return r<=t?NaN:e<t?0:e>r?1:(e-t)/(r-t)};p.uniformcdf=function(e,t,r,n){return D(t,r,n)-D(e,r,n)},p.erf=function(e){var t=-e*e;if(t<-750)return e>=0?1:-1;if(e>=.065)return 1-Math.exp(t)*p.erfcx(e);if(e<=-.065)return Math.exp(t)*p.erfcx(-e)-1;return e*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+.005223977625442188*t))))},p.erfcx=function(e){if(e<0)return e<-6.1?2*Math.exp(e*e):2*Math.exp(e*e)-p.erfcx(-e);if(e>50){var t=.5641895835477563,r=e*e;return e>5e7?t/e:t*(r*(r+4.5)+2)/(e*(r*(r+5)+3.75))}return(.9999999999999999+e*(2.224574423459406+e*(2.444115549920689+e*(1.7057986861852539+e*(.8257463703357973+e*(.28647031042892007+e*(.07124513844341643+e*(.012296749268608364+e*(.001347817214557592+7263959403471071e-20*e)))))))))/(1+e*(3.352953590554884+e*(5.227518529742423+e*(5.003720878235473+e*(3.266590890998987+e*(1.5255421920765353+e*(.5185887413188858+e*(.12747319185915415+e*(.02185979575963238+e*(.0023889438122503674+.00012875032817508128*e))))))))))},p.invNorm=function(e){var t,r,n;return e>.5?-p.invNorm(1-e):.5===e?0:e<0?NaN:0===e?-1/0:(e<.02425?(t=Math.sqrt(-2*Math.log(e)),n=(((((-.00778489400243029*t-.322396458041136)*t-2.40075827716184)*t-2.54973253934373)*t+4.37466414146497)*t+2.93816398269878)/((((.00778469570904146*t+.32246712907004)*t+2.445134137143)*t+3.75440866190742)*t+1)):(t=e-.5,r=t*t,n=(((((-39.6968302866538*r+220.946098424521)*r-275.928510446969)*r+138.357751867269)*r-30.6647980661472)*r+2.50662827745924)*t/(((((-54.4760987982241*r+161.585836858041)*r-155.698979859887)*r+66.8013118877197)*r-13.2806815528857)*r+1)),n-Math.sqrt(2*Math.PI)*(.5*p.erfcx(-n/Math.SQRT2)-Math.exp(.5*n*n)*e))},p.invPoisson=function(e,t){if(t<=0||e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return 1/0;for(var r=1,n=1,i=1;Math.exp(-t)*n<e;){if(r*=t/i,n+r===n)return 1/0;n+=r,i+=1}return i-1},p.invBinom=function(e,t,r){if(t!==Math.round(t))return NaN;if(r<0||r>1)return NaN;if(e<0||e>1)return NaN;if(0===e)return 0;if(1===e)return t;if(0===t)return 0;if(1===r)return t;if(0===r)return 0;for(var n=r/(1-r),i=Math.pow(1-r,t),a=i,o=1;a<e;){if(i*=(t-o+1)/o*n,a+i===a)return t;if(o>t)return t;a+=i,o+=1}return o-1},p.invT=function(e,t){if(isNaN(t)||t<=0||e<0||e>1)return NaN;if(0===e)return-1/0;if(1===e)return 1/0;if(1===t||2===t||4===t)return w(t,e);var r,n;return.5===e?0:e>.5?(r=t>1?p.invNorm(e):w(1,e),n=t>1?w(1,e):Math.pow(p.tpdf(0,t)*Math.pow(t,(t-1)/2)/(1-e),1/t),T(t,e,r,n)):-p.invT(1-e,t)};var w=function(e,t){var r=4*t*(1-t);switch(e){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/r);case 4:var n=Math.cos(Math.acos(Math.sqrt(r))/3)/Math.sqrt(r);return 2*Math.sign(t-.5)*Math.sqrt(n-1);default:throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")}},T=function(e,t,r,n){if(!isFinite(r)||!isFinite(n))return NaN;for(var i,a,o=r,s=n;;){if(i=c(o,s),a=v(e,i),i===o||i===s)return a>t?o:s;a<t?o=i:s=i}};return p.invUniform=function(e,t,r){return e<0||e>1||r<=t?NaN:0===e?t:1===e?r:t+e*(r-t)},p.tscore=function(e,t){var r=p.stdev(e);return(p.mean(e)-t)*Math.sqrt(e.length)/r},p.itscore=function(e,t){var r=e.length,n=p.mean(e),i=p.stdev(e),a=t.length,o=p.mean(t),s=p.stdev(t);return(n-o)/(Math.sqrt(((r-1)*i*i+(a-1)*s*s)/(r+a-2))*Math.sqrt(1/r+1/a))},p.ttest=function(e,t){1===arguments.length&&(t=0);var r=p.tscore(e,t),n=e.length-1;return{lessThan:i(r,n,-1),greaterThan:i(r,n,1),notEqual:i(r,n,0)}},p.ittest=function(e,t){var r=p.itscore(e,t),n=e.length+t.length-2;return{lessThan:i(r,n,-1),greaterThan:i(r,n,1),notEqual:i(r,n,0)}},p.stats=function(e){return{min:p.listMin(e),q1:p.quartile(e,1),median:p.median(e),q3:p.quartile(e,3),max:p.listMax(e)}},p.length=function(e){return e.length},p.listMin=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]<t&&(t=e[r])}return t},p.listMax=function(e){if(e.length<1)return NaN;var t=e[0];if(isNaN(t))return NaN;for(var r=1;r<e.length;r++){if(isNaN(e[r]))return NaN;e[r]>=t&&(t=e[r])}return t},p.quantile=function(e,t){if(!isFinite(t)||t<0||t>1)return NaN;if(e.some(isNaN))return NaN;if(0===e.length)return NaN;var r=e.length,n=p.sortPerm(e),i=t*(r-1);return Math.floor(i)===i?e[n[i]]:(Math.ceil(i)-i)*e[n[Math.floor(i)]]+(i-Math.floor(i))*e[n[Math.ceil(i)]]},p.quartile=function(e,t){if(!isFinite(t)||t<0||t>4)return NaN;if(e.some(isNaN))return NaN;var r=p.sortPerm(e),n=p.quartileIndex(e,t),i=Math.floor(n),a=Math.ceil(n);return(e[r[i]]+e[r[a]])/2},p.sortPerm=function(e){for(var t=e.length,r=[],n=0;n<t;n++)r.push(n);return r.sort(function(t,r){return e[t]-e[r]}),r},p.quartileIndex=function(e,t){t=Math.round(t);var r,n=e.length,i=n%2==1;return 1===n?0:(0===t&&(r=0),2===t&&(r=(n-1)/2),4===t&&(r=n-1),1===t&&(r=i?(n+1)/4-1:(n+2)/4-1),3===t&&(r=i?(3*n+3)/4-1:(3*n+2)/4-1),r)},p.upperQuantileIndex=function(e,t){return p.sortPerm(e)[Math.ceil(t*(e.length-1))]+1},p.lowerQuantileIndex=function(e,t){return p.sortPerm(e)[Math.floor(t*(e.length-1))]+1},p.upperQuartileIndex=function(e,t){return p.sortPerm(e)[Math.ceil(p.quartileIndex(e,t))]+1},p.lowerQuartileIndex=function(e,t){return p.sortPerm(e)[Math.floor(p.quartileIndex(e,t))]+1},p.median=function(e){return p.quantile(e,.5)},p.argMin=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++){if(isNaN(e[n]))return 0;e[n]<t&&(r=n,t=e[n])}return r+1},p.argMax=function(e){if(e.length<1)return 0;var t=e[0];if(isNaN(t))return 0;for(var r=0,n=1;n<e.length;n++)if(e[n]>=t){if(isNaN(e[n]))return 0;r=n,t=e[n]}return r+1},p.varp=function(e){for(var t=p.mean(e),r=0,n=0;n<e.length;n++){var i=e[n]-t;r+=i*i}return r/e.length},p.mad=function(e){for(var t=p.mean(e),r=0,n=0;n<e.length;n++)r+=Math.abs(e[n]-t);return r/e.length},p.var=function(e){var t=e.length;return p.varp(e)*t/(t-1)},p.covp=function(e,t){if(e.length!==t.length)return NaN;for(var r=e.length,n=p.mean(e),i=p.mean(t),a=0,o=0;o<r;o++)a+=(e[o]-n)*(t[o]-i);return a/r},p.cov=function(e,t){if(e.length!==t.length)return NaN;var r=e.length;return p.covp(e,t)*r/(r-1)},p.corr=function(e,t){if(e.length!==t.length)return NaN;for(var r,n,i=e.length,a=p.mean(e),o=p.mean(t),s=0,u=0,c=0,l=0;l<i;l++)r=e[l]-a,n=t[l]-o,s+=r*r,u+=n*n,c+=r*n;return c/Math.sqrt(s*u)},p.rank=function(e){var t=e.length;if(0===t)return[];for(var r=[],n=[],i=0;i<t;i++)n.push([e[i],i]);n.sort(function(e,t){var r=e[0],n=t[0];return r===1/0&&n===1/0||r===-1/0&&n===-1/0?0:r-n}),i=0;for(var a,o=1,s=1;i<t;){for(a=i;a<t-1&&n[a][0]===n[a+1][0];)a+=1;s=a-i+1;var u;for(a=0;a<s;a++)u=n[i+a][1],r[u]=isNaN(e[u])?NaN:o+.5*(s-1);o+=s,i+=s}return r},p.spearman=function(e,t){return p.corr(p.rank(e),p.rank(t))},p.stdev=function(e){return Math.sqrt(p.var(e))},p.stdevp=function(e){return Math.sqrt(p.varp(e))},p.quad=s.quad,p.distance=function(e,t){return o.hypot(t[0]-e[0],t[1]-e[1])},p.midpoint=function(e,t){return[.5*(e[0]+t[0]),.5*(e[1]+t[1])]},p}),define("core/math/functions",["require","exports","core/math/builtin"],function(e,t,r){"use strict";function n(e){for(var t=0,r=e;t<r.length;t++){var n=r[t].compiled;n&&a(n)}}function i(e){for(var t=0,r=e;t<r.length;t++){var n=r[t].compiled;n&&o(n)}}function a(e){delete e.fn}function o(e){e.fn=u(e.args,e.source)}function s(e,t){for(var r=[],n=0;n<t;n++)r.push("values["+n+"]");return u(["values"],"return "+e(r))}function u(e,t){var n=e.join(","),i="return (function("+n+\'){"use strict"; \'+t+"})";return new Function("BuiltIn",i)(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.closureFunctionWithBuiltIn=t.createEvaluateFunction=t.rehydrateCompiledFunction=t.dehydrateCompiledFunction=t.rehydrateGraphData=t.dehydrateGraphData=void 0,t.dehydrateGraphData=n,t.rehydrateGraphData=i,t.dehydrateCompiledFunction=a,t.rehydrateCompiledFunction=o,t.createEvaluateFunction=s,t.closureFunctionWithBuiltIn=u}),define("core/math/parser/input-span",["require","exports"],function(e,t){"use strict";function r(e,t,r){return{input:e,start:t,end:r}}function n(e,t){return r(e,t,t)}function i(e,t){if(e.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return r(e.input,e.start,t.end)}function a(e){return e.input.slice(e.start,e.end)}Object.defineProperty(t,"__esModule",{value:!0}),t.slice=t.joinSpans=t.emptySpanAt=t.Span=void 0,t.Span=r,t.emptySpanAt=n,t.joinSpans=i,t.slice=a}),define("core/math/policy",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPolicy=void 0;var r=["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"];t.defaultPolicy={assignmentForbidden:function(e){return!0},graphingEnabled:function(){return!1},isValidSlider:function(e){return!1},sliderVariables:function(e){return[]},ansEnabled:function(){return!1},disabledFeatures:function(){return r}}}),define("core/math/parsenode/base",["require","pjs","core/math/functions","core/math/parser/input-span","core/math/policy"],function(e){"use strict";var t=e("pjs"),r=e("core/math/functions"),n=e("core/math/parser/input-span"),i=e("core/math/policy").defaultPolicy;return t(function(e,t,a){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._exports=[]},e.exportPenalty=0;var o=0;e.tmpVar=function(){return"tmp"+o++},e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var t=this.getConcreteTree(i,e),r=t.getEvaluationInfo();return r?r[0].val:NaN},e.setInputSpan=function(e){this._inputSpan=e},e.getInputString=function(){return void 0===this._inputSpan?"":n.slice(this._inputSpan)},e.getInputSpan=function(){return this._inputSpan},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var t=0;t<e.length;t++)this.addDependency(e[t])},e.addDummyDependency=function(e){-1===this._dummyDependencies.indexOf(e)&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var t=0;t<e.length;t++)this.addDummyDependency(e[t])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var t=this._dependencies.indexOf(e);t>=0&&this._dependencies.splice(t,1)},e.dependsOn=function(e){return this._dependencies.indexOf(e)>-1},e.getExports=function(){return(this._exports||[]).concat(this.getAnsVariable())},e.getLegalExports=function(e){return this.getExports().filter(function(t){return!e.assignmentForbidden(t)})},e.exportsSymbol=function(e){return this._exports.indexOf(e)>-1},e.exportTo=function(e,t,r){for(var n=this.getLegalExports(e),i=0;i<n.length;i++){var a=n[i];if(r[a])return;r[a]=t.blocksExport?t:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.shouldPromoteToSlider=function(e){return!1},e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies())},e.getCompiledFunction=function(e){var t=this.getEvalStrings(),n=t.statements.join(";")+";return "+t.expression;if(void 0===e){e=this.getDependencies();var i=e.indexOf("x");if(-1!==i){var a=e[0];e[0]=e[i],e[i]=a}}return{args:e,source:n,fn:r.closureFunctionWithBuiltIn(e,n)}},e.getCompiledDerivative=function(){var e=this.getDependencies();return this.takeDerivative(e[0]||"x").getCompiledFunction()},e.asValue=function(){}})}),define("core/math/parsenode/error",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this._msg=e,this._sliderVariables=[],this.blocksExport=!0},e.evaluateOnce=function(e){return this._msg},e.isError=!0,e.getError=function(){return this._msg},e.setDependencies=function(e){return this._dependencies=e,this},e.allowExport=function(){return this.blocksExport=!1,this}})}),define("core/lib/label",["require","exports","underscore","core/math/distance","core/math/tofraction"],function(e,t,r,n,i){"use strict";function a(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var r,a,o,s=i.default(e/Math.PI,24);if(h(t)&&n.approx(s.n/s.d*Math.PI,e,3))return r=0===s.n?"0":1===s.n?"π":-1===s.n?"-π":s.n.toString()+"π",a=1===s.d?"":"/"+s.d.toString(),o=r+a,{ariaString:u(o),string:o,value:s.n/s.d*Math.PI};if(h(t))return o=f(l(e.toFixed(d(t)))),{ariaString:u(o),string:o,value:parseFloat(o)};var c=p(e.toExponential(d(t/e))).split("e"),m=c[0]+"×10",y=c[1].replace("+","");return o=p(e.toExponential(d(t/e))).replace("+",""),{ariaString:u(o),string:o,mantissa:m,superscript:y,value:parseFloat(o)}}function o(e){return T["["+e+"]"]}function s(e){return e[0]+e.slice(1).split("").join(" ")}function u(e){return e.replace(I,s).replace(P,o).replace(/ +/gi," ").trim()}function c(e,t,r,n){var i=a(e,t);return[i,a(n(i.value),r)]}function l(e){return-1===e.indexOf(".")?e:e.replace(C,"")}function p(e){var t=/\\.?0+e/;return e.replace(t,"e")}function f(e){return"-0"===e?"0":e}function h(e){return 1e-4<(e=Math.abs(e))&&e<1e7}function d(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function m(e){return 1e6/Math.sqrt(Math.abs(e))}function y(e){var t=m(e);if(t<1)return!1;if(t>1e12)return!1;var r=i.default(e,t),n=r.n,a=r.d;return 1!==a&&e===e+Math.pow(2,-3)*Math.abs(n/a-e)}function g(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var r=t.smallCutoff||.001,n=t.bigCutoff||1e6,a=t.digits||10,o=p(e.toExponential(a-2)),s=o.match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!s)return{type:"undefined"};var u=parseInt(s[2],10)>=a,c=y(e);if(Math.abs(e)>n||Math.abs(e)<r||u)return{type:"scientific",mantissa:s[1],exponent:s[2]};if(c&&t.displayAsFraction){var f=i.default(e,m(e));return{type:"fraction",numerator:f.n.toString(),denominator:f.d.toString()}}var h=l(e.toPrecision(a));return e!==Number(h)&&t.addEllipses&&(h+="..."),{type:"decimal",value:h}}function v(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"<span class=\'dcg-cross\'>×</span>10<sup>"+r.exponent+"</sup>";case"fraction":return"1"===r.denominator?r.numerator:r.numerator+"/"+r.denominator;default:return r}}function b(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+" * 10^"+r.exponent;case"fraction":return"1"===r.denominator?r.numerator:r.numerator+"/"+r.denominator;default:return r}}function x(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return r.value;case"scientific":return r.mantissa+"\\\\times10^{"+r.exponent+"}";case"fraction":return"1"===r.denominator?r.numerator:"-"===r.numerator[0]?"-\\\\frac{"+r.numerator.slice(1)+"}{"+r.denominator+"}":"\\\\frac{"+r.numerator+"}{"+r.denominator+"}";default:return r}}function _(e,t){var r=g(e,t);switch(r.type){case"undefined":return"undefined";case"decimal":return u(r.value);case"scientific":return u(r.mantissa+"e"+r.exponent);case"fraction":return u(r.numerator+"/"+r.denominator);default:return r}}function S(e){e=e.replace("\\\\","");var t={pi:"π",tau:"τ",theta:"θ",phi:"ϕ",div:"÷",cdot:"⋅",times:"×",lt:"<",gt:">",le:"≤",ge:"≥",sim:"∼",ldots:"…",prime:"′",approx:"≈"};return t.hasOwnProperty(e)?t[e]:e}function M(e){var t=e.split("_"),r="";return t[0].length>1&&(r+="\\\\"),r+=t[0],t[1]&&(r+="_{"+t[1]+"}"),r}function E(e){if(!e)return"";var t=e.split("_").map(S).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n}function D(e){return e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1"),e.replace(/[{}\\\\]/g,"")}function w(e){return e.replace(/^(\\\\ | |\\\\space)+/,"").replace(/(\\\\ | |\\\\space)+$/,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.trimLatex=t.latexToIdentifier=t.identifierToHTML=t.identifierToLatex=t.formatSymbol=t.truncatedAriaLabel=t.truncatedLatexLabel=t.truncatedPlainmathLabel=t.truncatedHTMLLabel=t.numericLabel=t.canDisplayAsFraction=t.point=t.value=void 0,t.value=a;var T={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[π]":" pi ","[τ]":" tau ","[θ]":" theta ","[ϕ]":" phi "},P=new RegExp(Object.keys(T).join("|"),"gi"),I=/\\.\\d+/g;t.point=c;var C=/\\.?0+$/;t.canDisplayAsFraction=y,t.numericLabel=g,t.truncatedHTMLLabel=v,t.truncatedPlainmathLabel=b,t.truncatedLatexLabel=x,t.truncatedAriaLabel=_,t.formatSymbol=S,t.identifierToLatex=M,t.identifierToHTML=E,t.latexToIdentifier=D,t.trimLatex=w}),define("core/math/types",["require","core/lib/worker-i18n"],function(e){"use strict";function t(e){switch(e){case u:return"Any";case c:return"Number";case l:return"Bool";case p:return"Point";case f:return"Distribution";case h:return"ListOfAny";case d:return"ListOfNumber";case m:return"ListOfBool";case y:return"ListOfPoint";case g:return"ListOfDistribution";case v:return"EmptyList";case b:return"ErrorType";case x:return"SeedType";default:throw new Error("Invalid type")}}function r(e){switch(e){case u:return s.t("an unknown object");case c:return s.t("a number");case l:return s.t("a true/false value");case p:return s.t("a point");case f:return s.t("a distribution");case h:return s.t("a list of unknown objects");case d:return s.t("a list of numbers");case m:return s.t("a list of true/false values");case y:return s.t("a list of points");case g:return s.t("a list of distributions");case v:return s.t("an empty list");case b:return s.t("an error object");case x:return s.t("a string");default:throw new Error("Invalid type")}}function n(e){switch(e){case h:case d:case m:case y:case g:case v:return!0;default:return!1}}function i(e){switch(e){case v:case d:return c;case m:return l;case y:return p;case g:return f;case h:default:return u}}function a(e){switch(e){case u:return h;case c:return d;case l:return m;case p:return y;case f:return g;default:throw new Error("Type "+t(e)+" does not implement listType.")}}function o(e){switch(e){case u:case c:case l:case p:case f:return!0;default:return!1}}var s=e("core/lib/worker-i18n"),u=0,c=1,l=2,p=3,f=4,h=5,d=6,m=7,y=8,g=9,v=10,b=11,x=12;return{Any:u,Number:c,Bool:l,Point:p,Distribution:f,ListOfAny:h,ListOfNumber:d,ListOfBool:m,ListOfPoint:y,ListOfDistribution:g,EmptyList:v,ErrorType:b,SeedType:x,repr:t,prettyPrint:r,isList:n,elementType:i,listType:a,hasListType:o}}),define("core/math/errormsg",["require","core/lib/worker-i18n","core/math/parsenode/error","core/lib/label","core/math/types"],function(e){"use strict";var t=e("core/lib/worker-i18n"),r=e("core/math/parsenode/error"),n=e("core/lib/label"),i=e("core/math/types");return{parseError:function(){return r(t.t("Sorry, I don\'t understand this."))},unrecognizedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don\'t understand the \'__symbol__\' symbol.",{symbol:e}))},unexpectedInequality:function(){return r(t.t("Cannot use an inequality here."))},unexpectedSymbol:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, I don\'t understand the way that \'__symbol__\' is used here.",{symbol:e}))},addTypeError:function(e){return r(t.t("Cannot add __symbol1__ and __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},\nsubtractTypeError:function(e){return r(t.t("Cannot subtract __symbol2__ from __symbol1__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},multiplyTypeError:function(e){return r(t.t("Cannot multiply __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},divideTypeError:function(e){return r(t.t("Cannot divide __symbol1__ by __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},exponentTypeError:function(e){return r(t.t("Cannot raise __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},negativeTypeError:function(e){return r(t.t("Cannot negate __symbol__.",{symbol:e[0]})).allowExport()},comparatorTypeError:function(e){return r(t.t("Cannot compare __symbol1__ to __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},andTypeError:function(e){return r(t.t("Cannot apply __symbol__ to __symbol1__ and __symbol2__.",{symbol:"and",symbol1:e[0],symbol2:e[1]})).allowExport()},listTypeError:function(e){return r(t.t("Cannot store __symbol1__ in a list.",{symbol1:e[0]})).allowExport()},pointTypeError:function(e){return r(t.t("Cannot use __symbol1__ as a coordinate of __symbol2__.",{symbol1:e,symbol2:i.prettyPrint(i.Point)})).allowExport()},indexTypeError:function(e){return r(t.t("Cannot index __symbol1__ with __symbol2__.",{symbol1:e[0],symbol2:e[1]})).allowExport()},orderedPairAccessTypeError:function(e){return r(t.t("Cannot access a coordinate of __symbol__.",{symbol:e[0]})).allowExport()},functionTypeError:function(e,i){switch(i.length){case 1:return r(t.t("Function \'__fn__\' cannot be applied to __arg__.",{fn:n.formatSymbol(e),arg:i[0]})).allowExport();case 2:return r(t.t("Function \'__fn__\' cannot be applied to __arg1__ and __arg2__.",{fn:n.formatSymbol(e),arg1:i[0],arg2:i[1]})).allowExport();default:return r(t.t("Function \'__fn__\' cannot be applied to these arguments.",{fn:n.formatSymbol(e)})).allowExport()}},illegalDotCall:function(e){return r(t.t("Function \'__symbol__\' cannot be called with dot notation.",{symbol:n.formatSymbol(e)}))},dotLHSTypeError:function(e,i){return r(t.t("Cannot call \'__symbol__\' on __type__.",{symbol:n.formatSymbol(e),type:i}))},sumLowerBoundTypeError:function(e){return r(t.t("Lower bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumUpperBoundTypeError:function(e){return r(t.t("Upper bound of a sum cannot be __symbol__.",{symbol:e[0]})).allowExport()},sumInfiniteBoundError:function(){return r(t.t("Summation bounds must be finite numbers."))},sumArgumentTypeError:function(e){return r(t.t("Cannot take the sum of __symbol__.",{symbol:e[0]})).allowExport()},productLowerBoundTypeError:function(e){return r(t.t("Lower bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productUpperBoundTypeError:function(e){return r(t.t("Upper bound of a product cannot be __symbol__.",{symbol:e[0]})).allowExport()},productInfiniteBoundError:function(){return r(t.t("Product bounds must be finite numbers."))},productArgumentTypeError:function(e){return r(t.t("Cannot take the product of __symbol__.",{symbol:e[0]})).allowExport()},integralLowerBoundTypeError:function(e){return r(t.t("Lower bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralUpperBoundTypeError:function(e){return r(t.t("Upper bound of an integral cannot be __symbol__.",{symbol:e[0]})).allowExport()},integralInfiniteBoundError:function(){return r(t.t("Limits of integration must be finite numbers."))},integralArgumentTypeError:function(e){return r(t.t("Cannot take the integral of __symbol__.",{symbol:e[0]})).allowExport()},derivativeTypeError:function(e){return r(t.t("Cannot take the derivative of __symbol__.",{symbol:e[0]})).allowExport()},derivativeVariableTypeError:function(e,i){return r(t.t("Cannot take derivative with respect to \'__symbol1__\' because it is __symbol2__.",{symbol1:n.formatSymbol(e),symbol2:i[0]}))},piecewiseConditionTypeError:function(e){return r(t.t("The condition in a piecewise expression must be __symbol1__ but was __symbol2__.",{symbol1:i.prettyPrint(i.Bool),symbol2:e[0]})).allowExport()},piecewiseBranchTypeError:function(e){return r(t.t("Cannot use __symbol__ as a branch of a piecewise expression.",{symbol:e[0]})).allowExport()},tableHeaderTypeError:function(e){return r(t.t("Table header cannot be __symbol__.",{symbol:e[0]}))},tableEntryTypeError:function(e){return r(t.t("Table entry cannot be __symbol__.",{symbol:e[0]}))},regressionTypeError:function(e){return r(t.t("Cannot regress __symbol1__ against __symbol2__.",{symbol1:e[0],symbol2:e[1]}))},heterogeneousList:function(){return r(t.t("All elements of a list must have the same type.")).allowExport()},deeplyNested:function(){return r(t.t("Definitions are nested too deeply.")).allowExport()},polygonListTypeError:function(e){return r(t.t("A single argument to polygon should be a point list, not __type__.",{type:e[0]}))},polygonPointArgsError:function(){return r(t.t("Some of your arguments are not points."))},polygonTwoNumbersError:function(){return r(t.t("Cannot make a polygon from two numbers."))},binCenterInvalid:function(){return r(t.t("Invalid bin center. Try using any number."))},boxplotOffsetInvalid:function(){return r(t.t("Invalid offset. Try using any number."))},boxplotBreadthInvalid:function(){return r(t.t("Invalid height. Try using any number."))},tooManyArguments:function(e,n){return r(t.t("\'__symbol__\' accepts at most __max__ arguments.",{symbol:e,max:n}))},pdfWrongArity:function(){var e=t.t("For example, try typing: D.pdf(x) where D=normaldist()."),n=t.t("\'pdf\' should be called on a distribution with a number. __recommendation__",{recommendation:e});return r(n)},cdfRequiresArguments:function(){var e=t.t("For example, try typing: D.cdf(x) where D=normaldist()."),n=t.t("\'cdf\' should be called on a distribution with at least one number. __recommendation__",{recommendation:e});return r(n)},cdfTooManyArguments:function(){var e=t.t("For example, try typing: D.cdf(-1,1) where D=normaldist()."),n=t.t("\'cdf\' should be called on a distribution with at most two numbers. __recommendation__",{recommendation:e});return r(n)},tdistWrongArity:function(){return r(t.t("\'tdist\' requires 1 argument. For example, try typing: tdist(1)."))},randomArity:function(){var e=t.t("\'random\' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).");return r(e)},randomFromBroadcastDistribution:function(){return r(t.t("Cannot sample from a list of distributions"))},wrongArity:function(e,i,a,o){e=n.formatSymbol(e);var s,u;if(1===i)o||(o=e+"(x)"),u=t.t("For example, try typing: __recommendation__.",{recommendation:o}),s=a>1?t.t("Function \'__dependency__\' requires only 1 argument. __supplement__",{dependency:e,supplement:u}):t.t("Function \'__dependency__\' requires an argument. __supplement__",{dependency:e,supplement:u});else{var c=[];if(!o){for(var l=0;l<i;l++)c[l]=l+1;o=n.formatSymbol(e)+"("+c.join(", ")+")"}u=t.t("For example, try typing: __recommendation__.",{recommendation:o}),s=t.t("Function \'__dependency__\' requires __assignment_arity__ arguments. __supplement__",{dependency:e,assignment_arity:i,supplement:u})}return r(s)},wrongParametrizedReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(e){return r(t.t("Function \'__symbol__\' requires 2 arguments. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return r(t.t("Prime notation can only be used for functions of a single argument."))},zeroArgReducer:function(e){return r(t.t("Function \'__symbol__\' requires at least one argument. For example, try typing: __symbol__(1, 2).",{symbol:n.formatSymbol(e)}))},missingRHS:function(e){return e=n.formatSymbol(e),r(t.t("What do you want \'__symbol__\' to equal?",{symbol:e}))},malformedPoint:function(){return r(t.t("Points are written like this: (1, 2)."))},badTupleDimensions:function(e){return r(t.t("Points may only have __symbol__ coordinates.",{symbol:e}))},badImplicitCall:function(e){return e=n.formatSymbol(e),r(t.t("Use parentheses around the argument of \'__symbol__\'.",{symbol:e}))},adjacentNumbers:function(e,n){return r(t.t("Sorry, I don\'t know what to do with adjacent numbers \'__left__\' and \'__right__\'. Try using parentheses or a \'*\' symbol.",{left:e,right:n}))},identifierAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("\'__symbol__\' is a function. Try using parentheses.",{symbol:e}))},binaryOperatorMissingOperand:function(e){return e=n.formatSymbol(e),"%"===e&&(e="% of"),r(t.t("You need something on both sides of the \'__symbol__\' symbol.",{symbol:e}))},unaryOperatorMissingLeft:function(e){return e=n.formatSymbol(e),r(t.t("You need something before the \'__symbol__\' symbol.",{symbol:e}))},unaryOperatorMissingRight:function(e){return e=n.formatSymbol(e),r(t.t("You need something after the \'__symbol__\' symbol.",{symbol:e}))},fractionMissingNumerator:function(){return r(t.t("You need a numerator for the top of your fraction."))},fractionMissingDenominator:function(){return r(t.t("You need a denominator for the bottom of your fraction."))},fractionEmpty:function(){return r(t.t("You need a numerator and denominator for your fraction."))},emptySubscript:function(){return r(t.t("Subscripts cannot be empty."))},emptySuperscript:function(){return r(t.t("Superscripts cannot be empty."))},invalidSubscript:function(e){return e=n.formatSymbol(e),r(t.t("Subscripts may only contain letters and digits. \'__symbol__\' is not allowed.",{symbol:e}))},invalidOperatorName:function(){return r(t.t("Operator names may only contain letters."))},unexpectedSubscript:function(){return r(t.t("Only functions and variables may have subscripts."))},superscriptWithPrime:function(){return r(t.t("Superscripts and primes cannot be combined."))},unexpectedPrime:function(){return r(t.t("Sorry, I don\'t understand this use of prime notation."))},primeWithoutParen:function(){return r(t.t("Primed function calls must use parentheses."))},emptyRadical:function(){return r(t.t("Radical cannot be empty."))},emptyRadicalIndex:function(){return r(t.t("Radical index cannot be empty."))},emptyParen:function(){return r(t.t("Parentheses cannot be empty."))},emptySquareBracket:function(){return r(t.t("Square brackets cannot be empty."))},emptyPipe:function(){return r(t.t("Absolute value symbol cannot be empty."))},badTrigExponent:function(e){var n=e+"^2",i=e+"^-1";return r(t.t("Only __form1__ and __form2__ are supported. Otherwise, use parens.",{form1:n,form2:i}))},badLogExponent:function(e){var n=e+"^2";return r(t.t("Only __form__ is supported. Otherwise, use parens.",{form:n}))},inequalityChainTooLong:function(){return r(t.t("Cannot chain more than 2 inequalities."))},piecewiseMissingCondition:function(){return r(t.t("A piecewise expression must have at least one condition."))},piecewisePartMissingCondition:function(){return r(t.t("Every part of a piecewise expression must have a condition except the last."))},colonMissingCondition:function(){return r(t.t("The left side of a \':\' must be a condition, like \'x>1\'."))},blankExpression:function(){return r(t.t("You haven\'t written anything yet."))},functionNotDefined:function(e){return e=n.formatSymbol(e),r(t.t("Function \'__dependency__\' is not defined.",{dependency:e}))},parameterAlreadyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__dependency__\' as a parameter of this function because \'__dependency__\' is already defined.",{dependency:e}))},cannotRedefine:function(e,i){return e=n.formatSymbol(e),r(void 0===i?t.t("You can\'t redefine \'__symbol__\' because it\'s already defined.",{symbol:e}):t.t("You can\'t define \'__symbol__\' because \'__symbolRoot__\' is already defined.",{symbol:e,symbolRoot:i}))},cannotSubscript:function(e){return e=n.formatSymbol(e),r(t.t("\'__symbol__\' cannot have a subscript.",{symbol:e}))},multiplyDefined:function(e){return e=n.formatSymbol(e),r(t.t("You\'ve defined \'__dependency__\' in more than one place. Try deleting some of the definitions of \'__dependency__\'.",{dependency:e}))},shadowedIndex:function(e){return e=n.formatSymbol(e),r(t.t("You can\'t use \'__symbol__\' as an index because it\'s already defined.",{symbol:e}))},cycle:function(e){e=e.map(n.formatSymbol);var i=e.pop();return r(t.t("\'__symbols__\' and \'__lastSymbol__\' can\'t be defined in terms of each other.",{symbols:e.join("\', \'"),lastSymbol:i}))},selfReferentialFunction:function(e){return r(t.t("The definition of function \'__symbol__\' cannot depend on \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},sliderLimitReferencesExport:function(e){return r(t.t("Slider limits cannot depend on the slider variable \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},sliderMinInvalid:function(){return r(t.t("Invalid slider min. Try using any number."))},sliderMaxInvalid:function(){return r(t.t("Invalid slider max. Try using any number."))},sliderMaxLessThanMin:function(){return r(t.t("Invalid slider limits. Min should be less than max."))},sliderStepInvalid:function(){return r(t.t("Invalid slider step. Try using any number."))},domainMinInvalid:function(){return r(t.t("Invalid domain min. Try using any number."))},domainMaxInvalid:function(){return r(t.t("Invalid domain max. Try using any number."))},domainMaxLessThanMin:function(){return r(t.t("Invalid domain limits. Min should be less than max."))},cdfMinInvalid:function(){return r(t.t("Invalid cdf min. Try using any number."))},cdfMaxInvalid:function(){return r(t.t("Invalid cdf max. Try using any number."))},cdfMaxLessThanMin:function(){return r(t.t("Invalid cdf limits. Min should be less than max."))},tooFewVariables:function(){return r(t.t("Too few variables, I don\'t know what to do with this."))},tooManyVariables:function(e){if(e=e.map(n.formatSymbol),0===e.length)return r(t.t("Too many variables, I don\'t know what to do with this."));var i=e.pop();return r(t.t("Too many variables. Try defining \'__variables__\'.",{variables:(e.length?e.join("\', \'")+"\' or \'":"")+i}))},addArgumentsToDefinition:function(e,i,a){e=e.map(n.formatSymbol),i=n.formatSymbol(i),a=a.map(n.formatSymbol);var o=i+"("+a.join(",")+","+e.join(",")+")",s=e.pop(),u={symbols:e.join("\', \'"),lastSymbol:s,newSignature:o};return r(e.length?t.t("Try including \'__symbols__\' and \'__lastSymbol__\' as arguments by defining the function as \'__newSignature__\'.",u):t.t("Try including \'__lastSymbol__\' as an argument by defining the function as \'__newSignature__\'.",u))},invalidLHS:function(e){return e=n.formatSymbol(e),r(t.t("Sorry, you can\'t graph __symbol__ as a function of anything yet.",{symbol:e}))},unplottablePolarFunction:function(){return r(t.t("We can\'t plot θ as a function of r. Try plotting r(θ) instead."))},invalidInequalityVariables:function(){return r(t.t("We only plot inequalities of x and y, or r and θ."))},invalidImplicitVariables:function(){return r(t.t("We only support implicit equations of x and y."))},singleVariableImplicitEquationsDisabled:function(){return r(t.t("Plotting single-variable implicit equations is disabled."))},implicitsDisabled:function(){return r(t.t("Plotting implicit equations and inequalities is disabled."))},inequalitiesDisabled:function(){return r(t.t("Plotting inequalities is disabled."))},complicatedImplicitInequality:function(){return r(t.t("We can only plot inequalities when one variable is quadratic or linear."))},complicatedPolarImplicit:function(){return r(t.t("Polar equations must be linear in r."))},invalidDoubleInequalityVariables:function(){return r(t.t("We only plot double inequalities of x and y."))},mismatchedDoubleInequality:function(){return r(t.t("Double inequalities must both go the same way, e.g. 1 < y < 2."))},complicatedDoubleInequality:function(){return r(t.t("We only support solved double inequalities. Try deleting one side of the inequality."))},equationRequired:function(e){return e?(e=n.formatSymbol(e),r(t.t("Try adding \'__lhs__\' to the beginning of this equation.",{lhs:e+"="}))):r(t.t("Try adding an equals sign to turn this into an equation."))},variableAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Variable \'__dependency__\' can\'t be used as a function.",{dependency:e}))},distributionAsFunction:function(e){return e=n.formatSymbol(e),r(t.t("Cannot call distribution \'__symbol__\' as a function. Try \'__symbol__.pdf(x)\'.",{symbol:e}))},invalidTableHeader:function(e){return r(t.t("Table headers must be simple expressions. __supplement__",{supplement:e}))},invalidTableEntry:function(e){return r(t.t("Table entries must be simple expressions. __supplement__",{supplement:e}))},invalidFirstTableColumn:function(){return r(t.t("First column may not be __most__ or __last__.",{most:"\'y\', \'r\',",last:"\'θ\'"}))},invalidDependentFirstTableColumn:function(){return r(t.t("This column header can\'t be defined elsewhere in the calculator."))},invalidRegressionParameter:function(e){return r(t.t("\'__symbol__\' may not be used as a regression parameter. Try using a list.",{symbol:n.formatSymbol(e)}))},optimizationError:function(){return r(t.t("We couldn\'t find any region where this model is defined."))},badListInReducer:function(e){return r(t.t("When __symbol__ is called with more than two arguments, no argument can be a list.",{symbol:n.formatSymbol(e)})).allowExport()},nonListDoubleReducer:function(e){return r(t.t("Both arguments of \'__symbol__\' must be lists. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(e){return r(t.t("The first argument of \'__symbol__\' must be a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3], 1)"})).allowExport()},methodRequiresList:function(e){return r(t.t("\'__symbol__\' requires a list. For example, try typing: __recommendation__.",{symbol:n.formatSymbol(e),recommendation:n.formatSymbol(e)+"([1,2,3])"})).allowExport()},variableRange:function(e){return r(t.t("Range cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableListIndicies:function(e){return r(t.t("List indicies cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableFilter:function(e){return r(t.t("List filters cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},functionFreeVariable:function(e,n){return r(t.t("Function \'__functionSymbol__\' cannot depend on free variable \'__variableSymbol__\'.",{functionSymbol:e,variableSymbol:n})).allowExport()},nonArithmeticRange:function(e){return r(t.t("Ranges must be arithmetic sequences.")).allowExport()},invalidHalfEmptyRange:function(){return r(t.t("Range must have an upper and lower bound."))},sumMissingBound:function(){return r(t.t("Sums must have upper and lower bounds."))},productMissingBound:function(){return r(t.t("Products must have upper and lower bounds."))},incorrectSumLowerBound:function(){return r(t.t("Lower bound of a sum must set a variable equal to a number. Try n=1."))},incorrectProductLowerBound:function(){return r(t.t("Lower bound of a product must set a variable equal to a number. Try n=1."))},badSumBoundDependency:function(e){return r(t.t("Summation bounds can\'t depend on summation index \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},badProductBoundDependency:function(e){return r(t.t("Product bounds can\'t depend on product index \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},integralMissingBound:function(){return r(t.t("Integrals must have upper and lower bounds."))},integralMissingDifferential:function(){return r(t.t("Integrand must end with an integration variable, like dx."))},differentialWithSuperscript:function(){return r(t.t("Integration variable cannot have a superscript."))},sumMissingBody:function(){return r(t.t("What do you want to take the sum of?"))},productMissingBody:function(){return r(t.t("What do you want to take the product of?"))},integralMissingBody:function(){return r(t.t("What do you want to take the integral of?"))},derivativeMissingBody:function(){return r(t.t("What do you want to take the derivative of?"))},mismatchedBraces:function(e,i){return e=n.formatSymbol(e),i=n.formatSymbol(i),r(t.t("Expected \'__symbol1__\' to match \'__symbol2__\'.",{symbol1:e,symbol2:i}))},shadowedIntegrationVariable:function(e){return r(t.t("You can\'t use \'__symbol__\' as an integration variable because it\'s already defined.",{symbol:n.formatSymbol(e)}))},badIntegralBoundDependency:function(e){return r(t.t("Integration bounds can\'t depend on integration variable \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},percentMissingOf:function(){return r(t.t("\'%\' must be used with \'of\'. Try \'25% of 12\'."))},illegalBinWidth:function(e){return e=n.formatSymbol(e),r(t.t("The second argument to \'__symbol__\' must be a positive number.",{symbol:e}))},ttestListTooShort:function(e){return e=n.formatSymbol(e),r(t.t("Lists for \'__symbol__\' must have at least 2 elements.",{symbol:e}))},badSampleSize:function(){return r(t.t("Sample size must be at least 1."))},variableSampleSize:function(e){return r(t.t("Sample size cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},variableSeed:function(e){return r(t.t("Random seed cannot depend on free variable \'__symbol__\'.",{symbol:n.formatSymbol(e[0])})).setDependencies(e).allowExport()},badAnsContext:function(){return r(t.t("You can\'t use \'ans\' in this context."))},ansUndefined:function(){return r(t.t("The previous expression didn\'t define any value for ans."))},variablesUnsupported:function(e){return r(t.t("This calculator does not support variables like \'__variable__\'.",{variable:n.formatSymbol(e)}))},functionUnsupported:function(e){return r(t.t("This calculator does not support the \'__symbol__\' function.",{symbol:n.formatSymbol(e)}))},logbaseUnsupported:function(){return r(t.t("This calculator does not support specifying the base of a logarithm. Try \'log\' or \'ln\'."))},constantUnsupported:function(e){return r(t.t("This calculator does not support the constant \'__symbol__\'.",{symbol:n.formatSymbol(e)}))},assignmentsUnsupported:function(){return r(t.t("This calculator does not support defining variables."))},functionDefinitionsUnsupported:function(){return r(t.t("This calculator does not support function definitions."))},equationsUnsupported:function(){return r(t.t("This calculator does not support this type of equation."))},inequalitiesUnsupported:function(){return r(t.t("This calculator does not support inequalities."))},regressionsUnsupported:function(){return r(t.t("This calculator does not support regressions."))},pointsUnsupported:function(){return r(t.t("This calculator does not support points."))},featureUnavailable:function(){return r(t.t("This feature is not available in the current calculator."))},nonSquareDeterminant:function(){return r(t.t("Only square matrices have a determinant."))},nonSquareInverse:function(){return r(t.t("Only square matrices have an inverse."))},singularInverse:function(){return r(t.t("Singular matrices do not have an inverse."))},clickableObjectAssignmentNotDefined:function(e){return r(t.t(\'"__symbol__" is not defined. Try using a different variable or adding a slider.\',{symbol:e}))},clickableObjectAlreadyAssigned:function(e){return r(t.t("You\'ve defined \'__dependency__\' in more than one place. Try deleting some of the definitions of \'__dependency__\'.",{dependency:e}))},clickableObjectAssignmentNotIdentifier:function(){return r(t.t("Invalid symbol. Try using a single letter."))},clickableObjectInvalidExpression:function(){return r(t.t("Can\'t evaluate this. Try a number or simple expression."))},matrixAssignment:function(){return r(t.t("This calculator does not support this type of variable definition. Try using \'New Matrix\'."))},matrixAddDimensions:function(){return r(t.t("Cannot add matrices with different dimensions."))},matrixSubtractDimensions:function(){return r(t.t("Cannot subtract matrices with different dimensions."))},matrixMultiplyDimensions:function(){return r(t.t("Cannot multiply matrices with incompatible dimensions."))},matrixFractionalPower:function(){return r(t.t("A matrix can only be raised to integer powers."))},matrixPowerDimensions:function(){return r(t.t("Only square matrices can be raised to a power."))},matrixElementTypeError:function(e){return r(t.t("Cannot use __arg__ as an element of a matrix.",{arg:e[0]}))},matrixInvalidVariable:function(e){return r(t.t("Cannot use \'__symbol__\' as a variable.",{symbol:n.formatSymbol(e)}))}}}),define("core/math/parsenode/expression",["require","pjs","./base","core/math/errormsg","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/errormsg"),i=e("core/math/types");return t(r,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.mergeDependencies(this.args[e])},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize)},e.copyWithArgs=function(e){return new this.constructor(e)}})}),define("core/math/parsenode/scalarexpression",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e)},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:this.scalarEvalExpression(t)}}})}),define("core/math/parsenode/expressionTypes",["require","pjs","./scalarexpression"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n={Add:t(r,{}),Subtract:t(r,{}),Multiply:t(r,{}),Divide:t(r,{}),Exponent:t(r,{}),Negative:t(r,{}),And:t(r,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:t(r,{})};return n.RawExponent=t(n.Exponent,{}),n}),define("core/math/maybe-rational",["require","exports","core/math/builtin"],function(e,t,r){"use strict";function n(e,t){return{n:e,d:t}}function i(e){return"object"==typeof e&&"number"==typeof e.n&&"number"==typeof e.d}function a(e){var t=e.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!t)return NaN;var r=t[1],n=t[2],i=t[3];if(!n&&!i)return NaN;var a=!!r;if(i){var o=i.replace(/0+$/,""),u=o.length,c=Math.pow(10,u),l=parseInt(n||"0",10)*c+parseInt(o||"0",10);return l>_||c>_?parseFloat(e):s(a?-l:l,c)}var l=parseInt(n,10);return l>_?parseFloat(e):s(a?-l:l,1)}function o(e){return i(e)?e.n/e.d:e}function s(e,t){if(!isFinite(e)||!isFinite(t)||0===t||Math.floor(e)!==e||Math.floor(t)!==t||Math.abs(e)>_||Math.abs(t)>_)return e/t;t<0&&(e=-e,t=-t);var i=r.gcd(e,t);return n(e/i,t/i)}function u(e){return i(e)?n(-e.n,e.d):-e}function c(e){return i(e)?n(Math.abs(e.n),Math.abs(e.d)):Math.abs(e)}function l(e){return i(e)?0===e.n?e.d/e.n:n(e.n<0?-e.d:e.d,Math.abs(e.n)):1/e}function p(e,t){if(!i(e)||!i(t))return o(e)+o(t);var n=r.gcd(e.d,t.d);return s(e.n*(t.d/n)+t.n*(e.d/n),e.d/n*t.d)}function f(e,t){if(!i(e)||!i(t))return o(e)*o(t);var n=r.gcd(e.n,t.d),a=r.gcd(t.n,e.d);return s(e.n/n*(t.n/a),e.d/a*(t.d/n))}function h(e,t){return p(e,u(t))}function d(e,t){return i(e)&&i(t)?f(e,l(t)):o(e)/o(t)}function m(e,t){var n=e,a=t;if(t.n<0&&(a=u(t),n=l(e)),!i(n)||!i(a))return r.pow(o(e),o(t));if(e=n,t=a,1===t.d)return s(Math.pow(e.n,t.n),Math.pow(e.d,t.n));var c=e.n<0;if(c&&t.d%2!=1)return NaN;var p=c?-1:1,f=p*Math.round(Math.pow(Math.abs(e.n),1/t.d)),h=Math.round(Math.pow(Math.abs(e.d),1/t.d));return Math.pow(f,t.d)!==e.n||Math.pow(h,t.d)!==e.d?r.pow(o(e),o(t)):s(Math.pow(f,t.n),Math.pow(h,t.n))}function y(e,t){if(!i(e)||!i(t))return r.pow(o(e),o(t));var n=m(e,t);return i(n)?n:r.pow(o(e),o(t))}function g(e){if(!i(e))return Math.sqrt(e);var t=Math.round(Math.sqrt(e.n)),r=Math.round(Math.sqrt(e.d));return t*t!==e.n||r*r!==e.d?Math.sqrt(o(e)):s(t,r)}function v(e,t){return y(e,l(t))}function b(e,t){if(!i(e)||!i(t)){var r=o(e),a=o(t);return r-a*Math.floor(r/a)}return h(e,f(t,n(Math.floor(o(d(e,t))),1)))}function x(e){for(var t=n(0,1),r=0,i=e;r<i.length;r++){t=p(t,i[r])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.total=t.mod=t.nthroot=t.sqrt=t.pow=t.div=t.sub=t.mul=t.add=t.reciprocal=t.abs=t.neg=t.maybeRational=t.asFloat=t.fromDecimalString=t.isRational=void 0,t.isRational=i;var _=Math.pow(2,53)-1;t.fromDecimalString=a,t.asFloat=o,t.maybeRational=s,t.neg=u,t.abs=c,t.reciprocal=l,t.add=p,t.mul=f,t.sub=h,t.div=d,t.pow=y,t.sqrt=g,t.nthroot=v,t.mod=b,t.total=x}),define("core/math/parsenode/constant",["require","pjs","./scalarexpression","core/math/maybe-rational","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("core/math/maybe-rational"),i=e("core/math/types");return t(r,function(e,t){e.init=function(e){"number"==typeof e&&(e=n.maybeRational(e,1)),this._constantValue=e,t.init.call(this,[])},e.isConstant=!0,e.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},e.asValue=function(){return"boolean"==typeof this._constantValue?this._constantValue:n.asFloat(this._constantValue)},e.asMaybeRationalValue=function(){return"boolean"==typeof this._constantValue?NaN:this._constantValue},e.scalarExprString=function(){return this.asValue()>0?String(this.asValue()):"("+String(this.asValue())+")"},e.getEvaluationInfo=function(){return[{val:this.asValue()}]},e.isNaN=function(){return"number"==typeof this.asValue()&&isNaN(this.asValue())},e._getValueType=function(){switch(typeof this.asValue()){case"number":return i.Number;case"boolean":return i.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}}})}),define("core/math/parsenode/mixednumber",["require","pjs","./constant"],function(e){"use strict";return e("pjs")(e("./constant"),function(e,t){e.init=function(e){t.init.call(this,e)},e.is_mixed_number=!0})}),define("core/math/parsenode/identifier",["require","pjs","./expression","core/lib/label","core/math/parser/input-span"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/lib/label"),i=e("core/math/parser/input-span");return t(r,function(e,t,r){e.init=function(e){t.init.call(this,[]),this._symbol=n.latexToIdentifier(e),this.setInputSpan(new i.Span(e,0,e.length)),this.addDependency(this._symbol)},e.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})}),define("core/math/parsenode/ans",["require","pjs","./identifier"],function(e){"use strict";return e("pjs")(e("./identifier"),function(e,t,r){})}),define("core/math/parsenode/freevariable",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,[]),this.addDependency(e),this._symbol=e},e.isFreeVariable=!0,e.scalarEvalExpression=function(e){return this._symbol},e.copyWithArgs=function(e){return this}})}),define("core/math/parsenode/dummyindex",["require","pjs","./freevariable"],function(e){"use strict";return e("pjs")(e("./freevariable"),function(){})}),define("core/math/parsenode/list",["require","pjs","./expression","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/types");return t(r,function(e,t,r){function i(e){for(var t=1/0,r=0;r<e.length;r++)(e[r].isList||e[r].isBroadcast)&&(t=Math.min(t,e[r].length));return t}e.init=function(e){t.init.call(this,e),this.length=e.length},e.isList=!0,e.getEvalStrings=function(){\nfor(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();Array.prototype.push.apply(e,n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}},e.asValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asValue());return e},e.asMaybeRationalValue=function(){for(var e=[],t=0;t<this.args.length;t++)e.push(this.args[t].asMaybeRationalValue());return e},e.getEvaluationInfo=function(){if(this.args.every(function(e){return e.isConstant}))return[{val:this.args.map(function(e){return e.asValue()})}]},r.eachArgs=function(e,t,r){var a=i(t);if(!isFinite(a))return void r(t);for(var o=0;o<a;o++){for(var s=[],u=0;u<t.length;u++)s.push(t[u].isList||n.isList(t[u].valueType)?t[u].elementAt(e,o):t[u]);r(s)}},r.mapArgs=function(e,t,n){var i=[];return r.eachArgs(e,t,function(e){i.push(n(e))}),i},r.wrap=function(e){return e.isList||n.isList(e.valueType)?e:r([e])}})}),define("core/math/parsenode/range",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t,r){e.init=function(e){t.init.call(this,e),this.beginning=e[0],this.end=e[1]},e.isHalfEmpty=function(){return this.end&&this.end.args&&0===this.end.args.length}})}),define("core/math/parsenode/broadcast",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t,r){e.init=function(e,r){if(t.init.call(this,r),this._replacedSymbols=e,this._expression=r[0],this._lists=r.slice(1),!e.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var n=0;n<e.length;n++)this.removeDependency(e[n]);for(var i=1/0,a=0;a<this._lists.length;a++){if(!this._lists[a].isList)throw new Error("List arguments of broadcast must be list literals");i=Math.min(i,this._lists[a].length)}this.length=i},e.isBroadcast=!0,e.copyWithArgs=function(e){return new this.constructor(this._replacedSymbols,e)},e.getEvalStrings=function(){var e=[],t=this._expression.getEvalStrings();Array.prototype.push.apply(e,t.statements);var r,n=[],i=[];for(r=0;r<this._lists.length;r++){var a=this._lists[r].getEvalStrings();Array.prototype.push.apply(e,a.statements);var o=this.tmpVar();i.push(o),n.push("var "+o+" = "+a.expression)}var s=this.tmpVar(),u=this.tmpVar();n.push("var "+s+" = []");var c=[];for(r=0;r<i.length;r++)c.push("var "+this._replacedSymbols[r]+" = "+i[r]+"["+u+"]");return n.push("for (var "+u+" = 0; "+u+" < "+this.length+"; "+u+"++) {\\n  "+c.join(";\\n  ")+";\\n  "+s+".push("+t.expression+");\\n}"),{statements:e.concat(n),expression:s}}})}),define("core/math/parsenode/listaccess",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this.list=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.list.getEvalStrings(),r=e.statements.concat(t.statements),n=this.tmpVar();r.push("var "+n+" = "+t.expression);var i=this.tmpVar();return r.push("var "+i+" = Math.floor("+e.expression+") - 1"),{statements:r,expression:"("+i+" >= 0 && "+i+" < "+n+".length ? "+n+"["+i+"] : NaN)"}}})}),define("core/math/parsenode/dotaccess",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),{})}),define("core/math/parsenode/dotaccessexponent",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),{})}),define("core/math/parsenode/orderedpair",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t,r){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(e,t){return e.sliderVariables(t.getDependencies()).filter(function(t){return!e.validParametricVariable(t)})},e.getEvalStrings=function(){for(var e=[],t=[],r=0;r<this.args.length;r++){var n=this.args[r].getEvalStrings();e=e.concat(n.statements),t.push(n.expression)}return{statements:e,expression:"["+t.join(",")+"]"}}})}),define("core/math/parsenode/movablepoint",["require","pjs","./orderedpair"],function(e){"use strict";return e("pjs")(e("./orderedpair"),function(e,t){e.init=function(e,r,n){t.init.call(this,e),this.moveStrategy=r,this.defaultDragMode=n},e.isMovablePoint=!0})}),define("core/math/parsenode/orderedpairaccess",["require","pjs","./scalarexpression"],function(e){"use strict";return e("pjs")(e("./scalarexpression"),function(e,t){e.init=function(e){t.init.call(this,e),this.point=e[0],this.index=e[1]},e.getEvalStrings=function(){var e=this.index.getEvalStrings(),t=this.point.getEvalStrings(),r=[];return Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements),{statements:r,expression:t.expression+"["+e.expression+"-1]"}}})}),define("core/math/parsenode/polygon",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="polygon"}})}),define("core/math/comparators",["require","exports"],function(e,t){"use strict";function r(e,t){switch(t){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}}Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.table=void 0,t.table={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},t.get=r}),define("core/math/parsenode/basecomparator",["require","pjs","./scalarexpression","./expressionTypes","core/math/comparators","core/math/functions"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./expressionTypes").Subtract,i=e("core/math/comparators").table,a=e("core/math/functions");return t(r,function(e,r,o){o.create=function(e,r){return r=r||e,t(o,function(t,n){t.operator=e,t.isInequality=function(){return 0!==i[e].direction},t.compiledOperator=r,t.scalarEvalExpression=function(e){return e.join(r)},t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression,2)})},e.init=function(e){r.init.call(this,e),this._difference=n(-1===i[this.operator].direction?[e[1],e[0]]:[e[0],e[1]])}})}),define("core/math/parsenode/comparator",["require","core/math/parsenode/basecomparator"],function(e){"use strict";var t=e("core/math/parsenode/basecomparator");return{"<":t.create("<"),">":t.create(">"),"<=":t.create("<="),">=":t.create(">="),"=":t.create("=","===")}}),define("core/math/parsenode/doubleinequality",["require","pjs","./base","core/math/comparators","./comparator"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/comparators"),i=e("./comparator");return t(r,function(e,t){e.init=function(e){t.init.call(this),this.args=e,this._symbol=e[2]._symbol,this._operators=[e[1],e[3]],this._expressions=[e[0],e[4]];var r=n.get(n.table[e[1]].inclusive&&n.table[e[3]].inclusive,n.table[e[1]].direction);this._indicator=i[r]([e[0],e[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},e.isInequality=function(){return!0},e.isShadeBetween=function(){return!0}})}),define("core/math/parsenode/repeatedoperator",["require","pjs","./scalarexpression","./dummyindex"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._index=e[0],this.addDummyDependency(this._index._symbol),this._index instanceof n&&this.removeDependency(this._index._symbol)},e.getEvalStrings=function(){var e=[],t=this.tmpVar(),r=this._index._symbol,n=this.tmpVar(),i=this.tmpVar(),a=this.args[1].getEvalStrings(),o=this.args[2].getEvalStrings(),s=this.args[3].getEvalStrings();Array.prototype.push.apply(e,a.statements),e.push("var "+n+" = Math.round("+a.expression+")"),Array.prototype.push.apply(e,o.statements),e.push("var "+i+" = Math.round("+o.expression+")"),e.push("var "+t+"="+this.starting_value);var u="for (var "+r+"="+n+";"+r+"<="+i+";"+r+"++) {"+s.statements.join(";")+";"+t+this.in_place_operator+s.expression+"};",c="if(!isFinite("+i+"-"+n+")) {"+t+"=("+i+"<"+n+"?"+this.starting_value+":NaN);}else{"+u+"}";return e.push(c),{statements:e,expression:t}},e.evaluate=function(e,t,r){var n=r.getCompiledFunction([this._index._symbol]).fn;if(t=Math.round(t),e=Math.round(e),!isFinite(t-e))return t<e?this.starting_value:NaN;for(var i=this.starting_value,a=e;a<=t;a++)i=this.update(i,n(a));return i}})}),define("core/math/parsenode/sum",["require","pjs","./repeatedoperator"],function(e){"use strict";return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="+=",e.starting_value=0,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:t*e[2]},e.update=function(e,t){return e+t}})}),define("core/math/parsenode/product",["require","pjs","./repeatedoperator"],function(e){"use strict";return e("pjs")(e("./repeatedoperator"),function(e,t){e.in_place_operator="*=",e.starting_value=1,e.evaluateConstant=function(e){var t=1+Math.round(e[1])-Math.round(e[0]);return t<=0?this.starting_value:Math.pow(e[2],t)},e.update=function(e,t){return e*t}})}),define("core/math/parsenode/integral",["require","pjs","./scalarexpression","./dummyindex","core/math/builtin"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./dummyindex"),i=e("core/math/builtin");return t(r,function(e,t){e.init=function(e){t.init.call(this,e),this._differential=e[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof n&&this.removeDependency(this._differential._symbol)},e.getEvalStrings=function(){var e=this.args[0],t=this.args[1],r=this.args[2],n=this.args[3],i=[],a=this.tmpVar(),o=e._symbol,s=this.tmpVar(),u=this.tmpVar(),c=t.getEvalStrings(),l=r.getEvalStrings(),p=n.getEvalStrings();return Array.prototype.push.apply(i,c.statements),Array.prototype.push.apply(i,l.statements),i.push("var "+s+" = "+c.expression),i.push("var "+u+" = "+l.expression),i.push("var "+a+" = function ("+o+") { "+p.statements.join("; ")+"; return "+p.expression+";}"),{statements:i,expression:"BuiltIn.quad("+[a,s,u].join(", ")+")"}},e.evaluate=function(e,t,r){var n=this.args[0],a=r.getCompiledFunction([n._symbol]).fn;return i.quad(a,e,t)}})}),define("core/math/parsenode/functioncall",["require","pjs","./expression","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){"string"==typeof e&&(e=n(e)),this._identifier=e,this._symbol=e._symbol,t.init.call(this,r),this.addDependency(this._symbol)},e.copyWithArgs=function(e){return new this.constructor(n(this._symbol),e)}})}),define("core/math/parsenode/seededfunctioncall",["require","pjs","./functioncall"],function(e){"use strict";return e("pjs")(e("./functioncall"),function(e,t){e.init=function(e,r){t.init.call(this,e,r),this.seed=r[0]}})}),define("core/math/parsenode/functionexponent",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){})}),define("core/math/parsenode/functionfactorial",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){})}),define("core/math/parsenode/prime",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,r),this.order=e},e.copyWithArgs=function(e){return new this.constructor(this.order,e)}})}),define("core/math/parsenode/piecewise",["require","pjs","./scalarexpression","./constant","core/math/maybe-rational"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./constant"),i=e("core/math/maybe-rational").maybeRational,a=t(r,{});return a.chain=function(e){for(var t,r=n(NaN);e.length;)t=e.pop(),r=a([t.condition,t.if_expr,r]);return r},a.empty=function(){return a([n(!0),n(i(1,1)),n(NaN)])},a}),define("core/math/parsenode/derivative",["require","pjs","./scalarexpression","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("./identifier");return t(r,function(e,t){e.init=function(e,r){this._symbol=e instanceof n?e._symbol:n(e)._symbol,t.init.call(this,r)}})}),define("core/math/parsenode/nativefunction",["require","pjs","./scalarexpression","core/math/functions"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("core/math/functions");return t(r,function(e,r,i){e.init=function(e,t){if(e.length>=this._requiredArity)for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);this._errorSymbol="logbase"===this._symbol?"log":t||this._symbol,r.init.call(this,e)},e.copyWithArgs=function(e){var t=r.copyWithArgs.call(this,e);return t._errorSymbol=this._errorSymbol,t},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,r,i,a){return t(this,function(t,o,s){s.isFunction=!0,t._symbol=e,t.head=r,t._requiredArity=i,t._optionalArguments=a||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=n.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),s.getConcreteInvocationTree=function(e,t,r,n){return s(r,n).getConcreteTree(e,t)},s.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/typedfunction",["require","pjs","./nativefunction"],function(e){"use strict";return e("pjs")(e("./nativefunction"),function(e,t,r,n){r.create=function(e,t,r,i){var a=r.length,o=n.create.call(this,e,t,a);return o.prototype._inputTypes=r,o.prototype._outputType=i,o}})}),define("core/math/parsenode/trigfunction",["require","pjs","./nativefunction","./expressionTypes","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Multiply,i=e("core/math/errormsg");return t(r,function(e,t,r,a){r.create=function(e,t){var r=a.create(e,t,1);return r.getConcreteInvocationTree=function(e,t,a,o){if(a.length<1)throw i.wrongArity(o,1,a.length);var s=t.trigAngleMultiplier?[n([a[0],t.trigAngleMultiplier])].concat(a.slice(1)):a;return r(s,o).getConcreteTree(e,t)},r.getCacheKeys=function(){return["trigAngleMultiplier"]},r}})}),define("core/math/parsenode/inversetrigfunction",["require","pjs","./nativefunction","./expressionTypes"],function(e){"use strict";var t=e("pjs"),r=e("./nativefunction"),n=e("./expressionTypes").Divide;return t(r,function(e,t,r,i){r.create=function(e,t,r){var a=i.create(e,t,1,r);return a.getConcreteInvocationTree=function(e,t,r,i){var o=a(r,i);return(t.trigAngleMultiplier?n([o,t.trigAngleMultiplier]):o).getConcreteTree(e,t)},a.getCacheKeys=function(){return["trigAngleMultiplier"]},a}})}),define("core/math/parsenode/distribution",["require","pjs","./scalarexpression","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./scalarexpression"),n=e("core/math/errormsg");return t(r,function(e,r,i){e.init=function(e,t){var i="tdist"===this._symbol;if(e.length<this._requiredArity){if(i)throw n.tdistWrongArity();throw n.wrongArity(t,this._requiredArity,e.length)}if(e.length>this._maxArity){if(i)throw n.tdistWrongArity();throw n.wrongArity(this._symbol,this._maxArity,e.length)}for(;e.length<this._maxArity;)e.push(this._optionalArguments[e.length-this._requiredArity]);r.init.call(this,e)},e.scalarEvalExpression=function(e){return this.head+"("+e.join(",")+")"},i.create=function(e,r,n){return t(this,function(t,i,a){a.isFunction=!0,t._symbol=e,t._requiredArity=r,t._optionalArguments=n||[],t._maxArity=t._requiredArity+t._optionalArguments.length,a.getConcreteInvocationTree=function(e,t,r,n){return a(r,n)},a.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/reducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg","./distribution","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/functions"),i=e("core/math/errormsg"),a=e("./distribution"),o=e("core/math/types");return t(r,function(e,r,s){e.init=function(e,t){if(0===e.length)throw i.zeroArgReducer(t);if(e[0]instanceof a&&"length"!==this._symbol&&!e[0][this._symbol])throw i.functionTypeError(this._symbol,[o.prettyPrint(this.args[0].valueType)]);r.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e+")"},e.getEvalStrings=function(){var e=this.args[0].getEvalStrings();return{statements:e.statements,expression:this.evalExpression(e.expression)}},s.create=function(e,r){return t(s,function(t,i,a){t._symbol=e,t.head=r,t._arity=1,a.isFunction=!0,a.allowDotCalls=!0,a.dotMinArity=0,a.dotMaxArity=0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r,n){return a(r,n).getConcreteTree(e,t)},a.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/doublereducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/functions"),i=e("core/math/errormsg");return t(r,function(e,r,a){e.init=function(e,t){if(r.init.call(this,e),2!==this.args.length)throw i.wrongDoubleReducerArity(t)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],r=Math.min(this.args[0].length,this.args[1].length),n=0;n<this.args.length;n++){var i=this.args[n],a=i.getEvalStrings();Array.prototype.push.apply(e,a.statements),t.push(i.length===r?a.expression:a.expression+".slice(0,"+r+")")}return{statements:e,expression:this.evalExpression(t)}},a.create=function(e,r){return t(a,function(t,i,a){t._symbol=e,t.head=r,t._arity=2,a.isFunction=!0,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),a.getConcreteInvocationTree=function(e,t,r,n){return a(r,n).getConcreteTree(e,t)},a.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/parametrizedreducerfunction",["require","pjs","./expression","core/math/functions","core/math/errormsg","./distribution","core/math/types"],function(e){"use strict";var t=e("pjs"),r=e("./expression"),n=e("core/math/functions"),i=e("core/math/errormsg"),a=e("./distribution"),o=e("core/math/types");return t(r,function(e,r,s){e.init=function(e,t){if(e.length<2&&void 0!==this._optionalArgument&&e.push(this._optionalArgument),2!==e.length)throw i.wrongParametrizedReducerArity(t);if(e[0]instanceof a&&!e[0][this._symbol])throw i.functionTypeError(t,[o.prettyPrint(this.args[0].valueType)]);r.init.call(this,e)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){var e=[],t=this.args[0].getEvalStrings(),r=this.args[1].getEvalStrings();return Array.prototype.push.apply(e,t.statements),Array.prototype.push.apply(e,r.statements),{statements:e,expression:this.evalExpression([t.expression,r.expression])}},s.create=function(e,r,i){return t(s,function(t,a,o){t._symbol=e,t.head=r,t._optionalArgument=i,t._arity=2,o.isFunction=!0,o.allowDotCalls=!0,o.dotMinArity=void 0===i?1:0,o.dotMaxArity=1,t.evaluate=n.createEvaluateFunction(t.evalExpression.bind(t),t._arity),o.getConcreteInvocationTree=function(e,t,r,n){return o(r,n).getConcreteTree(e,t)},o.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/toplevelfunction",["require","pjs","./nativefunction","core/math/errormsg"],function(e){"use strict";var t=e("pjs"),r=e("./nativefunction"),n=e("core/math/errormsg");return t(r,function(e,r,i,a){i.create=function(e){return t(i,function(e,t,r){r.isFunction=!0,r.getConcreteInvocationTree=function(e,t,r,i){throw n.unexpectedSymbol(i)},r.getCacheKeys=function(){return[]}})}})}),define("core/math/parsenode/builtinfunction",["require","core/math/parsenode/nativefunction","core/math/parsenode/typedfunction","core/math/parsenode/trigfunction","core/math/parsenode/inversetrigfunction","core/math/parsenode/reducerfunction","core/math/parsenode/doublereducerfunction","core/math/parsenode/parametrizedreducerfunction","core/math/parsenode/distribution","core/math/parsenode/toplevelfunction","core/math/types","core/math/maybe-rational","core/math/parsenode/constant"],function(e){"use strict";var t=e("core/math/parsenode/nativefunction"),r=e("core/math/parsenode/typedfunction"),n=e("core/math/parsenode/trigfunction"),i=e("core/math/parsenode/inversetrigfunction"),a=e("core/math/parsenode/reducerfunction"),o=e("core/math/parsenode/doublereducerfunction"),s=e("core/math/parsenode/parametrizedreducerfunction"),u=e("core/math/parsenode/distribution"),c=e("core/math/parsenode/toplevelfunction"),l=e("core/math/types"),p=e("core/math/maybe-rational").maybeRational,f=e("core/math/parsenode/constant"),h=f(p(1,1)),d=f(p(0,1)),m=f(p(1,2));return{sin:n.create("sin","BuiltIn.sin"),cos:n.create("cos","BuiltIn.cos"),tan:n.create("tan","BuiltIn.tan"),cot:n.create("cot","BuiltIn.cot"),sec:n.create("sec","BuiltIn.sec"),csc:n.create("csc","BuiltIn.csc"),arcsin:i.create("arcsin","Math.asin"),arccos:i.create("arccos","Math.acos"),arctan:i.create("arctan","Math.atan2",[h]),arccot:i.create("arccot","BuiltIn.acot"),arcsec:i.create("arcsec","BuiltIn.asec"),arccsc:i.create("arccsc","BuiltIn.acsc"),sinh:t.create("sinh","BuiltIn.sinh",1),cosh:t.create("cosh","BuiltIn.cosh",1),tanh:t.create("tanh","BuiltIn.tanh",1),coth:t.create("coth","BuiltIn.coth",1),sech:t.create("sech","BuiltIn.sech",1),csch:t.create("csch","BuiltIn.csch",1),arcsinh:t.create("arcsinh","BuiltIn.asinh",1),arccosh:t.create("arccosh","BuiltIn.acosh",1),arctanh:t.create("arctanh","BuiltIn.atanh",1),arccoth:t.create("arccoth","BuiltIn.acoth",1),arcsech:t.create("arcsech","BuiltIn.asech",1),arccsch:t.create("arccsch","BuiltIn.acsch",1),sqrt:t.create("sqrt","Math.sqrt",1),rtxsqpone:t.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:t.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:t.create("nthroot","BuiltIn.nthroot",2),log:t.create("log","BuiltIn.common_log",1),logbase:t.create("logbase","BuiltIn.log_base",2),ln:t.create("ln","BuiltIn.log",1),exp:t.create("exp","Math.exp",1),floor:t.create("floor","Math.floor",1),ceil:t.create("ceil","Math.ceil",1),round:t.create("round","BuiltIn.round",1,[d]),abs:t.create("abs","Math.abs",1),sign:t.create("sign","BuiltIn.sign",1),mod:t.create("mod","BuiltIn.mod",2),nCr:t.create("nCr","BuiltIn.nCr",2),nPr:t.create("nPr","BuiltIn.nPr",2),factorial:t.create("factorial","BuiltIn.factorial",1),polyGamma:t.create("polyGamma","BuiltIn.polyGamma",2),lcm:a.create("lcm","BuiltIn.listLCM"),gcd:a.create("gcd","BuiltIn.listGCD"),mean:a.create("mean","BuiltIn.mean"),total:a.create("total","BuiltIn.total"),stdev:a.create("stdev","BuiltIn.stdev"),stdevp:a.create("stdevp","BuiltIn.stdevp"),mad:a.create("mad","BuiltIn.mad"),length:a.create("length","BuiltIn.length"),min:a.create("min","BuiltIn.listMin"),max:a.create("max","BuiltIn.listMax"),argmin:a.create("argmin","BuiltIn.argMin"),argmax:a.create("argmax","BuiltIn.argMax"),median:a.create("median","BuiltIn.median"),var:a.create("var","BuiltIn.var"),varp:a.create("varp","BuiltIn.varp"),cov:o.create("cov","BuiltIn.cov"),covp:o.create("covp","BuiltIn.covp"),corr:o.create("corr","BuiltIn.corr"),spearman:o.create("spearman","BuiltIn.spearman"),quantile:s.create("quantile","BuiltIn.quantile"),quartile:s.create("quartile","BuiltIn.quartile"),upperQuantileIndex:s.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:s.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:s.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:s.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:s.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:t.create("normalcdf","BuiltIn.normalcdf",2,[d,h]),normalpdf:t.create("normalpdf","BuiltIn.normalpdf",1,[d,h]),normalSample:r.create("normalSample","BuiltIn.normalSample",[l.SeedType,l.Number,l.Number],l.Number),uniformSample:r.create("uniformSample","BuiltIn.uniformSample",[l.SeedType,l.Number,l.Number],l.Number),tSample:r.create("tSample","BuiltIn.tSample",[l.SeedType,l.Number],l.Number),poissonSample:r.create("poissonSample","BuiltIn.poissonSample",[l.SeedType,l.Number],l.Number),binomSample:r.create("binomSample","BuiltIn.binomSample",[l.SeedType,l.Number,l.Number],l.Number),binomcdf:t.create("binomcdf","BuiltIn.binomcdf",3,[m]),binompdf:t.create("binompdf","BuiltIn.binompdf",2,[m]),poissoncdf:t.create("poissoncdf","BuiltIn.poissoncdf",3),poissonpdf:t.create("poissonpdf","BuiltIn.poissonpdf",2),uniformcdf:t.create("uniformcdf","BuiltIn.uniformcdf",2,[d,h]),uniformpdf:t.create("uniformpdf","BuiltIn.uniformpdf",1,[d,h]),invNorm:t.create("invNorm","BuiltIn.invNorm",1),invT:t.create("invT","BuiltIn.invT",2),invPoisson:t.create("invPoisson","BuiltIn.invPoisson",2),invBinom:t.create("invBinom","BuiltIn.invBinom",3),invUniform:t.create("invUniform","BuiltIn.invUniform",3),erf:t.create("erf","BuiltIn.erf",1),tpdf:t.create("tpdf","BuiltIn.tpdf",2),tcdf:t.create("tcdf","BuiltIn.tcdf",3),tscore:s.create("tscore","BuiltIn.tscore",d),distance:r.create("distance","BuiltIn.distance",[l.Point,l.Point],l.Number),midpoint:r.create("midpoint","BuiltIn.midpoint",[l.Point,l.Point],l.Point),normaldist:u.create("normaldist",0,[d,h]),tdist:u.create("tdist",1),binomialdist:u.create("binomialdist",1,[m]),poissondist:u.create("poissondist",1),uniformdist:u.create("uniformdist",0,[d,h]),pdf:r.create("pdf","BuiltIn.normpdf",[l.Distribution,[l.Number,l.ListOfNumber,l.EmptyList]],l.Number).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=1}),cdf:r.create("cdf","BuiltIn.normcdf",[l.Distribution,[l.Number,l.ListOfNumber,l.EmptyList],[l.Number,l.ListOfNumber,l.EmptyList]],l.Number).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=2}),random:t.create("random","",2).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=3}),shuffle:t.create("shuffle","",2).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=2,r.minArityUsageExample="shuffle([1,2,3])",e.minArityUsageExample=r.minArityUsageExample,r.maxArityUsageExample="shuffle([1,2,3],2)",e.maxArityUsageExample=r.maxArityUsageExample,r.dotMaxArityUsageExample=".shuffle(2)"}),sort:t.create("sort","",1).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=0,r.dotMaxArity=1,r.minArityUsageExample="sort([3,2,1])",e.minArityUsageExample=r.minArityUsageExample,r.maxArityUsageExample="sort([1,2,3],[3,2,1])",e.maxArityUsageExample=r.maxArityUsageExample,r.dotMaxArityUsageExample=".sort([3,4])"}),join:t.create("join","",2).open(function(e,t,r){r.allowDotCalls=!0,r.dotMinArity=1,r.dotMaxArity=1/0,r.minArityUsageExample="join([1,2],[3,4])",e.minArityUsageExample=r.minArityUsageExample,r.dotMinArityUsageExample=".join([3,4])"}),polygon:c.create("polygon"),histogram:c.create("histogram"),dotplot:c.create("dotplot"),boxplot:c.create("boxplot"),ttest:c.create("ttest"),ittest:c.create("ittest"),stats:c.create("stats")}}),define("core/math/parsenode/histogram",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="histogram"}})}),define("core/math/parsenode/object3d",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,e),this._symbol=r}})}),define("core/math/parsenode/dotplot",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="dotplot"}})}),define("core/math/parsenode/boxplot",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){t.init.call(this,e),this._symbol="boxplot"}})}),define("core/math/parsenode/ttest",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ttest"}})}),define("core/math/parsenode/independent-ttest",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="ittest"}})}),define("core/math/parsenode/stats",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(){t.init.apply(this,arguments),this._symbol="stats"}})}),define("core/math/parsenode/equation",["require","./base","pjs","./expressionTypes","core/math/parsenode/comparator"],function(e){"use strict";var t=e("./base"),r=e("pjs"),n=e("./expressionTypes").Subtract,i=e("core/math/parsenode/comparator");return r(t,function(e,t){e.init=function(e,r){t.init.call(this),this.mergeDependencies(e,r),this._lhs=e,this._rhs=r,this._difference=n([this._lhs,this._rhs])},e.asComparator=function(){return i["="]([this._lhs,this._rhs])}})}),define("core/math/parsenode/assignment",["require","./base","./equation","./identifier","pjs"],function(e){"use strict";var t=e("./base"),r=e("./equation"),n=e("./identifier");return e("pjs")(t,function(e,t){e.init=function(e,r){t.init.call(this),e=e._symbol,this.mergeDependencies(r),this._expression=r,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),r=0;r<t.length;r++)if(t[r]===e)return[];return[e]},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=r(n(this._symbol),this._expression);return e.userData=this.userData,e.metaData=this.metaData,e},e.shouldPromoteToSlider=function(e){return!!this._expression.isConstant&&!this._expression.is_mixed_number&&"number"==typeof this._expression.asValue()&&!!isFinite(this._expression.asValue())&&e.isValidSlider(this._symbol)}})}),define("core/math/parsenode/functiondefinition",["require","pjs","./base","core/math/errormsg","./equation","./identifier","./functioncall"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/errormsg"),i=e("./equation"),a=e("./identifier"),o=e("./functioncall");return t(r,function(e,t){e.init=function(e,r,n){t.init.call(this),e=e._symbol,this._argSymbols=r.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=n,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,r,i){if(r.length!==this._argSymbols.length)throw n.wrongArity(i,this._argSymbols.length,r.length);for(var a=Object.create(t),o=0;o<this._argSymbols.length;o++)a[this._argSymbols[o]]=r[o];return this._expression.getConcreteTree(e,a)},e.getSliderVariables=function(e,t){var r=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===r.indexOf(e)})},e.asEquation=function(){var e=this._argSymbols.map(function(e){return a(e)}),t=i(o(a(this._symbol),e),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}})}),define("core/math/parsenode/optimizedregression",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e,r,n,i,a){t.init.call(this),this.parameters=e,this.residuals=r,this.statistics=n,this.model=i,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this.isLinear=a.isLinear,this.parameterWarning=a.parameterWarning,this._exports=[this.residualVariable];for(var o in e)e.hasOwnProperty(o)&&this._exports.push(o);this.mergeDependencies(i)},e.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},e.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},e.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})}),define("numeric",[],function(){"use strict"\n;var e="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=e),e.version="1.2.6",e._myIndexOf=function(e){var t,r=this.length;for(t=0;t<r;++t)if(this[t]===e)return t;return-1},e.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:e._myIndexOf,e.precision=4,e.largeArray=50,e.compile=function(){var t=Array.prototype.slice.call(arguments),r=t.pop();return r="return function ("+t.join(",")+") {"+r+"}",new Function(["numeric"],r)(e)},e._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},e.dim=function(t){var r,n;return"object"==typeof t?(r=t[0],"object"==typeof r?(n=r[0],"object"==typeof n?e._dim(t):[t.length,r.length]):[t.length]):[]},e.mapreduce=function(t,r){return e.compile("x","accum","_s","_k",\'if(typeof accum === "undefined") accum = \'+r+\';\\nif(typeof x === "number") { var xi = x; \'+t+\'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    \'+t+";\\n    xi = x[i-1];\\n    "+t+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+t+"\\n}\\nreturn accum;")},e.mapreduce2=function(t,r){return e.compile("x","var n = x.length;\\nvar i,xi;\\n"+r+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+t+"\\n}\\nreturn accum;")},e.rep=function(t,r,n){void 0===n&&(n=0);var i,a=t[n],o=Array(a);if(n===t.length-1){for(i=a-2;i>=0;i-=2)o[i+1]=r,o[i]=r;return-1===i&&(o[0]=r),o}for(i=a-1;i>=0;i--)o[i]=e.rep(t,r,n+1);return o},e.dotMMsmall=function(e,t){var r,n,i,a,o,s,u,c,l,p,f;for(a=e.length,o=t.length,s=t[0].length,u=Array(a),r=a-1;r>=0;r--){for(c=Array(s),l=e[r],i=s-1;i>=0;i--){for(p=l[o-1]*t[o-1][i],n=o-2;n>=1;n-=2)f=n-1,p+=l[n]*t[n][i]+l[f]*t[f][i];0===n&&(p+=l[0]*t[0][i]),c[i]=p}u[r]=c}return u},e._getCol=function(e,t,r){var n,i=e.length;for(n=i-1;n>0;--n)r[n]=e[n][t],--n,r[n]=e[n][t];0===n&&(r[0]=e[0][t])},e.dotMMbig=function(t,r){var n,i,a,o=e._getCol,s=r.length,u=Array(s),c=t.length,l=r[0].length,p=new Array(c),f=e.dotVV;for(--s,--c,i=c;-1!==i;--i)p[i]=Array(l);for(--l,i=l;-1!==i;--i)for(o(r,i,u),a=c;-1!==a;--a)0,n=t[a],p[a][i]=f(n,u);return p},e.dotMV=function(t,r){var n,i=t.length,a=(r.length,Array(i)),o=e.dotVV;for(n=i-1;n>=0;n--)a[n]=o(t[n],r);return a},e.dotVM=function(e,t){var r,n,i,a,o,s,u;for(i=e.length,a=t[0].length,o=Array(a),n=a-1;n>=0;n--){for(s=e[i-1]*t[i-1][n],r=i-2;r>=1;r-=2)u=r-1,s+=e[r]*t[r][n]+e[u]*t[u][n];0===r&&(s+=e[0]*t[0][n]),o[n]=s}return o},e.dotVV=function(e,t){var r,n,i=e.length,a=e[i-1]*t[i-1];for(r=i-2;r>=1;r-=2)n=r-1,a+=e[r]*t[r]+e[n]*t[n];return 0===r&&(a+=e[0]*t[0]),a},e.dot=function(t,r){var n=e.dim;switch(1e3*n(t).length+n(r).length){case 2002:return r.length<10?e.dotMMsmall(t,r):e.dotMMbig(t,r);case 2001:return e.dotMV(t,r);case 1002:return e.dotVM(t,r);case 1001:return e.dotVV(t,r);case 1e3:return e.mulVS(t,r);case 1:return e.mulSV(t,r);case 0:return t*r;default:throw new Error("numeric.dot only works on vectors and matrices")}},e.diag=function(e){var t,r,n,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),r=t+2,n=a-1;n>=r;n-=2)i[n]=0,i[n-1]=0;for(n>t&&(i[n]=0),i[t]=e[t],n=t-1;n>=1;n-=2)i[n]=0,i[n-1]=0;0===n&&(i[0]=0),o[t]=i}return o},e.getDiag=function(e){var t,r=Math.min(e.length,e[0].length),n=Array(r);for(t=r-1;t>=1;--t)n[t]=e[t][t],--t,n[t]=e[t][t];return 0===t&&(n[0]=e[0][0]),n},e.identity=function(t){return e.diag(e.rep([t],1))},e.pointwise=function(t,r,n){void 0===n&&(n="");var i,a,o=[],s=/\\[i\\]$/,u="",c=!1;for(i=0;i<t.length;i++)s.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],"ret"===a&&(c=!0),o.push(a);return o[t.length]="_s",o[t.length+1]="_k",o[t.length+2]=\'if(typeof _s === "undefined") _s = numeric.dim(\'+u+\');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i\'+(c?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+t.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+n+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+r+"\\n}\\nreturn ret;",e.compile.apply(null,o)},e.pointwise2=function(t,r,n){void 0===n&&(n="");var i,a,o=[],s=/\\[i\\]$/,u="",c=!1;for(i=0;i<t.length;i++)s.test(t[i])?(a=t[i].substring(0,t[i].length-3),u=a):a=t[i],"ret"===a&&(c=!0),o.push(a);return o[t.length]="var _n = "+u+".length;\\nvar i"+(c?"":", ret = Array(_n)")+";\\n"+n+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+r+"\\n}\\nreturn ret;",e.compile.apply(null,o)},e._biforeach=function e(t,r,n,i,a){if(i===n.length-1)return void a(t,r);var o,s=n[i];for(o=s-1;o>=0;o--)e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,i+1,a)},e._biforeach2=function e(t,r,n,i,a){if(i===n.length-1)return a(t,r);var o,s=n[i],u=Array(s);for(o=s-1;o>=0;--o)u[o]=e("object"==typeof t?t[o]:t,"object"==typeof r?r[o]:r,n,i+1,a);return u},e._foreach=function e(t,r,n,i){if(n===r.length-1)return void i(t);var a,o=r[n];for(a=o-1;a>=0;a--)e(t[a],r,n+1,i)},e._foreach2=function e(t,r,n,i){if(n===r.length-1)return i(t);var a,o=r[n],s=Array(o);for(a=o-1;a>=0;a--)s[a]=e(t[a],r,n+1,i);return s},e.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},e.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},e.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],e.mathfuns2=["atan2","pow","max","min"],e.ops1={neg:"-",not:"!",bnot:"~",clone:""},e.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var t,r;for(t=0;t<e.mathfuns2.length;++t)r=e.mathfuns2[t],e.ops2[r]=r;for(t in e.ops2)if(e.ops2.hasOwnProperty(t)){r=e.ops2[t];var n,i,a="";-1!==e.myIndexOf.call(e.mathfuns2,t)?(a="var "+r+" = Math."+r+";\\n",n=function(e,t,n){return e+" = "+r+"("+t+","+n+")"},i=function(e,t){return e+" = "+r+"("+e+","+t+")"}):(n=function(e,t,n){return e+" = "+t+" "+r+" "+n},i=e.opseq.hasOwnProperty(t+"eq")?function(e,t){return e+" "+r+"= "+t}:function(e,t){return e+" = "+e+" "+r+" "+t}),e[t+"VV"]=e.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),a),e[t+"SV"]=e.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),a),e[t+"VS"]=e.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),a),e[t]=e.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+t+"VV, VS = numeric."+t+"VS, SV = numeric."+t+\'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else \'+i("x","y")+"\\n}\\nreturn x;\\n"),e[r]=e[t],e[t+"eqV"]=e.pointwise2(["ret[i]","x[i]"],i("ret[i]","x[i]"),a),e[t+"eqS"]=e.pointwise2(["ret[i]","x"],i("ret[i]","x"),a),e[t+"eq"]=e.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+t+"eqV, S = numeric."+t+\'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n\')}for(t=0;t<e.mathfuns2.length;++t)r=e.mathfuns2[t],delete e.ops2[r];for(t=0;t<e.mathfuns.length;++t)r=e.mathfuns[t],e.ops1[r]=r;for(t in e.ops1)e.ops1.hasOwnProperty(t)&&(a="",r=e.ops1[t],-1!==e.myIndexOf.call(e.mathfuns,t)&&Math.hasOwnProperty(r)&&(a="var "+r+" = Math."+r+";\\n"),e[t+"eqV"]=e.pointwise2(["ret[i]"],"ret[i] = "+r+"(ret[i]);",a),e[t+"eq"]=e.compile("x",\'if(typeof x !== "object") return \'+r+"x\\nvar i;\\nvar V = numeric."+t+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),e[t+"V"]=e.pointwise2(["x[i]"],"ret[i] = "+r+"(x[i]);",a),e[t]=e.compile("x",\'if(typeof x !== "object") return \'+r+"(x)\\nvar i;\\nvar V = numeric."+t+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(t=0;t<e.mathfuns.length;++t)r=e.mathfuns[t],delete e.ops1[r];for(t in e.mapreducers)e.mapreducers.hasOwnProperty(t)&&(r=e.mapreducers[t],e[t+"V"]=e.mapreduce2(r[0],r[1]),e[t]=e.compile("x","s","k",r[1]+\'if(typeof x !== "object") {    xi = x;\\n\'+r[0]+\'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.\'+t+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+r[0]+"\\n}\\nreturn accum;\\n"))}(),e.inv=function(t){var r,n,i,a,o,s,u,t,c=e.dim(t),l=Math.abs,p=c[0],f=c[1],h=e.clone(t),d=e.identity(p);for(s=0;s<f;++s){var m=-1,y=-1;for(o=s;o!==p;++o)(u=l(h[o][s]))>y&&(m=o,y=u);for(n=h[m],h[m]=h[s],h[s]=n,a=d[m],d[m]=d[s],d[s]=a,t=n[s],u=s;u!==f;++u)n[u]/=t;for(u=f-1;-1!==u;--u)a[u]/=t;for(o=p-1;-1!==o;--o)if(o!==s){for(r=h[o],i=d[o],t=r[s],u=s+1;u!==f;++u)r[u]-=n[u]*t;for(u=f-1;u>0;--u)i[u]-=a[u]*t,--u,i[u]-=a[u]*t;0===u&&(i[0]-=a[0]*t)}}return d},e.det=function(t){var r=e.dim(t);if(2!==r.length||r[0]!==r[1])throw new Error("numeric: det() only works on square matrices");var n,i,a,o,s,u,c,l,p=r[0],f=1,h=e.clone(t);for(i=0;i<p-1;i++){for(a=i,n=i+1;n<p;n++)Math.abs(h[n][i])>Math.abs(h[a][i])&&(a=n);for(a!==i&&(c=h[a],h[a]=h[i],h[i]=c,f*=-1),o=h[i],n=i+1;n<p;n++){for(s=h[n],u=s[i]/o[i],a=i+1;a<p-1;a+=2)l=a+1,s[a]-=o[a]*u,s[l]-=o[l]*u;a!==p&&(s[a]-=o[a]*u)}if(0===o[i])return 0;f*=o[i]}return f*h[i][i]},e.transpose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=i[r],a[t-1]=n[r],--r,a=u[r],a[t]=i[r],a[t-1]=n[r];0===r&&(a=u[0],a[t]=i[0],a[t-1]=n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=n[r],--r,u[r][0]=n[r];0===r&&(u[0][0]=n[0])}return u},e.negtranspose=function(e){var t,r,n,i,a,o=e.length,s=e[0].length,u=Array(s);for(r=0;r<s;r++)u[r]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],n=e[t-1],r=s-1;r>=1;--r)a=u[r],a[t]=-i[r],a[t-1]=-n[r],--r,a=u[r],a[t]=-i[r],a[t-1]=-n[r];0===r&&(a=u[0],a[t]=-i[0],a[t-1]=-n[0])}if(0===t){for(n=e[0],r=s-1;r>=1;--r)u[r][0]=-n[r],--r,u[r][0]=-n[r];0===r&&(u[0][0]=-n[0])}return u},e.norm2=function(t){return Math.sqrt(e.norm2Squared(t))},e.linspace=function(e,t,r){if(void 0===r&&(r=Math.max(Math.round(t-e)+1,1)),r<2)return 1===r?[e]:[];var n,i=Array(r);for(r--,n=r;n>=0;n--)i[n]=(n*t+(r-n)*e)/r;return i},e.getBlock=function(t,r,n){function i(e,t){var o,s=r[t],u=n[t]-s,c=Array(u);if(t===a.length-1){for(o=u;o>=0;o--)c[o]=e[o+s];return c}for(o=u;o>=0;o--)c[o]=i(e[o+s],t+1);return c}var a=e.dim(t);return i(t,0)},e.setBlock=function(t,r,n,i){function a(e,t,i){var s,u=r[i],c=n[i]-u;if(i===o.length-1)for(s=c;s>=0;s--)e[s+u]=t[s];for(s=c;s>=0;s--)a(e[s+u],t[s],i+1)}var o=e.dim(t);return a(t,i,0),t},e.getRange=function(e,t,r){var n,i,a,o,s=t.length,u=r.length,c=Array(s);for(n=s-1;-1!==n;--n)for(c[n]=Array(u),a=c[n],o=e[t[n]],i=u-1;-1!==i;--i)a[i]=o[r[i]];return c},e.blockMatrix=function(t){var r=e.dim(t);if(r.length<4)return e.blockMatrix([t]);var n,i,a,o,s,u=r[0],c=r[1];for(n=0,i=0,a=0;a<u;++a)n+=t[a][0].length;for(o=0;o<c;++o)i+=t[0][o][0].length;var l=Array(n);for(a=0;a<n;++a)l[a]=Array(i);var p,f,h,d,m,y=0;for(a=0;a<u;++a){for(p=i,o=c-1;-1!==o;--o)for(s=t[a][o],p-=s[0].length,h=s.length-1;-1!==h;--h)for(m=s[h],f=l[y+h],d=m.length-1;-1!==d;--d)f[p+d]=m[d];y+=t[a][0].length}return l},e.tensor=function(t,r){if("number"==typeof t||"number"==typeof r)return e.mul(t,r);var n=e.dim(t),i=e.dim(r);if(1!==n.length||1!==i.length)throw new Error("numeric: tensor product is only defined for vectors");var a,o,s,u,c=n[0],l=i[0],p=Array(c);for(o=c-1;o>=0;o--){for(a=Array(l),u=t[o],s=l-1;s>=3;--s)a[s]=u*r[s],--s,a[s]=u*r[s],--s,a[s]=u*r[s],--s,a[s]=u*r[s];for(;s>=0;)a[s]=u*r[s],--s;p[o]=a}return p},e.epsilon=2.220446049250313e-16,e.LU=function(t,r){r=r||!1;var n,i,a,o,s,u,c,l,p,f=Math.abs,h=t.length,d=h-1,m=new Array(h);for(r||(t=e.clone(t)),a=0;a<h;++a){for(c=a,u=t[a],p=f(u[a]),i=a+1;i<h;++i)o=f(t[i][a]),p<o&&(p=o,c=i);for(m[a]=c,c!=a&&(t[a]=t[c],t[c]=u,u=t[a]),s=u[a],n=a+1;n<h;++n)t[n][a]/=s;for(n=a+1;n<h;++n){for(l=t[n],i=a+1;i<d;++i)l[i]-=l[a]*u[i],++i,l[i]-=l[a]*u[i];i===d&&(l[i]-=l[a]*u[i])}}return{LU:t,P:m}},e.LUsolve=function(t,r){var n,i,a,o,s,u=t.LU,c=u.length,l=e.clone(r),p=t.P;for(n=c-1;-1!==n;--n)l[n]=r[n];for(n=0;n<c;++n)for(a=p[n],p[n]!==n&&(s=l[n],l[n]=l[a],l[a]=s),o=u[n],i=0;i<n;++i)l[n]-=l[i]*o[i];for(n=c-1;n>=0;--n){for(o=u[n],i=n+1;i<c;++i)l[n]-=l[i]*o[i];l[n]/=o[n]}return l},e.solve=function(t,r,n){return e.LUsolve(e.LU(t,n),r)},e}),define("core/math/qr",["require","exports"],function(e,t){"use strict";function r(e,t){for(var r=e.length,n=t.length,i=0,a=0,o=n-r;o<n;o++)i+=e[o+r-n]*t[o],a+=e[o+r-n]*e[o+r-n];for(var s=i/a,o=n-r;o<n;o++)t[o]=2*s*e[o+r-n]-t[o]}function n(e,t,r){for(var n=e.length,i=t.length,a=0,o=0,s=i-n;s<i;s++)a+=e[s+n-i]*t[s][r],o+=e[s+n-i]*e[s+n-i];for(var u=a/o,s=i-n;s<i;s++)t[s][r]=2*u*e[s+n-i]-t[s][r]}function i(e,t,r,n){var i=Array(e.length-t);if(1===i.length)return i[0]=1,i;if(0===n){i[0]=1;for(var a=1;a<i.length;a++)i[a]=0;return i}var o=e[t][r]<0?-1:1;i[0]=e[t][r]+o*Math.sqrt(n);for(var s=t+1;s<e.length;s++)i[s-t]=e[s][r];return i}function a(e,t,r){for(var n=0;t<e.length;t++)n+=e[t][r]*e[t][r];return n}function o(e,t){if(!t||!t.mutateInput){var r=e;e=Array(e.length);for(var o=0;o<r.length;o++)e[o]=r[o].slice()}for(var s=Math.min(e.length,e[0].length),u=Array(s),c=[],l=0;l<s;l++){for(var p=-1/0,f=l,h=l;h<e[l].length;h++){var d=a(e,l,h);d>p&&(p=d,f=h)}if(u[l]=f,f!==l)for(var o=0;o<e.length;o++){var m=e[o][f];e[o][f]=e[o][l],e[o][l]=m}for(var y=i(e,l,l,p),h=l;h<e[l].length;h++)n(y,e,h);c.push(y)}return{reflectors:c,r:e,p:u}}function s(e,t,n){for(var i=e.reflectors,a=e.r,o=e.p,s=t.slice(),u=0;u<i.length;u++)r(i[u],s);for(var u=i.length;u<a[0].length;u++)s[u]=0;s.length=a[0].length;for(var c=Math.pow(2,-52),l=n.regularize?c*Math.abs(a[0][0])*Math.max(a.length,a[0].length):0,u=i.length-1;u>=0;u--){var p=a[u];if(Math.abs(p[u])<=l)s[u]=0;else{for(var f=u+1;f<i.length;f++)s[u]-=s[f]*p[f];s[u]/=p[u]}}for(var u=o.length-1;u>=0;u--)if(o[u]!==u){var h=s[u];s[u]=s[o[u]],s[o[u]]=h}return s}function u(e,t,r){for(var n=Array(e.r[0].length),i=0;i<n.length;i++)n[i]=Array(t[0].length);for(var a=Array(t.length),o=0;o<t[0].length;o++){for(var i=0;i<t.length;i++)a[i]=t[i][o];for(var u=s(e,a,r),i=0;i<u.length;i++)n[i][o]=u[i]}return n}function c(e,t,r){return Array.isArray(t[0])?u(e,t,r):s(e,t,r)}function l(e){var t=e.r,r=Math.min(t.length,t[0].length),n=t[0][0],i=t[r-1][r-1];return 0===n?1/0:Math.abs(n/i)}function p(e){var t=Math.pow(2,-52);return Math.max(e.r.length,e.r[0].length)*t*l(e)<1}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumericallyFullRank=t.conditionNumber=t.qrSolve=t.qr=void 0,t.qr=o,t.qrSolve=c,t.conditionNumber=l,t.isNumericallyFullRank=p}),define("core/math/least-squares",["require","exports","numeric","core/math/distance","./qr"],function(e,t,r,n,i){"use strict";function a(e,t){for(var r=[],n=0;n<t;n++)r.push(e);return r}function o(e,t){for(var r=s(e,t),n=0,i=0,a=r;i<a.length;i++){var o=a[i],u=o;n+=u*u}return n/r.length}function s(e,t){return e.apply(void 0,t)}function u(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var a=i[n],o=a.apply(void 0,t);r.push(o)}return r}function c(e,t){for(var r=[],n=0;n<e.length;n++)t[n]&&r.push(e[n]);return r}function l(e,t,r){for(var n=[],i=0,a=0;i<e.length;i++){var o=0;r[i]&&(o=t[a],a+=1),n.push(e[i]+o)}return n}function p(e,t){var r=t.solution.map(function(e){return Math.abs(e)<1e-6?0:e}),n=o(e,r);return isFinite(t.MSE)&&!isFinite(t.MSE)?t:n<t.MSE||t.MSE!==t.MSE+Math.pow(.5,8)*(n-t.MSE)?t:{solution:r,MSE:n}}function f(e,t){for(var n=a(0,t.length),c=u(t,n),l=i.qr(r.transpose(c),{mutateInput:!0}),p=0;p<2;p++){var f=s(e,n),h=r.neg(i.qrSolve(l,f,{regularize:!1}));n=r.add(n,h)}var d=o(e,n);if(i.isNumericallyFullRank(l))return{solution:n,MSE:d};for(var m=a(0,t.length),p=0;p<2;p++){var f=s(e,m),h=r.neg(i.qrSolve(l,f,{regularize:!0}));m=r.add(m,h)}var y=o(e,m);return.999*y<=d?{solution:m,MSE:y}:{solution:n,MSE:d}}function h(e,t,n,p){var f,h=p.maxIterations,d=p.linearSubset||a(!1,n.length),m=r.not(d),y=c(t,d),g=c(t,m),v=n,b=0,x=.001;if(r.any(d)){var _=r.transpose(u(y,v)),S=i.qr(_);f={Jv:_,F:S};var M=s(e,v),E=r.neg(i.qrSolve(S,M,{regularize:!0}));v=l(v,E,d)}for(var D=!1,w=o(e,v);b<h&&!D&&isFinite(w);){var M=s(e,v),T=u(g,v),P=r.transpose(T),I=void 0,C=void 0;if(f){var S=f.F,_=f.Jv;I=r.dot(T,r.sub(M,r.dot(_,i.qrSolve(S,M,{regularize:!0})))),C=r.dot(T,r.sub(P,r.dot(_,i.qrSolve(S,P,{regularize:!0}))))}else I=r.dot(T,M),C=r.dot(T,P);for(var O=v,L=!1;b<h&&!D&&!L;){b+=1;var A=r.add(C,r.diag(a(x,g.length)));O=l(v,r.neg(r.solve(A,I,!0)),m),D=r.all(r.eq(O,v));var N=void 0;if(f){var _=r.transpose(u(y,O)),S=i.qr(_);N={Jv:_,F:S};var F=s(e,O),E=r.neg(i.qrSolve(S,F,{regularize:!0}));O=l(O,E,d)}var q=o(e,O);L=q<w,L?(v=O,w=q,f=N,x*=.1):(x=Math.max(x,1e-64),x*=2)}}return{solution:v,MSE:w}}function d(e,t,r,n){if(!t)return e;if("known"!==t.type)return e;var i=t.bounds;return i[0]===-1/0&&i[1]===1/0?e:i[0]===-1/0?i[1]-Math.exp(-e):i[1]===1/0?i[0]+Math.exp(e):r/(n-1)*i[1]+(n-1-r)/(n-1)*i[0]}function m(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],a=[],o=0;o<i.length;o++){var s=_[o%_.length]*n%e.length;a.push(d(i[o],t[o],s,e.length))}r.push(a)}return r}function y(e,t,r){r||(r={});var i=r.linearSubset,a=r.bounds,o=r.preferredInitialGuess,s=b(t.length);a&&(s=m(s,a));var u=x(e,t,s,5,{maxIterations:3,linearSubset:i}),c=x(e,t,u,1,{maxIterations:60,linearSubset:i}),l=h(e,t,c[0],{maxIterations:250,linearSubset:i});if(!o)return l;var p=h(e,t,o,{maxIterations:100,linearSubset:i});return isFinite(p.MSE)?p.MSE<l.MSE?p:n.approx(p.MSE,l.MSE,8)?p:l:l}Object.defineProperty(t,"__esModule",{value:!0}),t.testOnlyExports=t.optimizeNonLinear=t.optimizeLinear=t.tryRoundingSmallParametersToZero=t.evaluateMeanSquare=void 0,t.evaluateMeanSquare=o,t.tryRoundingSmallParametersToZero=p,t.optimizeLinear=f;var g=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500],v=function(e){return g[503*e%g.length]},b=function(e){for(var t=[],r=0;r<g.length;r++){for(var n=[],i=0;i<e;i++)n[i]=0===r&&1!==e?0:1===r&&1!==e?1:v(r*e+i);t.push(n)}return t},x=function(e,t,r,n,i){for(var a=[],o=0,s=r;o<s.length;o++){var u=s[o];a.push({soln:h(e,t,u,i),initialGuess:u})}a.sort(function(e,t){return isNaN(e.soln.MSE)?1:isNaN(t.soln.MSE)?-1:e.soln.MSE-t.soln.MSE});for(var c=[],l=0;l<n;l++)c.push(a[l].initialGuess);return c},_=[3,5,7,11,13,17,19];t.optimizeNonLinear=y,t.testOnlyExports={generateInitialGuesses:b,mapInitialGuesses:m}}),define("core/math/builtinconstants",["require","core/math/parsenode/constant","core/math/maybe-rational"],function(e){"use strict";var t=e("core/math/parsenode/constant"),r=e("core/math/maybe-rational").maybeRational;return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(r(1,1)),infty:t(1/0)}}),define("core/math/builtinframe",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";var t,r=e("core/math/builtinconstants"),n=e("core/math/parsenode/builtinfunction"),i={};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t]);for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}),define("core/math/reparameterization",["require","exports","core/math/parsenode/constant","core/math/builtinframe","tslib","core/math/distance","core/math/policy"],function(e,t,r,n,i,a,o){"use strict";function s(e,t,r){var i=e.getPolynomialCoefficients(t).map(function(e){return e.getConcreteTree(o.defaultPolicy,n)});return(r-+i[0].asValue())/+i[1].asValue()}function u(e){return[a.hypot(e[0],e[1]),e[2],Math.atan2(e[1],e[0])]}function c(e){return[e[0]*Math.cos(e[2]),e[0]*Math.sin(e[2]),e[1]]}function l(e,t){var i={};for(var a in e)e[a].isConstant&&(i[a]=e[a]);var s=t.model;switch(s.type){case"trig":for(var u=c([s.amplitudeNode,s.frequencyNode,s.phaseNode].map(function(e){return+e.substitute(i).getConcreteTree(o.defaultPolicy,n).asValue()})),l=0;l<s.newParameterSymbols.length;l++)i[s.newParameterSymbols[l]]=r(u[l]);break;case"exp":if(s.intercept&&(i[s.intercept.newParameterSymbols[0]]=r(Math.log(s.intercept.sign*+s.intercept.node.substitute(i).getConcreteTree(o.defaultPolicy,n).asValue()))),s.base&&(i[s.base.newParameterSymbols[0]]=r(Math.log(+s.base.node.substitute(i).getConcreteTree(o.defaultPolicy,n).asValue()))),s.shiftScale)for(var p=s.shiftScale,h=p.mulNode,d=p.addNode,m=p.newParameterSymbols,y=p.stats,u=f([h,d].map(function(e){return+e.substitute(i).getConcreteTree(o.defaultPolicy,n).asValue()}),y),l=0;l<m.length;l++)i[m[l]]=r(u[l]);break;default:var g=s;throw new Error("Unexpected model type "+g.type)}for(var a in i)t.expression.dependsOn(a)||delete i[a];return i}function p(e,t){var r=t.range,n=t.midrange;return[e[0]/r,e[1]-n*e[0]/r]}function f(e,t){var r=t.range,n=t.midrange;return[r*e[0],e[1]+n*e[0]]}function h(e,t){return e.map(function(e){return t[e]?+t[e].asValue():NaN})}function d(e,t,n){e=i.__assign({},e);var a=t.model;switch(a.type){case"trig":for(var o=u(h(a.newParameterSymbols,e)),c=[a.amplitudeNode,a.frequencyNode,a.phaseNode],l=0;l<c.length;l++){var f=c[l].substitute(e),d=o[l],m=f.getDependencies()[0];e[m]=r(s(f,m,d))}break;case"exp":if(a.shiftScale)for(var y=a.shiftScale,g=y.mulNode,v=y.addNode,b=y.stats,x=y.newParameterSymbols,o=p(h(x,e),b),c=[g,v],l=0;l<c.length;l++){var f=c[l].substitute(e),d=o[l],m=f.getDependencies()[0];e[m]=r(s(f,m,d))}if(a.intercept){var _=a.intercept.node.getDependencies()[0],S=s(a.intercept.node,_,a.intercept.sign*Math.exp(+e[a.intercept.newParameterSymbols[0]].asValue()));e[_]=r(S)}if(a.base){var M=a.base.node.getDependencies()[0],E=s(a.base.node,M,Math.exp(+e[a.base.newParameterSymbols[0]].asValue()));e[M]=r(E)}break;default:var D=a;throw new Error("Unimplemented model "+D.type)}for(var w={},T=0,P=n;T<P.length;T++){var m=P[T];w[m]=e[m]}return w}Object.defineProperty(t,"__esModule",{value:!0}),t.solveForOriginalParameters=t.mapInitialGuesses=void 0,t.mapInitialGuesses=l,t.solveForOriginalParameters=d}),define("core/math/parsenode/regression",["require","pjs","./base","core/math/distance","core/math/builtin","core/lib/label","core/math/errormsg","./error","./optimizedregression","./list","./functioncall","./identifier","./constant","./freevariable","./expressionTypes","core/math/types","core/math/least-squares","core/math/reparameterization"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("core/math/distance"),i=e("core/math/builtin"),a=e("core/lib/label"),o=e("core/math/errormsg"),s=e("./error"),u=e("./optimizedregression"),c=e("./list"),l=e("./functioncall"),p=e("./identifier"),f=e("./constant"),h=e("./freevariable"),d=e("./expressionTypes"),m=e("core/math/types"),y=e("core/math/least-squares"),g=e("core/math/reparameterization"),v=g.solveForOriginalParameters,b=g.mapInitialGuesses,x=y.optimizeLinear,_=y.optimizeNonLinear,S=y.evaluateMeanSquare,M=d.Subtract;return t(r,function(e,t,r){function d(e,t){for(var r=[],n=0;n<e.length;n++)r.push(t.boundDomain(e[n]));return r}function g(e,t,r){var n=[];t||(t={}),r||(r={});for(var i=0;i<e.length;i++){var o=e[i],s=a.identifierToLatex(o);r[o]&&isFinite(r[o].asValue())?n.push(+r[o].asValue()):t.hasOwnProperty(s)&&isFinite(t[s])?n.push(+t[s].asValue()):n.push(1)}return n}function E(e,t,r,n){var i,a,s=t.getDependencies();for(a=0;a<s.length;a++)if(!e.validRegressionParameter(s[a]))throw o.invalidRegressionParameter(s[a]);var u=t.getCompiledFunction(s).fn;if(s.length){var c=t.findLinearSubset(s),l=c.every(function(e){return e}),p=[];for(a=0;a<s.length;a++)p.push(t.takeDerivative(s[a]).getCompiledFunction(s).fn);if(l)i=y.tryRoundingSmallParametersToZero(u,x(u,p)),i.isLinear=!0;else{var f={linearSubset:c,bounds:d(s,t),preferredInitialGuess:g(s,r,n)};i=y.tryRoundingSmallParametersToZero(u,_(u,p,f)),i.isLinear=!1}}else i={solution:[],MSE:S(u,[]),isLinear:!0};return i}function D(e,t){for(var r={},n=t.getDependencies(),i=0;i<n.length;i++)r[n[i]]=f(e.solution[i]);return r}function w(e,t){return x(function(r,n){for(var i=[],a=0;a<e.length;a++)i.push(t[a]-(r*e[a]+n));return i},[function(){return e.map(function(e){return-e})},function(){return e.map(function(){return-1})}],[0,0])}function T(e,t){var r=e.length,i=e[0],a=t[0],o=e[r-1],s=t[r-1];if(!(isFinite(i)&&isFinite(o)&&isFinite(a)&&isFinite(s)))return!1;if(s-a==0)return!1;var u=o-i;if(0===u)return!1;for(var c=1;c<r-1;c++){var l=e[c],p=t[c],f=(s*(l-i)+a*(o-l))/u;if(!n.approx(p,f,5))return!1}return!0}function P(e,t,r,n){var i=Object.create(r);for(var a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return c.wrap(t.getConcreteTree(e,i))}function I(e,t){var r=0;return t.eachElement(e,function(e){var t=e.asValue();r+=t*t}),r/t.length}function C(e,t,r,n,i){var a,o=r.reparameterizeRegression();if(!o||0===o.length)return r=r.deriveRegressionRestrictions(),a=E(e,r,n,i),{parameters:D(a,r),isLinear:a.isLinear,parameterWarning:!1};for(var s=r.getDependencies(),u=1/0,c={},l=!1,p=0;p<o.length;p++){var f=o[p],h=f.expression;if(h=h.deriveRegressionRestrictions(),a=E(e,h,b(n,f),b(i,f)),a.MSE<u){var d=D(a,h),m=v(d,f,s),y=I(e,P(e,r.substitute(m),t,m));if(c&&(!isFinite(y)||y>=u)){isFinite(y)||(l=!0);continue}u=a.MSE,c=m}}return{parameters:c,isLinear:!1,parameterWarning:l}}function O(e){var t={};for(var r in e)t[r]=f(e[r]);return t}e.init=function(e,r){t.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof p,this._logLhs=l("ln",[e]),this._rhs=r,this._difference=M([e,r]),this._logDifference=M([l("ln",[e]),l("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var t=a.latexToIdentifier(this.userData.residualVariable);if(!e[t])return t}for(var r,n=this.getDependencies(),i=0;i<n.length;i++){var o=n[i].match(/_(.*)/);if(o&&(r="e_"+o[1],!e[r]))return r}for(var s=1;;){if(r="e_"+s,!e[r])return r;s++}},e.getRHSModel=function(e,t,r){for(var n,i,a=this._rhs.getDependencies(),o=0;o<a.length;o++){var s=a[o];if(t[s]&&t[s].tryGetConcreteTree){var u=t[s].tryGetConcreteTree(e,t);if(!u.isError&&u.valueType===m.ListOfNumber){if(void 0!==n){n=void 0;break}0===u.getDependencies().length&&(n=s,i=u)}}}var c=Object.create(t);void 0!==n&&(c[n]=h(this.tmpVar()));var l=this._rhs.tryGetConcreteTree(e,c);return{node:l,substituted:l.isError?l:l.substitute(r),listNode:i,isValid:void 0!==n}},e.computeStatistics=function(e,t,r,a,s,u){if(a.getDependencies().length)throw o.optimizationError();var l=I(e,a);if(!isFinite(l))throw o.optimizationError();if(t.getDependencies().length>0)return{RMSE:Math.sqrt(l)};var p=m.isList(t.valueType)?i.varp(t.asValue()):0;if(t.getDependencies().length||!isFinite(p)||p<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(l)};var f=1-l/p;if(r.isValid){var h=[],d=[],y=s&&(u===L.LINLOG||u===L.LOGLOG);c.eachArgs(e,[r.listNode,t],function(e){h.push(y?Math.log(e[0].asValue()):+e[0].asValue()),d.push(+e[1].asValue())});var g=i.corr(h,d);if(n.approx(w(h,d).MSE,l,8))return{r:g,rsquared:g*g}}return{Rsquared:f}},e.getResidualSuggestionId=function(e,t){var r,n=this._rhs.getDependencies();for(var i in t)if(t.hasOwnProperty(i)&&t[i].concreteTree.isTable&&t[i].concreteTree.columns[0]){var a=t[i].rawTree.columns;if(a&&a.length){var o=a[0].getExports();if(1===o.length&&-1!==n.indexOf(o[0])){for(var s=1;s<a.length;s++)if(-1!==a[s].getDependencies().indexOf(e))return;r=r||i}}}return r||void 0};var L={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};e.linearizingTransformation=function(e,t,r){if(!this.isLhsSimple)return L.NONE;if(!r.isValid)return L.NONE;var n=r.substituted;if(n.isError)return L.NONE;if(n.valueType!==m.Number)return L.NONE;var i=n.getDependencies();if(1!==i.length)return L.NONE;if(isFinite(r.node.polynomialOrder(i[0])))return L.NONE;var a=n.getCompiledFunction(i).fn,o=r.listNode;if(n.valueType!==m.Number)return L.NONE;var s=o.mapElements(e,function(e){return+e.asValue()});if(s.length<3)return L.NONE;s.sort(function(e,t){return e-t});var u=s.map(a),l=u.map(Math.log),p=s.map(Math.log),f=!0;return c.wrap(t).eachElement(e,function(e){isFinite(Math.log(+e.asValue()))||(f=!1)}),T(s,l)&&f?L.LOGLIN:T(p,l)&&f?L.LOGLOG:T(p,u)?L.LINLOG:L.NONE},e.optimize=function(e,t,r,n,i){var o=this._lhs.getConcreteTree(e,t),s=this._rhs.getConcreteTree(e,t);this.typeCheck(e,[o,s]);var l,p=O(this.userData.regressionParameters),f=c.wrap(this._difference.getConcreteTree(e,t)),h=C(e,t,f,p,n),d=h.parameters,m=h.isLinear,y=this.getRHSModel(e,t,d),g=P(e,this._difference,t,d),v=this.linearizingTransformation(e,o,y);if(!this.userData.isLogModeRegression||v!==L.LOGLIN&&v!==L.LOGLOG)l=this.computeStatistics(e,o,y,g,this.userData.isLogModeRegression,v);else{var b=this._logDifference.getConcreteTree(e,t),x=this._logLhs.getConcreteTree(e,t);h=C(e,t,b,p,n),d=h.parameters,m=h.isLinear,y=this.getRHSModel(e,t,d),g=P(e,this._difference,t,d);var _=P(e,this._logDifference,t,d);l=this.computeStatistics(e,x,y,_,this.userData.isLogModeRegression,v)}var S=this.chooseResidualVariable(r),M=this.getResidualSuggestionId(S,i);return this.userData.residualVariable=a.identifierToLatex(S),u(d,g,l,y.substituted,{isModelValid:y.isValid,residualVariable:S,residualSuggestionId:M,shouldSuggestLogMode:v!==L.NONE,isLinear:m,parameterWarning:h.parameterWarning})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){return e instanceof s?e:o.parseError()}},e.exportTo=function(e,t,r){if(!t.isError){for(var n in t.parameters)t.parameters.hasOwnProperty(n)&&(e.assignmentForbidden(n)||(r[n]=r[n]?o.multiplyDefined(n):t.parameters[n]));e.assignmentForbidden(t.residualVariable)||(r[t.residualVariable]=t.residuals)}},e.getSliderVariables=function(){return[]}})}),define("core/math/parsenode/image",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t,r,n){e.isImage=!0,e.init=function(e,r){t.init.call(this),this.center=e.center,this.radianAngle=e.radianAngle,this.width=e.width,this.height=e.height,this.opacity=e.opacity,this.moveStrategy=r,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}})}),define("core/math/parsenode/slider",["require","pjs","./assignment","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./assignment"),n=e("./identifier");return t(r,function(e,t,i,a){e.isSlider=!0,e.init=function(e,r){t.init.call(this,n(e._symbol),e._expression),this.setInputSpan(e._inputSpan),this.sliderAssignment=e,this.sliderMin=r.sliderMin,this.sliderMax=r.sliderMax,this.sliderSoftMin=r.sliderSoftMin,this.sliderSoftMax=r.sliderSoftMax,this.sliderStep=r.sliderStep,this.sliderIsPlayingOnce=r.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)},e.shouldPromoteToSlider=function(e){return!1},e.asAssignment=function(){return r(this._symbol,this._expression)}})}),define("core/math/parsenode/table",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e){t.init.call(this),this.columns=e,this._exports=[],this.mergeDependencies.apply(this,e);for(var r=0;r<e.length;r++)Array.prototype.push.apply(this._exports,e[r].getExports())},e.exportPenalty=1,e.isTable=!0,e.exportTo=function(e,t,r){for(var n=0;n<this.columns.length;n++){var i=this.columns[n].getExports();if(i.length){var a=i[0]\n;e.assignmentForbidden(a)||r[a]||(t.isError?r[a]=t:this.columns[n].exportTo(e,t.columns[n],r))}}},e.getAllIds=function(){return this.columns.map(function(e){return e.header.userData.id})}})}),define("core/math/parsenode/tablecolumn",["require","pjs","./base","./list","./constant","./identifier"],function(e){"use strict";var t=e("pjs"),r=e("./base"),n=e("./list"),i=e("./constant"),a=e("./identifier");return t(r,function(e,t){function o(e){return e.isError?i(NaN):e}e.init=function(e,r,n){t.init.call(this),this.header=e,this.length=r,this.values=n,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof a?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var a=e[0];if(t.isError)i[a]=t;else try{i[a]=n(t.values.map(o))}catch(e){if(!(e instanceof r))throw e;i[a]=e}}},e.exportTo=function(e,t,r){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,r)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})}),define("core/math/parsenode/solvedequation",["require","pjs","./base"],function(e){"use strict";return e("pjs")(e("./base"),function(e,t){e.init=function(e,r){t.init.call(this),this._symbol=e,this._expression=r,this.mergeDependencies(r)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})}),define("core/math/parsenode/seed",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e){"string"!=typeof e&&(e=""+e),this._stringValue=e,t.init.call(this,[])},e.isString=!0,e.getEvalStrings=function(){return{statements:[],expression:"\'"+this.asValue()+"\'"}},e.asValue=function(){return this._stringValue}})}),define("core/math/parsenode/extendseed",["require","pjs","./expression"],function(e){"use strict";return e("pjs")(e("./expression"),function(e,t){e.init=function(e,r){t.init.call(this,r),this.seed=r[0],this.userSeed=r[1],this.tag=e},e.getEvalStrings=function(){var e=this.seed.getEvalStrings(),t=this.userSeed.getEvalStrings(),r=[];return Array.prototype.push.apply(r,e.statements),Array.prototype.push.apply(r,t.statements),{statements:r,expression:"("+e.expression+") + \'::"+this.tag+"\' + ("+t.expression+")"}},e.asValue=function(){return this.seed.asValue()+"::"+this.tag+this.userSeed.asValue()},e.copyWithArgs=function(e){return new this.constructor(this.tag,e)}})}),define("parsenodes",["require","core/math/parsenode/expressionTypes","core/math/parsenode/base","core/math/parsenode/expression","core/math/parsenode/scalarexpression","core/math/parsenode/error","core/math/parsenode/constant","core/math/parsenode/mixednumber","core/math/parsenode/identifier","core/math/parsenode/ans","core/math/parsenode/freevariable","core/math/parsenode/dummyindex","core/math/parsenode/list","core/math/parsenode/range","core/math/parsenode/broadcast","core/math/parsenode/listaccess","core/math/parsenode/dotaccess","core/math/parsenode/dotaccessexponent","core/math/parsenode/orderedpair","core/math/parsenode/movablepoint","core/math/parsenode/orderedpairaccess","core/math/parsenode/polygon","core/math/parsenode/basecomparator","core/math/parsenode/comparator","core/math/parsenode/doubleinequality","core/math/parsenode/repeatedoperator","core/math/parsenode/sum","core/math/parsenode/product","core/math/parsenode/integral","core/math/parsenode/functioncall","core/math/parsenode/seededfunctioncall","core/math/parsenode/functionexponent","core/math/parsenode/functionfactorial","core/math/parsenode/prime","core/math/parsenode/piecewise","core/math/parsenode/derivative","core/math/parsenode/builtinfunction","core/math/parsenode/nativefunction","core/math/parsenode/typedfunction","core/math/parsenode/reducerfunction","core/math/parsenode/parametrizedreducerfunction","core/math/parsenode/doublereducerfunction","core/math/parsenode/toplevelfunction","core/math/parsenode/distribution","core/math/parsenode/histogram","core/math/parsenode/object3d","core/math/parsenode/dotplot","core/math/parsenode/boxplot","core/math/parsenode/ttest","core/math/parsenode/independent-ttest","core/math/parsenode/stats","core/math/parsenode/assignment","core/math/parsenode/functiondefinition","core/math/parsenode/equation","core/math/parsenode/regression","core/math/parsenode/image","core/math/parsenode/slider","core/math/parsenode/table","core/math/parsenode/tablecolumn","core/math/parsenode/solvedequation","core/math/parsenode/optimizedregression","core/math/parsenode/seed","core/math/parsenode/extendseed"],function(e){"use strict";var t=e("core/math/parsenode/expressionTypes"),r={Base:e("core/math/parsenode/base"),Expression:e("core/math/parsenode/expression"),ScalarExpression:e("core/math/parsenode/scalarexpression"),Error:e("core/math/parsenode/error"),Constant:e("core/math/parsenode/constant"),MixedNumber:e("core/math/parsenode/mixednumber"),Identifier:e("core/math/parsenode/identifier"),Ans:e("core/math/parsenode/ans"),FreeVariable:e("core/math/parsenode/freevariable"),DummyIndex:e("core/math/parsenode/dummyindex"),List:e("core/math/parsenode/list"),Range:e("core/math/parsenode/range"),Broadcast:e("core/math/parsenode/broadcast"),ListAccess:e("core/math/parsenode/listaccess"),DotAccess:e("core/math/parsenode/dotaccess"),DotAccessExponent:e("core/math/parsenode/dotaccessexponent"),OrderedPair:e("core/math/parsenode/orderedpair"),MovablePoint:e("core/math/parsenode/movablepoint"),OrderedPairAccess:e("core/math/parsenode/orderedpairaccess"),Polygon:e("core/math/parsenode/polygon"),BaseComparator:e("core/math/parsenode/basecomparator"),Comparator:e("core/math/parsenode/comparator"),DoubleInequality:e("core/math/parsenode/doubleinequality"),RepeatedOperator:e("core/math/parsenode/repeatedoperator"),Sum:e("core/math/parsenode/sum"),Product:e("core/math/parsenode/product"),Integral:e("core/math/parsenode/integral"),FunctionCall:e("core/math/parsenode/functioncall"),SeededFunctionCall:e("core/math/parsenode/seededfunctioncall"),FunctionExponent:e("core/math/parsenode/functionexponent"),FunctionFactorial:e("core/math/parsenode/functionfactorial"),Prime:e("core/math/parsenode/prime"),Piecewise:e("core/math/parsenode/piecewise"),Derivative:e("core/math/parsenode/derivative"),BuiltInFunction:e("core/math/parsenode/builtinfunction"),NativeFunction:e("core/math/parsenode/nativefunction"),TypedFunction:e("core/math/parsenode/typedfunction"),ReducerFunction:e("core/math/parsenode/reducerfunction"),ParametrizedReducerFunction:e("core/math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:e("core/math/parsenode/doublereducerfunction"),TopLevelFunction:e("core/math/parsenode/toplevelfunction"),Distribution:e("core/math/parsenode/distribution"),Histogram:e("core/math/parsenode/histogram"),Object3D:e("core/math/parsenode/object3d"),DotPlot:e("core/math/parsenode/dotplot"),BoxPlot:e("core/math/parsenode/boxplot"),TTest:e("core/math/parsenode/ttest"),IndependentTTest:e("core/math/parsenode/independent-ttest"),Stats:e("core/math/parsenode/stats"),Assignment:e("core/math/parsenode/assignment"),FunctionDefinition:e("core/math/parsenode/functiondefinition"),Equation:e("core/math/parsenode/equation"),Regression:e("core/math/parsenode/regression"),Image:e("core/math/parsenode/image"),Slider:e("core/math/parsenode/slider"),Table:e("core/math/parsenode/table"),TableColumn:e("core/math/parsenode/tablecolumn"),SolvedEquation:e("core/math/parsenode/solvedequation"),OptimizedRegression:e("core/math/parsenode/optimizedregression"),Seed:e("core/math/parsenode/seed"),ExtendSeed:e("core/math/parsenode/extendseed")};for(var n in t)r[n]=t[n];for(var i in r)r.hasOwnProperty(i)&&"Comparator"!==i&&"BuiltInFunction"!==i&&(r[i].prototype.type=i);for(var a in r.Comparator)r.Comparator.hasOwnProperty(a)&&(r.Comparator[a].prototype.type="Comparator[\'"+a+"\']");for(var o in r.BuiltInFunction)r.BuiltInFunction.hasOwnProperty(o)&&(r.BuiltInFunction[o].prototype.type="BuiltInFunction[\'"+o+"\']");return r}),define("core/math/parser/char-codes",["require","exports"],function(e,t){"use strict";function r(e){return 48<=e&&e<=57}function n(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}function a(e){return n(e)||i(e)}function o(e){return 92===e}function s(e){return 46===e}function u(e){return 39===e}function c(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isWhitespace=t.isSingleQuote=t.isDot=t.isBackslash=t.isLetter=t.isUpperCaseLetter=t.isLowerCaseLetter=t.isDigit=void 0,t.isDigit=r,t.isLowerCaseLetter=n,t.isUpperCaseLetter=i,t.isLetter=a,t.isBackslash=o,t.isDot=s,t.isSingleQuote=u,t.isWhitespace=c}),define("core/math/parser/latex-lexer",["require","exports","./char-codes","./input-span"],function(e,t,r,n){"use strict";function i(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function a(e,t,r){return{type:e,span:t,val:r}}function o(e,t,r,n){return{input:e,prevSpan:t,pos:r,token:n}}function s(e){return u(e,0,n.emptySpanAt(e,0))}function u(e,t,n){for(;r.isWhitespace(e.charCodeAt(t));)t+=1;return o(e,n,t,d(e,t))}function c(e){return u(e.input,e.token.span.end,e.token.span)}function l(e){return e.token}function p(e,t){if(l(e).type!==t)throw"Parse Error: expected "+t+".";return c(e)}function f(e,t){return l(e).type===t}function h(e){return e.pos>=e.input.length}function d(e,t){var i=t;if(t>=e.length)return a("End",n.emptySpanAt(e,t),"");var o=e.charCodeAt(t);if(r.isDigit(o)){var s=n.Span(e,i,t+1);return a("Digit",s,e.charAt(i))}if(r.isLetter(o)){var s=n.Span(e,i,t+1);return a("Letter",s,e.charAt(i))}if(r.isBackslash(o)){if(t+=1,r.isLetter(e.charCodeAt(t))){for(;r.isLetter(e.charCodeAt(t));)t+=1;var s=n.Span(e,i,t),u=n.slice(s),c=m[u]||"Cmd";return a(c,s,u)}t+=1;var s=n.Span(e,i,t),u=n.slice(s);return a("EscapedSymbol",s,u)}if(r.isSingleQuote(o)){for(t+=1;r.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;var s=n.Span(e,i,t),u=n.slice(s);return a("Primes^",s,u)}var s=n.Span(e,i,t),u=n.slice(s);return a("Primes",s,u)}var s=n.Span(e,i,t+1),u=e.charAt(i),c=y[u]||"Symbol";return a(c,s,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.isDone=t.isAt=t.eat=t.peek=t.advance=t.lex=t.LatexToken=t.spanStates=void 0,t.spanStates=i,t.LatexToken=a,t.lex=s,t.advance=c,t.peek=l,t.eat=p,t.isAt=f,t.isDone=h;var m={"\\\\left":"Left","\\\\right":"Right","\\\\sqrt":"Sqrt","\\\\frac":"Frac","\\\\operatorname":"OperatorName"},y={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}}),define("core/math/parser/latex-node",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Group",span:e,args:t}}function n(e,t,r){return{type:"Sqrt",span:e,optArg:t,arg:r}}function i(e,t,r){return{type:"Frac",span:e,num:t,den:r}}function a(e,t,r,n){return{type:"SupSub",span:e,sup:t,sub:r,nprimes:n}}function o(e,t,r,n){return{type:"LeftRight",span:e,left:t,right:r,arg:n}}function s(e,t){return{type:"OperatorName",span:e,arg:t}}function u(e,t){return{type:"Symbol",span:e,val:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Symbol=t.OperatorName=t.LeftRight=t.SupSub=t.Frac=t.Sqrt=t.Group=void 0,t.Group=r,t.Sqrt=n,t.Frac=i,t.SupSub=a,t.LeftRight=o,t.OperatorName=s,t.Symbol=u}),define("core/math/parser/latex-parser",["require","exports","./latex-lexer","./input-span","./latex-node"],function(e,t,r,n,i){"use strict";function a(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function o(e){var t=u(r.lex(e),!1),i=t.state,a=t.tree;if(!r.isDone(i))throw"Parse error: unexpected "+n.slice(r.peek(i).span)+".";return a}function s(e,t){return{state:e,tree:t}}function u(e,t){var n,a=e,o=[];e:for(;!r.isDone(e);){var u=r.peek(e);switch(u.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===u.type&&t)break e;var l=void 0;if(n=c(e),e=n.state,l=n.tree,"Group"===l.type)for(var p=0,f=l.args;p<f.length;p++){var h=f[p];o.push(h)}else o.push(l);break;case"}":case"Right":case"End":break e;default:var d=u.type;throw"Unexpected token type "+d+"."}}var m=r.spanStates(a,e);return s(e,i.Group(m,o))}function c(e){var t,n=r.peek(e);switch(n.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return e=r.advance(e),s(e,n);case"[":case"]":return e=r.advance(e),s(e,i.Symbol(n.span,n.val));case"{":e=r.advance(e);var a=void 0;return t=u(e,!1),e=t.state,a=t.tree,e=r.eat(e,"}"),s(e,a);case"^":case"_":case"Primes":case"Primes^":return d(e);case"Left":return h(e);case"Frac":return f(e);case"Sqrt":return p(e);case"OperatorName":return l(e);case"}":case"Right":throw"Parse Error: unexpected "+n.val+".";case"End":throw"Parse Error: unexpected end.";default:throw"Unexpected token type "+n.type+"."}}function l(e){var t,n=e,a=r.peek(e);e=r.eat(e,"OperatorName");var o;t=m(e,a),e=t.state,o=t.tree;var u=r.spanStates(n,e);return s(e,i.OperatorName(u,o))}function p(e){var t,n,a=e,o=r.peek(e);e=r.eat(e,"Sqrt");var u;r.isAt(e,"[")&&(t=y(e),e=t.state,u=t.tree);var c;n=m(e,o),e=n.state,c=n.tree;var l=r.spanStates(a,e);return s(e,i.Sqrt(l,u,c))}function f(e){var t,n,a=e,o=r.peek(e);e=r.eat(e,"Frac");var u;t=m(e,o),e=t.state,u=t.tree;var c;n=m(e,o),e=n.state,c=n.tree;var l=r.spanStates(a,e);return s(e,i.Frac(l,u,c))}function h(e){var t,n=e;e=r.eat(e,"Left");var a=r.peek(e);e=r.advance(e);var o;t=u(e,!1),e=t.state,o=t.tree,e=r.eat(e,"Right");var c=r.peek(e);e=r.advance(e);var l=r.spanStates(n,e);return s(e,i.LeftRight(l,a,c,o))}function d(e){var t,n,a,o,u,c=e,l=0;e:for(;!r.isDone(e);){var p=r.peek(e);switch(p.type){case"^":if(e=r.advance(e),o)throw"Parse Error: double superscript.";t=m(e,p),e=t.state,o=t.tree;break;case"_":if(e=r.advance(e),u)throw"Parse Error: double subscript.";n=m(e,p),e=n.state,u=n.tree;break;case"Primes":if(e=r.advance(e),l>0)throw"Parse Error: double primes.";l=p.val.length;break;case"Primes^":if(e=r.advance(e),l>0)throw"Parse Error: double primes.";if(o)throw"Parse Error: double superscript";l=p.val.length-1,a=m(e,p),e=a.state,o=a.tree;break;default:break e}}var f=r.spanStates(c,e);return s(e,i.SupSub(f,o,u,l))}function m(e,t){var o,u,l=a(t.type);if(l<=0)throw new Error("Programming Error: greediness must be greater than 0.");var p=a(r.peek(e).type);if(p>0&&p<=l){var f=n.slice(t.span);throw"Parse Error: can\'t use "+n.slice(r.peek(e).span)+" as argument of "+f+". Use {}."}return o=c(e),e=o.state,u=o.tree,"Group"!==u.type&&(u=i.Group(u.span,[u])),s(e,u)}function y(e){var t;e=r.eat(e,"[");var n;return t=u(e,!0),e=t.state,n=t.tree,e=r.eat(e,"]"),s(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0,t.parse=o}),define("core/math/parser/command-aliases",["require","exports","./char-codes"],function(e,t,r){"use strict";function n(e){for(var t=0;r.isBackslash(e.charCodeAt(t));)t+=1;return t>0&&(e=e.slice(t)),i[e]||e}Object.defineProperty(t,"__esModule",{value:!0}),t.translateCmd=void 0;var i={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile"};t.translateCmd=n}),define("core/math/parser/surface-node",["require","exports","./command-aliases"],function(e,t,r){"use strict";function n(e,t){return{type:"Equals",span:e,args:t}}function i(e,t,r){return{type:"Inequality",span:e,symbol:t,args:r}}function a(e,t,r){return{type:"TrailingInequalityPiece",span:e,symbol:t,args:r}}function o(e,t,r){return{type:"InequalityChain",span:e,first:t,chain:r}}function s(e,t){return{type:"Tilde",span:e,args:t}}function u(e,t){return{type:"Pos",span:e,args:t}}function c(e,t){return{type:"Neg",span:e,args:t}}function l(e,t){return{type:"Add",span:e,args:t}}function p(e,t){return{type:"Sub",span:e,args:t}}function f(e,t){return{type:"Mul",span:e,args:t}}function h(e,t){return{type:"Div",span:e,args:t}}function d(e,t){return{type:"Bang",span:e,args:t}}function m(e,t){return{type:"Call",span:e,args:t}}function y(e,t){return{type:"ImplicitCall",span:e,args:t}}function g(e,t){return{type:"Index",span:e,args:t}}function v(e,t){return{type:"Paren",span:e,args:t}}function b(e,t){return{type:"List",span:e,args:t}}function x(e,t){return{type:"Pipes",span:e,args:t}}function _(e,t){return{type:"Subscript",span:e,args:t}}function S(e,t){return{type:"Superscript",span:e,args:t}}function M(e,t,r){return{type:"Prime",span:e,nprimes:t,args:r}}function E(e,t){return{type:"Seq",span:e,args:t}}function D(e,t){return{type:"Sqrt",span:e,args:t}}function w(e,t){return{type:"Nthroot",span:e,args:t}}function T(e,t){return{type:"Frac",span:e,args:t}}function P(e,t){return{type:"Derivative",span:e,args:t}}function I(e,t){return{type:"Integral",span:e,args:t}}function C(e,t){return{type:"EmptyIntegral",span:e,args:t}}function O(e,t){return{type:"Sum",span:e,args:t}}function L(e,t){return{type:"Product",span:e,args:t}}function A(e,t){return{type:"Piecewise",span:e,args:t}}function N(e){return{type:"EmptyPiecewise",span:e}}function F(e){return{type:"EmptyRangeEnd",span:e}}function q(e,t){return{type:"Colon",span:e,args:t}}function R(e,t){return{type:"Ellipsis",span:e,args:t}}function V(e,t){return{type:"Dot",span:e,args:t}}function B(e,t){return{type:"PercentOf",span:e,args:t}}function k(e,t){return{type:"Juxt",span:e,args:t}}function j(e,t){return{type:"Letter",span:e,val:t}}function z(e,t){return{type:"Decimal",span:e,val:t}}function G(e,t){return{type:"Cmd",span:e,val:r.translateCmd(t)}}function U(e,t){return{type:"Alphanumeric",span:e,val:t}}function W(e,t,r,n){return{type:"MixedNumber",span:e,whole:t,num:r,den:n}}function Y(e){if("Subscript"===e.type){if("Alphanumeric"!==e.args[1].type)return!1;e=e.args[0]}switch(e.type){case"Cmd":case"Letter":return!0;default:return!1}}function X(e){return"Superscript"===e.type&&Y(e.args[0])}function H(e,t){if("Letter"!==e.type||"d"!==e.val)return!1;if("Juxt"!==t.type)return!1;var r=t.args,n=r[0],i=r[1];return"Letter"===n.type&&"d"===n.val&&Y(i)}function Q(e){return"Seq"===e.type?e.args:[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.unwrapSeq=t.isDerivative=t.isSuperscriptedIdentifier=t.isIdentifier=t.MixedNumber=t.Alphanumeric=t.Cmd=t.Decimal=t.Letter=t.Juxt=t.PercentOf=t.Dot=t.Ellipsis=t.Colon=t.EmptyRangeEnd=t.EmptyPiecewise=t.Piecewise=t.Product=t.Sum=t.EmptyIntegral=t.Integral=t.Derivative=t.Frac=t.Nthroot=t.Sqrt=t.Seq=t.Prime=t.Superscript=t.Subscript=t.Pipes=t.List=t.Paren=t.Index=t.ImplicitCall=t.Call=t.Bang=t.Div=t.Mul=t.Sub=t.Add=t.Neg=t.Pos=t.Tilde=t.InequalityChain=t.TrailingInequalityPiece=t.Inequality=t.Equals=void 0,t.Equals=n,t.Inequality=i,t.TrailingInequalityPiece=a,t.InequalityChain=o,t.Tilde=s,t.Pos=u,t.Neg=c,t.Add=l,t.Sub=p,t.Mul=f,t.Div=h,t.Bang=d,t.Call=m,t.ImplicitCall=y,t.Index=g,t.Paren=v,t.List=b,t.Pipes=x,t.Subscript=_,t.Superscript=S,t.Prime=M,t.Seq=E,t.Sqrt=D,t.Nthroot=w,t.Frac=T,t.Derivative=P,t.Integral=I,t.EmptyIntegral=C,t.Sum=O,t.Product=L,t.Piecewise=A,t.EmptyPiecewise=N,t.EmptyRangeEnd=F,t.Colon=q,t.Ellipsis=R,t.Dot=V,t.PercentOf=B,t.Juxt=k,t.Letter=j,t.Decimal=z,t.Cmd=G,t.Alphanumeric=U,t.MixedNumber=W,t.isIdentifier=Y,t.isSuperscriptedIdentifier=X,t.isDerivative=H,t.unwrapSeq=Q}),define("core/math/parser/surface-node-error",["require","exports"],function(e,t){"use strict";function r(e,t){return{type:"Err",span:e,error:t}}function n(){return{type:"UnexpectedParseError"}}function i(){return{type:"EmptyInput"}}function a(){return{type:"EmptyGroup"}}function o(){return{type:"EmptySubscript"}}function s(){return{type:"EmptySuperscript"}}function u(){return{type:"EmptyRadical"}}function c(){return{type:"EmptySquareBracket"}}function l(){return{type:"EmptyPipe"}}function p(){return{type:"EmptyRadicalIndex"}}function f(){return{type:"UnexpectedEnd"}}function h(e){return{type:"BinaryOperatorMissingRight",val:e}}function d(e){return{type:"BinaryOperatorMissingLeft",val:e}}function m(e){return{type:"UnaryOperatorMissingRight",val:e}}function y(e){return{type:"UnaryOperatorMissingLeft",val:e}}function g(e,t){return{type:"MissingCloseDelimiter",open:e,close:t}}function v(e,t){return{type:"UnexpectedCloseDelimiter",open:e,close:t}}function b(){return{type:"UnexpectedDifferential"}}function x(e){return{type:"UnrecognizedSymbol",val:e}}function _(e){return{type:"InvalidOperatorName",val:e}}function S(e){return{type:"InvalidSubscript",val:e}}function M(e){return{type:"UnexpectedSubscript",base:e}}function E(e){return{type:"FunctionMissingArgument",val:e}}function D(){return{type:"PercentMissingOf"}}function w(){return{type:"PrimeWithoutParen"}}function T(){return{type:"SuperscriptWithPrime"}}function P(){return{type:"UnexpectedPrime"}}function I(){return{type:"SumMissingBound"}}function C(){return{type:"ProductMissingBound"}}function O(){return{type:"MissingBound"}}function L(){return{type:"IntegralMissingBound"}}function A(){return{type:"SumMissingBody"}}function N(){return{type:"ProductMissingBody"}}function F(){return{type:"IntegralMissingBody"}}function q(){return{type:"DerivativeMissingBody"}}function R(){return{type:"IntegralMissingDifferential"}}function V(){return{type:"DifferentialWithSuperscript"}}function B(){return{type:"FractionMissingNumerator"}}function k(){return{type:"FractionMissingDenominator"}}function j(){return{type:"FractionEmpty"}}function z(e){return{type:"AdjacentNumbers",args:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.AdjacentNumbers=t.FractionEmpty=t.FractionMissingDenominator=t.FractionMissingNumerator=t.DifferentialWithSuperscript=t.IntegralMissingDifferential=t.DerivativeMissingBody=t.IntegralMissingBody=t.ProductMissingBody=t.SumMissingBody=t.IntegralMissingBound=t.MissingBound=t.ProductMissingBound=t.SumMissingBound=t.UnexpectedPrime=t.SuperscriptWithPrime=t.PrimeWithoutParen=t.PercentMissingOf=t.FunctionMissingArgument=t.UnexpectedSubscript=t.InvalidSubscript=t.InvalidOperatorName=t.UnrecognizedSymbol=t.UnexpectedDifferential=t.UnexpectedCloseDelimiter=t.MissingCloseDelimiter=t.UnaryOperatorMissingLeft=t.UnaryOperatorMissingRight=t.BinaryOperatorMissingLeft=t.BinaryOperatorMissingRight=t.UnexpectedEnd=t.EmptyRadicalIndex=t.EmptyPipe=t.EmptySquareBracket=t.EmptyRadical=t.EmptySuperscript=t.EmptySubscript=t.EmptyGroup=t.EmptyInput=t.UnexpectedParseError=t.Err=void 0,t.Err=r,t.UnexpectedParseError=n,t.EmptyInput=i,t.EmptyGroup=a,t.EmptySubscript=o,t.EmptySuperscript=s,t.EmptyRadical=u,t.EmptySquareBracket=c,t.EmptyPipe=l,t.EmptyRadicalIndex=p,t.UnexpectedEnd=f,t.BinaryOperatorMissingRight=h,t.BinaryOperatorMissingLeft=d,t.UnaryOperatorMissingRight=m,t.UnaryOperatorMissingLeft=y,t.MissingCloseDelimiter=g,t.UnexpectedCloseDelimiter=v,t.UnexpectedDifferential=b,t.UnrecognizedSymbol=x,t.InvalidOperatorName=_,t.InvalidSubscript=S,t.UnexpectedSubscript=M,t.FunctionMissingArgument=E,t.PercentMissingOf=D,t.PrimeWithoutParen=w,t.SuperscriptWithPrime=T,t.UnexpectedPrime=P,t.SumMissingBound=I,t.ProductMissingBound=C,t.MissingBound=O,t.IntegralMissingBound=L,t.SumMissingBody=A,t.ProductMissingBody=N,t.IntegralMissingBody=F,t.DerivativeMissingBody=q,t.IntegralMissingDifferential=R,t.DifferentialWithSuperscript=V,t.FractionMissingNumerator=B,t.FractionMissingDenominator=k,t.FractionEmpty=j,t.AdjacentNumbers=z}),define("core/math/parser/expression-token-tables",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allTokenTypes=t.rightTable=t.leftTable=t.escapedSymbolTable=t.symbolTable=t.commandTable=void 0;var r={"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\\\{":!0,"\\\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,".":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0};t.commandTable={"\\\\lt":"<","\\\\gt":">","\\\\le":"<=","\\\\ge":">=","\\\\ldots":"...","\\\\sim":"~","\\\\cdot":"*","\\\\times":"*","\\\\div":"/","\\\\ln":"Ln","\\\\log":"Log","\\\\int":"Int","\\\\sum":"Sum","\\\\prod":"Prod","\\\\backslash":"Err"};for(var n=["sin","cos","tan","cot","sec","csc"],i=0,a=n;i<a.length;i++){var o=a[i];t.commandTable["\\\\"+o]="Trig",t.commandTable["\\\\"+o+"h"]="Trig",t.commandTable["\\\\arc"+o]="Trig",t.commandTable["\\\\arc"+o+"h"]="Trig"}t.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},t.escapedSymbolTable={"\\\\{":"\\\\{","\\\\}":"\\\\}","\\\\%":"%"},t.leftTable={"|":"(|","\\\\{":"\\\\{","[":"[","(":"("},t.rightTable={"|":"|)","\\\\}":"\\\\}","]":"]",")":")"},t.allTokenTypes=Object.keys(r)}),define("core/math/parser/expression-lexer",["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(e,t,r,n,i,a){"use strict";function o(e,t,r,n,i,a,o,s){return{opts:e,input:t,prevSpan:r,startIndex:n,endIndex:i,token:a,mode:o,parent:s}}function s(e,t){return n.joinSpans(e.token.span,t.prevSpan)}function u(e,t){return n.joinSpans(e,t.prevSpan)}function c(e){return n.emptySpanAt(e.token.span.input,e.token.span.start)}function l(e,t){return{type:"Differential",span:e,val:t}}function p(e,t,r){return{type:e,span:t,val:r}}function f(e,t){return h(t,e,0,n.emptySpanAt(e.span.input,e.span.start),void 0,void 0)}function h(e,t,n,i,a,s){var u=t.args;if(n>u.length&&s)return m(s,i);n=P(u,n);var c=M(t,n,a),l=c.token,f=c.endIndex;if("End"===l.type&&s){var h=s.input.args[s.startIndex];if("LeftRight"===h.type){var d=h.right;return o(e,t,i,n,f,p(r.rightTable[d.val]||"Err",d.span,d.val),a,s)}}else"Int"===l.type?a=g(a):"Differential"===l.type&&(a=v(a));return o(e,t,i,n,f,l,a,s)}function d(e){var t=e.input.args[e.startIndex],r=e.token.span;return t&&"LeftRight"===t.type?h(e.opts,t.arg,0,r,e.mode,e):m(e,r)}function m(e,t){var r=e.input,n=e.endIndex,i=e.mode,a=e.parent;return h(e.opts,r,n+1,t,i,a)}function y(e){return e.token}function g(e){return{type:"integral",parent:e}}function v(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function b(e,t){return y(e).type===t}function x(e){return e.startIndex>=e.input.args.length}function _(e,t){return t.token.span.start>e.token.span.start}function S(e,t){return{token:t,endIndex:e}}function M(e,t,i){if(t>=e.args.length)return S(t,p("End",n.emptySpanAt(e.span.input,e.span.end),""));var a=e.args[t];switch(a.type){case"Sqrt":case"Frac":case"SupSub":return S(t,a);case"Letter":if(!i||"integral"!==i.type)return S(t,a);if("d"!=a.val)return S(t,a);var o=M(e,t+1,i),s=o.endIndex,u=o.token;if("Letter"===u.type||"Cmd"===u.type){return S(s,l(n.joinSpans(a.span,u.span),u.val))}return S(t,a);case"LeftRight":var c=a.left;return S(t,p(r.leftTable[c.val]||"Err",n.joinSpans(a.span,c.span),c.val));case"OperatorName":for(var f=[],h=0,d=a.arg.args;h<d.length;h++){var m=d[h];if("Letter"!==m.type)return S(t,p("Err",a.span,n.slice(a.arg.span)));f.push(m.val)}var y="\\\\"+f.join("");return S(t,p(r.commandTable[y]||"Cmd",a.span,y));case"Cmd":return S(t,p(r.commandTable[a.val]||"Cmd",a.span,a.val));case"EscapedSymbol":return S(t,p(r.escapedSymbolTable[a.val]||"Err",a.span,a.val));case"Symbol":if(I(a))return E(e,t);return S(t,p(r.symbolTable[a.val]||"Err",a.span,a.val));case"Digit":return D(e,t);default:throw"Unexpected atom "+a.type+"."}}function E(e,t){var i=e.args[t];if("Symbol"!==i.type||"."!==i.val)throw new Error("Programming Error: expected \'.\'");if(t+2<e.args.length&&I(e.args[t+1])&&I(e.args[t+2])){var a=n.joinSpans(i.span,e.args[t+2].span);return S(t+2,p("...",a,n.slice(a)))}var o=P(e.args,t+1);return o<e.args.length&&"Digit"===e.args[o].type?D(e,t):S(t,p(r.symbolTable[i.val]||"Err",i.span,i.val))}function D(e,t){var r=w(e,t);if(r)return r;for(var i=e.args,a=e.args[t].span,o=[],s=!1,u=!1;t<i.length;t++){var c=P(i,t);if(c>=i.length)break;var l=i[c];if("Digit"===l.type)t=c,s=!0,o.push(l.val);else{if(u||!I(l))break;if(c+1<i.length&&I(e.args[c+1]))break;t=c,u=!0,o.push(".")}}if(!s)throw new Error("Programming Error: decimals must have at least one digit.");return S(t-1,p("Decimal",n.joinSpans(a,e.args[t-1].span),o.join("")))}function w(e,t){for(var r=e.args,i=r[t].span,o=[];t<r.length;t++){var s=P(r,t);if(s>=r.length)break;var u=r[s];if("Digit"!==u.type)break;t=s,o.push(u.val)}if(!((t=P(r,t))>=r.length)){var c=r[t];if("Frac"===c.type){for(var l=[],p=[],f=0,h=c.num.args;f<h.length;f++){var u=h[f];if(!T(u)){if("Digit"!==u.type)return;l.push(u.val)}}for(var d=0,m=c.den.args;d<m.length;d++){var u=m[d];if(!T(u)){if("Digit"!==u.type)return;p.push(u.val)}}var y=n.joinSpans(i,c.span);return S(t,a.MixedNumber(y,o.join(""),l.join(""),p.join("")))}}}function T(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return!1;case"Cmd":return"\\\\space"===e.val;case"EscapedSymbol":return"\\\\ "===e.val||"\\\\:"===e.val||"\\\\,"===e.val||"\\\\;"===e.val;default:throw"Unexpected atom "+e.type+"."}}function P(e,t){for(;t<e.length&&T(e[t]);)t+=1;return t}function I(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(t,"__esModule",{value:!0}),t.didAdvance=t.isDone=t.isAt=t.endIntegral=t.beginIntegral=t.peek=t.advance=t.lexAt=t.lex=t.emptySpanAtState=t.joinState=t.spanStates=void 0,Object.defineProperty(t,"Span",{enumerable:!0,get:function(){return i.Span}}),t.spanStates=s,t.joinState=u,t.emptySpanAtState=c,t.lex=f,t.lexAt=h,t.advance=d,t.peek=y,t.beginIntegral=g,t.endIntegral=v,t.isAt=b,t.isDone=x,t.didAdvance=_}),define("core/math/parser/precspec",["require","exports","./expression-token-tables"],function(e,t,r){"use strict";function n(e){return{type:"initial",tokenType:e}}function i(e){return{type:"l",tokenType:e}}function a(e){return{type:"r",tokenType:e}}function o(e){return{type:"la",tokenType:e}}function s(e){return{type:"ra",tokenType:e}}function u(e,t){for(var n=0,i=r.allTokenTypes;n<i.length;n++){var a=i[n];if(void 0===t[a])throw new Error("Programming Error: token "+a+" must be a assigned a "+e+" precedence")}}function c(e,t,r,n){if(void 0!==t[r])throw new Error("Programming Error: duplicate "+e+" entry for token "+r+".");t[r]=n}function l(e){function t(e){return o[e]}function r(e){return a[e]}function n(e){var r=i[e];return void 0===r?t(e):r}for(var i={},a={},o={},s=0;s<e.length;s++)for(var l=e[s],p=0,f=l;p<f.length;p++){var h=f[p],d=h.type,m=h.tokenType;switch(d){case"initial":c("initial",i,m,s);break;case"l":c("left",a,m,s);break;case"r":c("right",o,m,s);break;case"la":c("left",a,m,s),c("right",o,m,s);break;case"ra":c("left",a,m,s),c("right",o,m,s-1)}}return u("left",a),u("right",o),{rightPrec:t,leftPrec:r,initialPrec:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.precSpec=t.ra=t.la=t.r=t.l=t.initial=void 0,t.initial=n,t.l=i,t.r=a,t.la=o,t.ra=s,t.precSpec=l}),define("core/math/parser/expression-parser",["require","exports","tslib","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t){var n=t?r.__assign(r.__assign({},L),t):L,a=c(e,n);return"Err"===a.type&&"EmptyGroup"===a.error.type?i.Err(a.span,i.EmptyInput()):a}function c(e,t){var r=o.lex(e,t);if(o.isDone(r))return i.Err(o.spanStates(r,r),i.EmptyGroup());var n=p(r,0),a=n.state,s=n.tree;return"Err"===s.type||o.isDone(a)?s:D(a).tree}function l(e,t){\nreturn{state:e,tree:t}}function p(e,t){var r,n,i,a=e;if(r=h(e),e=r.state,i=r.tree,"Err"===i.type)return l(e,i);if(!o.didAdvance(a,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!o.isDone(e);){var s=void 0;if(s=o.isAt(e,"(")&&!m(i)?C("("):I(o.peek(e).type),t>=s)break;var u=e;if(n=d(e,i),e=n.state,i=n.tree,"Err"===i.type)return l(e,i);if(!o.didAdvance(u,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return l(e,i)}function f(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function h(e){var t,r,a,s,u,h,d,m,y,g,b,w,T,P,C,L,A,N,F,q=e,R=o.peek(e),V=O(R.type);switch(R.type){case"+":if(e=o.advance(e),t=p(e,V),e=t.state,F=t.tree,"Err"===F.type){if(!f(F.error))return l(e,F);var B=o.spanStates(q,e),k=i.Err(B,i.UnaryOperatorMissingRight(R.val));return l(e,k)}return l(e,n.Pos(o.spanStates(q,e),[F]));case"-":if(e=o.advance(e),r=p(e,V),e=r.state,F=r.tree,"Err"===F.type){if(!f(F.error))return l(e,F);var B=o.spanStates(q,e),k=i.Err(B,i.UnaryOperatorMissingRight(R.val));return l(e,k)}return l(e,n.Neg(o.spanStates(q,e),[F]));case"(":return S(e);case"\\\\{":return e=o.advance(e),o.isAt(e,"\\\\}")?(e=o.advance(e),l(e,n.EmptyPiecewise(o.spanStates(q,e)))):(a=p(e,V),e=a.state,F=a.tree,s=E(q,e,F,"\\\\{","\\\\}"),e=s.state,F=s.tree,"Err"===F.type?l(e,F):l(e,n.Piecewise(o.spanStates(q,e),[F])));case"[":return e=o.advance(e),o.isAt(e,"]")?(e=o.advance(e),l(e,n.List(o.spanStates(q,e),[]))):(u=p(e,V),e=u.state,F=u.tree,h=E(q,e,F,"[","]"),e=h.state,F=h.tree,"Err"===F.type?l(e,F):l(e,n.List(o.spanStates(q,e),[F])));case"(|":if(e=o.advance(e),o.isAt(e,"|)")){e=o.advance(e);var B=o.spanStates(q,e);return l(e,i.Err(B,i.EmptyPipe()))}return d=p(e,V),e=d.state,F=d.tree,m=E(q,e,F,"(|","|)"),e=m.state,F=m.tree,"Err"===F.type?l(e,F):l(e,n.Pipes(o.spanStates(q,e),[F]));case"Frac":e=o.advance(e);var j=c(R.num,e.opts),z=c(R.den,e.opts);if("Err"===j.type&&"EmptyGroup"===j.error.type&&"Err"===z.type&&"EmptyGroup"===z.error.type){var B=o.spanStates(q,e),k=i.Err(B,i.FractionEmpty());return l(e,k)}if("Err"===j.type&&"EmptyGroup"===j.error.type){var B=o.spanStates(q,e),k=i.Err(B,i.FractionMissingNumerator());return l(e,k)}if("Err"===z.type&&"EmptyGroup"===z.error.type){var B=o.spanStates(q,e),k=i.Err(B,i.FractionMissingDenominator());return l(e,k)}if("Err"===j.type)return l(e,j);if("Err"===z.type)return l(e,z);if(n.isDerivative(j,z)&&"Juxt"===z.type){var G=z.args[1],U=void 0;if(y=p(e,I("*")-1),e=y.state,U=y.tree,"Err"===U.type){if(f(U.error)){var B=o.spanStates(q,e);return l(e,i.Err(B,i.DerivativeMissingBody()))}return l(e,U)}return l(e,n.Derivative(o.spanStates(q,e),[G,U]))}return l(e,n.Frac(o.spanStates(q,e),[j,z]));case"Sqrt":if(e=o.advance(e),R.optArg){var W=c(R.optArg,e.opts);if("Err"===W.type)return"EmptyGroup"===W.error.type?l(e,i.Err(W.span,i.EmptyRadicalIndex())):l(e,W);var Y=c(R.arg,e.opts);return"Err"===Y.type?"EmptyGroup"===Y.error.type?l(e,i.Err(Y.span,i.EmptyRadical())):l(e,Y):l(e,n.Nthroot(o.spanStates(q,e),[W,Y]))}var Y=c(R.arg,e.opts);return"Err"===Y.type?"EmptyGroup"===Y.error.type?l(e,i.Err(Y.span,i.EmptyRadical())):l(e,Y):l(e,n.Sqrt(o.spanStates(q,e),[Y]));case"Trig":case"Ln":e=o.advance(e);var X=n.Cmd(o.spanStates(q,e),R.val),H=0,Q=o.peek(e);if("SupSub"===Q.type){if(e=o.advance(e),Q.sub){var B=o.spanStates(q,e),k=i.Err(B,i.UnexpectedSubscript(X.val));return l(e,k)}var Z=x(Q,e.opts);if(Z){if("Err"===Z.type)return l(e,Z);X=n.Superscript(o.spanStates(q,e),[X,Z])}H=Q.nprimes}var J=o.isAt(e,"(");if(J){if(g=S(e),e=g.state,F=g.tree,"Err"===F.type)return l(e,F);F=n.Call(o.spanStates(q,e),[X,F.args[0]])}else{if(b=p(e,V-1),e=b.state,F=b.tree,"Err"===F.type)return f(F.error)?l(e,i.Err(o.spanStates(q,e),i.FunctionMissingArgument(R.val))):l(e,F);F=n.ImplicitCall(o.spanStates(q,e),[X,F])}if(H>0){var B=o.spanStates(q,e);if(!J){var k=i.Err(B,i.PrimeWithoutParen());return l(e,k)}F=n.Prime(B,H,[F])}return l(e,F);case"Log":e=o.advance(e);var X=n.Cmd(o.spanStates(q,e),R.val),H=0,K=void 0,Z=void 0,Q=o.peek(e);if("SupSub"===Q.type&&(e=o.advance(e),K=v(Q,e.opts),Z=x(Q,e.opts),H=Q.nprimes),K&&"Err"===K.type)return l(e,K);if(Z&&"Err"===Z.type)return l(e,Z);var J=o.isAt(e,"(");if(J){if(w=S(e),e=w.state,F=w.tree,"Err"===F.type)return l(e,F);F=F.args[0]}else if(T=p(e,V-1),e=T.state,F=T.tree,"Err"===F.type)return f(F.error)?l(e,i.Err(o.spanStates(q,e),i.FunctionMissingArgument(R.val))):l(e,F);var $=K?n.Seq(o.spanStates(q,e),n.unwrapSeq(F).concat(K)):F,ee=K?n.Cmd(o.spanStates(q,e),"\\\\logbase"):X;if(Z&&(ee=n.Superscript(o.spanStates(q,e),[ee,Z])),F=J?n.Call(o.spanStates(q,e),[ee,$]):n.ImplicitCall(o.spanStates(q,e),[ee,$]),H>0){var B=o.spanStates(q,e);if(!J){var k=i.Err(B,i.PrimeWithoutParen());return l(e,k)}F=n.Prime(B,H,[F])}return l(e,F);case"Int":e=o.advance(e);var Q=o.peek(e);e=o.advance(e);var te=_(Q,q,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.IntegralMissingBound())):l(e,te);var Z=te.sup,K=te.sub,G=void 0;if(o.isAt(e,"Differential"))return P=M(e),e=P.state,G=P.tree,"Err"===G.type?l(e,G):l(e,n.EmptyIntegral(o.spanStates(q,e),[G,K,Z]));if(C=p(e,V),e=C.state,F=C.tree,"Err"===F.type)return f(F.error)?l(e,i.Err(F.span,i.IntegralMissingBody())):l(e,F);var re=F;return o.isAt(e,"Differential")?(L=M(e),e=L.state,G=L.tree,"Err"===G.type?l(e,G):l(e,n.Integral(o.spanStates(q,e),[G,K,Z,re]))):l(e,i.Err(o.spanStates(q,e),i.IntegralMissingDifferential()));case"Sum":e=o.advance(e);var Q=o.peek(e);e=o.advance(e);var te=_(Q,q,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.SumMissingBound())):l(e,te);var Z=te.sup,K=te.sub;return A=p(e,V),e=A.state,F=A.tree,"Err"===F.type?f(F.error)?l(e,i.Err(F.span,i.SumMissingBody())):l(e,F):l(e,n.Sum(o.spanStates(q,e),[F,K,Z]));case"Prod":e=o.advance(e);var Q=o.peek(e);e=o.advance(e);var te=_(Q,q,e);if("Err"===te.type)return"MissingBound"===te.error.type?l(e,i.Err(te.span,i.ProductMissingBound())):l(e,te);var Z=te.sup,K=te.sub;return N=p(e,V),e=N.state,F=N.tree,"Err"===F.type?f(F.error)?l(e,i.Err(F.span,i.ProductMissingBody())):l(e,F):l(e,n.Product(o.spanStates(q,e),[F,K,Z]));case"Cmd":return e=o.advance(e),F=n.Cmd(o.spanStates(q,e),R.val),l(e,F);case"Letter":return e=o.advance(e),F=n.Letter(o.spanStates(q,e),R.val),l(e,F);case"Decimal":e=o.advance(e);var ne=n.Decimal(o.spanStates(q,e),R.val),Q=e.token;if("Decimal"===Q.type||"MixedNumber"===Q.type){var ie=e;e=o.advance(e);var B=o.spanStates(q,e),ae="MixedNumber"===Q.type?Q:n.Decimal(o.spanStates(ie,e),Q.val);return l(e,i.Err(B,i.AdjacentNumbers([ne,ae])))}return l(e,ne);case"MixedNumber":return e=o.advance(e),l(e,R);case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":case".":e=o.advance(e);var B=o.spanStates(q,e),k=i.Err(B,i.BinaryOperatorMissingLeft(R.val));return l(e,k);case"!":e=o.advance(e);var B=o.spanStates(q,e),k=i.Err(B,i.UnaryOperatorMissingLeft(R.val));return l(e,k);case"SupSub":e=o.advance(e);var oe="supsub";R.sub?oe="subscript":R.sup?oe="superscript":R.nprimes>0&&(oe="prime");var B=o.spanStates(q,e),k=i.Err(B,i.UnaryOperatorMissingLeft(oe));return l(e,k);case")":case"\\\\}":case"]":case"|)":case"Differential":return D(e);case"Err":e=o.advance(e);var B=o.spanStates(q,e),k=i.Err(B,i.UnrecognizedSymbol(R.val));return l(e,k);case"End":var B=o.spanStates(q,e),k=i.Err(B,i.UnexpectedEnd());return l(e,k);default:throw"Unexpected token type "+R.type+"."}}function d(e,t){var r,a,s,u,c,h,d,m,v,_,M,T,P,O,L,A=o.peek(e),N=C(A.type);switch(A.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":case".":if(e=o.advance(e),r=p(e,N),e=r.state,L=r.tree,"Err"===L.type){if(f(L.error)){var F=o.joinState(t.span,e),q=i.Err(F,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,L)}return l(e,y(A.type,o.joinState(t.span,e),[t,L]));case"%":e=o.advance(e);var R=o.peek(e);if("Cmd"!==R.type||"of"!==R.val&&"\\\\of"!==R.val){var q=i.Err(A.span,i.PercentMissingOf());return l(e,q)}if(e=o.advance(e),a=p(e,N),e=a.state,L=a.tree,"Err"===L.type){if(f(L.error)){var F=o.joinState(t.span,e),q=i.Err(F,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,L)}return l(e,n.PercentOf(o.joinState(t.span,e),[t,L]));case">=":case"<=":case">":case"<":var V=A.type;if(e=o.advance(e),s=g(e,V),e=s.state,V=s.symbol,u=p(e,N),e=u.state,L=u.tree,"Err"===L.type){if(f(L.error)){var F=o.joinState(t.span,e),q=i.Err(F,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,L)}for(var B=n.Inequality(o.joinState(t.span,e),V,[t,L]),k=[],j=o.peek(e).type;">="===j||"<="===j||">"===j||"<"===j;){var z=e;if(V=j,e=o.advance(e),c=g(e,V),e=c.state,V=c.symbol,h=p(e,N),e=h.state,L=h.tree,"Err"===L.type){if(f(L.error)){var F=o.joinState(t.span,e),q=i.Err(F,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,L)}k.push(n.TrailingInequalityPiece(o.spanStates(z,e),V,[L])),j=o.peek(e).type}return k.length?l(e,n.InequalityChain(o.joinState(t.span,e),B,k)):l(e,B);case"!":return e=o.advance(e),l(e,n.Bang(o.joinState(t.span,e),[t]));case"[":var z=e;if(e=o.advance(e),o.isAt(e,"]")){e=o.advance(e);var F=o.spanStates(z,e);return l(e,i.Err(F,i.EmptySquareBracket()))}return d=p(e,N),e=d.state,L=d.tree,m=E(z,e,L,"[","]"),e=m.state,L=m.tree,"Err"===L.type?l(e,L):l(e,n.Index(o.joinState(t.span,e),[t,L]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\\\{":case"(|":return v=p(e,N),e=v.state,L=v.tree,"Err"===L.type?l(e,L):l(e,n.Juxt(o.joinState(t.span,e),[t,L]));case"(":if(n.isIdentifier(t)){if(_=S(e),e=_.state,L=_.tree,"Err"===L.type)return l(e,L);var F=o.joinState(t.span,e);return l(e,n.Call(F,[t,L.args[0]]))}if("Prime"===t.type&&n.isIdentifier(t.args[0])){if(M=S(e),e=M.state,L=M.tree,"Err"===L.type)return l(e,L);var F=o.joinState(t.span,e);return l(e,n.Prime(F,t.nprimes,[n.Call(F,[t.args[0],L.args[0]])]))}return T=p(e,N),e=T.state,L=T.tree,"Err"===L.type?l(e,L):l(e,n.Juxt(o.joinState(t.span,e),[t,L]));case"SupSub":e=o.advance(e);var G=b(A),U=x(A,e.opts);if(G&&"Err"===G.type)return l(e,G);if(U&&"Err"===U.type)return l(e,U);if(G&&(t=n.Subscript(o.joinState(t.span,e),[t,G])),U&&(t=n.Superscript(o.joinState(t.span,e),[t,U])),A.nprimes>0){var F=o.joinState(t.span,e);if(!n.isIdentifier(t)){var q=i.Err(F,i.UnexpectedPrime());return l(e,q)}t=n.Prime(F,A.nprimes,[t])}return l(e,t);case",":for(var W=[t];o.isAt(e,",")&&(e=o.advance(e),!o.isAt(e,"..."))&&(!e.opts.trailingComma||!w(e));){if(P=p(e,N),e=P.state,L=P.tree,"Err"===L.type){if(f(L.error)){var F=o.joinState(t.span,e),q=i.Err(F,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,L)}W.push(L)}return l(e,n.Seq(o.joinState(t.span,e),W));case"...":if(e=o.advance(e),o.isAt(e,",")&&(e=o.advance(e)),N>=I(o.peek(e).type))return l(e,n.Ellipsis(o.joinState(t.span,e),[t,n.EmptyRangeEnd(o.emptySpanAtState(e))]));if(O=p(e,N),e=O.state,L=O.tree,"Err"===L.type){if(f(L.error)){var F=o.joinState(t.span,e),q=i.Err(F,i.BinaryOperatorMissingRight(A.val));return l(e,q)}return l(e,L)}return l(e,n.Ellipsis(o.joinState(t.span,e),[t,L]));case"]":case")":case"\\\\}":case"|)":case"Differential":return D(e);case"Err":return p(e,N);case"End":var F=o.spanStates(e,e),q=i.Err(F,i.UnexpectedEnd());return l(e,q);default:throw"Unexpected token type "+A.type+"."}}function m(e){return!!n.isIdentifier(e)||!("Prime"!==e.type||!n.isIdentifier(e.args[0]))}function y(e,t,r){switch(e){case"+":return n.Add(t,r);case"-":return n.Sub(t,r);case"*":return n.Mul(t,r);case"/":return n.Div(t,r);case"=":return n.Equals(t,r);case"~":return n.Tilde(t,r);case":":return n.Colon(t,r);case".":return n.Dot(t,r);default:throw"Unexpected token type "+e+"."}}function g(e,t){if(!o.isAt(e,"="))return{state:e,symbol:t};switch(t){case">":e=o.advance(e),t=">=";break;case"<":e=o.advance(e),t="<="}return{state:e,symbol:t}}function v(e,t){if(e.sub){var r=e.sub,n=c(r,t);return"Err"===n.type&&"EmptyGroup"===n.error.type?i.Err(n.span,i.EmptySubscript()):n}}function b(e){if(e.sub){var t=e.sub;if(0===t.args.length)return i.Err(t.span,i.EmptySubscript());for(var r=[],o=0,s=t.args;o<s.length;o++){var u=s[o];if("Digit"!==u.type&&"Letter"!==u.type){var c=u.span;return i.Err(c,i.InvalidSubscript(a.slice(c)))}r.push(u.val)}return n.Alphanumeric(t.span,r.join(""))}}function x(e,t){if(e.sup){var r=c(e.sup,t);return"Err"===r.type?"EmptyGroup"===r.error.type?i.Err(r.span,i.EmptySuperscript()):r:e.nprimes>0?i.Err(e.span,i.SuperscriptWithPrime()):r}}function _(e,t,r){if("SupSub"!==e.type){var n=o.spanStates(t,r);return i.Err(n,i.MissingBound())}if(e.nprimes>0){var n=o.spanStates(t,r);return i.Err(n,i.UnexpectedPrime())}var a=v(e,r.opts),s=x(e,r.opts);if(!a||"Err"===a.type&&"EmptySubscript"===a.error.type||!s||"Err"===s.type&&"EmptySuperscript"===s.error.type){var n=o.spanStates(t,r);return i.Err(n,i.MissingBound())}return"Err"===a.type?a:"Err"===s.type?s:{type:"Bounds",sup:s,sub:a}}function S(e){var t,r,i=e,a=o.peek(e),s=O(a.type);if(!o.isAt(e,"("))throw new Error("Programming Error: expected \'(\' at start of parseParen.");if(e=o.advance(e),o.isAt(e,")")){var u=n.Seq(o.emptySpanAtState(e),[]);e=o.advance(e);var c=o.spanStates(i,e);return l(e,n.Paren(c,[u]))}var f;return t=p(e,s),e=t.state,f=t.tree,r=E(i,e,f,"(",")"),e=r.state,f=r.tree,"Err"===f.type?l(e,f):l(e,n.Paren(o.spanStates(i,e),[f]))}function M(e){var t=e,r=o.peek(e);if("Differential"!==r.type)throw new Error("Programming Error: expected differential");e=o.advance(e);var a=n.Cmd(r.span,r.val),s=o.peek(e);if("SupSub"===s.type){e=o.advance(e);var u=o.spanStates(t,e),c=b(s);if(c){if("Err"===c.type)return l(e,c);a=n.Subscript(u,[a,c])}if(s.sup)return l(e,i.Err(u,i.DifferentialWithSuperscript()));if(s.nprimes>0)return l(e,i.Err(u,i.UnexpectedPrime()))}return l(e,a)}function E(e,t,r,n,a){if("Err"===r.type&&"UnexpectedEnd"!==r.error.type)return l(t,r);if("Err"===r.type||!o.isAt(t,a)){var s=o.spanStates(e,t);return l(t,i.Err(s,i.MissingCloseDelimiter(n,a)))}return t=o.advance(t),l(t,r)}function D(e){var t=e;switch(o.peek(e).type){case")":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("(",")")));case"]":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("[","]")));case"\\\\}":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("\\\\{","\\\\}")));case"|)":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedCloseDelimiter("|","|")));case"Differential":e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedDifferential()));default:e=o.advance(e);var r=o.spanStates(t,e);return l(e,i.Err(r,i.UnexpectedParseError()))}}function w(e){return o.isAt(e,")")||o.isAt(e,"]")||o.isAt(e,"\\\\}")}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;var T=[[s.initial("("),s.la(")"),s.initial("\\\\{"),s.la("\\\\}"),s.r("["),s.la("]"),s.initial("(|"),s.la("|)"),s.la("Differential"),s.la("End")],[s.ra("...")],[s.la(",")],[s.ra(":")],[s.la("="),s.la(">"),s.la("<"),s.la(">="),s.la("<="),s.la("~")],[s.la("+"),s.la("-")],[s.la("*"),s.la("/"),s.la("Decimal"),s.la("MixedNumber"),s.la("Letter"),s.la("Cmd"),s.la("%"),s.r("("),s.la("\\\\{"),s.la("(|"),s.la("Frac"),s.la("Sqrt"),s.la("Trig"),s.la("Ln"),s.la("Log"),s.ra("Int"),s.ra("Sum"),s.ra("Prod")],[s.initial("+"),s.initial("-")],[s.la("!")],[s.la("SupSub")],[s.l("["),s.la(".")],[s.l("(")],[s.la("Err")]],P=s.precSpec(T),I=P.leftPrec,C=P.rightPrec,O=P.initialPrec,L={trailingComma:!1};t.parse=u}),define("core/math/inverses",[],function(){"use strict";var e={};return["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"].forEach(function(t){e[t]="arc"+t,e["arc"+t]=t}),e}),define("core/math/parser/lower",["require","exports","core/math/inverses","core/math/errormsg","tslib","./input-span","./surface-node","../maybe-rational"],function(e,t,r,n,i,a,o,s){"use strict";function u(e,t){return l(e,t)}function c(e,t){for(var r=[],n=0;n<t.length;n++)r.push(h(e,t[n]));return r}function l(e,t){return e.setInput(p(e,t),t.span)}function p(e,t){var r=e.nodes;switch(t.type){case"Equals":var i=t.args,a=i[0],s=i[1];if("Call"===a.type){var u=a.args,l=u[0],p=u[1],m=o.unwrapSeq(p);if(o.isIdentifier(l)&&m.every(o.isIdentifier))return r.FunctionDefinition(h(e,l),c(e,m),h(e,s))}else if(o.isIdentifier(a))return r.Assignment(h(e,a),h(e,s));return r.Equation(h(e,a),h(e,s));case"Tilde":var y=c(e,t.args),a=y[0],s=y[1];return r.Regression(a,s);case"Inequality":return S(e,t);case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var g=t.first,v=g.symbol,b=g.args,x=b[0],_=b[1],M=t.chain[0],E=M.symbol,D=M.args[0];return o.isIdentifier(_)?r.DoubleInequality([h(e,x),v,h(e,_),E,h(e,D)]):S(e,t);case"Seq":if(!t.args.every(f))throw n.malformedPoint();return r.List(c(e,t.args));case"Call":var w=t.args,T=w[0],P=w[1];if("Cmd"===T.type)switch(T.val){case"polygon":return r.Polygon(c(e,o.unwrapSeq(P)));case"histogram":return r.Histogram(c(e,o.unwrapSeq(P)));case"cube":case"sphere":case"cone":case"dodecahedron":case"octahedron":case"tetrahedron":return r.Object3D(c(e,o.unwrapSeq(P)),T.val);case"dotplot":return r.DotPlot(c(e,o.unwrapSeq(P)));case"boxplot":return r.BoxPlot(c(e,o.unwrapSeq(P)));case"ttest":return r.TTest(c(e,o.unwrapSeq(P)));case"ittest":return r.IndependentTTest(c(e,o.unwrapSeq(P)));case"stats":return r.Stats(c(e,o.unwrapSeq(P)));default:return d(e,t)}return d(e,t);default:return d(e,t)}}function f(e){if("Paren"!==e.type)return!1;var t=e.args[0];return"Seq"===t.type&&2===t.args.length}function h(e,t){return e.setInput(d(e,t),t.span)}function d(e,t){var r=e.nodes;switch(t.type){case"Pos":return d(e,t.args[0]);case"Neg":for(var i=-1,u=t.args[0];;)if("Pos"===u.type||"Paren"===u.type)u=u.args[0];else{if("Neg"!==u.type)break;u=u.args[0],i*=-1}switch(u.type){case"Decimal":var l=E(u);return r.Constant(-1===i?s.neg(l):l);case"MixedNumber":var l=D(u);return r.MixedNumber(-1===i?s.neg(l):l);default:return-1===i?r.Negative([h(e,u)]):d(e,u)}case"Add":return r.Add(c(e,t.args));case"Sub":return r.Subtract(c(e,t.args));case"Mul":return r.Multiply(c(e,t.args));case"Div":return r.Divide(c(e,t.args));case"Bang":var p=t.args[0];return"Call"===p.type?r.FunctionFactorial(c(e,p.args)):r.FunctionCall("\\\\factorial",c(e,t.args));case"PercentOf":return r.PercentOf(c(e,t.args));case"Call":return b(e,t);case"ImplicitCall":return M(t),b(e,t);case"Dot":var f=t.args[1],m=c(e,t.args),y=m[0],g=m[1];if(I(f)){var v=a.emptySpanAt(f.span.input,f.span.end),P=e.setInput(C(e),v);g=e.setInput(r.SeededFunctionCall(g,[P]),f.span)}return r.DotAccess([y,g]);case"Prime":var L=t.args[0];if("Call"===L.type){var A=L.args,N=A[0],F=A[1],q=o.unwrapSeq(F).length;if("Cmd"===N.type&&"logbase"===N.val){if(2!==q)throw n.primedFunctionArity()}else if(1!==q)throw n.primedFunctionArity();return r.Prime(t.nprimes,c(e,t.args))}throw"ImplicitCall"===L.type?n.primeWithoutParen():n.unexpectedPrime();case"Index":var R=t.args,V=R[0],B=R[1];if("Seq"===B.type)return r.ListAccess([d(e,V),r.List(c(e,B.args))]);if("Ellipsis"===B.type){var k=B.args,j=k[0],z=k[1];return r.ListAccess([d(e,V),r.Range([r.List(c(e,o.unwrapSeq(j))),r.List("EmptyRangeEnd"===z.type?[]:c(e,o.unwrapSeq(z)))])])}return _(B)?r.ListAccess([d(e,V),S(e,B)]):r.ListAccess(c(e,t.args));case"Paren":var G=t.args[0];return"Seq"===G.type?r.OrderedPair(c(e,G.args)):d(e,G);case"List":if(0===t.args.length)return r.List([]);var U=t.args[0];if("Ellipsis"===U.type){var W=U.args,j=W[0],z=W[1];return r.Range([r.List(c(e,o.unwrapSeq(j))),r.List(c(e,o.unwrapSeq(z)))])}return r.List(c(e,o.unwrapSeq(U)));case"Pipes":return r.FunctionCall("\\\\abs",c(e,t.args));case"Subscript":var Y=t.args,X=Y[0],H=Y[1];if(0===H.val.length)throw n.emptySubscript();var Q=void 0;switch(X.type){case"Letter":case"Cmd":Q=X.val;break;default:throw n.unexpectedSubscript()}return r.Identifier(Q+"_"+H.val);case"Superscript":var Z=t.args,X=Z[0],J=Z[1];return"Call"!==X.type||"Seq"===X.args[1].type||w(X)?"Dot"===X.type?r.DotAccessExponent(c(e,[X.args[0],X.args[1],J])):r.Exponent(c(e,t.args)):r.FunctionExponent(c(e,[X.args[0],X.args[1],J]));case"Sqrt":return r.FunctionCall("sqrt",c(e,t.args));case"Nthroot":return r.FunctionCall("nthroot",c(e,[t.args[1],t.args[0]]));case"Frac":return r.Divide(c(e,t.args));case"Derivative":var K=c(e,t.args);if(!o.isIdentifier(t.args[0]))throw n.parseError();return r.Derivative(K[0],[K[1]]);case"Integral":var $=t.args,ee=$[0],te=$[1],re=$[2],ne=$[3],K=c(e,[ee,te,re,ne]);return r.Integral(K);case"EmptyIntegral":var ie=c(e,t.args),ee=ie[0],ae=ie[1],re=ie[2],ne=r.Constant(s.maybeRational(1,1));return r.Integral([ee,ae,re,ne]);case"Sum":var oe=t.args,se=oe[0],ue=oe[1],re=oe[2];if("Equals"!=ue.type)throw n.incorrectSumLowerBound();if(!o.isIdentifier(ue.args[0]))throw n.incorrectSumLowerBound();var K=c(e,[ue.args[0],ue.args[1],re]),ce=h(O(e,K[0]),se);return r.Sum(K.concat(ce));case"Product":var le=t.args,se=le[0],pe=le[1],re=le[2];if("Equals"!=pe.type)throw n.incorrectProductLowerBound();if(!o.isIdentifier(pe.args[0]))throw n.incorrectProductLowerBound();var K=c(e,[pe.args[0],pe.args[1],re]),ce=h(O(e,K[0]),se);return r.Product(K.concat(ce));case"Juxt":return r.Multiply(c(e,t.args));case"Letter":return r.Identifier(t.val);case"Cmd":var fe=t.val;if("ans"===fe){if(void 0===e.currentIndex)throw n.badAnsContext();return r.Ans("ans_{"+(e.currentIndex-1)+"}")}if("approx"===fe)throw n.unrecognizedSymbol(fe);return r.Identifier(fe);case"Decimal":return r.Constant(E(t));case"MixedNumber":return r.MixedNumber(D(t));case"Piecewise":return x(e,t);case"EmptyPiecewise":if(!r.Piecewise.empty)throw n.featureUnavailable();return r.Piecewise.empty();case"Equals":throw n.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw n.unexpectedInequality();case"Tilde":throw n.unexpectedSymbol("~");case"Seq":throw n.unexpectedSymbol(",");case"Colon":throw n.unexpectedSymbol(":");case"Ellipsis":throw n.unexpectedSymbol("...");case"EmptyRangeEnd":throw n.invalidHalfEmptyRange();case"Err":throw T(t.error);default:throw"Unexpected surface node "+t.type+"."}}function m(e){return r.hasOwnProperty(e)}function y(e){return"ln"===e||"log"===e||"logbase"===e}function g(e){return"Decimal"===e.type&&"2"===e.val}function v(e){return"Neg"===e.type&&(e=e.args[0],"Decimal"===e.type&&"1"===e.val)}function b(e,t){var i=e.nodes,s=t.args,u=s[0],l=s[1],p=h(e,u),f=o.unwrapSeq(l),d=c(e,f);if(I(u)){var b=a.emptySpanAt(l.span.input,l.span.start),x=e.setInput(C(e),b);return i.SeededFunctionCall(p,[x].concat(d))}if(o.isIdentifier(u))return i.FunctionCall(p,d);if("Superscript"===u.type){var _=u.args,S=_[0],M=_[1];if("Cmd"===S.type){var E=S.val;if(m(E)||y(E)){if(g(M))return i.Exponent([i.FunctionCall(E,d),h(e,M)]);if(v(M)&&void 0!==r[E])return i.FunctionCall(r[E],d);throw m(E)?n.badTrigExponent(E):n.badLogExponent("logbase"===E?"log":E)}}}return i.Multiply([p,h(e,l)])}function x(e,t){var r,i=e.nodes,a=t.args[0],u=o.unwrapSeq(a),c=[];e:for(r=0;r<u.length;r++){var l=u[r];switch(l.type){case"Colon":var p=l.args,f=p[0],d=p[1];if(!_(f))throw n.colonMissingCondition();c.push({condition:S(e,f),if_expr:h(e,d)});break;case"Equals":case"Inequality":case"InequalityChain":c.push({condition:S(e,l),if_expr:i.Constant(s.maybeRational(1,1))});break;default:break e}}if(0===r)throw n.piecewiseMissingCondition();if(r<u.length-1)throw n.piecewisePartMissingCondition();if(r===u.length-1&&c.push({condition:i.Constant(!0),if_expr:h(e,u[r])}),!i.Piecewise.chain)throw n.featureUnavailable();return i.Piecewise.chain(c)}function _(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function S(e,t){var r=e.nodes;switch(t.type){case"Equals":return r.Comparator["="](c(e,t.args));case"Inequality":return r.Comparator[t.symbol](c(e,t.args));case"InequalityChain":if(t.chain.length>1)throw n.inequalityChainTooLong();var i=t.first,s=i.symbol,u=i.args,l=u[0],p=u[1],f=t.chain[0],h=f.symbol,d=f.args[0],m=a.emptySpanAt(t.span.input,t.span.start);return r.And([S(e,o.Inequality(m,s,[l,p])),S(e,o.Inequality(m,h,[p,d]))]);default:throw n.parseError()}}function M(e){var t=e.args,r=t[0],i=t[1];if("Superscript"===r.type&&(r=r.args[0]),"Cmd"===r.type&&"logbase"===r.val&&"Seq"===i.type&&2===i.args.length){if(!P(i.args[0]))throw n.badImplicitCall("log")}else if(!P(i)){if("Cmd"===r.type)throw n.badImplicitCall(r.val);throw n.parseError()}}function E(e){return s.fromDecimalString(e.val)}function D(e){var t=s.fromDecimalString(e.whole),r=s.fromDecimalString(e.num),n=s.fromDecimalString(e.den);return s.add(t,s.div(r,n))}function w(e){if("Call"!==e.type)return!1;for(var t=e.args[0];"Superscript"===t.type||"Subscript"===t.type||"Prime"===t.type;)t=t.args[0];return"Cmd"===t.type&&(m(t.val)||y(t.val))}function T(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return n.parseError();case"InvalidOperatorName":return n.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return n.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?n.unexpectedSymbol(e.val):n.unrecognizedSymbol(e.val);case"EmptyInput":return n.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return n.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return n.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return n.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return n.cannotSubscript(e.base);case"PercentMissingOf":return n.percentMissingOf();case"SumMissingBound":return n.sumMissingBound();case"ProductMissingBound":return n.productMissingBound();case"IntegralMissingBound":return n.integralMissingBound();case"SumMissingBody":return n.sumMissingBody();case"ProductMissingBody":return n.productMissingBody();case"IntegralMissingBody":return n.integralMissingBody();case"DerivativeMissingBody":return n.derivativeMissingBody();case"IntegralMissingDifferential":return n.integralMissingDifferential();case"DifferentialWithSuperscript":return n.differentialWithSuperscript();case"FractionMissingNumerator":return n.fractionMissingNumerator();case"FractionMissingDenominator":return n.fractionMissingDenominator();case"FractionEmpty":return n.fractionEmpty();case"EmptySuperscript":return n.emptySuperscript();case"EmptySubscript":return n.emptySubscript();case"InvalidSubscript":return n.invalidSubscript(e.val);case"SuperscriptWithPrime":return n.superscriptWithPrime();case"PrimeWithoutParen":return n.primeWithoutParen();case"UnexpectedPrime":return n.unexpectedPrime();case"EmptyRadical":return n.emptyRadical();case"EmptyRadicalIndex":return n.emptyRadicalIndex();case"EmptySquareBracket":return n.emptySquareBracket();case"EmptyPipe":return n.emptyPipe();case"FunctionMissingArgument":return n.wrongArity(e.val,1,0);case"AdjacentNumbers":var t=e.args[0].val,r=void 0;switch(e.args[1].type){case"Decimal":r=e.args[1].val;break;case"MixedNumber":r=e.args[1].whole+" "+e.args[1].num+"/"+e.args[1].den;break;default:throw"Unexpected type "+e.args[1].type+" as right member of AdjacentNumbers."}return n.adjacentNumbers(t,r);default:throw"Unexpected surface node "+e.type+"."}}function P(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var t=e.args[0];;)if("Pos"===t.type||"Paren"===t.type)t=t.args[0];else{if("Neg"!==t.type)break;t=t.args[0]}return"Decimal"===t.type||"MixedNumber"===t.type;case"Pos":case"Paren":return P(e.args[0]);case"Juxt":case"Mul":case"Div":return P(e.args[0])&&P(e.args[1]);case"Subscript":return P(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return P(e.args[0])&&P(e.args[1]);case"Piecewise":var t=e.args[0];return"Equals"===t.type||"Inequality"===t.type||"InequalityChain"===t.type;case"Call":var r=e.args,n=r[0],i=r[1];return!o.isIdentifier(n)&&!o.isSuperscriptedIdentifier(n)&&(P(n)&&P(i));case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"Dot":case"PercentOf":case"Prime":case"EmptyRangeEnd":return!1;default:throw"Unexpected surface node "+e.type+"."}}function I(e){return"Cmd"===e.type&&("random"===e.val||"shuffle"===e.val)}function C(e){var t=e.nodes.ExtendSeed("",[e.nodes.Identifier("globalRandomSeed"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return t;for(var r=0,n=e.seedExtensions;r<n.length;r++){var i=n[r];t=e.nodes.ExtendSeed("ro",[t,i])}return t}function O(e,t){var r=e.seedExtensions||[];return i.__assign(i.__assign({},e),{seedExtensions:r.concat(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.lower=void 0,t.lower=u}),define("core/math/baseparser",["require","exports","core/math/errormsg","parsenodes","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/parser/lower"],function(e,t,r,n,i,a,o){"use strict";function s(){throw r.featureUnavailable()}function u(e,t){return e.setInputSpan(t),e}function c(e,t){var c=typeof e;if("string"!==c)throw new Error("Type Error: parse can only be called with strings, got "+JSON.stringify(e)+" of type "+c);t=t||{};var l=n;if(t.disabledFeatures){l=Object.create(l);for(var p=0,f=t.disabledFeatures;p<f.length;p++){var h=f[p];if(!l[h])throw new Error("Programming Error: "+h+" cannot be disabled because it is not a parsenode.");l[h]=s}}var d=void 0===t.seedPrefix?"":t.seedPrefix,m=0,y=function(){var e=d+"::vc"+m;return m+=1,e},g={nodes:l,currentIndex:t.index,setInput:u,nextSeed:y},v={};void 0!==t.trailingComma&&(v.trailingComma=t.trailingComma);try{var b=i.parse(e),x=a.parse(b,v);return o.lower(g,x)}catch(e){return e instanceof n.Error?e:"string"==typeof e?n.Error(e):r.parseError()}}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0,t.parse=c}),define("core/math/rational-arithmetic-sequence",["require","core/math/distance","core/math/builtin"],function(e){"use strict";function t(e,t){var i=n.toFraction(e),a=n.toFraction(t);if(r.approx(i.n/i.d,e)&&r.approx(a.n/a.d,t)){var o=n.lcm(i.d,a.d),s=i.n*(o/i.d);return{nstart:s,nstep:a.n*(o/a.d)-s,lcm:o}}}var r=e("core/math/distance"),n=e("core/math/builtin");return t}),define("core/math/sliders",["require","exports"],function(e,t){"use strict";function r(e,t){var r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<t?r:e}function n(e){var t=!0,r=!0,n=!0;if(void 0!==e.hardMin&&e.target<e.hardMin&&(t=!1),void 0!==e.hardMax&&e.target>e.hardMax&&(r=!1),e.step){i({target:e.target,step:e.step,hardMin:t?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(n=!1)}return{min:t,max:r,step:n}}function i(e){var t=e.target,n=e.hardMin,i=e.hardMax,a=e.step,o=1e-10;if(void 0!==n&&void 0!==i&&(o=Math.min(o,Math.abs(i-n)/1e3)),a&&(o=Math.min(o,a/10)),void 0!==n&&(n=r(n,o)),void 0!==i&&(i=r(i,o)),e.forceSliderToMax&&void 0!==i&&(t=i),n>i)return n;if(t<=n)return n;if(t>=i)return i;if(a){var s=void 0!==n?n:0;t=a*Math.round((t-s)/a)+s}var u=r(t,o);return a?t=u:n===u?t=u:i===u&&(t=u),t<=n?n:t>=i?i:t}function a(e){var t=e.storedMax,r=e.sliderValue,n=e.hardMin,a=e.step,o=10;if(t>o&&(o=t),r>o&&(o=r),n>o&&(o=n),a){var s=i({target:o,hardMin:n,hardMax:void 0,step:a});o=s>=o?s:s+a}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.computeSoftMax=t.constrainSliderValueLikeEvaluator=t.determineWhichLimitsAreCompatibleWithValue=t.roundToReasonableDecimal=void 0,t.roundToReasonableDecimal=r,t.determineWhichLimitsAreCompatibleWithValue=n,t.constrainSliderValueLikeEvaluator=i,t.computeSoftMax=a}),define("core/math/features/getConcreteTree",["require","parsenodes","core/math/errormsg","core/math/types","core/lib/label","core/math/builtin","core/math/distance","core/math/maybe-rational","core/math/rational-arithmetic-sequence","core/math/sliders"],function(e){"use strict";function t(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(e[i].getConcreteTree(t,r));return n}function r(){\nreturn this.getDependencies().concat([this._symbol])}function n(e){return e===m.Distribution||m.isList(e)}function i(e,t,r,i){var a=i.length-1,o=e[t];if(!o)throw d.unexpectedSymbol(".");if(o.isError)throw o;if(!o.isFunction)throw d.unexpectedSymbol(".");if(!o.allowDotCalls)throw d.illegalDotCall(r);var s,u="random"===t,c="random"===t||"shuffle"===t;if(s=c?i[1].valueType:i[0].valueType,!n(s))throw d.dotLHSTypeError("."+r,m.prettyPrint(s));var l=c?1:0;if(a<o.dotMinArity){if(u)throw d.randomArity();throw d.wrongArity("."+r,o.dotMinArity-l,a-l,o.dotMinArityUsageExample)}if(a>o.dotMaxArity){if(u)throw d.randomArity();throw d.wrongArity("."+r,o.dotMaxArity-l,a-l,o.dotMaxArityUsageExample)}}function a(e,r,n,a,o){var s=t(n,a,o);return i(o,e,r,s),o[e].getConcreteInvocationTree(a,o,s,r)}function o(e,t){return e.isError?e:-1===t.indexOf(e.valueType)?d.parseError():e}function s(e,t,r){if(!t)return void(r.valids[e]=!0);var n=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(n.length>0){r.errors[e]=!0;for(var i=0;i<n.length;i++)n[i]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(n[i])}else r.values[e]=+t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}function u(e){return e&&e.valueType===m.ListOfNumber&&1===e.length&&e.args?e.args[0]:e}function c(e,t,r,n,i,a){if(n<t.length&&!v.approx(a,t.elementAt(e,n).asValue(),10))throw d.nonArithmeticRange();if(i-n<=r.length&&i-n>1&&!v.approx(a,r.elementAt(e,r.length-i+n).asValue(),10))throw d.nonArithmeticRange()}function l(e,t){for(var r=!1,n=!1,i=!1,a=0;a<e.length;a++){var o=e[a];(o.isList||o.isBroadcast)&&(n=!0,0===o.length&&(i=!0));for(var s=o.getDependencies(),u=0;u<s.length;u++)if(-1!==t.indexOf(s[u])){if(o.isList||o.isBroadcast)return"list"}else r=!0}return n?i?"empty":r?"broadcast":"list":"none"}function p(e){var t,r=[],n=[],i=[];for(t=0;t<e.length;t++){var a,o=e[t];if(o.isList){for(var s=!1,u=0;u<i.length;u++)if(o===i[u]){s=!0,a=h.DummyIndex(n[u]),a.valueType=m.elementType(o.valueType),r.push(a);break}if(!s){var c=h.Base.prototype.tmpVar();n.push(c),i.push(o),a=h.DummyIndex(c),a.valueType=m.elementType(o.valueType),r.push(a)}}else o.isBroadcast?(Array.prototype.push.apply(n,o._replacedSymbols),Array.prototype.push.apply(i,o._lists),r.push(o._expression)):r.push(o)}return{replacedArgs:i,concreteArgs:r,replacedSymbols:n}}function f(e,t){if(!t[this._symbol])throw d.functionUnsupported(this._symbol);var r=this.args.map(function(r){return r.getConcreteTree(e,t)});if(r.length>0){if(1===r.length&&r.push(h.Constant(1)),r[1].getDependencies().length)throw d.illegalBinWidth(this._symbol).setDependencies(r[1].getDependencies());if(r[1].valueType!==m.Number)throw d.illegalBinWidth(this._symbol);var n=r[1].asValue();if(!isFinite(n)||n<=0)throw d.illegalBinWidth(this._symbol)}return this.typeCheck(e,r),new this.constructor(r)}var h=e("parsenodes"),d=e("core/math/errormsg"),m=e("core/math/types"),y=e("core/lib/label"),g=e("core/math/builtin"),v=e("core/math/distance"),b=e("core/math/maybe-rational"),x=b.maybeRational,_=e("core/math/rational-arithmetic-sequence"),S=h.List,M=h.Range,E=h.OrderedPair,D=h.ScalarExpression,w=h.Constant,T=h.ExtendSeed,P=h.Multiply,I=h.Identifier,C=h.DummyIndex,O=h.BuiltInFunction,L=e("core/math/sliders");h.Base.prototype.tryGetConcreteTree=function(){var e;try{e=this.getConcreteTree.apply(this,arguments)}catch(t){e=t instanceof h.Base?t:d.parseError()}return e},h.Base.prototype.getConcreteTree=function(e,t,r){if(this.isConcreteTreeCacheValid(t))return this.__cachedConcreteTree.value;for(var n=this._getConcreteTree(e,t,r),i={},a=this.getCacheKeys().slice();;){if(!a.length)break;var o=a.pop();if(!i.hasOwnProperty(o)){var s=t[o];i[o]=s,s&&Array.prototype.push.apply(a,s.getCacheKeys())}}return this.__cachedConcreteTree={keys:i,value:n},n},h.Base.prototype.getCacheKeys=function(){return this.getDependencies()},h.Histogram.prototype.getCacheKeys=r,h.Object3D.prototype.getCacheKeys=r,h.DotPlot.prototype.getCacheKeys=r,h.BoxPlot.prototype.getCacheKeys=r,h.TTest.prototype.getCacheKeys=r,h.IndependentTTest.prototype.getCacheKeys=r,h.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},h.PercentOf.prototype._getConcreteTree=function(e,t){return h.Divide([h.Multiply(this.args),h.Constant(x(100,1))]).getConcreteTree(e,t)},h.Assignment.prototype._getConcreteTree=function(e,t){return this._expression.getConcreteTree(e,t)},h.Identifier.prototype._getConcreteTree=function(e,t){var r=y.latexToIdentifier(this.getInputString()),n=t[this._symbol];if(n){if(n.isError)throw n;if(n.isFunction)throw d.identifierAsFunction(r);return n.getConcreteTree(e,t)}if(O.hasOwnProperty(this._symbol))throw d.functionUnsupported(r);return h.FreeVariable(this._symbol)},h.Ans.prototype._getConcreteTree=function(e,t){if(void 0===t[this._symbol])throw d.ansUndefined();return I.prototype._getConcreteTree.call(this,e,t)},h.Equation.prototype._getConcreteTree=function(e,t){return this.asComparator().getConcreteTree(e,t)},h.Constant.prototype._getConcreteTree=function(e,t){return new this.constructor(this._constantValue)},h.Seed.prototype._getConcreteTree=function(e,t){return new this.constructor(this._stringValue)},h.Derivative.prototype._getConcreteTree=function(e,t){var r;if(t[this._symbol]){var n=Object.create(t);n[this._symbol]=h.FreeVariable(this._symbol);var i=t[this._symbol].getConcreteTree(e,t);if(i.valueType!==m.Number&&i.valueType!==m.ListOfNumber)throw d.derivativeVariableTypeError(this._symbol,[m.prettyPrint(i.valueType)]);var a={};return a[this._symbol]=i,r=this.args[0].getConcreteTree(e,n),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).substitute(a).getConcreteTree(e,t)}return r=this.args[0].getConcreteTree(e,t),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).getConcreteTree(e,t)},h.DoubleInequality.prototype._getConcreteTree=function(e,t){return new this.constructor([h.Piecewise([this._indicator,this._expressions[0],w(NaN)]).getConcreteTree(e,t),this._operators[0],I(this._symbol),this._operators[1],h.Piecewise([this._indicator,this._expressions[1],w(NaN)]).getConcreteTree(e,t)])},h.Expression.prototype._getConcreteTree=function(e,r){var n=t(this.args,e,r);return this.typeCheck(e,n),this._constantCollapsedCopy(e,n)},h.Error.prototype._getConcreteTree=function(e,t){return this},h.FreeVariable.prototype._getConcreteTree=function(e,t){return this},h.FunctionCall.prototype._getConcreteTree=function(e,r){var n="logbase"===this._symbol?"log":y.latexToIdentifier(this._identifier.getInputString()),i=r[this._symbol];if(i&&i.isError)throw i;if(!i||!i.isFunction){if(O.hasOwnProperty(this._symbol))throw"logbase"===this._symbol&&r.ln&&r.log?d.logbaseUnsupported():d.functionUnsupported(n);if(i&&i.getConcreteTree(e,r).valueType===m.Distribution)throw d.distributionAsFunction(i._symbol);if(1==this.args.length){var a=[I(this._symbol),this.args[0]];return P(a).getConcreteTree(e,r)}if(i)throw d.variableAsFunction(n);throw d.functionNotDefined(n)}var o=t(this.args,e,r);return i.getConcreteInvocationTree(e,r,o,n)},h.DotAccess.prototype._getConcreteTree=function(e,t){var r,n,i=this.args[0],o=this.args[1];if(o instanceof h.Identifier)return"x"===o._symbol?h.OrderedPairAccess([i,h.Constant(1)]).getConcreteTree(e,t):"y"===o._symbol?h.OrderedPairAccess([i,h.Constant(2)]).getConcreteTree(e,t):(n=y.latexToIdentifier(o.getInputString()),r=[i],a(o._symbol,n,r,e,t));if(o instanceof h.SeededFunctionCall)return n=y.latexToIdentifier(o._identifier.getInputString()),r=[o.seed,i].concat(o.args.slice(1)),a(o._symbol,n,r,e,t);if(o instanceof h.FunctionCall)return"x"===o._symbol&&1===o.args.length?h.Multiply([h.OrderedPairAccess([i,h.Constant(1)]),o.args[0]]).getConcreteTree(e,t):"y"===o._symbol&&1===o.args.length?h.Multiply([h.OrderedPairAccess([i,h.Constant(2)]),o.args[0]]).getConcreteTree(e,t):(n=y.latexToIdentifier(o._identifier.getInputString()),r=[i].concat(o.args),a(o._symbol,n,r,e,t));throw d.unexpectedSymbol(".")},h.DotAccessExponent.prototype._getConcreteTree=function(e,t){return"FunctionCall"!==this.args[1].type||1!==this.args[1].args.length||t[this.args[1]._symbol]&&t[this.args[1]._symbol].isFunction?h.Exponent([h.DotAccess([this.args[0],this.args[1]]),this.args[2]]).getConcreteTree(e,t):h.Multiply([h.DotAccess([this.args[0],h.Identifier(this.args[1]._symbol)]),h.Exponent([this.args[1].args[0],this.args[2]])]).getConcreteTree(e,t)},h.FunctionExponent.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?h.Exponent([h.FunctionCall(r,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):P([this.args[0],h.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},h.FunctionFactorial.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?h.FunctionCall("\\\\factorial",[h.FunctionCall(r,[this.args[1]])]).getConcreteTree(e,t):P([this.args[0],h.FunctionCall("\\\\factorial",[this.args[1]])]).getConcreteTree(e,t)},h.FunctionDefinition.prototype._getConcreteTree=function(e,t){for(var r=0;r<this._argSymbols.length;r++){if(t[this._argSymbols[r]])throw d.parameterAlreadyDefined(this._argSymbols[r]);if(this._argSymbols[r]===this._symbol)throw d.parameterAlreadyDefined(this._argSymbols[r])}return this._expression.getConcreteTree(e,t)},h.Image.prototype._getConcreteTree=function(e,t){var r=this.center.tryGetConcreteTree(e,t),n=this.radianAngle.tryGetConcreteTree(e,t),i=this.width.tryGetConcreteTree(e,t),a=this.height.tryGetConcreteTree(e,t),s=this.opacity.tryGetConcreteTree(e,t),u=[m.Point,m.ListOfPoint],c=[m.Number,m.ListOfNumber];return r=o(r,u),n=o(n,c),i=o(i,c),a=o(a,c),s=o(s,c),h.Image({center:r,radianAngle:n,width:i,height:a,opacity:s},this.moveStrategy)},h.Slider.prototype._getConcreteTree=function(e,t){var r=this._expression.getConcreteTree(e,t),n=u(this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t)),i=u(this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t)),a=u(this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t)),o={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};if(s("min",n,o),s("max",i,o),s("step",a,o),a&&o.valids.step&&(0===o.values.step?delete o.values.step:o.values.step=Math.abs(o.values.step)),o.errors.cycle?r=d.sliderLimitReferencesExport(o.exportedSymbol):(o.errors.min||!o.valids.min?o.errMsg=d.sliderMinInvalid():o.errors.max||!o.valids.max?o.errMsg=d.sliderMaxInvalid():!o.errors.step&&o.valids.step||(o.errMsg=d.sliderStepInvalid()),o.values.min>o.values.max&&(o.valids.min=!1,o.valids.max=!1,o.errMsg||(o.errMsg=d.sliderMaxLessThanMin()))),r.isConstant){var c=t.initialEvaluation&&t.initialEvaluation.asValue(),l=c&&this.sliderIsPlayingOnce,p=o.values.max,f=r.asValue(),h=o.values.min,m=o.values.step;if(l&&!isFinite(p)){var y=u(this.sliderSoftMax&&this.sliderSoftMax.tryGetConcreteTree(e,t));y&&(p=L.computeSoftMax({storedMax:y.asValue(),sliderValue:f,step:m,hardMin:h}))}var g=L.constrainSliderValueLikeEvaluator({target:f,hardMin:h,hardMax:p,step:m,forceSliderToMax:l}),v=b.fromDecimalString(g.toString()),x=isFinite(b.asFloat(v))?v:g;r=w(x)}return r.sliderInfo=o,r},h.Integral.prototype._getConcreteTree=function(e,t){if(t[this._differential._symbol])throw d.shadowedIntegrationVariable(this._differential._symbol);var r=this.args[0],n=this.args[1].getConcreteTree(e,t),i=this.args[2].getConcreteTree(e,t);if(n.dependsOn(r._symbol)||i.dependsOn(r._symbol))throw d.badIntegralBoundDependency(r._symbol);var a=Object.create(t);return a[this._differential._symbol]=C(this._differential._symbol),D.prototype._getConcreteTree.call(this,e,a)},h.ListAccess.prototype._getConcreteTree=function(e,t){var r,n=this.list.getConcreteTree(e,t);if(this.index instanceof M&&this.index.isHalfEmpty()){if(r=M([this.index.beginning,S([w(x(n.length,1))])]).getConcreteTree(e,t),Math.round(+r.args[0].asValue())>n.length)return S([])}else r=this.index.getConcreteTree(e,t);var i=[n,r];this.typeCheck(e,i);var a=r.getDependencies();if(a.length){if(r.isList)throw d.variableListIndicies(a);if(r.valueType===m.ListOfBool)throw d.variableFilter(a)}if(r.isList){var o=[],s=0;if(r.valueType===m.ListOfNumber){for(;s<r.length;s++){var u=r.args[s];o.push(n.elementAt(e,u.asValue()-1))}return S(o)}if(r.valueType===m.ListOfBool){for(;s<r.length;s++){r.args[s]._constantValue&&o.push(n.elementAt(e,s))}return S(o)}}return this._constantCollapsedCopy(e,i)},h.List.prototype._getConcreteTree=function(e,r){var n=t(this.args,e,r);return this.typeCheck(e,n),new this.constructor(n)},h.ParametrizedReducerFunction.prototype._getConcreteTree=function(e,r){if(this.args[0]instanceof h.List&&this.args[0].valueType===m.ListOfDistribution)return h.List(h.List.mapArgs(e,[this.args[0]],function(t){return this.copyWithArgs([t[0],this.args[1]]).getConcreteTree(e,r)}.bind(this)));if(this.args[0]instanceof h.Distribution)return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(e,r);var n=t(this.args,e,r);switch(l([n[1]],this.getDummyDependencies())){case"none":return this.typeCheck(e,n),this._constantCollapsedCopy(e,n);case"empty":return h.List([]);case"list":return h.List(h.List.mapArgs(e,[n[1]],function(t){return t=[n[0]].concat(t),this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var i=p([n[1]]),a=[n[0]].concat(i.concreteArgs);return this.typeCheck(e,a),h.Broadcast(i.replacedSymbols,[this.copyWithArgs(a)].concat(i.replacedArgs))}},h.Prime.prototype._getConcreteTree=function(e,t){var r=this.args[0],n=r.args[0];if(!t[r._symbol])throw d.functionNotDefined(r._symbol);var i,a=this.tmpVar();if("logbase"===r._symbol){if(2!==r.args.length)throw d.primedFunctionArity();i=[I(a),r.args[1]]}else{if(1!==r.args.length)throw d.primedFunctionArity();i=[I(a)]}for(var o=r.copyWithArgs(i).getConcreteTree(e,t),s=0;s<this.order;s++)o=o.takeDerivative(a);var u={};return u[a]=n,o.substitute(u).getConcreteTree(e,t)},h.Range.prototype._getConcreteTree=function(e,t){var r=this.beginning.getConcreteTree(e,t),n=this.end.getConcreteTree(e,t);if(r.getDependencies().length)throw d.variableRange(r.getDependencies());if(n.getDependencies().length)throw d.variableRange(n.getDependencies());if(!r.isList||!n.isList)throw new Error("Programming Error: range bounds must be List nodes.");var i,a,o=r.elementAt(e,0).asValue(),s=n.elementAt(e,n.length-1).asValue(),u=s-o;if(1===r.length)i=u>=0?1:-1;else{var l=r.elementAt(e,1).asValue();a=_(o,l),i=r.elementAt(e,1).asValue()-o}var p=Math.round(u/i)+1;if(!isFinite(p)||p<r.length||p<n.length)throw d.nonArithmeticRange();var f,h,m=[];if(a){var y=a.nstart;for(f=0;f<p;f++)c(e,r,n,f,p,y/a.lcm),m.push(w(x(y,a.lcm))),y+=a.nstep}else for(m.push(w(o)),f=1;f<p;f++)h=o+f*i,c(e,r,n,f,p,h),m.push(w(x(h,1)));return S(m)},h.ReducerFunction.prototype._getConcreteTree=function(e,r){if(this.args[0]instanceof h.List&&this.args[0].valueType===m.ListOfDistribution&&"length"!==this._symbol)return h.List(h.List.mapArgs(e,this.args,function(t){return this.copyWithArgs(t).getConcreteTree(e,r)}.bind(this)));if(this.args[0]instanceof h.Distribution&&"length"!==this._symbol)return this.args[0][this._symbol]().getConcreteTree(e,r);var n=t(this.args,e,r);if(1===this.args.length)return n=[h.List.wrap(n[0])],this.typeCheck(e,n),this._constantCollapsedCopy(e,n);switch(l(n,this.getDummyDependencies())){case"none":return n=[h.List(n)],this.typeCheck(e,n),this._constantCollapsedCopy(e,n);case"empty":return h.List([]);case"list":return h.List(h.List.mapArgs(e,n,function(t){return t=[h.List(t)],this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var i=p(n);return n=[h.List(i.concreteArgs)],this.typeCheck(e,n),h.Broadcast(i.replacedSymbols,[this.copyWithArgs(n)].concat(i.replacedArgs))}},h.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t[this._index._symbol])throw d.shadowedIndex(this._index._symbol);var r=this.args[1].getConcreteTree(e,t),n=this.args[2].getConcreteTree(e,t);if(r.dependsOn(this._index._symbol)||n.dependsOn(this._index._symbol))throw this instanceof h.Sum?d.badSumBoundDependency(this._index._symbol):this instanceof h.Product?d.badProductBoundDependency(this._index._symbol):d.parseError();var i=Object.create(t);return i[this._index._symbol]=C(this._index._symbol),D.prototype._getConcreteTree.call(this,e,i)};var A=function(e,r){var n=t(this.args,e,r);switch(l(n,this.getDummyDependencies())){case"none":return this.typeCheck(e,n),this._constantCollapsedCopy(e,n);case"empty":return h.List([]);case"list":return h.List(h.List.mapArgs(e,n,function(t){return this.typeCheck(e,t),this._constantCollapsedCopy(e,t)}.bind(this)));case"broadcast":var i=p(n);return this.typeCheck(e,i.concreteArgs),h.Broadcast(i.replacedSymbols,[this.copyWithArgs(i.concreteArgs)].concat(i.replacedArgs))}};h.ScalarExpression.prototype._getConcreteTree=A,h.Object3D.prototype._getConcreteTree=A,h.Regression.prototype._getConcreteTree=function(e,t){return new this.constructor(this._lhs,this._rhs)},h.Polygon.prototype._getConcreteTree=function(e,t){var r=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,r),1===r.length&&r[0].valueType===m.ListOfPoint?new this.constructor(r):r.every(function(e){return e.valueType===m.Point})?new this.constructor([S(r)]):2===r.length?new this.constructor([E(this.args).getConcreteTree(e,t)]):d.parseError()},h.Histogram.prototype._getConcreteTree=f,h.DotPlot.prototype._getConcreteTree=f,h.BoxPlot.prototype._getConcreteTree=function(e,t){if(!t[this._symbol])throw d.functionUnsupported(this._symbol);var r=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,r),1!==r.length||r[0].valueType!==m.ListOfNumber&&r[0].valueType!==m.EmptyList?d.parseError():new this.constructor(r)},h.TTest.prototype._getConcreteTree=function(e,t){if(!t[this._symbol])throw d.functionUnsupported(this._symbol);var r=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,r),new this.constructor(r)},h.IndependentTTest.prototype._getConcreteTree=function(e,t){if(!t[this._symbol])throw d.functionUnsupported(this._symbol);var r=this.args.map(function(r){return r.getConcreteTree(e,t)});return this.typeCheck(e,r),new this.constructor(r)},h.SolvedEquation.prototype._getConcreteTree=function(e,t){return new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},h.Table.prototype._getConcreteTree=function(e,t){for(var r=[],n=Object.create(t),i=0;i<this.columns.length;i++){var a=this.columns[i].getConcreteTree(e,n,t);a.isIndependent&&this.columns[i].exportToLocal(a,n),r.push(a)}return new this.constructor(r)},h.TableColumn.prototype._getConcreteTree=function(e,t,r){var n,i,a=this.header.getConcreteTree(e,t);if(a.isFreeVariable){n=[];for(var o=0;o<this.values.length;o++)if(this.values[o].tableError())n.push(d.invalidTableEntry(this.values[o].tableError()));else{var s=this.values[o].tryGetConcreteTree(e,t);s.isError?n.push(s):s.tableError()?n.push(d.invalidTableEntry(s.tableError())):s.valueType===m.Number?n.push(s):n.push(d.tableEntryTypeError([m.prettyPrint(s.valueType)]))}return i=new this.constructor(a,this.length,n),i.isIndependent=!0,i}if(a.isConstant){for(var u=[],c=0;c<this.length;c++)u.push(a);n=u}else n=a.isList?a.args.slice():[];return a=this.header.getConcreteTree(e,r),a.isError||a.valueType===m.Number||a.valueType===m.ListOfNumber||a.valueType===m.EmptyList||(a=d.tableHeaderTypeError([m.prettyPrint(a.valueType)])),i=new this.constructor(a,this.length,n)},h.BuiltInFunction.pdf.prototype._getConcreteTree=function(e,t){if(this.args[0]instanceof S)return h.List(h.List.mapArgs(e,this.args,function(r){return this.copyWithArgs(r).getConcreteTree(e,t)}.bind(this)));if(this.typeCheck(e,this.args),!(this.args[0]instanceof h.Distribution))throw d.functionTypeError(this._symbol,[m.prettyPrint(this.args[0].valueType)]);return this.args[0].pdf([this.args[1]]).getConcreteTree(e,t)},h.BuiltInFunction.cdf.prototype._getConcreteTree=function(e,t){var r=this.args;if(2===r.length&&(r=[r[0],h.Constant(-1/0),r[1]]),r[0]instanceof h.List)return h.List(h.List.mapArgs(e,r,function(r){return this.copyWithArgs(r).getConcreteTree(e,t)}.bind(this)));if(this.typeCheck(e,r),!(r[0]instanceof h.Distribution))throw d.functionTypeError(this._symbol,[m.prettyPrint(r[0].valueType)]);return r[0].cdf(r.slice(1)).getConcreteTree(e,t)},h.BuiltInFunction.random.prototype._getConcreteTree=function(e,t){var r=this.args;(r.length<=1||!(r[1]instanceof h.Distribution)&&!(r[1]instanceof h.List)&&r.length<4)&&(r=[r[0],O.uniformdist([])].concat(r.slice(1)));var n=r[0],i=r[1],a=r[2],o=r[3];if(this.typeCheck(e,r.slice(1)),a&&a.getDependencies().length)throw d.variableSampleSize(a.getDependencies());if(o&&o.getDependencies().length)throw d.variableSeed(o.getDependencies());if(o&&(n=T("us",[n,o])),a){var s=a.asValue();if(s<1)throw d.badSampleSize();s=Math.round(s);for(var u,c=[],l=0;l<s;l++)u=T("lc",[n,w(x(l,1))]),c.push(i.sample([u]).getConcreteTree(e,t));return S(c)}return i.sample([n]).getConcreteTree(e,t)},h.BuiltInFunction.shuffle.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r.slice(1));var n=r[0],i=r[1],a=r[2];if(a&&a.getDependencies().length)throw d.variableSeed(a.getDependencies());a&&(n=T("us",[n,a]));var o;if("List"===i.type)return o=i.args.slice(),g.shuffle(n.asValue(),o),S(o);if("Broadcast"===i.type){for(var s=i,u=[s._expression],c=g.randomPerm(n.asValue(),s.length),l=0;l<s._lists.length;l++){o=[];for(var p=0;p<c.length;p++)o.push(s._lists[l].args[c[p]]);u.push(h.List(o))}return s.copyWithArgs(u)}throw d.parseError()},h.BuiltInFunction.sort.prototype._getConcreteTree=function(e,t){var r=this.args;if(1===r.length&&(r=r.concat(r[0])),this.typeCheck(e,r),0!==r[1].getDependencies().length)throw d.functionFreeVariable(this._errorSymbol,r[1].getDependencies()[0]);if("List"!==r[1].type)throw d.parseError();var n,i,a,o=r[1].asValue(),s=g.sortPerm(o);if("List"===r[0].type){for(n=[],i=0;i<Math.min(s.length,r[0].args.length);i++)n.push(r[0].args[s[i]]);return h.List(n)}if("Broadcast"===r[0].type){var u=[r[0]._expression];for(a=0;a<r[0]._lists.length;a++){n=[];var c=r[0]._lists[a].args;for(i=0;i<Math.min(s.length,c.length);i++)n.push(c[s[i]]);u.push(h.List(n))}return r[0].copyWithArgs(u)}throw d.parseError()},h.BuiltInFunction.join.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r);for(var n=[],i=0;i<r.length;i++){var a=r[i];if("Broadcast"===a.type&&(a=a.asList(e)),"List"===a.type)for(var o=0;o<a.args.length;o++)n.push(a.args[o]);else n.push(a)}return h.List(n)}}),define("core/math/features/getValueType",["require","parsenodes","core/math/types"],function(e){"use strict";function t(){return s.Number}function r(){return s.Bool}function n(){return s.Point}function i(){return s.Distribution}function a(){return s.Any}var o=e("parsenodes"),s=e("core/math/types"),u={Add:t,Multiply:t,Divide:t,Subtract:t,Exponent:t,Negative:t,And:r,Piecewise:function(e){return e[1].valueType},BaseComparator:r,RepeatedOperator:t,List:function(e){if(0===e.length)return s.EmptyList;for(var t=e[0].valueType,r=1;r<e.length;r++)if(e[r].valueType!==t)return s.ListOfAny;return s.hasListType(t)?s.listType(t):s.ListOfAny},ListAccess:function(e){return s.elementType(e[0].valueType)},Broadcast:function(e){return s.listType(e[0].valueType)},Seed:function(e){return s.SeedType},ExtendSeed:function(e){return s.SeedType},OrderedPairAccess:t,OrderedPair:n,NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,Distribution:i,DummyIndex:t,FreeVariable:t,TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:a};for(var c in u)o[c].prototype._getValueType=u[c]}),define("core/math/features/typeCheck",["require","parsenodes","core/math/types","core/math/errormsg"],function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++)if(e===t[r])return!0;return!1}function r(e){for(var t=[],r=0;r<e.length;r++)t.push(o.prettyPrint(e[r].valueType));return t}function n(e,t){return function(n,i){for(var a=0;a<i.length;a++)if(i[a].valueType!==e[a])throw t(r(i))}}function i(e,r){var n=r.length,i=r[0];if(n<2)throw s.methodRequiresList(this._symbol);if(!t(i.valueType,[o.ListOfNumber,o.EmptyList]))throw s.methodRequiresList(this._symbol);if(n>2)throw s.tooManyArguments(this._symbol,2)}var a=e("parsenodes"),o=e("core/math/types"),s=e("core/math/errormsg"),u={Add:n([o.Number,o.Number],s.addTypeError),Multiply:n([o.Number,o.Number],s.multiplyTypeError),Divide:n([o.Number,o.Number],s.divideTypeError),Subtract:n([o.Number,o.Number],s.subtractTypeError),Exponent:n([o.Number,o.Number],s.exponentTypeError),Negative:n([o.Number],s.negativeTypeError),BaseComparator:n([o.Number,o.Number],s.comparatorTypeError),And:n([o.Bool,o.Bool],s.andTypeError),ExtendSeed:function(e,r){if(2!==r.length||r[0].valueType!==o.SeedType||!t(r[1].valueType,[o.SeedType,o.Number]))throw s.functionUnsupported("random")},List:function(e,t){if(0!==t.length){var r=t[0].valueType;if(!o.hasListType(r))throw s.listTypeError([o.prettyPrint(r)]);for(var n=0;n<t.length;n++){var i=t[n].valueType;if(!o.hasListType(i))throw s.listTypeError([o.prettyPrint(i)]);if(i!==r)throw s.heterogeneousList()}}},Broadcast:function(e,t){},Distribution:function(e,t){},OrderedPair:function(e,t){if(0===t.length)throw s.emptyParen();if(e.dimensions&&t.length!==e.dimensions())throw s.badTupleDimensions(e.dimensions());for(var r=0;r<t.length;r++){var n=t[r].valueType;if(n!==o.Number)throw s.pointTypeError(o.prettyPrint(n))}},Piecewise:function(e,t){if(t[0].valueType!==o.Bool)throw s.piecewiseConditionTypeError(r(t));if(t[1].valueType!==o.Number)throw s.piecewiseBranchTypeError([o.prettyPrint(t[1].valueType)]);if(t[2].valueType!==o.Number)throw s.piecewiseBranchTypeError([o.prettyPrint(t[2].valueType)])},ListAccess:function(e,t){var n=o.isList(t[0].valueType),i=t[1].valueType,a=i===o.Number||i===o.ListOfNumber||i===o.ListOfBool;if(!n||!a)throw s.indexTypeError(r(t))},OrderedPairAccess:n([o.Point,o.Number],s.orderedPairAccessTypeError),Sum:function(e,t){if(t[1].valueType!==o.Number)throw s.sumLowerBoundTypeError([o.prettyPrint(t[1].valueType)]);if(t[2].valueType!==o.Number)throw s.sumUpperBoundTypeError([o.prettyPrint(t[2].valueType)]);if(t[3].valueType!==o.Number)throw s.sumArgumentTypeError([o.prettyPrint(t[3].valueType)])},Product:function(e,t){if(t[1].valueType!==o.Number)throw s.productLowerBoundTypeError([o.prettyPrint(t[1].valueType)]);if(t[2].valueType!==o.Number)throw s.productUpperBoundTypeError([o.prettyPrint(t[2].valueType)]);if(t[3].valueType!==o.Number)throw s.productArgumentTypeError([o.prettyPrint(t[3].valueType)])},Integral:function(e,t){if(t[1].valueType!==o.Number)throw s.integralLowerBoundTypeError([o.prettyPrint(t[1].valueType)]);if(t[2].valueType!==o.Number)throw s.integralUpperBoundTypeError([o.prettyPrint(t[2].valueType)]);if(t[3].valueType!==o.Number)throw s.integralArgumentTypeError([o.prettyPrint(t[3].valueType)])},NativeFunction:function(e,t){var n=this._errorSymbol,i=t.length,a="logbase"===this._symbol?1:0;if(i<this._requiredArity)throw s.wrongArity(n,this._requiredArity-a,i-a);if(i>this._maxArity)throw s.wrongArity(n,this._maxArity-a,i-a);for(var u=0;u<t.length;u++){if(t[u].valueType!==o.Number)throw s.functionTypeError(n,r(t))}},ReducerFunction:function(e,n){if(!t(n[0].valueType,[o.ListOfNumber,o.EmptyList]))throw s.functionTypeError(this._symbol,r(n))},DoubleReducerFunction:function(e,n){var i=n[0],a=n[1];if(!o.isList(i.valueType)||!o.isList(a.valueType))throw s.nonListDoubleReducer(this._symbol);if(!t(i.valueType,[o.ListOfNumber,o.EmptyList])||!t(a.valueType,[o.ListOfNumber,o.EmptyList]))throw s.functionTypeError(this._symbol,r(n))},ParametrizedReducerFunction:function(e,n){if(!t(n[0].valueType,[o.ListOfNumber,o.EmptyList]))throw s.nonListParametrizedReducer(this._symbol);if(n[1].valueType!==o.Number)throw s.functionTypeError(this._symbol,r(n))},TypedFunction:function(e,n){var i=this._errorSymbol,a=n.length,o="pdf"===this._symbol,u="cdf"===this._symbol;if(a<this._requiredArity){if(o)throw s.pdfWrongArity();if(u)throw s.cdfRequiresArguments();throw s.wrongArity(i,this._requiredArity,a)}if(a>this._maxArity){if(o)throw s.pdfWrongArity();if(u)throw s.cdfTooManyArguments();throw s.wrongArity(i,this._maxArity,a)}for(var c=0;c<n.length;c++){var l=n[c].valueType,p=this._inputTypes[c],f=Array.isArray(p);if(!f&&l!==p||f&&!t(l,p))throw s.functionTypeError(i,r(n))}},Derivative:function(e,n){if(!t(n[0].valueType,[o.Number,o.ListOfNumber,o.EmptyList]))throw s.derivativeTypeError(r(n))},Regression:function(e,n){if(!t(n[0].valueType,[o.Number,o.ListOfNumber])||!t(n[1].valueType,[o.Number,o.ListOfNumber]))throw s.regressionTypeError(r(n))},Polygon:function(e,t){if(1===t.length&&t[0].valueType!==o.ListOfPoint)throw s.polygonListTypeError(r(t));if(2===t.length&&t[0].valueType===o.Number&&t[1].valueType===o.Number)throw s.polygonTwoNumbersError();if(t.length>2&&!t.every(function(e){return e.valueType===o.Point}))throw s.polygonPointArgsError()},Object3D:function(e,t){if(t.length<3)throw s.wrongArity(this._symbol,3,t.length)},Histogram:i,DotPlot:i,BoxPlot:function(e,r){var n=r.length,i=r[0];if(0===n)throw s.methodRequiresList(this._symbol);if(!t(i.valueType,[o.ListOfNumber,o.EmptyList]))throw s.methodRequiresList(this._symbol);if(n>1)throw s.methodRequiresList(this._symbol)},TTest:function(e,t){var n=this._symbol;if(0===t.length)throw s.methodRequiresList(n);if(t[0].valueType===o.EmptyList)throw s.ttestListTooShort(n);if(t[0].valueType!==o.ListOfNumber)throw s.methodRequiresList(n);if(t.length>2)throw s.tooManyArguments(n,2);if(t[0].length<2)throw s.ttestListTooShort(n);if(t[1]&&t[1].valueType!==o.Number)throw s.functionTypeError(n,r(t))},IndependentTTest:function(e,t){var n=this._symbol;if(2!==t.length)throw s.wrongDoubleReducerArity(n);if(!o.isList(t[0].valueType)||!o.isList(t[1].valueType))throw s.nonListDoubleReducer(n);if(t[0].valueType===o.EmptyList||t[1].valueType===o.EmptyList)throw s.ttestListTooShort("ittest");if(t[0].valueType!==o.ListOfNumber||t[1].valueType!==o.ListOfNumber)throw s.functionTypeError(n,r(t));if(t[0].args.length<2||t[1].args.length<2)throw s.ttestListTooShort("ittest")},Stats:function(e,t){var n=t.length,i=t[0];if(0===n)throw s.methodRequiresList(this._symbol);if(i.valueType===o.EmptyList)throw s.functionTypeError(this._symbol,r(t));if(i.valueType!==o.ListOfNumber)throw s.methodRequiresList(this._symbol);if(n>1)throw s.methodRequiresList(this._symbol)}};for(var c in u)a[c].prototype.typeCheck=u[c];a.BuiltInFunction.random.prototype.typeCheck=function(e,t){var r=t.length,n=t[0],i=t[1],u=t[2];if(r>3)throw s.randomArity();if(!n)throw s.randomArity();if(!(n instanceof a.Distribution||n instanceof a.List))throw s.randomArity();if(n instanceof a.Distribution&&n.args&&(n.args[0]instanceof a.List||n.args[1]instanceof a.List))throw s.randomFromBroadcastDistribution();if(i&&i.valueType!==o.Number)throw s.randomArity();if(u&&u.valueType!==o.Number)throw s.randomArity()},a.BuiltInFunction.shuffle.prototype.typeCheck=function(e,t){var n=t.length;if(n<1)throw s.wrongArity(this._errorSymbol,1,n,this.minArityUsageExample);if(n>2)throw s.wrongArity(this._errorSymbol,2,n,this.maxArityUsageExample);if(!o.isList(t[0].valueType)||2===n&&t[1].valueType!==o.Number)throw s.functionTypeError(this._errorSymbol,r(t))},a.BuiltInFunction.length.prototype.typeCheck=function(e,t){if(1!==t.length||!o.isList(t[0].valueType))throw s.parseError()},a.BuiltInFunction.sort.prototype.typeCheck=function(e,n){var i=n.length;if(i<1)throw s.wrongArity(this._errorSymbol,1,i,this.minArityUsageExample);if(i>2)throw s.wrongArity(this._errorSymbol,2,i,this.maxArityUsageExample);if(!o.isList(n[0].valueType)||!t(n[1].valueType,[o.ListOfNumber,o.EmptyList]))throw s.functionTypeError(this._errorSymbol,r(n))},a.BuiltInFunction.join.prototype.typeCheck=function(e,t){var n=t.length\n;if(n<this._requiredArity)throw s.wrongArity(this._errorSymbol,this._requiredArity,n,this.minArityUsageExample);var i=t[0].valueType;o.isList(i)||(i=o.listType(i));for(var a=1;a<t.length;a++){var u=t[a].valueType;if(o.isList(u)||(u=o.listType(u)),u!==o.EmptyList&&(i===o.EmptyList&&(i=u),u!==i))throw s.functionTypeError(this._errorSymbol,r(t))}}}),define("core/math/features/repr",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),r=function(e,t,r){r=r||0;var n=Array(r+1).join("  "),i=n+"  ";return"[\\n"+i+e.map(function(e){return e.repr(t,r+1)}).join(",\\n"+i)+"\\n"+n+"]"},n=function(e,t){return""+(t=t||"")+e};t.Expression.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.args,e,t)+")"},t.DoubleInequality.prototype.repr=function(e,t){t=t||0;var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"([\\n"+i+this.args[0].repr(e,t+1)+",\\n"+i+"\'"+this.args[1]+"\',\\n"+i+this.args[2].repr(e,t+1)+",\\n"+i+"\'"+this.args[3]+"\',\\n"+i+this.args[4].repr(e,t+1)+"\\n"+r+"])"},t.Identifier.prototype.repr=t.FreeVariable.prototype.repr=function(e){return n(this.type,e)+"(\'"+this._symbol+"\')"},t.Constant.prototype.repr=function(e){return n(this.type,e)+"("+this.asValue()+")"},t.ExtendSeed.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this.tag+"\', "+r(this.args,e,t)+")"},t.Seed.prototype.repr=function(e){return n(this.type,e)+"("+this.asValue()+")"},t.FunctionCall.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.Assignment.prototype.repr=function(e,r){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,r)+", "+this._expression.repr(e,r)+")"},t.Regression.prototype.repr=t.Equation.prototype.repr=function(e,t){return n(this.type,e)+"("+this._lhs.repr(e,t)+", "+this._rhs.repr(e,t)+")"},t.FunctionDefinition.prototype.repr=function(e,i){return n(this.type,e)+"("+t.Identifier(this._symbol).repr(e,i)+", "+r(this._argSymbols.map(function(e){return t.Identifier(e)}),e,i)+", "+this._expression.repr(e,i)+")"},t.Error.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._msg+"\')"},t.Derivative.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+r(this.args,e,t)+")"},t.SolvedEquation.prototype.repr=function(e,t){return n(this.type,e)+"(\'"+this._symbol+"\', "+this._expression.repr(e,t)+")"},t.OptimizedRegression.prototype.repr=function(e,t){return n(this.type,e)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(e,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+")"},t.Table.prototype.repr=function(e,t){return n(this.type,e)+"("+r(this.columns,e,t)+")"},t.TableColumn.prototype.repr=function(e,t){return n(this.type,e)+"("+this.header.repr(e,t)+", "+this.length+", "+r(this.values,e,t)+")"},t.Image.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"center: "+this.center.repr(e,t+1)+",\\n"+i+"radianAngle: "+this.radianAngle.repr(e,t+1)+",\\n"+i+"width: "+this.width.repr(e,t+1)+",\\n"+i+"height: "+this.height.repr(e,t+1)+"},\\n"+i+"opacity: "+this.opacity.repr(e,t+1)+",\\n"+i+JSON.stringify(this.moveStrategy)+"\\n"+r+")"},t.Slider.prototype.repr=function(e,t){var r=Array(t+1).join("  "),i=r+"  ";return n(this.type,e)+"({\\n"+i+"sliderAssignment: "+this.sliderAssignment.repr(e,t+1)+",\\n"+i+"sliderMin: "+(this.sliderMin&&this.sliderMin.repr(e,t+1))+",\\n"+i+"sliderMax: "+(this.sliderMax&&this.sliderMax.repr(e,t+1))+",\\n"+i+"sliderStep: "+(this.sliderStep&&this.sliderStep.repr(e,t+1))+"},\\n"+r+")"},t.Broadcast.prototype.repr=function(e,t){return n(this.type,e)+"([\'"+this._replacedSymbols.join("\', ")+"\'], "+r(this.args,e,t)+")"}}),define("core/math/features/scalarEvalExpression",["require","parsenodes","core/math/functions"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/functions"),n={Add:function(e){return"("+e.join("+")+")"},Multiply:function(e){return"("+e.join("*")+")"},Divide:function(e){return"("+e.join("/")+")"},Subtract:function(e){return"("+e.join("-")+")"},Exponent:function(e){return"BuiltIn.pow("+e.join(",")+")"},RawExponent:function(e){return"Math.pow("+e.join(",")+")"},Negative:function(e){return"(-"+e[0]+")"},And:function(e){return e.join("&&")},Piecewise:function(e){return"("+e[0]+"?"+e[1]+":"+e[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var a in n){var o=t[a].prototype;o.scalarEvalExpression=n[a],o.evaluate=r.createEvaluateFunction(o.scalarEvalExpression,i[a])}}),define("core/math/reconstitute-node",["require","parsenodes","core/math/types"],function(e){"use strict";function t(e,i){if(n.isList(e)){for(var a=[],o=0;o<i.length;o++)a.push(t(n.elementType(e),i[o]));var s=r.List(a);return s.valueType=e,s}switch(e){case n.Number:case n.Bool:return r.Constant(i);case n.Point:return r.OrderedPair([r.Constant(i[0]),r.Constant(i[1])]);default:throw new Error("Cannot reconstitute value of a "+n.prettyPrint(e)+".")}}var r=e("parsenodes"),n=e("core/math/types");return t}),define("core/math/features/constantcollapsedcopy",["require","parsenodes","core/math/reconstitute-node","core/math/maybe-rational","core/math/errormsg"],function(e){"use strict";function t(e){if(!e.isConstant)return!1;var t=e.asValue();return"number"==typeof t&&!isFinite(t)}var r=e("parsenodes"),n=r.Constant,i=r.Multiply,a=r.Subtract,o=r.RawExponent,s=r.Seed,u=r.BuiltInFunction,c=e("core/math/reconstitute-node"),l=e("core/math/maybe-rational"),p=e("core/math/errormsg"),f={Expression:function(e,t){return this.copyWithArgs(t)},FreeVariable:function(e,t){return this},ScalarExpression:function(e,t){for(var r=[],i=0;i<t.length;i++){if(!t[i].isConstant&&!t[i].isString)return this.copyWithArgs(t);r.push(t[i].asValue())}return n(this.evaluate(r))},OrderedPair:function(e,t){return this.copyWithArgs(t)},Distribution:function(e,t){return this.copyWithArgs(t)},Add:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.add(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):0===t[0].asValue()?t[1]:0===t[1].asValue()?t[0]:this.copyWithArgs(t)},Multiply:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.mul(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):1===t[0].asValue()?t[1]:1===t[1].asValue()?t[0]:this.copyWithArgs(t)},Subtract:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.sub(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):0===t[0].asValue()?r.Negative([t[1]]):0===t[1].asValue()?t[0]:this.copyWithArgs(t)},Divide:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.div(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):1===t[1].asValue()?t[0]:this.copyWithArgs(t)},Exponent:function(e,t){if(t[0].isConstant&&t[1].isConstant)return n(l.pow(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue()));if(t[0].isConstant){if(t[0].asValue()===Math.E)return u.exp([t[1]]);if(t[0].asValue()>0)return o(t)}if(t[1].isConstant){var r=t[1].asValue();if(1===r)return t[0];if(r===Math.floor(r))return o(t);var a=t[1].asMaybeRationalValue();return l.isRational(a)?a.d%2==1?i([a.n%2==0?n(l.maybeRational(1,1)):u.sign([t[0]]),o([u.abs([t[0]]),t[1]])]):o(t):this.copyWithArgs(t)}return this.copyWithArgs(t)},RawExponent:function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.pow(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},Negative:function(e,t){return t[0].isConstant?n(l.neg(t[0].asMaybeRationalValue())):t[0]instanceof r.Negative?t[0].args[0]:this.copyWithArgs(t)},And:function(e,t){return t[0].isConstant&&t[1].isConstant?n(t[0].asValue()&&t[1].asValue()):t[0].isConstant&&!0===t[0]?t[1]:t[0].isConstant&&!1===t[0]?n(!1):t[1].isConstant&&!0===t[1]?t[0]:t[1].isConstant&&!1===t[1]?n(!1):this.copyWithArgs(t)},Piecewise:function(e,t){return t[0].isConstant&&!0===t[0].asValue()?t[1]:t[0].isConstant&&!1===t[0].asValue()?t[2]:this.copyWithArgs(t)},Integral:function(e,r){var o=r[0],s=r[1],u=r[2],c=r[3];if(t(s)||t(u))throw p.integralInfiniteBoundError();var l=c.getDependencies();if(s.isConstant&&u.isConstant){var f=u.asValue()-s.asValue();if(c.isConstant)return n(c.asValue()*f);if(!c.dependsOn(o._symbol))return i([c,n(f)]);if(1===l.length&&l[0]===o._symbol)return n(this.evaluate(s.asValue(),u.asValue(),c))}else if(!c.dependsOn(o._symbol))return i([c,a([u,s])]);return this.copyWithArgs(r)},ListAccess:function(e,t){return t[1].isConstant?t[0].elementAt(e,t[1].asValue()-1):this.copyWithArgs(t)},OrderedPairAccess:function(e,t){return t[1].isConstant&&t[0]instanceof r.OrderedPair?t[0].elementAt(e,t[1].asValue()-1):this.copyWithArgs(t)},Broadcast:function(e,t){var r,n=t[0].getDependencies();for(r=0;r<n.length;r++)if(-1===this._replacedSymbols.indexOf(n[r]))return this.copyWithArgs(t);for(r=1;r<t.length;r++)if(0!==t[r].getDependencies().length)return this.copyWithArgs(t);var i=t[0].getCompiledFunction(this._replacedSymbols).fn,a=t.slice(1).map(function(e){return e.asValue()}),o=[];for(r=0;r<this.length;r++){for(var s=[],u=0;u<a.length;u++)s.push(a[u][r]);o.push(i.apply(void 0,s))}return c(this.valueType,o)},ReducerFunction:function(e,t){return 0===t[0].getDependencies().length?c(this.valueType,this.evaluate([t[0].asValue()])):this.copyWithArgs(t)},DoubleReducerFunction:function(e,t){if(0===t[0].getDependencies().length&&0===t[1].getDependencies().length){var r=Math.min(t[0].length,t[1].length);return c(this.valueType,this.evaluate([t[0].asValue().slice(0,r),t[1].asValue().slice(0,r)]))}return this.copyWithArgs(t)},ParametrizedReducerFunction:function(e,t){var r=t[0],n=t[1];return n.isConstant&&0===r.getDependencies().length?c(this.valueType,this.evaluate([r.asValue(),n.asValue()])):this.copyWithArgs(t)},RepeatedOperator:function(e,r){var i=r[1],a=r[2];if(t(i)||t(a))switch(this.type){case"Sum":throw p.sumInfiniteBoundError();case"Product":throw p.productInfiniteBoundError();default:throw p.parseError()}if(i.isConstant&&a.isConstant){var o=i.asValue(),s=a.asValue(),u=r[3];if(u.isConstant)return n(this.evaluateConstant([o,s,u.asValue()]));var c=u.getDependencies();if(0===c.length||1===c.length&&c[0]===r[0]._symbol)return n(this.evaluate(o,s,u))}return this.copyWithArgs(r)},ExtendSeed:function(e,t){var r=t[0],n=t[1];return 0===r.getDependencies().length&&0===n.getDependencies().length?s(r.asValue()+"::"+this.tag+n.asValue()):this.copyWithArgs(t)}};for(var h in f)r[h].prototype._constantCollapsedCopy=f[h];u.mod.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.mod(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},u.sqrt.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant?n(l.sqrt(t[0].asMaybeRationalValue())):this.copyWithArgs(t)},u.nthroot.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant&&t[1].isConstant?n(l.nthroot(t[0].asMaybeRationalValue(),t[1].asMaybeRationalValue())):this.copyWithArgs(t)},u.abs.prototype._constantCollapsedCopy=function(e,t){return t[0].isConstant?n(l.abs(t[0].asMaybeRationalValue())):this.copyWithArgs(t)},u.total.prototype._constantCollapsedCopy=function(e,t){if(!t[0].isList)return this.copyWithArgs(t);for(var r=t[0].args,i=0;i<r.length;i++)if(!r[i].isConstant)return this.copyWithArgs(t);return n(l.total(t[0].asMaybeRationalValue()))},u.distance.prototype._constantCollapsedCopy=function(e,t){return 0===t[0].getDependencies().length&&0===t[1].getDependencies().length?n(this.evaluate([t[0].asArray(),t[1].asArray()])):this.copyWithArgs(t)},u.midpoint.prototype._constantCollapsedCopy=function(e,t){if(0===t[0].getDependencies().length&&0===t[1].getDependencies().length){var i=this.evaluate([t[0].asArray(),t[1].asArray()]);return r.OrderedPair([n(i[0]),n(i[1])])}return this.copyWithArgs(t)}}),define("core/math/features/polynomialorder",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),r={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"};for(var n in r){var i=r[n];t[n].prototype.polynomialOrder=function(e){return e=e.replace("order0","this.args[0].polynomialOrder(symbol)"),e=e.replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+e)}(i)}t.Exponent.prototype.polynomialOrder=function(e){var t=this.args[0].polynomialOrder(e),r=this.args[1].polynomialOrder(e);if(0===t&&0===r)return 0;var n=this.args[1];return n.isConstant&&n.asValue()===Math.round(n.asValue())&&n.asValue()>0?t*n.asValue():1/0},t.Piecewise.prototype.polynomialOrder=function(e){return this.dependsOn(e)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(e):1/0:0},t.List.prototype.polynomialOrder=function(e){return 1/0}}),define("core/math/features/polynomialcoefficients",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/maybe-rational").maybeRational,n=t.Constant(r(0,1)),i=t.Constant(r(1,1));t.FreeVariable.prototype.getPolynomialCoefficients=function(e){return e===this._symbol?[n,i]:[this]},t.Constant.prototype.getPolynomialCoefficients=function(e){return[this]},t.Add.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Add([r[s],n[s]])):o.push(i>a?r[s]:n[s]);return o},t.Subtract.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=Math.max(i,a);s++)i>=s&&a>=s?o.push(t.Subtract([r[s],n[s]])):o.push(i>a?r[s]:t.Negative([n[s]]));return o},t.Negative.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=[],i=0;i<r.length;i++)n.push(t.Negative([r[i]]));return n},t.Exponent.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),i=this.args[1].getPolynomialCoefficients(e),a=r.length-1;if(i.length-1>0)throw"can\'t solve for variable in exponent";if(0===a)return[t.Exponent([r[0],i[0]])];if(this.args[1].isConstant){switch(this.args[1].asValue()){case 0:return[n];case 1:return r;case 2:return t.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(e)}}throw"Unable to compile polynomial representation"},t.Multiply.prototype.getPolynomialCoefficients=function(e){for(var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=r.length-1,a=n.length-1,o=[],s=0;s<=i;s++)for(var u=0;u<=a;u++){var c=t.Multiply([r[s],n[u]]),l=o[s+u];o[s+u]=void 0===l?c:t.Add([l,c])}return o},t.Divide.prototype.getPolynomialCoefficients=function(e){var r=this.args[0].getPolynomialCoefficients(e),n=this.args[1].getPolynomialCoefficients(e),i=n.length-1,a=[];if(i>0)throw"Can\'t solve for variable in denominator";for(var o=0;o<r.length;o++)a.push(t.Divide([r[o],n[0]]));return a},t.Expression.prototype.getPolynomialCoefficients=function(e){if(this.dependsOn(e))throw"Unimplemented polynomialCoefficient call";return[this]},t.Piecewise.prototype.getPolynomialCoefficients=function(e){return this.dependsOn(e)?this.args[1].getPolynomialCoefficients(e):[this]}}),define("core/math/features/extractconditions",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes");t.Expression.prototype.extractConditions=function(e,t){if(!this.dependsOn(e))return t;for(var r=0;r<this.args.length;r++){t=this.args[r].extractConditions(e,t)}return t},t.Piecewise.prototype.extractConditions=function(e,r){if(!this.dependsOn(e))return r;if(!this.args[0].dependsOn(e))return r=this.args[1].extractConditions(e,r),r=this.args[2].extractConditions(e,r);var n={};return n[e]=r,t.Piecewise([this.args[0].substitute(n),r,t.Constant(NaN)])}}),define("core/math/features/piecewiseDependsOn",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes");t.Expression.prototype.piecewiseDependsOn=function(e){if(!this.dependsOn(e))return!1;for(var t=0;t<this.args.length;t++){if(this.args[t].piecewiseDependsOn(e))return!0}return!1},t.Piecewise.prototype.piecewiseDependsOn=function(e){return this.dependsOn(e)}}),define("core/math/features/bounddomain",["require","parsenodes","core/math/builtinframe","core/math/domaintypes","core/math/comparators","core/math/maybe-rational","core/math/policy"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/builtinframe"),n=e("core/math/domaintypes"),i=e("core/math/comparators").table,a=e("core/math/maybe-rational").maybeRational,o=e("core/math/policy").defaultPolicy,s=t.Constant(a(0,1));t.Base.prototype.boundDomain=function(e){return n.unknownDomain()},t.List.prototype.boundDomain=function(e){if(!this.dependsOn(e))return n.allReals();if(!this.args.length)return n.allReals();var t=this.args[0].boundDomain(e);if("known"!==t.type)return n.unknownDomain();for(var r=0;r<this.args.length;r++){var i=this.args[r].boundDomain(e);if("known"!==i.type)return n.unknownDomain();if(i.bounds[0]!==t.bounds[0]||i.bounds[1]!==t.bounds[1])return n.unknownDomain()}return t},t.Expression.prototype.boundDomain=function(e){for(var t=n.allReals(),r=0;r<this.args.length;r++)t=n.intersectDomains(t,this.args[r].boundDomain(e));return t},t.Constant.prototype.boundDomain=function(e){return this.isNaN()?n.emptyDomain():n.allReals()},t.Piecewise.prototype.boundDomain=function(e){return this.args[2].isConstant&&isNaN(this.args[2].asValue())?n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e)):n.unknownDomain()},t.OrderedPair.prototype.boundDomain=function(e){return n.intersectDomains(this.args[0].boundDomain(e),this.args[1].boundDomain(e))},t.BaseComparator.prototype.boundDomain=function(e){if(!this.dependsOn(e))return n.allReals();if("="===this.operator)return n.unknownDomain();var t=this._difference,a=this._difference.boundDomain(e);if(t.polynomialOrder(e)>1)return n.unknownDomain();var u=t.getPolynomialCoefficients(e),c=u[1]?u[1].getConcreteTree(o,r):s,l=u[0]?u[0].getConcreteTree(o,r):s;if(!c.isConstant||!l.isConstant)return n.unknownDomain();if(isNaN(c.asValue())||isNaN(l.asValue()))return n.emptyDomain();if(0===c.asValue())return i[this.operator].inclusive?l.asValue()>=0?a:n.emptyDomain():l.asValue()>0?a:n.emptyDomain();var p=-l.asValue()/c.asValue(),f=c.asValue()<0?[-1/0,p]:[p,1/0];return n.intersectDomains(a,n.knownDomain(f))}}),define("core/math/policyGraphing",["require","exports","./builtinframe","core/types/graphmode"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyGraphing3D=t.PolicyGraphing=void 0;var i=function(){function e(){}return e.prototype.dimensions=function(){return 2},e.prototype.assignmentForbidden=function(e){return"x"===e||"y"===e||"theta"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},e.prototype.isValidSlider=function(e){return"x"===e||"y"===e||"ans"!==e.slice(0,3)&&!this.assignmentForbidden(e)},e.prototype.sliderVariables=function(e){var t=this;return-1!==e.indexOf("theta")&&(e=e.filter(function(e){return"r"!==e})),e.filter(function(e){return!t.assignmentForbidden(e)&&"ans"!==e.slice(0,3)})},e.prototype.graphingEnabled=function(){return!0},e.prototype.ansEnabled=function(){return!1},e.prototype.validRegressionParameter=function(e){return"x"!==e&&"y"!==e},e.prototype.validLHS=function(e){return"theta"!==e},e.prototype.unplottablePolarFunction=function(e,t){return"theta"===e&&-1!==t.indexOf("r")},e.prototype.validDoubleInequalitySymbol=function(e){return"x"===e||"y"===e},e.prototype.validDoubleInequalityVariables=function(e){return!(e.length>2)&&e.every(this.validDoubleInequalitySymbol)},e.prototype.validExpressionVariables=function(e){return 1===e.length&&"x"===e[0]},e.prototype.validSolvedVariable=function(e){return"x"===e||"y"===e||"r"===e},e.prototype.validImplicitVariables=function(e){switch(e.length){case 0:return!0;case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return"x"===e[0]&&"y"===e[1]||"y"===e[0]&&"x"===e[1]||"r"===e[0]&&"theta"===e[1]||"theta"===e[0]&&"r"===e[1];default:return!1}},e.prototype.graphableListVariables=function(e,t){return"x"===e||"y"===e||"r"===e||"x"===t||"y"===t},e.prototype.validParametricVariable=function(e){return"t"===e},e.prototype.validParametricVariables=function(e){return 1===e.length&&this.validParametricVariable(e[0])},e.prototype.validInequalityVariables=function(e){switch(e.length){case 1:return"x"===e[0]||"y"===e[0]||"r"===e[0];case 2:return this.validImplicitVariables(e);default:return!1}},e.prototype.validFirstColumnVariable=function(e){return"y"!==e&&"r"!==e&&"theta"!==e&&!e.match(/y_(\\d+)/)},e.prototype.complicatedPolarImplicit=function(e,t){return"theta"===e||"r"===e&&1!==t},e.prototype.constantGraphMode=function(e){return"x"===e?n.X:"r"===e?n.POLAR:n.Y},e.prototype.graphMode=function(e,t){var r=t[0];return"y"===r?n.X:"x"===e?n.X:"r"===e&&"theta"===r?n.POLAR:n.Y},e.prototype.tableableAsConstant=function(e){return"x"!==e&&("r"!==e&&"theta"!==e)},e.prototype.implicitIndependent=function(e){return"x"},e.prototype.implicitDependency=function(e){return 1!==e.length?"y":"y"===e[0]?"x":"theta"===e[0]?"r":"y"},e.prototype.graphableAsConstant=function(e){return"y"===e||"x"===e||"r"===e},e.prototype.disabledFeatures=function(){return[]},e}(),a=function(){function e(){}return e.prototype.dimensions=function(){return 3},e.prototype.assignmentForbidden=function(e){return"x"===e||"y"===e||"z"===e||"tmp"===e.slice(0,3)||r.hasOwnProperty(e)},e.prototype.isValidSlider=function(e){return"x"===e||"y"===e||"z"===e||"ans"!==e.slice(0,3)&&!this.assignmentForbidden(e)},e.prototype.sliderVariables=function(e){var t=this;return e.filter(function(e){return!t.assignmentForbidden(e)&&"ans"!==e.slice(0,3)})},e.prototype.graphingEnabled=function(){return!0},e.prototype.ansEnabled=function(){return!1},e.prototype.validRegressionParameter=function(e){return!1},e.prototype.validLHS=function(e){return!0},e.prototype.unplottablePolarFunction=function(e,t){return!1},e.prototype.validDoubleInequalitySymbol=function(e){return!1},e.prototype.validDoubleInequalityVariables=function(e){return!1},e.prototype.validExpressionVariables=function(e){var t=e.join("");return"x"===t||"y"===t||"xy"===t||"yx"===t},e.prototype.validSolvedVariable=function(e){return"x"===e||"y"===e||"z"===e},e.prototype.validImplicitVariables=function(e){return!1},e.prototype.graphableListVariables=function(e,t){return"x"===e||"y"===e||"x"===t||"y"===t},e.prototype.validParametricVariable=function(e){return"t"===e},e.prototype.validParametricVariables=function(e){return 1===e.length&&this.validParametricVariable(e[0])},e.prototype.validInequalityVariables=function(e){return!1},e.prototype.validFirstColumnVariable=function(e){return!1},e.prototype.complicatedPolarImplicit=function(e,t){return!1},e.prototype.constantGraphMode=function(e){return n.Z_3D},e.prototype.graphMode=function(e,t){return"z"===e&&this.validExpressionVariables(t)?n.Z_3D:n.NONE},e.prototype.tableableAsConstant=function(e){return"x"!==e&&"r"!==e},e.prototype.implicitIndependent=function(e){return"x"},e.prototype.implicitDependency=function(e){if(2!==e.length)return"z";var t=e[0]<e[1]?e[0]+e[1]:e[1]+e[0];return"xy"===t?"z":"xz"===t?"y":"yz"===t?"x":"z"},e.prototype.graphableAsConstant=function(e){return"z"===e},e.prototype.disabledFeatures=function(){return[]},e}();t.PolicyGraphing=new i,t.PolicyGraphing3D=new a}),define("core/math/features/derivative",["require","parsenodes","core/math/baseparser","core/math/builtinframe","core/math/parsenode/builtinfunction","core/math/maybe-rational","core/math/policy","core/math/policyGraphing"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/baseparser"),n=e("core/math/builtinframe"),i=e("core/math/parsenode/builtinfunction"),a=e("core/math/maybe-rational").maybeRational,o=e("core/math/policy").defaultPolicy,s=e("core/math/policyGraphing").PolicyGraphing,u=t.Constant(a(0,1)),c=t.Constant(a(1,1)),l=t.Constant(a(2,1)),p={FreeVariable:function(e){return e===this._symbol?c:u},Constant:function(e){return isFinite(this.asValue())?u:t.Constant(this.asValue())},Negative:function(e){return t.Negative([this.args[0].takeDerivative(e)])},Add:function(e){return t.Add([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Subtract:function(e){return t.Subtract([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},Multiply:function(e){return t.Add([g(e,this.args[0],t.Multiply([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Multiply([this.args[0],this.args[1].takeDerivative(e)]))])},Divide:function(e){return t.Subtract([g(e,this.args[0],t.Divide([this.args[0].takeDerivative(e),this.args[1]])),g(e,this.args[1],t.Divide([t.Multiply([this.args[0],this.args[1].takeDerivative(e)]),t.Exponent([this.args[1],l])]))])},Exponent:function(e){return t.Add([g(e,this.args[0],t.Multiply([t.Multiply([this.args[1],t.Exponent([this.args[0],t.Subtract([this.args[1],c])])]),this.args[0].takeDerivative(e)])),g(e,this.args[1],t.Multiply([t.Piecewise([t.Comparator["="]([this.args[0],u]),t.Piecewise([t.Comparator[">"]([this.args[1],u]),u,t.Constant(NaN)]),t.Multiply([t.FunctionCall("\\\\ln",[this.args[0]]),t.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(e)]))]).getConcreteTree(o,n)},Sum:function(e){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(e)])},Product:function(e){var r=t.Sum([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([u,this.args[3]]),c,u])]),n=t.Multiply([t.Sum([this.args[0],this.args[1],this.args[2],t.Divide([this.args[3].takeDerivative(e),this.args[3]])]),t.Product(this.args)]),i=t.Product([this.args[0],this.args[1],this.args[2],t.Piecewise([t.Comparator["="]([u,this.args[3]]),this.args[3].takeDerivative(e),this.args[3]])]);return t.Piecewise([t.Comparator["="]([u,r]),n,t.Piecewise([t.Comparator["="]([c,r]),i,u])])},Piecewise:function(e){return 2===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e)]):3===this.args.length?t.Piecewise([this.args[0],this.args[1].takeDerivative(e),this.args[2].takeDerivative(e)]):void 0},List:function(e){return t.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},OrderedPair:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1].takeDerivative(e)])},OrderedPairAccess:function(e){return new this.constructor([this.args[0].takeDerivative(e),this.args[1]])},Integral:function(e){var r=this.args[0],n=this.args[1],i=this.args[2],a=this.args[3],o={};o[r._symbol]=i;var s={};return s[r._symbol]=n,t.Add([g(e,a,this.copyWithArgs([r,n,i,a.takeDerivative(e)])),t.Subtract([g(e,i,t.Multiply([a.substitute(o),i.takeDerivative(e)])),g(e,n,t.Multiply([a.substitute(s),n.takeDerivative(e)]))])])},SolvedEquation:function(e){return this._expression.takeDerivative(e)},OptimizedRegression:function(e){return this.model.takeDerivative(e)},Broadcast:function(e){for(var r=this._replacedSymbols.slice(),n=this.args.slice(1),i=this._expression.takeDerivative(e),a=0;a<this._replacedSymbols.length;a++){var o=this._replacedSymbols[a],s=this.args[a+1];if(s.dependsOn(e)){var u=this.tmpVar(),c=t.DummyIndex(u);r.push(u),n.push(s.takeDerivative(e)),i=t.Add([i,t.Multiply([this._expression.takeDerivative(o),c])])}}return t.Broadcast(r,[i].concat(n))},Seed:function(e){return t.Constant(NaN)}},f={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0",var:"2*\\\\cov(x, x_1)",varp:"2*\\\\cov(x, x_1)*(\\\\length(x)-1)/\\\\length(x)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}e^{-x^2}",invNorm:"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),\\\\invNorm(x))}"},h={logbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],round:["\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}","0/0"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],spearman:["0/0","0/0"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],quartile:["0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])","0/0"],tscore:["\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\\\frac{e^{-y}(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{\\\\floor(x)!}"],invPoisson:["0/0","0/0"],tpdf:["x_1*\\\\pdf(\\\\tdist(y),x)*\\\\frac{-(y+1)*x}{y+x^2}","y_1*\\\\frac{1}{2}\\\\pdf(\\\\tdist(y),x)(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))"],invT:["x_1/\\\\pdf(\\\\tdist(y),\\\\invT(x, y))","0/0"]},d={tcdf:["-x_1*\\\\pdf(\\\\tdist(z),x)","y_1*\\\\pdf(\\\\tdist(z),y)","0/0"],poissoncdf:["0/0","0/0","z_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],normalpdf:["-x_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","y_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","z_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) \\\\pdf(\\\\normaldist(y,z),x)"],binompdf:["0/0","0/0","\\\\{0<=z<=1: z_1*\\\\pdf(\\\\binomialdist(y,z),x)*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}"],invBinom:["0/0","0/0","0/0"],uniformpdf:["0","\\\\{y<=x: \\\\frac{y_1}{(z-y)^2}, 0\\\\}","\\\\{z>=x: -\\\\frac{z_1}{(z-y)^2}, 0\\\\}"],invUniform:["\\\\{y<=x<=z: x_1*(z-y), 0\\\\}","\\\\{y<=x<=z: y_1*(1-x), 0\\\\}","\\\\{y<=x<=z: z_1*x, 0\\\\}"]},m={\nnormalcdf:["-x_1\\\\pdf(\\\\normaldist(z,u), x)","y_1\\\\pdf(\\\\normaldist(z,u), y)","-z_1*(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))","u_1*(  \\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} -   \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})"],binomcdf:["0/0","0/0","0/0","\\\\{0<=u<=1: u_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}"],uniformcdf:["\\\\{z>u: 0/0, -x_1\\\\pdf(\\\\uniformdist(z,u), x)\\\\}","\\\\{z>u: 0/0, y_1\\\\pdf(\\\\uniformdist(z,u), y)\\\\}","\\\\{z>u: 0/0, z_1*(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})\\\\}","\\\\{z>u: 0/0, u_1*(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})\\\\}"]};for(var y in f)i[y].prototype.takeDerivative=function(e){return function(t){var r=this.args,i={x:r[0],x_1:r[0].takeDerivative(t)};return g(t,r[0],e.substitute(i)).getConcreteTree(o,n)}}(r.parse(f[y]));for(y in h)i[y].prototype.takeDerivative=function(e,r){return function(i){var a=this.args,s={x:a[0],x_1:a[0].takeDerivative(i),y:a[1],y_1:a[1].takeDerivative(i)};return t.Add([g(i,a[0],e.substitute(s)),g(i,a[1],r.substitute(s))]).getConcreteTree(o,n)}}(r.parse(h[y][0]),r.parse(h[y][1]));for(y in d)i[y].prototype.takeDerivative=function(e,r,i){return function(a){var s=this.args,u={x:s[0],x_1:s[0].takeDerivative(a),y:s[1],y_1:s[1].takeDerivative(a),z:s[2],z_1:s[2].takeDerivative(a)};return t.Add([t.Add([g(a,s[0],e.substitute(u)),g(a,s[1],r.substitute(u))]),g(a,s[2],i.substitute(u))]).getConcreteTree(o,n)}}(r.parse(d[y][0]),r.parse(d[y][1]),r.parse(d[y][2]));for(y in m)i[y].prototype.takeDerivative=function(e,r,i,a){return function(s){var u=this.args,c={x:u[0],x_1:u[0].takeDerivative(s),y:u[1],y_1:u[1].takeDerivative(s),z:u[2],z_1:u[2].takeDerivative(s),u:u[3],u_1:u[3].takeDerivative(s)};return t.Add([t.Add([g(s,u[0],e.substitute(c)),g(s,u[1],r.substitute(c))]),t.Add([g(s,u[2],i.substitute(c)),g(s,u[3],a.substitute(c))])]).getConcreteTree(o,n)}}(r.parse(m[y][0]),r.parse(m[y][1]),r.parse(m[y][2]),r.parse(m[y][3]));i.distance.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],o=t.OrderedPairAccess([r,c]),u=t.OrderedPairAccess([r,l]),p=t.OrderedPairAccess([a,c]),f=t.OrderedPairAccess([a,l]),h=g(e,o,o.takeDerivative(e)),d=g(e,u,u.takeDerivative(e)),m=g(e,p,p.takeDerivative(e)),y=g(e,f,f.takeDerivative(e));return g(e,this,t.Divide([t.Add([t.Add([t.Subtract([t.Multiply([h,o]),t.Multiply([h,p])]),t.Subtract([t.Multiply([m,p]),t.Multiply([m,o])])]),t.Add([t.Subtract([t.Multiply([d,u]),t.Multiply([d,f])]),t.Subtract([t.Multiply([y,f]),t.Multiply([y,u])])])]),i.distance([this.args[0],this.args[1]])])).getConcreteTree(s,n)},i.midpoint.prototype.takeDerivative=function(e){var r=this.args[0],a=this.args[1],o=t.OrderedPairAccess([r,c]),u=t.OrderedPairAccess([r,l]),p=t.OrderedPairAccess([a,c]),f=t.OrderedPairAccess([a,l]),h=g(e,o,o.takeDerivative(e)),d=g(e,u,u.takeDerivative(e)),m=g(e,p,p.takeDerivative(e)),y=g(e,f,f.takeDerivative(e));return t.OrderedPair([i.mean([h,m]),i.mean([d,y])]).getConcreteTree(s,n)};var g=function(e,t,r){return t.dependsOn(e)?r:u};for(var v in p){var b=p[v];t[v].prototype.takeDerivative=b}["tSample","poissonSample","uniformSample","normalSample","binomSample"].forEach(function(e){i[e].prototype.takeDerivative=function(e){for(var r=0;r<this.args.length;r++)if(this.args[r].dependsOn(e))return t.Constant(NaN);return u}})}),define("core/math/features/substitute",["require","parsenodes"],function(e){"use strict";var t=e("parsenodes"),r={Identifier:function(e){return e[this._symbol]?e[this._symbol]:this},FreeVariable:function(e){return e[this._symbol]?e[this._symbol]:this},Constant:function(e){return this},Expression:function(e){return this.copyWithArgs(this.args.map(function(t){return t.substitute(e)}))},List:function(e){return t.List(this.args.map(function(t){return t.substitute(e)}))},SolvedEquation:function(e){return new this.constructor(this._symbol,this._expression.substitute(e))},OptimizedRegression:function(e){return new this.constructor(this.model.substitute(e),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var n in r)t[n].prototype.substitute=r[n]}),define("core/math/features/isImplicit",["require","parsenodes"],function(e){"use strict";function t(e){return!(e[0]instanceof r.FreeVariable)||e[1].dependsOn(e[0]._symbol)}var r=e("parsenodes");r.Base.prototype.isImplicit=function(){return!1},r.Equation.prototype.isImplicit=function(){return t(this.args)},r.BaseComparator.prototype.isImplicit=function(){return t(this.args)},r.Broadcast.prototype.isImplicit=function(){return this._expression.isImplicit()}}),define("core/math/features/solve",["require","core/math/baseparser","parsenodes","core/math/errormsg","core/math/builtinframe","core/math/workerconfig","core/math/maybe-rational","core/math/policy"],function(e){"use strict";function t(e){var t=Object.create(m);return t.a=e[2]?e[2].tryGetConcreteTree(v,m):b,t.b=e[1]?e[1].tryGetConcreteTree(v,m):b,t.c=e[0]?e[0].tryGetConcreteTree(v,m):b,t}function r(e){return 0===e.a.asValue()?0===e.b.asValue()?0:1:2}function n(e,n,i,a){for(var o,s,u=[],c=[],l=0;l<i.length;l++){var p=i[l],f=0;h.eachArgs(e,[n],function(e){var t=e[0];f=Math.max(f,t.polynomialOrder(p))});var d=f>2,m=i.length>1&&!e.validSolvedVariable(p),y=a&&n.piecewiseDependsOn(p);d||m||y?(c[l]={},u[l]=1/0):(c[l]=[],u[l]=0,h.eachArgs(e,[n],function(e){var n=e[0];s=t(n.getPolynomialCoefficients(p)),c[l].push(s),u[l]=Math.max(u[l],r(s))}))}var g;if(1===i.length)s=c[0],o=i[0],g=u[0];else{var v;v=0===u[0]?1:0===u[1]?0:u[0]<u[1]?0:1,s=c[v],o=i[v],g=u[v]}return{localFrame:s,variableOfInterest:o,effectiveOrder:g}}function i(e,t){return t?P.inequality:P.generalEquation}function a(e){e.f=x.getConcreteTree(v,e),e.g=_.getConcreteTree(v,e),e.p=S.getConcreteTree(v,e),e.q=M.getConcreteTree(v,e),e.m=c(g(1e305,1))}var o=e("core/math/baseparser"),s=e("parsenodes"),u=s.Base,c=s.Constant,l=s.Equation,p=s.SolvedEquation,f=s.BaseComparator,h=s.List,d=e("core/math/errormsg"),m=e("core/math/builtinframe"),y=e("core/math/workerconfig"),g=e("core/math/maybe-rational").maybeRational,v=e("core/math/policy").defaultPolicy,b=c(g(0,1)),x=o.parse("b*b"),_=o.parse("4*a*c"),S=o.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),M=o.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),E=o.parse("[\\\\{\\\\abs(b)>0:-c/b\\\\}]"),D=o.parse("[\\\\{\\\\abs(a)>0:-b/(2*a)\\\\}]"),w=o.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},p\\\\}]"),T=o.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]"),P={inequality:function(e){return a(e),T.getConcreteTree(v,e)},generalEquation:function(e){return a(e),e.a.isConstant&&0===e.a.asValue()?E.getConcreteTree(v,e):e.f.isConstant&&e.g.isConstant&&e.f.asValue()-e.g.asValue()==0?D.getConcreteTree(v,e):w.getConcreteTree(v,e)}};u.prototype.trySolve=function(e,t){try{return this.solve(e,t)}catch(e){if(e instanceof s.Error)return e;throw e}},l.prototype.solve=function(e,t){return this.asComparator().solve(e,t)},f.prototype.solve=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return r;if(r.isConstant)return r;var a="="!==this.getOperator();if(!y.plotImplicits&&r.isImplicit())throw new d.implicitsDisabled;var o=this._difference.tryGetConcreteTree(e,t);o.isBroadcast&&(o=o.asList(e));var s=o.getDependencies();if(0===s.length)return o.isList?h(o.args.map(function(e){return c(0===e.asValue())})):c(0===o.asValue());if(1===s.length&&o.isList&&!a)return o;if(1===s.length&&!a&&!y.plotSingleVariableImplicitEquations)return d.singleVariableImplicitEquationsDisabled();var u=h.wrap(o);if(s.length>2)return d.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(s);if(a&&!e.validInequalityVariables(s))return d.invalidInequalityVariables().setDependencies(s);var l=n(e,u,s,a),f=l.localFrame,m=l.effectiveOrder,g=l.variableOfInterest;if(e.complicatedPolarImplicit(g,m))return d.complicatedPolarImplicit().setDependencies(s);if(!e.validImplicitVariables(s))return d.invalidImplicitVariables();if(m>2)return o;for(var v=i(s,a),b=[],x=0;x<f.length;x++){var _=v(f[x]);if(_.isError)return _;if(_.isConstant)b.push(_);else for(var S=0;S<_.args.length;S++){var M=_.args[S],E=u.args[x].extractConditions(g,M).getConcreteTree(e,t);b.push(E)}}return p(g,h(b))}}),define("core/math/distribution-spec",["require","exports","core/math/baseparser","tslib"],function(e,t,r,n){"use strict";function i(e){return a(r.parse(e,{trailingComma:!0}))}function a(e){var r=e,i=o[r.type];if(!i)switch("Assignment"===r.type&&(r=r._expression),r.type){case"FunctionCall":i=t.DistributionParameterDefaultsMap[r._symbol];break;default:return}if(i){for(var a={},s=i.params,u=r.args,c=0;c<s.length;c++){var l=u[c];a[s[c]]=l&&l.getInputString()||""}return n.__assign(n.__assign({},i),{span:r.getInputSpan(),values:a})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFunctionSpecFromTree=t.parseToplevelFunction=t.DistributionParameterDefaultsMap=void 0,t.DistributionParameterDefaultsMap={normaldist:{type:"distribution",symbol:"normaldist",params:["mean","stdev"],defaults:["0","1"],discrete:!1},tdist:{type:"distribution",symbol:"tdist",params:["dof"],defaults:[void 0],discrete:!1},binomialdist:{type:"distribution",symbol:"binomialdist",params:["trials","probsuccess"],defaults:[void 0,"0.5"],discrete:!0},poissondist:{type:"distribution",symbol:"poissondist",params:["mean"],defaults:[void 0],discrete:!0},uniformdist:{type:"distribution",symbol:"uniformdist",params:["min","max"],defaults:["0","1"],discrete:!1}};var o={Histogram:{type:"visualization",symbol:"histogram",params:["data","binwidth"],defaults:[void 0,"1"]},DotPlot:{type:"visualization",symbol:"dotplot",params:["data","binwidth"],defaults:[void 0,"1"]},BoxPlot:{type:"visualization",symbol:"boxplot",params:["data"],defaults:[void 0]}};t.parseToplevelFunction=i,t.getFunctionSpecFromTree=a}),define("core/math/evaluationstate",["require","core/types/graphmode","parsenodes","core/lib/label","core/math/types","core/math/distribution-spec"],function(e){"use strict";function t(e){return e.isError?e.getError():void 0===e.asValue()?"":+e.asValue()}function r(e,r,n){for(var i=[],a=0;a<r.columns.length;a++){var o=n.columns[a],s={dependent:!o.isIndependent,discrete:o.isIndependent};o.isError?(s.error=o.getError(),s.values=[]):s.values=o.values.map(t),i.push(s)}return{column_data:i}}function n(e,t,r){var n={variables:[],errorMap:{},dimensions:{}};return r.center.isError&&(n.errorMap.center=!0),r.radianAngle.isError&&(n.errorMap.angle=!0),r.width.isError&&(n.errorMap.width=!0),r.height.isError&&(n.errorMap.height=!0),r.opacity.isError&&(n.errorMap.opacity=!0),r.center.isError||r.radianAngle.isError||r.width.isError||r.height.isError||r.opacity.isError?(n.variables=t.getSliderVariables(e,r),n):(n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],n.dimensions.opacity=[],a.List.eachArgs(e,[r.center,r.radianAngle,r.width,r.height,r.opacity],function(e){var t=e[0].asValue(),r=+e[1].asValue(),i=Math.atan2(Math.sin(r),Math.cos(r));n.dimensions.x.push(+t[0]),n.dimensions.y.push(+t[1]),n.dimensions.radianAngle.push(i),n.dimensions.width.push(+e[2].asValue()),n.dimensions.height.push(+e[3].asValue()),n.dimensions.opacity.push(Math.max(0,Math.min(1,e[4].asValue())))}),(e.graphingEnabled()?t.getGraphMode(e,r):i.NONE)!==i.NONE&&(n.is_graphable=!0),r.moveStrategy&&(n.move_strategy=r.moveStrategy),n)}var i=e("core/types/graphmode"),a=e("parsenodes"),o=e("core/lib/label"),s=e("core/math/types"),u=e("core/math/distribution-spec").getFunctionSpecFromTree,c=function(){return{operator:"=",variables:[]}},l=function(e,t,l){if(t.isTable)return r(e,t,l);if(t.isImage)return n(e,t,l);var p=c();if(l.isError&&(!(t instanceof a.FunctionDefinition)||l.blocksExport))return p.error=l.getError(),p.variables=t.getSliderVariables(e,l),p.is_single_identifier=t instanceof a.Identifier,p;l.moveStrategy&&(p.move_strategy=l.moveStrategy,p.default_drag_mode=l.defaultDragMode),t.isInequality()&&(p.is_inequality=!0),p.operator=t.getOperator(),l instanceof a.SolvedEquation?!0!==l._expression.asValue()&&!1!==l._expression.asValue()&&(p.assignment=l._symbol):t instanceof a.Assignment&&(p.assignment=t._symbol);var f=e.graphingEnabled()?t.getGraphMode(e,l):i.NONE;if(f!==i.NONE){p.is_graphable=!0,p.expression_type=t.getExpressionType(f,l.valueType),l.isShadeBetween()&&(p.is_shade_between=!0);var h=t.tableInfo(e,l);h&&(p.is_tableable=!0,p.table_info=h)}s.isList(l.valueType)&&(p.is_concrete_list=!0),p.variables=p.is_graphable?[]:t.getSliderVariables(e,l),p.is_single_identifier=t instanceof a.Identifier,l.isConstant&&(p.constant_value=l.asValue());var d=l.getEvaluationInfo();if(!d||"="!==p.operator||t.isConstant||t.isFunction||l.valueType===s.Bool||l.valueType===s.ListOfBool||t instanceof a.Equation||t instanceof a.And||(p.is_evaluable=!0,p.zero_values=d),l instanceof a.OptimizedRegression){var m={};for(var y in l.parameters)l.parameters.hasOwnProperty(y)&&(m[o.identifierToLatex(y)]=+l.parameters[y].asValue());p.is_regression=!0,p.regression={parameters:m,residualVariable:o.identifierToLatex(l.residualVariable),residualSuggestionId:l.residualSuggestionId,shouldSuggestLogMode:l.shouldSuggestLogMode,isLinear:l.isLinear,statistics:l.statistics,parameterWarning:l.parameterWarning}}var g=u(t);return g&&g.discrete&&(p.is_discrete_distribution=!0),p};return l.default=c,l}),define("core/math/statementanalysis",["require","core/math/evaluationstate","pjs","core/types/graphmode","core/math/workerconfig"],function(e){"use strict";var t=e("core/math/evaluationstate"),r=e("pjs"),n=e("core/types/graphmode"),i=e("core/math/workerconfig");return r(function(e){e.init=function(e,r,n){this.policy=e,this.rawTree=r,this.concreteTree=n,this.evaluationState=t(e,r,n)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!i.pointsOfInterest)return!1;var e=this.getGraphMode();return e===n.X||e===n.Y}})}),define("core/math/expression-types",["require","exports"],function(e,t){"use strict";function r(e,r){if(void 0===e)return{points:!1,lines:!1,fill:!1};var n=t.EXPRESSION_PROP_DEFAULTS[e];switch(e){case i.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case i.POINT_LIST:case i.DOTPLOT:return{points:void 0===r.points?n.points:r.points,lines:void 0===r.lines?n.lines:r.lines,fill:!1};case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:case i.HISTOGRAM:case i.BOXPLOT:case i.TTEST:case i.STATS:case i.CUBE:case i.SPHERE:return{points:!1,lines:void 0===r.lines?n.lines:r.lines,fill:void 0===r.fill?n.fill:r.fill};default:return e}}function n(e){if(void 0===e)return!1;switch(e){case i.SINGLE_POINT:case i.POINT_LIST:case i.PARAMETRIC:case i.POLYGON:case i.X_OR_Y:case i.POLAR:case i.IMPLICIT:return!0;case i.HISTOGRAM:case i.BOXPLOT:case i.DOTPLOT:case i.TTEST:case i.STATS:case i.CUBE:case i.SPHERE:return!1;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isClickableExpressionType=t.getReconciledExpressionProps=t.EXPRESSION_PROP_DEFAULTS=t.ExpressionType=void 0;var i;!function(e){e.X_OR_Y="X_OR_Y",e.SINGLE_POINT="SINGLE_POINT",e.POINT_LIST="POINT_LIST",e.PARAMETRIC="PARAMETRIC",e.POLAR="POLAR",e.IMPLICIT="IMPLICIT",e.POLYGON="POLYGON",e.HISTOGRAM="HISTOGRAM",e.DOTPLOT="DOTPLOT",e.BOXPLOT="BOXPLOT",e.TTEST="TTEST",e.STATS="STATS",e.CUBE="CUBE",e.SPHERE="SPHERE"}(i=t.ExpressionType||(t.ExpressionType={})),t.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},CUBE:{points:!1,lines:!1,fill:!0},SPHERE:{points:!1,lines:!1,fill:!0}},t.getReconciledExpressionProps=r,t.isClickableExpressionType=n}),define("core/math/features/analyze",["require","underscore","parsenodes","core/math/statementanalysis","core/math/builtin","core/math/builtinframe","core/math/parsenode/builtinfunction","core/math/errormsg","core/math/comparators","core/math/types","core/types/graphmode","core/math/expression-types","core/math/distribution-spec","core/math/workerconfig"],function(e){"use strict";function t(e,t,r,n){if(n.isError)return u(e,r,n);var i=n.getDependencies();switch(n.valueType){case d.Distribution:case d.ListOfDistribution:case d.EmptyList:return u(e,r,n);case d.Point:case d.ListOfPoint:return i.length?e.validParametricVariables(i)?u(e,r,n):u(e,r,f.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(i)):u(e,r,n);case d.Number:case d.ListOfNumber:return 0===i.length?u(e,r,n):i.length<=e.dimensions()-1?e.validExpressionVariables(i)?u(e,r,n):u(e,r,f.equationRequired(e.implicitDependency(i)).setDependencies(i)):e.validImplicitVariables(i)?u(e,r,f.equationRequired().setDependencies(i)):u(e,r,f.tooManyVariables(r.getSliderVariables(e,n)).setDependencies(i));default:return u(e,r,f.parseError())}}function r(e){return p.pdf([e,s.FreeVariable("x")])}function n(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();return n.length?u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):u(e,this,this.tryGetConcreteTree(e,t))}function i(e){return function(t,r){var n=this.tryGetConcreteTree(t,r),i=n.getDependencies();if(i.length)return u(t,this,f.tooManyVariables(this.getSliderVariables(t,n)).setDependencies(i));var a=u(t,this,this.tryGetConcreteTree(t,r));if(!n.isError){a.evaluationState.expression_type=y.TTEST;var o=n.args.map(function(e){return e.asValue()});a.evaluationState.ttest_results=e.apply(null,o)}return a}}function a(e,t){return e.filter(function(e){return!t[e]})}var o=e("underscore"),s=e("parsenodes"),u=e("core/math/statementanalysis"),c=e("core/math/builtin"),l=e("core/math/builtinframe"),p=e("core/math/parsenode/builtinfunction"),f=e("core/math/errormsg"),h=e("core/math/comparators"),d=e("core/math/types"),m=e("core/types/graphmode"),y=e("core/math/expression-types").ExpressionType,g=e("core/math/distribution-spec").DistributionParameterDefaultsMap,v=e("core/math/workerconfig");s.Base.prototype.analyze=function(e,t){return u(e,this,this.tryGetConcreteTree(e,t))},s.FunctionCall.prototype.analyze=function(e,n){var i=this.tryGetConcreteTree(e,n);return!i.isError&&g[this._symbol]&&0===i.getDependencies().length&&(i=r(i).tryGetConcreteTree(e,n)),t(e,n,this,i)},s.Expression.prototype.analyze=function(e,r){return t(e,r,this,this.tryGetConcreteTree(e,r))},s.FunctionDefinition.prototype.analyze=function(e,t){if(l[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split("_")[0];if(p[r])return u(e,this,f.cannotRedefine(this._symbol,r));var n=this.tryGetConcreteTree(e,t);if(n.isError)return u(e,this,n);var i=this._argSymbols,a=n.getDependencies();if(-1!==a.indexOf(this._symbol))return u(e,this,f.selfReferentialFunction(this._symbol));var o=a.filter(function(e){return-1===i.indexOf(e)});return e.unplottablePolarFunction(this._symbol,a)?u(e,this,f.unplottablePolarFunction()):o.some(e.assignmentForbidden)?u(e,this,f.addArgumentsToDefinition(o,this._symbol,i).setDependencies(a)):o.length?u(e,this,f.tooManyVariables(this.getSliderVariables(e,n)).setDependencies(a)):u(e,this,n)},s.Assignment.prototype.analyze=function(e,t,n){var i=this._symbol;if(!e.validLHS(i))return u(e,this,f.invalidLHS(i));if(l[i])return this.asEquation().analyze(e,t);var a=this.tryGetConcreteTree(e,t);if(!a.isError&&this._expression instanceof s.FunctionCall&&g[this._expression._symbol]&&0===a.getDependencies().length&&(a=r(a).tryGetConcreteTree(e,t)),a.isError)return u(e,this,a);var o=a.getDependencies();if(this.isEquation(a))return this.asEquation().analyze(e,t);if(o.length>1){var c=this.getSliderVariables(e,a);return c.length?u(e,this,f.tooManyVariables(c).allowExport().setDependencies(o)):u(e,this,a)}var p=this.getMoveStrategy(e,t,a,n);if(p){var h=this.getDefaultDragMode(p);return u(e,this,s.MovablePoint(a.args,p,h))}return u(e,this,a)},s.Regression.prototype.analyze=function(e,t,r,n,i){return u(e,this,this.tryOptimize(e,t,r,n,i))},s.Polygon.prototype.analyze=n,s.Histogram.prototype.analyze=n,s.Object3D.prototype.analyze=n,s.DotPlot.prototype.analyze=n,s.BoxPlot.prototype.analyze=n,s.TTest.prototype.analyze=i(c.ttest),s.IndependentTTest.prototype.analyze=i(c.ittest),s.Stats.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t),n=r.getDependencies();if(n.length)return u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n));var i=u(e,this,this.tryGetConcreteTree(e,t));if(!r.isError){i.evaluationState.expression_type=y.STATS;var a=r.args.map(function(e){return e.asValue()});i.evaluationState.stats_results=c.stats.apply(null,a)}return i},s.Equation.prototype.analyze=s.BaseComparator.prototype.analyze=function(e,t){var r="="!==this.getOperator();if(!v.plotInequalities&&r)return u(e,this,f.inequalitiesDisabled());var n=this.trySolve(e,t);if(n.isError)return u(e,this,n);if(n instanceof s.SolvedEquation&&n.getDependencies().length){var i=n.getDependencies().concat(n._symbol);if(!e.validImplicitVariables(i))return u(e,this,f.invalidImplicitVariables().setDependencies(i))}return this.getGraphMode(e,n)!==m.IMPLICIT||e.validImplicitVariables(n.getDependencies())?u(e,this,n):u(e,this,f.invalidImplicitVariables().setDependencies(n.getDependencies()))},s.DoubleInequality.prototype.analyze=function(e,t){if(!v.plotInequalities)return u(e,this,f.inequalitiesDisabled());var r=this.tryGetConcreteTree(e,t);if(r.isError)return u(e,this,r);var n=r.getDependencies();return h.table[this._operators[0]].direction!==h.table[this._operators[1]].direction?u(e,this,f.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(n)?n.length>2?u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):-1!==r._expressions[0].getDependencies().indexOf(r._symbol)||-1!==r._expressions[1].getDependencies().indexOf(r._symbol)?u(e,this,f.complicatedDoubleInequality().setDependencies(n)):u(e,this,r):u(e,this,f.invalidDoubleInequalityVariables().setDependencies(n))},s.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return u(e,this,r);var n=r.getDependencies();return n.length?e.validDoubleInequalityVariables(n)?u(e,this,f.complicatedDoubleInequality().setDependencies(n)):u(e,this,f.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(n)):u(e,this,r)},s.OrderedPair.prototype.analyze=function(e,r,n){var i=this.tryGetConcreteTree(e,r);if(i.isError)return u(e,this,i);var a=this.getMoveStrategy(e,r,i,n);if(a){var o=this.getDefaultDragMode(a);return u(e,this,s.MovablePoint(i.args,a,o))}return t(e,r,this,i)},s.Table.prototype.analyze=function(e,t){for(var r=Object.create(t),n=[],i=0;i<this.columns.length;i++){var o=this.columns[i].analyze(e,r,t);if(0===i&&(o.concreteTree.isIndependent?e.validFirstColumnVariable(o.concreteTree.header._symbol)?o.concreteTree.header._symbol:o=u(e,this.columns[i],f.invalidFirstTableColumn()):o=u(e,this.columns[i],f.invalidDependentFirstTableColumn())),o.concreteTree.isIndependent)o.rawTree.exportToLocal(o.concreteTree,r);else if(!o.concreteTree.isError){var c=o.concreteTree.header.getDependencies(),l=a(c,r);l.length&&(o=u(e,this.columns[i],f.tooManyVariables(l).setDependencies(l)))}n.push(o.concreteTree)}var p=s.Table(n),h=u(e,this,p);return h.evaluationState.is_graphable=!0,h},s.TableColumn.prototype.analyze=function(e,t,r){var n=this.header.tableError();if(n)return u(e,this,f.invalidTableHeader(n));var i=this.tryGetConcreteTree(e,t,r);if(i.isError)return u(e,this,i);if(i.header.isError)return u(e,this,i.header);if(i.values.isError)return u(e,this,i.values);for(var a=0;a<i.values.length;a++)if(!i.values[a].isError){var o=this.values[a]&&this.values[a].tableError();if(o)i.values[a]=f.invalidTableEntry(o);else{var s=i.values[a].getDependencies();s.length&&(i.values[a]=f.tooManyVariables(s).setDependencies(s))}}return u(e,this,i)},s.Image.prototype.analyze=function(e,t,r){var n=this.tryGetConcreteTree(e,t);if(n.radianAngle.isError||n.center.isError||n.width.isError||n.height.isError||n.opacity.isError)return u(e,this,n);var i=n.center.getDependencies(),a=n.radianAngle.getDependencies(),o=n.width.getDependencies(),c=n.height.getDependencies(),l=n.opacity.getDependencies();return i.length||a.length||o.length||c.length||l.length?u(e,this,s.Image({center:i.length?f.tooManyVariables(a).setDependencies(i):n.center,radianAngle:a.length?f.tooManyVariables(a).setDependencies(a):n.radianAngle,width:o.length?f.tooManyVariables(o).setDependencies(o):n.width,height:c.length?f.tooManyVariables(c).setDependencies(c):n.height,opacity:l.length?f.tooManyVariables(l).setDependencies(l):n.opacity})):(n.moveStrategy=this.getMoveStrategy(e,t,n,r),u(e,this,n))},s.Slider.prototype.analyze=function(e,t){var r,n=this.tryGetConcreteTree(e,t),i=n.sliderInfo;if(i.missingVars.length){var a=o.unique(i.missingVars);r=u(e,this,f.tooManyVariables(e.sliderVariables(a)).setDependencies(a).allowExport())}else r=u(e,this,n);var s=r.evaluationState;if(v.sliders){s.assignment=i.exportedSymbol,s.slider_min_number=i.values.min,s.slider_max_number=i.values.max,s.slider_step_number=i.values.step,s.slider_min_valid=i.valids.min,s.slider_max_valid=i.valids.max,s.slider_step_valid=i.valids.step;var c=s.slider_min_valid&&s.slider_max_valid&&s.slider_step_valid;s.is_slider=!0,s.raw_slider_latex=this.getInputString(),s.is_slidable=c,s.is_animatable=s.is_slidable&&!s.is_graphable,i.errMsg&&(s.error=i.errMsg.getError())}return delete s.is_evaluable,delete s.zero_values,r}}),define("core/math/features/analyzeFourFunction",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/parsenode/builtinfunction","core/math/builtinconstants"],function(e){"use strict";function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("core/math/statementanalysis"),i=e("core/math/errormsg"),a=e("core/math/parsenode/builtinfunction"),o=e("core/math/builtinconstants");r.Base.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeFourFunction=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var s=r.getDependencies();if(s.length>0){var u,c=s[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):o.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeFourFunction=t,r.DoubleInequality.prototype.analyzeFourFunction=t,r.BaseComparator.prototype.analyzeFourFunction=t,r.Regression.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeFourFunction=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("core/math/features/analyzeScientific",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/builtinframe"],function(e){"use strict";function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("core/math/statementanalysis"),i=e("core/math/errormsg"),a=e("core/math/builtinframe");r.Base.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var a=r.getDependencies();return a.length>0?n(e,this,i.tooManyVariables(a)):n(e,this,r)},r.Assignment.prototype.analyzeScientific=function(e,t){var r=this._symbol;if(a[r])return n(e,this,i.cannotRedefine(r));var o=this.tryGetConcreteTree(e,t);if(o.isError)return n(e,this,o);var s=o.getDependencies();return this.isEquation(o)?n(e,this,i.equationsUnsupported()):s.length>0?n(e,this,i.tooManyVariables(s)):n(e,this,o)},r.FunctionDefinition.prototype.analyzeScientific=function(e,t){if(a[this._symbol])return n(e,this,i.cannotRedefine(this._symbol));var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var o=this._argSymbols,s=r.getDependencies();if(-1!==s.indexOf(this._symbol))return n(e,this,i.selfReferentialFunction(this._symbol));var u=s.filter(function(e){return-1===o.indexOf(e)});return u.length?n(e,this,i.addArgumentsToDefinition(u,this._symbol,o)):n(e,this,r)},r.Equation.prototype.analyzeScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeScientific=t,r.DoubleInequality.prototype.analyzeScientific=t,r.BaseComparator.prototype.analyzeScientific=t,r.Regression.prototype.analyzeScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("core/math/features/analyzeSingleExpressionScientific",["require","parsenodes","core/math/statementanalysis","core/math/errormsg","core/math/parsenode/builtinfunction","core/math/builtinconstants"],function(e){"use strict";function t(e,t){return n(e,this,i.inequalitiesUnsupported())}var r=e("parsenodes"),n=e("core/math/statementanalysis"),i=e("core/math/errormsg"),a=e("core/math/parsenode/builtinfunction"),o=e("core/math/builtinconstants");r.Base.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);return r.isError?n(e,this,r):n(e,this,i.parseError())},r.Expression.prototype.analyzeSingleExpressionScientific=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return n(e,this,r);var s=r.getDependencies();if(s.length>0){var u,c=s[0];return u=a.hasOwnProperty(c)?i.functionUnsupported(c):o.hasOwnProperty(c)?i.constantUnsupported(c):i.variablesUnsupported(c),n(e,this,u)}return n(e,this,r)},r.Assignment.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.assignmentsUnsupported())},r.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.functionDefinitionsUnsupported())},r.Equation.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.equationsUnsupported())},r.And.prototype.analyzeSingleExpressionScientific=t,r.DoubleInequality.prototype.analyzeSingleExpressionScientific=t,r.BaseComparator.prototype.analyzeSingleExpressionScientific=t,r.Regression.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.regressionsUnsupported())},r.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,t){return n(e,this,i.pointsUnsupported())}}),define("core/lib/dragmode",["require","exports"],function(e,t){"use strict";function r(e){return e?"none"===e[0].type&&"none"===e[1].type?i.NONE:"none"===e[1].type?i.X:"none"===e[0].type?i.Y:i.XY:i.NONE}function n(e,t){var n=r(t);switch(e){case i.NONE:return i.NONE;case i.AUTO:case i.XY:return n;case i.X:return n===i.X||n===i.XY?i.X:i.NONE;case i.Y:return n===i.Y||n===i.XY?i.Y:i.NONE;default:return i.NONE}}Object.defineProperty(t,"__esModule",{value:!0}),t.reconcileDragMode=t.DragMode=void 0;var i;!function(e){e.NONE="NONE",e.X="X",e.Y="Y",e.XY="XY",\ne.AUTO="AUTO"}(i=t.DragMode||(t.DragMode={})),t.reconcileDragMode=n}),define("core/math/features/getgraphmode",["require","parsenodes","core/types/graphmode","core/lib/dragmode","core/lib/dragmode","core/math/types"],function(e){"use strict";function t(e,t){var r;return r=e&&e.hasOwnProperty("dragMode")?e.dragMode===u.AUTO?t.defaultDragMode:e.dragMode:t.defaultDragMode,s(r,t.moveStrategy)}function r(e,r){var n=r.getDependencies();switch(r.valueType){case c.Point:case c.ListOfPoint:return r.isMovablePoint&&t(this.userData,r)!==u.NONE?o.XYPOINT_MOVABLE:0===n.length?o.XYPOINT:e.validParametricVariables(n)?2===e.dimensions()?o.PARAMETRIC:o.PARAMETRIC_CURVE_3D:o.NONE;case c.Number:case c.ListOfNumber:return 2===e.dimensions()&&1===n.length?o.Y:3===e.dimensions()&&2===n.length?o.Z_3D:o.NONE;default:return o.NONE}}function n(e,t){var r=t._expression.getDependencies();if(r.length>1)return o.NONE;if(t._expression.valueType!==c.Number&&t._expression.valueType!==c.ListOfNumber)return o.NONE;var n=t._symbol;return e.graphMode(n,r)}function i(e,t){return t.isError?o.NONE:o.VISUALIZATION}var a=e("parsenodes"),o=e("core/types/graphmode"),s=e("core/lib/dragmode").reconcileDragMode,u=e("core/lib/dragmode").DragMode,c=e("core/math/types");a.Base.prototype.getGraphMode=function(e,t){return o.NONE},a.Expression.prototype.getGraphMode=r,a.Equation.prototype.getGraphMode=a.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?o.NONE:t instanceof a.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):o.NONE:n(e,t):1===r.length||2===r.length?o.IMPLICIT:o.NONE},a.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},a.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof a.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var i=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:case c.EmptyList:switch(i.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):o.NONE;case 1:return t.valueType!==c.ListOfNumber||e.graphableListVariables(this._symbol,i[0])?this.isSlider?o.NONE:e.graphMode(this._symbol,i):o.NONE;case 2:return 3===e.dimensions()&&"z"===this._symbol?o.Z_3D:o.NONE;default:return o.NONE}break;default:return r.call(this,e,t)}},a.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return o.NONE;var r=e.graphMode(this._symbol,this._argSymbols),n=t.getDependencies();switch(t.valueType){case c.Number:case c.ListOfNumber:switch(n.length){case 0:return r;case 1:return n[0]!==this._argSymbols[0]?o.NONE:r;default:return o.NONE}break;default:return o.NONE}},a.Regression.prototype.getGraphMode=function(e,t){return this.isLhsSimple&&t.isModelValid?1!==t.model.getDependencies().length?o.NONE:o.Y:o.NONE},a.Polygon.prototype.getGraphMode=function(e,t){return t.isError?o.NONE:o.POLYGONFILL},a.Object3D.prototype.getGraphMode=function(e,t){return t.isError?o.NONE:o.OBJECT3D},a.Histogram.prototype.getGraphMode=i,a.DotPlot.prototype.getGraphMode=i,a.BoxPlot.prototype.getGraphMode=i,a.Image.prototype.getGraphMode=function(e,t){return this.userData.showPoints?this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?o.NONE:o.XYPOINT:o.NONE}}),define("core/math/features/getgraphinfo",["require","parsenodes","core/math/builtinframe","core/math/domaintypes","core/math/policy"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/builtinframe"),n=e("core/math/domaintypes"),i=e("core/math/policy").defaultPolicy;t.Base.prototype.getGraphInfo=function(e,t){var r,i,a=t.getDependencies();switch(a.length){case 0:r=t.getLinearCoefficients(),i=t.boundDomain("x");break;case 1:i=t.boundDomain(a[0]),"known"===i.type&&(r=t.getLinearCoefficients());break;case 2:i=n.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:this.userData.color,pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:!!r,linearCoefficients:r,domainBound:i}},t.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.asValue(),0];case 1:if(this.polynomialOrder(e[0])>1)return;var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].tryGetConcreteTree(i,r).asValue():0,t[1]?+t[1].tryGetConcreteTree(i,r).asValue():0];default:return}},t.OrderedPair.prototype.getLinearCoefficients=function(){var e=this.args[0].getLinearCoefficients(),t=this.args[1].getLinearCoefficients();if(e&&t)return[e,t]}}),define("core/math/features/getMoveStrategy",["require","parsenodes","core/math/types","core/math/maybe-rational","core/math/builtinframe","core/math/functions"],function(e){"use strict";function t(e){return{type:"none",inputString:e}}function r(e){return{type:"updateCoordinate",inputString:e}}function n(e,t,r){return{type:"updateSlider",inputString:e,id:t,coefficients:r}}function i(e,t,r,n){return{type:"updateSliderNonlinear",inputString:e,id:t,initialValue:r.constant_value,min:r.slider_min_number,max:r.slider_max_number,compiled:n}}function a(e,t,r,n,i,a){for(var o=t.getDependencies(),s=0;s<o.length;s++)if(i[o[s]])return!1;for(var u=o.length-1;u>=0;u--){var c=o[u];if(!a[c]){var l=n[c];if(void 0!==l){var p=r[c];if(1===p.order){var f=p.tree,d=f.getPolynomialCoefficients(c),y=d[1]?d[1].getConcreteTree(e,h):m,g=d[0]?d[0].getConcreteTree(e,h):m;if(g.isConstant&&y.isConstant&&isFinite(g.asValue())&&isFinite(y.asValue())&&0!==y.asValue()){return{symbol:c,id:l,coefficients:[-g.asValue()/y.asValue(),1/y.asValue()]}}}}}}return!1}function o(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}function s(e,t){var r=o(e),n={};for(var i in t){var a=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&r[a]&&(n[a]=i)}return n}function u(e,t,r,n){for(var i=[],a=0;a<r.length;a++){var o=r[a],s={};i.push(s);for(var u=0;u<n.length;u++){var c=n[u],p=Object.create(t);p[c]=l.FreeVariable(c);var f=o.tryGetConcreteTree(e,p);f.isError?s[c]={tree:f,order:1/0}:s[c]={tree:f,order:f.polynomialOrder(c)}}}return i}function c(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];0!==t[i].order&&(r[i]=!0)}}var l=e("parsenodes"),p=e("core/math/types"),f=e("core/math/maybe-rational").maybeRational,h=e("core/math/builtinframe"),d=e("core/math/functions"),m=l.Constant(f(0,1));l.Base.prototype.getMoveStrategy=function(){},l.Assignment.prototype.getMoveStrategy=function(e,t,r,n){if(this._expression instanceof l.OrderedPair)return this._expression.getMoveStrategy(e,t,r,n)},l.OrderedPair.prototype.getMoveStrategy=function(e,o,f,h){if(f.valueType===p.Point&&0===f.getDependencies().length){for(var m=this.getDependencies(),y=s(m,h),g=Object.keys(y),v=this.args,b=u(e,o,v,g),x=[],_={},S={},M=0;M<2;M++){var E=v[M],D=E.getInputString();if(E.isConstant)x[M]=r(D);else{var w=a(e,E,b[M],y,_,S);w&&(x[M]=n(D,w.id,w.coefficients),_[w.symbol]=!0,c(g,b[M],S)),x[M]||(x[M]=t(D))}}if("none"!==x[0].type||"none"!==x[1].type)return x;if(1===g.length){var T,P=g[0],I=y[P];try{T=l.OrderedPair([b[0][P].tree,b[1][P].tree]).getCompiledFunction()}catch(e){return}return d.dehydrateCompiledFunction(T),[i(v[0].getInputString(),I,h[I].evaluationState,T),t(v[1].getInputString())]}}},l.Image.prototype.getMoveStrategy=function(e,i,o,l){if((!this.userData||!1!==this.userData.shouldGraph)&&"OrderedPair"===o.center.type&&o.center.args[0].isConstant&&o.center.args[1].isConstant&&o.width.isConstant&&o.height.isConstant&&o.radianAngle.isConstant&&o.opacity.isConstant){var p=this.getDependencies(),f=s(p,l),h=Object.keys(f),d=[this.width,this.height];"OrderedPair"===this.center.type&&d.push(this.center.args[0],this.center.args[1]);for(var m=[],y={},g={},v=u(e,i,d,h),b=[2,3,0,1],x=0;x<b.length;x++){var _=b[x],S=d[_];if(S){var M=S.getInputString();if(S.isConstant)m[_]=r(M);else{var E=a(e,S,v[_],f,y,g);E&&(m[_]=n(M,E.id,E.coefficients),y[E.symbol]=!0,c(h,v[_],g)),m[_]||(m[_]=t(M))}}else m[_]=t("")}if("none"!==m[0].type||"none"!==m[1].type||"none"!==m[2].type||"none"!==m[3].type)return m}}}),define("core/math/features/getDefaultDragMode",["require","parsenodes","core/lib/dragmode"],function(e){"use strict";var t=e("parsenodes"),r=e("core/lib/dragmode").DragMode;t.Base.prototype.getMoveStrategy=function(){return r.NONE},t.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?r.XY:"none"!==e[0].type?r.X:"none"!==e[1].type?r.Y:r.NONE},t.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?r.XY:"updateSlider"===e[0].type?r.X:"updateSlider"===e[1].type?r.Y:r.NONE}}),define("core/math/features/tableinfo",["require","parsenodes","core/math/types","core/lib/label","core/math/distribution-spec"],function(e){"use strict";var t=e("parsenodes"),r=t.List,n=e("core/math/types"),i=e("core/lib/label"),a=e("core/math/distribution-spec").getFunctionSpecFromTree;t.Base.prototype.tableInfo=function(e,t){return!1},t.Identifier.prototype.tableInfo=function(e,t){return!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}},t.Expression.prototype.tableInfo=function(e,t){var i=t.getDependencies();if(a(this))return!1;switch(t.valueType){case n.Point:case n.ListOfPoint:if(0!==i.length)return!1;if(t.isMovablePoint&&("updateSlider"===t.moveStrategy[0].type||"updateSlider"===t.moveStrategy[1].type))return!1;return{independent_variable:"x",dependent_column:"y",by_reference:!1,values:r.wrap(t).mapElements(e,function(e){return e.asArray()})};case n.Number:if(1!==i.length)return!1;var o=i[0];return!!e.validFirstColumnVariable(o)&&{independent_variable:o,dependent_column:this.getInputString(),by_reference:!1};default:return!1}},t.Assignment.prototype.tableInfo=function(e,r){if(r instanceof t.SolvedEquation)return!1;if(!this.getInputString().length)return!1;if(a(this))return!1;var n=r.getDependencies();if(n.length>1)return!1;var o;if(0===n.length){if(!e.tableableAsConstant(this._symbol))return!1;o=e.implicitIndependent(this._symbol)}else o=n[0];return!!e.validFirstColumnVariable(o)&&{independent_variable:o,dependent_column:e.assignmentForbidden(this._symbol)?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!e.assignmentForbidden(this._symbol)}},t.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this.getInputString().length)return!1;if(t.getDependencies().length>1)return!1;var r=this._argSymbols[0];if(!e.validFirstColumnVariable(r))return!1;var n=e.assignmentForbidden(this._symbol);return{independent_variable:r,dependent_column:n?i.trimLatex(this.getInputString().replace(/[^=]*=/,"")):i.trimLatex(this.getInputString().split("=")[0]),by_reference:!n}},t.BaseComparator.prototype.tableInfo=function(e,t){return!1},t.DoubleInequality.prototype.tableInfo=function(e,t){return!1},t.Equation.prototype.tableInfo=function(e,t){return!1}}),define("core/math/features/tableerror",["require","parsenodes","core/lib/worker-i18n"],function(e){"use strict";var t=e("parsenodes"),r=e("core/lib/worker-i18n");t.Base.prototype.tableError=function(){return this.isInequality()?r.t("Inequalities are not allowed."):!(this instanceof t.Expression)&&r.t("This type of expression is not allowed.")},t.List.prototype.tableError=function(){return r.t("Lists are not allowed.")},t.Equation.prototype.tableError=t.Assignment.prototype.tableError=function(){return r.t("Equations are not allowed.")},t.FunctionDefinition.prototype.tableError=function(){return r.t("Function definitions are not allowed.")},t.Regression.prototype.tableError=function(){return r.t("Regressions are not allowed.")}}),define("core/lib/deepCopy",["require","exports"],function(e,t){"use strict";function r(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(r);var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=r(t[i]));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}),define("core/types/styles",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineStyle=t.PointStyle=void 0;!function(e){e.POINT="POINT",e.OPEN="OPEN",e.CROSS="CROSS"}(t.PointStyle||(t.PointStyle={}));!function(e){e.SOLID="SOLID",e.DASHED="DASHED",e.DOTTED="DOTTED"}(t.LineStyle||(t.LineStyle={}))}),define("core/math/cdf-branches",["require","exports","tslib","core/lib/deepCopy","core/math/plotter","core/math/domaintypes","core/types/styles"],function(e,t,r,n,i,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeCDFTopBranches=void 0;var s=function(e,t){var n=e.segments,i=t.segments,a=r.__spreadArrays(n,i);return r.__assign(r.__assign({},e),{segments:a})},u=function(e){var t=e.viewState,r=e.graphInfo,s=e.compiled,u=e.derivative,c=e.bounds,l=e.included,p=e.discrete,f=n.default(r),h=a.intersectDomains(r.domainBound,a.knownDomain(c));if("known"===h.type)return f.domainBound=h,p?f.pointStyle=l?o.PointStyle.POINT:o.PointStyle.OPEN:f.lineStyle=o.LineStyle.SOLID,i.default.computeGraphData({graphInfo:f,viewState:t,compiled:s,derivative:u,discrete:p})};t.makeCDFTopBranches=function(e){var t,r=e.viewState,n=e.graphInfo,a=e.compiled,o=e.derivative,c=e.bounds,l=e.discrete,p=e.maxOverride,f=c[0],h=c[1],d=[];if(l){f=Math.ceil(f),h=Math.floor(h);var m=void 0!==p?p:1/0;if(f===-1/0&&h>=m)t=u({bounds:[f,m],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(t);else if(f===-1/0&&h<1/0)t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(t),d.push(u({bounds:[h+1,m],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}));else if(f>-1/0&&h>=m)t=u({bounds:[f,m],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(u({bounds:[-1/0,f-1],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l})),d.push(t);else{t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l});var y=u({bounds:[-1/0,f-1],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),g=u({bounds:[h+1,m],included:!1,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l});d.push(t);var v=void 0;y&&g&&(v=s(y,g),d.push(v))}}else t=u({bounds:[f,h],included:!0,viewState:r,graphInfo:n,compiled:a,derivative:o,discrete:l}),d.push(i.default.computeGraphData({viewState:r,graphInfo:n,compiled:a,derivative:o}));return{cdfTopBranch:t,topBranches:d}}}),define("core/math/copy-defined-pois",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){for(var t=[],r=[],n=e.length,i=0;i<n;i++)t.push(e[i][0]),r.push(e[i][1]);return{defined:{x:t,y:r}}};t.default=r}),define("core/types/opacity",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HIGH=t.DEFAULT=t.LOW=void 0,t.LOW=.2,t.DEFAULT=.4,t.HIGH=.8}),define("core/types/slider-loop-modes",["require","exports"],function(e,t){"use strict";function r(e){switch(e){case n.LOOP_FORWARD:return"dcg-icon-arrow-one-way";case n.LOOP_FORWARD_REVERSE:return"dcg-icon-arrow-two-way";case n.PLAY_ONCE:return"dcg-icon-arrow-once";case n.PLAY_INDEFINITELY:return"dcg-icon-arrow-infinite"}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSliderIcon=t.SliderLoopMode=void 0;var n;!function(e){e.LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",e.LOOP_FORWARD="LOOP_FORWARD",e.PLAY_ONCE="PLAY_ONCE",e.PLAY_INDEFINITELY="PLAY_INDEFINITELY"}(n=t.SliderLoopMode||(t.SliderLoopMode={})),t.getSliderIcon=r}),define("core/types/label-sizes",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelSize=void 0;!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(t.LabelSize||(t.LabelSize={}))}),define("core/types/label-orientations",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LabelOrientation=void 0;!function(e){e.DEFAULT="default",e.LEFT="left",e.RIGHT="right",e.ABOVE="above",e.BELOW="below"}(t.LabelOrientation||(t.LabelOrientation={}))}),define("core/lib/default-spec",["require","exports","underscore","core/lib/deepCopy"],function(e,t,r,n){"use strict";function i(e,t){var n={};for(var i in t)t.hasOwnProperty(i)&&(r.isEqual(e[i],t[i])||(n[i]=t[i]));return n}function a(e,t){var n=void 0,i={};for(var a in t)t.hasOwnProperty(a)&&(r.isEqual(e[a],t[a])||(i[a]=t[a],n=i));return n}function o(e,t){t||(t={});var r={};for(var i in e)e.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(r[i]=n.default(e[i]));for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.populateDefaults=t.stripDefaultsAndMaybeReturnUndefined=t.stripDefaults=void 0,t.stripDefaults=i,t.stripDefaultsAndMaybeReturnUndefined=a,t.populateDefaults=o}),define("core/graphing-calc/json/expression",["require","exports","tslib","core/types/opacity","core/types/styles","core/lib/dragmode","core/types/slider-loop-modes","core/types/label-sizes","core/types/label-orientations","core/lib/default-spec"],function(e,t,r,n,i,a,o,s,u,c){"use strict";function l(e){return r.__assign(r.__assign(r.__assign({},t.DEFAULTS),e),{slider:r.__assign(r.__assign({},t.SLIDER_DEFAULTS),e.slider),cdf:r.__assign(r.__assign({},t.CDF_DEFAULTS),e.cdf),vizProps:r.__assign(r.__assign({},t.VIZ_DEFAULTS),e.vizProps),clickableInfo:r.__assign(r.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})}function p(e){var n=c.stripDefaults(t.DEFAULTS,r.__assign(r.__assign({},e),{slider:c.stripDefaults(t.SLIDER_DEFAULTS,e.slider)})),i=c.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS,e.cdf);void 0===i?delete n.cdf:n.cdf=i;var a=c.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS,e.vizProps);void 0===a?delete n.vizProps:n.vizProps=a;var o=c.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===o?delete n.clickableInfo:n.clickableInfo=o,n}function f(e){return{type:"statement",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,fillOpacity:e.fillOpacity,lineOpacity:e.lineOpacity,lineWidth:e.lineWidth,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:"",max:e.slider.hardMax?e.slider.max:"",softMin:e.slider.hardMin?"":e.slider.min,softMax:e.slider.hardMax?"":e.slider.max,step:e.slider.step,isPlayingOnce:e.slider.isPlaying&&e.slider.loopMode===o.SliderLoopMode.PLAY_ONCE},parametricDomain:e.parametricDomain,polarDomain:e.polarDomain,cdf:e.cdf,vizProps:e.vizProps,clickableInfo:e.clickableInfo}}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.stripDefaults=t.inflateDefaults=t.SLIDER_DEFAULTS=t.DEFAULTS=t.DEFAULT_SLIDER_PERIOD=t.EditableLabelMode=t.CLICKABLEINFO_DEFAULTS=t.VIZ_DEFAULTS=t.CDF_DEFAULTS=void 0,t.CDF_DEFAULTS={show:!1,min:"",max:""},t.VIZ_DEFAULTS={breadth:"",axisOffset:"",alignedAxis:"x",binAlignment:"center",dotplotXMode:"exact",dotplotSize:"medium",histogramMode:""},t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}]};var h;!function(e){e.None="NONE",e.Math="MATH",e.Text="TEXT"}(h=t.EditableLabelMode||(t.EditableLabelMode={})),t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS={folderId:"",latex:"",color:"",showLabel:!1,label:"",cdf:t.CDF_DEFAULTS,vizProps:t.VIZ_DEFAULTS,clickableInfo:t.CLICKABLEINFO_DEFAULTS,hidden:!1,secret:!1,dragMode:a.DragMode.AUTO,labelSize:s.LabelSize.MEDIUM,labelOrientation:u.LabelOrientation.DEFAULT,verticalLabel:!1,suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:h.None,residualVariable:"",isLogModeRegression:!1,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,fillOpacity:""+n.DEFAULT,lineOpacity:"",lineWidth:"",regressionParameters:{},displayEvaluationAsFraction:!1,slider:{},polarDomain:{min:"",max:""},parametricDomain:{min:"",max:""},points:void 0,lines:void 0,fill:void 0},t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:o.SliderLoopMode.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.inflateDefaults=l,t.stripDefaults=p,t.computeParsableState=f}),define("core/math/features/graph",["require","underscore","parsenodes","core/math/plotter","core/types/graphmode","core/math/comparators","core/lib/dragmode","core/math/expression-types","core/math/types","core/math/builtin","core/math/cdf-branches","core/math/copy-defined-pois","core/math/distribution-spec","core/graphing-calc/json/expression","core/types/opacity"],function(e){"use strict";function t(e,t){for(var r=1/0,n=-1/0,i=1/0,a=-1/0,o=0;o<t.length;o++)for(var s=t[o],u=0;u<s.length;u+=2){var c=s[u],l=s[u+1];c<r&&(r=c),c>n&&(n=c),l<i&&(i=l),l>a&&(a=l)}if(isFinite(r)&&isFinite(i))return{type:e,xmin:r,ymin:i,xmax:n,ymax:a}}function r(e,t,r){var n={};r-=.5*t;for(var i=e.length-1;i>=0;i--){var a=e[i],o=Math.floor((a-r)/t);n[o]?n[o].data.push(a):n[o]={id:o,data:[a],min:o*t+r,max:o*t+r+t,center:o*t+r+t/2}}return n}function n(e){return Array.prototype.concat.apply([],e)}function i(e,t,r){return!!e&&(0===t&&0===r?"none"!==e[2].type||"none"!==e[3].type:0!==t&&0!==r?"none"!==e[0].type&&"none"!==e[1].type:0!==t?"none"!==e[0].type:0!==r&&"none"!==e[1].type)}var a=e("underscore"),o=e("parsenodes"),s=e("core/math/plotter").default,u=e("core/types/graphmode"),c=e("core/math/comparators"),l=e("core/lib/dragmode").DragMode,p=e("core/math/expression-types").getReconciledExpressionProps,f=e("core/math/types"),h=o.List,d=e("core/math/builtin"),m=e("core/math/cdf-branches").makeCDFTopBranches,y=e("core/math/copy-defined-pois").default,g=e("core/math/distribution-spec").getFunctionSpecFromTree,v=e("core/graphing-calc/json/expression").EditableLabelMode,b=e("core/types/opacity");o.Base.prototype._graph=function(e,t,r,i){function c(e,t){if(e){var r,n,i,a,o,s,u,c,l=e.discrete?"discreteDistribution":"continuousDistribution";if("binomialdist"===e.symbol)return n=t.args[1].asValue(),i=t.args.length>2?t.args[2].asValue():.5,r=d.binompdf(i*n,n,i),{type:l,xmin:0,xmax:n,ymin:0,ymax:r};if("poissondist"===e.symbol)return a=t.args[1].asValue(),r=Math.max(d.poissonpdf(Math.floor(a),a),d.poissonpdf(Math.ceil(a),a)),{type:l,xmin:0,xmax:2.5*a,ymin:0,ymax:r};if("normaldist"===e.symbol)return a=t.args.length>1?t.args[1].asValue():0,o=t.args.length>2?t.args[2].asValue():1,r=d.normalpdf(a,a,o),{type:l,xmin:a-2*Math.abs(o),xmax:a+2*Math.abs(o),ymin:0,ymax:r};if("uniformdist"===e.symbol)return s=t.args.length>1?t.args[1].asValue():0,u=t.args.length>2?t.args[2].asValue():1,a=(s+u)/2,c=u-s,r=d.uniformpdf(a,s,u),{type:l,xmin:s-c/3,xmax:u+c/3,ymin:0,ymax:r};if("tdist"===e.symbol){var p=t.args[1].asValue();return r=d.tpdf(0,p),{type:l,xmin:-3,xmax:3,ymin:0,ymax:r}}}}function l(e){var t=e.editableLabelMode;return t===v.Text||t===v.Math}if(t instanceof o.SolvedEquation)return this._graph(e,t._expression,r,i);var b,x,_,S,M,E=this,D=t.getExpressionType(i.graphMode,t.valueType),w=p(D,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(i.graphMode){case u.XYPOINT_MOVABLE:return b=[t.asArray()],_=this.userData.shouldGraph&&w.points,M=this.userData.showLabel&&!_,_?[{segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:l(this.userData),labels:this.computedLabels||[],poi:y(b)}]:M?[{segments:[b],graphMode:u.XYPOINT,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:l(this.userData),labels:this.computedLabels||[],poi:y(b)}]:[];case u.XYPOINT:return x=[],b=h.wrap(t).mapElements(e,function(e){return e.asArray()}),_=this.userData.shouldGraph&&w.points,S=this.userData.shouldGraph&&w.lines,M=this.userData.showLabel&&!_&&!S,(this.userData.showLabel||_)&&x.push({segments:[b],graphMode:i.graphMode,color:this.userData.color,style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:_,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:l(this.userData),nakedLabel:M,labels:this.computedLabels||[],poi:y(b)}),S&&x.push({segments:[b].map(n),graphMode:u.PARAMETRIC,color:this.userData.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity,poi:[]}),x;case u.PARAMETRIC:case u.PARAMETRIC_CURVE_3D:var T=this.userData,P=[];if(x=h.wrap(t).mapElements(e,function(t){if(0===t.getDependencies().length)return b=[t.asArray()],{segments:[b],graphMode:u.XYPOINT,color:T.color,style:T.lineStyle,lineWidth:E.metaData.computedLineWidth,lineOpacity:E.metaData.computedLineOpacity,poi:y(b)};var n=t.getCompiledFunction(),a=E.getGraphInfo(e,t);return a.graphMode=i.graphMode,a.domain={min:E.metaData.evaluatedDomainMin,max:E.metaData.evaluatedDomainMax},a.style=E.userData.lineStyle,a.lineWidth=E.metaData.computedLineWidth,a.lineOpacity=E.metaData.computedLineOpacity,s.computeGraphData({viewState:r,graphInfo:a,compiled:n})}),w.fill){if(x.forEach(function(e){P.push({segments:e.segments,color:T.color,fillOpacity:E.metaData.computedFillOpacity,graphMode:u.POLYGONFILL,poi:[]})}),!w.lines)return P;x=x.concat(P)}return x;case u.X:case u.Y:case u.IMPLICIT:case u.POLAR:case u.Z_3D:x=[];var I=t.valueType===f.Number;return h.wrap(t).eachElement(e,function(t){var n,o=i.graphMode===u.IMPLICIT||i.graphMode===u.Z_3D?t.getCompiledFunction(["x","y"]):t.getCompiledFunction(),l=g(E),p=l&&l.discrete,f=c(l,t);try{n=t.getCompiledDerivative()}catch(e){}var h=E.getGraphInfo(e,t);h.graphMode=i.graphMode,h.style=E.userData.lineStyle,h.lineWidth=E.metaData.computedLineWidth,h.lineOpacity=E.metaData.computedLineOpacity,i.graphMode===u.POLAR&&(h.domain={min:E.metaData.evaluatedDomainMin,max:E.metaData.evaluatedDomainMax,isExplicit:E.metaData.isExplicitDomain});var d=E.metaData.evaluatedCDFMin,v=E.metaData.evaluatedCDFMax;if(isNaN(d)||isNaN(v)||!I){var b={viewState:r,graphInfo:h,compiled:o,derivative:n,discrete:p};l&&"binomialdist"===l.symbol&&(b.maxOverride=t.args[1].asValue());var _=s.computeGraphData(b);f&&(_.boundingBox=f),_.fillSegments?x.push(a.omit(_,"fillSegments")):p?x.push({graphMode:u.XYPOINT,segments:[_.segments],showPoint:E.userData.shouldGraph,color:E.userData.color,style:_.style,boundingBox:f,poi:y(_.segments)}):x.push(_),h.graphMode===u.IMPLICIT&&"="!==h.operator&&x.push({graphMode:u.POLYGONFILL,segments:_.fillSegments,poi:{}})}else{var S={viewState:r,graphInfo:h,compiled:o,derivative:n,bounds:[d,v],discrete:p};l&&"binomialdist"===l.symbol&&(S.maxOverride=t.args[1].asValue());var M=m(S),D=M.cdfTopBranch,w=a.each(M.topBranches,function(e){e&&(e.boundingBox=f)});if(a.every(w,function(e){return void 0!==e}))if(p){if(x=w.map(function(e){return{graphMode:u.XYPOINT,segments:[e.segments],showPoint:E.userData.shouldGraph,color:E.userData.color,style:e.style,poi:y(e.segments),boundingBox:f}}),D&&D.segments.length){var T=[];D.segments.forEach(function(e){T.push([e[0],0,e[0],e[1]])}),x.push({graphMode:u.PARAMETRIC,segments:T,boundingBox:f,poi:{}})}}else if(x=w,D&&D.segments.length){var P,C,O,L;for(P=0;P<D.segments.length;P++)if(C=D.segments[P],C.length>=4){O=C[0];break}for(P=D.segments.length-1;P>=0;P--)if(C=D.segments[P],C.length>=4){L=C[C.length-2];break}if(isFinite(O)&&isFinite(L)){var A=s.polygonsFromSegments(D.segments,[[O,0,L,0]],D.graphMode);x.push({graphMode:u.POLYGONFILL,segments:A,poi:{}})}}}}),x;default:return!1}},o.Base.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t,r,n)},o.BaseComparator.prototype.graph=function(e,t,r){var n=this,i=this.getGraphInfo(e,t),a=i.graphMode;if(a===u.IMPLICIT)return this._graph(e,t,r,i);if(a===u.NONE)return!1;if(!(t instanceof o.SolvedEquation))return!1;var l=this.getOperator(),p=[],f=[],h=!0;t._expression.eachElement(e,function(e){p.push(e.getCompiledFunction());try{f.push(e.getCompiledDerivative())}catch(e){h=!1}}),h||(f=void 0);var d,m,y=[],g=[-1,0,0,1],v=p.length;for(m=0;m<v;m++){var b=this.getGraphInfo(e,t._expression.args[m]);b.graphMode=a,b.style=n.userData.lineStyle,i.graphMode===u.POLAR&&(b.domain={min:n.metaData.evaluatedDomainMin,max:n.metaData.evaluatedDomainMax,isExplicit:n.metaData.isExplicitDomain}),d=s.computeGraphData({viewState:r,graphInfo:b,compiled:p[m],derivative:f?f[m]:void 0}),d.operator=c.get(c.table[l].inclusive,g[m%4]),y.push(d)}for(m=0;m<v;m+=4){var x=s.polygonsFromSegments(y[m+1].segments,y[m+2].segments,a);y.push({graphMode:u.POLYGONFILL,segments:x,poi:{}})}return y},o.DoubleInequality.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);if(n.graphMode===u.NONE)return!1;var i=[],a=c.get(c.table[this._operators[0]].inclusive,0),o=c.get(c.table[this._operators[1]].inclusive,0),l=this.userData,p=this.metaData,f=this;return h.eachArgs(e,t._expressions,function(t){var c,h;t[0].userData=t[1].userData=l,t[0].metaData=t[1].metaData=p,c=f._graph(e,t[0],r,n)[0],c.operator=a,i.push(c),h=f._graph(e,t[1],r,n)[0],h.operator=o,i.push(h);var d=s.polygonsFromSegments(c.segments,h.segments,c.graphMode);i.push({graphMode:u.POLYGONFILL,segments:d,poi:{}})}),i},o.Regression.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return this._graph(e,t.model,r,n)},o.Polygon.prototype.graph=function(e,t,r){for(var i=this.getGraphInfo(e,t),a=t.args[0].asValue(),o=[],s=void 0===this.userData.lines||this.userData.lines,c=void 0===this.userData.fill||this.userData.fill,l=[],p=[],f=0;f<a.length;f++){var h=a[f][0],d=a[f][1];isFinite(h)&&isFinite(d)?(s||c)&&p.push([h,d]):(s||c)&&(p.length>1&&l.push(p),p=[])}if(l.length||p.length){p.push([a[0][0],a[0][1]]),l.push(p);var m=l.map(n);c&&o.push({segments:m,graphMode:u.POLYGONFILL,poi:[],color:i.color,fillOpacity:this.metaData.computedFillOpacity,style:i.style}),s&&o.push({segments:m,graphMode:u.PARAMETRIC,poi:[],color:i.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity})}return o};var x=function(e,t){var r=[];return h.wrap(t).eachElement(e,function(e){r.push(e.args.map(function(e){return e.asValue()}))}),r};o.Object3D.prototype.graph=function(e,t,r){var n=this.getGraphInfo(e,t);return[{segments:[x(e,t)],color:n.color,objectName:this._symbol,poi:[],graphMode:u.OBJECT3D}]},o.Histogram.prototype.graph=function(e,n,i){var a=this.getGraphInfo(e,n),o=n.args[0].asValue(),s=n.args[1].asValue(),c=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?s/2:0,l=r(o,s,c),p=1;this.userData.vizProps&&"density"===this.userData.vizProps.histogramMode?p=1/(o.length*s):this.userData.vizProps&&"relative"===this.userData.vizProps.histogramMode&&(p=1/o.length);var f=[],h=[];for(var d in l){var m=l[d],y=m.data.length;h.push([m.min,0*p,m.min,y*p,m.max,y*p,m.max,0*p]);var g=0;l[m.id+1]&&(g=l[m.id+1].data.length);var v=[m.min,0*p,m.min,y*p,m.max,y*p];g<y&&v.push(m.max,g*p),f.push(v)}var x=t("histogram",h);return x&&s&&(x.binWidth=s),[{segments:h,graphMode:u.POLYGONFILL,boundingBox:x,\npoi:[],color:a.color,fillOpacity:b.DEFAULT},{segments:f,graphMode:u.Y,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:a.color}]},o.DotPlot.prototype.graph=function(e,n,i){var a,o,s,c,l=this.getGraphInfo(e,n),p=n.args[1].asValue(),f=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?p/2:0,h=r(n.args[0].asValue(),p,f),d=!1,m=[];for(o in h){s=h[o];for(var g=s.data.length-1;g>=0;g--)s.center!==s.data[g]&&(d=!0)}if(this.userData.vizProps&&"exact"===this.userData.vizProps.dotplotXMode)for(o in h)for(s=h[o],c=s.data,c.reverse(),a=0;a<c.length;a++)m.push([c[a],a+1]);else for(o in h)for(s=h[o],c=s.data,a=0;a<c.length;a++)m.push([s.center,a+1]);var v=t("dotplot",m);return v&&p&&(v.ymin=0,v.xmin-=.5*p,v.xmax+=.5*p,v.binWidth=p),[{segments:[m],graphMode:u.XYPOINT,boundingBox:v,poi:y(m),color:l.color,style:this.userData.pointStyle,pointSize:this.userData.vizProps&&this.userData.vizProps.dotplotSize,showPoint:!0,needsDotplotXMode:d}]},o.BoxPlot.prototype.graph=function(e,r,n){var i=this.getGraphInfo(e,r),a=this.metaData.evaluatedAxisOffset,o=this.metaData.evaluatedBreadth,s=r.args[0].asValue();if(isNaN(o)||isNaN(a))return{};var c=Math.min.apply(null,s),l=Math.max.apply(null,s),p=d.quartile(s,1),f=d.quartile(s,2),h=d.quartile(s,3),m=a,y=m-o/2,g=m+o/2,v=o/10,b=[[p,y,h,y,h,g,p,g,p,y],[f,y,f,g],[p,m,c,m],[h,m,l,m],[c,m-v,c,m+v],[l,m-v,l,m+v]];if(this.userData.vizProps&&"y"===this.userData.vizProps.alignedAxis)for(var x=0;x<b.length;x++)for(var _=b[x],S=0;S<_.length;S+=2){var M=_[S];_[S]=_[S+1],_[S+1]=M}return[{segments:b,graphMode:u.PARAMETRIC,boundingBox:t("boxplot",b),poi:[],color:i.color}]},o.Table.prototype.isValueDraggable=function(e,t,r){if(!e.columns[t].isIndependent)return!1;var n=this.columns[t],i=n.values,a=i&&i[r];return!(!a||!isFinite(a.asValue())||0!==a._dependencies.length)},o.Table.prototype.graph=function(e,t,r){var i=[];if(t.columns[0].isError)return i;for(var a=t.columns[0],o=a.values,s=1;s<this.columns.length;s++){var c=t.columns[s];if(!c.isError){var p=this.columns[s].header.userData;if(!p.hidden){for(var f=p.dragMode,h=f===l.X||f===l.XY,d=f===l.Y||f===l.XY,m=!!p.points,g=!!p.lines,v=c.isDiscrete(a),b=g&&v,x=g&&!v,_=[],S=[],M=[],E=[],D=[],w=[],T=1/0,P=-1/0,I=1/0,C=-1/0,O=0;O<o.length;O++){var L=o[O],A=c.values[O];if(L&&A&&isFinite(L.asValue())&&isFinite(A.asValue())){var N=L.asValue(),F=A.asValue();if(m){var q=h&&this.isValueDraggable(t,0,O),R=d&&this.isValueDraggable(t,s,O);q||R?(M.push([N,F]),E.push({index:O,dragX:q,dragY:R})):S.push([N,F])}b&&w.push([N,F]),N<T&&(T=N),N>P&&(P=N),F<I&&(I=F),F>C&&(C=F)}else b&&(w.length>1&&D.push(w),w=[])}var V={type:"table",xmin:T,xmax:P,ymin:I,ymax:C};if(M.length&&_.push({graphMode:u.XYPOINT_MOVABLE,segments:[M],color:p.color,tableId:p.tableId,poi:y(M),movablePointInfo:E,boundingBox:V}),S.length&&_.push({segments:[S],graphMode:u.XYPOINT,showPoint:!0,poi:y(S),color:p.color,style:p.pointStyle,tableId:p.tableId,boundingBox:V}),(D.length||w.length)&&(D.push(w),_.push({segments:D.map(n),graphMode:u.PARAMETRIC,poi:[],color:p.color,style:p.lineStyle,tableId:p.tableId,boundingBox:V})),x){var B=this.columns[s].header.graph(e,t.columns[s].header,r);B.length&&Array.prototype.push.apply(_,B)}_.length&&(i[p.id]=_)}}}return i},o.Image.prototype.graph=function(e,t,r){var n=[];if(!("OrderedPair"===t.center.type&&t.center.args[0].isConstant&&t.center.args[1].isConstant&&t.radianAngle.isConstant&&t.width.isConstant&&t.height.isConstant&&t.opacity.isConstant))return n;for(var a=[],o=[],s=t.width.asValue()/2,c=t.height.asValue()/2,l=t.radianAngle.asValue(),p=-1;p<=1;p++)for(var f=-1;f<=1;f++){var h=[t.center.args[0].asValue()+p*s*Math.cos(l)+f*c*Math.sin(l),t.center.args[1].asValue()-p*s*Math.sin(l)+f*c*Math.cos(l)],d=i(t.moveStrategy,p,f);d&&(a.push(h),o.push([p,f]))}return n.push({segments:[a],scaleFactors:[o],graphMode:u.XYPOINT_MOVABLE,color:this.userData.color,style:this.userData.style,poi:y(a)}),n}}),define("core/math/features/elementAt",["require","parsenodes","core/math/builtinframe"],function(e){"use strict";function t(e,t){for(var r=0;r<this.length;r++)t(this.elementAt(e,r))}function r(e,t){for(var r=[],n=0;n<this.length;n++)r.push(t(this.elementAt(e,n)));return r}var n=e("parsenodes"),i=e("core/math/builtinframe");n.List.prototype.elementAt=function(e,t){return t=Math.floor(t),t>=0&&t<this.args.length?this.args[t]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(e,t){if((t=Math.floor(t))<0||t>=this.length)return n.Constant(NaN);for(var r={},a=0;a<this._replacedSymbols.length;a++)r[this._replacedSymbols[a]]=this._lists[a].elementAt(e,t);return this._expression.substitute(r).getConcreteTree(e,i)},n.Broadcast.prototype.asList=function(e){for(var t=[],r=0;r<this.length;r++)t.push(this.elementAt(e,r));return n.List(t)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=r,n.Broadcast.prototype.mapElements=r,n.OrderedPair.prototype.elementAt=function(e,t){switch(t){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}}}),define("core/lib/number-to-latex",["require","exports"],function(e,t){"use strict";function r(e){if("string"==typeof e)return e;if(void 0===e)return"";var t=e+"";return t=t.replace(/1e\\+?([-\\d]+)/,"10^{$1}"),t=t.replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")}function n(e){var t=e+"";if(/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(t)){var r=String(t).toLowerCase().split("e"),n=parseFloat(r[0]),i=parseInt(r[1],10),a=Math.abs(i),o=Math.abs(n).toString().split(".");if(i<0)t="0."+new Array(a).join("0")+o.join("");else{var s=o[1];s&&(a-=s.length),t=o.join("")+new Array(a+1).join("0")}n<0&&(t="-"+t)}return t}function i(e,t){void 0===t&&(t=2);var r=n(e),i=r.indexOf(".");if(-1===i)return r;for(var a,o=i+1;o<r.length;o++)if(a){if(r[o]!==a)break}else{if("0"!==r[o]&&"9"!==r[o])break;a=r[o]}return r.substr(0,Math.max(i+5,o+t))}Object.defineProperty(t,"__esModule",{value:!0}),t.numberToStatsConfidenceLatex=t.numberToDecimalString=void 0,t.default=r,t.numberToDecimalString=n,t.numberToStatsConfidenceLatex=i}),define("core/math/features/printLatex",["require","parsenodes","core/lib/label","core/lib/number-to-latex"],function(e){"use strict";function t(){return u.identifierToLatex(this._symbol)+" "}function r(e){switch(e){case">":return"\\\\gt ";case"<":return"\\\\lt ";case">=":return"\\\\ge ";case"<=":return"\\\\le ";case"=":return"="}}function n(e){return e.printLatex()}function i(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}function a(e){return e.isConstant&&!0===e.asValue()}function o(e){return e.isConstant&&e.isNaN()}var s=e("parsenodes"),u=e("core/lib/label"),c=e("core/lib/number-to-latex").default;s.Identifier.prototype.printLatex=t,s.FreeVariable.prototype.printLatex=t,s.Constant.prototype.printLatex=function(){return c(this.asValue())},s.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},s.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\\\% \\\\operatorname{of} "+this.args[1].printLatex()},s.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},s.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},s.Assignment.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},s.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},s.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},s.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+r(this.args[1])+this.args[2].printLatex()+r(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},s.And.prototype.printLatex=function(){if(!(this.args[0]instanceof s.BaseComparator&&this.args[1]instanceof s.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+r(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+r(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},s.NativeFunction.prototype.printLatex=i,s.TypedFunction.prototype.printLatex=i,s.ReducerFunction.prototype.printLatex=i,s.ParametrizedReducerFunction.prototype.printLatex=i,s.DoubleReducerFunction.prototype.printLatex=i,s.FunctionCall.prototype.printLatex=i,s.Distribution.prototype.printLatex=i,s.SeededFunctionCall.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this.args.slice(1).map(n).join(", ")+"\\\\right)"},s.DotAccess.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")"},s.DotAccessExponent.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")^{"+this.args[2].printLatex()+"}"},s.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return u.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args.map(n).join(", ")+"\\\\right)"}},s.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(n).join(", ")+"\\\\right]"},s.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(n).join(", ")+" ... "+this.args[1].args.map(n).join(", ")+"\\\\right]"},s.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},s.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},s.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},s.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},s.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},s.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)!"},s.Piecewise.prototype.printLatex=function(){var e=this;if(a(e.args[0]))return e.args[1].printLatex();for(var t=["\\\\left\\\\{"];;){if(a(e.args[0])){t.push(e.args[1].printLatex());break}if(t.push(e.args[0].printLatex(),": "),o(e.args[2])){t.push(e.args[1].printLatex());break}if(t.push(e.args[1].printLatex(),", "),!(e.args[2]instanceof s.Piecewise)){t.push(e.args[2].printLatex());break}e=e.args[2]}return t.push("\\\\right\\\\}"),t.join("")},s.FunctionDefinition.prototype.printLatex=function(){return u.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(u.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},s.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+u.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},s.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"},s.Polygon.prototype.printLatex=function(){return"\\\\polygon\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Histogram.prototype.printLatex=function(){return"\\\\histogram\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Object3D.prototype.printLatex=function(){return"\\\\"+this._symbol+"\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.DotPlot.prototype.printLatex=function(){return"\\\\dotplot\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.BoxPlot.prototype.printLatex=function(){return"\\\\boxplot\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.TTest.prototype.printLatex=function(){return"\\\\TTest\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.IndependentTTest.prototype.printLatex=function(){return"\\\\IndependentTTest\\\\left("+this.args.map(n).join(", ")+"\\\\right)"},s.Stats.prototype.printLatex=function(){return"\\\\Stats\\\\left("+this.args.map(n).join(", ")+"\\\\right)"}}),define("core/math/features/statistics",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),r=t.BuiltInFunction,n=e("core/math/maybe-rational").maybeRational,i=t.Constant(n(0,1)),a=t.Constant(n(1,1)),o=t.Constant(n(2,1)),s=t.Constant(n(1,2)),u=t.Constant(-1/0);r.normaldist.prototype.pdf=function(e){return r.normalpdf([e[0],this.args[0],this.args[1]])},r.normaldist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.normalcdf([t,n,this.args[0],this.args[1]])},r.normaldist.prototype.mean=function(){return this.args[0]},r.normaldist.prototype.median=function(){return this.args[0]},r.normaldist.prototype.stdev=function(){return r.abs([this.args[1]])},r.normaldist.prototype.var=function(){return t.Exponent([this.args[1],o])},r.normaldist.prototype.quantile=function(e){return t.Add([t.Multiply([r.invNorm(e),this.stdev()]),this.mean()])},r.normaldist.prototype.sample=function(e){return r.normalSample([e[0],this.args[0],this.args[1]])},r.tdist.prototype.pdf=function(e){return r.tpdf([e[0],this.args[0]])},r.tdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.tcdf([t,n,this.args[0]])},r.tdist.prototype.mean=function(){return i},r.tdist.prototype.median=function(){return i},r.tdist.prototype.quantile=function(e){return r.invT([e[0],this.args[0]])},r.tdist.prototype.sample=function(e){return r.tSample([e[0],this.args[0]])},r.tdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.tdist.prototype.var=function(){var e=this.args[0];return t.Piecewise([t.Comparator[">="]([e,o]),t.Divide([e,t.Subtract([e,o])]),t.Constant(NaN)])},r.poissondist.prototype.pdf=function(e){return r.poissonpdf([e[0],this.args[0]])},r.poissondist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.poissoncdf([t,n,this.args[0]])},r.poissondist.prototype.mean=function(){return this.args[0]},r.poissondist.prototype.median=function(){return r.invPoisson([s,this.args[0]])},r.poissondist.prototype.stdev=function(){return r.sqrt([this.args[0]])},r.poissondist.prototype.var=function(){return this.args[0]},r.poissondist.prototype.quantile=function(e){return r.invPoisson([e[0],this.args[0]])},r.poissondist.prototype.sample=function(e){return r.poissonSample([e[0],this.args[0]])},r.binomialdist.prototype.pdf=function(e){return r.binompdf([e[0],this.args[0],this.args[1]])},r.binomialdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.binomcdf([t,n,this.args[0],this.args[1]])},r.binomialdist.prototype.mean=function(){return t.Multiply([this.args[0],this.args[1]])},r.binomialdist.prototype.median=function(){return r.invBinom([s,this.args[0],this.args[1]])},r.binomialdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.binomialdist.prototype.var=function(){var e=this.args[0],r=this.args[1];return t.Multiply([e,t.Multiply([r,t.Subtract([a,r])])])},r.binomialdist.prototype.quantile=function(e){return r.invBinom([e[0],this.args[0],this.args[1]])},r.binomialdist.prototype.sample=function(e){return r.binomSample([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.pdf=function(e){return r.uniformpdf([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.cdf=function(e){var t,n;return 1===e.length?(t=u,n=e[0]):(t=e[0],n=e[1]),r.uniformcdf([t,n,this.args[0],this.args[1]])},r.uniformdist.prototype.mean=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),o])},r.uniformdist.prototype.median=function(){return t.Divide([t.Add([this.args[0],this.args[1]]),o])},r.uniformdist.prototype.stdev=function(){return r.sqrt([this.var()])},r.uniformdist.prototype.var=function(){return t.Divide([t.Exponent([t.Subtract([this.args[1],this.args[0]]),o]),t.Constant(n(12,1))])},r.uniformdist.prototype.quantile=function(e){return r.invUniform([e[0],this.args[0],this.args[1]])},r.uniformdist.prototype.sample=function(e){return r.uniformSample([e[0],this.args[0],this.args[1]])},t.List.prototype.sample=function(e){return t.ListAccess([this,t.Add([r.floor([t.Multiply([r.uniformSample([e[0],i,a]),t.Constant(n(this.length,1))])]),a])])}}),define("core/math/features/getExpressionType",["require","parsenodes","core/types/graphmode","core/math/expression-types","core/math/types"],function(e){"use strict";var t=e("parsenodes"),r=e("core/types/graphmode"),n=e("core/math/expression-types").ExpressionType,i=e("core/math/types");t.Base.prototype.getExpressionType=function(e,t){return e===r.X||e===r.Y?n.X_OR_Y:e===r.XYPOINT||e===r.XYPOINT_MOVABLE?t===i.Point?n.SINGLE_POINT:n.POINT_LIST:e===r.PARAMETRIC?n.PARAMETRIC:e===r.PARAMETRIC_CURVE_3D?n.PARAMETRIC:e===r.POLAR?n.POLAR:e===r.IMPLICIT?n.IMPLICIT:n.X_OR_Y},t.Polygon.prototype.getExpressionType=function(e,t){return n.POLYGON},t.Histogram.prototype.getExpressionType=function(e,t){return n.HISTOGRAM},t.Object3D.prototype.getExpressionType=function(e,t){return n.CUBE},t.DotPlot.prototype.getExpressionType=function(e,t){return n.DOTPLOT},t.BoxPlot.prototype.getExpressionType=function(e,t){return n.BOXPLOT}}),define("core/math/features/findLinearSubset",["require","parsenodes","core/math/maybe-rational"],function(e){"use strict";var t=e("parsenodes"),r=e("core/math/maybe-rational").maybeRational,n=t.Constant(r(0,1)),i=t.Constant(r(-1,0));t.Expression.prototype.findLinearSubset=function(e){for(var t=[],r=0;r<e.length;r++)t.push(!this.dependsOn(e[r]));return t},t.FreeVariable.prototype.findLinearSubset=function(e){for(var t=[],r=0;r<e.length;r++)t.push(!0);return t},t.Add.prototype.findLinearSubset=function(e){for(var t=[],r=this.args[0].findLinearSubset(e),n=this.args[1].findLinearSubset(e),i=0;i<e.length;i++)t.push(r[i]&&n[i]);return t},t.Subtract.prototype.findLinearSubset=t.Add.prototype.findLinearSubset,t.Negative.prototype.findLinearSubset=function(e){return this.args[0].findLinearSubset(e)},t.Multiply.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e).slice(),r=this.args[1].findLinearSubset(e).slice(),n=0,i=0,a=0;a<e.length;a++)t[a]=t[a]&&!this.args[1].dependsOn(e[a]),t[a]&&(n+=1),r[a]=r[a]&&!this.args[0].dependsOn(e[a]),r[a]&&(i+=1);return n>=i?t:r},t.Divide.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e),r=[],n=0;n<e.length;n++)r.push(t[n]&&!this.args[1].dependsOn(e[n]));return r},t.List.prototype.findLinearSubset=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(!0);for(var n=0;n<this.args.length;n++){var i=this.args[n].findLinearSubset(e);for(t=0;t<e.length;t++)r[t]=r[t]&&i[t]}return r},t.Broadcast.prototype.findLinearSubset=function(e){for(var r=this._replacedSymbols,a=this._expression,o=this._lists,s={},u=0;u<o.length;u++){for(var c=o[u].findLinearSubset(e),l=n,p=0;p<e.length;p++)c[p]?o[u].dependsOn(e[p])&&(l=t.Add([l,t.FreeVariable(e[p])])):l=t.Add([l,t.Exponent([t.FreeVariable(e[p]),i])]);s[r[u]]=l}return a.substitute(s).findLinearSubset(e)},t.Piecewise.prototype.findLinearSubset=function(e){for(var t=this.args[0],r=this.args[1].findLinearSubset(e),n=this.args[2].findLinearSubset(e),i=[],a=0;a<e.length;a++)i.push(!t.dependsOn(e[a])&&r[a]&&n[a]);return i}}),define("core/math/features/deriveRegressionRestrictions",["require","parsenodes","core/math/types","core/math/domaintypes"],function(e){"use strict";function t(e){for(var t=1/0,r=-1/0,n=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),r=Math.max(r,e[i]);return{min:t,max:r,length:n}}function r(e,t,r){if("known"!==r.type)return e;var n=i.And([i.Comparator["<="]([i.Constant(r.bounds[0]),i.FreeVariable(t)]),i.Comparator["<="]([i.FreeVariable(t),i.Constant(r.bounds[1])])]);return i.Multiply([e,i.Piecewise([n,i.Constant(1),i.Constant(NaN)])])}function n(e){for(var t,r=this.args[0],n=this.getDependencies(),a={},o=0;o<n.length;o++)if(e.listStatistics.hasOwnProperty(n[o])){if(void 0!==t)return{};t=n[o]}if(void 0===t)return{};if(1!==r.polynomialOrder(t))return{};var s=r.getPolynomialCoefficients(t),u=s[1],c=s[1].getDependencies();if(1!==c.length)return{};var l=c[0];if(1!==u.polynomialOrder(l))return{};var p=e.listStatistics[t],f=(p.max-p.min)/Math.min(p.length-1,31),h=Math.PI/f;return isFinite(h)?h<=0?{}:(a[l]=i.Piecewise([i.And([i.Comparator["<="]([i.Constant(0),u]),i.Comparator["<"]([u,i.Constant(h)])]),i.Constant(1),i.Constant(NaN)]).boundDomain(l),a):{}}var i=e("parsenodes"),a=e("core/math/types"),o=e("core/math/domaintypes");i.Base.prototype.deriveRegressionRestrictions=function(){return this},i.Broadcast.prototype.deriveRegressionRestrictions=function(){for(var e=this._replacedSymbols,n=this._expression,o=this._lists,s={},u=0;u<e.length;u++)0===o[u].getDependencies().length&&o[u].valueType===a.ListOfNumber&&(s[e[u]]=t(o[u].asValue()));var c,l=n._deriveRegressionRestrictions({listStatistics:s});for(c in l)if("known"!==l[c].type)return this;var p=n;for(c in l)p=r(p,c,l[c]);return i.Broadcast(e,[p].concat(o))},i.Base.prototype._deriveRegressionRestrictions=function(e){return{}},i.Expression.prototype._deriveRegressionRestrictions=function(e){for(var t={},r=0;r<this.args.length;r++){var n=this.args[r]._deriveRegressionRestrictions(e);for(var i in n)t[i]=t[i]?o.intersectDomains(t[i],n[i]):n[i]}return t},i.BuiltInFunction.sin.prototype._deriveRegressionRestrictions=n,i.BuiltInFunction.cos.prototype._deriveRegressionRestrictions=n,i.Exponent.prototype._deriveRegressionRestrictions=function(e){for(var t=this.args[0],r=this.args[1],n=t.getDependencies(),a=r.getDependencies(),o={},s=!1,u=0;u<a.length;u++)if(e.listStatistics.hasOwnProperty(a[u])){s=!0;break}if(!s)return{};if(1!==n.length)return{};var c=n[0];return e.listStatistics.hasOwnProperty(c)?{}:1!==t.polynomialOrder(c)?{}:(o[c]=i.Piecewise([i.Comparator[">="]([t,i.Constant(0)]),i.Constant(1),i.Constant(NaN)]).boundDomain(c),o)},i.Piecewise.prototype._deriveRegressionRestrictions=function(e){for(var t={},r=this.getDependencies(),n=0;n<r.length;n++)t[r[n]]=o.unknownDomain();return t}}),define("core/math/features/reparameterizeRegression",["require","parsenodes","core/math/types"],function(e){"use strict";function t(e){for(var t=1/0,r=-1/0,n=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),r=Math.max(r,e[i]);return{min:t,max:r,length:n}}function r(e,t){for(var r,n=e.getDependencies(),i=0;i<n.length;i++)if(t.hasOwnProperty(n[i])){if(void 0!==r)return;r=n[i]}return r}function n(e,t){for(var r=e.getDependencies(),n=0;n<r.length;n++)if(t[r[n]])return!0;return!1}function i(e,t){if(1===e.polynomialOrder(t)){var r=e.getPolynomialCoefficients(t),n=r[1],i=r[0],a=n.getDependencies();if(1===a.length){var o=a[0];if(1===n.polynomialOrder(o)){var s=i.getDependencies().filter(function(e){return e!==o});if(1===s.length){var u=s[0];if(1===i.polynomialOrder(u))return[i,n]}}}}}function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(void 0!==r)for(var n=r.getDependencies(),i=0;i<n.length;i++){var a=n[i];-1===e.indexOf(a)&&e.push(a)}}return e}function o(e,t,r){for(var n=0;n<e.length;n++)if(n!==r)for(var i=e[n],a=0;a<t.length;a++)for(var o=t[a].model.replacedDependencies,s=0;s<o.length;s++)if(i.dependsOn(o[s]))return!0;return!1}function s(e){var t,r,n;for(n=0;n<this.args.length;n++){var i=this.args[n]._reparameterizeRegression(e);if(i){if(void 0!==r)return;t=i,r=n}}if(void 0!==r&&!o(this.args,t,r)){var a=[];for(n=0;n<t.length;n++){var s=t[n];a.push({model:s.model,expression:this.copyWithArgs([].concat(this.args.slice(0,r),s.expression,this.args.slice(r+1)))})}return a}}function u(e,t){var n=e.model;if("exp"!==n.type)return e;if(n.shiftScale)return e;var o=e.expression,s="Negative"===o.type;if(s&&(o=o.args[0]),"BuiltInFunction[\'exp\']"!==o.type)return e;var u=o.args[0],c=r(u,t.listStatistics);if(void 0===c)return e;var l=i(u,c);if(!l)return e;var f=l[0],h=l[1],d=[u.tmpVar(),u.tmpVar()],m=t.listStatistics[c].max-t.listStatistics[c].min,y=.5*(t.listStatistics[c].max+t.listStatistics[c].min),g=p.BuiltInFunction.exp([p.Add([p.Multiply([p.FreeVariable(d[0]),p.Divide([p.Subtract([p.DummyIndex(c),p.Constant(y)]),p.Constant(m)])]),p.FreeVariable(d[1])])]);return s&&(g=p.Negative([g])),{model:{type:"exp",shiftScale:{mulNode:h,addNode:f,newParameterSymbols:d,stats:{range:m,midrange:y}},base:n.base,intercept:n.intercept,replacedDependencies:a(h,f,n.base&&n.base.node,n.intercept&&n.intercept.node)},expression:g}}function c(e,t,n){var o=e._symbol,s=e.args[0],u=r(s,n.listStatistics);if(void 0!==u){var c=i(s,u);if(c){var p=c[0],f=c[1],h=t.getDependencies();if(1===h.length){var d=h[0];if(!s.dependsOn(d)&&1===t.polynomialOrder(d)){var m=[e.tmpVar(),e.tmpVar(),e.tmpVar()];return[{model:{type:"trig",amplitudeNode:t,frequencyNode:f,phaseNode:p,newParameterSymbols:m,replacedDependencies:a(t,f,p)},expression:l(o,u,m)}]}}}}}function l(e,t,r){var n="cos"===e?r[0]:r[1],i="cos"===e?r[1]:r[0],a=r[2],o=p.Multiply([p.FreeVariable(a),p.DummyIndex(t)]);return("sin"===e?p.Add:p.Subtract)([p.Multiply([p.FreeVariable(n),p.BuiltInFunction.cos([o])]),p.Multiply([p.FreeVariable(i),p.BuiltInFunction.sin([o])])])}var p=e("parsenodes"),f=e("core/math/types");p.Base.prototype.reparameterizeRegression=function(){},p.Broadcast.prototype.reparameterizeRegression=function(){for(var e=this._replacedSymbols,r=this._lists,n={},i=0;i<e.length;i++)0===r[i].getDependencies().length&&r[i].valueType===f.ListOfNumber&&(n[e[i]]=t(r[i].asValue()));return this._reparameterizeRegression({listStatistics:n})},p.Base.prototype._reparameterizeRegression=function(e){},p.Expression.prototype._reparameterizeRegression=s,p.Exponent.prototype._reparameterizeRegression=function(e){var t=this.args[0],r=this.args[1],i=r.getDependencies(),a=t.getDependencies();if(n(r,e.listStatistics)){if(0===a.length){if(t.asValue()<0)return;return[{model:{type:"exp",replacedDependencies:[]},expression:p.BuiltInFunction.exp([p.Multiply([p.BuiltInFunction.ln([t]),r])])}]}if(1===a.length&&!e.listStatistics.hasOwnProperty(a[0])&&-1===i.indexOf(a[0])&&1===t.polynomialOrder(a[0])){var o=this.tmpVar();return[u({model:{type:"exp",base:{node:t,newParameterSymbols:[o]},replacedDependencies:t.getDependencies()},expression:p.BuiltInFunction.exp([p.Multiply([p.FreeVariable(o),r])])},e)]}}},p.BuiltInFunction.exp.prototype._reparameterizeRegression=function(e){if(void 0!==r(this.args[0],e.listStatistics))return[u({model:{type:"exp",replacedDependencies:[]},expression:this},e)]},p.Multiply.prototype._reparameterizeRegression=function(e){var t,r;if("BuiltInFunction[\'sin\']"===this.args[0].type||"BuiltInFunction[\'cos\']"===this.args[0].type)return c(this.args[0],this.args[1],e);if("BuiltInFunction[\'sin\']"===this.args[1].type||"BuiltInFunction[\'cos\']"===this.args[1].type)return c(this.args[1],this.args[0],e);var n;for(n=0;n<this.args.length;n++){var i=this.args[n]._reparameterizeRegression(e);if(i){if(void 0!==r)return;t=i,r=n}}if(void 0!==r&&!o(this.args,t,r)){var l=1===r?0:1,f=this.args[l];if(1!==t.length)return s.call(this,e);var h=t[0],d=h.model;if("exp"!==d.type||"BuiltInFunction[\'exp\']"!==h.expression.type||h.model.shiftScale)return s.call(this,e);var m=f.getDependencies();if(1!==m.length||1!==f.polynomialOrder(m[0])||e.listStatistics.hasOwnProperty(m[0]))return s.call(this,e);var y=this.tmpVar();return[{model:{type:"exp",replacedDependencies:[]},expression:this},u({model:{type:"exp",base:d.base,intercept:{node:f,newParameterSymbols:[y],sign:1},replacedDependencies:a(d.base&&d.base.node,f)},expression:p.BuiltInFunction.exp([p.Add([h.expression.args[0],p.FreeVariable(y)])])},e),u({model:{type:"exp",base:d.base,intercept:{node:f,newParameterSymbols:[y],sign:-1},replacedDependencies:a(d.base&&d.base.node,f)},expression:p.Negative([p.BuiltInFunction.exp([p.Add([h.expression.args[0],p.FreeVariable(y)])])])},e)]}}}),define("parser",["require","core/math/baseparser","core/math/features/getConcreteTree","core/math/features/getValueType","core/math/features/typeCheck","core/math/features/repr","core/math/features/scalarEvalExpression","core/math/features/constantcollapsedcopy","core/math/features/polynomialorder","core/math/features/polynomialcoefficients","core/math/features/extractconditions","core/math/features/piecewiseDependsOn","core/math/features/bounddomain","core/math/features/derivative","core/math/features/substitute","core/math/features/isImplicit","core/math/features/solve","core/math/features/analyze","core/math/features/analyzeFourFunction","core/math/features/analyzeScientific","core/math/features/analyzeSingleExpressionScientific","core/math/features/getgraphmode","core/math/features/getgraphinfo","core/math/features/getMoveStrategy","core/math/features/getDefaultDragMode","core/math/features/tableinfo","core/math/features/tableerror","core/math/features/graph","core/math/features/elementAt","core/math/features/printLatex","core/math/features/statistics","core/math/features/getExpressionType","core/math/features/findLinearSubset","core/math/features/deriveRegressionRestrictions","core/math/features/reparameterizeRegression"],function(e){"use strict";var t=e("core/math/baseparser");return e("core/math/features/getConcreteTree"),e("core/math/features/getValueType"),e("core/math/features/typeCheck"),e("core/math/features/repr"),e("core/math/features/scalarEvalExpression"),e("core/math/features/constantcollapsedcopy"),e("core/math/features/polynomialorder"),e("core/math/features/polynomialcoefficients"),e("core/math/features/extractconditions"),e("core/math/features/piecewiseDependsOn"),e("core/math/features/bounddomain"),e("core/math/features/derivative"),e("core/math/features/substitute"),e("core/math/features/isImplicit"),e("core/math/features/solve"),e("core/math/features/analyze"),e("core/math/features/analyzeFourFunction"),e("core/math/features/analyzeScientific"),e("core/math/features/analyzeSingleExpressionScientific"),e("core/math/features/getgraphmode"),e("core/math/features/getgraphinfo"),e("core/math/features/getMoveStrategy"),e("core/math/features/getDefaultDragMode"),e("core/math/features/tableinfo"),e("core/math/features/tableerror"),e("core/math/features/graph"),e("core/math/features/elementAt"),e("core/math/features/printLatex"),e("core/math/features/statistics"),e("core/math/features/getExpressionType"),e("core/math/features/findLinearSubset"),e("core/math/features/deriveRegressionRestrictions"),e("core/math/features/reparameterizeRegression"),t}),define("core/math/finddependencyorder",["require","core/math/builtinframe","underscore"],function(e){"use strict";function t(e,t,i){function a(e){g[e]=g[e]||{};var r,n=g[e];n.id=e,n.index=v,n.lowlink=v,b.push(n),n.instack=!0,v++;for(var i=t[e].getDependencies(),u=0;u<i.length;u++){var c=i[u];if(d.hasOwnProperty(c))for(var l=d[c],p=0;p<l.length;p++){\nvar f=l[p];g.hasOwnProperty(f)?(r=g[f],r.instack&&(n.lowlink=Math.min(n.lowlink,r.index))):(a(f),r=g[f],n.lowlink=Math.min(n.lowlink,r.lowlink))}}if(n.lowlink===n.index)if(r=b.pop(),r.instack=!1,r===n)o(n);else{for(var h=[r];;)if(r=b.pop(),r.instack=!1,h.push(r),r===n)break;s(h)}}function o(e){x.push(e.id)}function s(r){var i,a,o=[];for(a=r.length-1;a>=0;a--){i=r[a];var s=t[i.id].getLegalExports(e);Array.prototype.push.apply(o,s),o.push(s[0]),x.push(i.id)}for(o=n.unique(o),o.sort(),a=0;a<o.length;a++)y[o[a]]=o}var u,c,l,p,f,h=[],d={},m={},y={},g={},v=0,b=[],x=[];if(!i){i=[];for(u in t)t.hasOwnProperty(u)&&i.push(u)}for(u in t)if(t.hasOwnProperty(u)){for(f=t[u].exportPenalty||0;h.length<f+1;)h.push([]);h[f].push(u)}for(f=0;f<h.length;f++){var _={};for(c=0;c<h[f].length;c++){u=h[f][c];var S=t[u].getLegalExports(e);for(l=0;l<S.length;l++)p=S[l],r[p]||d[p]||(_[p]=_[p]||[],_[p].push(u),_[p].length>1&&(m[p]=!0))}for(p in _)d[p]=_[p]}for(c=0;c<i.length;c++)g.hasOwnProperty(i[c])||a(i[c]);return{resolved:x,multiplyDefined:m,cyclicallyDefined:y}}var r=e("core/math/builtinframe"),n=e("underscore");return t}),define("core/math/findIntersections",["require","core/types/graphmode","./plotter","parsenodes","core/math/distance"],function(e){"use strict";function t(e){for(var t=[],r=0;r<e;r++)t[r]={x:[],y:[],intersects:[]};return t}function r(e,t,r,n){return r===l.X&&n===l.X||r===l.Y&&n===l.Y?function(r){return t(r)-e(r)}:(r===l.X&&n===l.Y||r===l.Y&&n===l.X)&&function(r){return r-t(e(r))}}function n(e,t){t instanceof f.SolvedEquation?t=t._expression:t instanceof f.OptimizedRegression&&(t=t.model);var r=[],n=[];return t instanceof f.DoubleInequality?f.List.eachArgs(e,t._expressions,function(e){r.push(e[0].getCompiledFunction()),n.push(e[0].isConstant&&e[1].isNaN()),r.push(e[1].getCompiledFunction()),n.push(e[1].isConstant&&e[1].isNaN())}):f.List.wrap(t).eachElement(e,function(e){r.push(e.getCompiledFunction()),n.push(e.isConstant&&e.isNaN())}),{functions:r,skipIntersecting:n}}function i(e,t){var r=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var a=e[i],o=n(a.policy,a.concreteTree);r.push({id:i,graphMode:a.getGraphMode(),functions:o.functions,skipIntersecting:o.skipIntersecting})}return r}function a(e,t){e.intersects=Array(e.x.length);for(var r=0;r<e.x.length;r++)e.intersects[r]=t}function o(e,t){if(t===l.X){var r=e.y;e.y=e.x,e.x=r}}function s(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function u(e,t,r){var n=p.sampleXY(e,t),i=n.poi.zeros,a=n.poi.extrema,o=[],s=0,u=0;for(s=0;s<i.x.length;s++){for(;u<a.x.length&&a.x[u]<i.x[s];u++)h.approx(a.y[u],0)&&o.push(a.x[u]);o.push(i.x[s])}for(;u<a.x.length;u++)h.approx(a.y[u],0)&&o.push(a.x[u]);return{x:o,y:o.map(r)}}function c(e,c,l){var f=e[l],h=f.getGraphInfo(),m=f.getGraphMode(),y=n(f.policy,f.concreteTree),g=t(y.functions.length),v=i(e,l);if(!v)return g;for(var b=0,x=0;x<v.length;x++)for(var _=v[x],S=0;S<y.functions.length;S++)if(!y.skipIntersecting[S])for(var M=y.functions[S].fn,E=p.computeDomain(c,h,M),D=0;D<_.functions.length;D++)if(!v[x].skipIntersecting[D]){var w=_.functions[D].fn,T=r(M,w,m,_.graphMode);if(T){var P=u(T,E,M);if((b+=P.x.length)>d)return t(y.functions.length);a(P,_.id),o(P,m),s(g[S],P)}}return g}var l=e("core/types/graphmode"),p=e("./plotter").default,f=e("parsenodes"),h=e("core/math/distance"),d=100;return{findIntersections:c,findIndicatorZeros:u}}),define("core/math/interpolatedlabel",["require","exports","parsenodes","core/math/types","core/lib/label","./policy"],function(e,t,r,n,i,a){"use strict";function o(e){return!(e.length<2)&&("`"===e[0]&&"`"===e[e.length-1])}function s(e){for(var t,r=["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}"],n="\\\\$({"+r.join("})|\\\\$({")+"})",i=new RegExp(n,"g"),a=[],o=0,s=0;t=i.exec(e);){s=t.index,s>o&&a.push(e.substr(o,s-o));var u=t[0],c=u.replace(/[{}\\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");a.push({symbol:c,str:u}),o=t.index+u.length}return o<e.length&&a.push(e.substr(o)),{raw:e,parts:a}}function u(e,t){return t?"{"+i.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":i.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}function c(e,t,i){for(var s=[],c=o(e.raw),l=0,p=e.parts;l<p.length;l++){var f=p[l];if("string"==typeof f)s.push(f);else{var h=r.Identifier(f.symbol).tryGetConcreteTree(a.defaultPolicy,t);if(h.valueType===n.Number){var d=h.asValue();if("number"==typeof d){s.push(u(d,c));continue}}else if(h.valueType===n.ListOfNumber&&h.args[i]){var d=h.args[i].asValue();if("number"==typeof d){s.push(u(d,c));continue}}c?s.push("{?}"):s.push("?")}}return s.join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.interpolate=t.parse=t.isMathLabel=void 0,t.isMathLabel=o,t.parse=s,t.interpolate=c}),define("core/math/getCLSymbolMap",["require","exports","underscore","core/lib/label"],function(e,t,r,n){"use strict";function i(){var e={},t={},i={},a=[];for(var o in this.statements)if(this.statements.hasOwnProperty(o)){var s=this.statements[o];switch(s.type){case"Error":break;case"Regression":i[o]=[],a.push(o);break;default:var u=s.getLegalExports(this.policy);if(u){for(var c=0,l=u;c<l.length;c++){var p=l[c];s.exportPenalty>0?t[p]=o:e[p]=o}i[o]=r.difference(s.getDependencies(),s.getDummyDependencies(),u)}}}for(var f=0,h=a;f<h.length;f++){var o=h[f],s=this.statements[o],d=n.latexToIdentifier(s.userData.residualVariable);d&&(t[d]=o);for(var m=s.getDependencies().slice(),y={},p=void 0;p=m.pop();)if(!y[p]){y[p]=!0;var g=e[p]||t[p];g?(m.push.apply(m,i[g]),i[o].push(p)):t[p]=o}}return{exportMap:e,weakExportMap:t,dependencyMap:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCLSymbolMap=void 0,t.getCLSymbolMap=i}),define("core/types/line-width",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THICK=t.DEFAULT=t.THIN=void 0,t.THIN=1,t.DEFAULT=2.5,t.THICK=5}),define("core/math/policyFourFunction",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicySingleExpressionFourFunction=t.PolicyFourFunction=void 0;var r=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return"ans"!==e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]},e}();t.PolicyFourFunction=new r({singleExpression:!1}),t.PolicySingleExpressionFourFunction=new r({singleExpression:!0})}),define("core/math/policyScientific",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicySingleExpressionScientific=t.PolicyScientific=void 0;var r=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return this.singleExpression?"ans"!==e.slice(0,3):"tmp"===e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return this.singleExpression?["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]:["Sum","Product","Integral","Derivative","Piecewise"]},e}();t.PolicyScientific=new r({singleExpression:!1}),t.PolicySingleExpressionScientific=new r({singleExpression:!0})}),define("core/math/frameFourFunction",["require","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e){var t={};return e.additionalFunctions&&-1!==e.additionalFunctions.indexOf("sqrt")&&(t.sqrt=r.sqrt),t}var r=e("core/math/parsenode/builtinfunction");return{getFrame:t}}),define("core/math/frameScientific",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t={};return a.forEach(function(e){t[e]=n[e]}),o.forEach(function(r){e.replaceRoundWithReciprocal&&"round"===r||(t[r]=i[r])}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var n=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),a=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return t(a,n),t(o,i),{getFrame:r}}),define("core/math/frameSingleExpressionScientific",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t={};return a.forEach(function(e){t[e]=n[e]}),o.forEach(function(e){t[e]=i[e]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var n=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),a=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];return t(a,n),t(o,i),{getFrame:r}}),define("core/math/frameGraphing",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(!t.hasOwnProperty(n))throw new Error("Programming Error: key \'"+n+"\' does not exist in table. Must be one of:\\n"+Object.keys(t).join("\\n"))}}function r(e){var t,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);for(t in i)i.hasOwnProperty(t)&&(!0===e.restrictedFunctions&&-1!==a.indexOf(t)||!1===e.distributions&&-1!==o.indexOf(t)||(r[t]=i[t]));return e.trigAngleMultiplier&&(r.trigAngleMultiplier=e.trigAngleMultiplier),e.globalRandomSeed&&(r.globalRandomSeed=e.globalRandomSeed),e.initialEvaluation&&(r.initialEvaluation=e.initialEvaluation),r}var n=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),a=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov","distance","midpoint"],o=["erf","ttest","tscore","ittest","normaldist","tdist","poissondist","binomialdist","pdf","cdf","random","histogram","dotplot","boxplot"];return t(a,i),t(o,i),{getFrame:r}}),define("core/math/context",["require","pjs","underscore","./plotter","parser","core/math/parsenode/constant","core/math/parsenode/seed","core/math/parsenode/functioncall","core/math/parsenode/image","core/math/parsenode/slider","core/math/parsenode/table","core/math/parsenode/tablecolumn","core/math/parsenode/freevariable","core/math/finddependencyorder","core/math/errormsg","core/types/graphmode","core/math/workerconfig","./findIntersections","./interpolatedlabel","core/math/types","core/math/expression-types","core/math/expression-types","core/math/getCLSymbolMap","core/math/distribution-spec","core/math/maybe-rational","core/lib/number-to-latex","core/lib/label","core/math/functions","core/types/line-width","core/math/policyFourFunction","core/math/policyScientific","core/math/policyScientific","core/math/policyFourFunction","core/math/policyGraphing","core/math/policyGraphing","core/math/frameFourFunction","core/math/frameFourFunction","core/math/frameScientific","core/math/frameSingleExpressionScientific","core/math/frameGraphing","core/math/frameGraphing"],function(e){"use strict";function t(e){var t=e.rawTree.userData,r=e.rawTree.metaData;return t.cdf&&t.cdf.show&&r.distributionSpec}function r(e){var t=e.evaluationState.expression_type,r=e.rawTree.userData;return!(!r.clickableInfo||!r.clickableInfo.enabled)&&(!!e.rawTree.isImage||e.getGraphMode()!==v.XYPOINT_MOVABLE&&E(t))}function n(e,t){var r="id"+e;t=t||[];for(var n,i,a,o=0,s=t.length;o<s;o++)n=t[o],i=n[0],a=n[1],r+="::"+i+a;return r}var i=e("pjs"),a=e("underscore"),o=e("./plotter").default,s=e("parser"),u=e("core/math/parsenode/constant"),c=e("core/math/parsenode/seed"),l=e("core/math/parsenode/functioncall"),p=e("core/math/parsenode/image"),f=e("core/math/parsenode/slider"),h=e("core/math/parsenode/table"),d=e("core/math/parsenode/tablecolumn"),m=e("core/math/parsenode/freevariable"),y=e("core/math/finddependencyorder"),g=e("core/math/errormsg"),v=e("core/types/graphmode"),b=e("core/math/workerconfig"),x=e("./findIntersections").findIntersections,_=e("./interpolatedlabel"),S=e("core/math/types"),M=e("core/math/expression-types").ExpressionType,E=e("core/math/expression-types").isClickableExpressionType,D=e("core/math/getCLSymbolMap").getCLSymbolMap,w=e("core/math/distribution-spec"),T=e("core/math/maybe-rational").maybeRational,P=e("core/lib/number-to-latex").default,I=e("core/lib/label"),C=e("core/math/functions"),O=e("core/types/line-width"),L={fourFunction:e("core/math/policyFourFunction").PolicyFourFunction,scientific:e("core/math/policyScientific").PolicyScientific,singleExpressionScientific:e("core/math/policyScientific").PolicySingleExpressionScientific,singleExpressionFourFunction:e("core/math/policyFourFunction").PolicySingleExpressionFourFunction,graphing:e("core/math/policyGraphing").PolicyGraphing,graphing_3d:e("core/math/policyGraphing").PolicyGraphing3D},A={fourFunction:e("core/math/frameFourFunction"),singleExpressionFourFunction:e("core/math/frameFourFunction"),scientific:e("core/math/frameScientific"),singleExpressionScientific:e("core/math/frameSingleExpressionScientific"),graphing:e("core/math/frameGraphing"),graphing_3d:e("core/math/frameGraphing")};return i(function(e){function i(e,t){return e?"0"===e?X:"1"===e?H:s.parse(e,t):Q}function E(e,t){if(e)return s.parse(e,t)}function N(e){return"ans"!==e.slice(0,3)}function F(e,t){var r,n=e.multiplyDefined,i=e.cyclicallyDefined;for(r in n)n.hasOwnProperty(r)&&(t[r]=g.multiplyDefined(r));for(r in i)i.hasOwnProperty(r)&&(t[r]=g.cycle(i[r].filter(N)))}function q(e,t,r){for(var n=0;n<r.length;n++){var i=r[n];e[i]||(e[i]=[]),e[i].push(t)}}function R(e,t,r){var n=e.variables;if(n&&n.length){for(var i={},a=0;a<n.length;a++)i[n[a]]=!0;for(var o in r)i[o]=!0;r=i}e.variables=t.sliderVariables(Object.keys(r))}function V(e,t,r){var n,i,a=e.evaluationState,o=e.rawTree,s=o.metaData.cdfMin,c=o.metaData.cdfMax,p=NaN,f=NaN,h={},d="Assignment"===o.type?o._expression:o,m=d&&d.metaData&&d.metaData.distributionSpec;if(s){var y=s.tryGetConcreteTree(t,r);for(y.isConstant&&(p=y.asValue()),n=y.getDependencies(),i=0;i<n.length;i++)h[n[i]]=!0}else p=-1/0;if(c){var v=c.tryGetConcreteTree(t,r);for(v.isConstant&&(f=v.asValue()),n=v.getDependencies(),i=0;i<n.length;i++)h[n[i]]=!0}else f=1/0;var b=!0,x=!0;if(isNaN(p)&&(b=!1,p=NaN),isNaN(f)&&(x=!1,f=NaN),b?x?p>f&&(b=!1,x=!1,a.error=g.cdfMaxLessThanMin().getError()):a.error=g.cdfMaxInvalid().getError():a.error=g.cdfMinInvalid().getError(),b&&x){var _=l("cdf",[d,u(p),u(f)]);a.cdf_evaluation=+_.tryGetConcreteTree(t,r).asValue()}var S=-1/0,M=1/0;if(m&&(m.discrete&&(S=0),"binomialdist"===m.symbol&&d.args&&d.args[0])){var E=d.args[0].asValue();isFinite(E)&&(M=E)}o.metaData.evaluatedCDFMin=p,o.metaData.evaluatedCDFMax=f,a.cdf_min_valid=b,a.cdf_max_valid=x,a.cdf_min_default=S,a.cdf_max_default=M,a.is_single_identifier=!1,R(a,t,h)}function B(e,t,r,n){var i,a={},o=!0;if(r){var s=r.tryGetConcreteTree(e,t);i=s.asValue();for(var u=s.getDependencies(),c=0;c<u.length;c++)a[u[c]]=!0}return isFinite(i)||(o=!1,i=NaN),r||(o=!0,void 0!==n&&(i=n)),{value:i,valid:o,missingVarsMap:a}}function k(e,t,r){var n=e.evaluationState,i=e.rawTree.metaData,a=B(t,r,i.fillOpacity);i.computedFillOpacity=a.value,n.fill_opacity_valid=a.valid,R(n,t,a.missingVarsMap)}function j(e,t,r){var n=e.evaluationState,i=e.rawTree.metaData,a=B(t,r,i.lineOpacity);i.computedLineOpacity=a.value,n.line_opacity_valid=a.valid,R(n,t,a.missingVarsMap)}function z(e,t,r){var n=e.evaluationState,i=e.rawTree.metaData,a=B(t,r,i.lineWidth,O.DEFAULT);i.computedLineWidth=a.value,n.line_width_valid=a.valid,R(n,t,a.missingVarsMap)}function G(e,t,r){var n=e.evaluationState,i=e.rawTree,a={},o={};n.clickableinfo_data={},i.metaData.clickableRules.forEach(function(e){var i,s,u,c,l=e.assignment,p=e.expression,f={};n.clickableinfo_data[e.ruleId]=f;var h,d;if(l){if("Identifier"===l.type){var m=r[l._symbol],y=m&&m.type;if("Slider"===y||"Assignment"===y){u=l._symbol;var v=o[u];v?(h=g.clickableObjectAlreadyAssigned(u).getError(),!0!==v&&(delete v.identifier,delete v.latex,v.error=g.clickableObjectAlreadyAssigned(u).getError(),o[u]=!0)):o[u]=f}else h=g.clickableObjectAssignmentNotDefined(l._symbol).getError()}else h=g.clickableObjectAssignmentNotIdentifier().getError();var b=l.tryGetConcreteTree(t,r);for(i=b.getDependencies(),s=0;s<i.length;s++)a[i[s]]=!0}if(p){var x=p.tryGetConcreteTree(t,r);if(x.valueType===S.Number){var _=x.asValue();isNaN(_)||(c=P(_))}else if(x.valueType===S.ListOfNumber){var M=[],E=!0;for(s=0;s<x.args.length;s++){var D=x.args[s];if(D.valueType!==S.Number)return!1;var w=D.asValue();M.push(P(w)),isNaN(w)&&(E=!1)}E&&(c="\\\\left["+M.join(",")+"\\\\right]")}for(c||(d=g.clickableObjectInvalidExpression().getError()),i=x.getDependencies(),s=0;s<i.length;s++)a[i[s]]=!0}h?f.error=h:d?f.error=d:u&&c&&(f.identifier=u,f.latex=I.identifierToLatex(u)+"="+c)}),R(n,t,a)}function U(e,t,r){var n,i,a=e.evaluationState,o=e.rawTree,s=a.expression_type===M.POLAR?o.metaData.polarDomainMin:o.metaData.parametricDomainMin,u=a.expression_type===M.POLAR?o.metaData.polarDomainMax:o.metaData.parametricDomainMax,c=NaN,l=NaN,p=!1,f={};if(s){p=!0;var h=s.tryGetConcreteTree(t,r);for(h.isConstant&&(c=h.asValue()),n=h.getDependencies(),i=0;i<n.length;i++)f[n[i]]=!0}else c=0;if(u){p=!0;var d=u.tryGetConcreteTree(t,r);for(d.isConstant&&(l=d.asValue()),n=d.getDependencies(),i=0;i<n.length;i++)f[n[i]]=!0}else a.expression_type===M.PARAMETRIC?l=1:a.expression_type===M.POLAR&&(l=12*Math.PI/r.trigAngleMultiplier.asValue());var m=!0,y=!0;isFinite(c)||(m=!1,c=NaN),isFinite(l)||(y=!1,l=NaN),m?y?c>l&&(m=!1,y=!1,a.error=g.domainMaxLessThanMin().getError()):a.error=g.domainMaxInvalid().getError():a.error=g.domainMinInvalid().getError(),o.metaData.evaluatedDomainMin=c,o.metaData.evaluatedDomainMax=l,a.expression_type===M.POLAR&&(o.metaData.isExplicitDomain=p),a.domain_min_number=c,a.domain_max_number=l,a.domain_min_valid=m,a.domain_max_valid=y,a.expression_type===M.PARAMETRIC&&(delete f.t,R(a,t,f))}function W(e,t,r){var n,i,a=e.evaluationState,o=e.rawTree,s=o.metaData.vizAxisOffset,u=o.metaData.vizBreadth,c=NaN,l=NaN,p={};if(s){var f=s.tryGetConcreteTree(t,r);for(f.isConstant&&(c=f.asValue()),n=f.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}else c=1;if(u){var h=u.tryGetConcreteTree(t,r);for(h.isConstant&&(l=h.asValue()),n=h.getDependencies(),i=0;i<n.length;i++)p[n[i]]=!0}else l=1;var d=!0,m=!0;isFinite(c)||(d=!1,c=NaN),isFinite(l)||(m=!1,l=NaN),d?m||(a.error=g.boxplotBreadthInvalid().getError()):a.error=g.boxplotOffsetInvalid().getError(),o.metaData.evaluatedAxisOffset=c,o.metaData.evaluatedBreadth=l,a.viz_values={axisOffset:c,breadth:l},a.viz_valids={axisOffset:d,breadth:m},R(a,t,p)}function Y(e){return e.globalRandomSeed||[]}e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.invalidate()},e.getCLSymbolMap=D,e.processChangeSet=function(e){var t={intersections:{},graphs:{}};e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={});var r=!!e.isCompleteState;r!==this.initialEvaluation&&(this.initialEvaluation=r,this.invalidate()),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("globalRandomSeed")&&this.setGlobalRandomSeed(e.globalRandomSeed),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("distributions")&&this.setDistributions(e.distributions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("replaceRoundWithReciprocal")&&this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),e.hasOwnProperty("pointsOfInterest")&&this.setWorkerConfigProperty("pointsOfInterest",e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setWorkerConfigProperty("plotSingleVariableImplicitEquations",e.plotSingleVariableImplicitEquations),e.hasOwnProperty("plotImplicits")&&this.setWorkerConfigProperty("plotImplicits",e.plotImplicits),e.hasOwnProperty("plotInequalities")&&this.setWorkerConfigProperty("plotInequalities",e.plotInequalities),e.hasOwnProperty("sliders")&&this.setWorkerConfigProperty("sliders",e.sliders),e.hasOwnProperty("intersectId")&&(this.intersectId=e.intersectId),this.processStatements(e,t),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId,t);var n=this._publishAllStatuses();return this._computeAllLabels(),this._graphAllChanged(t),this.unpublishedIds={},{syncId:e.syncId,isCompleteState:e.isCompleteState,intersectionChanges:t.intersections,statusChanges:n,graphChanges:t.graphs}},e.processStatements=function(e,t){var r;if(e.statements)for(var n in e.statements){var i=e.statements[n];if(null===i){if(!e.isCompleteState&&this.statements.hasOwnProperty(n)&&(r=this.statements[n].getAllIds()),this.removeStatement(n,t),!e.isCompleteState&&r)for(var a=0;a<r.length;a++)t.graphs[r[a]]=void 0}else this.addStatement(i,t)}},e.setViewState=function(e){if(!a.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.asValue():e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setGlobalRandomSeed=function(e){this.globalRandomSeedString=e,this.parent_frame.globalRandomSeed=c(e),this.dirtyExportedSymbolRoots.globalRandomSeed=!0},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=L[e],this.invalidate()},e.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setDistributions=function(e){this.distributions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setReplaceRoundWithReciprocal=function(e){this.replaceRoundWithReciprocal=e,this.invalidate()},e.setWorkerConfigProperty=function(e,t){t!==b[e]&&(b[e]=t,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var r in this.unpublishedIds)if(this.analysis.hasOwnProperty(r)){var n=this.analysis[r].evaluationState;JSON.stringify(n)!==JSON.stringify(t[r])&&(e[r]=n),this.currentStatus[r]=n}return e},e._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var r=t.tryGetConcreteTree(this.policy,this.frame),n=1;r.valueType===S.ListOfPoint&&(n=r.args.length);for(var i=[],o=0;o<n;o++)i.push(_.interpolate(this.currentLabel[e],this.frame,o));a.isEqual(i,t.computedLabels)||(t.computedLabels=i,this.unpublishedIds[e]=!0)}}},e._graphAllChanged=function(e){var t=this.getViewState(),r=!1;if(o.validateViewState(t)){for(var n in this.unpublishedIds)if(this.analysis.hasOwnProperty(n)){var i=this.analysis[n],s=i.evaluationState.expression_type,u=s===M.SINGLE_POINT||s===M.POINT_LIST;if(i.rawTree.isTable)for(var c=i.graph(t),l=i.rawTree.getAllIds(),p=0;p<l.length;p++)c[l[p]]?this._notifyGraphComputed(l[p],c[l[p]],e):this._notifyGraphRemoved(l[p],e);else i.evaluationState.is_graphable&&(i.rawTree.userData.shouldGraph||i.rawTree.userData.showLabel&&u)?(this._notifyGraphComputed(n,i.graph(t),e),this.intersectId===n&&(r=!0)):this._notifyGraphRemoved(n,e)}a.keys(this.unpublishedIds).length&&void 0!==this.intersectId&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(r=!0)),r&&this._updateIntersections(this.intersectId,e)}},e._notifyGraphRemoved=function(e,t){t.graphs[e]=void 0},e._notifyGraphComputed=function(e,t,r){C.dehydrateGraphData(t),r.graphs[e]=t},e._updateIntersections=function(e,t){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void(t.intersections[e]=[]);var r=x(this.analysis,this.viewState,e);t.intersections[e]=r}},e.getDisabledFeatures=function(){var e,t=this.policy.disabledFeatures();e=!1===this.functionDefinition?t.concat("FunctionDefinition"):t;var r=this.additionalFunctions||[];return e=e.filter(function(e){return("Exponent"!==e||-1===r.indexOf("exponent"))&&("PercentOf"!==e||-1===r.indexOf("percent"))}.bind(this))};var X=u(T(0,1)),H=u(T(1,1)),Q=u(NaN);e.addStatement=function(e,t){if(e){var r=e.id;this.markExportsDirty(r),this.markAsDirtyRoot(r);var a={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures(),seedPrefix:n(r)},o={};switch(e.type){case"table":var c=[];this.statements.hasOwnProperty(r)&&(c=this.statements[r].getAllIds()),e.shouldGraph=!0;for(var l,m,y,g=e.columns,v=[],b=0,x=0;x<g.length;x++)b=Math.max(g[x].values.length,b);for(var S=0;S<g.length;S++){a.seedPrefix=n(r,[["tr",0],["tc",S]]),l=s.parse(g[S].latex,a),m=[];for(var M=-1,D=0;D<g[S].values.length;D++)g[S].values[D].replace(/\\\\space/g,"").match(/\\S/)?(a.seedPrefix=n(r,[["tr",D+1],["tc",S]]),m.push(s.parse(g[S].values[D],a)),M=D):m.push(u(NaN));m=m.slice(0,M+1),y=d(l,b,m),y.id=g[S].id,y.header&&(y.header.userData=g[S]),y.header&&(y.header.metaData={}),v.push(y)}this.statements[r]=h(v);var T=this,P=this.statements[r].getAllIds();c.forEach(function(e){-1===P.indexOf(e)&&T._notifyGraphRemoved(e,t)});break;case"image":var I="-\\\\trigAngleMultiplier*("+e.angle+")";a.seedPrefix=n(r,[["ic",r]]);var C=s.parse(e.center,a);a.seedPrefix=n(r,[["ia",r]]);var O=s.parse(I,a);a.seedPrefix=n(r,[["iw",r]]);var L=s.parse(e.width,a);a.seedPrefix=n(r,[["ih",r]]);var A=s.parse(e.height,a);a.seedPrefix=n(r,[["io",r]]);var N=s.parse(e.opacity,a);this.statements[r]=p({center:C,radianAngle:O,width:L,height:A,opacity:N});break;default:if(this.statements[r]=s.parse(e.latex,a),this.statements[r].shouldPromoteToSlider(this.policy)){var F=e.slider,q=!(!F||!F.isPlayingOnce),R=E(F&&F.softMin,a),V=E(F&&F.softMax,a);a.seedPrefix=n(r,[["lm",r]]);var B=E(F&&F.min,a);a.seedPrefix=n(r,[["lM",r]]);var k=E(F&&F.max,a);a.seedPrefix=n(r,[["ls",r]]);var j=E(F&&F.step,a);e.lineWidth&&(a.seedPrefix=n(r,[["lw",r]]),o.lineWidth=E(e.lineWidth,a)),e.lineOpacity&&(a.seedPrefix=n(r,[["lo",r]]),o.lineOpacity=E(e.lineOpacity,a)),this.statements[r]=f(this.statements[r],{sliderMin:B,sliderMax:k,sliderStep:j,sliderIsPlayingOnce:q,sliderSoftMin:R,sliderSoftMax:V})}else if(e.polarDomain&&e.polarDomain.min&&(a.seedPrefix=n(r,[["lm",r]]),o.polarDomainMin=i(e.polarDomain.min,a)),e.polarDomain&&e.polarDomain.max&&(a.seedPrefix=n(r,[["lM",r]]),o.polarDomainMax=i(e.polarDomain.max,a)),e.parametricDomain&&e.parametricDomain.min&&(a.seedPrefix=n(r,[["lm",r]]),o.parametricDomainMin=i(e.parametricDomain.min,a)),e.parametricDomain&&e.parametricDomain.max&&(a.seedPrefix=n(r,[["lM",r]]),o.parametricDomainMax=i(e.parametricDomain.max,a)),e.vizProps&&(e.vizProps.axisOffset&&(a.seedPrefix=n(r,[["vo",r]]),o.vizAxisOffset=i(e.vizProps.axisOffset,a)),e.vizProps.breadth&&(a.seedPrefix=n(r,[["vb",r]]),o.vizBreadth=i(e.vizProps.breadth,a))),e.lineWidth&&(a.seedPrefix=n(r,[["lw",r]]),o.lineWidth=E(e.lineWidth,a)),e.fillOpacity&&(a.seedPrefix=n(r,[["fo",r]]),o.fillOpacity=E(e.fillOpacity,a)),e.lineOpacity&&(a.seedPrefix=n(r,[["lo",r]]),o.lineOpacity=E(e.lineOpacity,a)),e.cdf&&e.cdf.show){var z=w.parseToplevelFunction(e.latex,a);z&&"distribution"===z.type&&(o.distributionSpec=z,a.seedPrefix=n(r,[["lm",r]]),o.cdfMin=E(e.cdf.min,a),a.seedPrefix=n(r,[["lM",r]]),o.cdfMax=E(e.cdf.max,a))}}if(e.clickableInfo&&e.clickableInfo.enabled&&(o.clickableRules=(e.clickableInfo.rules||[]).map(function(e){return{ruleId:e.id,assignment:E(e.assignment,a),expression:E(e.expression,a)}})),this.statements[r].userData=e,this.statements[r].metaData=o,e.label){var G=this.currentLabel[r];G&&G.raw===e.label||(this.currentLabel[r]=_.parse(e.label))}else delete this.currentLabel[r]}},e.removeStatement=function(e,t){var r=this.statements[e];if(r){if(this.markExportsDirty(e),r.isTable){var n=this;r.getAllIds().forEach(function(e){n._notifyGraphRemoved(e,t)})}else this._notifyGraphRemoved(e,t);delete this.currentLabel[e],delete this.statements[e],delete this.analysis[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markAsDirtyRoot(e);this.currentStatus={},this.analysis={},this.parent_frame=A[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:u(this.use_degrees?Math.PI/180:T(1,1)),initialEvaluation:u(this.initialEvaluation?1:0),globalRandomSeed:c(this.globalRandomSeedString||"")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.markExportsDirty=function(e){if(this.statements[e]){this.statements[e].isRegression&&(this.markedRegressionDirty=!0);for(var t=this.statements[e].getLegalExports(this.policy),r=0;r<t.length;r++)this.dirtyExportedSymbolRoots[t[r]]=!0}},e.markAsDirtyRoot=function(e){this.dirtyStatementRoots[e]=!0},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].status},e.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},e._updateRegressions=function(e){var t,r=this.frame,n=this.lastFrame,i=this.regressionFrame,a=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&a.push(t);var o=this;a.sort(function(e,t){var r=o.statements[e].userData&&o.statements[e].userData.residualVariable,n=o.statements[t].userData&&o.statements[t].userData.residualVariable;return r&&!n?-1:n&&!r?1:0});var s=y(this.policy,e,a);F(s,i);for(var u=s.resolved,c={},l=0;l<u.length;l++)if(t=u[l],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,r,n,c),this.analysis[t].exportTo(this.policy,r),delete e[t];else{var p=e[t].tryGetConcreteTree(this.policy,i);e[t].exportTo(this.policy,p,i),c[t]={rawTree:e[t],concreteTree:p}}},e.buildSymbolToExpressionDirtyMap=function(){var e={};for(var t in this.statements)if(this.statements.hasOwnProperty(t)){var r=this.statements[t],n=r.metaData;if(q(e,t,r.getDependencies()),q(e,t,r.getLegalExports(this.policy)),r.isRegression&&r.userData&&r.userData.residualVariable&&q(e,t,[I.latexToIdentifier(r.userData.residualVariable)]),n.polarDomainMin&&q(e,t,n.polarDomainMin.getDependencies()),n.polarDomainMax&&q(e,t,n.polarDomainMax.getDependencies()),n.parametricDomainMin&&q(e,t,n.parametricDomainMin.getDependencies()),n.parametricDomainMax&&q(e,t,n.parametricDomainMax.getDependencies()),n.vizBinWidth&&q(e,t,n.vizBinWidth.getDependencies()),\nn.vizBinCenter&&q(e,t,n.vizBinCenter.getDependencies()),n.vizAxisOffset&&q(e,t,n.vizAxisOffset.getDependencies()),n.vizBreadth&&q(e,t,n.vizBreadth.getDependencies()),n.cdfMin&&q(e,t,n.cdfMin.getDependencies()),n.cdfMax&&q(e,t,n.cdfMax.getDependencies()),n.lineWidth&&q(e,t,n.lineWidth.getDependencies()),n.fillOpacity&&q(e,t,n.fillOpacity.getDependencies()),n.lineOpacity&&q(e,t,n.lineOpacity.getDependencies()),n.clickableRules)for(var i=0;i<n.clickableRules.length;i++){var a=n.clickableRules[i];a.assignment&&q(e,t,a.assignment.getDependencies()),a.expression&&q(e,t,a.expression.getDependencies())}}return e},e.getDirtyIdsAndSymbols=function(e){var t,r,n,i={},a={},o=this.markedRegressionDirty,s=[],u=[];for(t in this.dirtyStatementRoots)this.dirtyStatementRoots[t]&&(a[t]=!0,s.push(t));for(n in this.dirtyExportedSymbolRoots)this.dirtyExportedSymbolRoots[n]&&(i[n]=!0,u.push(n));for(;s.length||u.length;){for(;s.length;){t=s.pop();var c=this.statements[t];if(c){c.isRegression&&(o=!0);var l=c.getLegalExports(this.policy);for(r=0;r<l.length;r++)n=l[r],i[n]||(i[n]=!0,u.push(n))}}for(;u.length;){n=u.pop();var p=e[n];if(p)for(r=0;r<p.length;r++)t=p[r],a[t]||(a[t]=!0,s.push(t))}}return{ids:a,symbols:i,hasDirtyRegression:o}},e.updateAnalysis=function(){var e,n,i,a=this.buildSymbolToExpressionDirtyMap(),o=this.getDirtyIdsAndSymbols(a);if(o.hasDirtyRegression){i={};for(e in this.statements)this.statements[e]&&(i[e]=this.statements[e]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{var s=o.ids;i={};for(e in s)this.statements[e]&&(i[e]=this.statements[e]);var u=o.symbols;for(n in u)u[n]&&(delete this.frame[n],delete this.regressionFrame[n])}for(e in i)i[e]&&(this.unpublishedIds[e]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};var c=this.analysis,l=this.frame;"graphing"===this.evaluationMode&&this._updateRegressions(i);var p=y(this.policy,i);F(p,l);for(var f=p.resolved,h=0;h<f.length;h++)switch(e=f[h],this.evaluationMode){case"fourFunction":case"singleExpressionFourFunction":c[e]=this.statements[e].analyzeFourFunction(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"scientific":c[e]=this.statements[e].analyzeScientific(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"singleExpressionScientific":c[e]=this.statements[e].analyzeSingleExpressionScientific(this.policy,l,c),c[e].exportTo(this.policy,l);break;case"graphing":case"graphing_3d":if(l.r){var d=Object.create(l);if(d.r=m("r"),c[e]=this.statements[e].analyze(this.policy,d,c),c[e].getGraphMode()===v.POLAR){c[e].exportTo(this.policy,l);continue}}c[e]=this.statements[e].analyze(this.policy,l,c),c[e].exportTo(this.policy,l)}if("graphing"===this.evaluationMode||"graphing_3d"===this.evaluationMode)for(h=0;h<f.length;h++){e=f[h];var g=c[e],b=g.evaluationState.expression_type;z(g,this.policy,l),j(g,this.policy,l),b!==M.POLYGON&&b!==M.PARAMETRIC||k(g,this.policy,l),r(g)&&G(g,this.policy,l),b===M.PARAMETRIC||b===M.POLAR?U(g,this.policy,l):b===M.BOXPLOT?W(g,this.policy,l):t(g)&&V(g,this.policy,l)}Y(a).forEach(function(e){c[e].evaluationState.depends_on_random_seed=!0}),this.lastFrame=Object.create(this.parent_frame);for(n in l)l.hasOwnProperty(n)&&(this.lastFrame[n]=l[n])}})}),define("worker/workercore",["require","core/math/context"],function(e){"use strict";var t=e("core/math/context");return function(e){var r=t();return{processChangeSet:function(t){var n=r.processChangeSet(t);e("processChangeSet",n)}}}}),define("console",["require"],function(e){var t=function(){},r=["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"],n={},i=function(e){"undefined"!=typeof window&&window.console&&window.console[e]?n[e]=function(){Function.prototype.apply.call(window.console[e],window.console,arguments)}:n[e]=t};return r.forEach(i),n}),define("worker/worker",["require","worker/workercore","console"],function(e){"use strict";var t=e("worker/workercore"),r={};e("console").log=function(e){self.postMessage({log:JSON.stringify(e)})};var n=self;n.window=n,n.onmessage=function(e){var i=e.data&&e.data.connectionId;if(i)if("destroy"===e.data.originalMessage.type)delete r[i];else{var a=r[i];a||(a=t(function(e,t){n.postMessage({connectionId:i,originalMessage:{type:e,payload:t}})}),r[i]=a),a.processChangeSet(e.data.originalMessage)}},n.loadMessageQueue&&(n.loadMessageQueue.forEach(function(e){n.onmessage(e)}),delete n.loadMessageQueue)}),function(){"use strict";"undefined"==typeof window&&(void 0===requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"]))}(),define("toplevel/worker",function(){});\n'
}),define("worker_src",["require","text!worker_src_underlying"],function(e){"use strict";return e("text!worker_src_underlying")}),define("worker/create_worker_url",["require","worker_src"],function(e){"use strict";var t=e("worker_src");return function(){if(!t.length)return"/assets/generated/combined/toplevel/worker.js";var e;try{e=new Blob([t],{type:"application/javascript"})}catch(i){try{var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=new n;r.append(t),e=r.getBlob("application/javascript")}catch(e){return null}}return(window.URL||window.webkitURL).createObjectURL(e)}}),define("core/math/finddependencyorder",["require","core/math/builtinframe","underscore"],function(e){"use strict";function t(e,t,i){function o(e){y[e]=y[e]||{};var n,r=y[e];r.id=e,r.index=v,r.lowlink=v,b.push(r),r.instack=!0,v++;for(var i=t[e].getDependencies(),c=0;c<i.length;c++){var l=i[c];if(f.hasOwnProperty(l))for(var u=f[l],d=0;d<u.length;d++){var p=u[d];y.hasOwnProperty(p)?(n=y[p],n.instack&&(r.lowlink=Math.min(r.lowlink,n.index))):(o(p),n=y[p],r.lowlink=Math.min(r.lowlink,n.lowlink))}}if(r.lowlink===r.index)if(n=b.pop(),n.instack=!1,n===r)a(r);else{for(var h=[n];;)if(n=b.pop(),n.instack=!1,h.push(n),n===r)break;s(h)}}function a(e){x.push(e.id)}function s(n){var i,o,a=[];for(o=n.length-1;o>=0;o--){i=n[o];var s=t[i.id].getLegalExports(e);Array.prototype.push.apply(a,s),a.push(s[0]),x.push(i.id)}for(a=r.unique(a),a.sort(),o=0;o<a.length;o++)g[a[o]]=a}var c,l,u,d,p,h=[],f={},m={},g={},y={},v=0,b=[],x=[];if(!i){i=[];for(c in t)t.hasOwnProperty(c)&&i.push(c)}for(c in t)if(t.hasOwnProperty(c)){for(p=t[c].exportPenalty||0;h.length<p+1;)h.push([]);h[p].push(c)}for(p=0;p<h.length;p++){var E={};for(l=0;l<h[p].length;l++){c=h[p][l];var w=t[c].getLegalExports(e);for(u=0;u<w.length;u++)d=w[u],n[d]||f[d]||(E[d]=E[d]||[],E[d].push(c),E[d].length>1&&(m[d]=!0))}for(d in E)f[d]=E[d]}for(l=0;l<i.length;l++)y.hasOwnProperty(i[l])||o(i[l]);return{resolved:x,multiplyDefined:m,cyclicallyDefined:g}}var n=e("core/math/builtinframe"),r=e("underscore");return t}),define("core/math/findIntersections",["require","core/types/graphmode","./plotter","parsenodes","core/math/distance"],function(e){"use strict";function t(e){for(var t=[],n=0;n<e;n++)t[n]={x:[],y:[],intersects:[]};return t}function n(e,t,n,r){return n===u.X&&r===u.X||n===u.Y&&r===u.Y?function(n){return t(n)-e(n)}:(n===u.X&&r===u.Y||n===u.Y&&r===u.X)&&function(n){return n-t(e(n))}}function r(e,t){t instanceof p.SolvedEquation?t=t._expression:t instanceof p.OptimizedRegression&&(t=t.model);var n=[],r=[];return t instanceof p.DoubleInequality?p.List.eachArgs(e,t._expressions,function(e){n.push(e[0].getCompiledFunction()),r.push(e[0].isConstant&&e[1].isNaN()),n.push(e[1].getCompiledFunction()),r.push(e[1].isConstant&&e[1].isNaN())}):p.List.wrap(t).eachElement(e,function(e){n.push(e.getCompiledFunction()),r.push(e.isConstant&&e.isNaN())}),{functions:n,skipIntersecting:r}}function i(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)&&String(i)!==String(t)&&e[i].shouldIntersect()){var o=e[i],a=r(o.policy,o.concreteTree);n.push({id:i,graphMode:o.getGraphMode(),functions:a.functions,skipIntersecting:a.skipIntersecting})}return n}function o(e,t){e.intersects=Array(e.x.length);for(var n=0;n<e.x.length;n++)e.intersects[n]=t}function a(e,t){if(t===u.X){var n=e.y;e.y=e.x,e.x=n}}function s(e,t){Array.prototype.push.apply(e.x,t.x),Array.prototype.push.apply(e.y,t.y),Array.prototype.push.apply(e.intersects,t.intersects)}function c(e,t,n){var r=d.sampleXY(e,t),i=r.poi.zeros,o=r.poi.extrema,a=[],s=0,c=0;for(s=0;s<i.x.length;s++){for(;c<o.x.length&&o.x[c]<i.x[s];c++)h.approx(o.y[c],0)&&a.push(o.x[c]);a.push(i.x[s])}for(;c<o.x.length;c++)h.approx(o.y[c],0)&&a.push(o.x[c]);return{x:a,y:a.map(n)}}function l(e,l,u){var p=e[u],h=p.getGraphInfo(),m=p.getGraphMode(),g=r(p.policy,p.concreteTree),y=t(g.functions.length),v=i(e,u);if(!v)return y;for(var b=0,x=0;x<v.length;x++)for(var E=v[x],w=0;w<g.functions.length;w++)if(!g.skipIntersecting[w])for(var _=g.functions[w].fn,S=d.computeDomain(l,h,_),M=0;M<E.functions.length;M++)if(!v[x].skipIntersecting[M]){var k=E.functions[M].fn,C=n(_,k,m,E.graphMode);if(C){var I=c(C,S,_);if((b+=I.x.length)>f)return t(g.functions.length);o(I,E.id),a(I,m),s(y[w],I)}}return y}var u=e("core/types/graphmode"),d=e("./plotter").default,p=e("parsenodes"),h=e("core/math/distance"),f=100;return{findIntersections:l,findIndicatorZeros:c}}),define("core/math/getCLSymbolMap",["require","exports","underscore","core/lib/label"],function(e,t,n,r){"use strict";function i(){var e={},t={},i={},o=[];for(var a in this.statements)if(this.statements.hasOwnProperty(a)){var s=this.statements[a];switch(s.type){case"Error":break;case"Regression":i[a]=[],o.push(a);break;default:var c=s.getLegalExports(this.policy);if(c){for(var l=0,u=c;l<u.length;l++){var d=u[l];s.exportPenalty>0?t[d]=a:e[d]=a}i[a]=n.difference(s.getDependencies(),s.getDummyDependencies(),c)}}}for(var p=0,h=o;p<h.length;p++){var a=h[p],s=this.statements[a],f=r.latexToIdentifier(s.userData.residualVariable);f&&(t[f]=a);for(var m=s.getDependencies().slice(),g={},d=void 0;d=m.pop();)if(!g[d]){g[d]=!0;var y=e[d]||t[d];y?(m.push.apply(m,i[y]),i[a].push(d)):t[d]=a}}return{exportMap:e,weakExportMap:t,dependencyMap:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCLSymbolMap=void 0,t.getCLSymbolMap=i}),define("core/math/policyFourFunction",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicySingleExpressionFourFunction=t.PolicyFourFunction=void 0;var n=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return"ans"!==e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]},e}();t.PolicyFourFunction=new n({singleExpression:!1}),t.PolicySingleExpressionFourFunction=new n({singleExpression:!0})}),define("core/math/policyScientific",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicySingleExpressionScientific=t.PolicyScientific=void 0;var n=function(){function e(e){this.singleExpression=e.singleExpression}return e.prototype.assignmentForbidden=function(e){return this.singleExpression?"ans"!==e.slice(0,3):"tmp"===e.slice(0,3)},e.prototype.isValidSlider=function(e){return!1},e.prototype.sliderVariables=function(){return[]},e.prototype.graphingEnabled=function(){return!1},e.prototype.ansEnabled=function(){return!this.singleExpression},e.prototype.disabledFeatures=function(){return this.singleExpression?["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]:["Sum","Product","Integral","Derivative","Piecewise"]},e}();t.PolicyScientific=new n({singleExpression:!1}),t.PolicySingleExpressionScientific=new n({singleExpression:!0})}),define("core/math/frameFourFunction",["require","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e){var t={};return e.additionalFunctions&&-1!==e.additionalFunctions.indexOf("sqrt")&&(t.sqrt=n.sqrt),t}var n=e("core/math/parsenode/builtinfunction");return{getFrame:t}}),define("core/math/frameScientific",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r))throw new Error("Programming Error: key '"+r+"' does not exist in table. Must be one of:\n"+Object.keys(t).join("\n"))}}function n(e){var t={};return o.forEach(function(e){t[e]=r[e]}),a.forEach(function(n){e.replaceRoundWithReciprocal&&"round"===n||(t[n]=i[n])}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var r=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),o=["pi","e","trigAngleMultiplier"],a=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];return t(o,r),t(a,i),{getFrame:n}}),define("core/math/frameSingleExpressionScientific",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r))throw new Error("Programming Error: key '"+r+"' does not exist in table. Must be one of:\n"+Object.keys(t).join("\n"))}}function n(e){var t={};return o.forEach(function(e){t[e]=r[e]}),a.forEach(function(e){t[e]=i[e]}),e.trigAngleMultiplier&&(t.trigAngleMultiplier=e.trigAngleMultiplier),t}var r=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),o=["pi","e","trigAngleMultiplier"],a=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];return t(o,r),t(a,i),{getFrame:n}}),define("core/math/frameGraphing",["require","core/math/builtinconstants","core/math/parsenode/builtinfunction"],function(e){"use strict";function t(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(!t.hasOwnProperty(r))throw new Error("Programming Error: key '"+r+"' does not exist in table. Must be one of:\n"+Object.keys(t).join("\n"))}}function n(e){var t,n={};for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);for(t in i)i.hasOwnProperty(t)&&(!0===e.restrictedFunctions&&-1!==o.indexOf(t)||!1===e.distributions&&-1!==a.indexOf(t)||(n[t]=i[t]));return e.trigAngleMultiplier&&(n.trigAngleMultiplier=e.trigAngleMultiplier),e.globalRandomSeed&&(n.globalRandomSeed=e.globalRandomSeed),e.initialEvaluation&&(n.initialEvaluation=e.initialEvaluation),n}var r=e("core/math/builtinconstants"),i=e("core/math/parsenode/builtinfunction"),o=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov","distance","midpoint"],a=["erf","ttest","tscore","ittest","normaldist","tdist","poissondist","binomialdist","pdf","cdf","random","histogram","dotplot","boxplot"];return t(o,i),t(a,i),{getFrame:n}}),define("core/math/context",["require","pjs","underscore","./plotter","parser","core/math/parsenode/constant","core/math/parsenode/seed","core/math/parsenode/functioncall","core/math/parsenode/image","core/math/parsenode/slider","core/math/parsenode/table","core/math/parsenode/tablecolumn","core/math/parsenode/freevariable","core/math/finddependencyorder","core/math/errormsg","core/types/graphmode","core/math/workerconfig","./findIntersections","./interpolatedlabel","core/math/types","core/math/expression-types","core/math/expression-types","core/math/getCLSymbolMap","core/math/distribution-spec","core/math/maybe-rational","core/lib/number-to-latex","core/lib/label","core/math/functions","core/types/line-width","core/math/policyFourFunction","core/math/policyScientific","core/math/policyScientific","core/math/policyFourFunction","core/math/policyGraphing","core/math/policyGraphing","core/math/frameFourFunction","core/math/frameFourFunction","core/math/frameScientific","core/math/frameSingleExpressionScientific","core/math/frameGraphing","core/math/frameGraphing"],function(e){"use strict";function t(e){var t=e.rawTree.userData,n=e.rawTree.metaData;return t.cdf&&t.cdf.show&&n.distributionSpec}function n(e){var t=e.evaluationState.expression_type,n=e.rawTree.userData;return!(!n.clickableInfo||!n.clickableInfo.enabled)&&(!!e.rawTree.isImage||e.getGraphMode()!==v.XYPOINT_MOVABLE&&S(t))}function r(e,t){var n="id"+e;t=t||[];for(var r,i,o,a=0,s=t.length;a<s;a++)r=t[a],i=r[0],o=r[1],n+="::"+i+o;return n}var i=e("pjs"),o=e("underscore"),a=e("./plotter").default,s=e("parser"),c=e("core/math/parsenode/constant"),l=e("core/math/parsenode/seed"),u=e("core/math/parsenode/functioncall"),d=e("core/math/parsenode/image"),p=e("core/math/parsenode/slider"),h=e("core/math/parsenode/table"),f=e("core/math/parsenode/tablecolumn"),m=e("core/math/parsenode/freevariable"),g=e("core/math/finddependencyorder"),y=e("core/math/errormsg"),v=e("core/types/graphmode"),b=e("core/math/workerconfig"),x=e("./findIntersections").findIntersections,E=e("./interpolatedlabel"),w=e("core/math/types"),_=e("core/math/expression-types").ExpressionType,S=e("core/math/expression-types").isClickableExpressionType,M=e("core/math/getCLSymbolMap").getCLSymbolMap,k=e("core/math/distribution-spec"),C=e("core/math/maybe-rational").maybeRational,I=e("core/lib/number-to-latex").default,T=e("core/lib/label"),L=e("core/math/functions"),D=e("core/types/line-width"),P={fourFunction:e("core/math/policyFourFunction").PolicyFourFunction,scientific:e("core/math/policyScientific").PolicyScientific,singleExpressionScientific:e("core/math/policyScientific").PolicySingleExpressionScientific,singleExpressionFourFunction:e("core/math/policyFourFunction").PolicySingleExpressionFourFunction,graphing:e("core/math/policyGraphing").PolicyGraphing,graphing_3d:e("core/math/policyGraphing").PolicyGraphing3D},A={fourFunction:e("core/math/frameFourFunction"),singleExpressionFourFunction:e("core/math/frameFourFunction"),scientific:e("core/math/frameScientific"),singleExpressionScientific:e("core/math/frameSingleExpressionScientific"),graphing:e("core/math/frameGraphing"),graphing_3d:e("core/math/frameGraphing")};return i(function(e){function i(e,t){return e?"0"===e?K:"1"===e?Y:s.parse(e,t):X}function S(e,t){if(e)return s.parse(e,t)}function O(e){return"ans"!==e.slice(0,3)}function F(e,t){var n,r=e.multiplyDefined,i=e.cyclicallyDefined;for(n in r)r.hasOwnProperty(n)&&(t[n]=y.multiplyDefined(n));for(n in i)i.hasOwnProperty(n)&&(t[n]=y.cycle(i[n].filter(O)))}function N(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];e[i]||(e[i]=[]),e[i].push(t)}}function q(e,t,n){var r=e.variables;if(r&&r.length){for(var i={},o=0;o<r.length;o++)i[r[o]]=!0;for(var a in n)i[a]=!0;n=i}e.variables=t.sliderVariables(Object.keys(n))}function R(e,t,n){var r,i,o=e.evaluationState,a=e.rawTree,s=a.metaData.cdfMin,l=a.metaData.cdfMax,d=NaN,p=NaN,h={},f="Assignment"===a.type?a._expression:a,m=f&&f.metaData&&f.metaData.distributionSpec;if(s){var g=s.tryGetConcreteTree(t,n);for(g.isConstant&&(d=g.asValue()),r=g.getDependencies(),i=0;i<r.length;i++)h[r[i]]=!0}else d=-1/0;if(l){var v=l.tryGetConcreteTree(t,n);for(v.isConstant&&(p=v.asValue()),r=v.getDependencies(),i=0;i<r.length;i++)h[r[i]]=!0}else p=1/0;var b=!0,x=!0;if(isNaN(d)&&(b=!1,d=NaN),isNaN(p)&&(x=!1,p=NaN),b?x?d>p&&(b=!1,x=!1,o.error=y.cdfMaxLessThanMin().getError()):o.error=y.cdfMaxInvalid().getError():o.error=y.cdfMinInvalid().getError(),b&&x){var E=u("cdf",[f,c(d),c(p)]);o.cdf_evaluation=+E.tryGetConcreteTree(t,n).asValue()}var w=-1/0,_=1/0;if(m&&(m.discrete&&(w=0),"binomialdist"===m.symbol&&f.args&&f.args[0])){var S=f.args[0].asValue();isFinite(S)&&(_=S)}a.metaData.evaluatedCDFMin=d,a.metaData.evaluatedCDFMax=p,o.cdf_min_valid=b,o.cdf_max_valid=x,o.cdf_min_default=w,o.cdf_max_default=_,o.is_single_identifier=!1,q(o,t,h)}function B(e,t,n,r){var i,o={},a=!0;if(n){var s=n.tryGetConcreteTree(e,t);i=s.asValue();for(var c=s.getDependencies(),l=0;l<c.length;l++)o[c[l]]=!0}return isFinite(i)||(a=!1,i=NaN),n||(a=!0,void 0!==r&&(i=r)),{value:i,valid:a,missingVarsMap:o}}function j(e,t,n){var r=e.evaluationState,i=e.rawTree.metaData,o=B(t,n,i.fillOpacity);i.computedFillOpacity=o.value,r.fill_opacity_valid=o.valid,q(r,t,o.missingVarsMap)}function V(e,t,n){var r=e.evaluationState,i=e.rawTree.metaData,o=B(t,n,i.lineOpacity);i.computedLineOpacity=o.value,r.line_opacity_valid=o.valid,q(r,t,o.missingVarsMap)}function U(e,t,n){var r=e.evaluationState,i=e.rawTree.metaData,o=B(t,n,i.lineWidth,D.DEFAULT);i.computedLineWidth=o.value,r.line_width_valid=o.valid,q(r,t,o.missingVarsMap)}function G(e,t,n){var r=e.evaluationState,i=e.rawTree,o={},a={};r.clickableinfo_data={},i.metaData.clickableRules.forEach(function(e){var i,s,c,l,u=e.assignment,d=e.expression,p={};r.clickableinfo_data[e.ruleId]=p;var h,f;if(u){if("Identifier"===u.type){var m=n[u._symbol],g=m&&m.type;if("Slider"===g||"Assignment"===g){c=u._symbol;var v=a[c];v?(h=y.clickableObjectAlreadyAssigned(c).getError(),!0!==v&&(delete v.identifier,delete v.latex,v.error=y.clickableObjectAlreadyAssigned(c).getError(),a[c]=!0)):a[c]=p}else h=y.clickableObjectAssignmentNotDefined(u._symbol).getError()}else h=y.clickableObjectAssignmentNotIdentifier().getError();var b=u.tryGetConcreteTree(t,n);for(i=b.getDependencies(),s=0;s<i.length;s++)o[i[s]]=!0}if(d){var x=d.tryGetConcreteTree(t,n);if(x.valueType===w.Number){var E=x.asValue();isNaN(E)||(l=I(E))}else if(x.valueType===w.ListOfNumber){var _=[],S=!0;for(s=0;s<x.args.length;s++){var M=x.args[s];if(M.valueType!==w.Number)return!1;var k=M.asValue();_.push(I(k)),isNaN(k)&&(S=!1)}S&&(l="\\left["+_.join(",")+"\\right]")}for(l||(f=y.clickableObjectInvalidExpression().getError()),i=x.getDependencies(),s=0;s<i.length;s++)o[i[s]]=!0}h?p.error=h:f?p.error=f:c&&l&&(p.identifier=c,p.latex=T.identifierToLatex(c)+"="+l)}),q(r,t,o)}function z(e,t,n){var r,i,o=e.evaluationState,a=e.rawTree,s=o.expression_type===_.POLAR?a.metaData.polarDomainMin:a.metaData.parametricDomainMin,c=o.expression_type===_.POLAR?a.metaData.polarDomainMax:a.metaData.parametricDomainMax,l=NaN,u=NaN,d=!1,p={};if(s){d=!0;var h=s.tryGetConcreteTree(t,n);for(h.isConstant&&(l=h.asValue()),r=h.getDependencies(),i=0;i<r.length;i++)p[r[i]]=!0}else l=0;if(c){d=!0;var f=c.tryGetConcreteTree(t,n);for(f.isConstant&&(u=f.asValue()),r=f.getDependencies(),i=0;i<r.length;i++)p[r[i]]=!0}else o.expression_type===_.PARAMETRIC?u=1:o.expression_type===_.POLAR&&(u=12*Math.PI/n.trigAngleMultiplier.asValue());var m=!0,g=!0;isFinite(l)||(m=!1,l=NaN),isFinite(u)||(g=!1,u=NaN),m?g?l>u&&(m=!1,g=!1,o.error=y.domainMaxLessThanMin().getError()):o.error=y.domainMaxInvalid().getError():o.error=y.domainMinInvalid().getError(),a.metaData.evaluatedDomainMin=l,a.metaData.evaluatedDomainMax=u,o.expression_type===_.POLAR&&(a.metaData.isExplicitDomain=d),o.domain_min_number=l,o.domain_max_number=u,o.domain_min_valid=m,o.domain_max_valid=g,o.expression_type===_.PARAMETRIC&&(delete p.t,q(o,t,p))}function H(e,t,n){var r,i,o=e.evaluationState,a=e.rawTree,s=a.metaData.vizAxisOffset,c=a.metaData.vizBreadth,l=NaN,u=NaN,d={};if(s){var p=s.tryGetConcreteTree(t,n);for(p.isConstant&&(l=p.asValue()),r=p.getDependencies(),i=0;i<r.length;i++)d[r[i]]=!0}else l=1;if(c){var h=c.tryGetConcreteTree(t,n);for(h.isConstant&&(u=h.asValue()),r=h.getDependencies(),i=0;i<r.length;i++)d[r[i]]=!0}else u=1;var f=!0,m=!0;isFinite(l)||(f=!1,l=NaN),isFinite(u)||(m=!1,u=NaN),f?m||(o.error=y.boxplotBreadthInvalid().getError()):o.error=y.boxplotOffsetInvalid().getError(),a.metaData.evaluatedAxisOffset=l,a.metaData.evaluatedBreadth=u,o.viz_values={axisOffset:l,breadth:u},o.viz_valids={axisOffset:f,breadth:m},q(o,t,d)}function W(e){return e.globalRandomSeed||[]}e.init=function(){this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.invalidate()},e.getCLSymbolMap=M,e.processChangeSet=function(e){var t={intersections:{},graphs:{}};e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={});var n=!!e.isCompleteState;n!==this.initialEvaluation&&(this.initialEvaluation=n,this.invalidate()),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("globalRandomSeed")&&this.setGlobalRandomSeed(e.globalRandomSeed),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("distributions")&&this.setDistributions(e.distributions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("replaceRoundWithReciprocal")&&this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),e.hasOwnProperty("pointsOfInterest")&&this.setWorkerConfigProperty("pointsOfInterest",e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setWorkerConfigProperty("plotSingleVariableImplicitEquations",e.plotSingleVariableImplicitEquations),e.hasOwnProperty("plotImplicits")&&this.setWorkerConfigProperty("plotImplicits",e.plotImplicits),e.hasOwnProperty("plotInequalities")&&this.setWorkerConfigProperty("plotInequalities",e.plotInequalities),e.hasOwnProperty("sliders")&&this.setWorkerConfigProperty("sliders",e.sliders),e.hasOwnProperty("intersectId")&&(this.intersectId=e.intersectId),this.processStatements(e,t),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId,t);var r=this._publishAllStatuses();return this._computeAllLabels(),this._graphAllChanged(t),this.unpublishedIds={},{syncId:e.syncId,isCompleteState:e.isCompleteState,intersectionChanges:t.intersections,statusChanges:r,graphChanges:t.graphs}},e.processStatements=function(e,t){var n;if(e.statements)for(var r in e.statements){var i=e.statements[r];if(null===i){if(!e.isCompleteState&&this.statements.hasOwnProperty(r)&&(n=this.statements[r].getAllIds()),this.removeStatement(r,t),!e.isCompleteState&&n)for(var o=0;o<n.length;o++)t.graphs[n[o]]=void 0}else this.addStatement(i,t)}},e.setViewState=function(e){if(!o.isEqual(e,this.viewState)){this.viewState=e;for(var t in this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)}},e.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.asValue():e.trigAngleMultiplier=1,e}},e.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},e.setGlobalRandomSeed=function(e){this.globalRandomSeedString=e,this.parent_frame.globalRandomSeed=l(e),this.dirtyExportedSymbolRoots.globalRandomSeed=!0},e.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=P[e],this.invalidate()},e.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},e.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},e.setDistributions=function(e){this.distributions=e,this.invalidate()},e.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},e.setReplaceRoundWithReciprocal=function(e){this.replaceRoundWithReciprocal=e,this.invalidate()},e.setWorkerConfigProperty=function(e,t){t!==b[e]&&(b[e]=t,this.invalidate())},e._publishAllStatuses=function(){var e={},t=this.currentStatus;this.currentStatus={};for(var n in this.unpublishedIds)if(this.analysis.hasOwnProperty(n)){var r=this.analysis[n].evaluationState;JSON.stringify(r)!==JSON.stringify(t[n])&&(e[n]=r),this.currentStatus[n]=r}return e},e._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var n=t.tryGetConcreteTree(this.policy,this.frame),r=1;n.valueType===w.ListOfPoint&&(r=n.args.length);for(var i=[],a=0;a<r;a++)i.push(E.interpolate(this.currentLabel[e],this.frame,a));o.isEqual(i,t.computedLabels)||(t.computedLabels=i,this.unpublishedIds[e]=!0)}}},e._graphAllChanged=function(e){var t=this.getViewState(),n=!1;if(a.validateViewState(t)){for(var r in this.unpublishedIds)if(this.analysis.hasOwnProperty(r)){var i=this.analysis[r],s=i.evaluationState.expression_type,c=s===_.SINGLE_POINT||s===_.POINT_LIST;if(i.rawTree.isTable)for(var l=i.graph(t),u=i.rawTree.getAllIds(),d=0;d<u.length;d++)l[u[d]]?this._notifyGraphComputed(u[d],l[u[d]],e):this._notifyGraphRemoved(u[d],e);else i.evaluationState.is_graphable&&(i.rawTree.userData.shouldGraph||i.rawTree.userData.showLabel&&c)?(this._notifyGraphComputed(r,i.graph(t),e),this.intersectId===r&&(n=!0)):this._notifyGraphRemoved(r,e)}o.keys(this.unpublishedIds).length&&void 0!==this.intersectId&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(n=!0)),n&&this._updateIntersections(this.intersectId,e)}},e._notifyGraphRemoved=function(e,t){t.graphs[e]=void 0},e._notifyGraphComputed=function(e,t,n){L.dehydrateGraphData(t),n.graphs[e]=t},e._updateIntersections=function(e,t){if(this.viewState){if(!this.analysis[e]||!this.analysis[e].shouldIntersect())return void(t.intersections[e]=[]);var n=x(this.analysis,this.viewState,e);t.intersections[e]=n}},e.getDisabledFeatures=function(){var e,t=this.policy.disabledFeatures();e=!1===this.functionDefinition?t.concat("FunctionDefinition"):t;var n=this.additionalFunctions||[];return e=e.filter(function(e){return("Exponent"!==e||-1===n.indexOf("exponent"))&&("PercentOf"!==e||-1===n.indexOf("percent"))}.bind(this))};var K=c(C(0,1)),Y=c(C(1,1)),X=c(NaN);e.addStatement=function(e,t){if(e){var n=e.id;this.markExportsDirty(n),this.markAsDirtyRoot(n);var o={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures(),seedPrefix:r(n)},a={};switch(e.type){case"table":var l=[];this.statements.hasOwnProperty(n)&&(l=this.statements[n].getAllIds()),e.shouldGraph=!0;for(var u,m,g,y=e.columns,v=[],b=0,x=0;x<y.length;x++)b=Math.max(y[x].values.length,b);for(var w=0;w<y.length;w++){o.seedPrefix=r(n,[["tr",0],["tc",w]]),u=s.parse(y[w].latex,o),m=[];for(var _=-1,M=0;M<y[w].values.length;M++)y[w].values[M].replace(/\\space/g,"").match(/\S/)?(o.seedPrefix=r(n,[["tr",M+1],["tc",w]]),m.push(s.parse(y[w].values[M],o)),_=M):m.push(c(NaN));m=m.slice(0,_+1),g=f(u,b,m),g.id=y[w].id,g.header&&(g.header.userData=y[w]),g.header&&(g.header.metaData={}),v.push(g)}this.statements[n]=h(v);var C=this,I=this.statements[n].getAllIds();l.forEach(function(e){-1===I.indexOf(e)&&C._notifyGraphRemoved(e,t)});break;case"image":var T="-\\trigAngleMultiplier*("+e.angle+")";o.seedPrefix=r(n,[["ic",n]]);var L=s.parse(e.center,o);o.seedPrefix=r(n,[["ia",n]]);var D=s.parse(T,o);o.seedPrefix=r(n,[["iw",n]]);var P=s.parse(e.width,o);o.seedPrefix=r(n,[["ih",n]]);var A=s.parse(e.height,o);o.seedPrefix=r(n,[["io",n]]);var O=s.parse(e.opacity,o);this.statements[n]=d({center:L,radianAngle:D,width:P,height:A,opacity:O});break;default:if(this.statements[n]=s.parse(e.latex,o),this.statements[n].shouldPromoteToSlider(this.policy)){var F=e.slider,N=!(!F||!F.isPlayingOnce),q=S(F&&F.softMin,o),R=S(F&&F.softMax,o);o.seedPrefix=r(n,[["lm",n]]);var B=S(F&&F.min,o);o.seedPrefix=r(n,[["lM",n]]);var j=S(F&&F.max,o);o.seedPrefix=r(n,[["ls",n]]);var V=S(F&&F.step,o);e.lineWidth&&(o.seedPrefix=r(n,[["lw",n]]),a.lineWidth=S(e.lineWidth,o)),e.lineOpacity&&(o.seedPrefix=r(n,[["lo",n]]),a.lineOpacity=S(e.lineOpacity,o)),this.statements[n]=p(this.statements[n],{sliderMin:B,sliderMax:j,sliderStep:V,sliderIsPlayingOnce:N,sliderSoftMin:q,sliderSoftMax:R})}else if(e.polarDomain&&e.polarDomain.min&&(o.seedPrefix=r(n,[["lm",n]]),a.polarDomainMin=i(e.polarDomain.min,o)),e.polarDomain&&e.polarDomain.max&&(o.seedPrefix=r(n,[["lM",n]]),a.polarDomainMax=i(e.polarDomain.max,o)),e.parametricDomain&&e.parametricDomain.min&&(o.seedPrefix=r(n,[["lm",n]]),a.parametricDomainMin=i(e.parametricDomain.min,o)),e.parametricDomain&&e.parametricDomain.max&&(o.seedPrefix=r(n,[["lM",n]]),a.parametricDomainMax=i(e.parametricDomain.max,o)),e.vizProps&&(e.vizProps.axisOffset&&(o.seedPrefix=r(n,[["vo",n]]),a.vizAxisOffset=i(e.vizProps.axisOffset,o)),e.vizProps.breadth&&(o.seedPrefix=r(n,[["vb",n]]),a.vizBreadth=i(e.vizProps.breadth,o))),e.lineWidth&&(o.seedPrefix=r(n,[["lw",n]]),a.lineWidth=S(e.lineWidth,o)),e.fillOpacity&&(o.seedPrefix=r(n,[["fo",n]]),a.fillOpacity=S(e.fillOpacity,o)),e.lineOpacity&&(o.seedPrefix=r(n,[["lo",n]]),a.lineOpacity=S(e.lineOpacity,o)),e.cdf&&e.cdf.show){var U=k.parseToplevelFunction(e.latex,o);U&&"distribution"===U.type&&(a.distributionSpec=U,o.seedPrefix=r(n,[["lm",n]]),a.cdfMin=S(e.cdf.min,o),o.seedPrefix=r(n,[["lM",n]]),a.cdfMax=S(e.cdf.max,o))}}if(e.clickableInfo&&e.clickableInfo.enabled&&(a.clickableRules=(e.clickableInfo.rules||[]).map(function(e){return{ruleId:e.id,assignment:S(e.assignment,o),expression:S(e.expression,o)}})),this.statements[n].userData=e,this.statements[n].metaData=a,e.label){var G=this.currentLabel[n];G&&G.raw===e.label||(this.currentLabel[n]=E.parse(e.label))}else delete this.currentLabel[n]}},e.removeStatement=function(e,t){var n=this.statements[e];if(n){if(this.markExportsDirty(e),n.isTable){var r=this;n.getAllIds().forEach(function(e){r._notifyGraphRemoved(e,t)})}else this._notifyGraphRemoved(e,t);delete this.currentLabel[e],delete this.statements[e],delete this.analysis[e]}},e.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markAsDirtyRoot(e);this.currentStatus={},this.analysis={},this.parent_frame=A[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:c(this.use_degrees?Math.PI/180:C(1,1)),initialEvaluation:c(this.initialEvaluation?1:0),globalRandomSeed:l(this.globalRandomSeedString||"")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},e.markExportsDirty=function(e){if(this.statements[e]){this.statements[e].isRegression&&(this.markedRegressionDirty=!0);for(var t=this.statements[e].getLegalExports(this.policy),n=0;n<t.length;n++)this.dirtyExportedSymbolRoots[t[n]]=!0}},e.markAsDirtyRoot=function(e){this.dirtyStatementRoots[e]=!0},e.getFrame=function(){return this.updateAnalysis(),this.frame},e.getAnalysis=function(){return this.updateAnalysis(),this.analysis},e.getStatus=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].status},e.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},e._updateRegressions=function(e){var t,n=this.frame,r=this.lastFrame,i=this.regressionFrame,o=[];for(t in e)e.hasOwnProperty(t)&&e[t].isRegression&&o.push(t);var a=this;o.sort(function(e,t){var n=a.statements[e].userData&&a.statements[e].userData.residualVariable,r=a.statements[t].userData&&a.statements[t].userData.residualVariable;return n&&!r?-1:r&&!n?1:0});var s=g(this.policy,e,o);F(s,i);for(var c=s.resolved,l={},u=0;u<c.length;u++)if(t=c[u],this.statements[t].isRegression)this.analysis[t]=e[t].analyze(this.policy,i,n,r,l),this.analysis[t].exportTo(this.policy,n),delete e[t];else{var d=e[t].tryGetConcreteTree(this.policy,i);e[t].exportTo(this.policy,d,i),l[t]={rawTree:e[t],concreteTree:d}}},e.buildSymbolToExpressionDirtyMap=function(){var e={};for(var t in this.statements)if(this.statements.hasOwnProperty(t)){var n=this.statements[t],r=n.metaData;if(N(e,t,n.getDependencies()),N(e,t,n.getLegalExports(this.policy)),n.isRegression&&n.userData&&n.userData.residualVariable&&N(e,t,[T.latexToIdentifier(n.userData.residualVariable)]),r.polarDomainMin&&N(e,t,r.polarDomainMin.getDependencies()),r.polarDomainMax&&N(e,t,r.polarDomainMax.getDependencies()),r.parametricDomainMin&&N(e,t,r.parametricDomainMin.getDependencies()),r.parametricDomainMax&&N(e,t,r.parametricDomainMax.getDependencies()),r.vizBinWidth&&N(e,t,r.vizBinWidth.getDependencies()),r.vizBinCenter&&N(e,t,r.vizBinCenter.getDependencies()),r.vizAxisOffset&&N(e,t,r.vizAxisOffset.getDependencies()),r.vizBreadth&&N(e,t,r.vizBreadth.getDependencies()),r.cdfMin&&N(e,t,r.cdfMin.getDependencies()),r.cdfMax&&N(e,t,r.cdfMax.getDependencies()),r.lineWidth&&N(e,t,r.lineWidth.getDependencies()),r.fillOpacity&&N(e,t,r.fillOpacity.getDependencies()),r.lineOpacity&&N(e,t,r.lineOpacity.getDependencies()),r.clickableRules)for(var i=0;i<r.clickableRules.length;i++){var o=r.clickableRules[i];o.assignment&&N(e,t,o.assignment.getDependencies()),
o.expression&&N(e,t,o.expression.getDependencies())}}return e},e.getDirtyIdsAndSymbols=function(e){var t,n,r,i={},o={},a=this.markedRegressionDirty,s=[],c=[];for(t in this.dirtyStatementRoots)this.dirtyStatementRoots[t]&&(o[t]=!0,s.push(t));for(r in this.dirtyExportedSymbolRoots)this.dirtyExportedSymbolRoots[r]&&(i[r]=!0,c.push(r));for(;s.length||c.length;){for(;s.length;){t=s.pop();var l=this.statements[t];if(l){l.isRegression&&(a=!0);var u=l.getLegalExports(this.policy);for(n=0;n<u.length;n++)r=u[n],i[r]||(i[r]=!0,c.push(r))}}for(;c.length;){r=c.pop();var d=e[r];if(d)for(n=0;n<d.length;n++)t=d[n],o[t]||(o[t]=!0,s.push(t))}}return{ids:o,symbols:i,hasDirtyRegression:a}},e.updateAnalysis=function(){var e,r,i,o=this.buildSymbolToExpressionDirtyMap(),a=this.getDirtyIdsAndSymbols(o);if(a.hasDirtyRegression){i={};for(e in this.statements)this.statements[e]&&(i[e]=this.statements[e]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{var s=a.ids;i={};for(e in s)this.statements[e]&&(i[e]=this.statements[e]);var c=a.symbols;for(r in c)c[r]&&(delete this.frame[r],delete this.regressionFrame[r])}for(e in i)i[e]&&(this.unpublishedIds[e]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};var l=this.analysis,u=this.frame;"graphing"===this.evaluationMode&&this._updateRegressions(i);var d=g(this.policy,i);F(d,u);for(var p=d.resolved,h=0;h<p.length;h++)switch(e=p[h],this.evaluationMode){case"fourFunction":case"singleExpressionFourFunction":l[e]=this.statements[e].analyzeFourFunction(this.policy,u,l),l[e].exportTo(this.policy,u);break;case"scientific":l[e]=this.statements[e].analyzeScientific(this.policy,u,l),l[e].exportTo(this.policy,u);break;case"singleExpressionScientific":l[e]=this.statements[e].analyzeSingleExpressionScientific(this.policy,u,l),l[e].exportTo(this.policy,u);break;case"graphing":case"graphing_3d":if(u.r){var f=Object.create(u);if(f.r=m("r"),l[e]=this.statements[e].analyze(this.policy,f,l),l[e].getGraphMode()===v.POLAR){l[e].exportTo(this.policy,u);continue}}l[e]=this.statements[e].analyze(this.policy,u,l),l[e].exportTo(this.policy,u)}if("graphing"===this.evaluationMode||"graphing_3d"===this.evaluationMode)for(h=0;h<p.length;h++){e=p[h];var y=l[e],b=y.evaluationState.expression_type;U(y,this.policy,u),V(y,this.policy,u),b!==_.POLYGON&&b!==_.PARAMETRIC||j(y,this.policy,u),n(y)&&G(y,this.policy,u),b===_.PARAMETRIC||b===_.POLAR?z(y,this.policy,u):b===_.BOXPLOT?H(y,this.policy,u):t(y)&&R(y,this.policy,u)}W(o).forEach(function(e){l[e].evaluationState.depends_on_random_seed=!0}),this.lastFrame=Object.create(this.parent_frame);for(r in u)u.hasOwnProperty(r)&&(this.lastFrame[r]=u[r])}})}),define("worker/workercore",["require","core/math/context"],function(e){"use strict";var t=e("core/math/context");return function(e){var n=t();return{processChangeSet:function(t){var r=n.processChangeSet(t);e("processChangeSet",r)}}}}),define("worker/fakeworker",["require","worker/workercore"],function(e){"use strict";var t=e("worker/workercore");return function(e){function n(t,n){e({type:t,payload:n})}var r={},i=t(n);return r.postMessage=function(e){setTimeout(function(){i.processChangeSet(e)},0)},r}}),define("worker/workerpool",["require","console","./create_worker_url","pjs","underscore_model","./fakeworker","underscore","lib/urlparser"],function(e){"use strict";function t(e){return u?function(t){d=Math.max(Date.now(),d)+u,setTimeout(e,d-Date.now(),t)}:e}var n=e("console"),r=e("./create_worker_url"),i=e("pjs"),o=e("underscore_model").UnderscoreModel,a=e("./fakeworker"),s=e("underscore"),c=e("lib/urlparser"),l=c.getParameter(location.search,"workerThrottle"),u=parseInt(l,10),d=0;return i(o,function(e,i){e.init=function(e){i.init.call(this),this.workers=[],this.maxWorkers=e,this.workerURL=r()},e.allowedToSpawnWorker=function(){return this.workerURL&&this.workers.length<this.maxWorkers},e.killWorker=function(e){-1!==s.indexOf(this.workers,e)&&(e.terminate(),this.workers=s.without(this.workers,e),s.shuffle(s.values(e.__connections)).forEach(function(e){e&&e.onWorkerKilled&&e.onWorkerKilled()}))},e.spawnWorker=function(){try{var e=new Worker(this.workerURL);return e.__connections={},e.__isFake=!1,e.onerror=function(e){n.log(e)},e.addEventListener("message",t(function(t){var n=t.data;if((!n||!n.log)&&n&&n.connectionId){var r=e.__connections[n.connectionId];r&&r.onResponse(n.originalMessage)}})),this.workers.push(e),e}catch(e){return null}},e.spawnFakeWorker=function(){var e=a(t(function(t){var n=s.values(e.__connections)[0];n&&n.onResponse(t)}));return e.__isFake=!0,e.__connections={},e},e.findLeastUsedWorker=function(){var e=function(e){return s.size(e.__connections)};return s.sortBy(this.workers,e)[0]},e.allocateWorker=function(){var e=null;return this.allowedToSpawnWorker()&&(e=this.spawnWorker()),e||(e=this.findLeastUsedWorker()),e||(e=this.spawnFakeWorker()),e}})}),define("main/evaluator",["require","exports","worker/workerpoolconnection","worker/workerpool","core/lib/deepCopy","core/math/functions","underscore"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Evaluator=void 0;var s=function(){function e(e){this.listeners={processChangeSet:function(e){var t={},n={};for(var r in e.graphChanges){var i=e.graphChanges[r];void 0===i?n[r]=!0:(o.rehydrateGraphData(i),t[r]=i)}var a={};for(var r in e.intersectionChanges)n[r]||(a[r]=e.intersectionChanges[r]);this.onEvaluatorResults({evaluationStates:e.statusChanges,graphData:{addedGraphs:t,removedGraphs:n,intersections:a},renderSlowly:!!e.isCompleteState});for(var s=e.syncId;this.syncRequests.length&&void 0!==s&&this.syncRequests[0].id<=s;){this.syncRequests.shift().callback()}this.markJobFinished(),this._processChangeSet()}},this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.syncId=1,this.syncRequests=[],e||(e=r()),this.workerPool=e,this.createWorkerPoolConnection()}return e.prototype.createWorkerPoolConnection=function(){var e=this;this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=n(this.workerPool),this.markJobFinished(),this.workerPoolConnection.onResponse=function(t){e.shouldIgnoreWorkerMessage(t)?"processChangeSet"===t.type&&(e.markJobFinished(),e._processChangeSet()):e.listeners[t.type].call(e,t.payload)},this.workerPoolConnection.onWorkerKilled=function(){var t=e.hasJobInWorker();e.createWorkerPoolConnection(),t?(e.changeSet=i.default(e.cumulativeChangeSet),e.__state.changed=!0,e.__state.droppedMessage=!0):(e.changeSet=i.default(e.cumulativeChangeSet),e.__state.changed=!1),e.processChangeSet()}},e.prototype.destroy=function(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())},e.prototype.shouldIgnoreWorkerMessage=function(e){return!!this.__suspendUntilSyncId&&(!e||!e.payload||!(e.payload.syncId>=this.__suspendUntilSyncId))},e.prototype.suspend=function(){var e=this;this.changeSet&&this.changeSet.syncId||(this.syncId++,this.applyToChangeSets(function(t){t.syncId=e.syncId})),this.__suspendUntilSyncId=this.changeSet.syncId},e.prototype.markJobFinished=function(){this.__state.droppedMessage=!1,this.__jobStartTime=-1,this.__suspendUntilSyncId=void 0},e.prototype.startJobTimer=function(){this.__jobStartTime=(new Date).getTime()},e.prototype.hasJobInWorker=function(){return-1!==this.__jobStartTime},e.prototype.getJobElapsedTime=function(){return this.hasJobInWorker()?(new Date).getTime()-this.__jobStartTime:NaN},e.prototype.tick=function(){this._processChangeSet()},e.prototype.processChangeSet=function(){this.__processChangeSetRequested=!0},e.prototype._processChangeSet=function(){if(this._syncEvaluatorConfig(),this.__processChangeSetRequested){var e=this.getJobElapsedTime()>=4e3;if(this.__state.droppedMessage&&e)return void this.workerPoolConnection.killWorker();if(this.__state.changed&&this.changeSet)if(this.changeSet.syncId||(this.syncId++,this.changeSet.syncId=this.syncId),this.hasJobInWorker())this.changeSet.isCompleteState&&e&&this.workerPoolConnection.killWorker();else{var t=this.changeSet;this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(t),this.__processChangeSetRequested=!1}}},e.prototype.notifyWhenSynced=function(e){var t=this;if(this._syncEvaluatorConfig(),!this.hasJobInWorker()&&!this.changeSet)return void setTimeout(e,0);this.syncId++,this.syncRequests.push({id:this.syncId,callback:e}),this.applyToChangeSets(function(e){e.syncId=t.syncId})},e.prototype.applyToChangeSets=function(e){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),e(this.changeSet),e(this.cumulativeChangeSet),this.processChangeSet()},e.prototype.clearStatementsAndStartCompleteState=function(){this.hasJobInWorker()&&this.suspend(),this.applyToChangeSets(function(e){e.isCompleteState=!0,delete e.statements})},e.prototype.addStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e.id]=i.default(e)})},e.prototype.removeStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e]=null})},e.prototype._syncEvaluatorConfig=function(){if(this.readEvaluatorConfig){var e=this.readEvaluatorConfig();for(var t in e)this._applyIfChanged(e,t)}},e.prototype._applyIfChanged=function(e,t){var n=this.cumulativeChangeSet&&this.cumulativeChangeSet[t],r=e[t];a.isEqual(n,r)||this.applyToChangeSets(function(e){e[t]=r})},e}();t.Evaluator=s}),define("graphing/canvaslayer",["require","jquery","pjs","browser","lib/i18n"],function(e){"use strict";var t=e("jquery"),n=e("pjs"),r=e("browser"),i=e("lib/i18n");return n(function(e){e.init=function(e){this.grapher=e,this.$=t("<div class='dcg-graph-outer' role='img'></div>").attr("aria-roledescription",this.t("graph paper")),this.canvas_node=t("<canvas class='dcg-graph-inner'></canvas>").css("position","relative").css("display","block"),this.devicePixelRatio=window.devicePixelRatio||1,this.ctx=this.canvas_node[0].getContext("2d"),this.resize(0,0),r.IS_IOS&&r.IS_IN_IFRAME&&(this.$.css("-webkit-transform","translate3d(0,-.25px,0)"),this.$.append('<div style="width:1px; height:.5px; pointer-events:none; opacity: 0;" aria-hidden="true">text</div>')),this.$.append(this.canvas_node)},e.resize=function(e,t,n){n=n||this.devicePixelRatio,e===this.width&&t===this.height||(this.width=e,this.height=t,this.canvas_node.css("width",e+"px").css("height",t+"px").attr("width",e*n).attr("height",t*n),this.ctx=this.canvas_node[0].getContext("2d"),this.ctx.scale(n,n))},e.t=function(e,t){return i.t(e,t,this.grapher.settings.language)},e.getAriaLabel=function(e){var t="";if(0===e)return this.t("Empty graph paper.");t=1===e?this.t("Graph paper showing 1 graph."):this.t("Graph paper showing __count__ graphs.",{count:e});var n=this.grapher.getAudioTrace();if(n&&!n.getAudioTraceActive()){void 0!==n.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1})&&(r.IS_APPLE?t+=this.t(" Press OPTION+T for audio trace."):t+=this.t(" Press ALT+T for audio trace."))}return t},e.updateAria=function(e,t){this.$.attr("aria-hidden",!e||!this.grapher.settings.config.graphpaper).attr("tabindex",e&&this.grapher.settings.config.graphpaper&&this.grapher.settings.config.enableTabindex&&t>0?0:-1).attr("aria-label",this.getAriaLabel(t))},e.redraw=function(){}})}),define("loadcss!poi",function(){}),define("graphing/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LINE_WIDTH=t.OFFSCREEN_RENDER_MARGIN=t.POI_ALPHA=t.POLAR_ALPHA=t.HIGHLIGHTED_POINT_ALPHA=t.POINT_ALPHA=t.FILL_ALPHA=t.MAX_DOTTED_SEGMENTS=t.ZOOM_FACTOR=t.DOUBLETAP_ZOOM=t.ANIMATE_ZOOM_DURATION=void 0,t.ANIMATE_ZOOM_DURATION=500,t.DOUBLETAP_ZOOM=2,t.ZOOM_FACTOR=1.0625,t.MAX_DOTTED_SEGMENTS=1e3,t.FILL_ALPHA=.4,t.POINT_ALPHA=.9,t.HIGHLIGHTED_POINT_ALPHA=.6,t.POLAR_ALPHA=.2,t.POI_ALPHA=.01,t.OFFSCREEN_RENDER_MARGIN=20,t.LINE_WIDTH=2.5}),define("graphing/dasheddrawer",["require","./constants","core/math/distance"],function(e){"use strict";function t(e,t,r){return this.pattern=r,this.replen=this.pattern[0]+this.pattern[1],t/this.replen>n.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=t*this.pattern[0]/this.replen/n.MAX_DOTTED_SEGMENTS,this.pattern[1]=t*this.pattern[1]/this.replen/n.MAX_DOTTED_SEGMENTS),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=e,this}var n=e("./constants"),r=e("core/math/distance");return t.getTotalSegmentLength=function(e){if(e.length<4)return 0;for(var t=0,n=0,i=e[0],o=e[1];isNaN(i)||isNaN(o);){if((n+=2)>=e.length)return 0;i=e[n],o=e[n+1]}var a,s;for(n+=2;n<e.length;n+=2)a=e[n],s=e[n+1],isNaN(a)||isNaN(s)||(t+=r.hypot(a-i,s-o),i=a,o=s);return t},t.prototype.start=function(e,t){this.ctx.desmos_batching||this.ctx.beginPath(),this.px=e,this.py=t},t.prototype.next=function(e,t){var n=this.pattern[this.pstate],r=Math.sqrt(Math.pow(e-this.px,2)+Math.pow(t-this.py,2));if(r>1e-5){for(;r+this.dstaccum>=n;){var i=e-this.px,o=t-this.py,a=n-this.dstaccum;i*=a/r,o*=a/r,0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+i,this.py+o)),this.dstaccum=0,this.px+=i,this.py+=o,this.pstate=1-this.pstate,n=this.pattern[this.pstate],r-=a}0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(e,t))}this.px=e,this.py=t,this.dstaccum+=r},t.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke(),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null},t.prototype.drawSegment=function(e){for(var t=0,n=e[0],r=e[1];isNaN(n)||isNaN(r);){if((t+=2)>=e.length)return;n=e[t],r=e[t+1]}this.start(n,r);var i,o;for(t+=2;t<e.length;t+=2)i=e[t],o=e[t+1],isNaN(i)||isNaN(o)||this.next(i,o);this.close()},t}),define("graphing/svg-classes",["require","exports"],function(e,t){"use strict";function n(e,t){var n=e;n._dcgSaveClassName&&n._dcgSaveClassName(t)}function r(e){var t=e;t._dcgRestoreClassName&&t._dcgRestoreClassName()}Object.defineProperty(t,"__esModule",{value:!0}),t.restore=t.save=void 0,t.save=n,t.restore=r}),define("graphing/draw-image-to-ctx",["require","exports","graphing-calc/models/list","./svg-classes"],function(e,t,n,r){"use strict";function i(e,t,i){if(e.computed_x)for(var o=0;o<e.computed_x.length;o++){var a=e.computed_x[o],s=e.computed_y[o],c=e.computed_width[o],l=e.computed_height[o],u=e.computed_radian_angle[o];if(isFinite(a)&&isFinite(s)&&isFinite(c)&&isFinite(l)&&isFinite(u)){r.save(t,"dcg-svg-image"),t.save(),r.restore(t),t.globalAlpha=e.computed_opacity[o];var d=i.mapy(l)-i.mapy(0),p=i.mapx(c)-i.mapx(0),h=0===u?1:Math.abs(p/c*(l/d)),f=i.mapx(a),m=i.mapy(s),g=f-p/2,y=m+d*h/2,v=l<0?-1:1,b=c<0?-1:1,x=g*b,E=y*v,w=Math.abs(p),_=Math.abs(d);0!==u&&(t.translate(f,m),t.scale(1,1/h),t.rotate(u),t.translate(-f,-m)),t.scale(b,v);var S=!1,M=!1,k=e.controller.getGrapher();k&&"2d"===k.type&&(S=k.clickableObjectsLayer.shouldDrawHovered(e.id),M=k.clickableObjectsLayer.shouldDrawPressed(e.id));var C=e.imageObj;M?e.depressedImageObj?C=e.depressedImageObj:E+=1:S&&(e.hoveredImageObj?C=e.hoveredImageObj:t.globalAlpha*=.8),t.drawImage(C,x,E,w,_*h),n.isItemSelected(e)&&(t.beginPath(),t.rect(x,E,w,_*h),t.restore(),t.save(),t.strokeStyle="#6993C7",t.lineWidth=2,t.stroke()),t.restore()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawImageToCtx=void 0,t.drawImageToCtx=i}),define("graphing/svg-groups",["require","exports"],function(e,t){"use strict";function n(e,t){var n=e;n._dcgStartNamedGroup&&n._dcgStartNamedGroup(t)}function r(e,t){var n=e;n._dcgSetTitle&&n._dcgSetTitle(t)}function i(e){var t=e;t._dcgEndNamedGroup&&t._dcgEndNamedGroup()}Object.defineProperty(t,"__esModule",{value:!0}),t.restore=t.setTitle=t.save=void 0,t.save=n,t.setTitle=r,t.restore=i}),define("graphing/graphslayer",["require","pjs","./clipping","./dasheddrawer","./constants","./viewport","core/types/graphmode","underscore","expressions/colors","core/types/styles","core/types/styles","core/types/line-opacity","./draw-image-to-ctx","./svg-groups","./svg-classes"],function(e){"use strict";var t=e("pjs"),n=e("./clipping"),r=e("./dasheddrawer"),i=e("./constants"),o=e("./viewport").Viewport,a=e("core/types/graphmode"),s=e("underscore"),c=e("expressions/colors"),l=e("core/types/styles").PointStyle,u=e("core/types/styles").LineStyle,d=e("core/types/line-opacity"),p=e("./draw-image-to-ctx").drawImageToCtx,h=e("./svg-groups"),f=e("./svg-classes"),m={},g=function(e){return new o(-3,e.width+3,-3,e.height+3)},y=function(e){return Math.round(e-.5)+.5},v=t(function(e){e.init=function(e,t){if(v.getExpressionAriaLabel=t,e.config.plaidMode)for(var n in c)c.hasOwnProperty(n)&&"string"==typeof c[n]&&(m[c[n]]=document.createElement("img"),m[c[n]].setAttribute("src","/assets/img/april-fools/"+n.toLowerCase()+".png"))},e.redrawToCtx=function(e,t,n,r,i,o,a){if(h.save(e,"expressions"),void 0===i)throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");i.forEach(function(i){var s=n[i],c=r[i];void 0!==s&&s.visible&&(h.save(e,"sketch"),t.settings.takingScreenshot&&h.setTitle(e,v.getExpressionAriaLabel(i)),v.drawSketchToCtx(n[i],e,t,o,a),h.restore(e)),c&&c.shouldGraph&&c.foreground&&p(c,e,t)}),h.restore(e)}});return v.eachSegment=function(e,t){for(var n=0;n<e.branches.length;n++)for(var r=e.branches[n],i=0;i<r.segments.length;i++){var o=r.segments[i];t(r,o)}},v.drawSketchToCtx=function(e,t,n,r,o){if(e.branches&&e.branches.length){var s=t.lineWidth,c=t.globalAlpha,l=n.settings.globalCurveColor?n.settings.globalCurveColor:e.color,p=m[l];if(p&&p.complete&&p.naturalWidth>0){var h=t.createPattern(p,"repeat");t.fillStyle=h}else t.fillStyle=l;t.strokeStyle=l,t.lineJoin="round",t.lineCap="round";var f=!!n.settings.takingScreenshot,g=1;o.shouldDrawHovered(e.id)&&(g=1.2),o.shouldDrawPressed(e.id)&&(g=1.4);for(var y=0;y<e.branches.length;y++){var b=e.branches[y];if(b.graphMode!==a.XYPOINT&&b.graphMode!==a.XYPOINT_MOVABLE){b.graphMode!==a.POLAR&&(t.desmos_batching=!0,t.beginPath());for(var x=0;x<b.segments.length;x++){var E=b.segments[x],w=a.Y;if(b.flip&&(w=a.X),b.graphMode&&(w=b.graphMode),w!==a.POLYGONFILL||n.settings.disableFill){if(w!==a.IMPLICIT){var _=b.operator,S=!n.settings.disableFill&&("<"==_||">"==_||"<="==_||">="==_||"\\leq"==_||"\\le"==_||"\\geq"==_||"\\ge"==_),M="<="==_||"<"==_||"\\leq"==_||"\\le"==_;S&&v.fillGraphStrokeToCtx(t,n,E,M,w)}}else v.fillPolygonToCtx(t,n,E,b.fillOpacity*g)}t.globalAlpha=this._clampedOpacity(b.fillOpacity*g,i.FILL_ALPHA),b.graphMode!==a.POLAR&&(t.fill(),t.desmos_batching=!1),t.globalAlpha=1}}v.eachSegment(e,function(r,s){if(r.graphMode!==a.XYPOINT&&r.graphMode!==a.XYPOINT_MOVABLE){var c=a.Y;r.flip&&(c=a.X),r.graphMode&&(c=r.graphMode);var l=void 0!==r.lineWidth,p=r.lineWidth,h=i.LINE_WIDTH;if(!l||!(p<=0)&&isFinite(p)){t.lineWidth=l?p:h;var f=n.settings.graphLineWidth/h;t.lineWidth*=f,t.globalAlpha*=n.settings.curveOpacity,t.globalAlpha=this._clampedOpacity(1===n.settings.curveOpacity?1:r.lineOpacity,d.DEFAULT);var m=r.operator,g="default";"<"==m||">"==m||"!="==m||e.style===u.DASHED||r.style===u.DASHED?g=u.DASHED:e.style!==u.DOTTED&&r.style!==u.DOTTED||(g=u.DOTTED,l&&(t.lineWidth*=2));var y=o.shouldDrawPressed(e.id),b=o.shouldDrawHovered(e.id);(y||b)&&(t.save(),t.lineWidth+=4.5,t.globalAlpha*=y?.5:.3,v.drawGraphStrokeToCtx(t,n,s,g,c,m),t.restore()),v.drawGraphStrokeToCtx(t,n,s,g,c,m)}}}.bind(this)),t.lineWidth=s,t.globalAlpha=c,v.eachSegment(e,function(i,s){if(i.graphMode===a.XYPOINT&&i.showPoint||i.graphMode===a.XYPOINT_MOVABLE&&f){var c,l=[];if(i.interactiveLabel&&e.labels)for(var u=0,d=e.labels.length;u<d;u++){var p=e.labels[u],h=r.isOpenPOI(p),m=r.getHoveredPOI()===p;l.push(h||m),!h&&m&&(c=u)}var g=1;"medium"===i.pointSize?g=1.5:"large"===i.pointSize&&(g=2.25);var y=o.shouldDrawPressed(e.id),b=o.shouldDrawHovered(e.id),x=1;y?x=.5:b&&(x=.3),1!==x&&(v.drawPointsToCtx(t,n,s,i.style,l,c,1.5*g,x),t.restore()),v.drawPointsToCtx(t,n,s,i.style,l,c,g,1)}}.bind(this))}},v.drawGraphStrokeToCtx=function(e,t,i,o,a,s){var c=n.getClippingGraphType(a,"="!==s,t.settings),l=n.mapSegmentToCanvas(i,t.viewport,t.screen,c),d=n.clipStrokeEdges(l,g(t.screen));if(0!==d.length){e.save(),f.save(e,"dcg-svg-curve");var p,h;if(o==u.DASHED)h=new r(e,r.getTotalSegmentLength(d),[11,7]),h.drawSegment(d);else if(o==u.DOTTED)h=t.settings.config.projectorMode?new r(e,r.getTotalSegmentLength(d),[.1,16]):new r(e,r.getTotalSegmentLength(d),[.1,8]),h.drawSegment(d);else if(o!==u.SOLID&&"default"!==o||1!==e.lineWidth){for(e.desmos_batching||e.beginPath(),e.moveTo(d[0],d[1]),p=0;p<d.length;p+=2)e.lineTo(d[p],d[p+1]);e.desmos_batching||e.stroke()}else{e.desmos_batching||e.beginPath();var m=d.length>4||d[0]!==d[2]&&d[1]!==d[3];if(m)for(e.moveTo(d[0],d[1]),p=0;p<d.length;p+=2)e.lineTo(d[p],d[p+1]);else for(e.moveTo(y(d[0]),y(d[1])),p=0;p<d.length;p+=2)e.lineTo(y(d[p]),y(d[p+1]));e.desmos_batching||e.stroke()}f.restore(e),e.restore()}},v.mapPointToScreen=function(e,t,n){var r=e.mapx(t)-.5;if(r<-20||r>e.screen.width+20)return null;var i=e.mapy(n)-.5;return i<-20||i>e.screen.height+20?null:{x:r,y:i}},v.drawPointToCtx=function(e,t,n,r,o,a,s,c,u){var d,p=e.lineWidth,h=e.fillStyle,m=v.mapPointToScreen(t,n,r);if(!m)return!1;f.save(e,"dcg-svg-point"),e.globalAlpha=o||i.POINT_ALPHA,u&&(e.globalAlpha*=u),e.desmos_batching||e.beginPath();var g=t.settings.pointLineWidth;return s&&(g=t.settings.config.projectorMode?17:11,e.lineWidth=g),c&&(g*=c,e.lineWidth=g),a===l.CROSS?(d=.4*g,e.moveTo(m.x-d,m.y-d),e.lineTo(m.x+d,m.y+d),e.moveTo(m.x+d,m.y-d),e.lineTo(m.x-d,m.y+d),e.lineWidth=.3*g):a===l.OPEN?(d=.42*g,e.moveTo(m.x+d,m.y),e.arc(m.x,m.y,d,0,2*Math.PI,!0),e.closePath(),e.fillStyle="white",e.lineWidth=.25*g,e.fill()):(e.moveTo(m.x-.1,m.y-.1),e.lineTo(m.x-.1,m.y+.1),e.lineTo(m.x+.1,m.y+.1),e.lineTo(m.x+.1,m.y-.1)),e.desmos_batching||e.stroke(),e.globalAlpha=1,e.lineWidth=p,e.fillStyle=h,f.restore(e),!0},v.drawPointsToCtx=function(e,t,n,r,o,a,s,c){var l=e.lineWidth;e.lineWidth=t.settings.pointLineWidth;for(var u=0;u<n.length;u++)v.drawPointToCtx(e,t,n[u][0],n[u][1],a===u&&i.HIGHLIGHTED_POINT_ALPHA,r,o[u],s,c);e.lineWidth=l},v.fillGraphStrokeToCtx=function(e,t,r,o,s){e.globalAlpha=s===a.POLAR?i.POLAR_ALPHA:i.FILL_ALPHA;var c,l=null,u=null;if(s===a.POLAR){u=n.ALL;var d=o?0:t.viewport.polarDiameter(),p=t.settings.degreeMode?180:2*Math.PI;l=n.computePolarFill(r,d,p)}else s===a.Y?(u=n.Y,c=o?t.viewport.ymin:t.viewport.ymax,l=n.computeCartesianFill(r,c)):s===a.X&&(u=n.X,c=o?t.viewport.xmin:t.viewport.xmax,l=n.computeCartesianFill(r,c));for(var h=g(t.screen),m=0;m<l.length;m++){var y=n.getClippingGraphType(s,!0,t.settings),v=n.mapSegmentToCanvas(l[m],t.viewport,t.screen,y),b=n.clipFillEdges(v,h,u);if(b.length>=6){f.save(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(b[0],b[1]);for(var x=2;x<b.length;x+=2)e.lineTo(b[x],b[x+1]);e.lineTo(b[0],b[1]),e.desmos_batching||e.fill(),f.restore(e)}}e.globalAlpha=1},v._clampedOpacity=function(e,t){return e<0?0:e>1?1:s.isFinite(e)?e:t},v.fillPolygonToCtx=function(e,t,r,o){var a=g(t.screen);e.globalAlpha=this._clampedOpacity(o,i.FILL_ALPHA);var s=n.mapSegmentToCanvas(r,t.viewport,t.screen,n.Y_EQUALS),c=n.clipFillEdges(s,a,n.ALL);if(c.length>=6){f.save(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(c[0],c[1]);for(var l=2;l<c.length;l+=2)e.lineTo(c[l],c[l+1]);e.desmos_batching||e.fill(),f.restore(e)}e.globalAlpha=1},v}),define("graphing/poidotslayer",["require","loadcss!poi","pjs","./graphslayer","./constants"],function(e){"use strict";e("loadcss!poi");var t=e("pjs"),n=e("./graphslayer"),r=e("./constants"),i=t(function(e){e.init=function(){this.savedPOI=[]},e.redrawToCtx=function(e,t,n,r,o){var a=[];for(var s in n){var c=n[s];if(c.visible){c.showHighlight&&i.drawSketchHighlight(c,e,t,r,o);var l=c.getPOI();(c.showPOI||l.length&&l[0].isAttachedToPlottedPoint())&&a.push.apply(a,i.drawPOIs(l,e,"#AAAAAA",t))}}this.savedPOI=a},e.getDrawnPOI=function(){return this.savedPOI}});return i.drawSketchHighlight=function(e,t,r,i,o){r.settings.setProperty("highlight",!0),n.drawSketchToCtx(e,t,r,i,o),r.settings.setProperty("highlight",!1)},i.drawPOIs=function(e,t,i,o){t.lineWidth=o.settings.pointLineWidth,t.strokeStyle=i||"#AAAAAA",t.fillStyle=i||"#AAAAAA",t.lineJoin="round",t.lineCap="round";var a=t.globalAlpha;t.globalAlpha=r.POI_ALPHA;var s,c,l=[],u=e.length;if(u&&e[0].isAttachedToPlottedPoint())for(s=0;s<u;s++)c=e[s],n.mapPointToScreen(o,c.x,c.y)&&l.push(c);else for(s=0;s<u;s++)c=e[s],n.drawPointToCtx(t,o,c.x,c.y)&&l.push(c);return t.globalAlpha=a,l},i}),define("graphing/stepnumber",["require","pjs","./svg-classes"],function(e){"use strict";var t=e("pjs"),n=e("./svg-classes"),r=document.createElement("canvas").getContext("2d"),i=t(function(e){e.init=function(e,t){this._label=e,this._fontSize=t,this._layout=this._computeLayout(e,t)},e._computeLayout=function(e,t){var n={};return e.superscript?(n.mantissa_height=t,i.setCtxFontSize(r,n.mantissa_height),n.mantissa_width=r.measureText(e.mantissa).width,n.superscript_height=Math.round(.8*t),i.setCtxFontSize(r,n.superscript_height),n.superscript_width=r.measureText(e.superscript).width,n.mantissa_x=0,n.mantissa_y=t/5,n.superscript_x=n.mantissa_width/2+n.superscript_width/2,n.superscript_y=-t/4,n.top=n.superscript_y-n.superscript_height/2,n.bottom=n.mantissa_y+n.mantissa_height/2,n.left=n.mantissa_x-n.mantissa_width/2,n.right=n.superscript_x+n.superscript_width/2):(n.mantissa_height=t,i.setCtxFontSize(r,t),n.mantissa_width=r.measureText(e.string).width,n.mantissa_x=0,n.mantissa_y=0,n.top=n.mantissa_y-n.mantissa_height/2,n.bottom=n.mantissa_y+n.mantissa_height/2,n.left=n.mantissa_x-n.mantissa_width/2,n.right=n.mantissa_x+n.mantissa_width/2),n},e.getRect=function(){return this.getRectWhenCenteredAt({x:0,y:0})},e.getRectWhenCenteredAt=function(e){return{left:this._layout.left+e.x,right:this._layout.right+e.x,top:this._layout.top+e.y,bottom:this._layout.bottom+e.y}},e.getWidth=function(){return this._layout.right-this._layout.left},e.getHeight=function(){return this._layout.bottom-this._layout.top},e.clampBoundsWithinRect=function(e,t){var n={};return e.x+this._layout.left<t.left?n.x=t.left-this._layout.left:e.x+this._layout.right>t.right?n.x=t.right-this._layout.right:n.x=e.x,e.y+this._layout.top<t.top?n.y=t.top-this._layout.top:e.y+this._layout.bottom>t.bottom?n.y=t.bottom-this._layout.bottom:n.y=e.y,n},e.getValue=function(){return this._label.value},e.getMinusWidth=function(){return this.getValue()<0?(i.setCtxFontSize(r,this._fontSize),r.measureText("-1").width-r.measureText("1").width):0},e.getString=function(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string},e.drawCenteredAt=function(e,t,r){var o=t.x,a=i.computeBaselineFromCenter(t.y,this._fontSize);r&&n.save(e,r),e.save(),r&&n.restore(e),i.setCtxFontSize(e,this._fontSize),this._label.superscript?(e.strokeText(this._label.mantissa,this._layout.mantissa_x+o,this._layout.mantissa_y+a),e.strokeText(this._label.superscript,this._layout.superscript_x+o,this._layout.superscript_y+a),e.fillText(this._label.mantissa,this._layout.mantissa_x+o,this._layout.mantissa_y+a),e.fillText(this._label.superscript,this._layout.superscript_x+o,this._layout.superscript_y+a)):(e.strokeText(this._label.string,this._layout.mantissa_x+o,this._layout.mantissa_y+a),e.fillText(this._label.string,this._layout.mantissa_x+o,this._layout.mantissa_y+a)),e.restore()}});return i.computeBaselineFromCenter=function(e,t){return e+.272*t},i.setCtxFontSize=function(e,t){e.font=t+"px Arial",e.textAlign="center"},i}),define("graphing/computestepsizes",["require","./stepnumber","core/lib/label"],function(e){"use strict";function t(e){return e?{base:10,major:[e,2*e,5*e],minor:[4,4,5]}:i.RATIONAL_STEPS}var n=e("./stepnumber"),r=e("core/lib/label"),i={},o=function(e,t,n,r){var i=Math.ceil(e/n),o=Math.floor(t/n),a=1/n;if(!(i>o||o-i>1e4))for(var s=i;s<=o;s++)r(s/a)};return i.RATIONAL_STEPS={base:10,major:[1,2,5],minor:[5,4,5]},i.PI_STEPS={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},i.PI_FRAC_STEPS={base:2,major:[Math.PI/3],minor:[3]},i.bestStep=function(e,t){for(var n,r,i,o,a=1/0,s=0;s<t.major.length;s++)n=t.major[s],i=Math.ceil(Math.log(e/n)/Math.log(t.base)),(o=n*Math.pow(t.base,i))<a&&(a=o,r=a/t.minor[s]);return{major:a,minor:r}},i.countStepsInRange=function(e,t,n){return 1+(t-e)/n},i.calculateSpaceBetweenRects=function(e,t){var n,r;return r=e.right<t.left?t.left-e.right:t.right<e.left?e.left-t.right:0,n=e.bottom<t.top?t.top-e.bottom:t.bottom<e.top?e.top-t.bottom:0,Math.max(n,r)},i.estimateMajors=function(e){var t=e.screen.width,n=e.screen.height,r=e.viewport.xmax-e.viewport.xmin,i=e.viewport.ymax-e.viewport.ymin,o=e.settings.pixelsPerLabel;return{majorStepX:o/t*r,majorStepY:o/n*i}},i.cartesian=function(e){var a,s={},c=Math.abs(e.settings.xAxisStep),l=Math.abs(e.settings.yAxisStep),u=e.viewport.xmax-e.viewport.xmin,d=e.viewport.ymax-e.viewport.ymin,p=r.value(c,u).string.indexOf("π")>=0,h=r.value(l,d).string.indexOf("π")>=0,f=i.countStepsInRange(e.viewport.xmin,e.viewport.xmax,c),m=i.countStepsInRange(e.viewport.ymin,e.viewport.ymax,l),g=i.estimateMajors(e),y=e.settings.labelSize;if(c&&c!==Math.PI&&f>=3&&f<100){var v=0;e.settings.xAxisNumbers&&o(e.viewport.xmin,e.viewport.xmax,c,function(e){var t=n(r.value(e,u),y);v=Math.max(t.getWidth(),v)}),a=v+10,e.settings.xAxisNumbers||(a=1===e.settings.xAxisMinorSubdivisions?8:20),f*a<=e.screen.width&&(s.majorStepX=c,s.minorStepX=3===c||5===c?1:c/4)}if(l&&l!==Math.PI&&m>=3&&m<100){var b=0;e.settings.yAxisNumbers&&o(e.viewport.ymin,e.viewport.ymax,l,function(e){var t=n(r.value(e,d),y);b=Math.max(t.getHeight(),b)}),a=b+10,e.settings.yAxisNumbers||(a=1===e.settings.yAxisMinorSubdivisions?8:20),m*a<=e.screen.height&&(s.majorStepY=l,s.minorStepY=3===l||5===l?1:l/4)}if(!s.majorStepX){var x;x=p?g.majorStepX>=1?i.PI_STEPS:i.PI_FRAC_STEPS:t(c);var E=i.bestStep(g.majorStepX,x);s.majorStepX=E.major,s.minorStepX=E.minor}if(!s.majorStepY){var w;w=h?g.majorStepY>=1?i.PI_STEPS:i.PI_FRAC_STEPS:t(l);var _=i.bestStep(g.majorStepY,w);s.majorStepY=_.major,s.minorStepY=_.minor}if(c===l){var S=e.screen.width/u/(e.screen.height/d);S>=1&&S<=2?(s.majorStepX=s.majorStepY,s.minorStepX=s.minorStepY):S<=1&&S>=.5&&(s.majorStepY=s.majorStepX,s.minorStepY=s.minorStepX)}return e.settings.xAxisMinorSubdivisions>0&&(s.minorStepX=s.majorStepX/e.settings.xAxisMinorSubdivisions),e.settings.yAxisMinorSubdivisions>0&&(s.minorStepY=s.majorStepY/e.settings.yAxisMinorSubdivisions),s},i.polar=function(e){var t=i.estimateMajors(e),n=i.bestStep(t.majorStepX,i.RATIONAL_STEPS),r=i.bestStep(t.majorStepY,i.RATIONAL_STEPS),o=n.major>r.major?n:r;return{majorStepR:o.major,minorStepR:o.minor}},i}),define("graphing/gridlayer",["require","pjs","./stepnumber","core/lib/label","./computestepsizes","core/graphing-calc/json/graph-settings","./svg-classes","./svg-groups"],function(e){"use strict";var t=e("pjs"),n=e("./stepnumber"),r=e("core/lib/label"),i=e("./computestepsizes"),o=e("core/graphing-calc/json/graph-settings").AxisArrowModes,a=e("./svg-classes"),s=e("./svg-groups"),c=t(function(e){e.redrawToCtx=function(e,t,n){s.save(e,"graphpaper");var r,o,a=t.settings.showGrid;if(t.settings.polarMode&&a)r=i.polar(t),s.save(e,"grid"),this.drawPolarGrid(e,t,r),s.restore(e),s.save(e,"axis"),this.drawAxes(e,t,n),o=this.drawPolarStepNumbers(e,t,r),this.drawLabels(e,t,o),s.restore(e);else{r=i.cartesian(t),a&&(s.save(e,"grid"),this.drawCartesianGrid(e,t,r),s.restore(e));var c=!a;s.save(e,"axis"),this.drawAxes(e,t,n),o=this.drawCartesianStepNumbers(e,t,r,c),this.drawLabels(e,t,o),s.restore(e)}s.restore(e)},e.addTextShadow=function(e,t){e.strokeStyle=t.settings.getBackgroundColor(),e.lineWidth=3,e.miterLimit=2},e.drawPolarGrid=function(e,t,n){e.save()
;var r=t.settings.minorAxisOpacity,i=t.settings.majorAxisOpacity,o=1-(1-i)/(1-r),s=Math.round(t.mapx(0))-.5,c=Math.round(t.mapy(0))-.5,u=t.screen.height/(t.viewport.ymax-t.viewport.ymin),d=t.screen.width/(t.viewport.xmax-t.viewport.xmin),p=u/d,h=d/u,f=c/p,m=t.viewport.smallestR(),g=t.viewport.largestR(),y=n.minorStepR*Math.max(1,Math.floor(m/n.minorStepR)),v=n.majorStepR*Math.max(1,Math.floor(m/n.majorStepR));e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+r+")",l(y,g,n.minorStepR,function(n){a.save(e,"dcg-svg-minor-gridline"),e.beginPath(),a.restore(e),e.scale(1,p);var r=t.mapx(n)-s;e.moveTo(s+r,f),e.arc(s,f,r,0,2*Math.PI),e.scale(1,h),e.stroke()}),l(0,359,m>0?5:15,function(n){if((0!==n&&180!==n||!t.settings.showXAxis)&&(90!==n&&270!==n||!t.settings.showYAxis)){a.save(e,"dcg-svg-minor-gridline"),e.beginPath(),a.restore(e),e.moveTo(s,c);var r=t.mapx(g*Math.cos(n*Math.PI/180)),i=t.mapy(g*Math.sin(n*Math.PI/180));e.lineTo(Math.round(r)-.5,Math.round(i)-.5),e.stroke()}}),e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+o+")",l(v,g,n.majorStepR,function(n){a.save(e,"dcg-svg-major-gridline"),e.beginPath(),a.restore(e),e.scale(1,p);var r=t.mapx(n)-s;e.moveTo(s+r,f),e.arc(s,f,r,0,2*Math.PI),e.scale(1,h),e.stroke()}),e.restore()},e.drawCartesianGrid=function(e,t,n){e.save();var r=t.viewport.xmin,i=t.viewport.ymin,o=t.viewport.xmax,s=t.viewport.ymax,c=t.screen.width,u=t.screen.height,d=u,p=0;t.settings.restrictGridToFirstQuadrant&&(r=0,i=0,d=t.mapy(0),p=t.mapx(0));var h=t.settings.minorAxisOpacity,f=t.settings.majorAxisOpacity;e.lineWidth=1,e.strokeStyle="rgba(0, 0 , 0, "+h+")",a.save(e,"dcg-svg-minor-gridline"),l(r,o,n.minorStepX,function(n){if(0!==n||!t.settings.showYAxis){var r=Math.round(t.mapx(n));r!==c&&(e.beginPath(),e.moveTo(r-.5,0),e.lineTo(r-.5,d),e.stroke())}}),l(i,s,n.minorStepY,function(n){if(0!==n||!t.settings.showXAxis){var r=Math.round(t.mapy(n));r!==u&&(e.beginPath(),e.moveTo(p,r-.5),e.lineTo(c,r-.5),e.stroke())}}),a.restore(e);var m=1-(1-f)/(1-h);e.strokeStyle="rgba(0, 0 , 0, "+m+")",a.save(e,"dcg-svg-major-gridline"),l(r,o,n.majorStepX,function(n){if(0!==n||!t.settings.showYAxis){var r=Math.round(t.mapx(n));r!==c&&(e.beginPath(),e.moveTo(r-.5,0),e.lineTo(r-.5,d),e.stroke())}}),l(i,s,n.majorStepY,function(n){if(0!==n||!t.settings.showXAxis){var r=Math.round(t.mapy(n));r!==u&&(e.beginPath(),e.moveTo(p,r-.5),e.lineTo(c,r-.5),e.stroke())}}),a.restore(e),e.restore()},e.drawAxes=function(e,t,n){function r(t,n,r){e.save();var i=Math.PI/12,o=8*Math.max(e.lineWidth,1.5);e.lineJoin="round",e.fillStyle=u,e.strokeStyle=u,e.beginPath(),e.moveTo(t,n),e.lineTo(t+Math.cos(r-i)*o,n+Math.sin(r-i)*o),e.lineTo(t+Math.cos(r+i)*o,n+Math.sin(r+i)*o),e.lineTo(t,n),e.lineTo(t+Math.cos(r-i)*o,n+Math.sin(r-i)*o),e.stroke(),e.fill(),e.restore()}var i=t.settings.axisLineOffset,c=t.settings.axisOpacity.toString(),l="rgba(127,205,230,"+c+")",u="rgba(0,0,0,"+c+")",d=t.settings.xAxisArrowMode,p=t.settings.yAxisArrowMode,h=t.settings.showXAxis,f=t.settings.showYAxis,m=Math.round(t.mapx(0))-i,g=Math.round(t.mapy(0))-i,y=t.screen.height,v=t.screen.width,b=y,x=0;t.settings.restrictGridToFirstQuadrant&&(b=g,x=m,d===o.BOTH&&(d=o.POSITIVE),p===o.BOTH&&(p=o.POSITIVE)),f&&(s.save(e,"yaxis"),t.settings.takingScreenshot&&s.setTitle(e,t.settings.yAxisLabel||"Y axis"),a.save(e,"dcg-svg-axis-line"),e.lineWidth=1*t.settings.axisLineWidth,e.strokeStyle="y"===n?l:u,p===o.BOTH?(e.beginPath(),e.moveTo(m,2*t.settings.axisLineWidth),e.lineTo(m,y-2*t.settings.axisLineWidth),e.stroke(),r(m,y-t.settings.axisLineWidth,3*Math.PI/2),r(m,t.settings.axisLineWidth,Math.PI/2)):p===o.POSITIVE?(e.beginPath(),e.moveTo(m,2*t.settings.axisLineWidth),e.lineTo(m,b),e.stroke(),r(m,t.settings.axisLineWidth,Math.PI/2)):(e.beginPath(),e.moveTo(m,0),e.lineTo(m,b),e.stroke()),a.restore(e),s.restore(e)),h&&(s.save(e,"xaxis"),t.settings.takingScreenshot&&s.setTitle(e,t.settings.xAxisLabel||"X axis"),a.save(e,"dcg-svg-axis-line"),e.lineWidth=1*t.settings.axisLineWidth,e.strokeStyle="x"===n?l:u,d===o.BOTH?(e.beginPath(),e.moveTo(2*t.settings.axisLineWidth,g),e.lineTo(v-2*t.settings.axisLineWidth,g),e.stroke(),r(t.settings.axisLineWidth,g,0),r(v-t.settings.axisLineWidth,g,Math.PI)):d===o.POSITIVE?(e.beginPath(),e.lineTo(x,g),e.lineTo(v-2*t.settings.axisLineWidth,g),e.stroke(),r(v-t.settings.axisLineWidth,g,Math.PI)):(e.beginPath(),e.lineTo(x,g),e.lineTo(v,g),e.stroke()),a.restore(e),s.restore(e))},e.drawPolarStepNumbers=function(e,t,i){function o(e,n,r){var i=Math.sqrt(e*e-n*n);b<=i&&i<=x&&r.push({x:t.mapx(n),y:t.mapy(i)}),b<=-i&&-i<=x&&r.push({x:t.mapx(n),y:t.mapy(-i)})}function s(e,n,r){var i=Math.sqrt(e*e-n*n);y<=i&&i<=v&&r.push({x:t.mapx(i),y:t.mapy(n)}),y<=-i&&-i<=v&&r.push({x:t.mapx(-i),y:t.mapy(n)})}e.save();var c=t.settings.showGrid,p=t.settings.xAxisNumbers&&t.settings.showXAxis,h=t.settings.yAxisNumbers&&t.settings.showYAxis,f=c&&t.settings.polarNumbers,m=t.viewport.largestR(),g=t.viewport.smallestR(),y=t.viewport.xmin,v=t.viewport.xmax,b=t.viewport.ymin,x=t.viewport.ymax,E=t.screen.width,w=t.screen.height,_={left:3,right:E-3,top:3,bottom:w-3},S=t.settings.labelHangingColor,M=t.settings.getTextColor(),k=t.settings.labelSize,C=k;this.addTextShadow(e,t),e.fillStyle=M;var I=t.mapx(0),T=t.mapy(0),L=b<=0&&0<=x,D=y<=0&&0<=v,P=L&&p,A=D&&h,O="";if(!P&&!A&&c){var F,N,q,R,B=Math.abs(I),j=Math.abs(I-E),V=Math.abs(T),U=Math.abs(T-w);B<=j?(F="left",q=B):(F="right",q=j),V<=U?(N="top",R=V):(N="bottom",R=U),p&&h?O=q<=R?F:N:h?O=F:p&&(O=N)}var G={left:0,right:E,top:T-1,bottom:T+1},z={left:I-1,right:I+1,top:0,bottom:w};if(l(0,m,i.majorStepR,function(i){var a=[],c=[],l=[],u=n(r.value(i,m),k),f=u.getRect();switch(i>0?(A&&b<=i&&i<=x&&c.push({x:I-f.right-5,y:t.mapy(i)}),A&&b<=-i&&-i<=x&&c.push({x:I-f.right-5,y:t.mapy(-i)}),P&&y<=i&&i<=v&&a.push({x:t.mapx(i),y:T-f.top+3}),P&&y<=-i&&-i<=v&&a.push({x:t.mapx(-i),y:T-f.top+3})):A&&!p&&b<=i&&i<=x?c.push({x:I-f.right-5,y:t.mapy(i)}):P&&!h&&y<=i&&i<=v&&a.push({x:t.mapx(i),y:T-f.top+3}),O){case"top":s(i,x,l);break;case"bottom":s(i,b,l);break;case"left":o(i,y,l);break;case"right":o(i,v,l)}a.forEach(function(t){t=u.clampBoundsWithinRect(t,_),u.drawCenteredAt(e,t,"dcg-svg-axis-value"),d(G,u.getRectWhenCenteredAt(t))}),c.forEach(function(t){t=u.clampBoundsWithinRect(t,_),u.drawCenteredAt(e,t,"dcg-svg-axis-value"),d(z,u.getRectWhenCenteredAt(t))}),l.forEach(function(t){t=u.clampBoundsWithinRect(t,_),u.drawCenteredAt(e,t,"dcg-svg-axis-value")})}),f){var H=Math.ceil(g/i.majorStepR),W=Math.floor(m/i.majorStepR),K=Math.ceil((H+W)/2),Y=K*i.majorStepR;l(0,359,g>0?15:30,function(i){var o;o=t.settings.degreeMode?i.toString()+"°":r.value(i*Math.PI/180,2*Math.PI).string;var s=e.measureText(o).width/2,c=Y/1.05,l=c*Math.cos(i*Math.PI/180),d=c*Math.sin(i*Math.PI/180);if(!(l<y||l>v||d<b||d>x)){var p=t.mapx(l),h=t.mapy(d);0===i||180===i?h-=C:90!==i&&270!==i||(p+=s+3);var f=u(p,3+s,E-3-s),m=u(h,3+C,w-3-C);m=n.computeBaselineFromCenter(m,k),a.save(e,"dcg-svg-polar-axis-value"),e.save(),a.restore(e),e.fillStyle=S,n.setCtxFontSize(e,k),e.strokeText(o,f,m),e.fillText(o,f,m),e.restore()}})}return e.restore(),{x:G,y:z}},e.drawLabels=function(e,t,n){var r=t.viewport.xmin,i=t.viewport.xmax,o=t.viewport.ymin,s=t.viewport.ymax,c=t.screen.width,l=t.screen.height,u=(i-r)/c,d=(s-o)/l,h=t.settings.getTextColor(),f=t.mapx(0),m=t.mapy(0),g=t.settings.labelSize,y=t.settings.showXAxis&&t.settings.xAxisLabel,v=t.settings.showYAxis&&t.settings.yAxisLabel,b=n.x,x=n.y;if(y&&b){a.save(e,"dcg-svg-axis-label"),e.save(),a.restore(e),e.fillStyle=h;var E;if(e.__xLabelOffset&&t.settings.isViewportTransient&&p(e.__xLabelOffset.xscale,u)&&p(e.__xLabelOffset.yscale,d)&&(E={x:e.__xLabelOffset.x+f,y:e.__xLabelOffset.y+m}),this._setAxisLabelFont(e,y,g,t),!E){var w=e.measureText(y).width,_=c-w-15,S=g;E=b.bottom+S<l?{x:_,y:b.bottom+S}:{x:_,y:b.top-S/2},e.__xLabelOffset={x:E.x-f,y:E.y-m,xscale:u,yscale:d}}e.strokeText(y,E.x,E.y),e.fillText(y,E.x,E.y),e.restore()}else e.__xLabelPosition=null;if(v&&x){a.save(e,"dcg-svg-axis-label"),e.save(),a.restore(e),e.fillStyle=h;var M;if(e.__yLabelOffset&&t.settings.isViewportTransient&&p(e.__yLabelOffset.xscale,u)&&p(e.__yLabelOffset.yscale,d)&&(M={x:e.__yLabelOffset.x+f,y:e.__yLabelOffset.y+m}),this._setAxisLabelFont(e,v,g,t),!M){var k=e.measureText(v).width,C=g,I=k+5;if(!this._isShortMathyLabel(v)){var T=k;k=C,C=T,I=.5*k}var L=15+C;M=x.left-k>0?{x:x.left-I,y:L}:{x:x.right+k,y:L},e.__yLabelOffset={x:M.x-f,y:M.y-m,xscale:u,yscale:d}}e.translate(M.x,M.y),this._isShortMathyLabel(v)||e.rotate(-Math.PI/2),e.strokeText(v,0,0),e.fillText(v,0,0),e.restore()}else e.__yLabelPosition=null},e._isShortMathyLabel=function(e){return e.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)},e._setAxisLabelFont=function(e,t,n,r){this.addTextShadow(e,r),this._isShortMathyLabel(t)?e.font="italic "+Math.round(1.4*n.toString())+"px Times":e.font=Math.round(1.2*n.toString())+"px Arial"},e.drawCartesianStepNumbers=function(e,t,i,o){e.save();var s=t.settings.showXAxis,c=t.settings.showYAxis,u=s&&t.settings.xAxisNumbers,p=c&&t.settings.yAxisNumbers,h=t.viewport.xmin,f=t.viewport.xmax,m=t.viewport.ymin,g=t.viewport.ymax,y=t.screen.width,v=t.screen.height,b={left:3,top:3,right:y-3,bottom:v-3};t.settings.restrictGridToFirstQuadrant&&(h=0,m=0);var x=t.settings.labelHangingColor,E=t.settings.getTextColor(),w=t.mapx(0),_=t.mapy(0),S=t.settings.labelSize;this.addTextShadow(e,t);var M={left:0,right:y,top:_-1,bottom:_+1},k={left:w-1,right:w+1,top:0,bottom:v},C=!1;if(s&&c&&(u||p)){C=!0,e.fillStyle=E;var I=n(r.value(0,1),S);I.drawCenteredAt(e,{x:w-I.getRect().right-5,y:_-I.getRect().top+5},"dcg-svg-axis-value")}var T=[],L=[];if(u&&l(h,f,i.majorStepX,function(e){var t=n(r.value(e,f-h),S);"0"===t.getString()&&C||T.push(t)}),p&&l(m,g,i.majorStepY,function(e){var t=n(r.value(e,g-m),S);"0"===t.getString()&&C||L.push(t)}),o){e.save(),a.save(e,"dcg-svg-tickmark");var D=t.settings.axisLineOffset,P=t.settings.axisOpacity.toString(),A="rgba(0,0,0,"+P+")";e.lineWidth=t.settings.axisLineWidth,e.strokeStyle=A;var O=Math.round(t.mapy(0))-D,F=Math.round(t.mapx(0))-D,N=Math.round(2*e.lineWidth)-D;e.beginPath(),T.forEach(function(n){var r=Math.round(t.mapx(n.getValue()))-D;e.moveTo(r,O-N),e.lineTo(r,O+N)}),L.forEach(function(n){var r=Math.round(t.mapy(n.getValue()))-D;e.moveTo(F-N,r),e.lineTo(F+N,r)}),e.stroke(),a.restore(e),e.restore()}return T.forEach(function(n){var r={x:t.mapx(n.getValue())-.5*n.getMinusWidth(),y:_-n.getRect().top+5},i=n.clampBoundsWithinRect(r,b);e.fillStyle=r.y===i.y?E:x;var o="dcg-svg-axis-value";r.x!==i.x&&(o+=" dcg-svg-offcenter-axis-value"),n.drawCenteredAt(e,i,o),d(M,n.getRectWhenCenteredAt(i)),a.restore(e)}),L.forEach(function(n){var r={x:w-5-n.getRect().right,y:t.mapy(n.getValue())},i=n.clampBoundsWithinRect(r,b);e.fillStyle=r.x===i.x?E:x;var o="dcg-svg-axis-value";r.y!==i.y&&(o+=" dcg-svg-offcenter-axis-value"),n.drawCenteredAt(e,i,o),d(k,n.getRectWhenCenteredAt(i)),a.restore(e)}),e.restore(),{x:M,y:k}}}),l=function(e,t,n,r){var i=Math.ceil(e/n),o=Math.floor(t/n);if(isFinite(o-i)&&!(o-i>1e4))for(var a=i;a<=o;a++)r(a*n)},u=function(e,t,n){return e<t?t:e>n?n:e},d=function(e,t){t.left<e.left&&(e.left=t.left),t.right>e.right&&(e.right=t.right),t.top<e.top&&(e.top=t.top),t.bottom>e.bottom&&(e.bottom=t.bottom)},p=function(e,t){var n=Math.abs(e),r=Math.abs(t);return Math.abs(n-r)<=1e-4*(n<r?r:n)};return c}),define("graphing/imagelayer",["require","pjs","underscore","./draw-image-to-ctx","./svg-groups"],function(e){"use strict";var t=e("pjs"),n=e("underscore"),r=e("./draw-image-to-ctx").drawImageToCtx,i=e("./svg-groups");return t(function(e){e.redrawToCtx=function(e,t,o,a){i.save(e,"background-images"),(void 0===a||a.length<n.size(o))&&(a=n.keys(o));for(var s=0;s<a.length;s++){var c=o[a[s]];c&&c.shouldGraph&&!c.foreground&&r(c,e,t)}i.restore(e)}})}),define("core/math/recttransformation",["require","exports"],function(e,t){"use strict";function n(e,t){var n=e-1;return 1+n*n*n==1?t*(1+n*(t-1)*(.5+1/6*n*(t-2))):(Math.pow(e,t)-1)/n}Object.defineProperty(t,"__esModule",{value:!0}),t.RT=void 0;var r=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=n),this.tx=e,this.ty=t,this.sx=n,this.sy=r}return e.prototype.toJSON=function(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}},e.prototype.compose=function(t){return new e(this.sx*t.tx+this.tx,this.sy*t.ty+this.ty,this.sx*t.sx,this.sy*t.sy)},e.prototype.translate=function(t,n){var r=void 0===n?t.x:n.x-t.x,i=void 0===n?t.y:n.y-t.y;return new e(this.tx+r,this.ty+i,this.sx,this.sy)},e.prototype.scale=function(t,n){return e.scale(t,n).compose(this)},e.prototype.scaleAtPoint=function(t,n,r){return void 0===r&&(r=n),e.scaleAtPoint(t,n,r).compose(this)},e.prototype.inverse=function(){return new e(-this.tx/this.sx,-this.ty/this.sy,1/this.sx,1/this.sy)},e.prototype.div=function(t){return new e((this.tx*t.sx-this.sx*t.tx)/t.sx,(this.ty*t.sy-this.sy*t.ty)/t.sy,this.sx/t.sx,this.sy/t.sy)},e.prototype.conjugate=function(t){return new e(this.tx*t.sx+t.tx*(1-this.sx),this.ty*t.sy+t.ty*(1-this.sy),this.sx,this.sy)},e.prototype.pow=function(t){return new e(this.tx*n(this.sx,t),this.ty*n(this.sy,t),Math.pow(this.sx,t),Math.pow(this.sy,t))},e.prototype.mapX=function(e){return this.sx*e+this.tx},e.prototype.mapY=function(e){return this.sy*e+this.ty},e.prototype.mapPoint=function(e){return{x:this.mapX(e.x),y:this.mapY(e.y)}},e.prototype.mapRect=function(e){return{left:this.mapX(e.left),right:this.mapX(e.right),bottom:this.mapY(e.bottom),top:this.mapY(e.top)}},e.scale=function(t,n){return void 0===n&&(n=t),new e(0,0,t,n)},e.translate=function(t,n){return(new e).translate(t,n)},e.scaleAtPoint=function(t,n,r){return void 0===r&&(r=n),void 0===r&&(r=n),new e(t.x*(1-n),t.y*(1-r),n,r)},e.fromRects=function(t,n){var r=(n.right-n.left)/(t.right-t.left),i=(n.top-n.bottom)/(t.top-t.bottom);return new e(n.left-r*t.left,n.bottom-i*t.bottom,r,i)},e.fromJSON=function(t){return new e(t.tx,t.ty,t.sx,t.sy)},e}();t.RT=r}),define("graphing/projection",["require","exports","core/math/recttransformation"],function(e,t,n){"use strict";function r(e){return{left:0,right:e.width,top:0,bottom:e.height}}function i(e){return{left:e.xmin,right:e.xmax,bottom:e.ymin,top:e.ymax}}Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=void 0;var o=function(){function e(e,t,o){this.screen=e,this.viewport=t,this.settings=o,this.mathCoordinates=i(t),this.pixelCoordinates=r(e),this.mathToPixels=n.RT.fromRects(this.mathCoordinates,this.pixelCoordinates),this.pixelsToMath=n.RT.fromRects(this.pixelCoordinates,this.mathCoordinates)}return e.prototype.mapx=function(e){return this.mathToPixels.mapX(e)},e.prototype.mapy=function(e){return this.mathToPixels.mapY(e)},e.prototype.map_pt=function(e){return this.mathToPixels.mapPoint(e)},e.prototype.reverse_mapx=function(e){return this.pixelsToMath.mapX(e)},e.prototype.reverse_mapy=function(e){return this.pixelsToMath.mapY(e)},e.prototype.reverse_map_pt=function(e){return this.pixelsToMath.mapPoint(e)},e.prototype.coordsAreOnscreen=function(e,t,n){return n=void 0===n?0:n,e>-n&&t>-n&&e<this.screen.width+n&&t<this.screen.height+n},e.prototype.closestPointOnScreen=function(e){var t=this.pixelCoordinates;return{x:Math.min(Math.max(e.x,t.left),t.right),y:Math.min(Math.max(e.y,t.top),t.bottom)}},e}();t.Projection=o}),function(e){"function"==typeof define&&define.amd?define("vendor/jquery.mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=c.call(arguments,1),l=0,u=0,d=0,p=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(u=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(u=-1*d,d=0),l=0===d?u:d,"deltaY"in a&&(d=-1*a.deltaY,l=d),"deltaX"in a&&(u=a.deltaX,0===d&&(l=-1*u)),0!==d||0!==u){if(1===a.deltaMode){var h=e.data(this,"mousewheel-line-height");l*=h,d*=h,u*=h}else if(2===a.deltaMode){var f=e.data(this,"mousewheel-page-height");l*=f,d*=f,u*=f}return p=Math.max(Math.abs(d),Math.abs(u)),(!o||p<o)&&(o=p,r(a,p)&&(o/=40)),r(a,p)&&(l/=40,u/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/o),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),t.deltaX=u,t.deltaY=d,t.deltaFactor=o,t.deltaMode=0,s.unshift(t,l,u,d),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){o=null}function r(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var i,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice;if(e.event.fixHooks)for(var l=a.length;l;)e.event.fixHooks[a[--l]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("graphing/viewportcontroller",["require","jquery","pjs","lib/aria","lib/i18n","core/math/recttransformation","./viewport","core/math/distance","./constants","lib/animation-frame","./projection","keys","jquery.handleevent","vendor/jquery.mousewheel"],function(e){"use strict";var t=e("jquery"),n=e("pjs"),r=e("lib/aria"),i=e("lib/i18n"),o=e("core/math/recttransformation").RT,a=e("./viewport").Viewport,s=e("core/math/distance"),c=e("./constants"),l=e("lib/animation-frame"),u=e("./projection").Projection,d=e("keys");return e("jquery.handleevent"),e("vendor/jquery.mousewheel"),n(function(e){function n(e,t){var n=t.x-e.x,r=t.y-e.y,i=.5*(e.x+t.x),o=.5*(e.y+t.y),a=.5*s.hypot(n,r);return{center:f(i,o),radius:a}}function p(e,t){return n(t,{x:2*e.x-t.x,y:2*e.y-t.y})}function h(e,t){for(var n=[],r=0;r<e.length;r++)n.push(f(e[r].x-t.left,e[r].y-t.top));return n}function f(e,t){return{x:e,y:t}}function m(e){return f(.5*(e.left+e.right),.5*(e.bottom+e.top))}var g=0;e.init=function(e,t){this.grapher=e,this.$=this.grapher.$,this.__id=g++,this.controller=t,this.isScalingEnabled=!1,this.mousePt=f(0,0),this.lastScrollZoom=Date.now(),this.preventScrollZoom=!1,this.addMouseWheelEventHandler(),this.addTouchEventHandler()},e.remove=function(){t(window).off(".viewportcontroller-"+this.__id)},e.t=function(e,t){return i.t(e,t,this.grapher.settings.language)},e.getViewport=function(){return this.grapher.getProjection().viewport},e.getProjection=function(){return this.grapher.getProjection()},e.updateMouse=function(e){var t=this.$[0].getBoundingClientRect();this.mousePt=f(e.clientX-t.left,e.clientY-t.top)},e.updateScaleAxis=function(){this.isMouseInViewport()&&(this.isMouseNearYAxis()?this.grapher.scaleAxis="y":this.isMouseNearXAxis()?this.grapher.scaleAxis="x":this.grapher.scaleAxis="both"),this.updateCursor(),this.grapher.redrawAllLayers()},e.updateCursor=function(){this.$.toggleClass("dcg-scale-horizontal","x"===this.grapher.scaleAxis),this.$.toggleClass("dcg-scale-vertical","y"===this.grapher.scaleAxis),this.$.toggleClass("dcg-scale-both","both"===this.grapher.scaleAxis)},e.isMouseNearOrigin=function(){var e=this.getProjection(),t=e.mathToPixels.mapPoint(f(0,0));return Math.abs(this.mousePt.x-t.x)<50&&Math.abs(this.mousePt.y-t.y)<50},e.isMouseNearXAxis=function(){var e=this.getProjection(),t=e.pixelCoordinates,n=e.mathToPixels.mapY(0);return n=Math.min(Math.max(t.top,n),t.bottom),Math.abs(this.mousePt.y-n)<40&&e.settings.showXAxis},e.isMouseNearYAxis=function(){var e=this.getProjection(),t=e.pixelCoordinates,n=e.mathToPixels.mapX(0);return n=Math.min(Math.max(t.left,n),t.right),Math.abs(this.mousePt.x-n)<40&&e.settings.showYAxis},e.isMouseInViewport=function(){var e=this.getProjection(),t=e.mathCoordinates,n=e.pixelsToMath.mapPoint(this.mousePt);return n.x>=t.left&&n.x<=t.right&&n.y>=t.bottom&&n.y<=t.top},e.getDefaultViewport=function(){return this.controller.getDefaultStateViewport()||this.grapher.getDefaultViewport()},e._setViewportWithoutCancellingAnimation=function(e){if(e.isValid()&&!e.equals(this.getViewport())){var t=this.getProjection();this.grapher._setProjection(new u(t.screen,e,t.settings))}},e.setViewport=function(e){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(e)},e.setScreen=function(e){var t=this.getProjection(),n=t.settings.squareAxes,r=new u(e,this.getViewportForScreen(t.viewport,e,n),t.settings);this.grapher._setProjection(r)},e.getTransformedViewport=function(e){var t=this.getProjection(),n=t.pixelsToMath.div(e).mapRect(t.pixelCoordinates);return new a(n.left,n.right,n.bottom,n.top)},e.transformViewport=function(e){this.setViewport(this.getTransformedViewport(e))},e.animateTransformation=function(e){function t(a){r||(r=a);var s=(a-r)/c.ANIMATE_ZOOM_DURATION;o+=s,o<1?(n.__animationTimeout=l.requestAnimationFrame(t),n._setViewportWithoutCancellingAnimation(n.getTransformedViewport(e.pow(s))),n.grapher.debounceUserRequestedViewportChange()):(n.setViewport(i),n.grapher.debounceUserRequestedViewportChange())}var n=this;this.cancelAnimation();var r,i=this.getTransformedViewport(e),o=0;this.__animationTimeout=l.requestAnimationFrame(t)},e.cancelAnimation=function(){l.cancelAnimationFrame(this.__animationTimeout)},e.addMouseWheelEventHandler=function(){var e,n,r=this,i=!1;t(window).on("scroll.viewportcontroller-"+this.__id,function(e){i=!0}),t(window).on("mousewheel.viewportcontroller-"+this.__id,function(t){e=t.originalEvent.clientX,n=t.originalEvent.clientY}),t(window).on("mousemove.viewportcontroller-"+this.__id,function(t){if(i){var r=t.originalEvent.clientX-e,o=t.originalEvent.clientY-n;r*r+o*o<100||(i=!1)}});var a=0,s=function(e,t){var n=Date.now();if(r.preventScrollZoom&&n-r.lastScrollZoom>50&&(r.preventScrollZoom=!1),r.lastScrollZoom=n,!r.preventScrollZoom){var s=this.getProjection();if(!s.settings.config.lockViewport){var u=s.mathToPixels;if(!i){e.preventDefault(),r.updateMouse(e);var d=u.mapPoint(f(0,0)),p=r.isMouseNearOrigin()&&t>0?d:r.mousePt;if(!(a>0)){a+=1,l.requestAnimationFrame(function(){a--}),t=t>0?1:-1;var h=t>0?c.ZOOM_FACTOR:1/c.ZOOM_FACTOR,m=r.grapher.scaleAxis,g="x"!==m&&"both"!==m&&m?1:h,y="y"!==m&&"both"!==m&&m?1:h;this.transformViewport(o.scaleAtPoint(p,g,y)),this.grapher.debounceUserRequestedViewportChange()}}}}};this.$.mousewheel(s.bind(this))},e.handleDoubleClick=function(e){var t=this.getProjection();if(!t.settings.config.lockViewport&&!t.settings.config.disable_dblclick_zooming&&!e.wasHandled()){e.preventDefault();var n=this.$[0].getBoundingClientRect(),r=f(e.clientX-n.left,e.clientY-n.top);this.animateTransformation(o.scaleAtPoint(r,c.DOUBLETAP_ZOOM))}},e.applyPanTouchChanges=function(e,t){if(!this.getProjection().settings.config.lockViewport&&!this.isScalingEnabled){var n=f(t[0].x-e[0].x,t[0].y-e[0].y);this.transformViewport(o.translate(n)),this.grapher.debounceUserRequestedViewportChange()}},e.chooseDragScaleCenter=function(){var e=this.getProjection(),t=e.pixelCoordinates,n=e.mathToPixels.mapX(0),r=e.mathToPixels.mapY(0);return n=Math.min(Math.max(t.left,n),t.right),r=Math.min(Math.max(t.top,r),t.bottom),f(n,r)},e.applyScaleTouchChanges=function(e,t){if(!this.getProjection().settings.config.lockViewport){var r,i,a=this.grapher.scaleAxis;if(2===e.length&&2===t.length)r=n(e[0],e[1]),i=n(t[0],t[1]);else{if(1!==t.length)return;var s=this.chooseDragScaleCenter();r=p(s,e[0]),i=p(s,t[0])}var c=i.radius/r.radius,l="y"===a?1:c,u="x"===a?1:c,d=o.scaleAtPoint(r.center,l,u).translate(r.center,i.center);this.transformViewport(d),this.grapher.debounceUserRequestedViewportChange()}},e.addTouchEventHandler=function(){var e=this,n=[],r=!1,i=!0,o=!0,a=function(t){var n=e.grapher.getProjection();r||n.settings.config.lockViewport||(e.updateMouse(t),e.isScalingEnabled&&e.updateScaleAxis())};t(window).on("mousemove.viewportcontroller-"+this.__id,a);var s=function(n){var a=e.getProjection();if(!a.settings.config.lockViewport&&!n.wasHandled()&&!r&&n.touches.length===n.changedTouches.length){r=!0,e.grapher.isDragging=!0,e.updateMouse(n);var s=a.mathToPixels.mapPoint(f(0,0)),c=e.grapher.scaleAxis;"x"!==c&&"both"!==c||(i=e.mousePt.x>s.x),"y"!==c&&"both"!==c||(o=e.mousePt.y>s.y),e.controller.dispatch({type:"grapher/drag-start"}),t(document).on("dcg-tapmove.graphdrag",g),t(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",y)}},c=function(t){if(!(t.length<2)){var n=e.grapher.getProjection(),r=n.pixelCoordinates,i=n.mathToPixels.mapX(0),o=n.mathToPixels.mapY(0);i=Math.min(Math.max(r.left,i),r.right),o=Math.min(Math.max(r.top,o),r.bottom);var a=t[1].x-t[0].x,s=t[1].y-t[0].y;return Math.abs(t[0].x-i)<40&&Math.abs(t[1].x-i)<40&&Math.abs(s)>3*Math.abs(a)&&n.settings.showYAxis?"y":Math.abs(t[0].y-o)<40&&Math.abs(t[1].y-o)<40&&Math.abs(a)>3*Math.abs(s)&&n.settings.showXAxis?"x":"both"}},l=function(t){return e.grapher.scaleAxis||(e.grapher.scaleAxis=c(t)),e.grapher.scaleAxis},u=function(){e.grapher.scaleAxis&&(e.grapher.scaleAxis=void 0,e.grapher.redrawAllLayers(),e.updateCursor())},p=function(){e.isScalingEnabled=!1,e.preventScrollZoom=!0,u()},m=function(e){return e.altKey||e.ctrlKey||e.metaKey},g=function(t){if(r&&!e.getProjection().settings.config.lockViewport&&e.grapher&&e.grapher.clickableObjectsLayer&&!e.grapher.clickableObjectsLayer.isAnObjectPressed()){var a=h(t.touches,e.$.offset());if(2===n.length&&2===a.length)l(a),e.applyScaleTouchChanges(n,a);else if(1===n.length&&e.isScalingEnabled){e.updateMouse(t);var s,c,d=e.grapher.scaleAxis,p=e.getProjection(),m=p.mathToPixels.mapPoint(f(0,0)),g=i?1:-1,y=o?1:-1;if("x"!==d&&"both"!==d||(s=e.mousePt.x>m.x+5*g),"y"!==d&&"both"!==d||(c=e.mousePt.y>m.y+5*y),"x"===d&&i!==s)return;if("y"===d&&o!==c)return;if("both"===d&&i!==s&&o!==c)return;e.applyScaleTouchChanges(n,a)}else u();1===n.length&&e.applyPanTouchChanges(n,a),e.controller.dispatch({type:"grapher/drag-move"}),n=a}},y=function(i){r&&(e.cancelAnimation(),n=h(i.touches,e.$.offset()),0===i.touches.length&&(r=!1,e.grapher.isDragging=!1,t(document).off(".graphdrag"),e.grapher.debounceUserRequestedViewportChange(),e.controller.dispatch({type:"grapher/drag-end"})),(0===i.touches.length||1===i.touches.length&&!e.isScalingEnabled)&&u())};this.$.on("dcg-tapstart",s),this.$.on("dblclick",this.handleDoubleClick.bind(this)),t(window).on("keydown.viewportcontroller-"+this.__id,function(e){this.getProjection().settings.config.lockViewport||(d.lookup(e)!==d.SHIFT||m(e)?p():(this.isScalingEnabled=!0,this.grapher.scaleAxis||this.updateScaleAxis()))}.bind(this)),t(window).on("keyup.viewportcontroller-"+this.__id+" blur.viewportcontroller-"+this.__id,p)},e.zoom=function(e){var t=this.getProjection().pixelCoordinates;if("in"===e)this.animateTransformation(o.scaleAtPoint(m(t),2));else if("out"===e)this.animateTransformation(o.scaleAtPoint(m(t),.5));else if("default"===e){var n=this.getDefaultViewport();this.animateTransformation(this.getCustomZoomTransformation(n))}else if("square"===e){var i=this.getSquareViewport();this.animateTransformation(this.getCustomZoomTransformation(i))}r.alert(this.t("Graph zoom __action__",{action:e}))},e.zoomCustom=function(e){this.animateTransformation(this.getCustomZoomTransformation(e)),r.alert(this.t("Graph viewport updated."))},e.getCustomZoomTransformation=function(e){var t=this.getProjection().viewport,n=this.getProjection().pixelCoordinates,r=this.getProjection().mathCoordinates,i=(t.xmax-t.xmin)/(e.xmax-e.xmin),a=(t.ymax-t.ymin)/(e.ymax-e.ymin),s=function(){return{x:0,y:0}},c=o.fromRects(r,n),l=new o.translate(c.mapPoint(s()),s()),u=new o.scale(i,a),d=o.fromRects({left:e.xmin,right:e.xmax,bottom:e.ymin,top:e.ymax},n);return new o.translate(s(),d.mapPoint(s())).compose(u.compose(l))},e.isZoomRestored=function(){var e=this.getProjection(),t=e.viewport,n=this.getDefaultViewport();return e.settings.squareAxes&&Math.abs((t.xmin-n.xmin)/t.xmin)<.05&&Math.abs((t.xmax-n.xmax)/t.xmax)<.05&&Math.abs((t.ymin-n.ymin)/t.ymin)<.05&&Math.abs((t.ymax-n.ymax)/t.ymax)<.05},e.getViewportForScreen=function(e,t,n){return n?"y"==this.getProjection().settings.lastChangedAxis?e.squareXAxis(t):e.squareYAxis(t):e},e.getSquareViewport=function(){var e=this.getProjection();return this.getViewportForScreen(e.viewport,e.screen,!0)},e.enforceSquareAxes=function(){var e=this.getProjection();e.settings.squareAxes&&(e.viewport.isSquare(e.screen)||this.setViewport(this.getViewportForScreen(e.viewport,e.screen,!0)))}})}),define("geometry/math/hypot",["require","exports"],function(e,t){"use strict";function n(e){return e===1/0||e===-1/0}Object.defineProperty(t,"__esModule",{value:!0});var r=Math.hypot&&Math.hypot(1/0,NaN)===1/0;t.default=r?Math.hypot:function(e,t){if(n(e)||n(t))return 1/0;if(isNaN(e)||isNaN(t))return NaN;if(0===e&&0===t)return 0;if(Math.abs(e)>Math.abs(t)){var r=t/e;return Math.abs(e)*Math.sqrt(r*r+1)}var r=e/t;return Math.abs(t)*Math.sqrt(r*r+1)}}),define("lib/priority-queue",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.comparator=e,this._data=[]}return e.prototype.size=function(){return this._data.length},e.prototype.queue=function(e){var t=this._data.length;for(this._data.push(e);t>0;){var n=t-1>>>1;if(!(this.comparator(this._data[t],this._data[n])<0))break;var r=this._data[n];this._data[n]=this._data[t],this._data[t]=r,t=n}},e.prototype.dequeue=function(){var e=this._data[0],t=this._data.pop();if(this._data.length>0&&void 0!==t){this._data[0]=t;for(var n=0,r=this._data.length-1;;){var i=1+(n<<1),o=i+1,a=n;if(i<=r&&this.comparator(this._data[i],this._data[a])<0&&(a=i),o<=r&&this.comparator(this._data[o],this._data[a])<0&&(a=o),a===n)break;var s=this._data[a];this._data[a]=this._data[n],this._data[n]=s,n=a}}return e},e.prototype.peek=function(){return this._data[0]},e.prototype.clear=function(){this._data.length=0},e}();t.default=n}),define("geometry/math/polygon-area-support",["require","exports","lib/priority-queue","bugsnag"],function(e,t,n,r){"use strict";function i(e,t){var n=e.pt2.y-e.pt1.y,r=e.pt1.x-e.pt2.x,i=t.pt2.y-t.pt1.y,o=t.pt1.x-t.pt2.x,a=n*e.pt1.x+r*e.pt1.y,s=i*t.pt1.x+o*t.pt1.y,c=n*o-i*r;if(0!==c)return(n*s-i*a)/c}function o(e,t,n){if(n.scanlineX<t.scanlineX&&r.notify("PolygonArea: rightEdge should not be left of leftEdge!",{metaData:{scanlineY:e,leftEdge:t,rightEdge:n}}),!(n.xSlope>=t.xSlope)){if(t.scanlineX===n.scanlineX)return e;var o=t.pt2.y>t.pt1.y?t.pt2:t.pt1,a=n.pt2.y>n.pt1.y?n.pt2:n.pt1,c=o.y;if(a.y<o.y){c=a.y;if(s(c,t)<a.x)return}else if(o.y<a.y){var l=s(c,n);if(o.x<l)return}else if(o.x<a.x)return;var u=i(t,n);if(void 0!==u)return Math.max(Math.min(u,c),e)}}function a(e,t,n,r){if(n&&r){if(n.id<r.id){if(n.skipIntersectionWith[r.id])return}else if(r.skipIntersectionWith[n.id])return;var i=o(e,n,r);void 0!==i&&(n.id<r.id?n.skipIntersectionWith[r.id]=!0:r.skipIntersectionWith[n.id]=!0,t.queue({type:"x",y:i,edge1:n,edge2:r}))}}function s(e,t){var n=t.pt1.x,r=t.pt2.x,i=t.pt1.y,o=t.pt2.y;if(i===e)return n;if(o===e)return r;var a=(e-i)/(o-i),s=(1-a)*n+a*r;if(n<r){if(s<=n)return n;if(r<=s)return r}else{if(s<=r)return r;if(n<=s)return n}return s}function c(e){for(var t=0,n=0,r=!1,i=0,o=e;i<o.length;i++){var a=o[i].scanlineX;r?(r=!1,t+=a-n):(r=!0,n=a)}return t}function l(e){for(var t=0,n=0,r=!1,i=0,o=0,a=e;o<a.length;o++){var s=a[o],c=s.scanlineX;s.isClockwise?i+=1:i-=1,0===i||r?0===i&&r&&(r=!1,t+=c-n):(r=!0,n=c)}return t}function u(e,t){for(var n=0,i=0,o=!1,a=-1/0,c=0,l=t;c<l.length;c++){
var u=l[c],d=s(e,u);d<a?(d-a<-1e-4&&r.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:e,edge:u,minScanlineX:a,scanlineX:d}}),d=a):a=d,u.scanlineX=d,o?(o=!1,n+=d-i):(o=!0,i=d)}return n}function d(e,t){for(var n=0,i=0,o=!1,a=0,c=-1/0,l=0,u=t;l<u.length;l++){var d=u[l],p=s(e,d);p<c?(p-c<-1e-4&&r.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:e,edge:d,minScanlineX:c,scanlineX:p}}),p=c):c=p,d.scanlineX=p,d.isClockwise?a+=1:a-=1,0===a||o?0===a&&o&&(o=!1,n+=p-i):(o=!0,i=p)}return n}function p(e){for(var t=1,r=[],i=new n.default(function(e,t){return e.y-t.y}),o=e.length-1;o>=1;o--){var a=e[o],s=e[o-1],c={id:t++,pt1:a,pt2:s,scanlineX:0,xSlope:1/0,isClockwise:s.y>a.y,skipIntersectionWith:{}};s.y>a.y?(i.queue({type:"+",y:a.y,edge:c}),i.queue({type:"-",y:s.y,edge:c}),c.xSlope=(s.x-a.x)/(s.y-a.y),c.scanlineX=a.x):a.y>s.y&&(i.queue({type:"+",y:s.y,edge:c}),i.queue({type:"-",y:a.y,edge:c}),c.xSlope=(a.x-s.x)/(a.y-s.y),c.scanlineX=s.x)}return{activeEdges:r,events:i}}function h(e,t,n){"x"===e.type?g(e,t,n):"+"===e.type?f(e,t,n):"-"===e.type&&m(e,t,n)}function f(e,t,n){for(var r=e.edge,i=e.y,o=r.xSlope,s=r.scanlineX,c=0;c<n.length;c++){var l=n[c];if(s<l.scanlineX)break;if(s===l.scanlineX&&o<=l.xSlope)break}n.splice(c,0,r),a(i,t,n[c-1],r),a(i,t,r,n[c+1])}function m(e,t,n){var r=e.edge,i=e.y,o=n.indexOf(r);n.splice(o,1),a(i,t,n[o-1],n[o])}function g(e,t,n){var r=e.edge1,i=e.edge2,o=e.y,s=n.indexOf(r),c=s+1;-1===s||n[c]!==i?r.id<i.id?delete r.skipIntersectionWith[i.id]:delete i.skipIntersectionWith[r.id]:(n[s]=i,n[c]=r,a(o,t,n[s-1],i),a(o,t,r,n[c+1]))}Object.defineProperty(t,"__esModule",{value:!0}),t.processEvent=t.setupEventQueueAndActiveEdges=t.measureUpwardNonZeroLength=t.measureUpwardEvenOddLength=t.measureDownwardNonZeroLength=t.measureDownwardEvenOddLength=t.computeScanlineX=t.checkForEdgeIntersection=t._stableYIntersectEdges=t._unstableYIntersectEdges=void 0,t._unstableYIntersectEdges=i,t._stableYIntersectEdges=o,t.checkForEdgeIntersection=a,t.computeScanlineX=s,t.measureDownwardEvenOddLength=c,t.measureDownwardNonZeroLength=l,t.measureUpwardEvenOddLength=u,t.measureUpwardNonZeroLength=d,t.setupEventQueueAndActiveEdges=p,t.processEvent=h}),define("geometry/math/polygon",["require","exports","./hypot","bugsnag","./polygon-area-support"],function(e,t,n,r,i){"use strict";function o(e,t){if(!e)return!1;for(var n=t.x,r=t.y,i=!1,o=e.length-1;o>=3;o-=2){var a=e[o-3],s=e[o-2],c=e[o-1],l=e[o];s>r!=l>r&&n<(c-a)*(r-s)/(l-s)+a&&(i=!i)}return i}function a(e,t){if(!e)return!1;for(var n=t.x,r=t.y,i=0,o=e.length-1;o>=3;o-=2){var a=e[o-3],s=e[o-2],c=e[o-1],l=e[o];s>r!=l>r&&n<(c-a)*(r-s)/(l-s)+a&&(s>l?i+=1:s<l&&(i-=1))}return 0!==i}function s(e){for(var t=0,r=0;r<e.length-1;r++)t+=n.default(e[r].x-e[r+1].x,e[r].y-e[r+1].y);return t}function c(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].x*e[n+1].y-e[n].y*e[n+1].x;return Math.abs(t)/2}function l(e){if(e.length<4)return 0;if(e[0].x!==e[e.length-1].x||e[0].y!==e[e.length-1].y)return 0;var t=i.setupEventQueueAndActiveEdges(e),n=t.events,o=t.activeEdges,a=n.peek();if(!a)return 0;for(var s,c=0,l=a.y,u=0;s=n.dequeue();){var d=s.y;d<l&&r.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:e,scanlineY:d,lastScanlineY:l}});u+=.5*(d-l)*(i.measureUpwardEvenOddLength(d,o)+c),i.processEvent(s,n,o),l=d,c=i.measureDownwardEvenOddLength(o)}return u}function u(e){if(e.length<4)return 0;if(e[0].x!==e[e.length-1].x||e[0].y!==e[e.length-1].y)return 0;var t=i.setupEventQueueAndActiveEdges(e),n=t.events,o=t.activeEdges,a=n.peek();if(!a)return 0;for(var s,c=0,l=a.y,u=0;s=n.dequeue();){var d=s.y;d<l&&r.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:e,scanlineY:d,lastScanlineY:l}});u+=.5*(d-l)*(i.measureUpwardNonZeroLength(d,o)+c),i.processEvent(s,n,o),l=d,c=i.measureDownwardNonZeroLength(o)}return u}Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePaintedNonZeroArea=t.calculatePaintedEvenOddArea=t.calculateSimpleArea=t.calculatePerimeter=t.pointIsWithinNonZeroFill=t.pointIsWithinEvenOddFill=void 0,t.pointIsWithinEvenOddFill=o,t.pointIsWithinNonZeroFill=a,t.calculatePerimeter=s,t.calculateSimpleArea=c,t.calculatePaintedEvenOddArea=l,t.calculatePaintedNonZeroArea=u}),define("graphing/poicontroller",["require","jquery","core/math/distance","lib/rounding","core/types/graphmode","lib/conditional_blur","keys","lib/aria","core/lib/label","expressions/colors","graphing-calc/models/image","graphing-calc/models/expression","../geometry/math/polygon"],function(e){"use strict";function t(e,t){this.manager=e,this.controller=e.controller,this.graphSettings=t,this.$=this.manager.$,this.__id=f++,this.graphSettings.config.graphpaper&&!this.graphSettings.config.disableMouseInteractions&&(this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeydownEventHandler(),this.addManualUnhoverListener())}var n=e("jquery"),r=e("core/math/distance"),i=e("lib/rounding"),o=e("core/types/graphmode"),a=e("lib/conditional_blur").default,s=e("keys"),c=e("lib/aria"),l=e("core/lib/label"),u=e("expressions/colors").getColorName,d=e("graphing-calc/models/image"),p=e("graphing-calc/models/expression"),h=e("../geometry/math/polygon"),f=0;return t.prototype.getExpressionModel=function(e){return this.controller.getItemModel(e)},t.prototype.remove=function(){this.removeAllGlobalMouseListeners(),this.removeManualUnhoverListener()},t.prototype.addGlobalMouseListener=function(e,t){for(var r=e.split(" "),i=0;i<r.length;i++)n(document).on(r[i]+".dcg-poiController-"+this.__id,t)},t.prototype.removeAllGlobalMouseListeners=function(){n(document).off(".dcg-poiController-"+this.__id)},t.prototype.getToleranceByDevice=function(e){return"touch"===e?20:10},t.prototype.addHoverEventHandler=function(){this.$.on("dcg-tapmove",function(e){if("touch"!==e.device){var t,r=n(document.elementFromPoint(e.clientX,e.clientY)).closest(".dcg-grapher").length,i=this.manager.poiLabelsLayer,o=this.getMouseRelativeToGrapher(e),a=this.getToleranceByDevice(e.device);r&&(t=this.getFeatureUnderPoint(o,a));var s;t&&"movable-point"===t.type&&(s=t.poi.getMovablePoint().id);var c;t&&t.isClickable&&(this.manager.movablePointsLayer.isMovingPoint()||this.manager.traceLayer.isTracing()||(c=t.model));this.manager.clickableObjectsLayer.setHoveredId(c&&c.id);var l;t&&"poi"===t.type&&(t.poi.isAttachedToPlottedPoint()&&!t.poi.hasInteractiveLabel()||(l=t.poi)),l!==i.getHoveredPOI()&&(this.controller.isTraceEnabled()?i.setHoveredPOI(l):i.setHoveredPOI(void 0),this.manager.redrawAllLayers()),this.manager.movablePointsLayer.setHoveredPointId(s)}}.bind(this))},t.prototype.addManualUnhoverListener=function(){var e=function(){var e=this.manager;e.poiLabelsLayer.setHoveredPOI(void 0),e.clickableObjectsLayer.setHoveredId(void 0),e.redrawAllLayers()}.bind(this);n(window).on("blur.dcg-poiController-"+this.__id,e),this.$.on("mouseleave",e)},t.prototype.removeManualUnhoverListener=function(){n(window).off(".dcg-poiController-"+this.__id)},t.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(e){var t=this.getMouseRelativeToGrapher(e),n=this.getToleranceByDevice(e.device);this.getFeatureUnderPoint(t,n)&&(e.preventDefault(),e.handle())}.bind(this)),this.$.on("touchstart",function(e){if(!this.graphSettings.config.lockViewport)return void(n(e.target).is(":not(input, textarea)")&&e.preventDefault());var t=this.getMouseRelativeToGrapher(e.originalEvent),r=this.getToleranceByDevice(e.device),i=this.getFeatureUnderPoint(t,r);i&&("image"!==i.type||i.model.selected)&&("sketch-branch"===i.type&&this.graphSettings.config.onlyTraceSelected&&!i.sketch.selected||e.preventDefault())}.bind(this)),this.$.on("dcg-tapstart",function(e){var t=this.getMouseRelativeToGrapher(e),n=this.getToleranceByDevice(e.device),r=this.getFeatureUnderPoint(t,n);if(r&&r.isClickable?this.manager.clickableObjectsLayer.setPressedId(r.model.id):this.manager.clickableObjectsLayer.setPressedId(void 0),r&&"editable-label"===r.type)return void e.handle();if(a(),r&&"movable-point"===r.type)return this.controller.dispatch({type:"start-moving-point",pointInfo:r.poi.getMovablePoint()}),this.startMovingPoint(r.poi),e.handle(),void e.handle("do-not-clear-poi-labels");if(this._togglePOIUnderPoint(t,n))return e.handle(),void e.handle("do-not-clear-poi-labels");if(r&&"sketch-branch"===r.type&&!r.isClickable){if(!this.graphSettings.config.onlyTraceSelected){var i=!this.controller.isTraceEnabled(),o=!this.controller.isListEnabled();if(i&&o)return;if(this.controller.dispatch({type:"set-selected-id",id:r.sketch.id}),i)return;return this.startTracingBranch(r.branchInfo,t),e.handle(),void e.handle("do-not-clear-poi-labels")}if(r.sketch.selected)return this.startTracingBranch(r.branchInfo,t),e.handle(),void e.handle("do-not-clear-poi-labels")}r&&"image"===r.type||this.controller.dispatch({type:"set-none-selected"});var s=this;this.addGlobalMouseListener("dcg-tapmove",function(e){this.manager.clickableObjectsLayer.isAnObjectPressed()?t=this.getMouseRelativeToGrapher(e):s.removeAllGlobalMouseListeners()}.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(e){s.removeAllGlobalMouseListeners();var r=this.manager.clickableObjectsLayer.getPressedId();this.manager.clickableObjectsLayer.setPressedId(void 0);var i=this.getFeatureUnderPoint(t,n);return i&&i.isClickable?void(i.model.id===r&&this.controller.dispatch({type:"clickable-item-clicked",id:i.model.id})):i&&"sketch-branch"===i.type&&!i.sketch.selected?void this.controller.dispatch({type:"set-selected-id",id:i.model.id}):i&&"image"===i.type?void this.controller.dispatch({type:"set-selected-id",id:i.model.id}):void 0}.bind(this))}.bind(this))},t.prototype.addKeydownEventHandler=function(){this.$.on("keydown",function(e){var t=this.manager.movablePointsLayer.getFocusedPoint();if(t){var n=s.lookup(e),r=s.lookupChar(e);"Up"===n||"Down"===n||"Left"===n||"Right"===n?(e.stopPropagation(),e.preventDefault(),this.movePointFromKeyboard(t,e)):"X"!==r&&"Y"!==r&&"L"!==r&&"C"!==r||this.speakPoint(t,r)}}.bind(this))},t.prototype.getMouseRelativeToGrapher=function(e){var t=this.$[0].getBoundingClientRect(),n=e.touches?e.touches[0]:e;return{x:n.clientX-t.left,y:n.clientY-t.top}},t.prototype._getClosestPoint=function(e,t,n){for(var i=n,o=null,a=this.manager.getProjection(),s=0;s<e.length;s++){var c=e[s],l=a.map_pt(c),u=r.hypot(l.x-t.x,l.y-t.y);u<i&&(i=u,o=c)}return o},t.prototype.getFeatureUnderPoint=function(e,n){var r=this.manager.poiLabelsLayer,i=this.manager.getProjection(),o=i.reverse_map_pt(e);if(!this.manager.scaleAxis){var a=r.getEditableLabelUnderPoint(e);if(a)return{type:"editable-label",model:a};for(var s,c=this.manager.__sketchOrder,l={},u=1,h=c.length-1;h>=0;h--){var f=c[h],m=this.controller.getItemModel(f),g=u;if(l[f]=g,m)if("expression"===m.type){var y=this.manager.getGraphSketch(f);if(!y||!y.visible)continue;var v=y.branches;if(!v||!v.length)continue;if(y.showHighlight&&(g=-1/0,l[f]=g),!s||s.stackingContext>=g)for(var b=p.isClickableObject(m),x=0;x<v.length;x++){var E=t.calculateDistanceFromBranch(v[x],o,i,b);if(E<n){var w=!1;s?g<s.stackingContext?w=!0:g===s.stackingContext&&E<s.distance&&(w=!0):w=!0,w&&(s={type:"sketch-branch",model:m,sketch:y,distance:E,stackingContext:g,branchInfo:{id:y.id,branch:x,sketch:y}})}}}else if("image"===m.type){var _=this.manager.getGraphImage(f);if(!_||!this.isImageUnderMouse(_,o,n))continue;_.foreground?(u+=1,g=u,l[f]=g,u+=1):(g=1/0,l[f]=g),(!s||s.stackingContext>g)&&(s={type:"image",model:_,distance:0,stackingContext:g})}}var S=[],M=[],k=[],C=s?s.stackingContext:1/0;this.manager.poiDotsLayer.getDrawnPOI().forEach(function(e){e.isBareLabel()||(e.isMovable()?S.push(e):e.isAttachedToPlottedPoint()?l[e.sketch.id]<=C&&M.push(e):k.push(e))});var I=this._getClosestPoint(S,e,n);if(I)return{type:"movable-point",poi:I};var T=this._getClosestPoint(k,e,n);if(T)return{type:"poi",poi:T};var L=this._getClosestPoint(M,e,n);if(L){var D=this.controller.getItemModel(L.sketch.id);if(D&&"expression"===D.type){if(p.isClickableObject(D))return{type:"poi",poi:L,isClickable:!0,model:D}}return{type:"poi",poi:L}}return s?"sketch-branch"===s.type?{type:"sketch-branch",branchInfo:s.branchInfo,sketch:s.sketch,model:s.model,isClickable:p.isClickableObject(s.model)}:{type:"image",model:s.model,isClickable:d.isClickableObject(s.model)}:void 0}},t.prototype._togglePOIUnderPoint=function(e,t){if(this.controller.isTraceEnabled()){var n=this.getFeatureUnderPoint(e,t);if(!n)return!1;if(n.isClickable)return!1;var r=n.poi;return!!r&&(!r.isBareLabel()&&(this.manager.poiLabelsLayer.isOpenPOI(r)?(this.manager.poiLabelsLayer.closePOI(r),this.manager.poiLabelsLayer.setHoveredPOI(void 0)):(this.manager.poiLabelsLayer.openPOI(r),this.speakPoint(r)),this.manager.redrawAllLayers(),!0))}},t.prototype.isImageUnderMouse=function(e,t,n){if(!e||!e.computed_x||!e.computed_y||!e.computed_width||!e.computed_height||e.hidden||this.controller.isItemSecret(e.id))return!1;for(var r=0;r<e.computed_x.length;r++){var i=e.computed_x[r],o=e.computed_y[r],a=e.computed_radian_angle[r],s=i+Math.cos(a)*(t.x-i)-Math.sin(a)*(t.y-o),c=o+Math.sin(a)*(t.x-i)+Math.cos(a)*(t.y-o),l=.5*Math.abs(e.computed_width[r]),u=.5*Math.abs(e.computed_height[r]);if(s>i-l&&s<i+l&&c>o-u&&c<o+u)return!0}return!1},t.calculateDistanceFromBranch=function(e,n,r,i){if(e&&e.graphMode===o.POLYGONFILL&&i){for(var a=e.segments,s=0;s<a.length;s++)if(h.pointIsWithinNonZeroFill(a[s],n))return 0;return 1/0}var c=t.getBranchesDistanceInfo(e,n,r,i);return c?c.minDistance:1/0},t.getBranchesDistanceInfo=function(e,t,n,i){var a=n.screen.width/(n.viewport.xmax-n.viewport.xmin),s=n.screen.height/(n.viewport.ymax-n.viewport.ymin),c=t.x,l=t.y,u=!1,d=!1;switch(e.graphMode){case o.PARAMETRIC:case o.IMPLICIT:if(!i)return null;break;case o.POLAR:if(!i)return null;d=!0;break;case o.Y:break;case o.X:u=!0;var p=c;c=l,l=p,p=a,a=s,s=p;break;default:return null}for(var h,f,m=1/0,g=1/0,y=0;y<e.segments.length;y++)for(var v=e.segments[y],b=0;b<v.length-3;b+=2){var x=v[b],E=v[b+1],w=v[b+2],_=v[b+3];if(d){var S=E,M=x;x=S*Math.cos(M),E=S*Math.sin(M);var k=_,C=w;w=k*Math.cos(C),_=k*Math.sin(C)}var I=r.closestPointOnSegment(0,0,(x-c)*a,(E-l)*s,(w-c)*a,(_-l)*s),T=r.hypot(I[0],I[1]);I[0]<0?T<m&&(m=T,h=I):T<g&&(g=T,f=I)}var L=m<g?h:f;if(!L)return null;var D=L[0]/a+c,P=L[1]/s+l;return{closestPoint:{x:u?P:D,y:u?D:P},minDistance:Math.min(m,g),secondDistance:Math.max(m,g)}},t.getBranchesTracePoint=function(e,n,r){if(e&&e.compiled&&e.compiled.fn){var a=e.compiled.fn,s=r.screen.width/(r.viewport.xmax-r.viewport.xmin),c=r.screen.height/(r.viewport.ymax-r.viewport.ymin),l=this.getBranchesDistanceInfo(e,n,r,!1);if(!l)return null;var u=l.minDistance/l.secondDistance;u*=u;var d=e.graphMode===o.Y?"x":"y",p=l.closestPoint[d]*(1-u)+n[d]*u,h=1/(2*s),f=1/(2*c),m=a(p-h),g=a(p),y=a(p+h),v=h*Math.min(1,f/Math.abs(m-g)),b=h*Math.min(1,f/Math.abs(y-g));isFinite(v)||(v=h),isFinite(b)||(b=h),p=i.shortestDecimalBetween(p-v,p+b);var x=t.fillHole(a,p,s,c,n.x,n.y);return{x:e.graphMode===o.Y?p:x,y:e.graphMode===o.Y?x:p}}},t.prototype.startMovingPoint=function(e){var t=!1;this.manager.movablePointsLayer.setPressedPointId(e.isMovable()?e.getMovablePoint().id:void 0);var n=null,r=function(){if(n){t=!0;var r=this.manager.getProjection(),i=this.getMouseRelativeToGrapher(n);n=null,this.controller.dispatch({type:"on-move-point",pointInfo:e.getMovablePoint(),screenPt:i,projection:r})}}.bind(this);this.manager.registerMovablePointListener(r),this.addGlobalMouseListener("dcg-tapmove",function(e){n=e}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(n){if(r(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.setPressedPointId(void 0),this.controller.dispatch({type:"stop-moving-point",pointInfo:e.getMovablePoint()}),!t){var i=this.manager.getProjection(),o=this.getToleranceByDevice(n.device),a=i.map_pt(e);this._togglePOIUnderPoint(a,o)}}.bind(this))},t.prototype.startTracingBranch=function(e,n){this.manager.markLabelsDirty(),this.last_screen_pt=n;var r=this.manager.getProjection(),i=r.reverse_map_pt(n),o=e.sketch,a=o.branches[e.branch],s=t.getBranchesTracePoint(a,i,r);s&&this.speakPoint(s),this.manager.traceLayer.setTraceInfo({pt:s,branchInfo:e}),this.manager.redrawAllLayers(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))},t.prototype.stopTracingBranch=function(e){this.manager.markLabelsDirty();var t=this.manager.poiLabelsLayer.getHoveredPOI();t&&!this.manager.poiLabelsLayer.isOpenPOI(t)&&(this.manager.poiLabelsLayer.openPOI(t),this.speakPoint(t),this.manager.redrawAllLayers()),this.last_screen_pt=null,this.manager.traceLayer.setTraceInfo(void 0),this.manager.redrawAllLayers(),this.removeAllGlobalMouseListeners()},t.prototype.handleTraceUpdate=function(e){if(this.manager.traceLayer.traceInfo){var n,r=this.manager.getProjection();if(e)n=this.getMouseRelativeToGrapher(e),this.last_screen_pt=n,this.manager.markLabelsDirty();else{if(!this.last_screen_pt)return;n=this.last_screen_pt}var i=r.reverse_map_pt(n),o=1/0,a=-1,s=this.manager.traceLayer.traceInfo,c=this.manager.graphSketches[s.branchInfo.sketch.id];if(c){s.branchInfo.sketch=c;for(var l=s.branchInfo.sketch.branches,u=0;u<l.length;u++){var d=t.calculateDistanceFromBranch(l[u],i,r,!1);d<o&&(a=u,o=d)}var p=l[a],h=p?t.getBranchesTracePoint(p,i,r):null;h&&this.speakPoint(h),this.manager.traceLayer.traceInfo.branchInfo.branch=a,this.manager.traceLayer.traceInfo.pt=h,this.manager.redrawAllLayers()}}},t.prototype.speakPoint=function(e){var t=this.manager.getAudioTrace();t&&e&&t.queueCoordinates(e,void 0,!0)},t.fillHole=function(e,t,n,i,o,a){var s=e(t);if(isFinite(s))return s;var c=t-1e-11,l=t+1e-11,u=e(c),d=e(l);if(isNaN(u)&&isNaN(d))return NaN;if(isNaN(u))return d;if(isNaN(d))return u;var p=(o-c)*n,h=(o-l)*n,f=(a-u)*i,m=(a-d)*i;return r.hypot(p,f)<r.hypot(h,m)?u:d},t.prototype.hasNonlinearMoveStrategy=function(e){if(!e||!e.sketch)return!1;var t=this.getExpressionModel(e.sketch.id);if(!t||!t.formula)return!1;var n=t.formula.move_strategy;return!(!n||!n[0])&&"updateSliderNonlinear"===n[0].type},t.prototype.movePointFromKeyboard=function(e,t){if(e&&t&&"movable-point"===e.type){var n,r=this.manager.getProjection(),i=r.map_pt({x:e.x,y:e.y}),o=0,a=0,c=t.shiftKey?10:2,l=t.shiftKey?"big":"",u=s.lookup(t);if("Up"===u?(n="y",a-=c,l+="up"):"Down"===u?(n="y",a+=c,l+="down"):"Left"===u?(n="x",o-=c,l+="down"):"Right"===u&&(n="x",o+=c,l+="up"),0!==o||0!==a){var d,p={x:i.x+o,y:i.y+a};"x"===n||this.hasNonlinearMoveStrategy(e)?d=[l,""]:"y"===n&&(d=["",l]),this.controller.dispatch({type:"on-move-point",pointInfo:e,screenPt:p,projection:r,keyboardDirection:d})}}},t.prototype.speakPoint=function(e,t){if(e){if(this.manager.getAudioTrace()){var n=this.manager.getProjection();if(n){var r=n.viewport;switch(t){case"X":c.alert("X: "+l.value(e.x,r.xmax-r.xmin).ariaString);break;case"Y":c.alert("Y: "+l.value(e.y,r.ymax-r.ymin).ariaString);break;case"L":c.alert(e.ariaLabel||this.controller.t("Graph point"));break;case"C":c.alert(u(this.controller,e.sketch.color))}}}}},t}),define("vendor/canvas2svg",[],function(){"use strict";function e(e,t){var n,r=Object.keys(t);for(n=0;n<r.length;n++)e=e.replace(new RegExp("\\{"+r[n]+"\\}","gi"),t[r[n]]);return e}function t(e){var t,n,r;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",r=0;r<12;r++)n+=t[Math.floor(Math.random()*t.length)]}while(e[n]);return n}function n(e){var t={left:"start",right:"end",center:"middle",start:"start",end:"end"};return t[e]||t.start}var r,i,o,a,s;s=function(e,t){var n,r,i,o={};for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r="&"+e[n+1]+";",i=parseInt(e[n],t),o[r]="&#"+i+";";return o["\\xa0"]="&#160;",o}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),r={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},o=function(e,t){this.__root=e,this.__ctx=t},o.prototype.addColorStop=function(t,n){var r,i,o=this.__ctx.__createElement("stop");o.setAttribute("offset",t),-1!==n.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,i=r.exec(n),o.setAttribute("stop-color",e("rgb({r},{g},{b})",{r:i[1],g:i[2],b:i[3]})),o.setAttribute("stop-opacity",i[4])):o.setAttribute("stop-color",n),this.__root.appendChild(o)},a=function(e,t){this.__root=e,this.__ctx=t},i=function(e){var t,n={width:500,height:500,enableMirroring:!1};if(arguments.length>1?(t=n,t.width=arguments[0],t.height=arguments[1]):t=e||n,!(this instanceof i))return new i(t);this._randomPostfix="-"+function(){return"xxxxxxxx".replace(/x/g,function(e){return(16*Math.random()|0).toString(16)})}(),this._svgClassNames=[],this.width=t.width||n.width,this.height=t.height||n.height,this.enableMirroring=void 0!==t.enableMirroring?t.enableMirroring:n.enableMirroring,this.canvas=this,this.__document=t.document||document,t.ctx?this.__ctx=t.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)},i.prototype.__createElement=function(e,t,n){void 0===t&&(t={});var r,i,o=this.__document.createElementNS("http://www.w3.org/2000/svg",e),a=Object.keys(t);for(n&&(o.setAttribute("fill","none"),o.setAttribute("stroke","none")),r=0;r<a.length;r++)i=a[r],o.setAttribute(i,t[i]);var s=this._svgClassNames&&this._svgClassNames[this._svgClassNames.length-1];return s&&o.setAttribute("class",s),o},i.prototype.__setDefaultStyles=function(){var e,t,n=Object.keys(r);for(e=0;e<n.length;e++)t=n[e],this[t]=r[t].canvas},i.prototype.__applyStyleState=function(e){var t,n,r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],this[n]=e[n]},i.prototype.__getStyleState=function(){var e,t,n={},i=Object.keys(r);for(e=0;e<i.length;e++)t=i[e],n[t]=this[t];return n},i.prototype.__applyStyleToCurrentElement=function(t){var n=this.__currentElement,i=this.__currentElementsToStyle;i&&(n.setAttribute(t,""),n=i.element,i.children.forEach(function(e){e.setAttribute(t,"")}));var s,c,l,u,d,p,h=Object.keys(r);for(s=0;s<h.length;s++)if(c=r[h[s]],l=this[h[s]],c.apply)if(l instanceof a){if(l.__ctx)for(;l.__ctx.__defs.childNodes.length;)u=l.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[u]=u,this.__defs.appendChild(l.__ctx.__defs.childNodes[0]);n.setAttribute(c.apply,e("url(#{id})",{id:l.__root.getAttribute("id")}))}else if(l instanceof o)n.setAttribute(c.apply,e("url(#{id})",{id:l.__root.getAttribute("id")}));else if(-1!==c.apply.indexOf(t)&&c.svg!==l)if("stroke"!==c.svgAttr&&"fill"!==c.svgAttr||-1===l.indexOf("rgba")){var f=c.svgAttr;if("globalAlpha"===h[s]&&(f=t+"-"+c.svgAttr,n.getAttribute(f)))continue;n.setAttribute(f,l)}else{d=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,p=d.exec(l),n.setAttribute(c.svgAttr,e("rgb({r},{g},{b})",{r:p[1],g:p[2],b:p[3]}));var m=p[4],g=this.globalAlpha;null!=g&&(m*=g),n.setAttribute(c.svgAttr+"-opacity",m)}},i.prototype.__closestGroupOrSvg=function(e){return e=e||this.__currentElement,"g"===e.nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},i.prototype.getSerializedSvg=function(e){var t,n,r,i,o,a,c=(new XMLSerializer).serializeToString(this.__root);if(a=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,a.test(c)&&(c=c.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(t=Object.keys(s),n=0;n<t.length;n++)r=t[n],i=s[r],o=new RegExp(r,"gi"),o.test(c)&&(c=c.replace(o,i));return c},i.prototype.getSvg=function(){return this.__root},i.prototype._dcgStartNamedGroup=function(e){var t=this.__createElement("g");t.setAttribute("id",e+this._randomPostfix);var n=this.__closestGroupOrSvg();this.__groupStack.push(n),n.appendChild(t),this.__currentElement=t},i.prototype._dcgEndNamedGroup=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElement||(this.__currentElement=this.__root.childNodes[1])},i.prototype._dcgSaveClassName=function(e){this._svgClassNames.push(e),this.__currentElement&&"path"===this.__currentElement.tagName&&!this.__currentDefaultPath&&(this.__currentElement.getAttribute("class")||this.__currentElement.setAttribute("class",e))},i.prototype._dcgRestoreClassName=function(){this._svgClassNames.pop()},i.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},i.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)},i.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){"path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=e,this.__currentElement.setAttribute("transform",r)},i.prototype.scale=function(t,n){void 0===n&&(n=t),this.__addTransform(e("scale({x},{y})",{x:t,y:n}))},i.prototype.rotate=function(t){var n=180*t/Math.PI;this.__addTransform(e("rotate({angle},{cx},{cy})",{angle:n,cx:0,cy:0}))},i.prototype.translate=function(t,n){this.__addTransform(e("translate({x},{y})",{x:t,y:n}))},i.prototype.transform=function(t,n,r,i,o,a){this.__addTransform(e("matrix({a},{b},{c},{d},{e},{f})",{a:t,b:n,c:r,d:i,e:o,f:a}))},i.prototype.beginPath=function(){var e,t;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),t=this.__closestGroupOrSvg(),t.appendChild(e),this.__currentElement=e},i.prototype.__applyCurrentDefaultPath=function(){var e=this.__currentElement;"path"===e.nodeName?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)},i.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},i.prototype.moveTo=function(t,n){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:t,y:n},this.__addPathCommand(e("M {x} {y}",{x:t,y:n}))},i.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},i.prototype.lineTo=function(t,n){this.__currentPosition={x:t,y:n},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(e("L {x} {y}",{x:t,y:n})):this.__addPathCommand(e("M {x} {y}",{x:t,y:n}))},i.prototype.bezierCurveTo=function(t,n,r,i,o,a){this.__currentPosition={x:o,y:a},this.__addPathCommand(e("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:t,cp1y:n,cp2x:r,cp2y:i,x:o,y:a}))},i.prototype.quadraticCurveTo=function(t,n,r,i){this.__currentPosition={x:r,y:i},this.__addPathCommand(e("Q {cpx} {cpy} {x} {y}",{cpx:t,cpy:n,x:r,y:i}))};var c=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};return i.prototype.arcTo=function(e,t,n,r,i){var o=this.__currentPosition&&this.__currentPosition.x,a=this.__currentPosition&&this.__currentPosition.y;if(void 0!==o&&void 0!==a){if(i<0)throw new Error("IndexSizeError: The radius provided ("+i+") is negative.");if(o===e&&a===t||e===n&&t===r||0===i)return void this.lineTo(e,t);var s=c([o-e,a-t]),l=c([n-e,r-t]);if(s[0]*l[1]==s[1]*l[0])return void this.lineTo(e,t);var u=s[0]*l[0]+s[1]*l[1],d=Math.acos(Math.abs(u)),p=c([s[0]+l[0],s[1]+l[1]]),h=i/Math.sin(d/2),f=e+h*p[0],m=t+h*p[1],g=[-s[1],s[0]],y=[l[1],-l[0]],v=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},b=v(g),x=v(y);this.lineTo(f+g[0]*i,m+g[1]*i),this.arc(f,m,i,b,x)}},i.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},i.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},i.prototype.rect=function(e,t,n,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),
this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.closePath()},i.prototype.fillRect=function(e,t,n,r){var i,o;i=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),o=this.__closestGroupOrSvg(),o.appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("fill")},i.prototype.strokeRect=function(e,t,n,r){var i,o;i=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),o=this.__closestGroupOrSvg(),o.appendChild(i),this.__currentElement=i,this.__applyStyleToCurrentElement("stroke")},i.prototype.__clearCanvas=function(){for(var e=this.__closestGroupOrSvg(),t=e.getAttribute("transform"),n=this.__root.childNodes[1],r=n.childNodes,i=r.length-1;i>=0;i--)r[i]&&n.removeChild(r[i]);this.__currentElement=n,this.__groupStack=[],t&&this.__addTransform(t)},i.prototype.clearRect=function(e,t,n,r){if(0===e&&0===t&&n===this.width&&r===this.height)return void this.__clearCanvas();var i,o=this.__closestGroupOrSvg();i=this.__createElement("rect",{x:e,y:t,width:n,height:r,fill:"#FFFFFF"},!0),o.appendChild(i)},i.prototype.createLinearGradient=function(e,n,r,i){var a=this.__createElement("linearGradient",{id:t(this.__ids),x1:e+"px",x2:r+"px",y1:n+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new o(a,this)},i.prototype.createRadialGradient=function(e,n,r,i,a,s){var c=this.__createElement("radialGradient",{id:t(this.__ids),cx:i+"px",cy:a+"px",r:s+"px",fx:e+"px",fy:n+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(c),new o(c,this)},i.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,t=e.exec(this.font),n={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(n.decoration="underline"),this.__fontHref&&(n.href=this.__fontHref),n},i.prototype.__wrapTextLink=function(e,t){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t},i.prototype.__applyText=function(e,t,r,i){var o=this.__parseFont(),a=this.__closestGroupOrSvg(),s=this.__createElement("text",{"font-family":o.family,"font-size":o.size,"font-style":o.style,"font-weight":o.weight,"text-decoration":o.decoration,x:t,y:r,"text-anchor":n(this.textAlign)},!0);s.appendChild(this.__document.createTextNode(e)),this.__currentElement=s,this.__applyStyleToCurrentElement(i),a.appendChild(this.__wrapTextLink(o,s))},i.prototype.fillText=function(e,t,n){this.__applyText(e,t,n,"fill")},i.prototype.strokeText=function(e,t,n){this.__applyText(e,t,n,"stroke")},i.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},i.prototype.arc=function(t,n,r,i,o,a){if(i!==o){i%=2*Math.PI,o%=2*Math.PI,i===o&&(o=(o+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var s=t+r*Math.cos(o),c=n+r*Math.sin(o),l=t+r*Math.cos(i),u=n+r*Math.sin(i),d=a?0:1,p=0,h=o-i;h<0&&(h+=2*Math.PI),p=a?h>Math.PI?0:1:h>Math.PI?1:0,this.lineTo(l,u),this.__addPathCommand(e("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:p,sweepFlag:d,endX:s,endY:c})),this.__currentPosition={x:s,y:c}}},i.prototype.clip=function(){var n=this.__closestGroupOrSvg(),r=this.__createElement("clipPath"),i=t(this.__ids),o=this.__createElement("g");this.__applyCurrentDefaultPath(),n.removeChild(this.__currentElement),r.setAttribute("id",i),r.appendChild(this.__currentElement),this.__defs.appendChild(r),n.setAttribute("clip-path",e("url(#{id})",{id:i})),n.appendChild(o),this.__currentElement=o},i.prototype.drawImage=function(){var e,t,n,r,o,a,s,c,l,u,d,p,h,f,m=Array.prototype.slice.call(arguments),g=m[0],y=0,v=0;if(3===m.length)e=m[1],t=m[2],o=g.width,a=g.height,n=o,r=a;else if(5===m.length)e=m[1],t=m[2],n=m[3],r=m[4],o=g.width,a=g.height;else{if(9!==m.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);y=m[1],v=m[2],o=m[3],a=m[4],e=m[5],t=m[6],n=m[7],r=m[8]}s=this.__closestGroupOrSvg(),this.__currentElement;var b="translate("+e+", "+t+")";if(g instanceof i){if(c=g.getSvg().cloneNode(!0),c.childNodes&&c.childNodes.length>1){for(l=c.childNodes[0];l.childNodes.length;)f=l.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(l.childNodes[0]);if(u=c.childNodes[1]){var x,E=u.getAttribute("transform");x=E?E+" "+b:b,u.setAttribute("transform",x),s.appendChild(u)}}}else"CANVAS"!==g.nodeName&&"IMG"!==g.nodeName||(d=this.__createElement("image"),d.setAttribute("width",n),d.setAttribute("height",r),d.setAttribute("opacity",this.globalAlpha),d.setAttribute("preserveAspectRatio","none"),(y||v||o!==g.width||a!==g.height)&&(p=this.__document.createElement("canvas"),p.width=n,p.height=r,h=p.getContext("2d"),h.drawImage(g,y,v,o,a,0,0,n,r),g=p),d.setAttribute("transform",b),d.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===g.nodeName?g.toDataURL():g.getAttribute("src")),s.appendChild(d))},i.prototype.createPattern=function(e,n){var r,o=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),s=t(this.__ids);return o.setAttribute("id",s),o.setAttribute("width",e.width),o.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?(r=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),r.setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),o.appendChild(r),this.__defs.appendChild(o)):e instanceof i&&(o.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(o)),new a(o,this)},i.prototype.setLineDash=function(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null},i.prototype.ellipse=function(t,n,r,i,o,a,s,c){if(a!==s){a%=2*Math.PI,s%=2*Math.PI,a===s&&(s=(s+2*Math.PI-.001*(c?-1:1))%(2*Math.PI));var l=t+Math.cos(-o)*r*Math.cos(s)+Math.sin(-o)*i*Math.sin(s),u=n-Math.sin(-o)*r*Math.cos(s)+Math.cos(-o)*i*Math.sin(s),d=t+Math.cos(-o)*r*Math.cos(a)+Math.sin(-o)*i*Math.sin(a),p=n-Math.sin(-o)*r*Math.cos(a)+Math.cos(-o)*i*Math.sin(a),h=c?0:1,f=0,m=s-a;m<0&&(m+=2*Math.PI),f=c?m>Math.PI?0:1:m>Math.PI?1:0,this.lineTo(d,p),this.__addPathCommand(e("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:i,xAxisRotation:o*(180/Math.PI),largeArcFlag:f,sweepFlag:h,endX:l,endY:u})),this.__currentPosition={x:l,y:u}}},i.prototype._dcgSetTitle=function(e){var t,n=this.__currentElement,r=!1,i=n.getElementsByTagName("title");i.length>0?t=i[0]:(t=this.__document.createElementNS("http://www.w3.org/2000/svg","title"),r=!0),t.textContent=e,r&&n.appendChild(t)},i.prototype.drawFocusRing=function(){},i.prototype.createImageData=function(){},i.prototype.getImageData=function(){},i.prototype.putImageData=function(){},i.prototype.globalCompositeOperation=function(){},i.prototype.setTransform=function(){},i}),define("graphing/screen",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Screen=void 0;var n=function(){function e(e,t){this.width=e,this.height=t}return e}();t.Screen=n}),define("core/math/poi-type",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LABEL=t.TRACE=t.DEFINITION=t.EDGE=t.EXTREMUM=t.INTERCEPT=t.ZERO=t.INTERSECTION=void 0,t.INTERSECTION=1001,t.ZERO=1002,t.INTERCEPT=1003,t.EXTREMUM=1004,t.EDGE=1005,t.DEFINITION=1006,t.TRACE=1007,t.LABEL=1008}),define("graphing/poi",["require","exports","core/math/poi-type","core/types/graphmode"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POI=void 0;var i=1,o=function(){function e(e,t,n,r,o,a,s){this.x=e,this.y=t,this.type=n,this.sketch=r,this.branch=o,this.pointIdxOnBranch=a,this.bareLabel=void 0!==s&&s,this.id=i++}return e.prototype.getLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return this.type===n.LABEL&&e&&"labels"in e&&e.labels?e.labels[this.pointIdxOnBranch]||"":""},e.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode},e.prototype.getCompiledFunction=function(){var e=this.sketch.branches[this.branch];if("compiled"in e&&e.compiled)return e.compiled.fn},e.prototype.isAttachedToPlottedPoint=function(){return this.type===n.DEFINITION||this.type===n.LABEL},e.prototype.isMovable=function(){return this.getGraphMode()===r.XYPOINT_MOVABLE},e.prototype.isPersistent=function(){return this.type===n.LABEL},e.prototype.getLabelSize=function(){var e=this.sketch&&this.sketch.branches[this.branch];if(this.type===n.LABEL&&e&&"labelSize"in e)return e.labelSize},e.prototype.getVerticalLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return!!(this.type===n.LABEL&&e&&"verticalLabel"in e)&&!!e.verticalLabel},e.prototype.getTextOutline=function(){if(this.hasEditableLabel())return!1;var e=this.sketch&&this.sketch.branches[this.branch];return!(this.type===n.LABEL&&e&&"suppressTextOutline"in e)||!e.suppressTextOutline},e.prototype.hasInteractiveLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return!!(e&&"interactiveLabel"in e)&&!!e.interactiveLabel},e.prototype.hasEditableLabel=function(){var e=this.sketch&&this.sketch.branches[this.branch];return!!(e&&"editableLabel"in e)&&!!e.editableLabel},e.prototype.isBareLabel=function(){return this.bareLabel},e.prototype.getMovablePoint=function(){return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)},e}();t.POI=o}),define("lib/mathspeak",["require","exports","vendor/mathquill","jquery"],function(e,t,n,r){"use strict";function i(e){var t="",n=[];n=s(e)?c(e):[{from:0,to:e.length,type:"text",text:e}];for(var r=0,i=n;r<i.length;r++){var a=i[r];t+="text"===a.type?a.text:o(a.text)}return t}function o(e){return e.match(/^\s*[\d]{0,3}(\.[\d]*)?\s*$/)?e:(l.latex(e),l.mathspeak().trim())}Object.defineProperty(t,"__esModule",{value:!0}),t.getMathspeakFromText=void 0;var a=/`[^`]*`/g,s=function(e){if(null!=e){var t=e.match(/`/g);return(null!=t&&t.length||0)%2==0}return!0},c=function(e){var t=[];if(null==e||0==e.length)return t;for(var n,r=0;n=a.exec(e);){var i=e.slice(r,n.index);i.length>0&&t.push({from:r,to:n.index,type:"text",text:i}),r=n.index+n[0].length,t.push({from:n.index,to:r,type:"math",text:n[0].slice(1,-1)})}var o=e.slice(r);return o.length>0&&t.push({from:r,to:e.length,type:"text",text:o}),t},l=n.MQ.StaticMath(r("<span/>")[0]);t.getMathspeakFromText=i}),define("graphing/graphsketch",["require","exports","core/math/poi-type","core/types/graphmode","./poi","core/math/poi-type","lib/mathspeak"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphSketch=void 0;var s=function(){function e(e,t){var r=this;this.color="#000000",this.style="normal",this.visible=!0,this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.labels=[],this.id=e,this.branches=void 0!==t?t:[],this.getPOI().forEach(function(e){e.type===n.LABEL&&r.labels.push(e)})}return e.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[],this.__cachedPOIIds={};for(var e=0;e<this.branches.length;e++){var t=this.branches[e],i=t.poi;if(t.graphMode===r.X||t.graphMode===r.Y)this._pushPOI(i.zeros,e,n.ZERO),this._pushPOI(i.intercept,e,n.INTERCEPT),this._pushPOI(i.extrema,e,n.EXTREMUM),i.intersections&&this._pushPOI(i.intersections,e,n.INTERSECTION);else if(t.graphMode===r.XYPOINT||t.graphMode===r.XYPOINT_MOVABLE){t.graphMode;var o=t.graphMode===r.XYPOINT&&!0===t.interactiveLabel;if(!0===t.showLabel||o){var a=t.nakedLabel;i.defined&&this._pushPOI(i.defined,e,n.LABEL,a)}else i.defined&&this._pushPOI(i.defined,e,n.DEFINITION)}}return this.__cachedPOI},e.prototype.getBranchPOI=function(e){return this.getPOI().filter(function(t){return t.branch===e})},e.prototype.getMovablePoints=function(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];var e=this.branches[0];if(e&&1===e.segments.length&&e.graphMode===r.XYPOINT_MOVABLE)for(var t=e.segments[0],n=0;n<t.length;n++){var i=void 0;e.tableId&&(i={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[n].index,dragX:e.movablePointInfo[n].dragX,dragY:e.movablePointInfo[n].dragY});var o=e.scaleFactors?e.scaleFactors[0][n]:void 0,s=i?i.rowIndex:n,c=1===e.segments.length&&e.labels&&e.labels[n]?e.labels[n]:void 0;this.__cachedMovablePoints.push({type:"movable-point",id:"movable:["+this.id+","+s+"]",sketch:this,color:this.color,tableInfo:i,scaleFactor:o,x:t[n][0],y:t[n][1],label:c,ariaLabel:c&&a.getMathspeakFromText(c)})}return this.__cachedMovablePoints},e.prototype.getMovablePointByIndex=function(e){return this.getMovablePoints()[e]},e.prototype.getStaticLabeledPoints=function(){var e=this;if(this.__cachedStaticLabeledPoints)return this.__cachedStaticLabeledPoints;var t=this.branches[0];return this.__cachedStaticLabeledPoints=[],this.getPOI().forEach(function(n){if((n.type===o.DEFINITION||n.type===o.LABEL)&&t.graphMode===r.XYPOINT){var i=t.showLabel,s=t.labels&&t.labels[0];(i||s)&&e.__cachedStaticLabeledPoints.push({type:"static-labeled-point",id:"static["+e.id+","+n.id+"]",x:n.x,y:n.y,sketch:n.sketch,label:s,ariaLabel:a.getMathspeakFromText(s)})}}),this.__cachedStaticLabeledPoints},e.prototype._pushPOI=function(e,t,n,r){void 0===r&&(r=!1);for(var o=0,a=e.x.length;o<a;o++){var s=new i.POI(e.x[o],e.y[o],n,this,t,o,r);e.intersects&&(s.intersects=e.intersects[o]),this.__cachedPOI.push(s),this.__cachedPOIIds[s.id]=s}},e.prototype.updateIntersections=function(e){for(var t=this,i=0,o=this.branches.length;i<o;i++)this.branches[i].poi.intersections=e[i];var a=this.__cachedPOI;this.__cachedPOI=[],a.forEach(function(e){e.type!==n.INTERSECTION?t.__cachedPOI.push(e):delete t.__cachedPOIIds[e.id]});for(var i=0;i<this.branches.length;i++){var s=this.branches[i],c=s.graphMode,l=s.poi;c!==r.X&&c!==r.Y||l.intersections&&this._pushPOI(l.intersections,i,n.INTERSECTION)}},e.prototype.getPOIById=function(e){return this.__cachedPOIIds[e]},e.prototype.updateFrom=function(e){if(e){this.visible=!0,this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.selected=e.selected;var t=this.branches[0].graphMode;if(t===r.XYPOINT||t===r.XYPOINT_MOVABLE){for(var n=!0,i=0;i<this.__cachedPOI.length;i++){var o=e.__cachedPOI[i],a=this.__cachedPOI[i];if(!o||o.type!==a.type){n=!1;break}}if(n)for(var i=0;i<this.__cachedPOI.length;i++){var o=e.__cachedPOI[i],a=this.__cachedPOI[i];delete this.__cachedPOIIds[a.id],this.__cachedPOIIds[o.id]=a,a.id=o.id}}}},e}();t.GraphSketch=s}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("base64",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.base64js=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n||e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({"/":[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,a,s,c=e.length;a=r(e),s=new d(3*c/4-a),i=a>0?c-4:c;var l=0;for(t=0,n=0;t<i;t+=4,n+=3)o=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],s[l++]=o>>16&255,s[l++]=o>>8&255,s[l++]=255&o;return 2===a?(o=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,s[l++]=255&o):1===a&&(o=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,s[l++]=o>>8&255,s[l++]=255&o),s}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(r));return i.join("")}function c(e){for(var t,n=e.length,r=n%3,i="",o=[],a=0,c=n-r;a<c;a+=16383)o.push(s(e,a,a+16383>c?c:a+16383));return 1===r?(t=e[n-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=c;for(var l=[],u=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,f=p.length;h<f;++h)l[h]=p[h],u[p.charCodeAt(h)]=h;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}]},{},[])("/")}),define("bin",["base64"],function(e){"use strict";var t={};return{load:function(e,n,r,i){var o=n.toUrl("assets_src/"+e);if(i.isBuild){var a=require.nodeRequire("fs");t[e]=a.readFileSync(o).toString("base64"),r()}else{var s=new XMLHttpRequest;s.open("GET",o,!0),s.responseType="arraybuffer",s.onload=function(){r(s.response)},s.send()}},write:function(e,n,r,i){n in t?r("define('"+e+"!"+n+"', ['base64'], function (base64) {  return base64.toByteArray('"+t[n]+"').buffer;});"):console.log("ERROR - failed to find file "+n+" in buildMap")}}}),define("bin!audio/poi.mp3",["base64"],function(e){return e.toByteArray("//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==").buffer}),define("graphing/tonegenerator",["require","exports","bin!audio/poi.mp3","tslib","browser","lib/animation-frame","bugsnag","core/types/graphmode"],function(e,t,n,r,i,o,a,s){"use strict";function c(){return{amplitude:0,phase:0,noiseVal:0,lowerOctaveGain:0,upperOctaveGain:0}}function l(e,t){var n=t.independentMin,r=t.independentMax,i=Math.abs((e-n)/(r-n));return isFinite(i)||(i=.5),i=Math.max(Math.min(i,1),0),{left:Math.cos(Math.PI/2*i),right:Math.sin(Math.PI/2*i)}}function u(e,t,n,r,i){var o=t.independent,a=t.dependent,s=e.phase,c=e.noiseVal,l=e.lowerOctaveGain,u=e.upperOctaveGain,f=n.dependentMin,m=n.dependentMax,g=0,y=0,v=0;if(!isNaN(a)&&f<=a&&a<=m){s+=d((a-f)/(m-f))/r,i<4*O?(y=0,v=0):(y=.5,v=o<0?.5:0),a<0&&(c=h(c),g+=.15*c)}else c=h(c),g+=.15*c;return l+=(y-l)/(r*O),u+=(v-u)/(r*O),g+=l*p(s)+u*p(2*s),{amplitude:g,phase:s,noiseVal:c,lowerOctaveGain:l,upperOctaveGain:u}}function d(e){return Math.min(Math.max(N*Math.pow(2,e),F),q)}function p(e){return Math.abs(4*e+1-4*Math.floor((4*e+3)/4))-1}function h(e){return(e+.2*(2*Math.random()-1))/1.02}function f(e,t){return e[0]-t[0]}function m(e){e=r.__assign({},e);var t=e.segments[0].slice();return t.sort(f),e.segments=[t],e}function g(e,t,n,r){for(var i=e.getChannelData(0),o=t.getChannelData(0),a=t.getChannelData(1),s=0;s<i.length&&s+n<o.length;s++)o[s+n]+=i[s]*r.left,a[s+n]+=i[s]*r.right}function y(e){for(var t=0,n=e.branches;t<n.length;t++){if(v(n[t]))return!0}return!1}function v(e){switch(e.graphMode){case s.X:case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return e.segments.length>0;default:return!1}}function b(e){for(var t=0;t<e.branches.length;t++)if(v(e.branches[t]))return t;return 0}function x(e,t){for(var n=0,r=0;r<=t;r++)v(e.branches[r])&&(n+=1);return n}function E(e){switch(e.graphMode){case s.X:case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return!0;default:return!1}}function w(e,t,n){switch(e.graphMode){case s.Y:case s.X:if(t<0||t>=e.segments.length)return!1;var r=e.segments[t],i=2*n;return i>=0&&i<r.length;case s.XYPOINT:case s.XYPOINT_MOVABLE:return n>=0&&n<=1&&t>=0&&t<e.segments[0].length;default:return!1}}function _(){return{independent:NaN,dependent:NaN}}function S(e,t,n,r,i){if(!w(e,t,n))return _();switch(e.graphMode){case s.Y:case s.X:var o=e.segments[t],a=2*n;return a+1>=o.length?_():{independent:o[a],dependent:o[a+1]};case s.XYPOINT:case s.XYPOINT_MOVABLE:var c=e.segments[0][t][1],o=e.segments[0],l=.5*(r.xmax-r.xmin)/i*A;if(0===n){var u=-1/0;w(e,t-1,0)&&(u=.5*(o[t][0]+o[t-1][0]));var d=Math.max(o[t][0]-l,u);return{independent:d,dependent:c}}var p=1/0;w(e,t+1,0)&&(p=.5*(o[t][0]+o[t+1][0]));var d=Math.min(o[t][0]+l,p);return{independent:d,dependent:c};default:return _()}}function M(e){switch(e.graphMode){case s.Y:case s.X:return e.segments.length;case s.XYPOINT:case s.XYPOINT_MOVABLE:return e.segments[0].length;default:return 0}}function k(e,t,n,r){if(!w(e,t,0))return NaN;switch(e.graphMode){case s.Y:case s.X:var i=e.segments[t];return i[i.length-2];case s.XYPOINT:case s.XYPOINT_MOVABLE:var i=e.segments[0],o=1/0;w(e,t+1,0)&&(o=.5*(i[t][0]+i[t+1][0]));var a=.5*(n.xmax-n.xmin)/r*A;return Math.min(i[t][0]+a,o);default:return NaN}}function C(e,t){switch(t){case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return{independentMin:e.xmin,independentMax:e.xmax,dependentMin:e.ymin,dependentMax:e.ymax};case s.X:return{independentMin:e.ymin,independentMax:e.ymax,dependentMin:e.xmin,dependentMax:e.xmax};default:throw L(t)}}function I(e){switch(e.graphMode){case s.Y:case s.XYPOINT:case s.XYPOINT_MOVABLE:return{independent:e.x,dependent:e.y};case s.X:return{independent:e.y,dependent:e.x};default:throw L(e.graphMode)}}function T(e,t){if(e===s.X)return t.y;if(e===s.Y)return t.x;throw L(e)}function L(e){return"Unexpected graph mode. Received "+e}function D(e,t,n,r){var i=e.sampleRate,o=e.getChannelData(0),a=e.getChannelData(1),d=t.graphMode,p=C(n,d),h=p.independentMin,f=p.independentMax,y=f-h,v=0,b=0,x=o.length-1,E=x/i;t.graphMode!==s.XYPOINT&&t.graphMode!==s.XYPOINT_MOVABLE||(t=m(t));for(var _=c(),I=0;I<o.length;I++){for(var L=NaN,D=(x-I)/x*h+I/x*f,P=l(D,p);v<M(t)&&S(t,v,b,n,E).independent<D;)b+=1,w(t,v,b)||(v+=1,b=0);var A=(k(t,v,n,E)-D)*(E/y),O=S(t,v,b,n,E),F=S(t,v,b-1,n,E),N=O.independent-F.independent;L=(O.independent-D)/N*F.dependent+(D-F.independent)/N*O.dependent,_=u(_,{independent:D,dependent:L},p,i,A),o[I]+=_.amplitude*P.left,a[I]+=_.amplitude*P.right}if(r&&(d===s.X||d===s.Y)&&t.poi.intersections)for(var q=T(d,t.poi.intersections),R=0,B=q;R<B.length;R++){var D=B[R],I=Math.round((D-h)/(f-h)*x);g(r,e,I,l(D,p))}}function P(e,t,n,r){for(var i=e.sampleRate,o=e.getChannelData(0),a=e.getChannelData(1),s=t.graphMode,d=C(n,s),p=o.length-1,h=c(),f=I(t),m=f.independent,y=f.dependent,v=l(m,d),b=0;b<o.length;b++){h=u(h,{independent:m,dependent:y},d,i,(p-b)/i),o[b]+=h.amplitude*v.left,a[b]+=h.amplitude*v.right}r&&void 0!==t.intersects&&g(r,e,0,v)}Object.defineProperty(t,"__esModule",{value:!0}),t.getReportedBranch=t.getFirstPlayableBranchIndex=t.canPlayBranch=t.canPlaySketch=void 0;var A=.075,O=.0015,F=125,N=500,q=2e3,R=function(){function e(e){var t=e.audioPointMove,n=e.animationFinished;this.audioSpeed=50,this.audioVolume=.5,this.audioPointMove=t,this.animationFinished=n}return e.prototype.suspend=function(){this.playbackSupported&&this.audioCtx&&(this.stop(),this.audioCtx.suspend())},e.prototype.resume=function(){if(!this.audioCtx){var e=window.AudioContext||window.webkitAudioContext;if(i.IS_IE)this.playbackSupported=!1,this.audioCtx=void 0;else try{this.audioCtx=e?new e:void 0,this.playbackSupported=!0}catch(e){a.notify(e),this.playbackSupported=!1,this.audioCtx=void 0}}this.playbackSupported&&this.audioCtx&&("suspended"===this.audioCtx.state&&this.audioCtx.resume(),this.loadPOI())},e.prototype.stop=function(){this.playTimeout&&(o.cancelAnimationFrame(this.playTimeout),this.playTimeout=void 0),this.bufferSource&&(this.bufferSource.stop(),this.bufferSource.disconnect(),this.bufferSource=void 0),this.animationFinished()},e.prototype.isAnimating=function(){return void 0!==this.playTimeout},e.prototype.getAudioSpeed=function(){return this.audioSpeed},e.prototype.setAudioSpeed=function(e){this.audioSpeed=e},e.prototype.getAudioVolume=function(){return this.audioVolume},e.prototype.setAudioVolume=function(e){this.audioVolume=e,void 0!==this.gainMaster&&(this.gainMaster.gain.value=this.audioVolume)},e.prototype.getPlaybackSupported=function(){return this.playbackSupported},e.prototype.playBranchByIndex=function(e,t,n){var r=this;if(!(t<0||t>=e.branches.length)&&v(e.branches[t])){var i=function(){return r.stop()};this.playBranch(e.branches[t],t,n,i)}},e.prototype.playSketch=function(e,t){var n=this,r=e.branches;if(0!==r.length){var i=-1,o=function(){for(i+=1;i<r.length&&!v(r[i]);)i+=1;i<r.length?n.playBranch(r[i],i,t,o):n.stop()};o()}},e.prototype.playPoint=function(e,t){if(this.audioCtx&&E(e)){var n=this.audioCtx.sampleRate,r=n*A,i=this.audioCtx.createBuffer(2,r,n);P(i,e,t,this.poiBuffer),this.connectBuffer(i)}},e.prototype.connectBuffer=function(e){if(this.audioCtx){this.gainMaster=this.audioCtx.createGain(),this.gainMaster.connect(this.audioCtx.destination),this.gainMaster.gain.value=this.audioVolume;var t=this.audioCtx.createBufferSource();this.bufferSource=t,t.buffer=e,t.connect(this.gainMaster),t.start()}},e.prototype.playBranch=function(e,t,n,r){var i=this;if(this.audioCtx){var a=this.audioSpeed/10,s=this.audioCtx.sampleRate,c=s*a,l=this.audioCtx.createBuffer(2,c,s);D(l,e,n,this.poiBuffer),this.connectBuffer(l);var u=this.audioCtx.currentTime,d=function(){if(void 0!==i.playTimeout&&o.cancelAnimationFrame(i.playTimeout),i.audioCtx){var s=i.audioCtx.currentTime,c=s-u,l=e.graphMode,p=C(n,l),h=p.independentMin,f=p.independentMax,m=(a-c)/a*h+c/a*f;i.audioPointMove(t,m),c<a?i.playTimeout=o.requestAnimationFrame(d):r()}};d()}},e.prototype.loadPOI=function(){var e=this;this.playbackSupported&&!this.poiBuffer&&this.audioCtx&&this.audioCtx.decodeAudioData(n.slice(0),function(t){e.poiBuffer=t})},e}();t.default=R,t.canPlaySketch=y,t.canPlayBranch=v,t.getFirstPlayableBranchIndex=b,t.getReportedBranch=x}),define("graphing/audiographnavigator",["require","exports","main/propagate_selection","tslib","underscore","core/types/graphmode","core/lib/label","core/math/poi-type","graphing/tonegenerator","underscore","lib/aria"],function(e,t,n,r,i,o,a,s,c,l,u){"use strict";function d(e,t,n){return{x:e.x,y:e.y,branch:e.branch,reportedBranch:n,type:e.type,graphMode:t,intersects:e.intersects}}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t,n){this.grapher=n,this.controller=e,this.audiograph=t,this.reset()}return e.prototype.reset=function(){this.currentPoint=void 0,this.resetToFirstBranch(),this.sampledPoints=[],this.pois=[],this.independent=0,this.xstep=0,this.ystep=0},e.prototype.resetToFirstBranch=function(){var e=this.getCurrentSketch();this.branch=e?c.getFirstPlayableBranchIndex(e):0},e.prototype.getBranchPoints=function(e){var t=[];if(e>=0)for(var n=0,r=this.getSampledPoints();n<r.length;n++){var i=r[n];i.branch===e&&t.push(i)}return t},e.prototype.resetTracePoint=function(){this.drawTrace(this.getCurrentPoint())},e.prototype.drawTrace=function(e){var t=this.getCurrentSketch();if(e&&t){var n=t.branches[this.branch];if(n){if(n.graphMode!==o.XYPOINT){var r={x:e.x,y:e.y},i={branchInfo:{branch:e.branch,id:t.id,sketch:t},pt:r};l.isEqual(i,this.grapher.traceLayer.getTraceInfo())||(this.grapher.traceLayer.setTraceInfo(i),this.grapher.redrawAllLayers())}}}},e.prototype.moveToOrigin=function(){var e=this.getCurrentSketch();if(e&&c.canPlaySketch(e)){var t=e.branches[this.branch];if(c.canPlayBranch(t)){var n=t.graphMode;if(n===o.Y)this.setIndependent("x",0);else if(n===o.X)this.setIndependent("y",0);else if(n===o.XYPOINT){var r=this.getSortedPOI()[0];this.setIndependent("x",r?r.x:0)}}}},e.prototype.getCurrentSketch=function(){var e,t=this.getSelectedItem();if(t){var n=this.audiograph.getFocusedCell();e="table"===t.type&&n?this.getGraphSketchForTableCell(t,n):this.grapher.getGraphSketch(t.id)}return e},e.prototype.getFirstTraceableSketch=function(e){for(var t,n=this.controller.getItemCount(),r=this.controller.shouldAudioTraceReverseExpressions(),i=0;i<n;i++){var o=r?n-1-i:i,a=this.controller.getItemModelByIndex(o);if(a&&this.canTrace(a)){var s=r?this.prevTableColumn(a):this.nextTableColumn(a);if(s?(this.audiograph.setFocusedCell(s),t=this.getGraphSketchForTableCell(a,s)):t=this.grapher.getGraphSketch(a.id),t){e&&e.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:o});break}}}return t},e.prototype.canTrace=function(e){if("image"===e.type)return!1;if("shouldGraph"in e){var t=this.grapher.getGraphSketch(e.id);return!!t&&c.canPlaySketch(t)}return!1},e.prototype.getTraceableExpressionCount=function(){for(var e=0,t=this.controller.getItemCount(),n=0;n<t;n++){var r=this.controller.getItemModelByIndex(n);r&&(this.canTrace(r)&&e++)}return e},e.prototype.computeStepSizes=function(){var e=this.grapher.getProjection().viewport;if(e){this.viewport=e;var t=e.xmin,n=e.xmax;this.xstep=Math.abs(n-t)/100,this.xscale=n-t;var r=e.ymin,i=e.ymax;this.ystep=Math.abs(i-r)/100,this.yscale=i-r;var a=this.getCurrentSketch();if(a&&c.canPlaySketch(a)){var s=a.branches[this.branch];if(c.canPlayBranch(s)){var l=s.graphMode;if(l===o.Y)this.independent<t?this.independent=t:this.independent>n&&(this.independent=n);else if(l===o.X)this.independent<r?this.independent=r:this.independent>i&&(this.independent=i);else if(l===o.XYPOINT){var u=void 0,d=void 0;this.independent<t?(d=this.getSortedPOI()[0],this.independent=d&&void 0!==d.x?d.x:0):this.independent>n&&(u=this.getSortedPOI(),d=u[u.length-1],this.independent=d&&void 0!==d.x?d.x:0)}}}}},e.prototype.getPoint=function(e,t){var n,r=this.getCurrentSketch();if(!r||!c.canPlaySketch(r))return n;var i,a,s,l=0,u=r.branches[e];if(u){var d=c.getReportedBranch(r,e)
;return"compiled"in u&&u.compiled&&(s=u.compiled.fn),a=u.graphMode,a===o.Y?(i=this.getInterveningPOIs(t,t+this.xstep,e,a)[0],i&&i.x===t&&i.branch===e||(i=void 0,l=s?s(t):0),i?n={x:i.x,y:i.y,type:i.type,typeChain:i.typeChain,branch:i.branch,reportedBranch:d,graphMode:a,intersects:i.intersects}:s&&(n={x:t,y:l,branch:e,reportedBranch:d,graphMode:a})):a===o.X?(i=this.getInterveningPOIs(t,t+this.ystep,e,a)[0],i&&i.y===t&&i.branch===e||(i=void 0,l=s?s(t):0),i?n={x:i.x,y:i.y,type:i.type,typeChain:i.typeChain,branch:i.branch,reportedBranch:d,graphMode:a,intersects:i.intersects}:s&&(n={y:t,x:l,branch:e,reportedBranch:d,graphMode:a})):a===o.XYPOINT&&(i=this.getInterveningPOIs(t,t+this.xstep,e,a)[0],n=i&&i.x===t&&i.branch===e?{x:i.x,y:i.y,type:i.type,typeChain:i.typeChain,branch:i.branch,reportedBranch:d,graphMode:a,intersects:i.intersects}:{x:t,y:NaN,branch:e,reportedBranch:d,graphMode:a}),n}},e.prototype.getSampledPoints=function(){return 0===this.sampledPoints.length&&this.updateSampledPoints(),this.sampledPoints},e.prototype.updateSampledPoints=function(){var e=this.getCurrentSketch();if(e&&c.canPlaySketch(e)){for(var t=[],n=0;n<e.branches.length;n++){var r=e.branches[n];if(c.canPlayBranch(r)){var i=r.graphMode,s=0,l=0,u=0,d=[];if(i===o.Y||i===o.XYPOINT?(s=this.viewport.xmin,l=this.viewport.xmax,u=this.xstep):i===o.X&&(s=this.viewport.ymin,l=this.viewport.ymax,u=this.ystep),0!==s||0!==l||0!==u){for(var p=0;a.value(s+p*u).value<=l;p++){var h=a.value(s+p*u).value,f=this.getInterveningPOIs(h,h+u,n,i);if(f.length>0)d.push.apply(d,f);else{var m=this.getPoint(n,h);m&&d.push(m)}}t.push.apply(t,this.removeDuplicates(d,i))}}}this.sampledPoints=t}},e.prototype.getCurrentPoint=function(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint},e.prototype.updateCurrentPoint=function(e){if(e){this.currentPoint=e;var t=e.graphMode;t===o.Y||t===o.XYPOINT?this.independent=void 0!==e.x?e.x:0:t===o.X&&(this.independent=void 0!==e.y?e.y:0),this.branch=e.branch}else this.currentPoint=this.getPoint(this.branch,this.independent)},e.prototype.prevPoint=function(){this.moveToPoint(-1)},e.prototype.nextPoint=function(){this.moveToPoint(1)},e.prototype.firstPoint=function(){var e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[0])},e.prototype.lastPoint=function(){var e=this.getSampledPoints();e.length>0&&this.updateCurrentPoint(e[e.length-1])},e.prototype.moveToPoint=function(e){var t=this.getCurrentPoint();if(t){if(t.graphMode===o.XYPOINT)return void this.moveToPOI(e);var n=this.getSampledPoints(),r=this.getPointIndex(n,t);if(-1!==r){var i=r+e;i<=0?(i=0,u.queue(this.controller.t("First point"))):i>=n.length-1&&(i=n.length-1,u.queue(this.controller.t("Last point")));var a=n[i];this.updateCurrentPoint(a)}}},e.prototype.prevPOI=function(){this.moveToPOI(-1)},e.prototype.nextPOI=function(){this.moveToPOI(1)},e.prototype.getSortedPOI=function(){return this.pois&&0!==this.pois.length||this.updatePOI(),this.pois},e.prototype.updatePOI=function(){var e,t=[],n=[],r=this.getCurrentSketch();if(r&&c.canPlaySketch(r)){for(var a=0;a<r.branches.length;a++){var s=r.branches[a];if(s){var l=c.getReportedBranch(r,a),u=s.graphMode;if(n=[],e=r.getBranchPOI(a),e.length>0){u===o.Y||u===o.XYPOINT?n=i.sortBy(e,"x"):u===o.X&&(n=i.sortBy(e,"y"));for(var p=[],h=0,f=n;h<f.length;h++){var m=f[h];p.push(d(m,u,l))}t.push.apply(t,this.removeDuplicates(p,u))}}}this.pois=t}},e.prototype.removeDuplicates=function(e,t){for(var n=[],i=0,o=e;i<o.length;i++){var c=o[i];if(c=r.__assign({},c),c.graphMode=t,0!==n.length){var l=n[n.length-1];a.value(l.x).value===a.value(c.x).value&&a.value(l.y).value===a.value(c.y).value&&l.branch===c.branch?(l.typeChain||(l.typeChain=void 0!==l.type?[l.type]:[]),void 0!==c.type&&-1===l.typeChain.indexOf(c.type)&&l.typeChain.push(c.type),c.type===s.INTERSECTION&&c.intersects&&void 0===l.intersects&&(l.intersects=c.intersects)):n.push(c)}else n.push(c)}return n},e.prototype.getInterveningPOIs=function(e,t,n,r){for(var i=[],a=this.getSortedPOI(),s=NaN,c=0,l=a;c<l.length;c++){var u=l[c];u&&(r!==o.Y&&r!==o.XYPOINT||isNaN(u.x)?r!==o.X||isNaN(u.y)||(s=u.y):s=u.x,u.branch===n&&!isNaN(s)&&(e<=s&&s<t||t<=s&&s<e)&&i.push(u))}return e>t?i.reverse():i},e.prototype.setIndependent=function(e,t){for(var n=this.getSampledPoints(),r=0,i=n;r<i.length;r++){var o=i[r];if(o&&o.hasOwnProperty(e)&&o[e]===t){if("x"===e)return this.independent=void 0!==o.x?o.x:0,void this.updateCurrentPoint();if("y"===e)return this.independent=void 0!==o.y?o.y:0,void this.updateCurrentPoint()}}var a=!0;if(n.length>0){var s=Math.floor((n.length-1)/2),c=n[s];c&&("x"===e?(this.independent=void 0!==c.x?c.x:0,a=!1):"y"===e&&(this.independent=void 0!==c.y?c.y:0,a=!1))}a&&(this.independent=0),this.resetToFirstBranch(),this.updateCurrentPoint()},e.prototype.moveToPOI=function(e){var t=this.getCurrentPoint();if(t){var n=this.getSampledPoints(),r=this.getPointIndex(n,t);if(-1!==r){for(var i=t.graphMode,a=-1,s=1===e?n.length-1:0,c=r;c!==s+e;c+=e){var l=n[c];if(((i===o.Y||i===o.XYPOINT)&&t.x!==l.x||i===o.X&&t.y!==l.y)&&void 0!==l.type){a=c;break}}-1===a?u.queue(this.controller.t("No more points of interest")):this.updateCurrentPoint(n[a])}}},e.prototype.getPointIndex=function(e,t){var n=-1;if(e.length>0&&t)for(var r=t.graphMode,i=0;i<e.length;i++){var a=e[i];if(((r===o.Y||r===o.XYPOINT)&&a.x===t.x||r===o.X&&a.y===t.y)&&a.branch===t.branch){n=i;break}}return n},e.prototype.prevCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveDown():this.curveUp()},e.prototype.nextCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveUp():this.curveDown()},e.prototype.curveUp=function(){var e=this.getSelectedItem();if(e){var t=this.prevTableColumn(e);if(t)this.audiograph.setFocusedCell(t);else{var n=e.index,r=this.findPrevTraceableIndex(n);if(-1!==r){var i=this.controller.getItemModelByIndex(r);i&&this.controller.dispatch({type:"set-selected-id",id:i.id})}}(t||this.getSelectedItem()!==e)&&this.audiograph.enterAudioTrace()}},e.prototype.curveDown=function(){var e=this.getSelectedItem();if(e){var t=this.nextTableColumn(e);if(t)this.audiograph.setFocusedCell(t);else{var n=e.index,r=this.findNextTraceableIndex(n);if(-1!==r){var i=this.controller.getItemModelByIndex(r);i&&this.controller.dispatch({type:"set-selected-id",id:i.id})}}(t||this.getSelectedItem()!==e)&&this.audiograph.enterAudioTrace()}},e.prototype.findPrevTraceableIndex=function(e){var t;do{e--,t=this.controller.getItemModelByIndex(e);var n=t&&this.prevTableColumn(t);if(n)return this.audiograph.setFocusedCell(n),e}while(t&&!this.canTrace(t));return t?e:-1},e.prototype.findNextTraceableIndex=function(e){var t;do{e++,t=this.controller.getItemModelByIndex(e);var n=t&&this.nextTableColumn(t);if(n)return this.audiograph.setFocusedCell(n),e}while(t&&!this.canTrace(t));return t?e:-1},e.prototype.prevTableColumn=function(e){return this.tableColumn(e,-1)},e.prototype.nextTableColumn=function(e){return this.tableColumn(e,1)},e.prototype.tableColumn=function(e,t){var n;if(e&&"table"===e.type){var r=this.audiograph.getFocusedCell(),i=void 0,o=void 0,a=void 0;-1===t?(i=r?Math.max(r.location.column-1,0):NaN,o=r&&r.tableId===e.id&&!isNaN(i)?i:e.columnModels.length-1,a=0):(i=r?Math.min(r.location.column+1,e.columnModels.length-1):NaN,o=r&&r.tableId===e.id&&!isNaN(i)?i:0,a=e.columnModels.length-1);var s=(a-o)/t;if(isFinite(s)&&s>=0)for(var c=o;c!==a;c+=t){var l=e.columnModels[c];if(l){var u=this.grapher.getGraphSketch(l.id);if(u){n={tableId:e.id,location:{column:c,row:0}};break}}}}return n},e.prototype.getGraphSketchForTableCell=function(e,t){if(e&&"table"===e.type&&t){var n=e.columnModels[t.location.column];return n?this.grapher.getGraphSketch(n.id):void 0}},e.prototype.getXScale=function(){return this.xscale},e.prototype.getYScale=function(){return this.yscale},e.prototype.getSelectedItem=function(){var e=this.controller.getSelectedItem();return e&&"folder"===e.type?this.controller.getItemModel(n.getSelectedId(e)):e},e}();t.default=p}),define("graphing/audiograph",["require","exports","tslib","browser","keys","lib/aria","graphing/audiographnavigator","graphing/tonegenerator","core/types/graphmode","core/lib/label","core/math/poi-type","graphing-calc/models/table","expressions/colors","lib/mathspeak"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){var n=this;this.grapher=t,this.controller=e,this.audioTraceActive=!1,this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=1,this.agNavigator=new a.default(e,this,this.grapher),this.tonegen=new s.default({audioPointMove:function(e,t){n.agNavigator.drawTrace(n.agNavigator.getPoint(e,t))},animationFinished:function(){n.recomputePoints()}}),this.tonegen.suspend()}return e.prototype.remove=function(){},e.prototype.handleKeydown=function(e){var t=e.altKey||e.metaKey,n=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,o=e.ctrlKey&&!e.metaKey&&!e.altKey,a=r.IS_APPLE?o:t,s=a&&(61===e.which||187===e.which),c=a&&!e.shiftKey&&(173===e.which||189===e.which),l=a&&!e.shiftKey&&"0"===i.lookupChar(e);n&&"S"===i.lookupChar(e)?this.agNavigator.getSelectedItem()&&(this.audioTraceActive||this.isFocusInExpressionsView())&&(e.preventDefault(),e.stopPropagation(),this.describeGraph()):n&&"T"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.toggleAudioTrace()):s?(e.preventDefault(),e.stopPropagation(),this.zoom("in")):c?(e.preventDefault(),e.stopPropagation(),this.zoom("out")):l?(e.preventDefault(),e.stopPropagation(),this.zoom("default")):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(e):this.audioTraceKeydown(e))},e.prototype.sliderTraceKeydown=function(e){var t=e.altKey||e.metaKey,n=!t&&!e.ctrlKey&&!e.shiftKey;n&&i.lookup(e)===i.LEFT||"J"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.decrementSliderValue()):n&&i.lookup(e)===i.RIGHT||"L"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.incrementSliderValue()):n&&i.lookup(e)===i.PAGEDOWN?(e.preventDefault(),e.stopPropagation(),this.decrementBigSliderValue()):n&&i.lookup(e)===i.PAGEUP?(e.preventDefault(),e.stopPropagation(),this.incrementBigSliderValue()):t||i.lookup(e)!==i.DOWN&&(e.shiftKey||i.lookup(e)!==i.TAB)&&"K"!==i.lookupChar(e)?!t&&(i.lookup(e)===i.UP||e.shiftKey&&i.lookup(e)===i.TAB||"I"===i.lookupChar(e))?(e.preventDefault(),e.stopPropagation(),this.prevSlider()):n&&i.lookup(e)===i.HOME||"U"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMin()):n&&i.lookup(e)===i.END||"N"===i.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),this.sliderMax()):(this.stopAnimations(),this.audioTraceKeydown(e)):(e.preventDefault(),e.stopPropagation(),this.nextSlider())},e.prototype.audioTraceKeydown=function(e){var t=this,n=e.altKey||e.metaKey,r=n&&!e.ctrlKey&&!e.shiftKey,a=!n&&!e.ctrlKey&&!e.shiftKey,c=i.lookupChar(e);if(i.lookup(e)===i.UP&&r)e.preventDefault(),e.stopPropagation(),this.agNavigator.prevCurve();else if(i.lookup(e)===i.DOWN&&r)e.preventDefault(),e.stopPropagation(),this.agNavigator.nextCurve();else if(a&&i.lookup(e)===i.LEFT||i.lookup(e)===i.UP||"J"===c)e.preventDefault(),e.stopPropagation(),this.agNavigator.prevPoint(),this.reportAudioTrace();else if(a&&i.lookup(e)===i.RIGHT||i.lookup(e)===i.DOWN||"L"===c)e.preventDefault(),e.stopPropagation(),this.agNavigator.nextPoint(),this.reportAudioTrace();else if(n||i.lookup(e)!==i.PAGEDOWN&&(e.shiftKey||i.lookup(e)!==i.TAB)&&"I"!==c)if(!n&&(i.lookup(e)===i.PAGEUP||e.shiftKey&&i.lookup(e)===i.TAB||"K"===c))e.preventDefault(),e.stopPropagation(),this.agNavigator.prevPOI(),this.reportAudioTrace();else if(a&&i.lookup(e)===i.HOME||"U"===c)e.preventDefault(),e.stopPropagation(),this.agNavigator.firstPoint(),this.reportAudioTrace();else if(a&&i.lookup(e)===i.END||"N"===c)e.preventDefault(),e.stopPropagation(),this.agNavigator.lastPoint(),this.reportAudioTrace();else if(a&&"X"===c)e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("x");else if(a&&"P"===c)e.preventDefault(),e.stopPropagation(),this.queuePOICount(),o.alert();else if(a&&"Y"===c)e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("y");else if(a&&"T"===c)e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("type");else if(a&&"B"===c)e.preventDefault(),e.stopPropagation(),this.reportAudioTrace("branch");else if(a&&"O"===c)e.preventDefault(),e.stopPropagation(),this.agNavigator.moveToOrigin(),this.reportAudioTrace();else if(a&&"H"===c)if(e.preventDefault(),e.stopPropagation(),this.tonegen.getPlaybackSupported()){this.tonegen.stop();var l=this.agNavigator.getCurrentSketch();l&&s.canPlaySketch(l)?(o.alert(this.controller.t("Playing graph.")),clearTimeout(this.playTimeout),this.playTimeout=setTimeout(function(){return t.tonegen.playSketch(l,t.grapher.getCurrentViewport())},500)):o.alert(this.controller.t("Unable to audio trace this expression."))}else o.alert(this.controller.t("Unable to play audio."));else if(a&&"string"==typeof c&&c>="0"&&c<="9"){e.preventDefault(),e.stopPropagation(),this.tonegen.stop();var u=this.agNavigator.getCurrentSketch();if(u){var d=void 0;d=48===e.which?9:e.which-49;for(var h=d,f=-1,m=0;m<u.branches.length;m++)if(s.canPlayBranch(u.branches[m])&&(h-=1),h<0){f=m;break}f>=0?this.tonegen.getPlaybackSupported()?(o.alert(this.controller.t("Branch __branch__",{branch:d+1})),clearTimeout(this.playTimeout),this.playTimeout=setTimeout(function(){return t.tonegen.playBranchByIndex(u,f,t.grapher.getCurrentViewport())},500)):o.alert(this.controller.t("Unable to play audio.")):o.alert(this.controller.t("Branch __branch__ does not exist.",{branch:d+1}))}else o.alert(this.controller.t("No graph selected."))}else if(n&&"string"==typeof c&&c>="1"&&c<="5")e.preventDefault(),e.stopPropagation(),this.adjustPlaybackSpeed(c);else if(e.altKey||e.ctrlKey||e.metaKey||"V"!==c)if(a&&"A"===c)e.preventDefault(),e.stopPropagation(),this.queueAnimatingPoints(!0),o.alert();else if(a&&"S"===c&&this.controller.isListEnabled())e.preventDefault(),e.stopPropagation(),this.toggleSliderTrace();else if(a&&"C"===c){e.preventDefault(),e.stopPropagation();var g=this.agNavigator.getCurrentSketch();g?o.queue(p.getColorName(this.controller,g.color)):o.queue("unknown"),o.alert()}else a&&this.exitAudioTrace();else e.preventDefault(),e.stopPropagation(),e.shiftKey?this.adjustVolume("down"):this.adjustVolume("up");else e.preventDefault(),e.stopPropagation(),this.agNavigator.nextPOI(),this.reportAudioTrace()},e.prototype.describeGraph=function(){var e=this.agNavigator.getCurrentSketch();if(e){var t=s.getReportedBranch(e,e.branches.length-1);t>1&&o.queue(this.controller.t("Branches: __branches__.",{branches:t}));var n=this.agNavigator.getSortedPOI();if(o.queue(this.controller.t("Points of interest: __poiCount__.",{poiCount:n.length})),n.length>0)for(var r=0;r<n.length;r++)this.queueCoordinates(n[r])}else o.queue(this.controller.t("No graph information available."));o.alert()},e.prototype.queueCoordinates=function(e,t,n){if(void 0===n&&(n=!1),e){var r=this.agNavigator.getCurrentSketch();(e.hasOwnProperty("branch")&&r&&r.branches.length>1&&this.lastSpokenBranch!==e.reportedBranch||"branch"===t)&&o.queue(this.controller.t("Branch __branch__.",{branch:e.reportedBranch})),this.lastSpokenBranch=e.reportedBranch?e.reportedBranch:e.branch+1,e.hasOwnProperty("type")&&!t?o.queue(this.controller.t("__type__ at",{type:this.describePOI(e)})):"type"===t&&o.queue(this.describePOI(e)),t&&"x"!==t||o.queue(this.controller.t("X: __x__.",{x:l.value(e.x,this.agNavigator.getXScale()).ariaString})),t&&"y"!==t||o.queue(this.controller.t("Y: __y__.",{y:l.value(e.y,this.agNavigator.getYScale()).ariaString})),n&&o.alert()}},e.prototype.describePOI=function(e){if(e.typeChain){for(var t=[],n=0;n<e.typeChain.length;n++)t.push(this.poiTypeToText(e,n));return t.join(", ")}return this.poiTypeToText(e)},e.prototype.poiTypeToText=function(e,t){switch(t&&e.typeChain?e.typeChain[t]:e.type){case u.INTERSECTION:var n=this.getIntersectingCurves(e);return""!==n?this.controller.t("Intersection with __curves__",{curves:n}):this.controller.t("Intersection");case u.ZERO:return this.controller.t("Zero");case u.INTERCEPT:return this.controller.t("Intercept");case u.EXTREMUM:return this.controller.t("Extremum");case u.EDGE:return this.controller.t("Edge");case u.DEFINITION:return this.controller.t("Point");case u.TRACE:return this.controller.t("Trace");case u.LABEL:return this.controller.t("Label");default:return this.controller.t("Not a P O I")}},e.prototype.getIntersectingCurves=function(e){return e&&e.intersects?this.getExpressionAriaLabel(e.intersects):""},e.prototype.getExpressionAriaLabel=function(e){var t=this.controller.getItemModel(e);return t?"expression"===t.type&&t.label?h.getMathspeakFromText(t.label):this.controller.isItemSecret(t.id)?this.controller.t("Secret expression __index__",{index:t.secretIndex}):"table"===t.type&&this.focusedCell?this.controller.t("Expression __index__ column __column__",{index:t.displayIndex,column:this.focusedCell.location.column+1}):this.controller.t("Expression __index__",{index:t.displayIndex}):""},e.prototype.exitAudioTrace=function(e){if(this.audioTraceActive){if(this.audioTraceActive=!1,e||(e=this.controller.t("Audio trace off.")),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView){var t=this.agNavigator.getSelectedItem();t&&this.controller.isItemSelectable(t.id)||(t=this.controller.getFirstFullyVisibleItem()),t&&this.controller.isItemSelectable(t.id)&&this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"table"===t.type&&void 0!==this.focusedCell?n.__assign({location:"cell"},this.focusedCell.location):"end"})}this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.tonegen.stop(),this.tonegen.suspend(),this.agNavigator.reset(),this.lastSpokenBranch=1,this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.redrawAllLayers(),o.alert(e),this.resumeAnimations()}},e.prototype.isFocusInExpressionsView=function(){return!!this.controller.getFocusedItem()},e.prototype.enterAudioTrace=function(){var e=this,t=this.agNavigator.getSelectedItem(),n=t&&"table"!==t.type&&!this.agNavigator.canTrace(t)?this.getExpressionAriaLabel(t.id):void 0,i=!1;this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),t&&n&&o.queue(this.controller.t("__expression__ cannot be audio traced.",{expression:n})),i=!!n||!this.wasFocusInExpressionsView);var a;if(i)a=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else if(!n){if(t&&"expression"===t.type&&t.formula&&t.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("No graph to trace.")}});if(t&&"table"===t.type){var s=d.getSelectedCell(t);this.focusedCell&&this.focusedCell.tableId===t.id&&(!s||s.column===this.focusedCell.location.column&&s.row===this.focusedCell.location.row)||(this.focusedCell=void 0!==s?{tableId:t.id,location:s}:void 0)}else this.focusedCell=void 0;a=this.agNavigator.getCurrentSketch()}if(!a)return this.agNavigator.reset(),this.lastSpokenBranch=1,this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("No graph to trace.")}});var l=a.branches[0].graphMode;return l===c.IMPLICIT?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Sorry, but I can't trace implicit curves yet.")}})):l===c.PARAMETRIC?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Sorry, but I can't trace parametric curves yet.")}})):l===c.POLAR?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Sorry, but I can't trace polar curves yet.")}})):(this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=1,this.grapher.traceLayer.clearOpenedPOI(),this.grapher.redrawAllLayers(),this.audioTraceActive||(this.controller.dispatch({type:"toast/show",toast:{message:this.controller.t("Audio trace on."),noAria:!0,onHide:function(){return e.exitAudioTrace()},hideAfter:0}}),n&&a&&o.queue(this.controller.t("Tracing __expression__.",{expression:this.getExpressionAriaLabel(a.id)})),o.queue(this.controller.t("Audio trace on.")),this.pauseAnimations(),this.queueAnimatingPoints(!1),o.queue(this.controller.t("Use Arrow keys to navigate.")),this.tonegen.resume(),this.tonegen.getPlaybackSupported()&&o.queue(this.controller.t("To hear the graph, press H.")),this.agNavigator.getTraceableExpressionCount()>1&&(r.IS_APPLE?o.queue(this.controller.t("To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.")):o.queue(this.controller.t("To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow."))),r.IS_APPLE?o.queue(this.controller.t("To disable audio trace, press OPTION+T.")):o.queue(this.controller.t("To disable audio trace, press ALT+T.")),this.wasFocusInExpressionsView&&this.controller.find$(".dcg-graph-outer").one("focusin",function(){setTimeout(function(){o.alert()},0)}).focus()),this.agNavigator.moveToOrigin(),o.queue(this.getExpressionAriaLabel(a.id)),this.reportAudioTrace(),this.wasFocusInExpressionsView||o.alert(),void(this.audioTraceActive=!0))},e.prototype.checkIfSelectedItemChanged=function(e){this.lastSelectedId!==e&&(this.lastSelectedId=e,this.audioTraceActive&&(e?(o.queue(this.getExpressionAriaLabel(e)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),o.alert()):this.exitAudioTrace()))},e.prototype.pauseAnimations=function(){var e=this;this.sliderArray.length=0,this.controller.getAllModelsWithSliders().forEach(function(t){t.slider.isPlaying&&(e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1}),e.sliderArray.push(t))})},e.prototype.resumeAnimations=function(){if(0!==this.sliderArray.length){for(var e=0;e<this.sliderArray.length;e++){var t=this.sliderArray[e];!0!==t.slider.isPlaying&&this.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!0})}this.sliderArray.length=0}},e.prototype.stopAnimations=function(){var e=this;this.controller.getAllModelsWithSliders().forEach(function(t){t.slider.isPlaying&&e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1})})},e.prototype.getAnimatingVars=function(){for(var e=[],t=0;t<this.sliderArray.length;t++)e.push('"'+this.sliderArray[t].dependent+'"');return e},e.prototype.hasActiveSliders=function(){for(var e=this.controller.getAllModelsWithSliders(),t=0;t<e.length;t++)if(e[t].slider.isPlaying)return!0;return!1},e.prototype.queueAnimatingPoints=function(e){1===this.sliderArray.length?o.queue(this.controller.t("One animating slider was paused.")):this.sliderArray.length>1?o.queue(this.controller.t("__sliders__ animating sliders were paused.",{sliders:this.sliderArray.length})):e&&o.queue(this.controller.t("No animating sliders were paused."))},e.prototype.queueSliderLatex=function(){this.hasActiveSliders()||this.tonegen.stop();var e=this.getSelectedSlider();e?o.queue(e.latex):o.queue(this.controller.t("Unable to determine slider value"))},e.prototype.getSelectedSlider=function(){var e=this.controller.getAllModelsWithSliders();return this.sliderIndex<=e.length-1?e[this.sliderIndex]:null},e.prototype.incrementSliderValue=function(){this.adjustSlider("up")},e.prototype.decrementSliderValue=function(){this.adjustSlider("down")},e.prototype.incrementBigSliderValue=function(){this.adjustSlider("bigup")},e.prototype.decrementBigSliderValue=function(){this.adjustSlider("bigdown")},e.prototype.nextSlider=function(){this.adjustSlider("next")},e.prototype.prevSlider=function(){this.adjustSlider("prev")},e.prototype.sliderMin=function(){this.adjustSlider("min")},e.prototype.sliderMax=function(){this.adjustSlider("max")},e.prototype.adjustSlider=function(e){var t=this.getSelectedSlider();if(!t)return void o.queue(this.controller.t("Unable to adjust slider"));var n=t.latex,r=this.controller.getAllModelsWithSliders().length;switch(e){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":this.controller.dispatch({type:"adjust-slider-by-keyboard",id:t.id,adjustment:e}),this.queueSliderLatex(),o.alert();break;case"next":return this.sliderIndex++,this.sliderIndex>=r&&(o.queue(this.controller.t("Last slider.")),this.sliderIndex=r-1),this.queueSliderLatex(),void o.alert();case"prev":return this.sliderIndex--,this.sliderIndex<0&&(o.queue(this.controller.t("First slider.")),this.sliderIndex=0),this.queueSliderLatex(),void o.alert()}t.slider.isPlaying||n===t.latex||(this.queueSliderLatex(),o.alert())},e.prototype.toggleAudioTrace=function(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()},e.prototype.toggleSliderTrace=function(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()},e.prototype.enterSliderTrace=function(){if(!this.sliderTraceActive){this.sliderIndex=0;0!==this.controller.getAllModelsWithSliders().length?(o.queue(this.controller.t("Slider trace on.")),this.queueSliderLatex(),this.sliderTraceActive=!0):(o.queue(this.controller.t("No sliders to trace.")),this.sliderTraceActive=!1),o.alert()}},e.prototype.exitSliderTrace=function(){this.sliderTraceActive&&(o.queue(this.controller.t("Slider trace off.")),this.sliderTraceActive=!1,this.sliderIndex=0,o.alert())},e.prototype.recomputePoints=function(){this.audioTraceActive&&(this.tonegen.isAnimating()||(this.agNavigator.updatePOI(),this.agNavigator.updateSampledPoints(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes()))},e.prototype.queuePOICount=function(){var e=this.agNavigator.getCurrentSketch(),t=e?e.getPOI().length:0;o.queue(this.controller.t("Points of interest, __x__.",{x:t}))},e.prototype.reportAudioTrace=function(e,t){var n=this.agNavigator.getCurrentPoint();if(n&&(e||(t||this.tonegen.stop(),this.tonegen.playPoint(n,this.grapher.getCurrentViewport())),!t)){this.queueCoordinates(n,e);var r=e?0:100;setTimeout(function(){o.alert()},r)}},e.prototype.adjustPlaybackSpeed=function(e){switch(e){case"1":return this.tonegen.setAudioSpeed(150),o.alert(this.controller.t("Graph playback very slow"));case"2":return this.tonegen.setAudioSpeed(100),o.alert(this.controller.t("Graph playback slow"));case"3":return this.tonegen.setAudioSpeed(50),o.alert(this.controller.t("Graph playback normal"));case"4":return this.tonegen.setAudioSpeed(30),o.alert(this.controller.t("Graph playback fast"));case"5":return this.tonegen.setAudioSpeed(16),o.alert(this.controller.t("Graph playback very fast"));default:return this.tonegen.setAudioSpeed(50),o.alert(this.controller.t("Graph playback normal"))}},e.prototype.adjustVolume=function(e){var t=this.tonegen.getAudioVolume(),n="up"===e?Math.min(100,Math.round(100*(t+.1))):Math.max(0,Math.round(100*(t-.1)));this.tonegen.setAudioVolume(n/100),o.alert(this.controller.t("Volume __volume__ percent",{volume:n}))},e.prototype.zoom=function(e){this.grapher.viewportController.zoom(e)},e.prototype.getFocusedCell=function(){return this.focusedCell},e.prototype.setFocusedCell=function(e){this.focusedCell=e},e.prototype.getAudioTraceActive=function(){return this.audioTraceActive},e}();t.default=f}),define("graphing/canvas-braille",["require","exports","tslib","./projection","./screen","core/graphing-calc/json/graph-settings","abraham"],function(e,t,n,r,i,o,a){"use strict";function s(e,t,n,r,i){var o=e.dotSpacing,a=1+o,s=i.charCodeAt(0)-j;1&s&&t.fillRect(n,r,1,1),2&s&&t.fillRect(n,r+a,1,1),4&s&&t.fillRect(n,r+2*a,1,1),8&s&&t.fillRect(n+a,r,1,1),16&s&&t.fillRect(n+a,r+a,1,1),32&s&&t.fillRect(n+a,r+2*a,1,1)}function c(e,t){for(var n=t.x,r=t.y,i=t.width,o=t.height,a=e.getImageData(n,r,i,o).data,s=3;s<a.length;s+=4)if(0!==a[s])return!1;return!0}function l(e,t){for(var n=t.x,r=t.y,i=t.width,o=t.height,a=e.getImageData(n,r,i,o).data,s=3;s<a.length;s+=4)if(0===a[s])return!1;return!0}function u(e,t,n,r,i){return c(t,f(e,n,r,i))}function d(e,t,n,r,i){for(var o=e.dotSpacing,a=3+2*o,c=0;c<i.length;c++)s(e,t,n+a*c,r,i[c])}function p(e,t){var n=e.dotSpacing;return(2+n)*t.length+(1+n)*(t.length-1)}function h(e,t){return 3+2*e.dotSpacing}function f(e,t,n,r){var i=e.cellPadding;return{x:t-i,y:n-i,width:p(e,r)+2*i,height:h(e,r)+2*i}}function m(e,t){if(!e)return t;var n=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return{x:n,y:r,width:Math.max(e.x+e.width,t.x+t.width)-n,height:Math.max(e.y+e.height,t.y+t.height)-r}}function g(e,t,n){return Math.min(Math.max(e,t),n)}function y(e,t,n,r,i){return{x:g(n,0,t.canvas.width-p(e,i)),y:g(r,0,t.canvas.height-h(e,i))}}function v(e,t,n,r,i){var o=t.fillStyle;t.fillStyle="white";var a=f(e,n,r,i);t.fillRect(a.x,a.y,a.width,a.height),t.fillStyle="black",d(e,t,n,r,i),t.fillStyle=o}function b(e,t,n,r){var i=e.cellPadding;return{x:Math.round(t-(p(e,r)+i)),y:n}}function x(e){return e.replace(/\u283C(?!$)/g,"")}function E(e,t){var n="nemeth"===t?a.latexToNemeth(e):a.latexToUeb(e);return n.isError?"":x(n.value)}function w(e,t){return t>=0?e*Math.pow(10,t):e/Math.pow(10,-t)}function _(e,t,n,r){var i=n[0],o=n[1],a=Math.ceil(Math.log(o-i)/Math.LN10)-1,s=a,c=5;e:for(var l=a;a-l<4;l--)for(var u=0,d=[5,2,1];u<d.length;u++){var h=d[u],f=w(h,l),m=Math.floor(i/f)+1,g=Math.ceil(o/f)-1,y=Math.abs(r(f)-r(0)),v=E(String(w(m*h,l)),t),b=E(String(w(g*h,l)),t);if(y<p(e,v)+p(e," ")||y<p(e,b)+p(e," "))break e;if(g-m>=15)break e;s=l,c=h}return{int:c,exp:s}}function S(e,t,n){return _(e,t,[n.viewport.xmin,n.viewport.xmax],function(e){return n.mapx(e)})}function M(e,t,n){return n.viewport.isSquare(n.screen)?S(e,t,n):_(e,t,[n.viewport.ymin,n.viewport.ymax],function(e){return n.mapy(e)})}function k(e,t){for(var n=e.int,r=e.exp,i=t[0],o=t[1],a=Math.ceil(i/w(n,r)),s=Math.floor(o/w(n,r)),c=[],l=a;l<=s;l++)c.push(w(l*n,r));return c}function C(e,t,n){return{x:k(S(e,t,n),[n.viewport.xmin,n.viewport.xmax]),y:k(M(e,t,n),[n.viewport.ymin,n.viewport.ymax])}}function I(e,t,a,s,d){var g,x,w,_,S,M,k,I;if(void 0!==a.margins&&void 0!==t){var j=T(s),V=a.margins,U=n.__assign({},t.settings),G=U.showGrid&&L(s),z=!!U.showXAxis,H=!!U.showYAxis,W=!!U.xAxisNumbers,K=U.xAxisArrowMode,Y=!!U.yAxisNumbers,X=U.yAxisArrowMode,$=j.graphLineWidth,Q={showGrid:!1,xAxisNumbers:!1,xAxisArrowMode:o.AxisArrowModes.NONE,yAxisNumbers:!1,yAxisArrowMode:o.AxisArrowModes.NONE,showXAxis:!1,showYAxis:!1,graphLineWidth:$,pointLineWidth:2.5,curveOpacity:1,globalCurveColor:"#000",disableFill:!0};for(var Z in Q)t.settings[Z]=Q[Z];var J=e.width-V.right-V.left,ee=e.height-V.top-V.bottom,te=new i.Screen(J,ee),ne=t.getProjection().viewport;t.settings.squareAxes&&(ne=ne.squareCrop(te));var re=new r.Projection(te,ne,t.settings),ie=e.getContext("2d"),oe=document.createElement("canvas");oe.width=J,oe.height=ee;var ae=oe.getContext("2d"),se=document.createElement("canvas");se.width=J,se.height=ee;var ce=se.getContext("2d"),le=document.createElement("canvas");le.width=J,le.height=ee;var ue=le.getContext("2d"),de=document.createElement("canvas");de.width=J,de.height=ee;var pe=de.getContext("2d"),he=document.createElement("canvas");he.width=J,he.height=ee;var fe=he.getContext("2d");if(null!==ie&&null!==pe&&null!==ae&&null!==ue&&null!==fe&&null!==ce){t.settings.disableFill=!0,t.screenshotToCanvas(de,{width:J,height:ee,targetPixelRatio:1,transparentBackground:!0}),t.settings.disableFill=!1,t.screenshotToCanvas(oe,{width:J,height:ee,targetPixelRatio:1,transparentBackground:!0}),ie.fillStyle="white",ie.fillRect(0,0,e.width,e.height);var me=Math.round(re.mapx(0)),ge=Math.round(re.mapy(0)),ye=""!==U.xAxisLabel?U.xAxisLabel.replace(/ /g,"\\ "):"x",ve=""!==U.yAxisLabel?U.yAxisLabel.replace(/ /g,"\\ "):"y";if(z&&re.coordsAreOnscreen(J-6,ge-8,0)){var be=n.__assign(n.__assign({},j),{cellPadding:j.cellPadding+1}),xe=2+2*h(be,ye),Ee=J-2,we=ge-xe,_e=E(ye,d);g=b(be,Ee,we,_e),Ee=g.x,we=g.y,x=y(be,ae,Ee,we,_e),Ee=x.x,we=x.y,v(be,fe,Ee,we,_e)}
if(H&&re.coordsAreOnscreen(me+4,1,0)){var be=n.__assign(n.__assign({},j),{cellPadding:j.cellPadding+1}),Ee=me+4,we=1,_e=E(ve,d);w=y(be,ae,Ee,we,_e),Ee=w.x,we=w.y,v(be,fe,Ee,we,_e)}var Se=C(j,d,re),Me=Se.x,ke=Se.y;if(z){for(var Ce=void 0,Ie=0,Te=Me;Ie<Te.length;Ie++){var Le=Te[Ie];if(0!==Le||!H){var De=Math.round(re.mapx(Le));if(!(De<2||De>re.screen.width-2)&&W){var Pe=p(j,E("-1",d))-p(j,E("1",d)),Ae=Le<0?Pe+1:1,Ee=De-Ae,we=ge+4,_e=E(""+Le,d);_=y(j,fe,Ee,we,_e),Ee=_.x,we=_.y,u(j,pe,Ee,we,_e)&&(v(j,fe,Ee,we,_e),Ce=m(Ce,f(j,Ee,we,_e)))}}}if(j.embossPatternInequalities&&Ce){var Oe={x:0,y:ge,width:J,height:0};Ce=m(Ce,Oe),ue.fillStyle="white",ue.fillRect(Ce.x,Ce.y,Ce.width,Ce.height)}}if(H){for(var Ce=void 0,Fe=0,Ne=ke;Fe<Ne.length;Fe++){var qe=Ne[Fe];if(0!==qe||!z){var Re=Math.round(re.mapy(qe));if(!(Re<2||Re>re.screen.height-2)){var xe=-Math.ceil(h(j," ")/2);if(Y){var Ee=me-4,we=Re+xe,_e=E(""+qe,d);S=b(j,Ee,we,_e),Ee=S.x,we=S.y,M=y(j,fe,Ee,we,_e),Ee=M.x,we=M.y,u(j,pe,Ee,we,_e)&&(v(j,fe,Ee,we,_e),Ce=m(Ce,f(j,Ee,we,_e)))}}}}if(j.embossPatternInequalities&&Ce){var Oe={x:me,y:0,width:0,height:ee};Ce=m(Ce,Oe),ue.fillStyle="white",ue.fillRect(Ce.x,Ce.y,Ce.width,Ce.height)}}if(z&&H){var Ee=me-2,we=ge+2,_e=E(W||Y?"0":"o",d);k=b(j,Ee,we,_e),Ee=k.x,we=k.y,re.coordsAreOnscreen(Ee,we,0)&&(I=y(j,fe,Ee,we,_e),Ee=I.x,we=I.y,u(j,pe,Ee,we,_e)&&v(j,fe,Ee,we,_e))}for(var Be=0,je=Me;Be<je.length;Be++){var Le=je[Be],De=Math.round(re.mapx(Le));De<2||De>re.screen.width-2||(H&&0===Le||G&&A(ue,"white",De-1,0,ee,3))}for(var Ve=0,Ue=ke;Ve<Ue.length;Ve++){var qe=Ue[Ve],Re=Math.round(re.mapy(qe));Re<2||Re>re.screen.height-2||(z&&0===qe||G&&O(ue,"white",Re-1,0,J,3))}z&&O(ue,"white",ge-3,0,J,7),H&&A(ue,"white",me-3,0,ee,7);for(var Ge=0,ze=Me;Ge<ze.length;Ge++){var Le=ze[Ge],De=Math.round(re.mapx(Le));De<2||De>re.screen.width-2||(H&&0===Le||(G?A(ue,P(s),De,0,ee):z&&A(ue,P(s),De,ge-3,ge+2)))}for(var He=0,We=ke;He<We.length;He++){var qe=We[He],Re=Math.round(re.mapy(qe));Re<2||Re>re.screen.height-2||(z&&0===qe||(G?O(ue,P(s),Re,0,J):H&&O(ue,P(s),Re,me-3,me+2)))}if(z&&O(ue,D(s),ge,0,J),H&&A(ue,D(s),me,0,ee),X!==o.AxisArrowModes.NONE&&(R(ue,D(s),me,0),X===o.AxisArrowModes.BOTH&&q(ue,D(s),me,ee-1)),K!==o.AxisArrowModes.NONE&&(F(ue,D(s),J-1,ge),K===o.AxisArrowModes.BOTH&&N(ue,D(s),0,ge)),j.embossPatternInequalities)for(var Ee=0;Ee<J;Ee+=6)for(var we=0;we<ee;we+=6){var Ke={x:Ee,y:we,width:3,height:3};l(ae,Ke)&&c(ue,Ke)&&c(pe,Ke)&&c(fe,Ke)&&B(ce,"black",Ee,we)}j.embossPatternInequalities||ie.drawImage(oe,V.left,V.top),ie.drawImage(le,V.left,V.top),ie.drawImage(de,V.left,V.top),ie.drawImage(he,V.left,V.top),j.embossPatternInequalities&&ie.drawImage(se,V.left,V.top)}for(var Z in Q)t.settings[Z]=U[Z]}}function T(e){if("etc8"===e||"etc11"===e)return{dotSpacing:0,cellPadding:1,graphLineWidth:1.75,embossPatternInequalities:!0};if("vpmax8"===e||"vpmax11"===e)return{dotSpacing:1,cellPadding:2,graphLineWidth:1,embossPatternInequalities:!1};var t=e;throw new Error("Unexpected embosser model "+t)}function L(e){if("etc8"===e||"etc11"===e)return!1;if("vpmax8"===e||"vpmax11"===e)return!0;var t=e;throw new Error("Unexpected embosser model "+t)}function D(e){switch(e){case"vpmax8":case"vpmax11":return"rgb(145, 145, 145)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:var t=e;throw new Error("Unexpected embosser model: "+t)}}function P(e){switch(e){case"vpmax8":case"vpmax11":return"rgb(219, 219, 219)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:var t=e;throw new Error("Unexpected embosser model: "+t)}}function A(e,t,n,r,i,o){void 0===o&&(o=1);var a=e.fillStyle;e.fillStyle=t,e.fillRect(n-1,r,o,i-r),e.fillStyle=a}function O(e,t,n,r,i,o){void 0===o&&(o=1);var a=e.fillStyle;e.fillStyle=t,e.fillRect(r,n-1,i-r,o),e.fillStyle=a}function F(e,t,n,r){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(n-Math.abs(o),r-1+o,1,1);e.fillStyle=i}function N(e,t,n,r){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(n+Math.abs(o),r-1+o,1,1);e.fillStyle=i}function q(e,t,n,r){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(n-1+o,r-Math.abs(o),1,1);e.fillStyle=i}function R(e,t,n,r){var i=e.fillStyle;e.fillStyle=t;for(var o=-2;o<=2;o++)e.fillRect(n-1+o,r+Math.abs(o),1,1);e.fillStyle=i}function B(e,t,n,r){var i=e.fillStyle;e.fillStyle=t,e.fillRect(n+1,r,1,1),e.fillRect(n,r+1,1,1),e.fillRect(n+1,r+1,1,1),e.fillRect(n+2,r+1,1,1),e.fillRect(n+1,r+2,1,1),e.fillStyle=i}Object.defineProperty(t,"__esModule",{value:!0}),t.createBrailleImage=void 0;var j=10240;t.createBrailleImage=I}),define("graphing/braille-size-options",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.brailleSizes=void 0,t.brailleSizes={},t.brailleSizes.vpmax8={width:170,height:220,margins:{left:5,top:15,right:5,bottom:50},name:function(e){return e.t("VP Max (8.5 x 11 in)")}},t.brailleSizes.vpmax11={width:230,height:220,margins:{left:15,top:15,right:5,bottom:5},name:function(e){return e.t("VP Max (11.5 x 11 in)")}},t.brailleSizes.etc8={width:96,height:96,margins:{left:5,top:15,right:0,bottom:0},name:function(e){return e.t("ETC Romeo/Juliet (8.5 x 11 in)")}},t.brailleSizes.etc11={width:132,height:134,margins:{left:10,top:15,right:5,bottom:5},name:function(e){return e.t("ETC Romeo/Juliet (11.5 x 11 in)")}}}),define("graphing/movablepointslayer",["require","exports","tslib","dcgview","browser","core/lib/label","core/graphing-calc/json/expression","lib/aria","./constants","jquery"],function(e,t,n,r,i,o,a,s,c,l){"use strict";function u(e,t,n){return"X: "+o.value(e,n.xmax-n.xmin).ariaString+". Y: "+o.value(t,n.ymax-n.ymin).ariaString}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoordsString=void 0;var d=r.Components.For,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.grapher=this.props.grapher(),this.renderedPointsIdOrder=[],this.renderedPoints={}},t.prototype.template=function(){var e=this;return r.createElement(d,{each:function(){return e.renderedPointsIdOrder}},r.createElement("div",{class:r.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:function(){return e.requestRedrawNextFrame()},onFocusout:function(){return e.requestRedrawNextFrame()},didMount:this.didMountRoot.bind(this)},function(t){return r.createElement("div",{class:e.const({"dcg-tabbable-point":!0,"dcg-movable-point":"movable"===e.renderedPoints[t].type}),style:function(){return{transform:e.getTransform(t)}},role:r.const("button"),"aria-roledescription":function(){return"movable"===e.renderedPoints[t].type?"movable point":"point"},"dcg-mp-id":e.const(t),tabindex:function(){return e.getTabIndex(t)},"aria-label":function(){return e.getAriaLabel(t)},"aria-hidden":e.bindFn(e.getAriaHidden)})}))},t.prototype.redraw=function(e,t,n){var r=this,i=this.grapher.graphSketches,o=this.renderedPoints;this.renderedPoints={},this.renderedPointsIdOrder=[];var a,s=this.getFocusedPointId(),c=function(i){var a=r.processPOI(e,t,i,o[i.id],n,s);a&&(r.renderedPoints[i.id]=a,r.renderedPointsIdOrder.push(i.id))};for(a in i){var l=i[a];l.visible&&(l.getMovablePoints().forEach(c),l.getStaticLabeledPoints().forEach(c))}var u=this.renderedPoints[this.hoveredPointId],d=this.renderedPoints[this.pressedPointId],p=u&&u.poi,h=d&&d.poi;p||this.setHoveredPointId(void 0),h||this.setPressedPointId(void 0);var f,m,g=h||p;g?(f="movable-point"===g.type&&g.tableInfo&&g.tableInfo.dragX,m="movable-point"===g.type&&g.tableInfo&&g.tableInfo.dragY,f&&m||!f&&!m?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point"):f?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ew"):this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ns")):this.grapher.setLayerClass("movablePoints",void 0),this.update(),this.speakAriaAlert()},t.prototype.drawForScreenshot=function(e,t,n,r){var i=this,o=this.grapher.graphSketches;for(var a in o){var s=o[a];s.visible&&s.getMovablePoints().forEach(function(o){var a={screenX:t.mapx(o.x),screenY:t.mapy(o.y),color:o.color,animationPercent:0};i.drawMovablePointOnCtx(e,a,n,r)})}},t.prototype.processPOI=function(e,t,n,r,i,o){var a=n.id,s=n.x,l=n.y,u=t.mapx(s),d=t.mapy(l),p=o===a,h=t.coordsAreOnscreen(u,d,c.OFFSCREEN_RENDER_MARGIN);if(h||p)return r||(r="movable-point"===n.type?{type:"movable",id:a,pointOnScreen:h,poi:n,projection:t,screenX:screenX,screenY:screenY,color:n.color,pointIsHovered:!1,pointIsPressed:!1,lastHoverActionTime:0,animationPercent:0}:{type:"static",id:a,pointOnScreen:h,poi:n,projection:t,screenX:screenX,screenY:screenY}),r.pointOnScreen=h,r.poi=n,r.projection=t,r.screenX=u,r.screenY=d,"movable"===r.type&&(r.color=r.poi.color),"movable"===r.type&&(this.updateMovablePointAnimation(r),this.drawMovablePointOnCtx(e,r,i)),r},t.prototype.drawMovablePointOnCtx=function(e,t,n,r){var i;i=r||(this.grapher.settings.config.projectorMode?13.5:10.5);var o=t.color,a=t.screenX,s=t.screenY,c=t.animationPercent||0;n.push({left:a-i,right:a+i,top:s-i,bottom:s+i}),e.save(),e.fillStyle=o,e.globalAlpha=.35,e.beginPath(),e.moveTo(a+i,s),e.arc(a,s,i,0,2*Math.PI,!0),e.closePath(),e.fill(),e.globalAlpha=1,i*=.3+.7*c,e.beginPath(),e.moveTo(a+i,s),e.arc(a,s,i,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore()},t.prototype.updateMovablePointAnimation=function(e){var t=Date.now(),n=e.id,r=this.hoveredPointId===n,i=this.pressedPointId===n;e.pointIsPressed=i,r!==e.pointIsHovered&&(e.pointIsHovered=r,e.lastHoverActionTime=t);var o=e.animationPercent||0,a=t-e.lastHoverActionTime,s=.004*a;i?o=1:r?(o+=s,o>=1?o=1:this.requestRedrawNextFrame()):(o-=s,o<=0?o=0:this.requestRedrawNextFrame()),e.animationPercent=o},t.prototype.getTransform=function(e){var t=this.renderedPoints[e];if(t)return i.translateRule(t.screenX,t.screenY)},t.prototype.getTabIndex=function(e){var t=this.renderedPoints[e];if(!t)return-1;var n=t.poi,r=this.grapher.controller.getItemEditableLabelMode(n.sketch.id),i="movable"===t.type||void 0===r||r===a.EditableLabelMode.None,o=this.grapher.settings,s=o.config.graphpaper&&o.config.enableTabindex;return i&&s?0:-1},t.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},t.prototype.getAriaLabel=function(e){var t=this.getAriaAlert({id:e,includeUsageInstructions:!1});return t&&t.completeMessage},t.prototype.speakAriaAlert=function(){var e=this.getFocusedPointId();if(e){var t=this.renderedPoints[e];if(!t||"static"===t.type)return}var n=this.getAriaAlert({id:e,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});this.lastAriaAlert=n,n&&n.completeMessage&&s.alert(n.completeMessage)},t.prototype.getAriaAlert=function(e){var t=e.id,n=e.lastAriaAlert,r=e.includeUsageInstructions;if(t){var i=this.renderedPoints[t];if(i){n&&n.id!==t&&(n=void 0);var o=i.poi,a=i.pointOnScreen,s=i.projection;if(o&&s){var c=s.viewport;if(c){var l,d=n&&n.label,p=o.ariaLabel,h=d!==p,f=n&&n.coordX,m=n&&n.coordY,g=o.x,y=o.y,v=g!==f||y!==m,b=u(g,y,c)+".",x=this.grapher.controller.t,E=p||x("Graph point"),w="movable-point"===o.type&&r?x(" is movable. Press Arrows or Shift+Arrows to adjust."):"",_=a?"":x(" not visible on screen");return l=n?h?E+_:v?b+_:"":E+". "+b+w+_,{id:t,coordX:g,coordY:y,label:p,completeMessage:l}}}}}},t.prototype.setHoveredPointId=function(e){e!==this.hoveredPointId&&(this.hoveredPointId=e,this.requestRedrawNextFrame())},t.prototype.isMovingPoint=function(){return!!this.pressedPointId},t.prototype.setPressedPointId=function(e){e!==this.pressedPointId&&(this.pressedPointId=e,this.requestRedrawNextFrame())},t.prototype.getFocusedPointId=function(){if(document.activeElement&&l.contains(this.rootNode,document.activeElement)){return l(document.activeElement).attr("dcg-mp-id")}},t.prototype.getFocusedPoint=function(){var e=this.getFocusedPointId();if(e){var t=this.renderedPoints[e];if(t){return t.poi}}},t.prototype.didMountRoot=function(e){this.rootNode=e},t.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},t}(r.Class);t.default=p,t.getCoordsString=u}),define("graphing/integral-image",["require","exports"],function(e,t){"use strict";function n(e,t,n){return Math.max(t,Math.min(n,e))}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=e.data,n=e.width,r=e.height;this.imageData=e;for(var i=1;i<n;i++)t[i]+=t[i-1];for(var o=1;o<r;o++)t[o*n]+=t[o*n-n];for(var a=n*r-n-r+1,s=n-1,c=0;c<a;c++){var i=1+c%s,o=1+Math.floor(c/s),l=o*n,u=i-1+l,d=i+l-n,p=i-1+l-n;t[l+i]+=t[u]+t[d]-t[p]}}return e.prototype.getSumForValidRect=function(e){var t=e.left-1,n=e.right-1,r=e.top-1,i=e.bottom-1,o=this.imageData.width,a=this.imageData.data,s=a[t+r*o],c=a[n+r*o],l=a[t+i*o],u=a[n+i*o];return t>=0&&r>=0?u-c-l+s:t>=0?u-l:r>=0?u-c:u},e.prototype.getSum=function(e){var t={left:n(Math.floor(e.left),0,this.imageData.width),right:n(Math.ceil(e.right),0,this.imageData.width),top:n(Math.floor(e.top),0,this.imageData.height),bottom:n(Math.ceil(e.bottom),0,this.imageData.height)};return t.left>=t.right||t.top>=t.bottom?0:this.getSumForValidRect(t)},e}();t.default=r}),define("graphing/automatic-label-placer",["require","exports","graphing/integral-image","underscore"],function(e,t,n,r){"use strict";function i(e,t){if(!(t.width*t.height>0))return new n.default({width:0,height:0,data:[]});b.width=0,b.width=Math.round(t.width*v),b.height=Math.round(t.height*v);var r=b.getContext("2d");r.save(),r.scale(b.width/e.canvas.width,b.height/e.canvas.height),r.drawImage(e.canvas,0,0),r.restore();var i=r.getImageData(0,0,b.width,b.height),o=i.data;o.length,x.length,x=new Array(o.length/4);for(var a=x,s=0;s<a.length;s++)a[s]=o[4*s+3];return new n.default({width:i.width,height:i.height,data:a})}function o(e){for(var t=0;t<e.length;t++){var n=a(t,e);e[t]=[n]}return e.map(function(e){return e[0]})}function a(e,t){var n=1/0,r=-1,i=t[e];if(1===i.length)return i[0];for(var o=0;o<i.length;o++){var a=t[e][o].staticScore,c=s(e,o,t),l=a+c;(-1===r||l<n)&&(n=l,r=o)}return i[r]}function s(e,t,n){for(var r=0,i=n[e][t],o=0;o<n.length;o++)if(o!==e){for(var a=0,s=n[o],c=s.length-1;c>=0;c--){var l=s[c],u=Math.max(0,Math.min(i.right,l.right)-Math.max(i.left,l.left)),d=Math.max(0,Math.min(i.bottom,l.bottom)-Math.max(i.top,l.top));a+=u*d}r+=a/s.length}return r}function c(e,t){var n=t.getSum({left:e.left*v,right:e.right*v,top:e.top*v,bottom:e.bottom*v});return n/=200,n/=v*v}function l(e,t){var n=0;return t.forEach(function(t){n+=d(e,t)}),n}function u(e,t){var n=d(e,t);return 10*(e.width*e.height-n)}function d(e,t){return Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top))}function p(e,t,n){var r;return function(){return r||(r={domObstructions:n,viewport:{left:0,right:t.width,top:0,bottom:t.height},integralImage:i(e,t)}),r}}function h(e,t){if(!(t.length<=1))for(var n=e(),r=0,i=t;r<i.length;r++){var o=i[r];o.staticScore+=u(o,n.viewport),o.staticScore+=l(o,n.domObstructions),o.staticScore+=c(o,n.integralImage)}}function f(e,t){var n=t.nakedLabel?0:t.pt_radius,i=Math.round(n/Math.sqrt(2)),o=[],a=t.pt_x,s=t.pt_y,c=t.width,l=t.height;o.push({left:a-c/2,top:s-l/2,staticScore:-1/0,orientation:"center"}),o.push({left:a+n+3,top:s-l/2,staticScore:400,orientation:"right"}),o.push({left:a-(n+c)-3,top:s-l/2,staticScore:400,orientation:"left"}),o.push({left:a-c/2,top:s-(l+n),staticScore:400,orientation:"above"}),o.push({left:a-(c+i),top:s-(l+i),staticScore:400,orientation:"tl"}),o.push({left:a+i,top:s-(l+i),staticScore:400,orientation:"tr"}),o.push({left:a-c/2,top:s+n,staticScore:400,orientation:"below"}),o.push({left:a-(c+i),top:s+i,staticScore:400,orientation:"bl"}),o.push({left:a+i,top:s+i,staticScore:400,orientation:"br"});var u=o.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+c),i=Math.round(e.top),o=Math.round(e.top+l);return{pt_x:Math.round(a),pt_y:Math.round(s),left:n,right:r,top:i,bottom:o,width:r-n,height:o-i,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return u=t.enforceOrientation&&"default"!==t.enforceOrientation?r.filter(u,function(e){return e.orientation===t.enforceOrientation}):t.nakedLabel?r.filter(u,function(e){return"center"===e.orientation}):t.keepOrientation&&t.priorOrientation?r.filter(u,function(e){return e.orientation===t.priorOrientation}):r.filter(u,function(e){return"center"!==e.orientation}),h(e,u),u}function m(e,t){for(var n=[],i=t.width,o=t.height,a=i/2,s=o/2,c=t.pt_x1,l=t.pt_y1,u=t.pt_x2,d=t.pt_y2,p=(d-l)/(u-c),f=Math.atan2(d-l,u-c)+Math.PI/2,m=5*Math.cos(f),g=5*Math.sin(f),y=Math.min(l,d)-Math.abs(g)-o,v=Math.max(l,d)+Math.abs(g),b=[.5,.4,.6,.2,.8],x=[0,20,20,40,40],E=[],w=0,_=b;w<_.length;w++){var S=_[w];E.push({x:c*(1-S)+u*S,y:l*(1-S)+d*S})}for(var M=0;M<E.length;M++){var k,C,I,T,L=E[M];if(p>=2||p<=-2){I=T=L.y-s;var D=Math.abs((u-c)/(d-l)*s)+Math.abs(m);k=L.x+D,C=L.x-D-i}else if(p<=.05&&p>=-.05){k=C=L.x-a;var P=Math.abs(p*a)+Math.abs(g);I=L.y-P-o,T=L.y+P}else m>0?(k=L.x+m,C=L.x-m-i):(k=L.x+m-i,C=L.x-m),g>0?(I=L.y+g,T=L.y-g-o):(I=L.y+g-o,T=L.y-g);I<y?I=y:I>v&&(I=v),T<y?T=y:T>v&&(T=v);var A=(u-c)*(I-l)-(d-l)*(k-c)>0;n.push({pt_x:L.x,pt_y:L.y,left:k,top:I,staticScore:x[M],orientation:M.toString()+(A?"-a":"-b")}),n.push({pt_x:L.x,pt_y:L.y,left:C,top:T,staticScore:x[M],orientation:M.toString()+(A?"-b":"-a")})}var O=n.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+i),a=Math.round(e.top),s=Math.round(e.top+o);return{pt_x:Math.round(e.pt_x),pt_y:Math.round(e.pt_y),left:n,right:r,top:a,bottom:s,width:r-n,height:s-a,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return t.keepOrientation&&t.priorOrientation&&(O=r.filter(O,function(e){return e.orientation===t.priorOrientation})),h(e,O),O}function g(e,t){var n=[],i=t.pt_x,o=t.pt_y,a=t.width,s=t.height,c=t.startAngle,l=t.endAngle;l<c&&(l+=2*Math.PI);var u=(c+l)/2,d=t.isRightAngle?t.radius*Math.sqrt(2):t.radius+4,p=d+Math.sqrt(t.width*t.width/4+t.height*t.height/4),f=[],m=p*Math.sin(u);m>d+.5*s&&(m=d+.5*s),m<-d-.5*s&&(m=-d-.5*s),f.push({x:i+p*Math.cos(u)-a/2,y:o+m-s/2});for(var g=0;g<f.length;g++){var y=f[g];n.push({pt_x:y.x,pt_y:y.y,left:y.x,top:y.y,staticScore:0,orientation:g.toString()+"-a"})}var v=n.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+a),i=Math.round(e.top),o=Math.round(e.top+s);return{pt_x:Math.round(e.pt_x),pt_y:Math.round(e.pt_y),left:n,right:r,top:i,bottom:o,width:r-n,height:o-i,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return t.keepOrientation&&t.priorOrientation&&(v=r.filter(v,function(e){return e.orientation===t.priorOrientation})),h(e,v),v}function y(e,t){for(var n=[],i=t.width,o=t.height,a=Math.round(10/Math.sqrt(2)),s=0,c=0,l=0,u=0;u<t.path.length-2;u+=2)l+=1,s+=t.path[u],c+=t.path[u+1];var d=s/l,p=c/l;n.push({left:d-i/2,top:p-o/2,staticScore:0,orientation:"center"}),n.push({left:d+10+3,top:p-o/2,staticScore:50,orientation:"right"}),n.push({left:d-(10+i)-3,top:p-o/2,staticScore:50,orientation:"left"}),n.push({left:d-i/2,top:p-(o+10),staticScore:50,orientation:"top"}),n.push({left:d-(i+a),top:p-(o+a),staticScore:50,orientation:"tl"}),n.push({left:d+a,top:p-(o+a),staticScore:50,orientation:"tr"}),n.push({left:d-i/2,top:p+10,staticScore:50,orientation:"bottom"}),n.push({left:d-(i+a),top:p+a,staticScore:50,orientation:"bl"}),n.push({left:d+a,top:p+a,staticScore:50,orientation:"br"});var f=n.map(function(e){var n=Math.round(e.left),r=Math.round(e.left+i),a=Math.round(e.top),s=Math.round(e.top+o);return{pt_x:Math.round(d),pt_y:Math.round(p),left:n,right:r,top:a,bottom:s,width:r-n,height:s-a,staticScore:t.priorOrientation===e.orientation?e.staticScore-20:e.staticScore,orientation:e.orientation}});return t.keepOrientation&&t.priorOrientation&&(f=r.filter(f,function(e){return e.orientation===t.priorOrientation})),h(e,f),f}Object.defineProperty(t,"__esModule",{value:!0}),t.generateCandidatesForPolygon=t.generateCandidatesForAngle=t.generateCandidatesForSegment=t.generateCandidatesForPoint=t.buildStaticEnvGetter=t.computePositions=t.getIntegralImage=void 0;var v=.5,b=document.createElement("canvas"),x=[];t.getIntegralImage=i,t.computePositions=o,t.buildStaticEnvGetter=p,t.generateCandidatesForPoint=f,t.generateCandidatesForSegment=m,t.generateCandidatesForAngle=g,t.generateCandidatesForPolygon=y}),define("graphing/canvas-labels",["require","exports","tslib","core/lib/deepCopy","graphing/svg-classes"],function(e,t,n,r,i){"use strict";function o(e,t,n){n.verticalLabel?(e.translate(t.left-.5,t.bottom-.5),e.rotate(-Math.PI/2)):e.translate(t.left-.5,t.top-.5)}function a(e,t){var n=document.createRange();n.selectNode(e);var r=n.getBoundingClientRect();if(r.width>0&&r.height>0){var i=window.getComputedStyle(e.parentElement),o=e.nodeValue||"";if(o){var a=parseFloat(i.fontSize),s=-.228*a;return{type:"text",rect:{left:r.left-t.canvasLeft,right:r.right-t.canvasLeft,top:r.top-t.canvasTop,bottom:r.bottom-t.canvasTop},text:o,color:i.color||"#000",font:i.fontStyle+" "+i.fontSize+" "+i.fontFamily,y:(t.verticalLabel?r.width:r.height)+s}}}}function s(e,t,n){e.save(),e.font=t.font,n?(e.strokeStyle="#FFF",e.lineWidth=3,e.miterLimit=2,e.strokeText(t.text,0,t.y)):(e.fillStyle=t.color,e.fillText(t.text,0,t.y)),e.restore()}function c(e,t,n){e.save(),n?(e.strokeStyle="#FFF",e.lineWidth=3):e.fillStyle=t.color,e.beginPath();for(var r=0,i=t.instructions;r<i.length;r++){var o=i[r];switch(o.type){case"moveTo":e.moveTo(o.x,o.y);break;case"lineTo":e.lineTo(o.x,o.y);break;case"ellipse":e.ellipse(o.centerX,o.centerY,o.radiusX,o.radiusY,o.rotation,o.startAngle,o.endAngle,o.anticlockwise)}}e.closePath(),n?e.stroke():e.fill(),e.restore()}function l(e,t,n){var r=e.getBoundingClientRect();if(r.width>0&&r.height>0){var i;i=n.verticalLabel?r.height:r.width;var o=parseFloat(t.borderTopWidth||"1px"),a=t.borderTopColor||"#000",s=[{type:"moveTo",x:0,y:0},{type:"lineTo",x:i,y:0},{type:"lineTo",x:i,y:o},{type:"lineTo",x:0,y:o}];return{type:"path",rect:{left:r.left-n.canvasLeft,right:r.right-n.canvasLeft,top:r.top-n.canvasTop,bottom:r.bottom-n.canvasTop},instructions:s,color:a}}}function u(e,t){var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),r=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=e[0]*t[0]+e[1]*t[1],o=Math.acos(i/(n*r));return e[0]*t[1]-e[1]*t[0]<0&&(o*=-1),o}function d(e,t,n,r,i,o,a,s,c){var l=Math.cos(i),d=Math.sin(i),p=(e-s)/2,h=(t-c)/2,f=l*p+d*h,m=-d*p+l*h,g=n*n,y=r*r,v=f*f,b=m*m,x=Math.sqrt((g*y-g*b-y*v)/(g*b+y*v));o===a&&(x*=-1);var E=x*n*m/r,w=-x*r*f/n,_=(e+s)/2,S=(t+c)/2,M=l*E-d*w+_,k=d*E+l*w+S,C=[1,0],I=[(f-E)/n,(m-w)/r],T=[(-f-E)/n,(-m-w)/r];return{centerX:M,centerY:k,radiusX:n,radiusY:r,startAngle:u(C,I),endAngle:u(C,T),rotation:i,anticlockwise:0===a}}function p(e,t){function r(e){return(e-c)/h}function i(e){return(e-u)/f}var o=e+"-"+t,a=y[o];if(a)return a;a=[],y[o]=a;var s=t.split(" ");if(4!==s.length)return a;var c=parseFloat(s[0]),l=parseFloat(s[2]),u=parseFloat(s[1]),p=parseFloat(s[3]),h=l-c,f=p-u,m=new RegExp("(M[0-9-.]+ [0-9-.]+)|(L[0-9-.]+ [0-9-.]+)|(A[0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+)","g"),g=e.match(m);if(!g||!g.length)return a;for(var v=NaN,b=NaN,x=0,E=g;x<E.length;x++){var w=E[x],_=w.substr(1).split(" ").map(parseFloat);switch(w[0]){case"M":v=r(_[0]),b=i(_[1]),a.push({type:"moveTo",x:v,y:b});break;case"L":v=r(_[0]),b=i(_[1]),a.push({type:"lineTo",x:v,y:b});break;case"A":var S=_[0]/h,M=_[1]/f,k=_[2],C=_[3],I=_[4],T=r(_[5]),L=i(_[6]),D=d(v,b,S,M,k,C,I,T,L);v=T,b=L,a.push(n.__assign({type:"ellipse"},D))}}return a}function h(e,t){var n=e.childNodes[0];if(n&&"path"===n.nodeName){var i=e.getBoundingClientRect();if(i.width>0&&i.height>0){var o,a,s=n.getAttribute("d")||"",c=e.getAttribute("viewBox")||"",l=p(s,c),u=window.getComputedStyle(e);t.verticalLabel?(o=i.height,a=i.width):(o=i.width,a=i.height),l=r.default(l);for(var d=0,h=l;d<h.length;d++){var f=h[d];switch(f.type){case"moveTo":case"lineTo":f.x*=o,f.y*=a;break;case"ellipse":f.centerX*=o,f.centerY*=a,f.radiusX*=o,f.radiusY*=a;break;default:return f}}return{type:"path",rect:{left:i.left-t.canvasLeft,right:i.right-t.canvasLeft,top:i.top-t.canvasTop,bottom:i.bottom-t.canvasTop},color:u.color||"#000",instructions:l}}}}function f(e,t,n){var r=window.getComputedStyle(e);if("0px"!==r.borderTopWidth){var i=l(e,r,t);i&&n.push(i)}for(var o=e.childNodes,s=0;s<o.length;s++){var c=o[s];if(3===c.nodeType){var i=a(c,t);i&&n.push(i)}else if("svg"===c.nodeName){var i=h(c,t);i&&n.push(i)}else 1===c.nodeType&&f(c,t,n)}}function m(e,t){var n=[];return f(e,t,n),n}function g(e,t,n){i.save(t,"dcg-svg-label"),t.save(),i.restore(t);for(var r=0,a=e;r<a.length;r++){var l=a[r];switch(t.save(),o(t,l.rect,n),l.type){case"path":c(t,l,!0);break;case"text":s(t,l,!0);break;default:var u=l;return u}t.restore()}for(var d=0,p=e;d<p.length;d++){var l=p[d];switch(t.save(),o(t,l.rect,n),l.type){case"path":c(t,l,!1);break;case"text":s(t,l,!1);break;default:var u=l;return u}t.restore()}t.restore()}Object.defineProperty(t,"__esModule",{value:!0}),t.drawCommandsToCtx=t.computeDrawingCommandsForDOMLabel=void 0;var y={};t.computeDrawingCommandsForDOMLabel=m,t.drawCommandsToCtx=g}),define("graphing/poilabelslayer",["require","exports","tslib","dcgview","jquery","core/lib/label","core/types/graphmode","core/types/label-sizes","core/math/poi-type","./constants","./poi","./automatic-label-placer","core/lib/color-helpers","core/math/interpolatedlabel","../dcgview-helpers/static-mathquill-view","../dcgview-helpers/mathquill-view","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing/canvas-labels","graphing/movablepointslayer","./svg-groups"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x){"use strict";function E(e,t){return t&&t.visible?t.getPOIById(e):null}function w(e,t){var n,r=t.xmax-t.xmin,i=t.ymax-t.ymin,s=e.getGraphMode();if(e.type===c.TRACE){var l=s===a.X,u=l?e.y:e.x,d=e.getCompiledFunction();if(n=o.point(u,r,i,d),l){var p=n[0];n[0]=n[1],n[1]=p}}else n=[o.value(e.x,r),o.value(e.y,i)];var f=!isFinite(n[1].value),m=e.getLabel();if(m)return h.isMathLabel(m)?{is_hole:f,type:"latex",text:m.substr(1,m.length-2)}:{is_hole:f,type:"text",text:m};var g=n[0].superscript?n[0].mantissa+"^{"+n[0].superscript+"}":n[0].string,y=n[1].superscript?n[1].mantissa+"^{"+n[1].superscript+"}":n[1].string;return"undefined"===g&&(g="\\mathrm{undefined}"),"undefined"===y&&(y="\\mathrm{undefined}"),{is_hole:f,type:"latex",text:"\\left("+g+",\\space "+y+"\\right)"}}function _(e,t,n){var r=e.t("unknown coordinates"),i=t.getProjection();if(!i)return r;var o=i.viewport;return o?(n&&(r=b.getCoordsString(n.x,n.y,o)),r):r}Object.defineProperty(t,"__esModule",{value:!0});var S=r.Components.Input,M=r.Components,k=M.For,C=M.Switch,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelsDirty=!1,t}return n.__extends(t,e),t.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.cachedLabelDict={},this.cachedLabelOrder=[],this.hoveredPOI=void 0,this.openedPOI2Sketch={},this.takingScreenshot=!1},t.prototype.template=function(){var e=this;return r.createElement(k,{each:function(){return e.cachedLabelOrder}},r.createElement("div",{class:r.const("dcg-graph-outer"),style:this.const({"z-index":0}),didMount:this.didMountRoot.bind(this)},function(t){return r.createElement("div",{class:function(){return e.getLabelClasses(t)},style:function(){return e.getLabelStyles(t)}},r.createElement("div",{class:r.const("dcg-pt"),style:function(){return e.getDotStyles(t)}}),r.createElement("div",{class:r.const("dcg-label"),didMount:function(n){return e.linkLabelNode(t,n)}},e.renderLabelContent(t)))}))},t.prototype.renderLabelContent=function(e){var t=this;return r.createElement(C,{key:function(){return t.getLabelContent(e).type}},function(n){return"text"===n?r.createElement("span",null,function(){return t.getLabelContent(e).text}):"latex"===n?r.createElement(f.default,{latex:function(){return t.getLabelContent(e).text}}):n===g.EditableLabelMode.Math?r.createElement("div",{class:function(){return{"dcg-editable-label-border":!0,"dcg-do-not-blur":!0,"dcg-focus":t.shouldEditableLabelBeFocused(e),"dcg-empty-label":0===t.getEditableLabelText(e).trim().length}},style:function(){return{"border-color":p.shadeColor(t.getEditableLabelTextColor(e),.3)}}},r.createElement(m.default,{latex:function(){return t.getEditableLabelText(e)},placeholder:function(){return""},isFocused:function(){return t.shouldEditableLabelBeFocused(e)},capExpressionSize:function(){return!!t.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:r.const(!1),config:t.const({}),getAriaLabel:function(){return t.controller.t("Editable point label at __coordinates__",{coordinates:_(t.controller,t.grapher,t.cachedLabelDict[e])})},getAriaPostLabel:t.const(""),onUserChangedLatex:function(n){return t.onLabelInput(n,e)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(n){return t.onEditableLabelFocusChange(n,e)},hasError:t.const(!1),noFadeout:t.const(!0),needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})):r.createElement("div",{class:function(){return{"dcg-resizing-text-input-container":!0,"dcg-editable-label-border":!0,"dcg-focus":t.shouldEditableLabelBeFocused(e),"dcg-empty-label":0===t.getEditableLabelText(e).trim().length}},style:function(){return{"border-color":p.shadeColor(t.getEditableLabelTextColor(e),.3)}},onScroll:function(e){e.target&&(e.target.scrollLeft=0)}},r.createElement(S,{"aria-label":function(){return t.controller.t("Editable point label at __coordinates__",{coordinates:_(t.controller,t.grapher,t.cachedLabelDict[e])})},onInput:function(n){return t.onLabelInput(n,e)},value:function(){return t.getEditableLabelText(e)},onFocus:function(){return t.onEditableLabelFocusChange(!0,e)},onBlur:function(){return t.onEditableLabelFocusChange(!1,e)}}),r.createElement("span",{class:r.const("dcg-text-input-content")},function(){return t.getEditableLabelText(e)||" "}))})},t.prototype.getSketchIdFromLabelId=function(e){var t=this.cachedLabelDict[e];if(t)return t.sketchId},t.prototype.getEditableLabelTextColor=function(e){var t=this.getSketchIdFromLabelId(e);if(!t)return"#000";var n=this.controller.getItemModel(t);return n&&"expression"===n.type?n.color:"#000"},t.prototype.onEditableLabelFocusChange=function(e,t){var n=this.getSketchIdFromLabelId(t);n&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"editable-label",id:n}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"editable-label",id:n}}),this.update())},t.prototype.shouldEditableLabelBeFocused=function(e){var t=this.getSketchIdFromLabelId(e),n=this.controller.getFocusLocation();return!(!n||"editable-label"!==n.type||!t||n.id!==t)},t.prototype.onLabelInput=function(e,t){var n=this.getSketchIdFromLabelId(t);if(n){if(this.grapher.poiController.getExpressionModel(n)){var r=e;this.controller.getItemEditableLabelMode(n)===g.EditableLabelMode.Math&&r.length>0&&(r="`"+r+"`"),this.controller.dispatch({type:"set-item-label",id:n,label:r})}}},t.prototype.getEditableLabelText=function(e){var t=this.getSketchIdFromLabelId(e);if(t){var n=this.grapher.poiController.getExpressionModel(t);return n?this.controller.getItemEditableLabelMode(t)===g.EditableLabelMode.Math?n.label.substr(1,n.label.length-2):n.label:""}},t.prototype.linkLabelNode=function(e,t){var n=this.cachedLabelDict[e];n&&(n.labelDOM=t)},t.prototype.getLabelClasses=function(e){var t=this.cachedLabelDict[e];return t?t.classes:{}},t.prototype.getLabelStyles=function(e){var t=this.cachedLabelDict[e];return t?t.styles:{}},t.prototype.getDotStyles=function(e){var t=this.cachedLabelDict[e];return t?t.dotStyles:{}},t.prototype.getLabelContent=function(e){var t=this.cachedLabelDict[e];if(t){var n=this.getSketchIdFromLabelId(e);if(!n)return{is_hole:!1,type:"text",text:""};var r=this.controller.getItemEditableLabelMode(n);return t.classes["dcg-editable-label"]&&void 0!==r&&r!==g.EditableLabelMode.None?{
is_hole:!1,type:r,text:""}:t.content}return{is_hole:!1,type:"text",text:""}},t.prototype.didMountRoot=function(e){this.node=e},t.prototype.computeHoveredLabel=function(e,t){var n;this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-opened-poi"):(n=this.computeLabel(this.hoveredPOI,e,t,"hovered"),this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-closed-poi")):this.grapher.setLayerClass("hoveredPOI",void 0);var r=this.getHoveredInteractiveLabel();return r&&!r.bareLabel?this.grapher.setLayerClass("interactiveLabel","dcg-mouse-over-opened-poi"):this.grapher.setLayerClass("interactiveLabel",void 0),n},t.prototype.computeTraceLabel=function(e,t){if(this.traceInfo){var n=this.traceInfo.pt;if(n){var r=new u.POI(n.x,n.y,c.TRACE,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch,0);return this.computeLabel(r,e,t,"trace")}}},t.prototype.computeLabel=function(e,t,n,r){var i=e.id+"";"trace"===r&&(i="*trace*");var o=t.mapx(e.x),a=t.mapy(e.y),c=o,u=a;if(t.coordsAreOnscreen(o,a,l.OFFSCREEN_RENDER_MARGIN)){if(this.isHiddenInteractiveLabel(e))return;var d=!1,h=void 0,f=e.sketch,m=f&&f.branches[0];m&&(d=!!("nakedLabel"in m&&m.nakedLabel),h="labelOrientation"in m?m.labelOrientation:void 0);var g=f.id,v=this.controller.getItemModel(g);if(e.hasEditableLabel()&&v&&"expression"===v.type&&!y.isSinglePoint(v))return;var b=w(e,t.viewport),x=e.getLabelSize(),E=!!e.getVerticalLabel(),_=!!e.getTextOutline(),S=e.isPersistent(),M=e.isAttachedToPlottedPoint(),k=e.hasInteractiveLabel(),C=e.hasEditableLabel()&&!this.takingScreenshot,I=f.color,T=!S,L=!!M;k&&(L=!0,T=!0),"trace"===r&&(L=!1,T=!0);var D=n[i],P=D&&D.labelDOM,A=D&&D.width,O=D&&D.height,F=D&&D.orientation,N={"dcg-poi-label":!0,"dcg-tracept":"trace"===r,"dcg-opened":"opened"===r,"dcg-hole":b.is_hole,"dcg-size-small":x===s.LabelSize.SMALL,"dcg-size-medium":x===s.LabelSize.MEDIUM,"dcg-size-large":x===s.LabelSize.LARGE,"dcg-vertical-label":!!E,"dcg-show-border":T,"dcg-hide-dot":L,"dcg-editable-label":C,"dcg-has-outline":_},q={left:o+"px",top:a+"px"};if(S&&I){var R=k&&!this.isOpenInteractiveLabel(e)?.5:.3;q.color=p.shadeColor(I,R)}var B={};return"trace"===r&&(B["background-color"]=I,B["border-color"]=I),{id:i,sketchId:g,x:e.x,y:e.y,screenX:o,screenY:a,top:u,left:c,width:A,height:O,labelDOM:P,forcedOrientation:h,isNakedLabel:d,isVertical:E,orientation:F,classes:N,styles:q,dotStyles:B,content:b}}},t.prototype.computeAllLabels=function(e,t){var n,r,i={},o=this.grapher.graphSketches;for(n in o){var a=o[n];if(a.visible){var s=a.labels;if(s.length)for(var c=0;c<s.length;c++)(r=this.computeLabel(s[c],e,t,"opened"))&&(i[r.id]=r)}}var l={};for(n in this.openedPOI2Sketch){var u=E(n,o[this.openedPOI2Sketch[n]]);u&&(l[n]=u.sketch.id,(r=this.computeLabel(u,e,t,"opened"))&&(i[r.id]=r))}return this.openedPOI2Sketch=l,i},t.prototype.markLabelsDirty=function(){this.labelsDirty=!0},t.prototype.getEditableLabelUnderPoint=function(e){for(var t=0,n=this.cachedLabelOrder.length;t<n;t++){var r=this.cachedLabelOrder[t],i=this.cachedLabelDict[r];if(i&&i.width&&i.height){var o=i.screenX,a=i.screenY,s=i.left,c=i.top,l=i.width,u=i.height;if(l>0&&u>0&&e.x>o+s&&e.x<o+s+l&&e.y>a+c&&e.y<a+c+u){var d=this.getSketchIdFromLabelId(r);if(void 0===d)continue;var p=this.controller.getItemModel(d);if(!p||"expression"!==p.type)continue;if(!y.hasEditableLabel(p))continue;return p}}}},t.prototype.positionLabels=function(e,t,n,r,o){var a=!this.labelsDirty;this.labelsDirty=!1;var s=this.grapher.settings.config.projectorMode?14:10,c=[];t.forEach(function(e){var t=n[e];if(t&&t.labelDOM){var r=t.screenX,i=t.screenY,o=t.labelDOM.getBoundingClientRect(),l=o.width,u=o.height;l>0&&u>0&&c.push({renderedLabel:t,pt_x:r,pt_y:i,pt_radius:s,nakedLabel:t.isNakedLabel,width:l,height:u,keepOrientation:a,priorOrientation:t.orientation,enforceOrientation:t.forcedOrientation})}});var l=d.buildStaticEnvGetter(e,r,o),u=c.map(function(e){return d.generateCandidatesForPoint(l,e)});d.computePositions(u).forEach(function(e,t){var n=c[t].renderedLabel;n.orientation=e.orientation;var r=e.left-e.pt_x,o=e.top-e.pt_y;n.left=r,n.top=o,n.width=e.width,n.height=e.height;var a=n.labelDOM;a&&(a.style.left=r+"px",a.style.top=o+"px",i(a).data("orientation",e.orientation))})},t.prototype.copyToCtx=function(e){x.save(e,"labels");var t=this.node.getBoundingClientRect();for(var n in this.cachedLabelDict){var r=this.cachedLabelDict[n];if(r){var i=r.labelDOM;if(i){var o={canvasLeft:t.left,canvasTop:t.top,verticalLabel:r.isVertical},a=v.computeDrawingCommandsForDOMLabel(i,o);v.drawCommandsToCtx(a,e,o)}}}x.restore(e)},t.prototype.drawForScreenshot=function(e,t,n,r,i){this.takingScreenshot=!0,this.redraw(e,t,r,i),this.takingScreenshot=!1,this.copyToCtx(n)},t.prototype.redraw=function(e,t,n,r){var i=this.computeAllLabels(e,this.cachedLabelDict),o=this.computeHoveredLabel(e,this.cachedLabelDict);o&&(i[o.id]=o);var a=this.computeTraceLabel(e,this.cachedLabelDict);a&&(i[a.id]=a),this.cachedLabelDict=i,this.cachedLabelOrder=Object.keys(i),this.update(),this.positionLabels(t,this.cachedLabelOrder,this.cachedLabelDict,n,r)},t.prototype.clearOpenedPOI=function(){this.openedPOI2Sketch={}},t.prototype.closePOI=function(e){delete this.openedPOI2Sketch[e.id]},t.prototype.openPOI=function(e){this.openedPOI2Sketch[e.id]=e.sketch.id},t.prototype.isOpenPOI=function(e){return this.openedPOI2Sketch.hasOwnProperty(e.id)},t.prototype.isOpenInteractiveLabel=function(e){return!!this.isOpenPOI(e)&&e.hasInteractiveLabel()},t.prototype.isHiddenInteractiveLabel=function(e){return!!e&&(!!e.hasInteractiveLabel()&&(!this.isOpenPOI(e)&&this.getHoveredPOI()!==e))},t.prototype.setHoveredPOI=function(e){this.hoveredPOI=e},t.prototype.getHoveredPOI=function(){return this.hoveredPOI},t.prototype.getHoveredInteractiveLabel=function(){var e=this.getHoveredPOI();return e&&e.hasInteractiveLabel()?e:void 0},t.prototype.setTraceInfo=function(e){this.traceInfo=e},t.prototype.isTracing=function(){return!!this.traceInfo},t.prototype.getTraceInfo=function(){return this.traceInfo},t}(r.Class);t.default=I}),define("graphing/clickableobject-layer",["require","exports","tslib","dcgview","jquery","graphing-calc/models/expression","graphing-calc/models/image"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.For,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}},t.prototype.template=function(){var e=this;return r.createElement(s,{each:function(){return e.renderedTabTargetOrder}},r.createElement("div",{class:r.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:this.bindFn(this.handleFocusChange),onFocusout:this.bindFn(this.handleFocusChange),didMount:function(t){return e.rootNode=t}},function(t){return r.createElement("div",{class:r.const("dcg-tabbable-clickableobject"),role:r.const("button"),"aria-roledescription":r.const("clickable object"),"dcg-clickableobject-id":e.const(t),tabindex:function(){return e.getTabIndex()},"aria-hidden":e.bindFn(e.getAriaHidden),"aria-label":function(){return e.getAriaLabel(t)},onTap:function(){e.controller.dispatch({type:"clickable-item-clicked",id:t})}})}))},t.prototype.redraw=function(){this.renderedTabTargets={},this.renderedTabTargetOrder=[];var e,t=this.grapher.graphSketches;for(e in t){if(t[e].visible){var n=this.controller.getItemModel(e);if(n&&"expression"===n.type&&o.isClickableObject(n)){this.renderedTabTargetOrder.push(e);var r=""!==n.clickableInfo.description?n.clickableInfo.description:this.grapher.getAudioTrace().getExpressionAriaLabel(e);this.renderedTabTargets[e]={id:e,description:r}}}}var i=this.grapher.graphImages;for(e in i){if(!i[e].hidden&&!this.controller.isItemSecret(e)){var n=this.controller.getItemModel(e);n&&"image"===n.type&&a.isClickableObject(n)&&(this.renderedTabTargetOrder.push(e),this.renderedTabTargets[e]={id:e,description:n.clickableInfo.description})}}this.renderedTabTargets[this.hoveredId]||this.setHoveredId(void 0),this.renderedTabTargets[this.pressedId]||this.setPressedId(void 0),this.hoveredId||this.pressedId?this.grapher.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):this.grapher.setLayerClass("clickableObjects",void 0),this.update()},t.prototype.getTabIndex=function(){var e=this.grapher.settings;return e.config.graphpaper&&e.config.enableTabindex?0:-1},t.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},t.prototype.getAriaLabel=function(e){var t=this.renderedTabTargets[e];return t?t.description:""},t.prototype.shouldDrawHovered=function(e){return e===this.focusedId||!(this.isAnObjectPressed()&&!this.isObjectPressed(e))&&this.isObjectHovered(e)},t.prototype.isObjectHovered=function(e){return void 0!==e&&this.hoveredId===e},t.prototype.setHoveredId=function(e){e!==this.hoveredId&&(this.hoveredId=e,this.requestRedrawNextFrame())},t.prototype.shouldDrawPressed=function(e){return this.isObjectPressed(e)},t.prototype.isObjectPressed=function(e){return void 0!==e&&this.pressedId===e},t.prototype.setPressedId=function(e){e!==this.pressedId&&(this.pressedId=e,this.requestRedrawNextFrame())},t.prototype.getPressedId=function(){return this.pressedId},t.prototype.isAnObjectPressed=function(){return!!this.pressedId},t.prototype.handleFocusChange=function(){var e=void 0;if(document.activeElement&&i.contains(this.rootNode,document.activeElement)){e=i(document.activeElement).attr("dcg-clickableobject-id")}this.focusedId!==e&&(this.focusedId=e,this.requestRedrawNextFrame())},t.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},t}(r.Class);t.default=c}),define("graphing/grapher",["require","exports","main/graph_settings","./canvaslayer","./poidotslayer","./gridlayer","./graphslayer","./imagelayer","./viewportcontroller","./poicontroller","vendor/canvas2svg","dcgview","jquery","underscore","./viewport","./screen","./graphsketch","./projection","underscore_model","./audiograph","./canvas-braille","./braille-size-options","core/lib/deepCopy","lib/animation-frame","core/lib/default-spec","core/graphing-calc/json/graph-settings","graphing/tonegenerator","./movablepointslayer","./poilabelslayer","./clickableobject-layer","./svg-classes","./svg-groups"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x,E,w,_,S,M,k,C,I,T,L,D){"use strict";function P(){return new m.Screen(1024,768)}function A(){return new f.Viewport(-10,10,-10,10)}Object.defineProperty(t,"__esModule",{value:!0}),t.Grapher=void 0;var O=function(){function e(e,t,n,u){var f=this;this.type="2d",this._layerClasses={},this.$=e,this.evaluator=u,this.controller=n,this.settings=t;var m=P(),g=A().squareYAxis(m);this.setUserRequestedViewport(g),this.__projection=new y.Projection(m,g,t),this.markLabelsDirty=h.debounce(function(){f.evaluator.notifyWhenSynced(function(){f.__isRedrawingSlowly?f.notifyAfterRedraw(function(){f.poiLabelsLayer.markLabelsDirty(),f.redrawAllLayers()}):(f.poiLabelsLayer.markLabelsDirty(),f.redrawAllLayers())})},300),this.poiController=new l(this,t),this.viewportController=c(this,this.controller),this.showPOIDots=!0,this.$.css("overflow","hidden"),this.graphSketches={},this.graphImages={},this.audioGraph=new b.default(n,this),this.canvasLayer=r(this),this.$.append(this.canvasLayer.$),this.imageLayer=s(),this.gridLayer=o(),this.poiDotsLayer=i(),this.graphsLayer=a(this.settings,function(e){return f.audioGraph.getExpressionAriaLabel(e)});var x=p("<div></div>");this.$.append(x);var E=this;this.clickableObjectsLayer=d.mountToNode(T.default,x[0],{grapher:function(){return E}});var w=p("<div></div>");this.$.append(w);var E=this;this.movablePointsLayer=d.mountToNode(C.default,w[0],{grapher:function(){return E}});var _=p("<div></div>");this.$.append(_),this.poiLabelsLayer=d.mountToNode(I.default,_[0],{grapher:function(){return E}}),this.traceLayer=this.poiLabelsLayer,this.scaleAxis=void 0,this.__sketchOrder=[],this.selectedId=void 0,this.__redrawRequested=!1,this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.events=new v.UnderscoreModel}return e.prototype.remove=function(){this.$.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()},e.prototype.tick=function(e){this.__isRedrawingSlowly?this._redrawSlowly():this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()},e.prototype.registerMovablePointListener=function(e){this.__movablePointListener=e},e.prototype.deregisterMovablePointListener=function(){this.__movablePointListener=void 0},e.prototype.setSketchOrder=function(e){h.isEqual(this.__sketchOrder,e)||(this.__sketchOrder=e,this.redrawAllLayers())},e.prototype.clear=function(){this.graphSketches={},this.graphImages={}},e.prototype.getGraphSketch=function(e){return this.graphSketches[e]},e.prototype.getGraphImage=function(e){return this.graphImages[e]},e.prototype.addGraphSketch=function(e){this.graphSketches[e.id]=e},e.prototype.removeGraphSketch=function(e){delete this.graphSketches[e]},e.prototype.addGraphImage=function(e){var t=this;e.imageObj.width&&e.imageObj.height?(this.graphImages[e.id]=e,this.redrawAllLayers()):p(e.imageObj).on("load.calc_load",function(){return t.addGraphImage(e)})},e.prototype.removeGraphImage=function(e){var t=this.graphImages[e];t&&p(t.imageObj).off("load.calc_load"),delete this.graphImages[e],this.redrawAllLayers()},e.prototype.getProjection=function(){return this.__projection},e.prototype._setProjection=function(e){this.__projection=e,this.redrawAllLayers()},e.prototype.getAudioTrace=function(){return this.audioGraph},e.prototype.getDefaultViewport=function(){var e=this.getProjection();return A().squareYAxis(e.screen)},e.prototype._updateScreenSize=function(e,t){if(!(e<=0||t<=0)){var n=this.getProjection(),r=n.screen;if(r.width!==e||r.height!==t){this.$.width(e);var i=new m.Screen(e,t);this.viewportController.setScreen(i)}}},e.prototype._setIsVisible=function(e){e!==this.isVisible&&(this.isVisible=e,e?this.redrawAllLayers():this.canvasLayer.resize(0,0))},e.prototype.update=function(){var e=this.controller.computeMajorLayout().grapher;e.width>0&&e.height>0?(this._setIsVisible(!0),this._updateScreenSize(e.width,e.height),this.$.css({position:"absolute",left:e.left+"px",top:e.top+"px",width:e.width+"px",height:e.height+"px"})):this._setIsVisible(!1)},e.prototype.hide=function(e){var t=this.getGraphSketch(e);t&&(t.visible=!1)},e.prototype.select=function(e){if(this.selectedId){var t=this.getGraphSketch(this.selectedId);t&&(t.selected=!1,t.showPOI=!1,t.showHighlight=!1)}var n=this.getGraphSketch(e);n&&(n.selected=!0,n.showPOI=this.controller.isTraceEnabled(),n.showHighlight=!0),this.selectedId=e},e.prototype.updateSketch=function(e,t){var n=this.getGraphSketch(e);if(!t.length)return this.hide(e);var r=new g.GraphSketch(e,t);r.color=t[0].color,r.style=t[0].style,n&&r.updateFrom(n);var i=String(e)===String(this.selectedId);r.selected=i,r.showPOI=i&&this.controller.isTraceEnabled(),r.showHighlight=i,this.addGraphSketch(r)},e.prototype.updateIntersections=function(e,t){var n=this.getGraphSketch(e);n&&n.updateIntersections(t)},e.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly(),this.__redrawRequested=!0},e.prototype._clear=function(){var e=this.getProjection(),t=e.screen;this.canvasLayer.resize(e.screen.width,e.screen.height),this.canvasLayer.ctx.clearRect(0,0,t.width,t.height)},e.prototype._redrawAllLayers=function(){this.isVisible&&(this.__redrawRequested=!1,this._clear(),this.audioGraph.recomputePoints(),this._recomputeClickableObjects(),this._redrawImageLayer(),this._redrawGridLayer(),this._redrawGraphsLayer(),this._redrawPointsAndLabels(),this._updateCanvasLayerAria(),this.events.triggerEvent("redraw",void 0))},e.prototype.cancelRedrawSlowly=function(){this.__isRedrawingSlowly&&(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.redrawAllLayers())},e.prototype.redrawSlowly=function(){this.__isRedrawingSlowly||(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!0,this.audioGraph.recomputePoints())},e.prototype._redrawSlowly=function(){var e,t,n=this.__redrawSlowlyIndex;if(0===n&&(this._clear(),this._redrawGridLayer()),n>=this.__sketchOrder.length)return void this.cancelRedrawSlowly();var r=this.__sketchOrder[n],i=(e={},e[r]=this.graphSketches[r],e),o=(t={},t[r]=this.graphImages[r],t);(o[r]||i[r])&&this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),i,o,[r],this.poiLabelsLayer,this.clickableObjectsLayer),this.__redrawSlowlyIndex+=1},e.prototype._redrawGridLayer=function(){this.gridLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.scaleAxis)},e.prototype._recomputeClickableObjects=function(){this.clickableObjectsLayer.redraw()},e.prototype._redrawGraphsLayer=function(){this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)},e.prototype._updateCanvasLayerAria=function(){var e=0;for(var t in this.graphSketches)k.canPlaySketch(this.graphSketches[t])&&(e+=1);this.canvasLayer.updateAria(this.isVisible,e)},e.prototype._redrawPointsAndLabels=function(){var e=this.getProjection(),t=[];this.movablePointsLayer.redraw(this.canvasLayer.ctx,e,t),this.showPOIDots&&this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx,e,this.graphSketches,this.poiLabelsLayer,this.clickableObjectsLayer);var n=this.$[0].getBoundingClientRect();h.each([this.controller.find$(".dcg-overgraph-pillbox-elements")[0],this.controller.find$(".dcg-graphpaper-branding")[0]],function(e){if(e){var r=e.getBoundingClientRect();t.push({left:r.left-n.left,top:r.top-n.top,right:r.right-n.left,bottom:r.bottom-n.top})}});var r=this.canvasLayer.ctx.canvas.getBoundingClientRect();this.poiLabelsLayer.redraw(e,this.canvasLayer.ctx,{width:r.width,height:r.height},t)},e.prototype._redrawImageLayer=function(){this.imageLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphImages,this.__sketchOrder)},e.prototype._parseScreenshotOpts=function(e){var t,r,i,o,a,s,c=this.getProjection();return e?(t=e.width||e.height||c.screen.width,r=e.height||e.width||c.screen.height,i=e.targetPixelRatio||1,o=(t<256||r<256)&&!e.preserveAxisNumbers,a=n.fromObject(e.settings||this.settings),s=!!e.transparentBackground):(t=c.screen.width,r=c.screen.height,i=1,o=!1,a=n.fromObject(this.settings),s=!1),o&&(a.setProperty("xAxisNumbers",!1),a.setProperty("yAxisNumbers",!1),a.setProperty("polarNumbers",!1)),{width:t,height:r,targetPixelRatio:i,settings:a,transparentBackground:s}},e.prototype._syncScreenshotReturnCanvas=function(e){var t=document.createElement("canvas");if(e&&e.braille){var n=e.braille,r=n.embosserModel,i=n.brailleMode,o=E.brailleSizes[r];t.width=o.width,t.height=o.height,x.createBrailleImage(t,this,o,r,i)}else{var a=this._parseScreenshotOpts(e);t.width=a.width*a.targetPixelRatio,t.height=a.height*a.targetPixelRatio,this.screenshotToCanvas(t,e)}return t},e.prototype.screenshot=function(e){return this._syncScreenshotReturnCanvas(e).toDataURL("image/png")},e.prototype.asyncScreenshot=function(e,t){var n=this,r=!1;!e.transparentBackground&&e.showLabels&&(e=w.default(e),e.transparentBackground=!0,r=!0);var i=this._syncScreenshotReturnCanvas(e),o=i.getContext("2d"),a=i,s=o;e&&"svg"===e.format&&(r=!1,e.transparentBackground&&(e=w.default(e),e.transparentBackground=!1),s=new u(i.width,i.height),a={getContext:function(){return s},width:i.width,height:i.height},this.screenshotToCanvas(a,e));var c=this.makeScreenshotProjection(e),l=[];if(e.showMovablePoints&&this.movablePointsLayer.drawForScreenshot(s,c,l),e.showLabels){var h=c.screen.width,f=c.screen.height,m=c.settings.labelSize||15,g=1;(h<200||f<200)&&(g=.9);var y=m*g+"px",v=p('<div class="dcg-calculator-api-container">\n          <div class="dcg-container">\n            <div class="dcg-grapher" style="font-size:'+y+'"></div>\n          </div>\n        </div>').css({width:c.screen.width,height:c.screen.height,position:"absolute",left:"0px",top:"0px"}).appendTo("body"),b=v.find(".dcg-grapher"),x=d.mountToNode(I.default,b[0],{grapher:function(){return n}}),E={width:c.screen.width,height:c.screen.height};x.drawForScreenshot(c,o,s,E,l),v.remove()}r&&(s.globalCompositeOperation="destination-over",s.fillStyle="#FFF",s.fillRect(0,0,a.width,a.height)),t(e&&"svg"===e.format?s.getSerializedSvg():a.toDataURL("image/png"))},e.prototype.makeScreenshotProjection=function(e){var t=this._parseScreenshotOpts(e),n=t.width,r=t.height,i=t.settings,o=new m.Screen(n,r),a=this.getProjection().viewport;return this.getSetting("squareAxes")&&(a=a.squareCrop(o)),new y.Projection(o,a,i)},e.prototype.screenshotToCanvas=function(e,t){var n=this._parseScreenshotOpts(t),r=n.targetPixelRatio,i=n.transparentBackground,o=e.getContext("2d");o.scale(r,r);var a=this.makeScreenshotProjection(t);a.settings.takingScreenshot=!0,D.save(o,"background"),L.save(o,"dcg-svg-background"),i?o.clearRect(0,0,a.screen.width,a.screen.height):(o.fillStyle="white",o.fillRect(0,0,a.screen.width,a.screen.height)),L.restore(o),D.restore(o),this.imageLayer.redrawToCtx(o,a,this.graphImages,this.__sketchOrder),this.gridLayer.redrawToCtx(o,a),this.graphsLayer.redrawToCtx(o,a,this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)},e.prototype.getImageData=function(e,t,n,r){return this.canvasLayer.ctx.getImageData(e,t,n,r)},e.prototype.getSetting=function(e,t){var n=this.settings.getProperty(e);return void 0!==n?n:t},e.prototype.getState=function(e){var t=this,n={viewport:this.getCurrentViewport()};return this.settings.stateProperties.forEach(function(e){"randomSeed"!==e&&(n[e]=t.getSetting(e))}),e.stripDefaults&&(n=S.stripDefaults(M.DefaultGraphSettings,n)),n},e.prototype.getUndoRedoState=function(){var e=this,t={};return this.settings.stateProperties.forEach(function(n){t[n]=e.getSetting(n)}),t.viewport=this.getUserRequestedViewport(),t},e.prototype.notifyAfterRedraw=function(e){var t=this;if(this.__isRedrawingSlowly)_.requestAnimationFrame(this.notifyAfterRedraw.bind(this,e));else if(this.__redrawRequested){this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1;var n="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i;this.events.observeEvent(n,function(){t.events.unobserveEvent(n),e()})}else e()},e.prototype.getCurrentViewport=function(){return this.viewportController.getViewport().toObject()},e.prototype.getUserRequestedViewport=function(){return this._lastUserRequestedViewport},e.prototype.setUserRequestedViewport=function(e){this._lastUserRequestedViewportUpdateToken||(this._lastUserRequestedViewportUpdateToken=0),this._lastUserRequestedViewportUpdateToken+=1,this._lastUserRequestedViewport=w.default(e)},e.prototype.debounceUserRequestedViewportChange=function(){var e=this;if(!this.__debouncedViewportCommit){this.__debouncedViewportCommit=h.debounce(function(t,n){if(!e.isDragging&&e._lastUserRequestedViewportUpdateToken===n){if(e._lastUserRequestedViewport){var r=f.Viewport.fromObject(e._lastUserRequestedViewport);if(e.computeConcreteViewport(r).equals(t))return}e.controller.dispatch({type:"commit-user-requested-viewport",viewport:t})}},1e3)}var t=this.getCurrentViewport();this.__debouncedViewportCommit(t,this._lastUserRequestedViewportUpdateToken)},e.prototype.setGrapherState=function(e,t){e=S.populateDefaults(M.DefaultGraphSettings,e),t&&t.doNotClear||this.clear();for(var n in M.DefaultGraphSettings)M.DefaultGraphSettings.hasOwnProperty(n)&&this.settings.setProperty(n,e[n]);if("viewport"in e){var r=f.Viewport.fromObject(e.viewport);this.setUserRequestedViewport(r);var i=this.computeConcreteViewport(r);this.viewportController.setViewport(i)}this.redrawAllLayers()},e.prototype.computeConcreteViewport=function(e){var t=this.getProjection().screen;return this.getSetting("squareAxes")&&!e.isSquare(t)?e.squareYAxis(t):e},e.prototype.setLayerClass=function(e,t){var n=this._layerClasses[e];this._layerClasses[e]=t,n!==t&&(n&&this.$.removeClass(n),t&&this.$.addClass(t))},e}();t.Grapher=O}),define("loadcss!tour",function(){}),define("loadcss!calculator_embed",function(){}),define("loadcss!buttons",function(){}),define("loadcss!dcg-normalize",function(){}),define("loadcss!projector_mode",function(){}),define("loadcss!desmos-icons",function(){}),define("loadcss!popovers",function(){}),define("main/calc_embed",["require","exports","main/graph_settings","tours/tour_manager","tslib","lib/i18n","jquery","main/controller","dcgview","main/instancehotkeys","lib/console","underscore","lib/defocus-mobile","graphing-calc/views/main","underscore_model","graphing/viewport","main/evaluator","graphing/grapher","core/lib/color-helpers","loadcss!tour","loadcss!calculator_embed","loadcss!buttons","loadcss!dcg-normalize","loadcss!projector_mode","loadcss!desmos-icons","loadcss!popovers"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var b=0,x=function(){function e(e,t,i,u){function p(){var e=S.computeMajorLayout(),t={left:e.grapher.left,right:e.grapher.left+e.grapher.width,width:e.grapher.width,top:e.grapher.top,bottom:e.grapher.top+e.grapher.height,height:e.grapher.height},n=C.getCurrentViewport(),r={top:n.ymax,bottom:n.ymin,left:n.xmin,right:n.xmax,width:n.xmax-n.xmin,height:n.ymax-n.ymin};d.isEqual(r,I.mathCoordinates)||I.setProperty("mathCoordinates",r),t.height>0&&t.width>0&&!d.isEqual(t,I.pixelCoordinates)&&I.setProperty("pixelCoordinates",t)}function m(){var e=C.getProjection();w.setProperty("zoomedDefault",C.viewportController.isZoomRestored()),w.setProperty("squareAxes",e.viewport.isSquare(e.screen))}function v(e,t){return o.t(e,t,w.config.language)}var x=this;e||(e=document.createElement("div"));var E=document.createElement("div");E.className="dcg-wrapper",E.style.width="100%",E.style.height="100%",e.appendChild(E),this.__id=b++;var w=new n;this.graphSettings=w;for(var _ in i)w.config.setProperty(_,i[_]);var S=new s.default(w);this.controller=S,u&&S.dispatch({type:"ui/container-resized",size:u}),this.rootElt=E,this.view=c.mountToNode(h.default,this.rootElt,{controller:c.const(S)});var M=new g.Evaluator(t);this.controller.setEvaluator(M),this.controller.setRootElt(this.rootElt);var k=S.find$(".dcg-grapher"),C=new y.Grapher(k,w,this.controller,M);this.controller.setGrapher(C),w.registerCallbacks(C,M),this.controller.initStateStack(),w.config.redrawSlowly||(C.redrawSlowly=C.redrawAllLayers),M.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:w.randomSeed,degreeMode:w.degreeMode,viewState:S.getViewState(),intersectId:S.getIntersectId(),restrictedFunctions:w.config.restrictedFunctions,distributions:w.config.distributions,pointsOfInterest:w.config.pointsOfInterest,plotSingleVariableImplicitEquations:w.config.plotSingleVariableImplicitEquations,plotImplicits:w.config.plotImplicits,plotInequalities:w.config.plotInequalities,sliders:w.config.sliders}},M.onEvaluatorResults=function(e){x.controller.dispatch({type:"on-evaluator-changes",changes:e.evaluationStates}),x.controller.dispatch({type:"process-graph-data",graphData:e.graphData}),e.renderSlowly?C.redrawSlowly():C.redrawAllLayers()},this.unsubFunc=this.controller.subToChanges(function(){x.controller.doesDOMHaveSize()&&(x.view.update(),C.update()),p(),m()});var I=new f.UnderscoreModel;I.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=I,a(this.rootElt).on("keydown.calculator-"+this.__id,function(e){x.grapher&&x.grapher.audioGraph.handleKeydown(e),x.instanceHotkeys.handleKeydown(e)}),a(window).on("dcg-tapstart.calculator-"+this.__id,function(e){var t=a(e.target),n=!!t.closest(x.rootElt).length,r=e.wasHandled("create-expression-with-keyboard"),i=!!t.closest(".dcg-api-shared-keypad-root").length,o=!!t.hasClass("dcg-shell");if(n||i||o||r||S.dispatch({type:"set-none-selected"}),e.wasHandled("do-not-clear-poi-labels")||(C.traceLayer.clearOpenedPOI(),C.redrawAllLayers()),S.isInEditListMode()){var s=0===t.closest(".dcg-exppanel").length&&0===t.closest(".dcg-options-menu").length&&0===t.closest(".dcg-expression-top-bar").length&&0===t.closest(".dcg-keypad").length;n&&!s||S.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1})}}),this.grapher=C,this.evaluator=M,this.tourManager=r({evaluator:M}),this.controller.dispatch({type:"set-blank"});var T=["degreeMode"],L={};T.forEach(function(e){void 0!==i[e]&&(L[e]=i[e])}),w.setGraphSettings(L),w.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),w.config.capExpressionSize&&this.setOptions({capExpressionSize:!0}),w.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:w.config.pointsOfInterest}),w.config.hasOwnProperty("backgroundColor")&&this.setOptions({backgroundColor:w.config.backgroundColor}),w.config.hasOwnProperty("textColor")&&this.setOptions({textColor:w.config.textColor}),w.config.observe("language",function(){var e=x.controller.getState();x.controller.dispatch({type:"set-state",state:e}),x.tourManager&&(x.tourManager.closingMsg=["<b>__endingMessage__</b><br>",v("This message will self-destruct in __seconds__...")].join(""))}),this.instanceHotkeys=new l.default(S)}return e.prototype.setOption=function(e,t){this.controller.getGraphSettings().config.setProperty(e,t)},e.prototype.setOptions=function(e){function t(e){var t=e.notes,n=e.folders,r=e.images;return!1===t||!1===n||!1===r}var n,r=this.controller.getGraphSettings().config,o=i.__assign({},e);e.hasOwnProperty("backgroundColor")&&(v.isValidHexColor(e.backgroundColor)||(u.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete o.backgroundColor)),e.hasOwnProperty("textColor")&&(v.isValidHexColor(e.textColor)||(u.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete o.textColor)),e.hasOwnProperty("menus")&&(u.warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."),e.hasOwnProperty("settingsMenu")||(o.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(o.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(u.warn("Deprecated option: solutions. Setting pointsOfInterest instead."),e.hasOwnProperty("pointsOfInterest")||(o.pointsOfInterest=!!e.solutions)),e.hasOwnProperty("singleVariableSolutions")&&u.warn("Deprecated option: singleVariableSolutions has been removed."),!1===e.graphpaper&&(e.expressionsCollapsed&&(o.expressionsCollapsed=!1,u.warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")),r.expressionsCollapsed&&(o.expressionsCollapsed=!1,u.warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")),e.zoomButtons&&(o.zoomButtons=!1,u.warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(o.showResetButtonOnGraphpaper=!1,u.warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")),r.zoomButtons&&(o.zoomButtons=!1,u.warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")),r.showResetButtonOnGraphpaper&&(o.showResetButtonOnGraphpaper=!1,u.warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))),!1===r.graphpaper&&(e.expressionsCollapsed||e.zoomButtons||e.showResetButtonOnGraphpaper)&&(o.graphpaper=!0,u.warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")),e.lockViewport&&e.zoomButtons&&(o.zoomButtons=!1,u.warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")),
r.lockViewport&&e.zoomButtons&&(o.lockViewport=!1,u.warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")),r.zoomButtons&&e.lockViewport&&(o.zoomButtons=!1,u.warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));var a=t(e),s=t(i.__assign(i.__assign({},r),e)),c=r.pasteGraphLink,l=e.pasteGraphLink;a?(l||c)&&(o.pasteGraphLink=!1,u.warn("Cannot disable creating note, folder, or image expressions without disabling graph link pasting. Setting pasteGraphLink: false.")):l&&s&&(o.notes=!0,o.folders=!0,o.images=!0,u.warn("Cannot enable graph link pasting while the creation of notes, folders, or images is disable. Setting notes: true, folders: true, images: true."));for(n in o)if(o.hasOwnProperty(n))switch(n){case"expressionsCollapsed":this.setOption("expressionsCollapsed",!!o.expressionsCollapsed),o.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list"}):this.controller.dispatch({type:"show-expressions-list"});break;case"qwertyKeyboard":this.setOption("qwertyKeyboard",!!o.qwertyKeyboard),this.controller.isLetterKeypadOpen()&&this.controller.dispatch({type:"keypad/abc"});break;case"degreeMode":this.setOption("degreeMode",!!o.degreeMode),this.controller.getGraphSettings().setGraphSettings({degreeMode:!!o.degreeMode});break;case"keypad":case"graphpaper":case"expressions":case"settingsMenu":case"zoomButtons":case"showResetButtonOnGraphpaper":case"expressionsTopbar":case"pointsOfInterest":case"trace":case"border":case"lockViewport":case"administerSecretFolders":case"advancedStyling":case"clickableObjects":case"images":case"imageUploadCallback":case"folders":case"notes":case"sliders":case"links":case"restrictedFunctions":case"distributions":case"pasteGraphLink":case"pasteTableData":case"clearIntoDegreeMode":case"autosize":case"plotSingleVariableImplicitEquations":case"plotImplicits":case"plotInequalities":case"colors":case"branding":case"disableScrollFix":case"invertedColors":case"fontSize":case"projectorMode":case"language":case"redrawSlowly":case"onlyTraceSelected":case"disableMouseInteractions":case"nativeOnscreenKeypad":case"functionDefinition":case"plaidMode":case"pasteGraphLinkCallback":case"editOnWeb":case"crossOriginSaveTest":case"backgroundColor":case"textColor":case"enableTabindex":case"audioTraceReverseExpressions":case"showHamburger":case"decimalToFraction":case"capExpressionSize":case"transparentBackground":case"pauseWhenOffscreen":case"brailleMode":case"sixKeyInput":var d=o[n];void 0!==d&&this.setOption(n,d);break;default:var p=n;return p}},e.prototype.setViewport=function(e){this.grapher.viewportController.setViewport(new m.Viewport(e[0],e[1],e[2],e[3]))},e.prototype.resize=function(e){e&&this.controller.dispatch({type:"ui/container-resized",size:e})},e.prototype.interceptTouch=function(){var e=a(this.rootElt),t=e.find(".dcg-expression-top-bar");t.add(e.find(".dcg-keypad")),t.length&&(t.on("touchstart",function(e){a(e.target).is("input, textarea")||e.preventDefault()}),t.on("touchend",function(e){a(e.target).closest(".dcg-do-not-blur").length>0||p.default()}))},e.prototype.destroy=function(){a(window).off(".calculator-"+this.__id);var e=a(this.rootElt);e.off(".calculator-"+this.__id),this.unsubFunc(),this.graphSettings.unobserveAll(),this.evaluator&&this.evaluator.destroy(),this.grapher&&this.grapher.remove(),c.unmountFromNode(this.rootElt),e.remove()},e.prototype.tick=function(e,t){t||(this.controller.shouldDispatchTickNextFrame()&&this.controller.dispatch({type:"tick",time:e}),this.controller.updateRenderShellsAfterDispatch()),this.evaluator.tick(),this.grapher&&this.grapher.tick(e)},e.prototype.getState=function(e){return this.controller.getState(e)},e.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},e.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},e}();t.default=x}),define("lib/dom-change-detector",["require","exports","tslib","lib/animation-frame","jquery"],function(e,t,n,r,i){"use strict";function o(){l=!0,r.requestAnimationFrame(a)}function a(){t.testFixture.rafSPY&&t.testFixture.rafSPY(),l=!1;for(var e in c)c[e].detectAndEnqueueEvent(),l=!0;if(l){o();for(var e in c)c[e].dispatchQueuedEvent()}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkAllWatchingDetectors=t.testFixture=void 0;var s=1,c={},l=!1;t.testFixture={},t.checkAllWatchingDetectors=a;var u=function(){function e(e,t){this.elt=e,this.cb=t,this.destroyed=!1,this.lastOffscreen=!1,this.id=s.toString(),this.appliedScale={x:1,y:1},s++}return e.prototype.stopWatching=function(){delete c[this.id]},e.prototype.startWatching=function(){this.checkForChanges(),c[this.id]=this,l||o()},e.prototype.resetAppliedScalingAndGetBoundingClientRect=function(){var e=this.elt.getBoundingClientRect(),t={x:e.width/this.elt.offsetWidth,y:e.height/this.elt.offsetHeight};if(t.x===this.appliedScale.x&&t.y===this.appliedScale.y)return e;var n=i(this.elt).children(".dcg-wrapper")[0];return n&&(this.appliedScale=t,i(n).css({transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%","transform-origin":"0 0"})),e},e.prototype.detectAndEnqueueEvent=function(){if(!this.destroyed){var e=!0;if(document.body&&document.body.contains(this.elt)){var t=this.resetAppliedScalingAndGetBoundingClientRect();e=t.top>window.innerHeight||t.bottom<0||t.left>window.innerWidth||t.right<0,this.lastSize?t.width===this.lastSize.width&&t.height===this.lastSize.height||(this.lastSize.width=t.width,this.lastSize.height=t.height,this.queuedEvent={type:"resized",target:this.elt,size:n.__assign({},this.lastSize),isOffscreen:e}):(this.lastSize={width:t.width,height:t.height},this.queuedEvent={type:"added",target:this.elt,size:n.__assign({},this.lastSize),isOffscreen:e})}else this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0});e!==this.lastOffscreen&&(this.lastOffscreen=e,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:e}))}},e.prototype.dispatchQueuedEvent=function(){var e=this.queuedEvent;e&&(this.queuedEvent=void 0,this.cb(e))},e.prototype.checkForChanges=function(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()},e.prototype.destroy=function(){this.stopWatching();for(var e in this)this.hasOwnProperty(e)&&delete this[e];this.destroyed=!0},e}();t.default=u}),define("graphing/compute-async-screenshot-bounds",["require","exports","lib/console"],function(e,t,n){"use strict";function r(e){var t=e.mode,r=e.width,i=e.height,o=e.currentBounds,a=e.graphpaperAspectRatio,s=e.mathAspectRatio,c=e.mathBounds,l=r/i,u={x:o.left+o.width/2,y:o.bottom+o.height/2};if(void 0===c.left!=(void 0===c.right)||void 0===c.bottom!=(void 0===c.top))return n.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+c),o;var d,p,h,f,m,g,y,v,b,x,E=void 0!==c.left&&void 0!==c.right,w=void 0!==c.bottom&&void 0!==c.top,_=E&&w;switch(t){case"stretch":return _?c:E?{left:c.left,right:c.right,bottom:o.bottom,top:o.top}:w?{left:o.left,right:o.right,bottom:c.bottom,top:c.top}:o;case"contain":return _?(f=c.right-c.left,m=c.top-c.bottom,g={x:c.left+f/2,y:c.bottom+m/2},h=f/m,l>h?(p=m/i,d=p*s,{left:g.x-d*r/2,right:g.x+d*r/2,bottom:c.bottom,top:c.top}):(d=f/r,p=d/s,{left:c.left,right:c.right,bottom:g.y-p*i/2,top:g.y+p*i/2})):E?(y=c.right-c.left,v=c.left+y/2,h=y/o.height,l>h?(p=o.height/i,d=p*s,{left:v-d*r/2,right:v+d*r/2,bottom:o.bottom,top:o.top}):(d=y/r,p=d/s,{left:c.left,right:c.right,bottom:u.y-p*i/2,top:u.y+p*i/2})):w?(b=c.top-c.bottom,x=c.bottom+b/2,h=o.width/b,l>h?(p=b/i,d=p*s,{left:u.x-d*r/2,right:u.x+d*r/2,bottom:c.bottom,top:c.top}):(d=o.width/r,p=d/s,{left:o.left,right:o.right,bottom:x-p*i/2,top:x+p*i/2})):l>a?(p=o.height/i,d=p*s,{left:u.x-d*r/2,right:u.x+d*r/2,bottom:o.bottom,top:o.top}):(d=o.width/r,p=d/s,{left:o.left,right:o.right,bottom:u.y-p*i/2,top:u.y+p*i/2});case"preserveX":return _?(f=c.right-c.left,m=c.top-c.bottom,g={x:c.left+f/2,y:c.bottom+m/2},h=f/m,d=f/r,p=d/s,{left:c.left,right:c.right,bottom:g.y-p*i/2,top:g.y+p*i/2}):w?(b=c.top-c.bottom,x=c.bottom+b/2,h=o.width/b,d=o.width/r,p=d/s,{left:o.left,right:o.right,bottom:x-p*i/2,top:x+p*i/2}):E?(y=c.right-c.left,d=y/r,p=d/s,{left:c.left,right:c.right,bottom:u.y-p*i/2,top:u.y+p*i/2}):(y=o.right-o.left,d=y/r,p=d/s,{left:o.left,right:o.right,bottom:u.y-p*i/2,top:u.y+p*i/2});case"preserveY":return _?(f=c.right-c.left,m=c.top-c.bottom,g={x:c.left+f/2,y:c.bottom+m/2},h=f/m,p=m/i,d=p*s,{left:g.x-d*r/2,right:g.x+d*r/2,bottom:c.bottom,top:c.top}):E?(y=c.right-c.left,v=c.left+y/2,h=y/o.height,p=o.height/i,d=p*s,{left:v-d*r/2,right:v+d*r/2,bottom:o.bottom,top:o.top}):w?(b=c.top-c.bottom,p=b/i,d=p*s,{left:u.x-d*r/2,right:u.x+d*r/2,bottom:c.bottom,top:c.top}):(b=o.top-o.bottom,p=b/i,d=p*s,{left:u.x-d*r/2,right:u.x+d*r/2,bottom:o.bottom,top:o.top});default:return o}}Object.defineProperty(t,"__esModule",{value:!0}),t.computeBoundsFromScreenshotOpts=void 0,t.computeBoundsFromScreenshotOpts=r}),define("dcgview-helpers/mathquill-proxy",["require","exports","dcgview-helpers/mathquill-view"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathQuillProxy=void 0;var r=function(){function e(e){this.mq=e,this.id=e.id,this.data=e.data}return e.prototype.simulateUserChangedLatex=function(){n.default.simulateUserChangedLatex(this.mq)},e.prototype.simulateKeypress=function(e){n.default.simulateKeypress(this.mq,e)},e.prototype.latex=function(e){return void 0===e?this.mq.latex():(this.mq.latex(e),void this.simulateUserChangedLatex())},e.prototype.reflow=function(){this.mq.reflow()},e.prototype.el=function(){return this.mq.el()},e.prototype.getAriaLabel=function(){return this.mq.getAriaLabel()},e.prototype.setAriaLabel=function(e){return this.mq.setAriaLabel(e)},e.prototype.html=function(){return this.mq.html()},e.prototype.mathspeak=function(){return this.mq.mathspeak()},e.prototype.select=function(){this.mq.select()},e.prototype.moveToRightEnd=function(){this.mq.moveToRightEnd()},e.prototype.cmd=function(e){this.mq.cmd(e),this.simulateUserChangedLatex()},e.prototype.write=function(e){this.mq.write(e),this.simulateUserChangedLatex()},e.prototype.keystroke=function(e){this.simulateKeypress(e)},e.prototype.typedText=function(e){this.mq.typedText(e),this.simulateUserChangedLatex()},e.prototype.clearSelection=function(){this.mq.clearSelection()},e.prototype.getAriaPostLabel=function(){return this.mq.getAriaPostLabel()},e.prototype.setAriaPostLabel=function(e,t){this.mq.setAriaPostLabel(e,t)},e.prototype.blur=function(){this.mq.blur()},e.prototype.focus=function(){this.mq.focus()},e.prototype.revert=function(){this.mq.revert()},e.prototype.ignoreNextMousedown=function(e){this.mq.ignoreNextMousedown(e)},e.prototype.clickAt=function(e,t,n){this.mq.clickAt(e,t,n)},e}();t.MathQuillProxy=r}),define("main/raf-loop",["require","lib/animation-frame"],function(e){"use strict";function t(e){function t(r){n.requestAnimationFrame(t),e(r)}n.requestAnimationFrame(t)}var n=e("lib/animation-frame");return t}),define("main/shared-clock-bus",["require","exports","main/raf-loop","underscore_model"],function(e,t,n,r){"use strict";function i(e){return s+=1,a.observeEvent("tick."+s,function(t,n){e(n)}),s}function o(e){a.unobserveEvent("tick."+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.unsubscribe=t.subscribe=void 0;var a=new r.UnderscoreModel;n(function(e){a.triggerEvent("tick",e)});var s=0;t.subscribe=i,t.unsubscribe=o}),define("main/shared-worker-pool",["require","exports","worker/workerpool","lib/urlparser"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.getParameter(location.search,"nworkers"),o=4;i&&(o=parseInt(i,10)),t.default=new n(o)}),define("graphing-calc/json/config-options",["require","exports","tslib","core/lib/color-helpers","lib/console","main/font_sizes","expressions/colors","expressions/image_file_to_data_url","core/lib/deepCopy"],function(e,t,n,r,i,o,a,s,c){"use strict";function l(e){return!!d.hasOwnProperty(e)||(!!p.hasOwnProperty(e)||!!h.hasOwnProperty(e))}function u(e){var t=c.default(f);for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n]);return r.isValidHexColor(t.backgroundColor)||(t.backgroundColor=f.backgroundColor,i.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")),r.isValidHexColor(t.textColor)||(t.textColor=f.textColor,i.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),void 0===e.zoomButtons&&(t.graphpaper&&!t.lockViewport||(t.zoomButtons=!1)),void 0===e.images&&(t.graphpaper||(t.images=!1)),e.hasOwnProperty("menus")&&(i.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),e.hasOwnProperty("settingsMenu")||(t.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(t.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(i.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),e.hasOwnProperty("pointsOfInterest")||(t.pointsOfInterest=!!e.solutions)),e.hasOwnProperty("singleVariableSolutions")&&i.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),t.graphpaper||(t.expressionsCollapsed&&(t.expressionsCollapsed=!1,i.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),t.zoomButtons&&(t.zoomButtons=!1,i.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),t.showResetButtonOnGraphpaper&&(t.showResetButtonOnGraphpaper=!1,i.warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))),t.lockViewport&&t.zoomButtons&&(t.zoomButtons=!1,i.warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),!1!==t.notes&&!1!==t.folders&&!1!==t.images||!0!==t.pasteGraphLink||(t.pasteGraphLink=!1,i.warn("Desmos API initialized with bad options. pasteGraphLink: true is incompatible with disabling the creation of note, folder, or image expressions. Proceeding with pasteGraphLink: false.")),t}Object.defineProperty(t,"__esModule",{value:!0}),t.validateConfigOptions=t.isConfigOption=t.publicConfigOptions=void 0;var d={keypad:!0,graphpaper:!0,expressions:!0,settingsMenu:!0,zoomButtons:!0,showResetButtonOnGraphpaper:!1,expressionsTopbar:!0,capExpressionSize:!1,pointsOfInterest:!0,trace:!0,border:!0,lockViewport:!1,expressionsCollapsed:!1,administerSecretFolders:!1,advancedStyling:!1,clickableObjects:!1,images:!0,imageUploadCallback:s.imageFileToDataURL,folders:!0,notes:!0,sliders:!0,links:!0,qwertyKeyboard:!0,restrictedFunctions:!1,pasteGraphLink:!1,pasteTableData:!0,degreeMode:!1,clearIntoDegreeMode:!1,autosize:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,colors:{RED:a.RED,BLUE:a.BLUE,GREEN:a.GREEN,ORANGE:a.ORANGE,PURPLE:a.PURPLE,BLACK:a.BLACK},invertedColors:!1,functionDefinition:!0,projectorMode:!1,decimalToFraction:!0,fontSize:o.MEDIUM,language:"en",backgroundColor:"#fff",textColor:"#000",distributions:!0,brailleMode:"none",sixKeyInput:!1};t.publicConfigOptions=Object.keys(d);var p={showHamburger:!1,disableScrollFix:!1,branding:!0,redrawSlowly:!1,onlyTraceSelected:!1,disableMouseInteractions:!1,nativeOnscreenKeypad:!1,plaidMode:!1,pasteGraphLinkCallback:void 0,editOnWeb:!1,crossOriginSaveTest:!1,enableTabindex:!0,audioTraceReverseExpressions:!1,transparentBackground:!1,pauseWhenOffscreen:!1},h={solutions:!0,menus:!0,singleVariableSolutions:!0},f=n.__assign(n.__assign({},d),p);t.isConfigOption=l,t.validateConfigOptions=u}),define("api/graphing",["require","exports","tslib","lib/i18n","main/calc_embed","core/lib/deepCopy","underscore_model","core/math/recttransformation","lib/dom-change-detector","graphing/compute-async-screenshot-bounds","graphing-calc/api/sanitize-expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-proxy","lib/console","underscore","main/shared-clock-bus","main/shared-worker-pool","core/graphing-calc/json/graph-settings","graphing-calc/json/config-options","core/lib/random-seed","../lib/underscore-shim"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b,x){"use strict";function E(e,t){var n={},r={};for(var i in e)v.isConfigOption(i)?n[i]=e[i]:y.isGraphSetting(i)?r[i]=e[i]:t||h.warn("Unrecognized setting: "+i+". Ignoring.");return{configOptions:n,settingsOptions:r}}function w(e,t){var n={};return t.hasOwnProperty("x")&&(n.x=e.mapX(t.x)),t.hasOwnProperty("y")&&(n.y=e.mapY(t.y)),n}function _(){if(!k){for(var e;(e=M.shift())&&e.api._destroyed;);if(e){var t=e;k=!0;var n=t.options,r=t.mathBounds,i=t.state,o=t.callback;S||(S=new C);var a=S;a.setState(i),a.setMathBounds(r);["majorAxisOpacity","minorAxisOpacity","axisLineOffset","axisLineWidth","labelSize","graphLineWidth","pointLineWidth"].forEach(function(e){"axisLineWidth"===e?a._calc.grapher.settings.setProperty(e,t.api._calc.grapher.settings[e]):a._calc.grapher.settings[e]=t.api._calc.grapher.settings[e]});var s=a._calc.evaluator,c=function(){a._calc.grapher.asyncScreenshot(n,function(e){k=!1,_(),o(e)})},l=t.api._calc.controller,u=m.subscribe(function(){l.areAnyImagesLoading()||(m.unsubscribe(u),s.notifyWhenSynced(c))})}}}Object.defineProperty(t,"__esModule",{value:!0});var S,M=[],k=!1,C=function(e){function t(n,r,o){var a=e.call(this)||this;if(a._destroyed=!1,a.isOffscreen=!1,!(a instanceof t))return new t(n,r,o);var s=E(r||{},!0),l=v.validateConfigOptions(s.configOptions),u=s.settingsOptions;return a._calc=new i.default(n,g.default,l),a._calc.interceptTouch(),a.controller=a._calc.controller,a.controller.onEventsEmitted=function(e){var t=a.controller.getSelectedItem();a.setProperty("isAnyExpressionSelected",!!t),a.setProperty("selectedExpressionId",t?t.id:void 0),a.setProperty("expressionAnalysis",a.controller.getExpressionAnalysis());var n=d.default.getFocusedMathquill();a.setProperty("focusedMathQuill",n?new p.MathQuillProxy(n):void 0);for(var r in e)e.hasOwnProperty(r)&&e[r]&&a.triggerEvent(r,void 0)},a._calc.graphpaperBounds.observeAndSync("mathCoordinates",a._syncGraphpaperBounds.bind(a)),a._calc.graphpaperBounds.observeAndSync("pixelCoordinates",a._syncGraphpaperBounds.bind(a)),a.colors=a.controller.getColors(),a._initGraphSettings(),a.updateSettings(u),a._sharedClockBusToken=m.subscribe(function(e){var t=a._calc.grapher.settings.config.pauseWhenOffscreen&&a.isOffscreen;a._calc.tick(e,t)}),a.domChangeDetector=new c.default(n,function(e){switch(a.isOffscreen=e.isOffscreen,e.type){case"offscreen-noop":break;case"added":a._calc.resize(e.size);break;case"removed":break;case"resized":a._calc.resize(e.size)}}),l.autosize?a.domChangeDetector.startWatching():a.domChangeDetector.checkForChanges(),"function"==typeof o&&o(a),a}return n.__extends(t,e),t.prototype.destroy=function(){function e(e){h.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}this._calc.destroy(),this.controller.onEventsEmitted=function(){},m.unsubscribe(this._sharedClockBusToken),this.domChangeDetector.destroy();for(var t in this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){},this._destroyed=!0},t.prototype._syncGraphpaperBounds=function(){var e=this;this.controller.runAfterDispatch(function(){e.setProperty("graphpaperBounds",{mathCoordinates:e._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:e._calc.graphpaperBounds.pixelCoordinates})})},t.prototype._initGraphSettings=function(){var e=this,t=new a.UnderscoreModel;this.settings=this.graphSettings=t,y.publicGraphSettings.forEach(function(n){e._calc.grapher.settings.observeAndSync(n,function(){e.controller.runAfterDispatch(function(){t.setProperty(n,e._calc.grapher.settings[n])})})}),v.publicConfigOptions.forEach(function(n){e._calc.grapher.settings.config.observeAndSync(n,function(){e.controller.runAfterDispatch(function(){t.setProperty(n,e._calc.grapher.settings.config[n])})})})},t.prototype.updateSettings=function(e){var t=E(e,!1),n=t.configOptions,r=t.settingsOptions;f.isEmpty(n)||this._calc.setOptions(n),f.isEmpty(r)||this._calc.grapher.settings.setGraphSettings(r),this.notifyControllerOfAPICall()},t.prototype.setGraphSettings=function(e){h.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(e),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()},t.prototype.fetchLanguage=function(e){return r.fetchLanguage(e)},t.prototype.setDefaultState=function(e){this._calc.grapher.settings.setProperty("defaultState",e),this.notifyControllerOfAPICall()},t.prototype.mathToPixels=function(e){return w(s.RT.fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates),e)},t.prototype.pixelsToMath=function(e){return w(s.RT.fromRects(this.graphpaperBounds.pixelCoordinates,this.graphpaperBounds.mathCoordinates),e)},t.prototype.notifyControllerOfAPICall=function(){this.controller.dispatch({type:"api-method-called"})},t.prototype.setExpression=function(e){var t=this.controller,n=t.getItemModel(e.id),r=n&&n.type,i=u.validateItem(e,r,this.controller);if(i)if(r)this.controller.dispatch({type:"set-expression-properties-from-api",id:i.id,properties:i});else{if("image"===i.type)return;this.controller.dispatch({type:"add-item-to-end-from-api",state:i})}},t.prototype.setExpressions=function(e){e.forEach(this.setExpression.bind(this))},t.prototype.removeExpression=function(e){var t=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:t})},t.prototype.removeExpressions=function(e){e.forEach(this.removeExpression.bind(this))},t.prototype.removeSelected=function(){var e=this.controller.getSelectedItem();if(e){var t=e.id;return this.controller.dispatch({type:"remove-item-by-id",id:t}),t}},t.prototype.setMathBounds=function(e){e&&e.left<e.right&&e.bottom<e.top?this._calc.setViewport([e.left,e.right,e.bottom,e.top]):h.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(e)),this.notifyControllerOfAPICall()},t.prototype.setViewport=function(e){4==e.length&&e[1]>e[0]&&e[3]>e[2]?this._calc.setViewport(e):h.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+e),this.notifyControllerOfAPICall()},t.prototype.resize=function(){this.domChangeDetector.checkForChanges()},t.prototype.getState=function(e){return this.controller.getState(e)},t.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(u.sanitizeItem)},t.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},t.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},t.prototype.undo=function(){this.controller.dispatch({type:"undo"})},t.prototype.redo=function(){this.controller.dispatch({type:"redo"})},t.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-undoredo-history"})},t.prototype.newRandomSeed=function(){this.updateSettings({randomSeed:b.default()})},t.prototype.screenshot=function(e){return e||(e={}),e=this._validateBrailleScreenshotOptions(e),this._calc.grapher.screenshot(e)},t.prototype._getMathAspectRatio=function(){var e=this.graphpaperBounds.mathCoordinates,t=this._calc.grapher.getProjection().pixelCoordinates,n=t.right-t.left,r=t.bottom-t.top;return e.width/n/(e.height/r)},t.prototype.isProjectionUniform=function(){return!!this._calc.grapher.getProjection().settings.squareAxes},t.prototype._validateBrailleScreenshotOptions=function(e){e=o.default(e);var t=e.braille;if(t){var n=t.embosserModel;if(!n)return h.warn("Screenshot braille options requires an embosser model to be specified. "),h.warn("Continuing with non-braille screenshot."),delete e.braille,e;if("etc"===n&&(t.embosserModel="etc11"),"vpmax"===n&&(t.embosserModel="vpmax11"),"etc8"!==t.embosserModel&&"etc11"!==t.embosserModel&&"vpmax8"!==t.embosserModel&&"vpmax11"!==t.embosserModel)return h.warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'),h.warn("Continuing with non-braille screenshot."),delete e.braille,e;"nemeth"!==t.brailleMode&&"ueb"!==t.brailleMode&&(h.warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."),t.brailleMode="nemeth"),e.width&&(h.warn("Screenshot width option is ignored when exporting Braille."),delete e.width),e.height&&(h.warn("Screenshot height option is ignored when exporting Braille."),delete e.height),e.targetPixelRatio&&(h.warn("Screenshot targetPixelRatio option is ignored when exporting Braille."),delete e.targetPixelRatio),e.preserveAxisNumbers&&(h.warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."),delete e.preserveAxisNumbers)}return e},t.prototype._validateAsyncScreenshotOpts=function(e){e=o.default(e);var t=e.mode||"contain",r=e.width||e.height||this.graphpaperBounds.pixelCoordinates.width,i=e.height||e.width||this.graphpaperBounds.pixelCoordinates.height,a=e.targetPixelRatio||1,s=e.preserveAxisNumbers;e.hasOwnProperty("format")||(e.svg?(e.format="svg",delete e.svg):e.format="png");var c=e.mathBounds||{},u=this._getMathAspectRatio(),d=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,p=l.computeBoundsFromScreenshotOpts({mode:t,width:r,height:i,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:d,mathAspectRatio:u,mathBounds:c});return{opts:n.__assign(n.__assign({},e),{width:r,height:i,targetPixelRatio:a,preserveAxisNumbers:s}),mathBounds:p}},t.prototype.asyncScreenshot=function(e,t){if(!arguments.length)return void h.warn("asyncScreenshot expects a callback");if(1===arguments.length){if("function"!=typeof e)return void h.warn("asyncScreenshot expects a callback");t=e,e={}}e||(e={}),e=this._validateBrailleScreenshotOptions(e);var n=this._validateAsyncScreenshotOpts(e),r=n.opts,i=n.mathBounds;M.push({api:this,options:r,mathBounds:i,state:this.getState(),callback:t}),_()},t.prototype.setOptions=function(e){var t=this._calc.setOptions(e);return this.notifyControllerOfAPICall(),t},t.prototype.focusFirstExpression=function(){var e=this.controller.getItemModelByIndex(0);e&&this.controller.dispatch({type:"move-focus-to-item",id:e.id,where:"end"})},t.prototype.HelperExpression=function(e){var t=e&&e.latex||"",n=new a.UnderscoreModel;return n.latex=t,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:t,proxy:n}}),n},t}(x.UnderscoreModelShim);t.default=C}),define("main/calc_headless",["require","exports","main/graph_settings","main/evaluator","underscore_model","main/controller"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadlessCalc=void 0;var a=function(){function e(e,t){var a=this,s=new n;for(var c in t)s.config.setProperty(c,t[c]);this.controller=new o.default(s);var l=new r.Evaluator(e);this.controller.setEvaluator(l),l.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:s.randomSeed,degreeMode:s.degreeMode,restrictedFunctions:s.config.restrictedFunctions,distributions:s.config.distributions,pointsOfInterest:s.config.pointsOfInterest,plotSingleVariableImplicitEquations:s.config.plotSingleVariableImplicitEquations,plotImplicits:s.config.plotImplicits,plotInequalities:s.config.plotInequalities,sliders:s.config.sliders}},l.onEvaluatorResults=function(e){a.controller.dispatch({type:"on-evaluator-changes",changes:e.evaluationStates})};var u=new i.UnderscoreModel;u.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=u,this.evaluator=l,this.setBlank()}return e.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e})},e.prototype.tick=function(){this.evaluator.tick()},e.prototype.destroy=function(){this.evaluator.destroy()},e}();t.HeadlessCalc=a}),define("api/headless",["require","exports","main/calc_headless","graphing-calc/json/config-options","main/shared-clock-bus","main/shared-worker-pool","graphing-calc/api/sanitize-expression","underscore_model","lib/console"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(){var t=this;if(!(this instanceof e))return new e;this._calc=new n.HeadlessCalc(o.default,r.validateConfigOptions({})),this.controller=this._calc.controller,this._sharedClockBusToken=i.subscribe(function(){t._calc.tick()})}return e.prototype.destroy=function(){function e(e){c.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}this._calc.destroy(),i.unsubscribe(this._sharedClockBusToken);for(var t in this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}},e.prototype.setExpression=function(e){var t=this.controller,n=t.getItemModel(e.id),r=n&&n.type,i=a.validateItem(e,r,this.controller);if(i)if(r)this.controller.dispatch({type:"set-expression-properties-from-api",id:i.id,properties:i});else{if("image"===i.type)return;this.controller.dispatch({type:"add-item-to-end-from-api",state:i})}},e.prototype.setExpressions=function(e){e.forEach(this.setExpression.bind(this))},e.prototype.removeExpression=function(e){var t=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:t})},e.prototype.removeExpressions=function(e){e.forEach(this.removeExpression.bind(this))},e.prototype.getState=function(e){return this.controller.getState(e)},e.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(a.sanitizeItem)},e.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},e.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},e.prototype.HelperExpression=function(e){var t=e&&e.latex||"",n=new s.UnderscoreModel;return n.latex=t,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:t,proxy:n}}),n},e.prototype.resize=function(){},e}();t.default=l}),define("api/abstract",["require","exports","lib/console","underscore_model","ipad.scrollfix","lib/dom-change-detector"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){if(this.rootElt=e,this.eventModel=new r.UnderscoreModel,!e)throw new Error("must pass an HTMLElement to the API")}return e.prototype.setupDomChangeDetector=function(e){var t=this;this.autoSize=e,i.limitScrollOnElement(this.rootElt),this.domChangeDetector=new o.default(this.rootElt,function(e){switch(e.type){case"added":t.view=t.onCreateView(),t.onResizeView(e.size);break;case"removed":t.onDestroyView(),t.view=void 0;break;case"resized":t.onResizeView(e.size)}}),!1!==this.autoSize?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()},e.prototype.detach=function(){n.warn(".detach() is deprecated. It should no longer be necessary")},e.prototype.destroy=function(){function e(e){n.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}this.view&&this.onDestroyView(),this.domChangeDetector.destroy();for(var t in this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}},e.prototype.resize=function(){this.domChangeDetector.checkForChanges()},
e.prototype.updateView=function(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()},e.prototype.triggerEvent=function(e,t){this.eventModel.triggerEvent(e,t)},e.prototype.observeEvent=function(e,t){this.eventModel.observeEvent(e,t)},e.prototype.unobserveEvent=function(e){this.eventModel.unobserveEvent(e)},e}();t.default=a}),define("immutable-store",["require","underscore","core/lib/deepCopy"],function(e){"use strict";function t(e){return r.clone(e)}function n(e){this.setState(e)}var r=e("underscore"),i=e("core/lib/deepCopy").default;return n.prototype.setState=function(e){this.state=e},n.prototype.getState=function(){return this.state},n.prototype.set=function(e,n){if(1===arguments.length)return void(this.state=e);if("string"==typeof e)return this.state=t(this.state),void(this.state[e]=n);var r,i=e.length-2,o=e[i+1];this.state=r=t(this.state);for(var a=0;a<=i;a++){var s=e[a];r=r[s]=t(r[s])}r[o]=n},n.prototype.deepMutate=function(e,n){if(1===arguments.length)return n=e,this.state=i(this.state),void n(this.state);if("string"==typeof e)return this.state=t(this.state),this.state[e]=i(this.state[e]),void n(this.state[e]);for(var r=e.length-2,o=e[r+1],a=this.state=t(this.state),s=0;s<=r;s++){var c=e[s];a=a[c]=t(a[c])}a=a[o]=i(a[o]),n(a)},n.prototype.shallowMutate=function(e,n){if(1===arguments.length)return n=e,this.state=t(this.state),void n(this.state);if("string"==typeof e)return this.state=t(this.state),this.state[e]=t(this.state[e]),void n(this.state[e]);for(var r=e.length-1,i=this.state=t(this.state),o=0;o<=r;o++){var a=e[o];i=i[a]=t(i[a])}n(i)},n.areShallowEqual=function(e,t){},n.areDeepEqual=function(e,t){},{default:n}}),define("basic/model",["require","exports","immutable-store","main/shared-clock-bus","core/lib/label","main/evaluator","core/lib/label","underscore"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e){var t=this,i=e.evaluationMode,o=e.additionalFunctions,a=e.functionDefinition,s=e.replaceRoundWithReciprocal,c=e.workerPool;this._evaluations={},this._nextObjectId=0,this.store=new n.default({expressions:{1:{id:"1",latex:"",braille:"",type:"latex",displayAsFraction:!1}},order:["1"],settings:{degreeMode:!1},ui:{focus:void 0}}),this.evaluationMode=i,this.additionalFunctions=o,this.functionDefinition=a,this.replaceRoundWithReciprocal=s,this.workerPool=c,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=r.subscribe(function(){t._evaluator.tick()})}return e.prototype.isSingleExpression=function(){return"singleExpressionScientific"===this.evaluationMode||"singleExpressionFourFunction"===this.evaluationMode},e.prototype.destroy=function(){r.unsubscribe(this._sharedClockBusToken)},e.prototype.generateObjectId=function(){return(this._nextObjectId++).toString()},e.prototype.updateNextObjectId=function(){var e=this.store.getState().order;this._nextObjectId=0;for(var t=/^[0-9]+$/,n=0,r=e;n<r.length;n++){var i=r[n];if(t.test(i)){var o=parseInt(i,10);o>=this._nextObjectId&&(this._nextObjectId=o+1)}}},e.prototype.clearShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!1},e.prototype.markShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!0},e.prototype.getShouldDebounceUndoRedo=function(){return this._shouldDebounceUndoRedo},e.prototype.clearCachedBrailleValues=function(){for(var e=0,t=this.getExpressionOrder();e<t.length;e++){var n=t[e];this.store.set(["expressions",n,"braille"],"")}},e.prototype.getState=function(){return this.store.getState()},e.prototype.getPersistedState=function(){var e=this.getState(),t=e.expressions,n=e.order,r=e.settings;return{expressions:{list:n.map(function(e){var n=t[e];return{id:n.id,latex:n.latex,displayAsFraction:n.displayAsFraction}})},settings:r}},e.prototype.setState=function(e){this.store.set(e),this._updateIndexes(),this.updateNextObjectId()},e.prototype.setStateFromAPI=function(e){var t=[],n={};e.expressions.list.forEach(function(e){t.push(e.id),n[e.id]={id:e.id,latex:e.latex,braille:"",type:"latex",displayAsFraction:!!e.displayAsFraction}}),this.setState({expressions:n,order:t,settings:e.settings,ui:{focus:void 0}})},e.prototype.canClear=function(){if(this.getNumberOfExpressions()>1)return!0;var e=this.getExpressionOrder()[0];return""!==this.getExpressionLatex(e)},e.prototype.clear=function(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:"",displayAsFraction:!1}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})},e.prototype.getExpressionOrder=function(){return this.store.getState().order},e.prototype.getNumberOfExpressions=function(){return this.getExpressionOrder().length},e.prototype.getExpressionById=function(e){return this.getState().expressions[e]},e.prototype.getExpressionIndex=function(e){return this._indexes[e]},e.prototype._getExpressionByIndex=function(e){var t=this.getExpressionOrder()[e];return this.getExpressionById(t)},e.prototype._updateIndexes=function(){this._indexes={};for(var e=0,t=0,n=this.getExpressionOrder();t<n.length;t++){var r=n[t];this._indexes[r]=e,e+=1}this._evaluate()},e.prototype._usesAnsById=function(e){return-1!==this.getExpressionById(e).latex.indexOf("\\operatorname{ans}")},e.prototype._getPreviousExpById=function(e){var t=this.getExpressionIndex(e);return this._getExpressionByIndex(t-1)},e.prototype.createBlankAfterId=function(e){if(!this.isSingleExpression()&&this.getExpressionById(e).latex){var t=this.getExpressionIndex(e),n=this.generateObjectId();this.store.shallowMutate("order",function(e){e.splice(t+1,0,n)}),this.store.shallowMutate("expressions",function(e){e[n]={id:n,latex:"",braille:"",type:"latex",displayAsFraction:!1}}),this._updateIndexes(),this.setFocusedById(n,!0)}},e.prototype.conditionallyCopyPrevious=function(e){var t=this._getPreviousExpById(e),n=this.getExpressionById(e);null!=t&&""===n.latex&&this._usesAnsById(t.id)&&this.setLatexById(e,t.latex)},e.prototype.backspaceAtFrontOfId=function(e){if(""===this.getExpressionById(e).latex&&1!==this.getNumberOfExpressions()){var t=this.getExpressionIndex(e);this.store.shallowMutate("order",function(e){e.splice(t,1)}),this.store.shallowMutate("expressions",function(t){delete t[e]}),this._updateIndexes(),this._setFocusedByIndex(Math.max(t-1,0),!0)}},e.prototype.setLatexById=function(e,t){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],""),""===t&&this.setFractionEvaluation(e,!1),this._evaluate()},e.prototype.setLatexAndBrailleById=function(e,t,n){this.store.set(["expressions",e,"latex"],t),this.store.set(["expressions",e,"braille"],n),""===t&&this.setFractionEvaluation(e,!1),this._evaluate()},e.prototype.setFractionEvaluation=function(e,t){this.store.set(["expressions",e,"displayAsFraction"],t)},e.prototype.setLatexOfFocusedExpression=function(e){var t=this.getFocusedExpressionId();t&&this.setLatexById(t,e)},e.prototype.isExpressionFocused=function(e){return this.getFocusedExpressionId()===e},e.prototype.getExpressionLatex=function(e){return this.getExpressionById(e).latex},e.prototype.getExpressionError=function(e){var t=this._evaluations[e];return t?t.error:""},e.prototype.getExpressionValue=function(e){var t=this._evaluations[e];if(t)return t.value},e.prototype.getExpressionAns=function(e){var t=this._evaluations[e];if(t)return t.ans},e.prototype.getExpressionAnsId=function(e){var t=this._evaluations[e];if(t)return t.ansId},e.prototype.shouldShowEvaluationForExpression=function(e){var t=this._evaluations[e];return!!t&&t.showEvaluation},e.prototype.isRationalizableConstant=function(e){var t=this._evaluations[e];return!!t&&t.isRationalizableConstant},e.prototype.canDisplayEvaluationAsFraction=function(e){var t=this.getExpressionValue(e);return!!t&&a.canDisplayAsFraction(t)},e.prototype._setFocusedByIndex=function(e,t){var n=this._getExpressionByIndex(e),r=this.store.getState().ui.focus,i=t?{type:"latex-expression",id:n.id}:void 0;if(!s.isEqual(r,i)){if(r){var o=r.id;this.store.deepMutate("expressions",function(e){var t=e[o];t&&(t.braille="")})}(t||this.getFocusedExpressionId()===n.id)&&this.store.shallowMutate("ui",function(e){e.focus=i})}},e.prototype.setFocusedById=function(e,t){var n=this.getExpressionIndex(e);this._setFocusedByIndex(n,t)},e.prototype.focusPrevById=function(e){var t=this.getExpressionIndex(e)-1;t>=0&&this._setFocusedByIndex(t,!0)},e.prototype.focusNextById=function(e){var t=this.getExpressionIndex(e)+1;t<this.getNumberOfExpressions()?this._setFocusedByIndex(t,!0):this.createAtEnd()},e.prototype.getFocusedExpression=function(){var e=this.getFocusedExpressionId();return e?this.getExpressionById(e):void 0},e.prototype.getFocusedExpressionId=function(){var e=this.getState().ui.focus;return e&&e.id},e.prototype.clearFocusedExpression=function(){var e=this.getFocusedExpression();e&&this.setLatexById(e.id,"")},e.prototype.shouldShowClear=function(){if(1===this.getNumberOfExpressions())return!1;var e=this.getFocusedExpression();return!!e&&!!e.latex},e.prototype.getLastExpression=function(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)},e.prototype.isLastExpressionEmpty=function(){return!!this.getLastExpression().latex},e.prototype.createAtEnd=function(){this.createBlankAfterId(this.getLastExpression().id)},e.prototype.focusLastExpression=function(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)},e.prototype.focusFirstExpression=function(){this._setFocusedByIndex(0,!0)},e.prototype.getDegreeMode=function(){return this.getState().settings.degreeMode},e.prototype.setDegreeMode=function(e){this.store.set(["settings","degreeMode"],!!e),this._evaluate()},e.prototype._cleanupLatex=function(e){return e=i.trimLatex(e),"="===e.substr(e.length-1)&&(e=e.substr(0,e.length-1)),e},e.prototype._evaluate=function(){var e=this;this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach(function(t){return e._evaluator.addStatement({id:t,index:e.getExpressionIndex(t),latex:e._cleanupLatex(e.getExpressionLatex(t)),shouldGraph:!1,type:"statement"})})},e.prototype._setupEvaluator=function(){var e=this;this._evaluator=new o.Evaluator(this.workerPool),this._evaluator.readEvaluatorConfig=function(){return{degreeMode:e.getDegreeMode(),evaluationMode:e.evaluationMode,additionalFunctions:e.additionalFunctions,functionDefinition:e.functionDefinition,replaceRoundWithReciprocal:e.replaceRoundWithReciprocal}},this._evaluator.onEvaluatorResults=function(t){var n=t.evaluationStates;e._evaluations={};for(var r in n){var i=n[r];if(e.getExpressionById(r)){var o=i.constant_value;void 0===o&&i.zero_values&&i.zero_values.length&&(o=i.zero_values[0].val);var s=i.hasOwnProperty("constant_value")&&a.canDisplayAsFraction(i.constant_value),c=!i.is_evaluable&&s,l=!!i.is_evaluable||c||Array.isArray(o);e._evaluations[r]={error:i.error,ans:void 0,ansId:void 0,value:o,showEvaluation:l,isRationalizableConstant:c}}}for(var u=void 0,d=void 0,p=0,h=e.getExpressionOrder();p<h.length;p++){var r=h[p],f=e._evaluations[r];if(u&&f){var m=u.value;"number"==typeof m?(f.ans=m,f.ansId=d):Array.isArray(m)&&(f.ans="[...]")}u=f,d=r}"function"==typeof e.onEvaluationUpdate&&e.onEvaluationUpdate()}},e.prototype.reloadState=function(){this.setState(this.getState())},e.prototype.getFunctionDefinition=function(){return!!this.functionDefinition},e.prototype.enableFunctionDefinition=function(){this.functionDefinition=!0,this.reloadState()},e.prototype.disableFunctionDefinition=function(){this.functionDefinition=!1,this.reloadState()},e.prototype.getReplaceRoundWithReciprocal=function(){return!!this.replaceRoundWithReciprocal},e.prototype.enableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!0,this.reloadState()},e.prototype.disableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!1,this.reloadState()},e}();t.default=c}),define("basic/controller",["require","exports","tslib","flux","underscore","./model","lib/state-stack","keypad/mq-commands","lib/i18n","dcgview-helpers/mathquill-view","lib/console","bugsnag","core/lib/color-helpers"],function(e,t,n,r,i,o,a,s,c,l,u,d,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){var n=this;this.keyboardMode="main",this.fontSize=16,this.invertedColors=!1,this.backgroundColor="",this.textColor="",this.projectorMode=!1,this.capExpressionSize=!1,this.decimalToFraction=!0,this.settingsMenu=!0,this.settingsMenuOpen=!1,this.language="en",this.brailleMode="none",this.sixKeyInput=!1,this.brailleExpressionDownload=!0,this.replaceCommaWith10Exp=!1,this.typingAsteriskWritesTimesSymbol=!1,this.stateStack=new a.default,this.dispatcher=new r.Dispatcher,this.t=function(e,t){return c.t(e,t,n.language)},this.dispatch=function(e){d.leaveBreadcrumb("dispatch",e),n.dispatcher.dispatch(e);for(var t;t=n._queuedCallbacks.shift();)t()},this._queuedCallbacks=[],this.stateStack=new a.default,this.dispatcher=new r.Dispatcher,this.options=e,this.model=new o.default({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,functionDefinition:this.options.functionDefinition,replaceRoundWithReciprocal:this.options.replaceRoundWithReciprocal,workerPool:t.workerPool}),this.model=this.model,this.model.setDegreeMode(e.degreeMode),this.setLanguage(e.language),this.setBrailleMode(e.brailleMode),this.setSixKeyInput(e.sixKeyInput),this.setBrailleExpressionDownload(e.brailleExpressionDownload),this.setReplaceCommaWith10Exp(e.replaceCommaWith10Exp),this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),this.setTypingAsteriskWritesTimesSymbol(e.typingAsteriskWritesTimesSymbol),this.setProjectorMode(e.projectorMode),this.setCapExpressionSize(e.capExpressionSize),this.setDecimalToFraction(e.decimalToFraction),this.invertedColors=e.invertedColors,this.backgroundColor=e.backgroundColor,this.textColor=e.textColor,this.settingsMenu=e.settingsMenu,this.model.onEvaluationUpdate=function(){return n.dispatch({type:"render"})},this.settingsProxy=t.settingsProxy,this.syncPublicSettings(),this.hookUpDispatcher(),this.containerSize={width:0,height:0}}return e.prototype.runAfterDispatch=function(e){this._queuedCallbacks.push(e)},e.prototype.enqueueEvent=function(e){var t=this;this.runAfterDispatch(function(){t.onEventEmitted&&t.onEventEmitted(e)})},e.prototype.getFunctionDefinition=function(){return this.options.functionDefinition},e.prototype.getSettingsMenu=function(){return this.settingsMenu},e.prototype.getBrailleMode=function(){return this.brailleMode},e.prototype.renderAsBraille=function(){return"none"!==this.brailleMode},e.prototype.setBrailleMode=function(e){this.brailleMode=e},e.prototype.getSixKeyInput=function(){return this.sixKeyInput},e.prototype.setSixKeyInput=function(e){this.sixKeyInput=e},e.prototype.getBrailleExpressionDownload=function(){return this.brailleExpressionDownload},e.prototype.setBrailleExpressionDownload=function(e){this.brailleExpressionDownload=e},e.prototype.getRestrictedEditing=function(){return this.options.restrictedEditing},e.prototype.getKeyboardMode=function(){return this.keyboardMode},e.prototype.getFontSize=function(){return this.fontSize},e.prototype.getInvertedColors=function(){return this.invertedColors},e.prototype.hasBackgroundColor=function(){return"#ffffff"!==this.getBackgroundColor()},e.prototype.getBackgroundColor=function(){var e=p.normalizeColor(this.backgroundColor||"#fff");return this.getInvertedColors()&&"#ffffff"!==e?p.invertColor(e):e},e.prototype.getTextColor=function(){var e=p.normalizeColor(this.textColor||"#000");return this.getInvertedColors()&&"#000000"!==e?p.invertColor(e):e},e.prototype.getAdditionalFunctions=function(){return this.options.additionalFunctions},e.prototype.getTypingSlashWritesDivisionSymbol=function(){return this.options.typingSlashWritesDivisionSymbol},e.prototype.setTypingAsteriskWritesTimesSymbol=function(e){this.typingAsteriskWritesTimesSymbol=e},e.prototype.getTypingAsteriskWritesTimesSymbol=function(){return this.typingAsteriskWritesTimesSymbol},e.prototype.setProjectorMode=function(e){this.projectorMode=e},e.prototype.isProjectorMode=function(){return this.projectorMode},e.prototype.getReplaceCommaWith10Exp=function(){return this.replaceCommaWith10Exp},e.prototype.setReplaceCommaWith10Exp=function(e){this.replaceCommaWith10Exp=e},e.prototype.getReplaceRoundWithReciprocal=function(){return this.model.getReplaceRoundWithReciprocal()},e.prototype.setReplaceRoundWithReciprocal=function(e){e?this.model.enableReplaceRoundWithReciprocal():this.model.disableReplaceRoundWithReciprocal()},e.prototype.setCapExpressionSize=function(e){this.capExpressionSize=e},e.prototype.getCapExpressionSize=function(){return this.capExpressionSize},e.prototype.setDecimalToFraction=function(e){this.decimalToFraction=e},e.prototype.setLanguage=function(e){"en"!==e&&-1===Desmos.supportedLanguages.indexOf(e)?u.warn("Translation for '"+e+"' isn't currently available. Using '"+this.language+"' instead."):this.language=e},e.prototype.getLanguage=function(){return this.language},e.prototype.getDecimalToFraction=function(){return this.decimalToFraction},e.prototype.isScientificCalc=function(){var e=this.options.evaluationMode;return"scientific"===e||"singleExpressionScientific"===e},e.prototype.isFourFunctionCalc=function(){return"fourFunction"===this.options.evaluationMode||"singleExpressionFourFunction"===this.options.evaluationMode},e.prototype.getAllowLinks=function(){return this.options.links},e.prototype.canUndo=function(){return this.stateStack.canUndo()},e.prototype.canRedo=function(){return this.stateStack.canRedo()},e.prototype.undo=function(e){if(this.canUndo()){this.stateStack.undo();var t=this.stateStack.getState();if(!e.restoreFocus){var r={focus:void 0};t=n.__assign(n.__assign({},t),{ui:r})}this.model.setState(t),this.enqueueEvent("change")}},e.prototype.redo=function(e){if(this.canRedo()){this.stateStack.redo();var t=this.stateStack.getState();if(!e.restoreFocus){var r={focus:void 0};t=n.__assign(n.__assign({},t),{ui:r})}this.model.setState(t),this.enqueueEvent("change")}},e.prototype.clearHistory=function(){this.stateStack.clear()},e.prototype.canBackspace=function(){var e=this.model.getFocusedExpression();return e&&(e.latex.length>0||this.model.getNumberOfExpressions()>1)},e.prototype.focusLastExpression=function(){this.model.focusLastExpression()},e.prototype.shouldRender=function(){return this.containerSize.width>0&&this.containerSize.height>0},e.prototype.canClear=function(){return this.model.canClear()},e.prototype.shouldShowClear=function(){return this.model.shouldShowClear()},e.prototype.enableSettingsMenu=function(){this.settingsMenu=!0},e.prototype.disableSettingsMenu=function(){this.closeSettingsMenu(),this.settingsMenu=!1},e.prototype.closeSettingsMenu=function(){this.settingsMenuOpen=!1},e.prototype.toggleSettingsMenu=function(){this.settingsMenuOpen=!this.settingsMenuOpen},e.prototype.isSettingsMenuOpen=function(){return this.settingsMenuOpen},e.prototype.isLastExpressionEmpty=function(){return this.model.isLastExpressionEmpty()},e.prototype.createAtEnd=function(){this.model.createAtEnd()},e.prototype.clearFocusedExpression=function(){this.model.clearFocusedExpression()},e.prototype.setLatexById=function(e,t){this.model.setLatexById(e,t)},e.prototype.setLatexAndBrailleById=function(e,t,n){this.model.setLatexAndBrailleById(e,t,n)},e.prototype.setLatexOfFocusedExpression=function(e){this.model.setLatexOfFocusedExpression(e)},e.prototype.toggleFractionEvaluationById=function(e){this.model.setFractionEvaluation(e,!this.model.getExpressionById(e).displayAsFraction)},e.prototype.conditionallyCopyPrevious=function(e){this.model.conditionallyCopyPrevious(e)},e.prototype.createBlankAfterId=function(e){this.model.createBlankAfterId(e)},e.prototype.backspaceAtFrontOfId=function(e){this.model.backspaceAtFrontOfId(e)},e.prototype.areStatesDifferentEnoughForUndoRedo=function(e,t){var r={focus:void 0};return i.isEqual(n.__assign(n.__assign({},e),{ui:r}),n.__assign(n.__assign({},t),{ui:r}))},e.prototype.commitUndoRedoDebounced=function(){var e=this.model.getState(),t=this.stateStack.getState();if(!this.areStatesDifferentEnoughForUndoRedo(e,t)){var n=(new Date).getTime();n-this._lastDebouncedTime<1e3?this.stateStack.replaceState(e):this.stateStack.addState(e),this._lastDebouncedTime=n,this.enqueueEvent("change")}},e.prototype.commitUndoRedoSynchronously=function(){var e=this.model.getState(),t=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(e,t)||(this._lastDebouncedTime=0,this.stateStack.addState(e),this.enqueueEvent("change"))},e.prototype.updateKeyboardMode=function(e){this.keyboardMode=e},e.prototype.getFocusedMathquill=function(){if(this.model.getFocusedExpressionId())return l.default.getFocusedMathquill()},e.prototype.ensureMathquillIsFocusedAndReturnFocusedMathquill=function(){var e=this.getFocusedMathquill();return e||(this.isLastExpressionEmpty()&&!this.model.isSingleExpression()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),this.getFocusedMathquill())},e.prototype.typeIntoFocusedMathquill=function(e){e=e.replace(/\r|\n/g,"");var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&l.default.canAcceptText(t,this.getCapExpressionSize(),e)&&(t.typedText(e),this.setLatexOfFocusedExpression(t.latex()),this.model.markShouldDebounceUndoRedo())},e.prototype.pressKeyInFocusedMathquill=function(e,t){if("none"===this.getBrailleMode()){var n=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();if(n)if("Up"===e||"Down"===e||"Left"===e||"Right"===e){var r=l.default.applyArrowKeyAndReturnIfWasAtBounds(n,e,t);r&&this.moveFocusInDirection(e)}else"Enter"===e?(t&&(t.preventDefault(),t.stopPropagation()),this.handleEnter()):"Backspace"===e?this.attemptToMoveFocusWithBackspace()||(n.keystroke(e,t),this.setLatexOfFocusedExpression(n.latex())):(n.keystroke(e,t),this.setLatexOfFocusedExpression(n.latex()))}},e.prototype.moveFocusInDirection=function(e){var t=this.model.getFocusedExpressionId();t&&("Up"===e?this.model.focusPrevById(t):"Down"===e&&this.model.focusNextById(t))},e.prototype.handleEnter=function(){if(!this.model.isSingleExpression()){var e=this.model.getFocusedExpressionId();e&&(this.conditionallyCopyPrevious(e),this.createBlankAfterId(e))}},e.prototype.attemptToMoveFocusWithBackspace=function(){var e=this.model.getFocusedExpression();if(!e)return!1;var t=e.latex,n=e.id;return""===t&&(this.backspaceAtFrontOfId(n),!0)},e.prototype.executeCommandInFocusedMathquill=function(e){var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&(s.execute(t,e),this.setLatexOfFocusedExpression(t.latex()))},e.prototype.syncPublicSettings=function(){this.settingsProxy.setProperty("language",this.language),this.settingsProxy.setProperty("fontSize",this.fontSize),this.settingsProxy.setProperty("degreeMode",this.model.getDegreeMode()),this.settingsProxy.setProperty("invertedColors",this.invertedColors),this.settingsProxy.setProperty("backgroundColor",this.backgroundColor),this.settingsProxy.setProperty("textColor",this.textColor),this.settingsProxy.setProperty("brailleMode",this.brailleMode),this.settingsProxy.setProperty("sixKeyInput",this.sixKeyInput),this.settingsProxy.setProperty("brailleExpressionDownload",this.brailleExpressionDownload),this.settingsProxy.setProperty("projectorMode",this.projectorMode),this.settingsProxy.setProperty("capExpressionSize",this.capExpressionSize),this.settingsProxy.setProperty("decimalToFraction",this.decimalToFraction),this.settingsProxy.setProperty("qwertyKeyboard",this.options.qwertyKeyboard),this.settingsProxy.setProperty("links",this.options.links),this.settingsProxy.setProperty("settingsMenu",this.settingsMenu),this.settingsProxy.setProperty("functionDefinition",this.model.getFunctionDefinition()),this.settingsProxy.setProperty("replaceCommaWith10Exp",this.replaceCommaWith10Exp),this.settingsProxy.setProperty("replaceRoundWithReciprocal",this.model.getReplaceRoundWithReciprocal()),this.settingsProxy.setProperty("typingAsteriskWritesTimesSymbol",this.typingAsteriskWritesTimesSymbol)},e.prototype.hookUpDispatcher=function(){var e=this;this.dispatcher.register(function(t){e.enqueueEvent("render");var r=!1,i=e.getRestrictedEditing();switch(t.type){case"update-options":e.options=n.__assign(n.__assign({},e.options),t.options);break;case"keypad/shift":var o=void 0;switch(e.keyboardMode){case"qwerty":o="capitalQwerty";break;case"capitalQwerty":o="qwerty";break;case"letters":o="capitalLetters";break;case"capitalLetters":o="letters";break;default:o="qwerty"}e.updateKeyboardMode(o);break;case"undo":i||(e.undo({restoreFocus:"keyboard-shortcut"===t.source}),r=!0);break;case"redo":i||(e.redo({restoreFocus:"keyboard-shortcut"===t.source}),r=!0);break;case"clear-history":e.clearHistory();break;case"set-state-from-api":t.opts.allowUndo||e.clearHistory(),e.model.setStateFromAPI(t.state);break;case"main":e.updateKeyboardMode("main");break;case"ABC":e.options.qwertyKeyboard?e.updateKeyboardMode("qwerty"):e.updateKeyboardMode("letters");break;case"functions":e.updateKeyboardMode("functions");break;case"degrees":e.model.setDegreeMode(!e.model.getDegreeMode());break;case"update-degree-mode":e.model.setDegreeMode(!!t.mode);break;case"update-font-size":var a=t.size;if("number"!=typeof a&&(a=parseInt(a,10)),isNaN(a))return;e.fontSize=a;break;case"update-inverted-colors":e.invertedColors=!!t.mode;break;case"update-background-color":e.backgroundColor=t.color;break;case"update-text-color":e.textColor=t.color;break;case"update-projector-mode":e.setProjectorMode(!!t.mode);break;case"update-cap-expression-size":e.setCapExpressionSize(!!t.mode);break;case"update-decimal-to-fraction":e.setDecimalToFraction(!!t.mode);break;case"update-language":e.setLanguage(t.language);break;case"set-blank":t.opts.allowUndo||e.clearHistory(),e.model.clear(),e.focusLastExpression();break;case"clear":e.model.clearFocusedExpression();break;case"set-braille-mode":var s=t.mode;"nemeth"!==s&&"ueb"!==s&&"none"!==s?u.warn("Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '"+s+"'."):(e.model.clearCachedBrailleValues(),e.setBrailleMode(t.mode));break;case"set-six-key-input":e.setSixKeyInput(!!t.mode);break;case"set-braille-expression-download":e.setBrailleExpressionDownload(!!t.mode);break;case"set-replace-comma-with-10-exp":e.setReplaceCommaWith10Exp(!!t.replace);break;case"set-replace-round-with-reciprocal":e.setReplaceRoundWithReciprocal(!!t.replace);break;case"set-typing-asterisk-writes-times-symbol":e.setTypingAsteriskWritesTimesSymbol(!!t.mode);break;case"update-latex":e.model.markShouldDebounceUndoRedo(),e.setLatexById(t.id,t.latex);break;case"update-latex-from-braille":e.model.markShouldDebounceUndoRedo(),e.setLatexAndBrailleById(t.id,t.latex,t.braille);break;case"focusin":e.model.setFocusedById(t.id,!0);break;case"focusout":e.model.setFocusedById(t.id,!1);break;case"focus-first-expression":e.model.focusFirstExpression();break;case"focus-prev-expression":e.moveFocusInDirection("Up");break;case"focus-next-expression":e.moveFocusInDirection("Down");break;case"focus-last-expression":e.model.focusLastExpression();break;case"insert-blank-expression":e.handleEnter();break;case"backspace-from-braille":e.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":e.typeIntoFocusedMathquill(t.text);break;case"keypad/press-key":e.pressKeyInFocusedMathquill(t.key,t.evt);break;case"keypad/custom-command":e.executeCommandInFocusedMathquill(t.command);break;case"keypad/123":case"keypad/abc":break;case"enable-settings-menu":e.enableSettingsMenu();break;case"disable-settings-menu":e.disableSettingsMenu();break;case"toggle-settings-menu":e.toggleSettingsMenu();break;case"close-settings-menu":e.closeSettingsMenu();break;case"render":break;case"ui/container-resized":e.containerSize=t.size;break;case"toggle-fraction-evaluation":e.toggleFractionEvaluationById(t.id);break;default:return t}e.runAfterDispatch(function(){return e.syncPublicSettings()}),r||(e.model.getShouldDebounceUndoRedo()?(e.commitUndoRedoDebounced(),e.model.clearShouldDebounceUndoRedo()):e.commitUndoRedoSynchronously())})},e}();t.default=h}),define("basic/dcgview-basic",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DCGViewBasic=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.t=this.controller.t},t}(r.Class);t.DCGViewBasic=i}),define("loadcss!keypad/control-bar",function(){}),define("keypad/control-bar",["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./control-bar"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-keypad-control-bar dcg-do-not-blur"),role:r.const("group"),"aria-label":function(){return e.controller.t("Control Bar")}},r.createElement("div",{class:r.const("dcg-keypad-control-bar-contents")},this.children))},t}(i.default);t.default=o}),define("loadcss!keypad/control-btn",function(){}),define("keypad/control-btn",["require","exports","tslib","dcgview","loadcss!./control-btn"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-keypad-control-btn":!0,"dcg-disabled":e.isDisabled(),"dcg-selected":!e.isDisabled()&&e.isSelected(),"dcg-selectable-btn":!e.isDisabled()&&e.isSelectable(),"dcg-narrow-control-btn":e.props.narrowButton&&e.props.narrowButton()}},didMount:this.bindFn(this.didMount),role:r.const("button"),"aria-disabled":function(){return e.isDisabled()||void 0},"aria-label":function(){return e.getAriaLabel()},"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":function(){return e.hasPopup()||e.isDisabled()||!e.isSelectable()?void 0:e.isSelected()},"aria-expanded":function(){return e.hasPopup()&&!e.isDisabled()?e.isSelected():void 0},tabindex:this.bindFn(this.getTabIndex)},this.children)},t.prototype.getTabIndex=function(){return this.isDisabled()?void 0:this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0},t.prototype.handleTap=function(e){this.isDisabled()||this.props.onTap(e)},t.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},t.prototype.hasPopup=function(){return!!this.props.ariaPopup&&this.props.ariaPopup()},t.prototype.isDisabled=function(){return!!this.props.disabled&&this.props.disabled()},t.prototype.isSelected=function(){return!!this.props.selected&&this.props.selected()},t.prototype.isSelectable=function(){return!!this.props.selectable&&this.props.selectable()},t.prototype.didMount=function(e){this.props.didMount&&this.props.didMount(e)},t}(r.Class);t.default=i}),define("loadcss!dcgview-helpers/download-button",function(){}),define("dcgview-helpers/download-button",["require","exports","tslib","dcgview","browser","loadcss!./download-button"],function(e,t,n,r,i){"use strict";function o(){if(!i.IS_SAFARI)return!1;var e=navigator.userAgent.match(/Version\/(\d+)/);return!(!e||!e[1])&&parseFloat(e[1])<11}function a(){return!i.IS_IE&&!o()&&void 0!==document.createElement("a").download}function s(){return a()||void 0!==navigator.msSaveBlob}Object.defineProperty(t,"__esModule",{value:!0}),t.canDownload=void 0,t.canDownload=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.supportsDirectDownload=a()},t.prototype.template=function(){var e=this;return r.createElement("a",{
role:r.const("button"),tabindex:function(){return e.props.enabled()?0:-1},"aria-disabled":function(){return!e.props.enabled()},class:function(){return{"dcg-download-button":!0,"dcg-disabled":!e.props.enabled(),"dcg-braille-equations":e.props.isBraille,"dcg-svg-button":e.props.isSvg}},didMount:this.bindFn(this.didMountDownload),didUnmount:this.bindFn(this.didUnmountDownload),didUpdate:this.bindFn(this.didUpdate),download:function(){return e.supportsDirectDownload?e.props.filename():void 0},onTap:function(t){if(!e.supportsDirectDownload&&navigator.msSaveOrOpenBlob){var n=e.props.data();n&&(navigator.msSaveOrOpenBlob(n,e.props.filename()),t.preventDefault())}}},r.createElement("i",{class:r.const("dcg-icon-download")}),r.createElement("span",null,function(){return e.props.text()}))},t.prototype.didMountDownload=function(e){this.downloadLink=e,this.didUpdate()},t.prototype.didUnmountDownload=function(){this.revokeBlobURL()},t.prototype.didUpdate=function(){this.updateDownloadURL(),this.cachedObjectURL&&(this.downloadLink.href=this.cachedObjectURL)},t.prototype.updateDownloadURL=function(){if(this.revokeBlobURL(),this.supportsDirectDownload){var e=this.props.data();e&&(this.cachedObjectURL=URL.createObjectURL(e))}},t.prototype.revokeBlobURL=function(){this.cachedObjectURL&&URL.revokeObjectURL(this.cachedObjectURL)},t}(r.Class);t.default=c}),define("lib/export-braille-equations",["require","exports","abraham","graphing-calc/models/expression","expressions/regression_view","core/lib/number-to-latex"],function(e,t,n,r,i,o){"use strict";function a(e,t,r){if(void 0===r&&(r=!1),r&&(e=e.replace(/ /g,"\\ ")),"none"===t)return e;var i="nemeth"===t?n.latexToNemeth(e):n.latexToUeb(e);return i.isError?"":n.UnicodeBraille.toBrailleAscii(i.value)}function s(e,t){if("none"===t)return"";var n=[];n.push(a("Expression List",t,!0)),n.push(""),n.push("");for(var s="",c=e.getItemCount(),d=0;d<c;d++){var p=e.getItemModelByIndex(d);if(p&&!p.secret){""!==s&&"folder"!==p.type&&s!==p.folderId&&(n.push(l(a("End Folder",t,!0))),s="");var h="";switch(p.type){case"expression":if(!p.hidden){var f=u(p.displayIndex,t);h=p.latex;var m=[],g=p.formula;if(g&&!r.isEmpty(p))if(e.shouldShowEvaluationForItem(p.id)){var y=g.zero_values&&g.zero_values.length?g.zero_values[0].val:g.constant_value;Array.isArray(y)?h+="\\ "+y.length+"\\ element\\ list":h+="="+y}else if(r.shouldShowCDFFooter(p))m.push(a("Min="+r.getCDFMin(p),t,!1)),m.push(a("Max="+r.getCDFMax(p),t,!1)),r.isCDFMaxValid(p)&&r.isCDFMinValid(p)&&m.push(a("CDF="+r.getCDFEvaluation(p),t,!1));else if(r.isTTest(p)){var v=r.getTTestResults(p);v&&(m.push(a("<"+o.numberToStatsConfidenceLatex(v.lessThan,5),t,!1)),m.push(a(">"+o.numberToStatsConfidenceLatex(v.greaterThan,5),t,!1)),m.push(a("\\ne"+o.numberToStatsConfidenceLatex(v.notEqual,5),t,!1)))}else if(g.is_regression&&g.regression){var b=g.regression,x=b.statistics,E=b.parameters;x.hasOwnProperty("Rsquared")&&m.push(a("R^2="+i.getRoundedStat(b,"Rsquared"),t,!1)),x.hasOwnProperty("rsquared")&&m.push(a("r^2="+i.getRoundedStat(b,"rsquared"),t,!1)),x.hasOwnProperty("r")&&m.push(a("r="+i.getRoundedStat(b,"r"),t,!1)),x.hasOwnProperty("RMSE")&&m.push(a("\\operatorname{RMSE}="+i.getRoundedStat(b,"RMSE"),t,!1));for(var w in E)m.push(a(w+"="+i.getRoundedParam(b,w),t,!1))}n.push(f+"  "+a(h,t,!1)),n.push.apply(n,m)}break;case"text":n.push(a(p.text,t,!0));break;case"folder":p.collapsed?h="Collapsed Folder "+p.title:(h="Start Folder "+p.title,s=p.id),n.push(l(a(h,t,!0)));break;case"image":n.push(a("Image",t,!1));break;case"table":n.push(l(a("Start Table",t,!0)));for(var _=0,S=p.rowModels;_<S.length;_++){for(var M=S[_],k=[],C=0,I=M.cells;C<I.length;C++){var T=I[C],L="";if("header"===T.type)L=T.latex||"";else if("cell"===T.type){var D=T.column.index,P=T.row.index-1,A=T.column.disabled;L=A?T.column.computedValues[P]||"":p.columns[D].values[P]||""}k.push(a(L,t))}var O=k.join("\t");/^\t/.test(O)||n.push(O)}n.push(l(a("End Table",t,!0)));break;default:return p}}}return""!==s&&n.push(l(a("End Folder",t,!0))),n.join("\n")}function c(e,t){if("none"===t)return"";var n=[];n.push(a("Expression List",t,!0)),n.push(""),n.push("");for(var r=0,i=e.getExpressionOrder();r<i.length;r++){var o=i[r],s=u(e.getExpressionIndex(o)+1,t),c=e.getExpressionLatex(o),l=e.getExpressionValue(o);void 0!==l&&(c+="="+l),n.push(s+"  "+a(c,t,!1))}return n.join("\n")}function l(e){var t="--------------------";return t+"\n"+e+"\n"+t}function u(e,t){var n=""+e;return"nemeth"===t?a(n,t,!1)+"_4":"ueb"===t?a(n+".",t,!1):""}Object.defineProperty(t,"__esModule",{value:!0}),t.getBrailleEquationsBasic=t.getBrailleEquationsGraphing=void 0,t.getBrailleEquationsGraphing=s,t.getBrailleEquationsBasic=c}),define("loadcss!basic/settings-menu",function(){}),define("basic/settings-menu",["require","exports","tslib","keys","dcgview","./dcgview-basic","jquery","dcgview-helpers/download-button","lib/export-braille-equations","loadcss!./settings-menu"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsMenu=void 0;var l=i.Components.If,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement("div",{class:function(){return{"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":e.controller.hasBackgroundColor(),"dcg-point-left":e.controller.containerSize.height<=420}},role:i.const("complementary"),"aria-label":i.const("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},i.createElement("div",{class:i.const("dcg-popover-interior"),style:function(){return{background:e.controller.getBackgroundColor()}}},i.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":e.controller.isProjectorMode()}},role:i.const("button"),onTap:this.bindFn(this.onToggleProjectorMode),tabindex:i.const(0),"aria-label":function(){return e.controller.t("Projector Mode")},"aria-pressed":function(){return e.controller.isProjectorMode()}},function(){return e.controller.t("Projector Mode")}),i.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-braille-container":!0}}},i.createElement("div",{class:i.const("dcg-group-title")},function(){return e.controller.t("Braille Mode")}),i.createElement("div",{role:i.const("group"),"aria-label":function(){return e.controller.t("Braille Mode")},class:i.const("dcg-braille-options-buttons")},i.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":e.isLatex()}},role:i.const("button"),onTap:function(){return e.setBrailleMode("none")},tabindex:i.const(0),"aria-label":function(){return e.controller.t("Off")},"aria-pressed":function(){return e.isLatex()}},function(){return e.controller.t("Off")}),i.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":e.isNemeth()}},role:i.const("button"),onTap:function(){return e.setBrailleMode("nemeth")},tabindex:i.const(0),"aria-label":function(){return e.controller.t("Nemeth")},"aria-pressed":function(){return e.isNemeth()}},function(){return e.controller.t("Nemeth")}),i.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":e.isUEB()}},role:i.const("button"),onTap:function(){return e.setBrailleMode("ueb")},tabindex:i.const(0),"aria-label":function(){return e.controller.t("UEB")},"aria-pressed":function(){return e.isUEB()}},function(){return e.controller.t("UEB")})),i.createElement(l,{predicate:function(){return e.controller.renderAsBraille()}},function(){return i.createElement("div",null,i.createElement("div",{role:i.const("checkbox"),tabindex:i.const(0),onTap:function(){return e.onToggleSixKeyInput()},"aria-checked":function(){return e.controller.getSixKeyInput()},"aria-label":function(){return e.controller.t("Six Key Braille Input")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-six-key-checkbox":!0,"dcg-checked":e.controller.getSixKeyInput(),"dcg-checkbox-container":!0}},handleEvent:i.const(!0)},i.createElement("span",{class:i.const("dcg-checkbox-box")},i.createElement("i",{class:i.const("dcg-icon-check")})),i.createElement("span",{class:i.const("dcg-checkbox-label")},function(){return e.controller.t("Six Key Braille Input")})),i.createElement("a",{href:i.const("https://www.desmos.com/accessibility#braille"),class:i.const("dcg-six-key-info"),target:i.const("_blank")},i.createElement("i",{class:i.const("dcg-icon-question-sign")})),i.createElement(l,{predicate:function(){return s.canDownload()&&e.controller.getBrailleExpressionDownload()}},function(){return i.createElement(s.default,{data:function(){var t=c.getBrailleEquationsBasic(e.model,e.controller.getBrailleMode());return new Blob([t],{type:"text/plain"})},enabled:e.const(!0),filename:e.const("desmos-equations.brl"),text:function(){return e.controller.t("Download Braille Equations")},isBraille:e.const(!0)})}))})),i.createElement("div",{role:i.const("checkbox"),tabindex:i.const(0),onTap:this.bindFn(this.onToggleInvertedColors),"aria-checked":function(){return e.controller.getInvertedColors()},"aria-label":function(){return e.controller.t("Reverse Contrast")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-checked":e.controller.getInvertedColors(),"dcg-checkbox-container":!0,"dcg-reverse-contrast":!0}},handleEvent:i.const(!0)},i.createElement("span",{class:i.const("dcg-checkbox-box")},i.createElement("i",{class:i.const("dcg-icon-check")})),i.createElement("span",{class:i.const("dcg-checkbox-label")},function(){return e.controller.t("Reverse Contrast")})),i.createElement(l,{predicate:function(){return!!e.getVersionNumber()}},function(){return i.createElement("div",{class:i.const("dcg-version-number")},i.const("Version: "),function(){return e.getVersionNumber()})})))},t.prototype.getVersionNumber=function(){var e=window;if(e&&e.AppBridge)return e.AppBridge.versionNumber},t.prototype.didUnmountSettingsDropdown=function(){a(document).off(".dcg-settings-view")},t.prototype.didMountSettingsDropdown=function(e){var t=this;this.settingsGroupNode=e,a(document).on("dcg-tapstart.dcg-settings-view",function(e){0===a(e.target).closest(".dcg-basic-settings-container").length&&t.controller.dispatch({type:"close-settings-menu"})}),a(document).on("keydown.dcg-settings-view",function(e){if("Esc"===r.lookup(e)&&(t.controller.dispatch({type:"close-settings-menu"}),t.controller.dispatch({type:"focus-last-expression"})),"Tab"===r.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var n=document.activeElement,i=a(t.props.settingsButtonNode()),o=a(t.settingsGroupNode).find(".dcg-settings-menu-option:last");e.shiftKey||n!==o[0]?e.shiftKey&&n===i[0]&&(o.focus(),e.preventDefault(),e.stopPropagation()):(i.focus(),e.preventDefault(),e.stopPropagation())}})},t.prototype.setBrailleMode=function(e){this.controller.dispatch({type:"set-braille-mode",mode:e})},t.prototype.isNemeth=function(){return"nemeth"===this.controller.getBrailleMode()},t.prototype.isUEB=function(){return"ueb"===this.controller.getBrailleMode()},t.prototype.isLatex=function(){return"none"===this.controller.getBrailleMode()},t.prototype.onToggleSixKeyInput=function(){var e=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",mode:e})},t.prototype.onToggleInvertedColors=function(){var e=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:e})},t.prototype.onToggleProjectorMode=function(){this.controller.dispatch({type:"update-projector-mode",mode:!this.controller.isProjectorMode()})},t}(o.DCGViewBasic);t.SettingsMenu=u}),define("loadcss!basic/keypad/settings-control-button",function(){}),define("basic/keypad/settings-control-button",["require","exports","tslib","dcgview","keypad/control-btn","basic/dcgview-basic","basic/settings-menu","loadcss!./settings-control-button"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement("div",{class:r.const("dcg-basic-settings-container")},r.createElement(i.default,{didMount:function(t){return e.settingsButtonNode=t},command:this.const("settings"),ariaLabel:function(){return t.t("settings")},onTap:this.bindFn(this.onToggleSettingsMenu),selected:function(){return e.controller.isSettingsMenuOpen()},ariaPopup:this.const(!0)},r.createElement("i",{class:r.const("dcg-icon-wrench")})),r.createElement(s,{predicate:function(){return e.controller.isSettingsMenuOpen()}},function(){return r.createElement(a.SettingsMenu,{controller:e.props.controller,settingsButtonNode:function(){return e.settingsButtonNode}})}))},t.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},t}(o.DCGViewBasic);t.default=c}),define("basic/keypad/fourfunction-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./settings-control-button","basic/dcgview-basic"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components,l=c.If,u=c.IfElse,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(l,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.t("undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-undo")}))}),r.createElement(l,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.t("redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-redo")}))}),u(function(){return t.shouldShowClear()},{true:function(){return r.createElement(o.default,{command:e.const("clear"),ariaLabel:function(){return t.t("clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.t("clear")})},false:function(){return r.createElement(o.default,{command:e.const("clearall"),disabled:function(){return!t.canClear()},ariaLabel:function(){return t.t("clear all")},onTap:function(){return t.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return t.t("clear all")})}}),r.createElement(l,{predicate:function(){return e.controller.getRestrictedEditing()}},function(){return r.createElement("div",{class:r.const("dcg-spacer-2")})}),r.createElement(l,{predicate:function(){return"none"===t.getBrailleMode()}},function(){return r.createElement(o.default,{command:e.const("backspace"),ariaLabel:function(){return t.t("backspace")},disabled:function(){return!t.canBackspace()},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},r.createElement("i",{class:r.const("dcg-icon-delete")}))}),r.createElement(l,{predicate:function(){return e.props.controller().getSettingsMenu()}},function(){return r.createElement(a.default,{controller:e.props.controller})}))},t.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},t}(s.DCGViewBasic);t.default=d}),define("basic/keypad/single-expression-fourfunction-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(s,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.t("undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-undo")}))}),r.createElement(s,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.t("redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-redo")}))}),r.createElement(o.default,{command:this.const("clear"),ariaLabel:function(){return t.t("clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.t("clear")}),r.createElement(s,{predicate:function(){return e.controller.getRestrictedEditing()}},function(){return r.createElement("div",{class:r.const("dcg-spacer-2")})}),r.createElement(s,{predicate:function(){return"none"===t.getBrailleMode()}},function(){return r.createElement(o.default,{command:e.const("backspace"),ariaLabel:function(){return t.t("backspace")},disabled:function(){return!t.canBackspace()},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},r.createElement("i",{class:r.const("dcg-icon-delete")}))}))},t}(a.DCGViewBasic);t.default=c}),define("loadcss!keypad/control-toggle",function(){}),define("keypad/control-toggle",["require","exports","tslib","lib/aria","core/lib/color-helpers","dcgview","./dcgview-keypad","loadcss!./control-toggle"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-keypad-control-toggle":!0,"dcg-toggled":e.props.toggled()}},role:o.const("button"),tabindex:o.const("0"),"aria-label":this.bindFn(this.getAriaLabel),onTap:this.bindFn(this.handleTap)},o.createElement("div",{class:o.const("dcg-ctrl-toggle-option")},this.props.defaultOption),o.createElement("div",{class:o.const("dcg-ctrl-toggle-option")},this.props.toggledOption),o.createElement("div",{class:o.const("dcg-ctrl-toggle-cover"),style:function(){return{background:i.shadeColor(e.controller.getBackgroundColor(),-.1)}}}))},t.prototype.getAriaLabel=function(){var e={toggled:this.props.toggledAriaLabel(),default:this.props.defaultAriaLabel()};return this.props.toggled()?this.controller.t("__toggled__ selected. Press Enter to switch to __default__.",e):this.controller.t("__default__ selected. Press Enter to switch to __toggled__.",e)},t.prototype.handleTap=function(){this.props.toggled()?r.alert(this.props.defaultAriaLabel()):r.alert(this.props.toggledAriaLabel()),this.props.onTap(this.props.command())},t}(a.default);t.default=s}),define("basic/keypad/scientific-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle","./settings-control-button"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r.Components,u=l.If,d=l.IfElse,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(o.default,{command:this.const("main"),selected:function(){return"main"===t.getKeyboardMode()},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"main"})},ariaLabel:function(){return t.t("main")}},function(){return t.t("main")}),r.createElement(o.default,{command:this.const("ABC"),selected:function(){return-1!==["qwerty","capitalQwerty","letters"].indexOf(t.getKeyboardMode())},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return t.t("A B C")},onTap:function(){return t.dispatch({type:"ABC"})}},function(){return t.t("abc")}),r.createElement(o.default,{command:this.const("functions"),selected:function(){return-1!==["functions","restrictedFunctions"].indexOf(t.getKeyboardMode())},ariaLabel:function(){return t.t("Functions")},disabled:function(){return e.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"functions"})}},function(){return t.t("func")}),r.createElement(s.default,{command:this.const("degrees"),toggled:function(){return e.model.getDegreeMode()},defaultOption:function(){return t.t("rad")},toggledOption:function(){return t.t("deg")},defaultAriaLabel:function(){return t.t("Radians")},toggledAriaLabel:function(){return t.t("Degrees")},onTap:function(){return t.dispatch({type:"degrees"})},controller:this.props.controller}),r.createElement(u,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.t("Undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-undo")}))}),r.createElement(u,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.t("Redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-redo")}))}),d(function(){return t.shouldShowClear()},{true:function(){return r.createElement(o.default,{command:e.const("clear"),ariaLabel:function(){return t.t("clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.t("clear")})},false:function(){return r.createElement(o.default,{command:e.const("clearall"),disabled:function(){return!t.canClear()},ariaLabel:function(){return t.t("clear all")},onTap:function(){return t.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return t.t("clear all")})}}),r.createElement(u,{predicate:function(){return e.props.controller().getSettingsMenu()}},function(){return r.createElement(c.default,{controller:e.props.controller})}))},t}(a.DCGViewBasic);t.default=p}),define("basic/keypad/single-expression-scientific-control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(s.default,{command:this.const("degrees"),toggled:function(){return e.model.getDegreeMode()},defaultOption:function(){return t.t("rad")},toggledOption:function(){return t.t("deg")},defaultAriaLabel:function(){return t.t("Radians")},toggledAriaLabel:function(){return t.t("Degrees")},onTap:function(){return t.dispatch({type:"degrees"})},controller:this.props.controller}),r.createElement("div",{class:r.const("dcg-spacer")}),r.createElement(c,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.t("Undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-undo")}))}),r.createElement(c,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return r.createElement(o.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.t("Redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},r.createElement("i",{class:r.const("dcg-icon-redo")}))}),r.createElement("div",{class:r.const("dcg-spacer")}),r.createElement(o.default,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:function(){return t.t("clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.t("clear")}),r.createElement(o.default,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:function(){return t.t("backspace")},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},r.createElement("i",{class:r.const("dcg-icon-delete")})))},t}(a.DCGViewBasic);t.default=l}),define("basic/keypad/fourfunction-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.t("keypad")}},r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"(",{colspan:this.parenColspan()}),o.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),o.view(this,"/")),r.createElement(s.default,null,o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"*")),r.createElement(s.default,null,o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"-")),r.createElement(s.default,null,o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"+")),r.createElement(s.default,null,o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"ans"),o.view(this,"enter",{style:"blue"}))))},t.prototype.parenColspan=function(){return this.controller.getAdditionalFunctions().length>1?.5:1},t.prototype.makeAdditionalFunctionKey=function(e){var t=this.controller.getAdditionalFunctions()[e];return"exponent"===t?o.view(this,"a^b"):"percent"===t?o.view(this,"%"):"sqrt"===t?o.view(this,"sqrt"):void 0},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/single-expression-fourfunction-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.t("keypad")}},r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"(",{colspan:this.parenColspan()}),o.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(1)),r.createElement(s.default,null,o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/")),r.createElement(s.default,null,o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*")),r.createElement(s.default,null,o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-")),r.createElement(s.default,null,o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight",colspan:this.dotColspan()}),this.makeAdditionalFunctionKey(0),o.view(this,"+"))))},t.prototype.parenColspan=function(){return 2===this.controller.getAdditionalFunctions().length?1.5:2},t.prototype.dotColspan=function(){return this.controller.getAdditionalFunctions().length?1:2},t.prototype.makeAdditionalFunctionKey=function(e){var t=this.controller.getAdditionalFunctions()[e];return"exponent"===t?o.view(this,"a^b"):"percent"===t?o.view(this,"%"):"sqrt"===t?o.view(this,"sqrt"):void 0},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/single-expression-scientific-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"("),o.view(this,")"),o.view(this,"x^2"),o.view(this,"sqrt"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"x^3"),o.view(this,"x^y"),o.view(this,"ythroot")),r.createElement(s.default,null,o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"pi"),o.view(this,"e^x"),o.view(this,"!")),r.createElement(s.default,null,o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"log"),o.view(this,"ln"),o.view(this,"|x|")),r.createElement(s.default,null,o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan")),r.createElement(s.default,null,o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"x/y"),o.view(this,"+"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"arcsin"),o.view(this,"arccos"),o.view(this,"arctan")))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.IfElse,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"a^2"),o.view(this,"a^b"),o.view(this,"|a|"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"7",{style:"highlight"}),o.view(this,"8",{style:"highlight"}),o.view(this,"9",{style:"highlight"}),o.view(this,"/"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"%"),o.view(this,"a/b")),r.createElement(s.default,null,o.view(this,"sqrt"),o.view(this,"nthroot"),o.view(this,"pi"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"4",{style:"highlight"}),o.view(this,"5",{style:"highlight"}),o.view(this,"6",{style:"highlight"}),o.view(this,"*"),r.createElement("div",{class:r.const("dcg-partition-placeholder")
}),o.view(this,"left",{style:"highlight"}),o.view(this,"right",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"1",{style:"highlight"}),o.view(this,"2",{style:"highlight"}),o.view(this,"3",{style:"highlight"}),o.view(this,"-"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.spacer(.5),o.view(this,"backspace",{style:"highlight",colspan:1.5})),r.createElement(s.default,null,o.view(this,"("),o.view(this,")"),c(function(){return e.controller.getReplaceCommaWith10Exp()},{true:function(){return o.view(e,"10^n")},false:function(){return o.view(e,",")}}),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"0",{style:"highlight"}),o.view(this,".",{style:"highlight"}),o.view(this,"ans"),o.view(this,"+"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"enter",{style:"blue",colspan:2})))},t}(i.DCGViewBasic);t.default=l}),define("basic/keypad/sci-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"q"),o.view(this,"w"),o.view(this,"e"),o.view(this,"r"),o.view(this,"t"),o.view(this,"y"),o.view(this,"u"),o.view(this,"i"),o.view(this,"o"),o.view(this,"p")),r.createElement(s.default,null,r.createElement("div",{class:r.const("dcg-half-width-placeholder")}),o.view(this,"a"),o.view(this,"s"),o.view(this,"d"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"j"),o.view(this,"k"),o.view(this,"l"),r.createElement("div",{class:r.const("dcg-half-width-placeholder")})),r.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,"z"),o.view(this,"x"),o.view(this,"c"),o.view(this,"v"),o.view(this,"b"),o.view(this,"n"),o.view(this,"m"),o.view(this,","),o.view(this,"backspace",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:1.5}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter",{style:"blue",colspan:1.5})))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-letters-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"a"),o.view(this,"b"),o.view(this,"c"),o.view(this,"d"),o.view(this,"e"),o.view(this,"f"),o.view(this,"g"),o.view(this,"h"),o.view(this,"i"),o.view(this,"j")),r.createElement(s.default,null,o.view(this,"k"),o.view(this,"l"),o.view(this,"m"),o.view(this,"n"),o.view(this,"o"),o.view(this,"p"),o.view(this,"q"),o.view(this,"r"),o.view(this,"s"),o.view(this,"t")),r.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,","),o.view(this,"u"),o.view(this,"v"),o.view(this,"w"),o.view(this,"x"),o.view(this,"y"),o.view(this,"z"),o.view(this,"pi"),o.view(this,"backspace",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:2}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"enter",{style:"blue",colspan:2})))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-capital-qwerty-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"Q"),o.view(this,"W"),o.view(this,"E"),o.view(this,"R"),o.view(this,"T"),o.view(this,"Y"),o.view(this,"U"),o.view(this,"I"),o.view(this,"O"),o.view(this,"P")),r.createElement(s.default,null,r.createElement("div",{class:r.const("dcg-half-width-placeholder")}),o.view(this,"A"),o.view(this,"S"),o.view(this,"D"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"J"),o.view(this,"K"),o.view(this,"L"),r.createElement("div",{class:r.const("dcg-half-width-placeholder")})),r.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,"Z"),o.view(this,"X"),o.view(this,"C"),o.view(this,"V"),o.view(this,"B"),o.view(this,"N"),o.view(this,"M"),o.view(this,","),o.view(this,"backspace",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:1.5}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter",{style:"blue",colspan:1.5})))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-capital-letters-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"A"),o.view(this,"B"),o.view(this,"C"),o.view(this,"D"),o.view(this,"E"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"I"),o.view(this,"J")),r.createElement(s.default,null,o.view(this,"K"),o.view(this,"L"),o.view(this,"M"),o.view(this,"N"),o.view(this,"O"),o.view(this,"P"),o.view(this,"Q"),o.view(this,"R"),o.view(this,"S"),o.view(this,"T")),r.createElement(s.default,null,o.view(this,"=",{style:"highlight"}),o.view(this,","),o.view(this,"U"),o.view(this,"V"),o.view(this,"W"),o.view(this,"X"),o.view(this,"Y"),o.view(this,"Z"),o.view(this,"pi"),o.view(this,"backspace",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"shift",{style:"highlight",colspan:2}),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"enter",{style:"blue",colspan:2})))},t}(i.DCGViewBasic);t.default=c}),define("basic/keypad/sci-functions-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r.Components.IfElse,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-sci-func-keypad")},r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"sin"),o.view(this,"cos"),o.view(this,"tan"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"a^b"),o.view(this,"sqrt"),o.view(this,"nthroot")),r.createElement(s.default,null,o.view(this,"arcsin"),o.view(this,"arccos"),o.view(this,"arctan"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"e^x"),o.view(this,"abs"),c(function(){return e.controller.getReplaceRoundWithReciprocal()},{true:function(){return o.view(e,"a^{-1}")},false:function(){return o.view(e,"round")}})),r.createElement(s.default,null,o.view(this,"mean"),o.view(this,"stdev"),o.view(this,"stdevp"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"ln"),o.view(this,"log"),o.view(this,"backspace",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"nPr"),o.view(this,"nCr"),o.view(this,"!"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),o.view(this,"e"),o.view(this,"pi"),o.view(this,"enter",{style:"blue"}))))},t}(i.DCGViewBasic);t.default=l}),define("basic/keypad/scientific-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./sci-keypad","./sci-qwerty-keypad","./sci-letters-keypad","./sci-capital-qwerty-keypad","./sci-capital-letters-keypad","./sci-functions-keypad"],function(e,t,n,r,i,o,a,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=r.Components.SwitchUnion,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.t("keypad")}},d(function(){return e.controller.getKeyboardMode()},{qwerty:function(){return r.createElement(a.default,{controller:e.props.controller})},letters:function(){return r.createElement(s.default,{controller:e.props.controller})},capitalQwerty:function(){return r.createElement(c.default,{controller:e.props.controller})},capitalLetters:function(){return r.createElement(l.default,{controller:e.props.controller})},functions:function(){return r.createElement(u.default,{controller:e.props.controller})},main:function(){return r.createElement(o.default,{controller:e.props.controller})}}))},t}(i.DCGViewBasic);t.default=p}),define("loadcss!basic/keypad/braille-example-row",function(){}),define("basic/keypad/braille-example-row",["require","exports","tslib","dcgview","dcgview-helpers/static-mathquill-view","abraham","loadcss!./braille-example-row"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrailleExampleRow=void 0;var a=r.Components.For,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("tr",null,r.createElement(a,{each:function(){return e.getBrailleAscii(e.props.latex())},key:function(e){return e.key}},r.createElement("td",null,function(e){return r.createElement("span",{class:r.const("dcg-key-press")},function(){return e.char})})),r.createElement("td",{class:r.const("dcg-braille-font")},function(){return e.getBrailleUnicode(e.props.latex())}),r.createElement("td",null,r.createElement(i.default,{latex:function(){return e.props.latex()}})))},t.prototype.getBrailleAscii=function(e){for(var t=o.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(e)),n=[],r=0;r<t.length;r++)n.push({char:t[r],key:r+")"+t[r]});return n},t.prototype.getBrailleUnicode=function(e){var t;return"nemeth"===this.props.brailleMode()?t=o.latexToNemeth(e):"ueb"===this.props.brailleMode()&&(t=o.latexToUeb(e)),t&&t.value?t.value:""},t}(r.Class);t.BrailleExampleRow=s}),define("loadcss!basic/keypad/braille-keypad",function(){}),define("basic/keypad/braille-keypad",["require","exports","tslib","dcgview","basic/dcgview-basic","./braille-example-row","loadcss!./braille-keypad"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-braille-io-keypad-container":!0,"dcg-has-background-color":e.controller.hasBackgroundColor()}}},r.createElement("div",{class:r.const("dcg-braille-io-keypad")},r.createElement("div",{class:r.const("dcg-braille-description")},r.createElement("div",{class:r.const("dcg-braille-title")},function(){return e.controller.t("__mode__ is on!",{mode:e.brailleType()})}),r.createElement("div",{class:r.const("dcg-braille-info-text")},function(){return e.controller.t("Use a Refreshable Braille display, or just type Braille with a keyboard.")}),r.createElement("div",{class:r.const("dcg-blue-btn"),role:r.const("button"),tabindex:r.const(0),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"none"})}},function(){return e.controller.t("Turn __mode__ off",{mode:e.brailleType()})})),r.createElement("div",{class:r.const("dcg-braille-examples-table-container")},r.createElement("table",{class:r.const("dcg-braille-examples-table")},r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Type this")}),r.createElement("th",null,function(){return e.brailleType()}),r.createElement("th",null,function(){return e.controller.t("Typeset")})),r.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("2+2")}),r.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\frac{1}{2}")}),r.createElement(o.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\sqrt{4}")})),r.createElement("div",{class:r.const("dcg-more-examples-link")},r.createElement("a",{href:function(){return"https://www.desmos.com/braille-examples?"+e.controller.getBrailleMode()},target:r.const("_blank")},function(){return e.controller.t("View more examples")})))))},t.prototype.brailleType=function(){return"nemeth"===this.controller.getBrailleMode()?"Nemeth":"ueb"===this.controller.getBrailleMode()?"UEB":""},t}(i.DCGViewBasic);t.default=a}),define("loadcss!basic/expression-view",function(){}),define("basic/expression-view",["require","exports","tslib","keys","core/lib/label","dcgview","lib/i18n","jquery","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","./dcgview-basic","abraham","expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","loadcss!Abraham","loadcss!./expression-view"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var m=o.Components,g=m.If,y=m.Input,v=m.Textarea,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getAriaLabel=function(){var e=this.getIndex()+1+"";return this.t("Expression __index__",{index:e})},t.prototype.didUpdate=function(){this.renderAnsValue()},t.prototype.didMountMQ=function(e){this.$mq=s(e)},t.prototype.getExp=function(){return this.model.getExpressionById(this.props.id())},t.prototype.getAns=function(){return this.model.getExpressionAns(this.props.id())},t.prototype.getAnsId=function(){return this.model.getExpressionAnsId(this.props.id())},t.prototype.getLatex=function(){return this.getExp().latex},t.prototype.getValue=function(){return this.model.getExpressionValue(this.props.id())},t.prototype.getBraille=function(){var e=this.getExp().braille;if(""!==e)return e;var t=f.latexToBraille(this.getLatex(),this.controller.getBrailleMode());return t.isError?"":d.UnicodeBraille.toExpandedBrailleAscii(t.value)},t.prototype.getIndex=function(){return this.model.getExpressionIndex(this.props.id())},t.prototype.getShowEvaluation=function(){return this.model.shouldShowEvaluationForExpression(this.props.id())},t.prototype.isFractionEvaluation=function(){return this.getExp().displayAsFraction},t.prototype.canDisplayEvaluationAsFraction=function(){return this.controller.getDecimalToFraction()&&this.model.canDisplayEvaluationAsFraction(this.props.id())},t.prototype.shouldDisplayEvaluationAsFraction=function(){return this.canDisplayEvaluationAsFraction()&&this.getExp().displayAsFraction},t.prototype.toggleFractionEvaluation=function(){this.dispatch({type:"toggle-fraction-evaluation",id:this.props.id()})},t.prototype.getFractionDisplayAriaLabel=function(){return this.shouldDisplayEvaluationAsFraction()?this.controller.t("Displaying as fraction. Press Enter to display as Decimal"):this.controller.t("Displaying as decimal. Press Enter to display as Fraction")},t.prototype.getError=function(){var e=this.model.getExpressionError(this.props.id());return e&&this.getLatex().length>0?a.unpack(e,this.controller.getLanguage()):""},t.prototype.showError=function(){return!!this.getError()},t.prototype.getFractionMessage=function(){return this.shouldDisplayEvaluationAsFraction()?this.t("Convert to decimal."):this.t("Convert to fraction.")},t.prototype.getIsFocused=function(){return!this.controller.isSettingsMenuOpen()&&this.model.isExpressionFocused(this.props.id())},t.prototype.onFocusedChanged=function(e){this.getExp()&&(e?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))},t.prototype.onMQReflow=function(){this.renderedAnsData=void 0,this.renderAnsValue()},t.prototype.renderAnsValue=function(){var e=this;if(this.$mq){var t=this.getAns(),n=!1,r=this.getAnsId();if(r){var o=this.model.getExpressionById(r);n=o&&o.displayAsFraction}this.renderedAnsData&&this.renderedAnsData.value==t&&this.renderedAnsData.displayAsFraction===n||(this.renderedAnsData={value:t,displayAsFraction:n},this.$mq.find(".dcg-mq-ans").each(function(r,o){var a,c=s(o);"number"==typeof t?a=i.truncatedHTMLLabel(t,{digits:e.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:n}):"string"==typeof t&&(a=t),a?c.removeClass("dcg-invalid").html(a):c.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')}))}},t.prototype.getEvaluationLatex=function(){var e=this.getValue();if(void 0===e&&(e=NaN),this.model.isRationalizableConstant(this.props.id())&&!this.shouldDisplayEvaluationAsFraction())return"";if(!Array.isArray(e)){var t=i.truncatedLatexLabel(e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()});return"undefined"===t?"=\\mathrm{undefined}":"="+t}return"\\mathrm{"+e.length+"\\ element\\ list}"},t.prototype.getEvaluationBraille=function(){var e=this.getEvaluationLatex(),t=f.latexToBraille(e,this.controller.getBrailleMode());return t.isError?"":d.UnicodeBraille.toExpandedBrailleAscii(t.value)},t.prototype.didMountBrailleInput=function(e){this.brailleInputNode=e},t.prototype.didUnmountBrailleInput=function(){this.brailleInputNode=void 0},t.prototype.handleBrailleFocus=function(e){var t=e.target;t&&setTimeout(function(){t.setSelectionRange(0,0)})},t.prototype.handleBrailleKeydown=function(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(r.lookup(e)===r.UP?(this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),e.preventDefault()):r.lookup(e)===r.DOWN?(this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),e.preventDefault()):r.lookup(e)===r.ENTER?(this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),e.preventDefault()):r.lookup(e)===r.BACKSPACE&&document.activeElement===this.brailleInputNode&&""===this.getBraille()&&(this.dispatch({type:"backspace-from-braille"}),e.preventDefault()))},t.prototype.forceModelFocus=function(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)},t.prototype.focusBrailleInput=function(){this.brailleInputNode&&document.activeElement!==this.brailleInputNode&&this.brailleInputNode.focus()},t.prototype.getPostLabel=function(){if(this.showError())return this.getError();if(this.getShowEvaluation()){var e=this.getValue();return void 0===e&&(e=NaN),Array.isArray(e)?e.length+" element list":"equals "+i.truncatedAriaLabel(e,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()})}return""},t.prototype.onBrailleInput=function(e){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});var t=f.brailleToLatex(d.UnicodeBraille.coerceToSixDotCells(e),this.controller.getBrailleMode());this.dispatch({type:"update-latex-from-braille",latex:t.isError?"":t.value,braille:e,id:this.props.id()})},t.prototype.getIndexSubscript=function(){return"_{"+(this.getIndex()+1)+"}"},t.prototype.getEvaluationDigits=function(){return this.controller.isScientificCalc()?10:7},t.prototype.onMountContainer=function(e){this.containerNode=e},t.prototype.onTapContainer=function(e){e.target!==this.containerNode||this.getShowEvaluation()||this.showError()||this.forceModelFocus()},t.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{"dcg-basic-expression":!0,"dcg-focused":e.getIsFocused(),"dcg-braille-io":e.controller.renderAsBraille()}},onTap:this.bindFn(this.onTapContainer),onMount:this.bindFn(this.onMountContainer)},o.createElement(g,{predicate:function(){return e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-braille-input")},o.createElement(p.default,{ariaLabel:function(){var t=f.latexToBraille("eq"+e.getIndexSubscript(),e.controller.getBrailleMode());return t.isError?"":d.UnicodeBraille.toExpandedBrailleAscii(t.value)},didMount:e.bindFn(e.didMountBrailleInput),didUnmount:e.bindFn(e.didUnmountBrailleInput),onFocusedChanged:e.bindFn(e.onFocusedChanged),shouldFocus:e.bindFn(e.getIsFocused),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:e.bindFn(e.onBrailleInput),sixKeyInput:function(){return e.controller.getSixKeyInput()},value:function(){return e.getBraille()},isStatic:e.const(!1)}))}),o.createElement(g,{predicate:function(){return e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-braille-evaluation-container")},o.createElement(g,{predicate:function(){return e.getShowEvaluation()}},function(){return o.createElement("div",{class:o.const("dcg-braille-evaluation")},o.createElement(y,{readonly:e.const("true"),class:e.const("dcg-braille-evaluation-inner"),value:function(){return e.getEvaluationBraille()},onFocus:e.bindFn(e.handleBrailleFocus),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:function(){}}))}),o.createElement(g,{predicate:function(){return e.showError()}},function(){return o.createElement("div",{class:o.const("dcg-braille-error")},o.createElement("div",{class:o.const("dcg-basic-expression-error")},o.createElement("i",{class:o.const("dcg-icon-error")})),o.createElement(v,{readonly:e.const("true"),class:e.const("dcg-braille-error-inner"),value:function(){return e.getError()},onFocus:e.bindFn(e.handleBrailleFocus),onKeydown:e.bindFn(e.handleBrailleKeydown),onInput:function(){}}))}))}),o.createElement(g,{predicate:function(){return e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-exp-mathquill-container"),didMount:e.bindFn(e.didMountMQ),onTap:e.bindFn(e.forceModelFocus)},o.createElement(c.default,{latex:function(){return e.getLatex()},onReflow:e.bindFn(e.onMQReflow)}))}),o.createElement(g,{predicate:function(){return!e.controller.renderAsBraille()}},function(){return o.createElement("div",{class:o.const("dcg-exp-mathquill-container"),didMount:e.bindFn(e.didMountMQ)},o.createElement(l.default,{latex:function(){return e.getLatex()},onReflow:e.bindFn(e.onMQReflow),isFocused:e.bindFn(e.getIsFocused),capExpressionSize:function(){return e.controller.getCapExpressionSize()},config:e.const({typingAsteriskWritesTimesSymbol:e.controller.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:e.controller.getTypingSlashWritesDivisionSymbol(),disableCopyPaste:e.controller.getRestrictedEditing()}),getAriaLabel:function(){return e.getAriaLabel()},getAriaPostLabel:function(){return e.getPostLabel()},hasError:function(){return!1},onUserPressedKey:function(t,n){e.controller.isSettingsMenuOpen()&&e.controller.dispatch({type:"close-settings-menu"}),e.dispatch({type:"keypad/press-key",key:t,evt:n})},onUserTypedText:function(t){return e.dispatch({type:"keypad/type-text",text:t})},onUserChangedLatex:function(t){e.dispatch({type:"update-latex",id:e.props.id(),latex:t})},onFocusedChanged:e.bindFn(e.onFocusedChanged),disableSpace:function(){return e.controller.getRestrictedEditing()}}))}),o.createElement("div",{class:o.const("dcg-exp-output-container")},o.createElement(g,{predicate:function(){return e.showError()&&!e.controller.renderAsBraille()}},function(){return o.createElement(h.Tooltip,{tooltip:e.bindFn(e.getError),gravity:e.const("w"),targetClickBehavior:e.const("stick")},o.createElement("div",{class:o.const("dcg-basic-expression-error")},o.createElement("i",{class:o.const("dcg-icon-error")})))}),o.createElement(g,{predicate:function(){return e.getShowEvaluation()}},function(){return o.createElement("div",{class:function(){return{"dcg-basic-expression-value":!0,"dcg-basic-evaluation-gray":Array.isArray(e.getValue())}}},o.createElement(c.default,{latex:function(){return e.getEvaluationLatex()}}),o.createElement(g,{predicate:e.bindFn(e.canDisplayEvaluationAsFraction)},function(){return o.createElement(h.Tooltip,{tooltip:e.bindFn(e.getFractionMessage),gravity:e.const("sw"),offset:e.const({left:-5})},o.createElement("span",{role:o.const("button"),tabindex:o.const("0"),"aria-label":e.bindFn(e.getFractionDisplayAriaLabel),class:function(){return{"dcg-basic-fraction-toggle":!0,"dcg-selected":e.isFractionEvaluation()}},onTap:e.bindFn(e.toggleFractionEvaluation)},o.createElement("i",{class:o.const("dcg-icon-fraction")})))}))})))},t}(u.DCGViewBasic);t.default=b}),define("loadcss!basic/basic-list-view",function(){}),define("basic/basic-list-view",["require","exports","tslib","scroll_helpers","dcgview","./dcgview-basic","./expression-view","jquery","lib/conditional_blur","loadcss!./basic-list-view"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i.Components,u=l.For,d=l.If,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.didShowAnswerHint=!1,t.didHideAnswerHint=!1,t}return n.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-basic-list-container"),role:i.const("complementary"),"aria-label":function(){return e.controller.t("Expression List")},didMount:this.bindFn(this.didMountContainer)},i.createElement("div",{class:i.const("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder)},i.createElement(d,{predicate:this.bindFn(this.showAnswerHint)},function(){return i.createElement("div",{class:i.const("dcg-answer-hint")},function(){return e.controller.t("Your answers show up on this side.")})})),i.createElement(u,{each:function(){return e.model.getExpressionOrder()}},i.createElement("div",{class:function(){return{"dcg-basic-list":!0,"dcg-projector-mode":e.controller.isProjectorMode()}}},function(t){return i.createElement(a.default,{controller:e.props.controller,id:e.const(t)})})))},t.prototype.didMountPlaceholder=function(e){s(e).on("dcg-tap",c.default)},t.prototype.showAnswerHint=function(){if(this.didHideAnswerHint)return!1;var e=this.model.getExpressionOrder()[0];return!(!this.model.shouldShowEvaluationForExpression(e)&&!this.didShowAnswerHint)&&(this.didShowAnswerHint=!0,!(this.model.getNumberOfExpressions()>1||""===this.model.getExpressionLatex(e))||(this.didHideAnswerHint=!0,!1))},t.prototype.didUpdate=function(){if(this.$container){var e=this.$container.find(".dcg-focused");e.length>0&&r.scrollVisible(e,this.$container,50)}},t.prototype.didMountContainer=function(e){this.$container=s(e)},t}(o.DCGViewBasic);t.default=p}),define("loadcss!basic/main",function(){}),define("basic/main",["require","exports","tslib","browser","keys","dcgview","./dcgview-basic","jquery","./keypad/fourfunction-control-bar","./keypad/single-expression-fourfunction-control-bar","./keypad/scientific-control-bar","./keypad/single-expression-scientific-control-bar","./keypad/fourfunction-keypad","./keypad/single-expression-fourfunction-keypad","./keypad/single-expression-scientific-keypad","./keypad/scientific-keypad","./keypad/braille-keypad","./basic-list-view","lib/aria","touchtracking","loadcss!desmos-icons","loadcss!./main","loadcss!dcg-normalize"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var x=o.Components,E=x.If,w=x.IfElse,_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return o.createElement(E,{predicate:function(){return e.controller.shouldRender()}},function(){return o.createElement("div",{class:o.const("dcg-calculator-api-container"),style:o.const("width: 100%; height: 100%; position: relative;")},o.createElement("div",{class:function(){return{"dcg-calc-basic-main-wrapper":!0,"dcg-narrow":e.controller.containerSize.width<570,"dcg-short":e.controller.containerSize.height<=540,"dcg-scientific-calculator":e.controller.isScientificCalc(),"dcg-four-function-calculator":e.controller.isFourFunctionCalc(),"dcg-container":!0}},onKeydown:e.bindFn(e.handleRootKeydown),didMount:e.bindFn(e.didMountRoot),"x-ms-format-detection":o.const("none")},o.createElement("div",{role:o.const("application"),"aria-label":function(){return e.controller.isScientificCalc()?e.controller.t("Desmos Scientific Calculator"):e.controller.isFourFunctionCalc()?e.controller.t("Desmos Four-Function Calculator"):""},class:function(){return{"dcg-calc-basic-main":!0,"dcg-inverted-colors":e.controller.getInvertedColors(),"dcg-projector-mode":e.controller.isProjectorMode(),"dcg-ipad":r.IS_IPAD,"dcg-has-background-color":e.controller.hasBackgroundColor(),"dcg-no-hyperlinks":!e.controller.getAllowLinks()}},style:function(){return{"font-size":e.controller.getFontSize()+"px",background:e.controller.getBackgroundColor(),color:e.controller.getTextColor(),filter:e.controller.getInvertedColors()?"invert(100%)":"none"}}},o.createElement(y.default,{controller:e.props.controller}),o.createElement(E,{predicate:function(){return e.controller.isScientificCalc()&&e.model.isSingleExpression()}},function(){return o.createElement("div",null,o.createElement(d.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},w(function(){return e.controller.renderAsBraille()},{true:function(){return o.createElement(g.default,{controller:e.props.controller})},false:function(){return o.createElement(f.default,{controller:e.props.controller})}})))}),o.createElement(E,{predicate:function(){return e.controller.isScientificCalc()&&!e.model.isSingleExpression()}},function(){return o.createElement("div",null,o.createElement(u.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},w(function(){return e.controller.renderAsBraille()},{true:function(){return o.createElement(g.default,{controller:e.props.controller})},false:function(){return o.createElement(m.default,{controller:e.props.controller})}})))}),o.createElement(E,{predicate:function(){return e.controller.isFourFunctionCalc()&&e.model.isSingleExpression()}},function(){return o.createElement("div",null,o.createElement(l.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},w(function(){return e.controller.renderAsBraille()},{true:function(){return o.createElement(g.default,{controller:e.props.controller})},false:function(){return o.createElement(h.default,{controller:e.props.controller})}})))}),o.createElement(E,{predicate:function(){return e.controller.isFourFunctionCalc()&&!e.model.isSingleExpression()}},function(){return o.createElement("div",null,o.createElement(c.default,{controller:e.props.controller}),o.createElement("div",{class:o.const("dcg-basic-keypad-container")},w(function(){return e.controller.renderAsBraille()},{true:function(){return o.createElement(g.default,{controller:e.props.controller})},false:function(){return o.createElement(p.default,{controller:e.props.controller})}})))}))))})},t.prototype.didMountRoot=function(e){b.monitor(e)},t.prototype.handleRootKeydown=function(e){if(i.isUndo(e))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(i.isRedo(e))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(!e.metaKey&&!e.shiftKey)if(e.ctrlKey||e.altKey||i.lookup(e)!==i.BACKSPACE){if(e.ctrlKey===r.IS_APPLE&&e.altKey===!r.IS_APPLE){
var t=i.lookupChar(e);if("N"===t)return this.dispatch({type:"set-braille-mode",mode:"nemeth"}),v.alert(this.controller.t("Braille mode Nemeth")),!1;if("U"===t)return this.dispatch({type:"set-braille-mode",mode:"ueb"}),v.alert(this.controller.t("Braille mode UEB")),!1;if("Q"===t||"X"===t)return this.dispatch({type:"set-braille-mode",mode:"none"}),v.alert(this.controller.t("Braille mode off")),!1;if("6"===t){var n=!this.controller.getSixKeyInput();return this.dispatch({type:"set-six-key-input",mode:n}),v.alert(n?this.controller.t("Six Key Braille Input on"):this.controller.t("Six Key Braille Input off")),!1}}}else if(!document.activeElement||b.elIsFocusable(s(document.activeElement)))return!1;return!0},t}(a.DCGViewBasic);t.default=_}),define("api/basic",["require","exports","tslib","dcgview","./abstract","main/shared-worker-pool","basic/controller","basic/main","core/lib/color-helpers","underscore_model","core/lib/deepCopy","lib/console"],function(e,t,n,r,i,o,a,s,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BasicCalculator=void 0;var p=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype.init=function(e){var t=this;e=u.default(e),e.backgroundColor&&!c.isValidHexColor(e.backgroundColor)&&(d.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete e.backgroundColor),e.textColor&&!c.isValidHexColor(e.textColor)&&(d.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete e.textColor);var r=n.__assign({language:"en",qwertyKeyboard:!0,links:!0,degreeMode:!1,settingsMenu:!0,invertedColors:!1,backgroundColor:"#fff",textColor:"#000",brailleMode:"none",sixKeyInput:!1,brailleExpressionDownload:!0,projectorMode:!1,capExpressionSize:!1,functionDefinition:!0,autosize:!0,evaluationMode:"scientific",restrictedEditing:!1,additionalFunctions:["sqrt"],typingSlashWritesDivisionSymbol:!1,typingAsteriskWritesTimesSymbol:!1,decimalToFraction:!0,replaceCommaWith10Exp:!1,replaceRoundWithReciprocal:!1},e);this.settings=new l.UnderscoreModel;var i={workerPool:o.default,settingsProxy:this.settings};this.controller=new a.default(r,i),this.controller.onEventEmitted=function(e){"render"===e&&t.updateView(),t.triggerEvent(e,void 0)},this.setupDomChangeDetector(r.autosize)},t.prototype.onCreateView=function(){return r.mountToNode(s.default,this.rootElt,{controller:r.const(this.controller)})},t.prototype.setState=function(e,t){t||(t={}),this.controller.dispatch({type:"set-state-from-api",state:e,opts:{allowUndo:!!t.allowUndo}})},t.prototype.getState=function(){return u.default(this.controller.model.getPersistedState())},t.prototype.undo=function(){this.controller.dispatch({type:"undo",source:"api"})},t.prototype.redo=function(){this.controller.dispatch({type:"redo",source:"api"})},t.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-history"})},t.prototype.setBlank=function(e){e||(e={}),this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!e.allowUndo}})},t.prototype.updateSettings=function(e){if(null!=e)for(var t in e)switch(t){case"fontSize":var n=e[t];if(void 0===n)continue;this.controller.dispatch({type:"update-font-size",size:n});break;case"invertedColors":var r=e[t];if(void 0===r)continue;this.controller.dispatch({type:"update-inverted-colors",mode:r});break;case"backgroundColor":var i=e[t];if(void 0===i||!c.isValidHexColor(i)){d.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");continue}this.controller.dispatch({type:"update-background-color",color:i});break;case"textColor":var o=e[t];if(void 0===o||!c.isValidHexColor(o)){d.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",color:o});break;case"degreeMode":var a=e[t];if(void 0===a)continue;this.controller.dispatch({type:"update-degree-mode",mode:a});break;case"brailleMode":var s=e[t];this.controller.dispatch({type:"set-braille-mode",mode:s});break;case"sixKeyInput":var l=e[t];if(void 0===l)continue;this.controller.dispatch({type:"set-six-key-input",mode:l});break;case"brailleExpressionDownload":var u=e[t];if(void 0===u)continue;this.controller.dispatch({type:"set-braille-expression-download",mode:u});break;case"projectorMode":var p=e[t];if(void 0===p)continue;this.controller.dispatch({type:"update-projector-mode",mode:p});break;case"capExpressionSize":var h=e[t];if(void 0===h)continue;this.controller.dispatch({type:"update-cap-expression-size",mode:h});break;case"language":var f=e[t];if(void 0===f)continue;this.controller.dispatch({type:"update-language",language:f});break;case"settingsMenu":e.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"qwertyKeyboard":this.controller.dispatch({type:"update-options",options:{qwertyKeyboard:!!e.qwertyKeyboard}});var m=this.controller.getKeyboardMode();"qwerty"!==m&&"letters"!==m||this.controller.dispatch({type:"ABC"});break;case"functionDefinition":e.functionDefinition?this.controller.model.enableFunctionDefinition():this.controller.model.disableFunctionDefinition();break;case"links":this.controller.dispatch({type:"update-options",options:{links:!!e.links}});break;case"decimalToFraction":var g=e[t];if(void 0===g)continue;this.controller.dispatch({type:"update-decimal-to-fraction",mode:g});break;case"replaceCommaWith10Exp":var y=e[t];if(void 0===y)continue;this.controller.dispatch({type:"set-replace-comma-with-10-exp",replace:y});break;case"replaceRoundWithReciprocal":var v=e[t];if(void 0===v)continue;this.controller.dispatch({type:"set-replace-round-with-reciprocal",replace:v});break;case"restrictedEditing":this.controller.dispatch({type:"update-options",options:{restrictedEditing:!!e.restrictedEditing}});break;case"typingAsteriskWritesTimesSymbol":var b=e[t];if(void 0===b)continue;this.controller.dispatch({type:"set-typing-asterisk-writes-times-symbol",mode:b})}},t.prototype.focusFirstExpression=function(){this.controller.dispatch({type:"focus-first-expression"})},t.prototype.onResizeView=function(e){this.controller.dispatch({type:"ui/container-resized",size:e})},t.prototype.onDestroyView=function(){r.unmountFromNode(this.rootElt)},t.prototype.destroy=function(){this.controller.model.destroy(),e.prototype.destroy.call(this)},t}(i.default);t.BasicCalculator=p}),define("api/fourfunction",["require","exports","tslib","./basic","core/lib/deepCopy","lib/console"],function(e,t,n,r,i,o){"use strict";function a(e){if(e=i.default(e),e.hasOwnProperty("typingSlashWritesDivisionSymbol")||(e.typingSlashWritesDivisionSymbol=!0),e.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(e.typingAsteriskWritesTimesSymbol=!0),e.exponentButtonForSquareRoot&&(o.warn("As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: \"exponent\"' instead."),e.additionalFunctions=["exponent"]),e.additionalFunctions){var t=e.additionalFunctions;"string"==typeof t&&(t=[t]),t.length>2&&(o.warn("additionalFunctions can only take up to 2 new functions. Using the first two."),t=t.slice(0,2));for(var n=!0,r=0;r<t.length;r++)-1===["sqrt","exponent","percent"].indexOf(t[r])&&(o.warn("Unrecognized value: '"+t[r]+"' for 'additionalFunction'. Valid values are 'sqrt', 'percent', or 'exponent'. Using default (\"sqrt\")"),n=!1);e.additionalFunctions=n?t:["sqrt"]}return e.additionalFunctions&&e.additionalFunctions.length||(e.additionalFunctions=["sqrt"]),e.singleExpression?e.evaluationMode="singleExpressionFourFunction":e.evaluationMode="fourFunction",delete e.singleExpression,e.hasOwnProperty("decimalToFraction")||(e.decimalToFraction=!1),e}Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(n,r){var i=e.call(this,n)||this;return i instanceof t?(i.init(a(r||{})),i):new t(n,r)}return n.__extends(t,e),t}(r.BasicCalculator);t.default=s}),define("api/scientific",["require","exports","tslib","./basic","core/lib/deepCopy"],function(e,t,n,r,i){"use strict";function o(e){return e=i.default(e),e.singleExpression?e.evaluationMode="singleExpressionScientific":e.evaluationMode="scientific",delete e.singleExpression,e}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(n,r){var i=e.call(this,n)||this;return i instanceof t?(i.init(o(r||{})),i):new t(n,r)}return n.__extends(t,e),t}(r.BasicCalculator);t.default=a}),define("pillow-keypad/controller",["require","exports","flux","keypad/mq-commands","lib/i18n","dcgview-helpers/mathquill-view"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){var e=this;this.keyboardMode="main",this.dispatcher=new n.Dispatcher,this.t=function(e,t){return i.t(e,t)},this.dispatch=function(t){e.dispatcher.dispatch(t);for(var n;n=e._queuedCallbacks.shift();)n()},this._queuedCallbacks=[],this.dispatcher=new n.Dispatcher,this.hookUpDispatcher()}return e.prototype.getBackgroundColor=function(){return"does-not-matter"},e.prototype.runAfterDispatch=function(e){this._queuedCallbacks.push(e)},e.prototype.enqueueEvent=function(e){var t=this;this.runAfterDispatch(function(){t.onEventEmitted&&t.onEventEmitted(e)})},e.prototype.getKeyboardMode=function(){return this.keyboardMode},e.prototype.updateKeyboardMode=function(e){this.keyboardMode=e},e.prototype.typeIntoFocusedMathquill=function(e){e=e.replace(/\r|\n/g,"");var t=this.activeMQ;t&&(t.typedText(e),o.default.simulateUserChangedLatex(t))},e.prototype.pressKeyInFocusedMathquill=function(e,t){var n=this.activeMQ;if(n)return"Enter"===e?(t&&(t.preventDefault(),t.stopPropagation()),void this.enqueueEvent("enter")):void n.keystroke(e,t)},e.prototype.executeCommandInFocusedMathquill=function(e){var t=this.activeMQ;t&&r.execute(t,e)},e.prototype.hookUpDispatcher=function(){var e=this;this.dispatcher.register(function(t){switch(e.enqueueEvent("render"),t.type){case"hide-keypad":e.enqueueEvent("hide-keypad");break;case"set-active-mq":e.activeMQ=t.mq;break;case"keypad/shift":e.updateKeyboardMode("capitalQwerty"===e.keyboardMode?"qwerty":"capitalQwerty");break;case"main":e.updateKeyboardMode("main");break;case"ABC":e.updateKeyboardMode("qwerty");break;case"functions":e.updateKeyboardMode("functions");break;case"keypad/type-text":e.typeIntoFocusedMathquill(t.text);break;case"keypad/press-key":e.pressKeyInFocusedMathquill(t.key,t.evt);break;case"keypad/custom-command":e.executeCommandInFocusedMathquill(t.command);break;case"keypad/123":case"keypad/abc":break;default:return t}})},e}();t.default=a}),define("pillow-keypad/dcgview-pillow-keypad",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DCGViewPillowKeypad=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.t=this.controller.t},t}(r.Class);t.DCGViewPillowKeypad=i}),define("pillow-keypad/main-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(o.default,{controller:this.props.controller},r.createElement(a.default,null,i.view(this,"left",{style:"highlight"}),i.view(this,"right",{style:"highlight"}),i.view(this,"x"),i.view(this,"y"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"7",{style:"highlight"}),i.view(this,"8",{style:"highlight"}),i.view(this,"9",{style:"highlight"}),i.view(this,"/"),i.view(this,"backspace",{style:"highlight"})),r.createElement(a.default,null,i.view(this,"("),i.view(this,")"),i.view(this,"<"),i.view(this,">"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"4",{style:"highlight"}),i.view(this,"5",{style:"highlight"}),i.view(this,"6",{style:"highlight"}),i.view(this,"*"),i.view(this,"pi")),r.createElement(a.default,null,i.view(this,"sqrt"),i.view(this,","),i.view(this,"<="),i.view(this,">="),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"1",{style:"highlight"}),i.view(this,"2",{style:"highlight"}),i.view(this,"3",{style:"highlight"}),i.view(this,"-"),i.view(this,"enter",{style:"tall-blue"})),r.createElement(a.default,null,i.view(this,"a^2"),i.view(this,"a^b"),i.view(this,"|a|"),i.view(this,"a/b"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"0",{style:"highlight"}),i.view(this,".",{style:"highlight"}),i.view(this,"="),i.view(this,"+"),i.spacer(1)))},t}(s.DCGViewPillowKeypad);t.default=c}),define("pillow-keypad/qwerty-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(o.default,{controller:this.props.controller},r.createElement(a.default,null,i.view(this,"q"),i.view(this,"w"),i.view(this,"e"),i.view(this,"r"),i.view(this,"t"),i.view(this,"y"),i.view(this,"u"),i.view(this,"i"),i.view(this,"o"),i.view(this,"p")),r.createElement(a.default,null,r.createElement("div",{class:r.const("dcg-half-width-placeholder")}),i.view(this,"a"),i.view(this,"s"),i.view(this,"d"),i.view(this,"f"),i.view(this,"g"),i.view(this,"h"),i.view(this,"j"),i.view(this,"k"),i.view(this,"l"),r.createElement("div",{class:r.const("dcg-half-width-placeholder")})),r.createElement(a.default,null,i.view(this,"shift",{style:"highlight"}),i.view(this,"z"),i.view(this,"x"),i.view(this,"c"),i.view(this,"v"),i.view(this,"b"),i.view(this,"n"),i.view(this,"m"),i.view(this,","),i.view(this,"backspace",{style:"highlight"})),r.createElement(a.default,null,i.view(this,"="),i.view(this,"{"),i.view(this,"}"),i.view(this,"["),i.view(this,"]"),i.view(this,"!"),i.view(this,"'"),i.view(this,"pi"),i.view(this,"enter",{style:"blue"})))},t}(s.DCGViewPillowKeypad);t.default=c}),define("pillow-keypad/capital-qwerty-keypad",["require","exports","tslib","dcgview","./dcgview-pillow-keypad","keypad/keys","keypad/keypad","keypad/row"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(a.default,{controller:this.props.controller},r.createElement(s.default,null,o.view(this,"Q"),o.view(this,"W"),o.view(this,"E"),o.view(this,"R"),o.view(this,"T"),o.view(this,"Y"),o.view(this,"U"),o.view(this,"I"),o.view(this,"O"),o.view(this,"P")),r.createElement(s.default,null,r.createElement("div",{class:r.const("dcg-half-width-placeholder")}),o.view(this,"A"),o.view(this,"S"),o.view(this,"D"),o.view(this,"F"),o.view(this,"G"),o.view(this,"H"),o.view(this,"J"),o.view(this,"K"),o.view(this,"L"),r.createElement("div",{class:r.const("dcg-half-width-placeholder")})),r.createElement(s.default,null,o.view(this,"shift",{style:"highlight"}),o.view(this,"Z"),o.view(this,"X"),o.view(this,"C"),o.view(this,"V"),o.view(this,"B"),o.view(this,"N"),o.view(this,"M"),o.view(this,","),o.view(this,"backspace",{style:"highlight"})),r.createElement(s.default,null,o.view(this,"="),o.view(this,"("),o.view(this,")"),o.view(this,"["),o.view(this,"]"),o.view(this,"!"),o.view(this,"'"),o.view(this,"pi"),o.view(this,"enter",{style:"blue"})))},t}(i.DCGViewPillowKeypad);t.default=c}),define("pillow-keypad/functions-keypad",["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(o.default,{controller:this.props.controller},r.createElement(a.default,null,i.view(this,"sin"),i.view(this,"cos"),i.view(this,"tan"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"ln"),i.view(this,"log"),i.view(this,"backspace",{style:"highlight"})),r.createElement(a.default,null,i.view(this,"arcsin"),i.view(this,"arccos"),i.view(this,"arctan"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"e^x"),i.view(this,"abs"),i.view(this,"round")),r.createElement(a.default,null,i.view(this,"mean"),i.view(this,"stdev"),i.view(this,"stdevp"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"a^b"),i.view(this,"sqrt"),i.view(this,"nthroot")),r.createElement(a.default,null,i.view(this,"nPr"),i.view(this,"nCr"),i.view(this,"!"),r.createElement("div",{class:r.const("dcg-partition-placeholder")}),i.view(this,"e"),i.view(this,"%"),i.view(this,"enter",{style:"blue"})))},t}(s.DCGViewPillowKeypad);t.default=c}),define("pillow-keypad/control-bar",["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./dcgview-pillow-keypad"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this.props.controller();return r.createElement(i.default,{controller:this.props.controller},r.createElement(o.default,{command:this.const("main"),selected:function(){return"main"===e.getKeyboardMode()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return e.dispatch({type:"main"})}},function(){return e.t("main")}),r.createElement(o.default,{command:this.const("ABC"),selected:function(){return-1!==["qwerty","capitalQwerty"].indexOf(e.getKeyboardMode())},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return e.t("A B C")},onTap:function(){return e.dispatch({type:"ABC"})}},function(){return e.t("abc")}),r.createElement(o.default,{command:this.const("functions"),selected:function(){return-1!==["functions","restrictedFunctions"].indexOf(e.getKeyboardMode())},ariaLabel:function(){return e.t("Functions")},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return e.dispatch({type:"functions"})}},function(){return e.t("func")}),r.createElement("div",{class:r.const("dcg-hide-keypad-button"),"dcg-command":r.const("hide-keypad"),onTap:function(){return e.dispatch({type:"hide-keypad"})}},r.createElement("i",{class:r.const("dcg-icon-hide")})))},t}(a.DCGViewPillowKeypad);t.default=s}),define("loadcss!pillow-keypad/main",function(){}),define("pillow-keypad/main",["require","exports","tslib","dcgview","./dcgview-pillow-keypad","./main-keypad","./qwerty-keypad","./capital-qwerty-keypad","./functions-keypad","./control-bar","touchtracking","loadcss!./main"],function(e,t,n,r,i,o,a,s,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=r.Components.Switch,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-calculator-api-container"),style:r.const("width: 100%; height: 100%; position: relative;")},r.createElement("div",{class:r.const("dcg-do-not-blur dcg-container dcg-api-shared-keypad-root"),didMount:this.bindFn(this.didMountRoot)},r.createElement(l.default,{controller:this.props.controller}),r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.t("keypad")}},r.createElement(d,{key:function(){return e.controller.getKeyboardMode()}},function(t){switch(t){case"qwerty":return r.createElement(a.default,{controller:e.props.controller});case"capitalQwerty":return r.createElement(s.default,{controller:e.props.controller});case"functions":return r.createElement(c.default,{controller:e.props.controller});default:return r.createElement(o.default,{controller:e.props.controller})}}))))},t.prototype.didMountRoot=function(e){u.monitor(e)},t}(i.DCGViewPillowKeypad);t.default=p});define("api/pillow-keypad",["require","exports","tslib","dcgview","./abstract","pillow-keypad/controller","pillow-keypad/main"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(n){var r=e.call(this,n)||this;return r instanceof t?(r.init(),r):new t(n)}return n.__extends(t,e),t.prototype.init=function(){var e=this;this.controller=new o.default,this.controller.onEventEmitted=function(t){"render"===t&&e.updateView(),e.triggerEvent(t,void 0)},this.setupDomChangeDetector(!0)},t.prototype.setActiveMathquill=function(e){this.controller.dispatch({type:"set-active-mq",mq:e})},t.prototype.onCreateView=function(){return r.mountToNode(a.default,this.rootElt,{controller:r.const(this.controller)})},t.prototype.onResizeView=function(e){},t.prototype.onDestroyView=function(){r.unmountFromNode(this.rootElt)},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(i.default);t.default=s}),define("core/cl-calculator",["require","exports","core/graphing-calc/migrate-state","core/graphing-calc/json/expression","core/graphing-calc/json/table"],function(e,t,n,r,i){"use strict";function o(e){function t(e){switch(e.type){case void 0:case"expression":var t=r.computeParsableState(r.inflateDefaults(e));a[t.id]=t;break;case"table":var t=i.computeParsableState(i.inflateDefaults(e));a[t.id]=t;break;case"folder":case"text":case"image":break;default:return e}}for(var o=n.migrateToLatest(e),a={},s=o.graph.degreeMode,c=o.randomSeed,l=0,u=o.expressions.list;l<u.length;l++){t(u[l])}return{setExpression:function(e){t(e)},getChangeSet:function(){return{statements:a,isCompleteState:!0,degreeMode:s,globalRandomSeed:c}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.CLCalculator=void 0,t.CLCalculator=o}),define("core/math/tree-queries/count-numbers",["require","exports"],function(e,t){"use strict";function n(e,t){switch(e.type){case"Mul":case"Div":case"Prime":case"Call":case"ImplicitCall":case"Dot":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"Paren":case"Juxt":case"Superscript":case"Bang":case"Index":case"Equals":case"Inequality":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":for(var r=0,i=0,o=e.args;i<o.length;i++){r+=n(o[i],t)}return r;case"Decimal":return void 0===t?1:parseFloat(e.val)===t?1:0;case"MixedNumber":if(void 0===t)return 3;var r=0;return parseFloat(e.whole)===t&&(r+=1),parseFloat(e.num)===t&&(r+=1),parseFloat(e.den)===t&&(r+=1),r;case"Letter":case"EmptyPiecewise":case"Cmd":case"EmptyRangeEnd":return 0;case"Subscript":return n(e.args[0],t);case"InequalityChain":var r=0;r+=n(e.first,t);for(var a=0,s=e.chain;a<s.length;a++){r+=n(s[a].args[0],t)}return r;default:throw"Unexpected surface node "+e.type+"."}}Object.defineProperty(t,"__esModule",{value:!0}),t.countNumbers=void 0,t.countNumbers=n}),define("core/graphing-calc/diffs/longest-subsequence",["require","exports"],function(e,t){"use strict";function n(e){for(var t=e.length,n=new Array(t),r=new Array(t+1),i=0,o=0;o<t;o++){var a=void 0;if(e[r[i]]<e[o])a=i+1;else{for(var s=1,c=i-1;s<=c;){var l=Math.ceil((s+c)/2);e[r[l]]<e[o]?s=l+1:c=l-1}a=s}n[o]=r[a-1],r[a]=o,a>i&&(i=a)}for(var u=new Array(i),d=r[i],o=i-1;o>=0;o--)u[o]=e[d],d=n[d];return u}Object.defineProperty(t,"__esModule",{value:!0}),t.findLongestSubsequence=void 0,t.findLongestSubsequence=n}),define("core/graphing-calc/diffs/calculate-diff",["require","exports","underscore","./longest-subsequence"],function(e,t,n,r){"use strict";function i(e,t){return o(e,t,d.ROOT)}function o(e,t,n){var r={};for(var i in e)if(e.hasOwnProperty(i))if(t.hasOwnProperty(i)){var o=e[i],s=t[i],c=a(o,s,n,i);c&&(r[i]=c)}else r[i]={d:1};for(var i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(r[i]={s:t[i]});return r}function a(e,t,r,i){if(n.isArray(e)&&n.isArray(t)){if(r===d.EXPRESSIONS&&"list"===i||r===d.TABLE_EXPRESSION&&"columns"===i)return c(e,t);if(!n.isEqual(e,t))return{s:t}}else if(n.isObject(e)&&n.isObject(t)){var a=o(e,t,s(r,i));if(!n.isEmpty(a))return{e:a}}else if(!n.isEqual(e,t))return{s:t}}function s(e,t){return e===d.ROOT&&"expressions"===t?d.EXPRESSIONS:d.OTHER}function c(e,t){for(var r={},i={},a=0;a<e.length;a++){if(void 0!==i[e[a].id])return{s:t};i[e[a].id]=a}for(var s={},a=0;a<t.length;a++){if(void 0!==s[t[a].id])return{s:t};s[t[a].id]=a}for(var c=u(e,t,i),p=0,h=0;h<e.length;h++){var f=e[h];if(c[f.id]){var m=s[f.id],g=t[m],y={};if(p!==m&&(y.a=t.slice(p,m).map(function(t){return l(e,i,t)})),!n.isEqual(f,g)){var v="table"===f.type&&"table"===g.type;y.e=o(f,g,v?d.TABLE_EXPRESSION:d.OTHER)}n.isEmpty(y)||(r[h]=y),p=m+1}else r[h]={d:1}}if(p<t.length&&(r[e.length]={a:t.slice(p,t.length).map(function(t){return l(e,i,t)})}),!n.isEmpty(r))return{l:r}}function l(e,t,r){if(t[r.id]){var i=e[t[r.id]],a={f:t[r.id]};return n.isEqual(i,r)||(a.e=o(i,r,d.OTHER)),{m:a}}return{s:r}}function u(e,t,n){for(var i={},o=t.filter(function(e){return void 0!==n[e.id]}).map(function(e){return n[e.id]}),a=r.findLongestSubsequence(o),s=0,c=a;s<c.length;s++){i[e[c[s]].id]=!0}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateDiff=void 0;var d;!function(e){e[e.ROOT=0]="ROOT",e[e.EXPRESSIONS=1]="EXPRESSIONS",e[e.TABLE_EXPRESSION=2]="TABLE_EXPRESSION",e[e.OTHER=3]="OTHER"}(d||(d={})),t.calculateDiff=i}),define("core/graphing-calc/diffs/apply-diff",["require","exports","underscore","../../lib/deepCopy"],function(e,t,n,r){"use strict";function i(e,t){return o(r.default(e),t)}function o(e,t){for(var r=0,i=n.keys(t);r<i.length;r++){var s=i[r],p=t[s];c(p)?e[s]=p.s:l(p)?delete e[s]:u(p)?e[s]=a(e[s],p.l):d(p)&&(e[s]=o(e[s],p.e))}return e}function a(e,t){for(var n=[],r=0;r<e.length;r++){var i=t[r];i&&i.a&&n.push.apply(n,s(e,i.a)),i&&i.e?n.push(o(e[r],i.e)):i&&i.d||n.push(e[r])}var a=t[e.length];return a&&a.a&&n.push.apply(n,s(e,a.a)),n}function s(e,t){for(var n=[],r=0,i=t;r<i.length;r++){var a=i[r];if(p(a))n.push(a.s);else if(h(a)){var s=e[a.m.f];a.m.e?n.push(o(s,a.m.e)):n.push(s)}}return n}function c(e){return e.hasOwnProperty("s")}function l(e){return e.hasOwnProperty("d")}function u(e){return e.hasOwnProperty("l")}function d(e){return e.hasOwnProperty("e")}function p(e){return e.hasOwnProperty("s")}function h(e){return e.hasOwnProperty("m")}Object.defineProperty(t,"__esModule",{value:!0}),t.applyDiff=void 0,t.applyDiff=i}),define("core/mathtools",["require","exports","parser","core/math/context","core/math/builtinframe","core/math/types","parsenodes","core/cl-calculator","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/tree-queries/count-numbers","core/lib/color-helpers","core/math/policyGraphing","core/math/policyScientific","core/math/policyFourFunction","core/lib/label","core/graphing-calc/diffs/calculate-diff","core/graphing-calc/diffs/apply-diff","core/graphing-calc/migrate-state"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g,y,v){"use strict";function b(e,t){return void 0!==e&&null!==e||(e=""),n.parse(e,t)}function x(e){if(void 0!==e&&null!==e)return l.parse(c.parse(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.migrateToLatest=t.applyDiff=t.calculateDiff=t.CLCalculator=t.colorHelpers=t.policies=t.parseNodes=t.types=t.builtInFrame=t.context=t.treeQueries=t.expressionParser=t.parser=t.Label=void 0,Object.defineProperty(t,"CLCalculator",{enumerable:!0,get:function(){return s.CLCalculator}}),t.colorHelpers=d,t.Label=m,Object.defineProperty(t,"calculateDiff",{enumerable:!0,get:function(){return g.calculateDiff}}),Object.defineProperty(t,"applyDiff",{enumerable:!0,get:function(){return y.applyDiff}}),Object.defineProperty(t,"migrateToLatest",{enumerable:!0,get:function(){return v.migrateToLatest}}),t.parser={parse:b},t.expressionParser={parse:x},t.treeQueries={countNumbers:u.countNumbers},t.context=r,t.builtInFrame=i,t.types=o,t.parseNodes=a,t.policies={graphing:p.PolicyGraphing,scientific:h.PolicyScientific,fourFunction:f.PolicyFourFunction}}),define("api/calculator",["require","exports","mathquill","tslib","graphing/clipping","expressions/colors","graphing-calc/api/sanitize-expression","core/graphing-calc/json/graph-settings","main/font_sizes","expressions/image_file_to_data_url","./graphing","./headless","./fourfunction","./scientific","./pillow-keypad","core/mathtools"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m){"use strict";function g(e){var t=v.enabledFeatures;return!t||t[e]}function y(e){t.DesmosAPI[e]=function(){throw new Error("The Desmos "+e+" is not enabled for this API key.")}}Object.defineProperty(t,"__esModule",{value:!0}),t.Calculator=t.HeadlessGraphingCalculator=t.PillowKeypad=t.FourFunctionCalculator=t.ScientificCalculator=t.GraphingCalculator=t.DesmosAPI=void 0;var v;"undefined"!=typeof Desmos?v=Desmos:(v={},window.Desmos=v),t.GraphingCalculator=u.default,t.HeadlessGraphingCalculator=d.default,t.FourFunctionCalculator=p.default,t.ScientificCalculator=h.default,t.PillowKeypad=f.default,t.DesmosAPI={Colors:{RED:o.RED,BLUE:o.BLUE,GREEN:o.GREEN,ORANGE:o.ORANGE,PURPLE:o.PURPLE,BLACK:o.BLACK},imageFileToDataURL:l.imageFileToDataURL,supportedLanguages:v.locales?Object.keys(v.locales):[],Styles:r.__assign(r.__assign({},a.SanitizedLineStyle),a.SanitizedPointStyle),ColumnModes:a.SanitizedColumnMode,DragModes:a.SanitizedDragMode,AxisArrowModes:s.AxisArrowModes,FontSizes:c,LabelSizes:a.SanitizedLabelSize,LabelOrientations:a.SanitizedLabelOrientation,GraphingCalculator:u.default,Calculator:u.default,FourFunctionCalculator:p.default,ScientificCalculator:h.default,Private:{Mathtools:m,Graphtools:{getClippingGraphType:i.getClippingGraphType,mapSegmentToCanvas:i.mapSegmentToCanvas}},MathQuill:n,PillowKeypad:f.default,HeadlessGraphingCalculator:d.default},g("GraphingCalculator")||(y("GraphingCalculator"),y("Calculator")),g("FourFunctionCalculator")||y("FourFunctionCalculator"),g("ScientificCalculator")||y("ScientificCalculator");for(var b in t.DesmosAPI)t.DesmosAPI.hasOwnProperty(b)&&(v[b]=t.DesmosAPI[b]);t.Calculator=u.default}),define("main/external-login-popup",["require","exports","./backend"],function(e,t,n){"use strict";function r(e,t){e.closed?t.askServerIfLoggedIn():setTimeout(function(){r(e,t)},1e3)}function i(e){var t=window.open(e.url,"login_window","width=650,height=530,resizable,scrollbars");t?r(t,e.userController):alert(e.blockedMessage)}function o(e,t){window.userController=e,e.observeEvent("googleLogin",function(r,o){i({url:n.getGoogleLoginURL(o),userController:e,blockedMessage:t("Login window blocked. Please allow popups from desmos.com to sign in with Google.")})}),e.observeEvent("appleLogin",function(r,o){i({url:n.getAppleLoginURL(o),userController:e,blockedMessage:t("Login window blocked. Please allow popups from desmos.com to sign in with Apple")})})}Object.defineProperty(t,"__esModule",{value:!0}),t.listenForLoginRequests=void 0,t.listenForLoginRequests=o}),define("loadcss!tipsycss",function(){}),define("jquery.tipsy",["require","loadcss!tipsycss","jquery","keys"],function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e,t){this.id=h++,this.$element=a(e),this.options=t,this.fixTitle()}function r(){return 0!==f}function i(){f--}function o(){f++}e("loadcss!tipsycss");var a=e("jquery"),s=e("keys"),c=null,l=!1,u=0,d={},p=500;a(document).on("dcg-tap",".tipsy-sticky",function(e){if(l)return void(l=!1);var t=e.currentTarget,r=a(t);if(r.attr("tooltip")||(r=r.find("[tooltip]").filter(':not([tooltip=""])')),1===r.length&&"none"!==r.css("display")&&!r.parents().filter(function(){return"none"===a(this).css("display")
}).length){var i=a.extend({},a.fn.tipsy.defaults);r.attr("tipsy-dir")?i.gravity=r.attr("tipsy-dir"):i.gravity="nw",i.fade=!1,c=new n(r[0],i),c.isOpenSticky=!0,c.renderVisible(),c.opener=t}}),a(document).on("dcg-tapstart keydown",function(e){if("keydown"!==e.type||s.lookup(e)!==s.ESCAPE){if(c){c.clearTooltip();var t=c.opener;"dcg-tapstart"===e.type&&a(e.target).closest(t).length&&a(document).one("dcg-tapend",function(e){a(e.target).closest(t).length&&(l=!0)}),c=null}}else for(var n in d)d[n].clearTooltip()});var h=0;n.prototype={_show:function(){var e=this.getTitle();if(e&&!r()){var n=this.tip(),i=n.find(".tipsy-arrow");this.uuid=u,u++,a(document).on("scroll.tipsy"+this.uuid,this.clearTooltip.bind(this)),n.find(".tipsy-inner")[this.options.html?"html":"text"](e),n[0].className="tipsy",n.detach().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var o,s=this.$element[0],c=this.$tip[0],l=s.getBoundingClientRect(),d=c.getBoundingClientRect(),p=d.width,h=d.height,f=t(this.options.gravity,this.$element[0]);switch(f.charAt(0)){case"n":o={top:l.top+l.height+this.options.offset,left:l.left+l.width/2-p/2};break;case"s":o={top:l.top-h-this.options.offset,left:l.left+l.width/2-p/2};break;case"e":o={top:l.top+l.height/2-h/2,left:l.left-p-this.options.offset};break;case"w":o={top:l.top+l.height/2-h/2,left:l.left+l.width+this.options.offset}}2==f.length&&("w"==f.charAt(1)?o.left=l.left+l.width/2-15:o.left=l.left+l.width/2-p+15);var m=0;o.left<0?(m=o.left,o.left=0):o.left+p>window.innerWidth&&(m=o.left+p-window.innerWidth,o.left=window.innerWidth-p),"n"!==f&&"s"!==f||(m-=5);var g=l.width/s.offsetWidth,y=l.height/s.offsetHeight;o.top/=y,o.left/=g,m/=g,i.css("marginLeft",m),n.css(o).addClass("tipsy-"+f),i[0].className="tipsy-arrow tipsy-arrow-"+f.charAt(0),this.options.fade?n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:1},"fast"):n.css({visibility:"visible",opacity:1}),this.options.sticky&&n.addClass("tipsy-temporary-sticky");var v=this,b=function(){v.validate(),v.validateTimeout=setTimeout(b,100)};b()}},_hide:function(){clearTimeout(this.validateTimeout),a(document).off("scroll.tipsy"+this.uuid),this.options.fade?this.tip().stop().fadeOut("fast",function(){a(this).detach()}):this.tip().detach()},clearTooltip:function(){delete this.buttonHoverTime,this.tooltipIsHovered=!1,this.isOpenSticky=!1,this.renderVisible()},renderVisible:function(){var e=!!this.renderedVisible,t=!!this.tooltipIsHovered||!!this.isOpenSticky;this.buttonHoverTime&&(e?t=!0:Date.now()-this.buttonHoverTime>=p&&(t=!0)),t!==e&&(this.renderedVisible=t,t?(d[this.id]=this,this._show()):(delete d[this.id],this._hide()))},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;return this.fixTitle(),n=this.options,"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),e&&(e=(""+e).replace(/(^\s*|\s*$)/,"")),e||""},tip:function(){return this.$tip||(this.$tip=a('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>'),this.$tip.on("tipsyshow",function(){clearTimeout(this.tooltipOutTimeout),this.tooltipIsHovered=!0,this.renderVisible()}.bind(this)),this.$tip.on("tipsyhide",function(){clearTimeout(this.tooltipOutTimeout),this.tooltipOutTimeout=setTimeout(function(){this.tooltipIsHovered=!1,this.renderVisible()}.bind(this),100)}.bind(this))),this.$tip},validate:function(){var e=!!this.getTitle(),t=!1;if(e)try{for(var n=this.$element[0];n;){if(n===document){t=!0;break}n=n.parentNode}}catch(e){}t||this.clearTooltip()}},a.fn.tipsy=function(e){function t(t){var r=a.data(t,"tipsy");return r||(r=new n(t,a.fn.tipsy.elementOptions(t,e)),a.data(t,"tipsy",r)),r}function r(e){if(("tipsyshow"!==e.type||e.target===this)&&c!==this){var n=t(this);clearTimeout(n.buttonTimeout),n.buttonHoverTime=Date.now(),n.buttonTimeout=setTimeout(function(){n.renderVisible()},p)}}function i(e){if("tipsyhide"!==e.type||e.target===this){var n=t(this);"dcg-tapstart"===e.type&&n.options.sticky||(clearTimeout(n.buttonTimeout),n.buttonTimeout=setTimeout(function(){delete n.buttonHoverTime,n.renderVisible()},100))}}if(!0===e)return this.data("tipsy");if("string"==typeof e){var o=this.data("tipsy");return o&&o[e](),this}e=a.extend({},a.fn.tipsy.defaults,e);var s="tipsyhide dcg-tapstart dcg-tapend dcg-tapcancel";return e.delegate?this.on("tipsyshow",e.delegate,r).on(s,e.delegate,i):this.on("tipsyshow",r).on(s,i),this},a.fn.tipsy.defaults={fade:!0,gravity:"n",html:!1,offset:0,title:"tooltip"},a.fn.tipsy.elementOptions=function(e,t){t=a.extend({},t);var n=a(e).attr("tipsy-gravity");n&&(t.gravity=n);var r=parseInt(a(e).attr("tipsy-offset"),10);return isNaN(r)||(t.offset=r),t},a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"},a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"},a.fn.tipsy.autoBounds=function(e,t){return function(){var n={ns:t[0],ew:t.length>1&&t[1]},r=a(document).scrollTop()+e,i=a(document).scrollLeft()+e,o=a(this);return o.offset().top<r&&(n.ns="n"),o.offset().left<i&&(n.ew="w"),a(window).width()+a(document).scrollLeft()-o.offset().left<e&&(n.ew="e"),a(window).height()+a(document).scrollTop()-o.offset().top<e&&(n.ns="s"),n.ns+(n.ew?n.ew:"")}},a(document).tipsy({delegate:".tipsy-sticky",gravity:"nw",fade:!1,sticky:!0});var f=0;return{isDisabled:r,removeDisableLock:i,addDisableLock:o}}),define("shared-header/hamburger",["require","exports","tslib","browser","dcgview","jquery","jquery.tipsy"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hamburger=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement("span",{role:i.const("button"),tabindex:i.const(0),"aria-label":function(){return e.openGraphText()},class:i.const("dcg-header-btn dcg-action-opendrawer dcg-tooltip"),tooltip:function(){return e.openGraphText()},onTap:function(t){return e.props.controller().dispatch({type:"open-mygraphs",device:t.device})},didMount:function(t){return e.hookupTooltip(t)}},i.createElement("i",{class:i.const("dcg-icon-hamburger")}))},t.prototype.hookupTooltip=function(e){this.props.tooltip()&&o(e).tipsy()},t.prototype.openGraphText=function(){var e=this.props.controller().getOpenText();return r.IS_APPLE?this.props.controller().t("__open_graph__ (cmd+o)",{open_graph:e}):this.props.controller().t("__open_graph__ (ctrl+o)",{open_graph:e})},t}(i.Class);t.Hamburger=a}),define("shared-header/accounts",["require","exports","tslib","dcgview","jquery"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accounts=void 0;var o=r.Components.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this,t=this.props.controller().userController;return r.createElement("span",null,r.createElement(o,{predicate:function(){return t.isLoggedIn()&&!e.props.disableAccounts()}},function(){return r.createElement("span",null,r.createElement(o,{predicate:function(){return t.isLoggingOut()}},function(){return r.createElement("span",{class:r.const("logout-progress-notice")},r.createElement("span",{class:r.const("dcg-spinner-dark")}))}),r.createElement(o,{predicate:function(){return!t.isLoggingOut()&&!e.props.disableAccounts()}},function(){return r.createElement("span",{class:r.const("dcg-account-link"),"dcg-menu-button":r.const("account"),role:r.const("button"),tabindex:r.const(0),"aria-haspopup":r.const("true"),"aria-expanded":r.const("false"),"aria-label":r.const("Account Information"),onTap:function(t){if(e.props.controller().dispatch({type:"toggle-menu",payload:"account"}),"keyboard"==t.device){var n="account"===e.props.controller().getOpenMenu();i(n?".dcg-action-accountsettings":".dcg-account-link").focus()}}},r.createElement("span",{class:r.const("email")},r.createElement("div",{class:r.const("header-account-name dcg-variable-name")},function(){return t.getFirstName()}),r.createElement("i",{class:r.const("dcg-icon-caret-down")})))}))}),r.createElement(o,{predicate:function(){return!t.isLoggedIn()&&!e.props.disableAccounts()}},function(){return r.createElement("span",{class:r.const("dcg-login")},r.createElement("a",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-create-account dcg-btn dcg-btn-green dcg-action-createaccount"),onTap:function(t){e.props.controller().dispatch({type:"create-account",device:t.device})}},function(){return e.props.controller().t("Create Account")}),function(){return e.props.controller().t("or")},r.createElement("a",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-sign-in dcg-action-login"),onTap:function(t){e.props.controller().dispatch({type:"launch-login",device:t.device})}},function(){return e.props.controller().t("Sign In")}))}))},t}(r.Class);t.Accounts=a}),define("shared-header/header-toast",["require","exports","tslib","dcgview","main/toast-view"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderToast=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement(i.ToastView,{message:this.bindFn(this.getMessage),t:this.bindFn(this.t),onClose:function(){return e.graphsController().dismissSaveError()},showUndo:this.const(!1),showLearnMore:this.const(!1),toastStyle:this.bindFn(this.getStyle),noAria:this.const(!1),showClose:this.bindFn(this.showClose)})},t.prototype.t=function(e){return this.props.controller().t(e)},t.prototype.graphsController=function(){return this.props.controller().graphsController},t.prototype.getStyle=function(){return this.graphsController().didSaveFail()?"error":void 0},t.prototype.showClose=function(){return this.graphsController().didSaveFail()},t.prototype.getMessage=function(){return this.graphsController().isSaving()?this.t("Saving..."):this.graphsController().didSaveSucceed()?this.t("Saved!"):this.graphsController().didSaveFail()?this.t(this.graphsController().getSaveFailureMessage()):""},t}(r.Class);t.HeaderToast=o}),define("calculator-shell/header-icon",["require","exports","tslib","dcgview","jquery"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderIcon=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),r.createElement("span",{role:r.const("button"),tabindex:r.const(0),"aria-haspopup":r.const("true"),"aria-label":function(){return e.controller.t(e.props.label())},"aria-expanded":function(){return e.isMenuOpen()},class:function(){var t;return t={"dcg-header-btn":!0},t["dcg-action-"+e.props.name()]=!0,t["dcg-tooltip"]=!0,t["dcg-active"]=e.isMenuOpen(),t},"dcg-menu-button":this.props.name,tooltip:this.props.tooltip,onTap:this.props.onTap.bind(this),didMount:function(t){return e.hookUpTooltip(t)}},r.createElement("i",{class:this.props.icon}))},t.prototype.hookUpTooltip=function(e){i(e).tipsy()},t.prototype.isMenuOpen=function(){return this.controller.getOpenMenu()===this.props.label().toLowerCase()},t}(r.Class);t.HeaderIcon=o}),define("calculator-shell/save-button",["require","exports","tslib","dcgview","browser","jquery"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveButton=void 0;var a=r.Components.Switch,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController},t.prototype.template=function(){var e=this;return r.createElement("span",{class:r.const("dcg-if-user save-btn-container")},r.createElement("span",{class:r.const("dcg-action-save save-button"),onTap:function(t){return e.controller.dispatch({type:"save-graph",device:t.device})}},r.createElement(a,{key:function(){return!e.graphsController.isSaving()}},function(t){return t?r.createElement("span",{role:r.const("button"),tooltip:function(){return e.graphsController.hasUnsavedChanges()?e.saveChangesText():e.controller.t("No Unsaved Changes")},class:function(){return{"styled-save-btn":!0,"tooltip-offset":!0,"dcg-btn-green":e.graphsController.hasUnsavedChanges(),"disabled-save-btn":!e.graphsController.hasUnsavedChanges()}},didMount:function(t){return e.hookUpTooltip(t)}},function(){return e.controller.t("Save")}):r.createElement("span",{class:r.const("saving-notice")},r.createElement("span",{class:r.const("dcg-spinner-dark")}))})))},t.prototype.hookUpTooltip=function(e){return o(e).tipsy({offset:7})},t.prototype.saveChangesText=function(){return i.IS_APPLE?this.controller.t("Save Changes (cmd+s)"):this.controller.t("Save Changes (ctrl+s)")},t}(r.Class);t.SaveButton=s}),define("calculator-shell/graph-title",["require","exports","tslib","dcgview","browser","jquery","./save-button"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphTitle=void 0;var s=r.Components.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.graphsController=this.controller.graphsController},t.prototype.template=function(){var e=this;return r.createElement("span",{class:r.const("title-div")},r.createElement("span",{role:r.const("button"),tabindex:r.const(0),class:r.const("dcg-variable-title dcg-tooltip dcg-action-savedialog"),tooltip:function(){return e.tooltipText()},onTap:function(){return e.controller.dispatch({type:"edit-title"})},didMount:function(t){return e.hookUpTooltip(t)}},function(){return e.graphsController.getCurrentGraphTitle()||e.graphsController.getUntitledString()}),r.createElement(s,{predicate:function(){return e.userController.isLoggedIn()&&!e.controller.getPreviewParams()&&!e.controller.isInMaintenanceMode()}},function(){return r.createElement(a.SaveButton,{controller:e.props.controller})}))},t.prototype.hookUpTooltip=function(e){return o(e).tipsy()},t.prototype.tooltipText=function(){return i.IS_APPLE?this.controller.t("Duplicate or Rename (cmd+shift+s)"):this.controller.t("Duplicate or Rename (ctrl+shift+s)")},t}(r.Class);t.GraphTitle=c}),define("loadcss!shared-header/header-bar",function(){}),define("loadcss!calculator-shell/calculator-shell",function(){}),define("loadcss!spinner",function(){}),define("calculator-shell/view",["require","exports","tslib","dcgview","jquery","shared-header/hamburger","shared-header/accounts","shared-header/header-toast","./header-icon","./graph-title","loadcss!shared-header/header-bar","loadcss!./calculator-shell","loadcss!spinner"],function(e,t,n,r,i,o,a,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderBar=void 0;var u=r.Components.If,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController},t.prototype.template=function(){var e=this,t=this.controller.isInMaintenanceMode(),n=this.controller.getPreviewParams();return r.createElement("div",{class:r.const("dcg-header")},r.createElement("div",{class:r.const("dcg-header-desktop")},r.createElement("div",{class:r.const("align-left-container")},r.createElement(o.Hamburger,{controller:this.props.controller,tooltip:r.const(!0)}),r.createElement(l.GraphTitle,{controller:this.props.controller})),r.createElement("div",{class:r.const("align-center-container")},r.createElement("a",{href:r.const("/"),target:r.const("_blank"),class:r.const("dcg-home-link-icon"),"aria-label":r.const("Home")},r.createElement("i",{class:r.const("dcg-icon-desmos")}))),r.createElement(s.HeaderToast,{controller:this.props.controller}),r.createElement(u,{predicate:function(){return e.userController.didLogoutFail()}},function(){return r.createElement("div",{class:r.const("dcg-toast-container")},r.createElement("div",{class:r.const("dcg-toast")},function(){return e.controller.t("Error logging out.")}))}),r.createElement("div",{class:r.const("align-right-container")},r.createElement(a.Accounts,{controller:this.props.controller,disableAccounts:function(){return null!=n||t}}),r.createElement(u,{predicate:function(){return e.controller.isArtContestEnabled()}},function(){return r.createElement(c.HeaderIcon,{controller:e.props.controller,label:function(){return"Global Math Art Contest"},tooltip:function(){return e.controller.t("Global Math Art Contest")},icon:r.const("dcg-icon-trophy"),name:r.const("contest"),onTap:function(){return e.controller.dispatch({type:"open-contest-modal"})}})}),r.createElement(c.HeaderIcon,{controller:this.props.controller,label:function(){return"share"},tooltip:function(){return e.controller.t("Share Graph")},icon:r.const("dcg-icon-share"),name:function(){return"share"},onTap:function(t){if(e.controller.dispatch({type:"toggle-menu",payload:"share"}),t&&"keyboard"===t.device&&"share"!==e.controller.getOpenMenu())return e.focusElement(".dcg-action-share")}}),r.createElement(c.HeaderIcon,{controller:this.props.controller,label:function(){return"Help"},tooltip:function(){return e.controller.t("Help")},icon:r.const("dcg-icon-question-sign"),name:r.const("help"),onTap:function(t){if(e.controller.dispatch({type:"toggle-menu",payload:"help"}),"keyboard"===t.device){var n="help"===e.controller.getOpenMenu(),r=n?'.dcg-feature[href="/calculator?tour=sliders"]':".dcg-action-help";return e.focusElement(r)}}}),r.createElement(c.HeaderIcon,{controller:this.props.controller,label:function(){return"Language"},tooltip:function(){return e.controller.t("Language")},icon:r.const("dcg-icon-world"),name:r.const("language"),onTap:function(t){if(e.controller.dispatch({type:"toggle-menu",payload:"language"}),"keyboard"===t.device){var n="language"===e.controller.getOpenMenu(),r=n?".dcg-language-option.dcg-selected":".dcg-action-language";return e.focusElement(r)}}}))),r.createElement(u,{predicate:function(){return null!=n||t}},function(){return r.createElement("div",{class:r.const("dcg-toast-container")},r.createElement("span",{class:r.const("dcg-toast dcg-maintenance-toast")},r.createElement("span",{class:r.const("dcg-msg")},r.createElement(u,{predicate:function(){return t}},function(){return r.createElement("span",null,function(){return e.controller.t("Desmos is in Maintenance Mode.")})}),r.createElement(u,{predicate:function(){return null!=n}},function(){return r.createElement("span",null,function(){return null!=n?n.message:void 0})})),r.createElement(u,{predicate:function(){return t}},function(){return r.createElement("a",{class:r.const("undo"),target:r.const("_blank"),href:r.const("http://desmos.zendesk.com/entries/25429616-What-is-Maintenance-Mode-/")},function(){return e.controller.t("Learn More")})}),r.createElement(u,{predicate:function(){return null!=n}},function(){return r.createElement("a",{class:r.const("undo"),target:r.const("_blank"),href:function(){return null!=n?n.url:void 0}},function(){return e.controller.t("Share your thoughts!")})})))}))},t.prototype.focusElement=function(e){i(e).focus()},t}(r.Class);t.HeaderBar=d}),define("calculator-shell/menu",["require","exports","tslib","dcgview","jquery"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;var o=r.Components.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){var t;return t={"dcg-popover":!0,"dcg-bottom":!0,"dcg-constrained-height-popover":!0},t["dcg-"+e.props.type()+"-container"]=!0,t["dcg-product-"+e.props.controller().getProduct()]=!0,t},style:r.const("display: block"),role:r.const("complementary"),label:function(){return e.props.label()}},r.createElement("div",{class:r.const("dcg-popover-interior")},r.createElement(o,{predicate:function(){return!("function"!=typeof e.props.title||!e.props.title())}},function(){return r.createElement("div",{class:r.const("dcg-popover-title")},function(){return e.props.title()})}),this.children),r.createElement("div",{class:r.const("dcg-arrow")}))},t.prototype.didMount=function(){var e=this,t=this.props.type();this.guid="menu-"+t,i("body").on("dcg-tapstart."+this.guid,function(n){var r=i(n.target),o=!!r.closest(".dcg-popover").length,a=!!r.closest("[dcg-menu-button="+t+"]").length;o||a||e.controller.dispatch({type:"toggle-menu",payload:"none"})})},t.prototype.didUnmount=function(){i("body").off("dcg-tapstart."+this.guid)},t}(r.Class);t.Menu=a}),define("loadcss!shared-components/language-picker",function(){}),define("loadcss!shared-components/btn-styles",function(){}),define("shared-components/language-picker",["require","exports","tslib","dcgview","loadcss!./language-picker","loadcss!./btn-styles"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguagePicker=void 0;var i=r.Components,o=i.For,a=i.If,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.i18n=this.props.i18n()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-language-picker":!0,"dcg-two-columns":e.getLanguages().length>7}}},r.createElement("div",{class:r.const("dcg-language-header"),role:r.const("heading"),"aria-level":r.const("2")},function(){return e.i18n.s("shared-title-language-menu")}),r.createElement(o,{each:function(){return e.getLanguages()}},r.createElement("div",{class:r.const("dcg-languages-list"),role:r.const("list")},function(t){return r.createElement("div",{class:r.const("dcg-listitem"),role:r.const("listitem")},r.createElement("div",{class:function(){return{"dcg-language-option":!0,"dcg-selected":e.isLanguageSelected(t)}},lang:e.const(e.getLangCode(t)),role:r.const("link"),tabindex:r.const("0"),"aria-current":function(){return e.isLanguageSelected(t)},onTap:function(){return e.updateLang(t)}},function(){return e.i18n.raw(e.getLanguageDisplayName(t))}))})),r.createElement(a,{predicate:function(){return e.shouldShowFooterLink()}},function(){return r.createElement("a",{class:r.const("dcg-language-footer-link dcg-shared-blue-link"),href:function(){return e.getFooterLinkURL()}},function(){return e.getFooterLinkText()})}))},t.prototype.shouldShowFooterLink=function(){return!(!this.props.footerLink||!this.props.footerLink())},t.prototype.getFooterLinkURL=function(){var e=this.props.footerLink&&this.props.footerLink();if(e)return e.url},t.prototype.getFooterLinkText=function(){var e=this.props.footerLink&&this.props.footerLink();return e?e.text:this.i18n.raw("")},t.prototype.getCurrentLang=function(){return this.props.currentLang()},t.prototype.getLanguages=function(){return Object.keys(this.props.getAllLangs())},t.prototype.getLanguageDisplayName=function(e){return this.props.getAllLangs()[e].display_name},t.prototype.updateLang=function(e){var t=this.props.getAllLangs()[e].code;return this.props.onLangChosen(t)},t.prototype.getLangCode=function(e){return this.props.getAllLangs()[e].code},t.prototype.isLanguageSelected=function(e){return this.getLangCode(e)===this.getCurrentLang()},t}(r.Class);t.LanguagePicker=s}),define("loadcss!calculator-shell/language",function(){}),define("calculator-shell/language-menu",["require","exports","tslib","dcgview","lib/i18n","./menu","shared-components/language-picker","loadcss!./language"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageMenu=void 0;var s=i.buildSupportedLanguagesMap(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.languageController=this.controller.languageController},t.prototype.template=function(){var e=this;return r.createElement(o.Menu,{type:function(){return"language"},label:function(){return e.controller.t("Language Options Menu")},controller:this.props.controller},r.createElement("div",{class:r.const("dcg-popover-content")},r.createElement(a.LanguagePicker,{getAllLangs:function(){return s},currentLang:function(){return e.languageController.getLanguage()},onLangChosen:function(t){e.languageController.fetchAndSetLanguage(t),e.controller.dispatch({type:"toggle-menu",payload:"none"})},i18n:this.props.controller})))},t}(r.Class);t.LanguageMenu=c}),define("core/math/conics",["require","numeric","core/math/distance","core/math/qr"],function(e){"use strict";function t(e,t){return r.approx(1/i.conditionNumber(i.qr(e)),0,t)}var n=e("numeric"),r=e("core/math/distance"),i=e("core/math/qr"),o={isLine:function(e,n,r,i,o,a){return t([[e,n,1],[r,i,1],[o,a,1]])},isCircle:function(e,n,r,i,o,a,s,c){return t([[e*e+n*n,e,n,1],[r*r+i*i,r,i,1],[o*o+a*a,o,a,1],[s*s+c*c,s,c,1]])},isConic:function(e,n,r,i,o,a,s,c,l,u,d,p){return t([[e*e,n*n,2*e*n,e,n,1],[r*r,i*i,2*r*i,r,i,1],[o*o,a*a,2*o*a,o,a,1],[s*s,c*c,2*s*c,s,c,1],[l*l,u*u,2*l*u,l,u,1],[d*d,p*p,2*d*p,d,p,1]])},conicQuadraticParameters:function(e,t,r,i,o,a,s,c,l,u){return{a:n.det([[t*t,2*e*t,e,t,1],[i*i,2*r*i,r,i,1],[a*a,2*o*a,o,a,1],[c*c,2*s*c,s,c,1],[u*u,2*l*u,l,u,1]]),b:n.det([[e*e,t*t,e,t,1],[r*r,i*i,r,i,1],[o*o,a*a,o,a,1],[s*s,c*c,s,c,1],[l*l,u*u,l,u,1]]),c:-n.det([[e*e,2*e*t,e,t,1],[r*r,2*r*i,r,i,1],[o*o,2*o*a,o,a,1],[s*s,2*s*c,s,c,1],[l*l,2*l*u,l,u,1]])}},classifyConic:function(e,n,r,i,a,s,c,l,u,d,p,h){if(o.isLine(e,n,a,s,p,h))return"line";if(o.isCircle(e,n,r,i,u,d,p,h))return"circle";if(!o.isConic(e,n,r,i,a,s,c,l,u,d,p,h))return"none";var f=o.conicQuadraticParameters(e,n,r,i,a,s,c,l,u,d);return t([[f.a,f.b],[f.b,f.c]],20)?"parabola":f.b*f.b>f.a*f.c?"hyperbola":"ellipse"},classifyBranchConic:function(e){var t,n;if(1===e.length&&4===e[0].length)return"line";for(var r=0;r<e.length;r++){var i=e[r],a=i.length;if(a<12)return"unknown";if("none"===(n=o.classifyConic(i[0],i[1],i[2*Math.floor(1*a/12)],i[2*Math.floor(1*a/12)+1],i[2*Math.floor(2*a/12)],i[2*Math.floor(2*a/12)+1],i[2*Math.floor(3*a/12)],i[2*Math.floor(3*a/12)+1],i[2*Math.floor(4*a/12)],i[2*Math.floor(4*a/12)+1],i[a-2],i[a-1])))return"none";if(t&&n!==t)return"none";t=n}return t}};return o}),define("predicates/common",["require","parser","core/math/conics","graphing-calc/models/expression","graphing-calc/models/list"],function(e){"use strict";var t=e("parser"),n=e("core/math/conics"),r=e("graphing-calc/models/expression"),i=e("graphing-calc/models/list");return{FOCUSED_EXP:function(e,t){return i.isItemSelected(e)&&"expression"===e.type},FOCUSED_OR_EMPTY_EXP:function(e,t){return!(!i.isItemSelected(e)||"expression"!==e.type)||"expression"===e.type&&r.isEmpty(e)},COMPLEX_EXP:function(e,t){return e.isGraphable&&"expression"===e.type&&t&&t.branches[0]&&"line"!==n.classifyBranchConic(t.branches[0].segments)},TABLEABLE_EXP:function(e,t){return e.isGraphable&&e.isTableable},EXP:function(e,t){return"expression"===e.type},GRAPHABLE_EXP:function(e,t){return e.isGraphable},HAS_ERROR:function(e,t){return e.error&&("expression"!==e.type||!r.isEmpty(e))},DEPENDS_ON:function(e){return function(n,r){return!!n.latex&&t.parse(n.latex).getDependencies().indexOf(e)>=0}},DEFINES:function(e){return function(n,r){return!!n.latex&&t.parse(n.latex).getExports().indexOf(e)>=0}},HAS_N_DEPENDENCIES:function(e){return function(t,n){return"expression"===t.type&&t.formula&&t.formula.variables&&t.formula.variables.length>=e}},NONCONSTANT_LINE:function(e,t){return t&&"line"===n.classifyBranchConic(t.branches[0].segments)&&!isFinite(e.formula.constant_value)},RESTRICTED_LINE:function(e,t){return this.NONCONSTANT_LINE(e,t)&&this.RESTRICTED(e,t)},EXP_NOT_RESTRICTED_LINE:function(e,t){return this.EXP(e,t)&&!this.RESTRICTED_LINE(e,t)},PARABOLA:function(e,t){return t&&t.branches&&t.branches.some(function(e){return"parabola"===n.classifyBranchConic(e.segments)})},RESTRICTED:function(e,t){return!(!e||!e.latex)&&!!e.latex.match(/\\left\\{(.+)\\right\\}/)},SHIFTED_PARABOLA:function(e,t){if(!this.PARABOLA(e,t))return!1;var n=t.branches[0].compiled.fn;return 0!==n(0)||1!==n(1)},EVALUATION:function(e,t){return e.formula&&e.formula.is_evaluable&&isFinite(e.formula.constant_value)},HAS_DEPENDENT_Y:function(e,t){return"y"===e.formula.assignment},SLIDER:function(e,t){return!!e.sliderExists&&!e.isGraphable},ANIMATING_SLIDER:function(e,t){return e.sliderExists&&e.slider.isPlaying},SLID_SLIDER:function(e,t){return e.sliderExists&&!e.isGraphable&&1!==r.getSliderValue(e)},TABLE:function(e,t){return"table"===e.type},REGRESSION:function(e,t){return e.formula&&e.formula.regression},HAS_DATA_COLUMN:function(e,t){if(!this.TABLE(e,t))return!1;for(var n=1;n<e.columnModels.length;n++)if(e.columnModels[n].discrete)return!0;return!1},HAS_FUNCTION_COLUMN:function(e,t){if(!this.TABLE(e,t))return!1;for(var n=1;n<e.columnModels.length;n++)if(!1===e.columnModels[n].discrete)return!0;return!1}}}),define("tours/base_tour",["require","pjs","jquery","../predicates/common","graphing-calc/models/abstract-item"],function(e){"use strict";var t=e("pjs"),n=e("jquery"),r=e("../predicates/common"),i=e("graphing-calc/models/abstract-item");return t(function(e){e.init=function(e){this.Calc=e,this.controller=this.Calc.controller},e.expressionsVisible=function(){return this.controller.isListVisible()},e.t=function(e,t){return this.controller.t(e,t)},e.requireExpressionsVisible=function(){return{position:"e",content:this.t("Click to show the list of expressions."),sel:n(".dcg-show-expressions-tab"),delayBeforeEnter:400,delayBeforeExit:400}},e.resourcesOpen=function(){return n("body").hasClass("resources-open")},e.requireResourcesNotOpen=function(){return{position:"e",content:this.t("Click to return to this graph."),sel:n(".dcg-action-opendrawer"),delayBeforeEnter:400,delayBeforeExit:400}},e.editListMode=function(){return this.controller.isInEditListMode()},e.requireNotEditListMode=function(){return{position:"s",content:this.t("Click to return to your expressions."),sel:n(".dcg-action-toggle-edit")}},e.expressionCount=function(){return this.controller.getItemCount()},e.getExpSketch=function(e){var t=this.Calc.grapher.graphSketches[e.id];if(!t||t.visible)return t},e.getAvailableExp=function(e){var t=this.getMatchingExpSelector(r.FOCUSED_OR_EMPTY_EXP,e);return t||".dcg-new-math-div"},e.expList=function(){return n(this.Calc.rootElt).find(".dcg-exppanel")},e.getSelectorById=function(e){return this.controller.getItemSelectorById(e)},e.getModelById=function(e){return this.controller.getItemModel(e)},e.expMatches=function(e,t){if(!e)return!1;if("function"==typeof t)return t.call(r,e,this.getExpSketch(e));for(var n=0;n<t.length;n++)if(!t[n].call(r,e,this.getExpSketch(e)))return!1;return!0},e.getMatchingExpId=function(e,t){var n,r,o={},a=this.controller.getAllItemModels();for(n=0;n<a.length;n++)r=a[n],"render"===i.getDisplayState(r)&&(o[r.id]=!0);for(var s in t)delete o[s];var c=this.controller.getSelectedItem();if(c&&o[c.id]&&this.expMatches(c,e))return c.id;for(n=0;n<a.length;n++)if(r=a[n],o[r.id]&&this.expMatches(r,e))return r.id;return null},e.getMatchingExpSelector=function(e,t){var n=this.getMatchingExpId(e,t);return n?this.getSelectorById(n):n},e.getMatchingExpModel=function(e,t){var n=this.getMatchingExpId(e,t);return n?this.getModelById(n):n}})}),define("tours/sliders",["require","pjs","./base_tour","predicates/common"],function(e){"use strict";var t=e("pjs"),n=e("./base_tour"),r=e("predicates/common")
;return t(n,function(e,t){e.sliderHasSlid=!1,e.shouldPopup=function(){return!!this.getMatchingExpSelector(r.SLIDER)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExpSelector(r.GRAPHABLE_EXP),t=this.getMatchingExpSelector(r.SLIDER),n=this.getMatchingExpSelector(r.ANIMATING_SLIDER),i=this.getMatchingExpSelector(r.SLID_SLIDER);if(e&&n)return{final:!0,position:"s",endingMsg:this.t("You're a slider pro!"),sel:n.find(".dcg-circular-icon")};if(e&&i)return i.find(".dcg-depressed").length?{doNotUpdate:!0}:{position:"s",content:"<b>"+this.t('Go "Hands-free"')+"</b><br>"+this.t("Press play to animate the slider."),sel:i.find(".dcg-circular-icon")};if(e&&t){var o=t.find(".dcg-thumb .dcg-graphic");return 1===o.length?{position:"s",content:this.t("Drag the handle to change the value."),sel:o}:{position:"e",content:this.t("Type in here to change the value."),sel:t}}var a;return(a=this.expressionCount()>1?this.getMatchingExpSelector(r.HAS_N_DEPENDENCIES(1)):this.getMatchingExpSelector(r.HAS_N_DEPENDENCIES(2)))?{position:"s",content:"<b>"+this.t("Awesome!")+"</b> "+this.t("Now click here to add the sliders."),sel:a.find(".dcg-slider-btn-container:last .dcg-btn-blue")}:(a=this.getMatchingExpSelector(r.FOCUSED_OR_EMPTY_EXP),a?{position:"e",content:"<b>"+this.t("Let's make some sliders!")+"</b><br>"+this.t("Try typing __sample_expression__",{sample_expression:'<span class="trip-math">y=mx+b</span>'}),sel:a,delayBeforeExit:600}:{position:"e",content:this.t("Click here to create a new blank expression."),sel:".dcg-action-newmath"})}})}),define("tours/scatter_plot",["require","pjs","jquery","./base_tour","predicates/common","graphing-calc/models/table"],function(e){"use strict";var t=e("pjs"),n=e("jquery"),r=e("./base_tour"),i=e("predicates/common"),o=e("graphing-calc/models/table");return t(r,function(e,t){e.shouldPopup=function(){return!!this.getMatchingExpSelector(i.TABLE)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExpId(i.HAS_DATA_COLUMN),t=this.getSelectorById(e),r=this.getModelById(e);if(!t){var a=n(".dcg-action-newtable:visible");return 0===a.length?{position:"e",content:"<b>"+this.t("Let's make a table!")+"</b><br>"+this.t("Click here to add a new item."),sel:n(".dcg-add-expression-btn")}:{position:"e",content:this.t('... and select the "table" option.'),sel:a,delayBeforeExit:300}}for(var s=r,c=o.getSelectedCell(s),l=s.columnModels[0].cells.length,u=0,d=0;d<l&&d<3;d++){var p=t.find(".dcg-row:nth-of-type("+(d+2)+") .dcg-cell:nth-of-type(1)"),h=t.find(".dcg-row:nth-of-type("+(d+2)+") .dcg-cell:nth-of-type(2)");p.is(":not(.dcg-empty, .dcg-error)")&&h.is(":not(.dcg-empty, .dcg-error)")&&u++}if(3===u){var f=s.columnModels[1].points&&s.columnModels[1].lines,m=n(".dcg-table-column-menu").length>0;return f&&!m?{final:!0,position:"e",endingMsg:this.t("You're a tables whiz!"),sel:t}:f?{position:"e",content:this.t("Click anywhere to close the drawing options."),sel:t}:m?{content:this.t("Click here to connect the dots."),position:"e",sel:".dcg-toggle-switch:eq(1)"}:{content:["<b>"+this.t("Last trick!")+"</b><br>",this.t("Click and hold on this icon until the options menu opens up.")].join(""),position:"e",sel:t.find(".dcg-row:nth-of-type(1) .dcg-cell:nth-of-type(2) .dcg-circular-icon")}}var g,y,v;for(g=0;g<l;g++)for(y=0;y<2;y++)if(v=t.find(".dcg-row:nth-of-type("+(g+2)+") .dcg-cell:nth-of-type("+(y+1)+")"),v.is(".dcg-error"))return{position:"e",content:this.t("Uh-oh! Type a valid number here."),sel:v};if(!c)return{position:"e",content:this.t("Click back to continue editing."),sel:t.find(".dcg-row:nth-of-type("+g+") .dcg-cell:nth-of-type(2)")};if(2===l&&1===u&&c&&1===c.row)return{position:"e",content:this.t("Go down to the next row to add more data."),sel:t.find(".dcg-row:nth-of-type("+(c.row+1)+") .dcg-cell:nth-of-type(2)")};if(3===l&&2===u&&c&&3!==c.row)return{position:"e",content:"<b>"+this.t("Awesome!")+"</b><br>"+this.t("Now try pressing Enter."),sel:t.find(".dcg-row:nth-of-type("+(c.row+1)+") .dcg-cell:nth-of-type(2)")};for(g=0;g<l;g++)for(y=0;y<2;y++)if(v=t.find(".dcg-row:nth-of-type("+(g+2)+") .dcg-cell:nth-of-type("+(y+1)+")"),v.is(".dcg-empty")){var b=this.t("Fill in this whole row.");return 2===g&&1===y&&(b=this.t("Just fill in one more...")),0===g&&1===y&&(b="<b>"+this.t("Fill it in.")+"</b><br>"+this.t("Type any number here.")),{position:"e",content:b,sel:t.find(".dcg-row:nth-of-type("+(g+2)+") .dcg-cell:nth-of-type(2)")}}}})}),define("tours/function_table",["require","pjs","./base_tour","jquery","predicates/common","graphing-calc/models/table"],function(e){"use strict";var t=e("pjs"),n=e("./base_tour"),r=e("jquery"),i=e("predicates/common"),o=e("graphing-calc/models/table");return t(n,function(e,t){e.shouldPopup=function(){return!!this.getMatchingExpSelector(i.TABLE)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExpId(i.HAS_FUNCTION_COLUMN),t=this.getSelectorById(e),n=this.getModelById(e),a=this.getMatchingExpSelector(i.FOCUSED_OR_EMPTY_EXP),s=this.getMatchingExpSelector([i.COMPLEX_EXP,i.TABLEABLE_EXP]);if(t){var c=n,l="POINTS"===c.columnModels[1].columnMode,u=r(".dcg-table-column-menu").length>0,d=c.columnModels.length>3&&!1===c.columnModels[2].discrete,p=o.getSelectedCell(c);return d?{final:!0,position:"e",endingMsg:this.t("You're a table wizard!"),sel:t}:p&&0===p.row&&2===p.column?{position:"e",content:this.t("Try typing __sample_expression__",{sample_expression:'<span class="trip-math">cos\\left(x\\right)</span>'}),sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(3)")}:!p||0===p.row&&2===p.column?l&&!p?{position:"e",content:this.t("Click here to continue editing this table."),sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(2)")}:u?{content:this.t("Click here to only show the dots."),position:"e",sel:".dcg-table-points"}:{content:this.t("Click and hold on this icon until the options menu opens up."),position:"e",sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(2) .dcg-circular-icon")}:{position:"e",content:this.t("Move right to add a new column."),sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(3)")}}return s?this.editListMode()?{position:"e",content:this.t("Click here to generate a table."),sel:".dcg-action-createtable",delayBeforeExit:400}:{position:"s",content:"<b>"+this.t("Convert this to a table.")+"</b><br>"+this.t('Click the "Edit List" button.'),sel:".dcg-action-toggle-edit"}:a?{position:"e",content:["<b>"+this.t("Start by graphing a function.")+"</b><br>",this.t("Try typing __sample_expression__",{sample_expression:'<span class="trip-math">y=sin\\left(x\\right)</span>'})].join(""),sel:a}:{position:"e",content:this.t("Let's make a function. First: click here to create a new blank expression."),sel:".dcg-new-math-div"}}})}),define("tours/restrictions",["require","pjs","./base_tour","predicates/common"],function(e){"use strict";var t=e("pjs"),n=e("./base_tour"),r=e("predicates/common");return t(n,function(e){e.shouldPopup=function(){return!!this.getMatchingExpSelector(r.RESTRICTED)},e.restrictedLineTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExpSelector(r.RESTRICTED_LINE),t=this.getMatchingExpSelector(r.EXP_NOT_RESTRICTED_LINE);if(e)return t?(this.phaseOn++,this.update()):{position:"e",content:"<b>"+this.t("Brilliant!")+"</b><br>"+this.t("Click here to create a new expression."),sel:".dcg-new-math-div"};var n=this.getMatchingExpId(r.FOCUSED_OR_EMPTY_EXP),i=this.getSelectorById(n),o=this.getModelById(n);if(i){var a=this.expMatches(o,r.NONCONSTANT_LINE);return this.expMatches(o,r.HAS_ERROR)?{doNotUpdate:!0}:a?{position:"e",content:["<b>"+this.t("Awesome!")+"</b><br>",this.t("Restrict the domain of this line by adding __sample_expression__ to the end.",{sample_expression:'<span class="trip-math">\\left\\{x<0\\right\\}</span>'}),"<br><i>"+this.t("Hint: press the 'A B C' button on the keypad to find the { } buttons")+"</i>"].join(""),sel:i}:{position:"e",content:["<b>"+this.t("Let's get started!")+"</b><br>",this.t("Try graphing a straight line, like __sample_expression__",{sample_expression:'<span class="trip-math">y=2x</span>'})].join(""),sel:i}}return{position:"e",content:this.t("Click here to make a new blank expression."),sel:".dcg-new-math-div"}},e.restrictedParabolaTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.getMatchingExpSelector([r.RESTRICTED,r.PARABOLA]))return{final:!0,position:"e",endingMsg:this.t("You're a restrictions star!"),sel:".dcg-exppanel-container"};var e=this.getMatchingExpId([r.EXP_NOT_RESTRICTED_LINE,r.FOCUSED_EXP]),t=this.getSelectorById(e),n=this.getModelById(e);if(t){var i=this.expMatches(n,[r.PARABOLA,r.HAS_DEPENDENT_Y]),o=this.expMatches(n,r.SHIFTED_PARABOLA),a=this.expMatches(n,r.PARABOLA);return this.expMatches(n,r.HAS_ERROR)?{doNotUpdate:!0}:a?i?o?{position:"e",content:["<b>"+this.t("Nice!")+"</b><br>"+this.t("Now let's restrict the range. Add __sample_expression__ to the end.",{sample_expression:'<span class="trip-math">\\left\\{y<4\\right\\}</span>'})].join(""),sel:t}:{position:"e",content:["<b>"+this.t("Move the parabola.")+"</b><br>",this.t("Change this equation to __sample_expression__",{sample_expression:'<span class="trip-math">y=x^2-2</span>'})].join(""),sel:t}:{position:"e",content:["<b>"+this.t('Don\'t forget the "y="!')+"</b><br>",this.t("Try typing all of __sample_expression__",{sample_expression:'<span class="trip-math">y=x^2</span>'})].join(""),sel:t}:{position:"e",content:[this.t("Now graph: __sample_expression__",{sample_expression:'<span class="trip-math">y=x^2</span>'})+"<br><i>"+this.t('Hint: you can type y=x^2, or use the <span class="trip-math">a^2</span> button on the keypad below.')+"</i>"].join(""),sel:t}}return{position:"e",content:this.t("Click here to make a new blank expression."),sel:".dcg-new-math-div"}},e.phaseOn=0,e.phases=[e.restrictedLineTour,e.restrictedParabolaTour],e.update=function(){return this.phases[this.phaseOn].call(this)}})}),define("loadcss!regression-tour",function(){}),define("tours/regressions",["require","pjs","jquery","./base_tour","loadcss!regression-tour","browser","predicates/common"],function(e){"use strict";var t=e("pjs"),n=e("jquery"),r=e("./base_tour");e("loadcss!regression-tour");var i=e("browser"),o=e("predicates/common");return t(r,function(e,t){e.shouldPopup=function(){return!!this.getMatchingExpSelector(o.TABLE)},e.hasCreatedLinearRegression=!1,e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExpId(o.REGRESSION)||this.getMatchingExpId(o.EXP),t=this.getSelectorById(e),r=this.getModelById(e),a=this.getMatchingExpId(o.HAS_DATA_COLUMN),s=this.getSelectorById(a),c=this.getModelById(a);if(!s||!c.columnModels[1]){var l=n(".dcg-action-newtable:visible"),u=!i.IS_IPAD&&!i.IS_MOBILE;return 0===l.length&&u?{position:"e",content:'<div class="trip-title">'+this.t("First, let's get some data.")+"</div>"+this.t("Head over to Google Docs and copy and paste this __sample_data_link__.",{sample_data_link:'<a class="trip-link" target="_blank" href="https://docs.google.com/spreadsheets/d/1h4kYwWka_1PvI5G-hPYz_QBe1FrYLo9Gb1XvxJz-QYE/edit#gid=0">'+this.t("sample data")+"</a>"})+' <div class="trip-hint"><br>'+this.t("Note: you can add your own data instead by clicking the __plus_icon__ button.",{plus_icon:'<i class="dcg-icon-plus"></i>'})+"</div>",sel:t||n(".dcg-exppanel")}:0===l.length?{position:"e",content:'<div class="trip-title">'+this.t("Let's start with some data!")+"</div>"+this.t("Click here to add a new item."),sel:n(".dcg-add-expression-btn"),delayBeforeExit:150}:{position:"e",content:this.t("Click here to add a new table."),sel:l,delayBeforeExit:250}}if(s.find(".dcg-row .dcg-cell:nth-of-type(2):not(.dcg-table-header):not(.dcg-empty)").length<5)return{position:"e",content:'<div class="trip-title">'+this.t("Fill in the sample data:")+"</div><table class='dcg-regression-tour-table'><tr><td><span class='trip-math'>x_1</span></td><td><span class='trip-math'>y_1</span></td></tr><tr><td>1</td><td>0.8</td></tr><tr><td>2</td><td>2.7</td></tr><tr><td>3</td><td>3.9</td></tr><tr><td>4</td><td>4.6</td></tr><tr><td>5</td><td>5</td></tr></table>",sel:s.find(".dcg-row:nth-of-type(2) .dcg-cell:nth-of-type(2)")};if("expression"!==(this.getMatchingExpModel(o.REGRESSION)||this.getMatchingExpModel(o.FOCUSED_EXP)||this.controller.getItemModelByIndex(0)).type){var d=n(".dcg-action-newexpression:visible");return 0===d.length?{position:"e",content:'<div class="trip-title">'+this.t("Awesome!")+"</div>"+this.t("Click here to add a new item."),sel:n(".dcg-add-expression-btn"),delayBeforeExit:150}:{position:"e",content:this.t('... and select the "expression" option.'),sel:d,delayBeforeExit:150}}var p=r.formula,h=p?p.regression:void 0,f=h?h.statistics:void 0,m=h?h.parameters:void 0;if(f&&f.r&&(this.hasCreatedLinearRegression=!0),!this.hasCreatedLinearRegression)return{position:"e",content:this.t("Now type: __equation__",{equation:"<span class='trip-math'>y_1\\sim mx_1+b</span>"})+"<div class='trip-hint'>"+this.t("Hint #1: to get __y_1__ type __y1__.",{y_1:"<span class='trip-math'>y_1</span>",y1:"<span class='trip-math'>y1</span>"})+"</div><div class='trip-hint'>"+this.t("Hint #2: __twiddle__ is in our onscreen keypad in the 'A B C' section.",{twiddle:"<span class='trip-math'>~</span>"})+"</div>",sel:t,delayBeforeExit:150};var g=n(".dcg-residual-suggestion.dcg-visible");return g.length?{position:"e",content:"<div class='trip-title'>"+this.t("Nice. Let's check the model.")+"</div>"+this.t("Residuals are the difference between your data and your model. Click here to add them to your table and plot them on the graph."),sel:g,delayBeforeExit:250}:f&&(f.Rsquared>=.99||f.r>=.99||m&&m.a&&m.k&&m.h)?{final:!0,position:"e",endingMsg:"<div class='trip-title'>"+this.t("Nice work &ndash; Keep exploring!")+"</div>",sel:n(".dcg-exppanel")}:{position:"e",content:"<div class='trip-title'>"+this.t("Now, let's try a new model.")+"</div>"+this.t("Edit this equation to find a better fit. Try, for example:<br>__equation__",{equation:"<span class='trip-math'>y_1~a(x_1-h)^2+b</span>"}),sel:t,delayBeforeExit:300}}})}),define("tours/list_predicates",["require","predicates/common","parser"],function(e){"use strict";var t=e("predicates/common"),n=e("parser"),r=function(e){return function(t,r){if(!t.latex)return!1;var i=n.parse(t.latex);if(!i._expression)return!1;if("List"!==i._expression.type&&"Range"!==i._expression.type)return!1;if(e.dependent&&e.dependent!==t.dependent)return!1;var o=i.getConcreteTree();return!(e.minLength&&o.args.length<e.minLength)}};return{ANY_LIST:r({}),A_LIST:r({dependent:"a",minLength:3}),B_LIST:r({dependent:"b",minLength:5}),C_LIST:r({dependent:"c",minLength:10}),A_DEP:function(e,n){return t.GRAPHABLE_EXP(e,n)&&t.DEPENDS_ON("a")(e,n)},B_DEP:function(e,n){return t.GRAPHABLE_EXP(e,n)&&t.DEPENDS_ON("b")(e,n)},C_DEP:function(e,n){return t.DEPENDS_ON("c")(e,n)&&t.EVALUATION(e,n)}}}),define("tours/lists",["require","pjs","./base_tour","./list_predicates"],function(e){"use strict";var t=e("pjs"),n=e("./base_tour"),r=e("./list_predicates");return t(n,function(e,t){e.shouldPopup=function(){return!!this.getMatchingExpSelector(r.ANY_LIST)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExpId(r.A_LIST),t=this.getMatchingExpId(r.B_LIST),n=this.getMatchingExpId(r.C_LIST),i=this.getMatchingExpId(r.A_DEP),o=this.getMatchingExpId(r.B_DEP),a=this.getMatchingExpSelector(r.C_DEP);return e?i?t?n?o?a?{final:!0,position:"e",endingMsg:this.t("Great job!"),sel:a.find(".dcg-evaluation"),scrollContainer:this.expList()}:{position:"e",content:"<b>"+this.t("Last thing!")+"</b> "+this.t("You can do a computation on a list. For example: __equation__",{equation:"<span class='trip-math'>total\\left(c\\right)</span>"})+"<div class='trip-hint'>",sel:this.getAvailableExp([e,t,i,n,o]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:"<b>"+this.t("Let's graph a few points.")+"</b> "+this.t("Try this: __equation__",{equation:"<span class='trip-math'>\\left(b, sin\\left(b\\right)\\right)</span>"})+"<div class='trip-hint'>"+this.t("Hint: this will plot a point for each item of b.")+"</div>",sel:this.getAvailableExp([e,t,i,n]),scrollContainer:this.expList()}:{position:"e",content:this.t("If you want to count by 5 instead, just write something like this: __equation__",{equation:"<span class='trip-math'>c=\\left[10, 15, ..., 95\\right]</span>"}),sel:this.getAvailableExp([e,t,i]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:"<b>"+this.t("Awesome!")+"</b> "+this.t("You can create lists of integers even more easily. Try this: __equation__",{equation:"<span class='trip-math'>b=\\left[0...8\\right]</span>"}),sel:this.getAvailableExp([e,i]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:"<b>"+this.t("Nice. Let's put that list to work.")+"</b> "+this.t("Graph: __equation__",{equation:"<span class='trip-math'>y=x^2+a</span>"})+"<div class='trip-hint'>"+this.t("Hint: you can type y=x^2+a or use the a<sup>2</sup> button on the keypad below.")+"</div>",sel:this.getAvailableExp([e]),scrollContainer:this.expList()}:{position:"e",content:this.t("<b>Lists are powerful. Let's see.</b><br>Begin by typing __equation__",{equation:"<span class='trip-math'>a=\\left[1,2,3\\right]</span>"})+"<div class='trip-hint'>"+this.t("Hint: press the 'A B C' button on the keypad to find the [ ] buttons"),sel:this.getAvailableExp(),scrollContainer:this.expList(),delayBeforeExit:600}}})}),define("tours/folders",["require","pjs","./base_tour","jquery"],function(e){"use strict";var t=e("pjs"),n=e("./base_tour"),r=e("jquery"),i=function(e,t){return"folder"==e.type},o=function(e,t){return e.isGraphable&&!e.folderId};return t(n,function(e,t){e.shouldPopup=function(){return!!this.getMatchingExpSelector(i)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExpId(i),t=this.getSelectorById(e),n=this.getModelById(e),a=this.getMatchingExpSelector(o);if(!n){var s=r(".dcg-action-newfolder:visible");return 0===s.length?{position:"e",content:"<b>"+this.t("Let's make a folder!")+"</b><br>"+this.t("Click here to add a new item."),sel:r(".dcg-add-expression-btn")}:{position:"e",content:this.t('... and select the "folder" option.'),sel:s}}return this.cachedTitle!=n.title&&(this.cachedTitle=n.title,this.lastChange=new Date),!this.cachedTitle||new Date-this.lastChange<1e3?{position:"e",content:this.t("Give your folder a name."),sel:t}:0===n.controller.getNumberOfItemsInFolder(n.id)?a?{position:"e",content:this.t("Now grab this equation by its left edge and drag it into the folder.")+"<div class='trip-hint'>"+this.t("Hint: The gray line will show you if the expression is in the folder.")+"</div>",scrollContainer:this.expList(),sel:a}:{position:"e",content:"<b>"+this.t("Awesome!")+"</b> "+this.t("Let's make a new equation. For example, type: __equation__",{equation:"<span class='trip-math'>x+y=3</span>"}),scrollContainer:this.expList(),sel:this.getAvailableExp(),delayBeforeExit:500}:n.collapsed?n.hidden?{final:!0,position:"e",endingMsg:this.t("Great job!"),sel:".dcg-exppanel-container",scrollContainer:this.expList()}:{position:"s",content:"<b>"+this.t("Did You Know...")+"</b>"+this.t("You can hide everything in the folder with one click. Click here to try."),scrollContainer:this.expList(),sel:t.find(".dcg-circular-icon")}:{position:"e",content:"<b>"+this.t("That’s a great start!")+"</b> "+this.t("Now we’ll explore some folder functionality. Click here to collapse the folder."),scrollContainer:this.expList(),sel:t.find(".dcg-caret-container")}}})}),define("tours/derivatives_predicates",["require","predicates/common"],function(e){"use strict";var t=e("predicates/common"),n=function(e,t){return e.latex.indexOf("\\frac{d}{dx}")>=0};return{DEFINE_F:function(e,n){return!!t.DEFINES("f")(e,n)&&!!t.COMPLEX_EXP(e,n)},DEFINE_G:function(e,r){return!!t.DEFINES("g")(e,r)&&(!!t.DEPENDS_ON("f")(e,r)&&(!!t.GRAPHABLE_EXP(e,r)&&n(e)))},INLINE_DERIVATIVE:function(e,r){return!!t.COMPLEX_EXP(e,r)&&(!t.DEPENDS_ON("f")(e,r)&&n(e))}}}),define("tours/derivatives",["require","pjs","./base_tour","./derivatives_predicates"],function(e){"use strict";var t=e("pjs"),n=e("./base_tour"),r=e("./derivatives_predicates");return t(n,function(e,t){e.shouldPopup=function(){return!1},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExpId(r.DEFINE_F),t=this.getMatchingExpId(r.DEFINE_G),n=this.getMatchingExpSelector(r.INLINE_DERIVATIVE);return e?t?n?{final:!0,position:"e",endingMsg:this.t("Great job!"),sel:n,scrollContainer:this.expList()}:{position:"e",content:this.t("Let's try one more: __equation__",{equation:"<span class='trip-math'>\\frac{d}{dx}\\ln \\left(x\\right)</span>"}),sel:this.getAvailableExp([e,t]),scrollContainer:this.expList()}:{position:"e",content:this.t("To graph its derivative: __equation__",{equation:"<span class='trip-math'>g\\left(x\\right)=\\frac{d}{dx}f\\left(x\\right)</span>"})+"<div class='trip-hint'>"+this.t("Hint: To get the derivative operator, just type d/dx.")+"</div>",sel:this.getAvailableExp([e]),scrollContainer:this.expList()}:{position:"e",content:this.t("<b>Let's graph a derivative!</b><br>Start with a function: __equation__",{equation:"<span class='trip-math'>f\\left(x\\right)=x\\sin \\left(x\\right)</span>"}),sel:this.getAvailableExp(),scrollContainer:this.expList()}}})}),define("tours/all_tours",["require","tours/sliders","tours/scatter_plot","tours/function_table","tours/restrictions","tours/regressions","tours/lists","tours/folders","tours/derivatives","lib/i18n","underscore"],function(e){"use strict";var t=e("tours/sliders"),n=e("tours/scatter_plot"),r=e("tours/function_table"),i=e("tours/restrictions"),o=e("tours/regressions"),a=e("tours/lists"),s=e("tours/folders"),c=e("tours/derivatives"),l=e("lib/i18n"),u=e("underscore");l.t("Sliders"),l.t("Tables"),l.t("Restrictions"),l.t("Advanced Tables"),l.t("Regressions"),l.t("Lists"),l.t("Folders"),l.t("Derivatives");var d={sliders:{tour:t,title:"Sliders"},tables:{tour:n,title:"Tables"},restrictions:{tour:i,title:"Restrictions"},functiontable:{tour:r,title:"Advanced Tables",hideInHelp:!0},regressions:{tour:o,title:"Regressions"},lists:{tour:a,title:"Lists",hideInHelp:!0},folders:{tour:s,title:"Folders",hideInHelp:!0},derivatives:{tour:c,title:"Derivatives",hideInHelp:!0}};return u.each(d,function(e,t){e.name=t}),d}),define("calculator-shell/tour-links",["require","exports","tours/all_tours","tslib","dcgview","underscore"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TourLinks=void 0;var a=i.Components,s=a.For,c=a.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.tourController=this.controller.tourController},t.prototype.template=function(){var e=this;return i.createElement("a",{class:i.const("dcg-feature"),href:function(){return"/calculator?tour="+e.props.name()},target:i.const("_blank"),ignoreRealClick:function(){return!e.tourController.shouldPopupTour(e.props.name())},onTap:function(t){if(!e.tourController.shouldPopupTour(e.props.name()))return t.originalEvent.preventDefault(),e.controller.dispatch({type:"toggle-menu",payload:"none"}),e.controller.tourController.startTour(e.props.name(),"help")}},i.createElement("span",{class:function(){return"dcg-thumb dcg-"+e.props.name()}}),function(){return e.controller.t(e.props.title())})},t}(i.Class),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.template=function(){var e=this;return i.createElement(s,{each:function(){return o.keys(n)}},i.createElement("div",{class:i.const("dcg-popover-content dcg-tours-content"),role:i.const("group"),"aria-label":i.const("Tours")},function(t){return i.createElement(c,{predicate:function(){return!n[t].hideInHelp}},function(){return i.createElement(l,{name:function(){return null!=n[t]?n[t].name:void 0},title:function(){return null!=n[t]?n[t].title:void 0},controller:e.props.controller})})}))},t}(i.Class);t.TourLinks=u}),define("calculator-shell/resource-links",["require","exports","tslib","dcgview","lib/i18n"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceLinks=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("a",{href:function(){return e.props.href()},target:r.const("_blank"),class:r.const("dcg-resource-link")},r.createElement("i",{class:function(){return e.props.icon()},"aria-hidden":r.const("true")}),r.createElement("span",null,function(){return e.props.title()},r.const(" ")))},t}(r.Class),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-popover-content dcg-resources-content"),role:r.const("group"),"aria-label":r.const("Resources")},r.createElement(o,{href:r.const("http://learn.desmos.com"),icon:r.const("dcg-icon-rocket"),title:function(){return e.controller.t("Getting Started")}}),r.createElement(o,{href:r.const("https://www.youtube.com/playlist?list=PLfM6zMGnbgOGLZc-_Yj3QVK3Vz_L4Cw59"),icon:r.const("dcg-icon-film"),title:function(){return e.controller.t("Video Tutorials")}}),r.createElement(o,{href:function(){var t=e.controller.languageController.getLanguage();return i.enabled_languages[t]?i.enabled_languages[t].userGuideURL:i.enabled_languages.en.userGuideURL},icon:r.const("dcg-icon-book"),title:function(){return e.controller.t("Desmos User Guide")}}),r.createElement(o,{href:r.const("http://support.desmos.com/hc/en-us"),icon:r.const("dcg-icon-comments"),title:function(){return e.controller.t("Help Center")}}),r.createElement("div",{class:r.const("dcg-resource-link dcg-action-show-hotkeys"),role:r.const("link"),tabindex:r.const(0),onTap:function(){return e.controller.dispatch({type:"show-hotkeys"})}},r.createElement("i",{class:r.const("dcg-icon-keyboard")}),r.createElement("span",null,function(){return e.controller.t("Keyboard Shortcuts")})))},t}(r.Class);t.ResourceLinks=a}),define("main/parse_json_errors",["require"],function(e){"use strict";return function(e){if(0===e.status)return[{message:"Connection failed. Check your internet connection?"}];try{return JSON.parse(e.responseText).errors}catch(e){return[{message:"Unexpected server error. Try again, or e-mail calculator@desmos.com."}]}}}),define("main/calculator_backend",["require","exports","main/graph","./backend"],function(e,t,n,r){"use strict";function i(e,t){if(!t.hasOwnProperty("myGraphs"))throw new Error("Argument Error: saveGraph options must specify myGraphs");if(!t.hasOwnProperty("isUpdate"))throw new Error("Argument Error: saveGraph options must specify isUpdate");var i={parent_hash:e.parentHash,recovery_parent_hash:e.recoveryParentHash,thumb_data:e.thumbURL,graph_hash:e.hash,my_graphs:t.myGraphs,is_update:t.isUpdate,recovery:t.recovery,title:e.title||void 0,calc_state:e.graphData};return r.post("/api/v1/calculator/save",i).then(function(t){return n.updateFromSync(e,t),e})}function o(e){return r.post("/api/v1/calculator/email_feedback",e)}function a(){return r.getJSON("/api/v1/calculator/my_graphs")}function s(e){var t=e.hash;return r.post("/api/v1/calculator/my_graphs/remove",{hash:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.removeGraph=t.getGraphs=t.emailFeedback=t.saveGraph=void 0,t.saveGraph=i,t.emailFeedback=o,t.getGraphs=a,t.removeGraph=s}),define("calculator-shell/suggestion-form",["require","exports","main/parse_json_errors","main/calculator_backend","tslib","dcgview","jquery","underscore"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestionForm=void 0;var c=o.Components,l=c.If,u=c.For,d=c.Input,p=c.Textarea,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.formErrors=[],this.feedbackInProgress=!1,this.feedbackFocused=!1,this.feedbackFromName="",this.feedbackMessage="",this.didSendFeedbackEmail=!1},t.prototype.template=function(){var e=this;return o.createElement("div",{class:o.const("dcg-suggestions")},o.createElement("div",{class:o.const("template-errors")},o.createElement(l,{predicate:function(){return!!e.formErrors.length}},function(){return o.createElement(u,{each:function(){return s.map(e.formErrors,function(e){return JSON.stringify(e)})}},o.createElement("span",null,function(t){var n=JSON.parse(t).message;return o.createElement("div",{class:o.const("errors")},o.createElement("span",null,function(){return e.controller.t(n)}))}))})),o.createElement(l,{predicate:function(){return e.didSendFeedbackEmail}},function(){return o.createElement("div",{class:o.const("dcg-feedback-email-sent")},function(){return e.controller.t("Thanks for the feedback—you'll hear from us soon!")})}),o.createElement("form",{didMount:this.didMountSuggestionForm.bind(this),class:o.const("dcg-action-submit")},o.createElement(p,{placeholder:o.const("Send us your question or suggestion..."),name:o.const("message"),onFocus:function(){return e.onFocusFeedback()},style:function(){return{height:e.feedbackFocused?"80px":"33px"}},value:function(){return e.feedbackMessage},onInput:function(t){if(e.feedbackMessage=t,!e.unmounted)return e.update()}}),o.createElement(l,{predicate:function(){return e.feedbackFocused}},function(){return o.createElement("div",{class:o.const("dcg-suggestions-expansion")},o.createElement(l,{predicate:function(){return!e.userController.isLoggedIn()}},function(){return o.createElement("div",{class:o.const("template-unlessuser")},o.createElement("div",{class:o.const("dcg-feedback-email-label")},function(){return e.controller.t("Please provide an email so we can write back. ")},o.createElement("i",null,o.const("("),function(){return e.controller.t("optional")},o.const(")"))),o.createElement(d,{name:o.const("anonymous-email"),class:o.const("dcg-anonymous-email"),placeholder:o.const("Email Address"),type:o.const("email"),value:function(){return e.feedbackFromName},onInput:function(t){if(e.feedbackFromName=t,!e.unmounted)return e.update()}}))}),o.createElement("span",{class:o.const("dcg-feedback-btns")},o.createElement("a",{role:o.const("link"),tabindex:o.const(0),class:o.const("dcg-btn-light-gray dcg-action-closesuggestion"),onTap:function(){return e.controller.dispatch({type:"toggle-menu",payload:"none"})}},function(){return e.controller.t("Cancel")}),o.createElement("button",{
class:o.const("dcg-btn-green"),name:o.const("submit"),type:o.const("submit")},function(){return e.controller.t("Send Feedback")})),o.createElement(l,{predicate:function(){return e.feedbackInProgress}},function(){return o.createElement("div",{class:o.const("template-processing")},o.createElement("span",{class:o.const("dcg-spinner")}),function(){return e.controller.t("sending...")})}))})))},t.prototype.didMountSuggestionForm=function(e){var t=this;return a(e).on("submit",function(e){return e.preventDefault(),t.submitForm()})},t.prototype.onFocusFeedback=function(){this.feedbackFocused=!0,this.unmounted||this.update()},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.submitForm=function(){var e=this;this.didSendFeedbackEmail=!1,this.feedbackInProgress=!0,this.formErrors=[];var t=a.trim(a('textarea[name="message"]').val());if(t.length||(this.formErrors=[{message:this.controller.t("Please enter your feedback")}]),this.formErrors.length)return this.feedbackInProgress=!1,void(this.unmounted||this.update());var i={message:t,state:JSON.stringify(this.controller.api.getState()),userAgent:navigator.userAgent,"anonymous-email":a('input[name="anonymous-email"]').val()};r.emailFeedback(i).done(function(){e.didSendFeedbackEmail=!0,e.feedbackMessage="",e.feedbackFromName="",e.feedbackFocused=!1,setTimeout(function(){e.didSendFeedbackEmail=!1,e.unmounted||e.update()},2e3)}).fail(function(t){e.formErrors=n(t)}).always(function(){e.feedbackInProgress=!1,e.unmounted||e.update()}),this.unmounted||this.update()},t}(o.Class);t.SuggestionForm=h}),define("calculator-shell/feedback-links",["require","exports","tslib","dcgview","./suggestion-form"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeedbackLinks=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement("div",{class:r.const("dcg-popover-content dcg-hide-on-mobile"),role:r.const("group"),"aria-label":r.const("Feedback")},r.createElement("div",{class:r.const("dcg-resources-content dcg-feedback-content")},r.createElement(i.SuggestionForm,{controller:this.props.controller})))},t}(r.Class);t.FeedbackLinks=o}),define("loadcss!calculator-shell/help",function(){}),define("calculator-shell/help-menu",["require","exports","tslib","dcgview","./menu","./tour-links","./resource-links","./feedback-links","loadcss!./help"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HelpMenu=void 0;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement(i.Menu,{title:function(){return e.controller.t("Tours")},type:function(){return"help"},label:function(){return e.controller.t("Help Menu")},controller:this.props.controller},r.createElement(o.TourLinks,{controller:this.props.controller}),r.createElement("div",{class:r.const("dcg-popover-title"),"aria-hidden":r.const("true")},function(){return e.controller.t("Resources")}),r.createElement(a.ResourceLinks,{controller:this.props.controller}),r.createElement("div",{class:r.const("dcg-popover-title dcg-interior-title dcg-hide-on-mobile"),"aria-hidden":r.const("true")},function(){return e.controller.t("Feedback")}),r.createElement(s.FeedbackLinks,{controller:this.props.controller}))},t}(r.Class);t.HelpMenu=c}),define("loadcss!lib/selectable-input",function(){}),define("lib/selectable-input",["require","exports","tslib","dcgview","browser","jquery","loadcss!./selectable-input"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectableInput=void 0;var a=r.Components,s=a.Input,c=a.Switch,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unmounted=!1,t}return n.__extends(t,e),t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-selectable-input-container")},r.createElement(s,{class:this.const("dcg-permalink select-all dcg-variable-permalink"),"aria-label":function(){return e.props.controller().t("Link to this graph")},name:function(){return e.props.controller().t("Link to this graph")},value:this.props.link,didMount:function(t){e.inputEl=t,i.IS_MOBILE||e.inputEl.focus()},onTap:function(){return e.inputEl.select()},onInput:function(){}}),r.createElement("div",{role:r.const("button"),tabindex:r.const(0),class:r.const("dcg-copy-button"),onTap:this.bindFn(this.copyLink)},r.createElement(c,{key:function(){return e.copyStatus}},function(t){return"success"==t?r.createElement("span",{"aria-label":function(){return e.props.controller().t("Link copied")}},r.createElement("i",{class:r.const("dcg-icon-check")})):"error"==t?r.createElement("span",{"aria-label":function(){return e.props.controller().t("Unable to copy link")}},r.createElement("i",{class:r.const("dcg-icon-error")})):r.createElement("span",{class:r.const("dcg-copy-text")},function(){return e.props.controller().t("Copy")})})))},t.prototype.copyLink=function(){var e=this;if(this.inputEl){o(this.inputEl).focus().select(),this.copyStatus="success";try{document.execCommand("copy")}catch(e){this.copyStatus="error"}this.unmounted||(this.update(),clearTimeout(this.copyStatusTimeout),this.copyStatusTimeout=setTimeout(function(){e.copyStatus=null,e.unmounted||e.update()},2500))}},t}(r.Class);t.SelectableInput=l}),define("loadcss!calculator-shell/share-menu",function(){}),define("calculator-shell/share-menu",["require","exports","main/calculator_backend","tslib","dcgview","jquery","lib/selectable-input","./menu","analytics/looker","loadcss!./share-menu"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareMenu=void 0;var l=i.Components,u=l.If,d=l.Textarea,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController,this.graph=null,this.shareInProgress=!0,this.didSharingFail=!1,c.logJSON("user-action::open-share-dropdown",{})},t.prototype.template=function(){var e=this;return i.createElement(s.Menu,{title:function(){return e.controller.t("Share Your Graph")},type:i.const("share"),label:function(){return e.controller.t("Share Options")},controller:this.props.controller},i.createElement("div",{class:i.const("dcg-popover-content")},i.createElement(u,{predicate:function(){return e.shareInProgress}},function(){return i.createElement("div",{class:i.const("dcg-loading")},i.createElement("span",{class:i.const("dcg-spinner")}),function(){return e.controller.t("Loading...")})}),i.createElement(u,{predicate:function(){return e.didSharingFail}},function(){return i.createElement("div",{class:i.const("dcg-failed")},i.createElement("span",{"aria-live":i.const("assertive"),"aria-atomic":i.const(!0)},function(){return e.controller.t("Sorry, there was an error generating a link to your graph. Check your internet connection.")+" "}),i.createElement("span",{role:i.const("button"),tabindex:i.const(0),class:i.const("dcg-action-retry"),onTap:function(){return e.controller.dispatch({type:"toggle-menu",payload:"none"}),e.controller.dispatch({type:"toggle-menu",payload:"share"})}},function(){return e.controller.t("Retry now")}),function(){return" "+e.controller.t("or")+" "},i.createElement("span",{role:i.const("button"),tabindex:i.const(0),class:i.const("dcg-action-close"),onTap:function(){return e.controller.dispatch({type:"toggle-menu",payload:"share"})}},function(){return e.controller.t("Cancel")}),i.const("."))}),i.createElement(u,{predicate:function(){return!e.shareInProgress&&!e.didSharingFail}},function(){return i.createElement("div",{class:i.const("dcg-loaded"),didMount:e.didMountLoaded.bind(e)},function(){return e.controller.t("Share this link:")},i.createElement(a.SelectableInput,{controller:e.props.controller,link:function(){return e.getGraphPath()}}),i.createElement(u,{predicate:function(){return!e.controller.shouldDisablePrintAndExport()}},function(){return i.createElement("div",{class:i.const("dcg-share-actions")},i.createElement("span",{class:i.const("dcg-print-link"),onTap:e.print.bind(e),tabindex:i.const(0),"aria-label":i.const("Print Graph and Equations"),role:i.const("link")},i.createElement("i",{class:i.const("dcg-icon-print")}),i.createElement("span",null,function(){return e.controller.t("Print")})),i.createElement("span",{class:i.const("dcg-export-image-link"),onTap:e.exportImage.bind(e),tabindex:i.const(0),"aria-label":i.const("Export Image"),role:i.const("link")},i.createElement("i",{class:i.const("dcg-icon-export")}),i.createElement("span",null,function(){return e.controller.t("Export Image")})),i.createElement("span",{class:function(){return{"dcg-embed-link":!0,"dcg-selected":e.embedVisible}},onTap:e.toggleEmbedVisible.bind(e),tabindex:i.const(0),"aria-label":i.const("Embed Graph"),role:i.const("link")},i.createElement("i",{class:i.const("dcg-icon-embed")}),i.createElement("span",null,function(){return e.controller.t("Embed")})))}),i.createElement(u,{predicate:function(){return e.embedVisible}},function(){return i.createElement("div",{class:i.const("dcg-embed-div share-div"),didMount:e.didMountTextarea.bind(e)},i.createElement(d,{rows:i.const("6"),class:i.const("select-all first-input dcg-variable-htmlembedcode"),value:function(){return e.getGraphEmbedCode()},onInput:function(){}}))}),i.createElement(u,{predicate:function(){return e.shouldShowArtContest()}},function(){return i.createElement("div",{class:i.const("dcg-art-contest-container")},i.createElement("span",{class:i.const("dcg-contest-text")},function(){return e.controller.t("Global Math Art Contest")}),i.createElement("div",{class:i.const("dcg-enter-btn"),role:i.const("button"),tabindex:i.const(0),onTap:function(){return e.controller.state.artContestURLFromShareMenu=e.getGraphPath(),e.controller.dispatch({type:"open-contest-modal"})}},function(){return e.controller.t("Join In!")}))}))})))},t.prototype.didMountTextarea=function(e){o(e).find("textarea").focus().select()},t.prototype.toggleEmbedVisible=function(){this.embedVisible=!this.embedVisible,this.unmounted||this.update()},t.prototype.twitterUrl=function(){return"http://twitter.com/home?status=Check out my @desmos graph: "+this.getGraphPath()},t.prototype.facebookUrl=function(){return"http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(this.getGraphPath())},t.prototype.didMountLoaded=function(){this.embedVisible=!1},t.prototype.print=function(){window.print()},t.prototype.exportImage=function(e){this.controller.dispatch({type:"export-image",device:e.device})},t.prototype.getGraphPath=function(){return null!=this.graph?this.graph.getURL():void 0},t.prototype.getGraphEmbedCode=function(){if(!this.graph)return"";return'<iframe src="'+this.getGraphPath()+'?embed" width="500px" height="500px" style="border: 1px solid #ccc" frameborder=0></iframe>'},t.prototype.shouldShowArtContest=function(){return!!this.controller.isArtContestEnabled()&&(this.controller.isGraphComplexEnoughForContest()&&this.controller.isLoggedIn())},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.didMount=function(){var e=this;return this.graphsController.shareGraph().done(function(t){e.graph=t}).fail(function(){e.didSharingFail=!0}).always(function(){e.shareInProgress=!1,e.unmounted||e.update()})},t}(i.Class);t.ShareMenu=p}),define("calculator-shell/account-menu",["require","exports","tslib","dcgview","./menu"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountMenu=void 0;var o=r.Components.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController},t.prototype.template=function(){var e=this;return r.createElement(o,{predicate:function(){return e.userController.isLoggedIn()}},function(){return r.createElement(i.Menu,{type:function(){return"account"},label:function(){return e.controller.t("Account Information")},controller:e.props.controller},r.createElement("div",{class:r.const("user-info")},r.createElement("span",{class:r.const("account-name")},function(){return e.userController.getFullName()}),r.createElement("span",{class:r.const("account-email")},function(){return e.userController.getEmail()}),r.createElement("a",{class:r.const("dcg-action-accountsettings"),role:r.const("link"),tabindex:r.const(0),onTap:function(){return e.controller.dispatch({type:"edit-account"})}},function(){return e.controller.t("Account Settings")})),r.createElement("a",{class:r.const("dcg-action-logout"),role:r.const("link"),tabindex:r.const(0),onTap:function(){return e.logout()}},function(){return e.controller.t("Sign Out")}))})},t.prototype.logout=function(){this.controller.dispatch({type:"toggle-menu",payload:"none"}),this.userController.logout()},t}(r.Class);t.AccountMenu=a}),define("calculator-shell/wrapper",["require","exports","tslib","dcgview","./view","./language-menu","./help-menu","./share-menu","./account-menu"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewWrapper=void 0;var l=r.Components.Switch,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",null,r.createElement(i.HeaderBar,{controller:this.props.controller}),r.createElement(l,{key:function(){return e.controller.getOpenMenu()}},function(t){switch(t){case"language":return r.createElement(o.LanguageMenu,{controller:e.props.controller});case"help":return r.createElement(a.HelpMenu,{controller:e.props.controller});case"share":return r.createElement(s.ShareMenu,{controller:e.props.controller});case"account":return r.createElement(c.AccountMenu,{controller:e.props.controller});default:return r.createElement("span",null)}}))},t}(r.Class);t.ViewWrapper=u}),define("calculator-shell/modal",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{modal_section:!0,"dcg-hotkeys-dialog":"hotkeys"===e.props.controller().getOpenModal()}}},this.children)},t}(r.Class);t.Modal=i}),define("calculator-shell/save-dialog",["require","exports","tslib","dcgview","./modal","jquery"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveDialog=void 0;var a=r.Components,s=a.Input,c=a.Checkbox,l=a.If,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController,this.lastSavedTitle=this.graphsController.getCurrentGraphTitle(),this.newSaveTitle=this.lastSavedTitle,null==this.controller.state.saveDialog&&(this.controller.state.saveDialog={copyOnSave:!0})},t.prototype.template=function(){var e=this;return r.createElement(i.Modal,{controller:this.props.controller},r.createElement("div",{id:r.const("save-dialog")},r.createElement("h1",null,function(){return e.getSaveText()}),r.createElement("div",{class:r.const("dcg-clear")}),r.createElement("form",{didMount:this.didMountForm.bind(this)},r.createElement("label",{class:r.const("input-label")},r.createElement("div",{class:r.const("graph-title-title")},function(){return e.controller.t("Title")},r.const(" ")),r.createElement(s,{class:r.const("title-input"),name:r.const("title"),placeholder:function(){return e.graphsController.getUntitledString()},value:function(){return e.newSaveTitle},maxlength:r.const("140"),onInput:function(t){return e.newSaveTitle=t},didMount:function(e){return o(e).focus().select()}})),r.createElement("div",null,r.createElement("button",{type:r.const("submit"),class:r.const("dcg-btn dcg-btn-green pull-right dcg-action-save")},function(){return e.controller.t("Save")}),r.createElement(l,{predicate:function(){return e.graphsController.wasCurrentGraphEverSaved()}},function(){return r.createElement("label",{class:r.const("dcg-new-copy pull-right")},r.createElement(c,{checked:function(){return e.controller.state.saveDialog.copyOnSave},onChange:function(t){if(e.controller.state.saveDialog.copyOnSave=t,!e.unmounted)return e.update()}}),r.createElement("span",{class:r.const("duplicate-label")},function(){return e.getDuplicateText()}))})))))},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.didMountForm=function(e){var t=this;o(e).on("submit",function(e){e.preventDefault(),""===t.newSaveTitle&&(t.newSaveTitle="Untitled Graph"),t.controller.dispatch({type:"save-graph",payload:{title:t.newSaveTitle,saveAs:t.controller.state.saveDialog.copyOnSave}})})},t.prototype.getSaveText=function(){return"graphing"===this.controller.product?this.controller.t("Save This Graph"):"geometry"===this.controller.product?this.controller.t("Save This Construction"):""},t.prototype.getDuplicateText=function(){return"graphing"===this.controller.product?this.controller.t("Duplicate This Graph"):"geometry"===this.controller.product?this.controller.t("Duplicate This Construction"):""},t}(r.Class);t.SaveDialog=u}),define("loadcss!accounts/shared-pillow-styles",function(){}),define("loadcss!accounts/account-settings-modal",function(){}),define("calculator-shell/create-account-dialog",["require","exports","main/parse_json_errors","tslib","dcgview","./modal","jquery","underscore","dcgview-helpers/checkbox","lib/parse-query-params","loadcss!accounts/shared-pillow-styles","loadcss!accounts/account-settings-modal"],function(e,t,n,r,i,o,a,s,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAccountDialog=void 0;var u=i.Components,d=u.Switch,p=u.If,h=u.For,f=u.Input,m=l.getQueryParams().appleSSO,g=!!m,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.selectedView=0,this.userController=this.controller.userController,this.name="",this.email="",this.password="",this.consentChecked=!1,this.isSubmittingForm=!1,this.formErrors=[],this.breakPoint=660,this.measureWindow()},t.prototype.template=function(){var e=this;return i.createElement(o.Modal,{controller:this.props.controller},i.createElement("div",{class:i.const("account-modal-contents")},i.createElement("div",{class:i.const("fixed-header")},i.createElement("h1",null,function(){return e.controller.t("Create Account")})),i.createElement("div",{class:i.const("navigation-tabs"),role:i.const("navigation")},i.createElement("div",{role:i.const("link"),tabindex:i.const(0),class:function(){return{"menu-item-gray":!0,"profile-view-button":!0,selected:0===e.selectedView}},onTap:function(){return e.updateView(0)}},this.externalTitle.bind(this)),i.createElement("div",{role:i.const("link"),tabindex:i.const(0),class:function(){return{"menu-item-gray":!0,"password-view-button":!0,selected:1===e.selectedView}},onTap:function(){return e.updateView(1)}},this.desmosTitle.bind(this))),i.createElement("div",{class:i.const("content-container")},i.createElement(d,{key:function(){return e.selectedView}},function(t){return 0===t?i.createElement("div",{class:i.const("notice-checkbox-google")},i.createElement(c.Checkbox,{ariaLabel:e.consentText.bind(e),checked:function(){return e.consentChecked},disabled:e.const(!1),onChange:function(){if(e.consentChecked=!e.consentChecked,!e.unmounted)return e.update()}},e.consentText.bind(e)),i.createElement(c.Checkbox,{ariaLabel:e.const("Checkbox to indicate agreement to privacy policy (desmos.com/privacy) and terms of service (desmos.com/terms)."),checked:function(){return e.privacyChecked},disabled:e.const(!1),onChange:function(){if(e.privacyChecked=!e.privacyChecked,!e.unmounted)return e.update()}},i.createElement("span",{class:i.const("terms-notice"),didMount:e.didMountAPrivacyNode.bind(e)})),i.createElement(p,{predicate:function(){return window.googleAuthConnectionFailed}},function(){return i.createElement("div",{class:i.const("google_auth_unavailable")},i.const("Google Login is not available on this device."))}),i.createElement(p,{predicate:function(){return!window.googleAuthConnectionFailed}},function(){return i.createElement("div",{class:function(){return{"dcg-btn":!0,"dcg-btn-gray-outline":!0,"dcg-action-googlelogin":!0,"dcg-create-account-google-btn":!0,"google-login":!0,"external-login":!0,"dcg-disabled":!e.consentChecked||!e.privacyChecked}},role:i.const("button"),tabindex:i.const(0),onTap:function(){return e.googleLogin()}},i.createElement("div",{class:i.const("dcg-google-icon dcg-external-login-logo")}),i.createElement("span",null,e.bindFn(e.getGoogleLoginText)))}),i.createElement(p,{predicate:function(){return g}},function(){return i.createElement("div",{class:function(){return{"dcg-btn":!0,"dcg-btn-gray-outline":!0,"dcg-action-applelogin":!0,"dcg-create-account-google-btn":!0,"apple-login":!0,"external-login":!0,"dcg-disabled":!e.consentChecked||!e.privacyChecked}},role:i.const("button"),tabindex:i.const(0),onTap:function(){return e.appleLogin()}},i.createElement("div",{class:i.const("dcg-apple-icon dcg-external-login-logo")}),i.createElement("span",null,e.bindFn(e.getAppleLoginText)))})):1===t?i.createElement("div",null,i.createElement(p,{predicate:function(){return!!e.formErrors.length}},function(){return i.createElement(h,{each:function(){return s.map(e.formErrors,function(e){return JSON.stringify(e)})}},i.createElement("span",null,function(t){var n=JSON.parse(t).message;return i.createElement("div",{class:i.const("errors")},i.createElement("span",null,function(){return e.controller.t(n)}))}))}),i.createElement("form",{class:i.const("dcg-action-submit"),didMount:e.didMountForm.bind(e)},i.createElement("div",{class:i.const("form_content_interior")},i.createElement("label",null,i.createElement("span",null,function(){return e.controller.t("Email")}),i.createElement(f,{type:i.const("email"),name:i.const("email"),class:i.const("input"),required:i.const("required"),placeholder:i.const("Email address"),"aria-describedby":i.const("email-description"),value:function(){return e.email},onInput:function(t){if(e.email=t,!e.unmounted)return e.update()}})),i.createElement("label",null,i.createElement("span",null,function(){return e.controller.t("Name")}),i.createElement(f,{type:i.const("text"),name:i.const("name"),class:i.const("input"),required:i.const("required"),"aria-describedby":i.const("name-description"),didMount:function(t){if("keyboard"===e.controller.getModalDevice())return t.focus()},value:function(){return e.name},placeholder:i.const("Name or nickname"),onInput:function(t){if(e.name=t,!e.unmounted)return e.update()}})),i.createElement("label",null,i.createElement("span",null,function(){return e.controller.t("Password")}),i.createElement(f,{type:i.const("password"),class:i.const("input"),name:i.const("password"),required:i.const("required"),placeholder:i.const("Password"),value:function(){return e.password},onInput:function(t){if(e.password=t,!e.unmounted)return e.update()}})),i.createElement("div",{class:i.const("notice-checkbox-email")},i.createElement(c.Checkbox,{ariaLabel:e.consentText.bind(e),checked:function(){return e.consentChecked},disabled:e.const(!1),onChange:function(){if(e.consentChecked=!e.consentChecked,!e.unmounted)return e.update()}},e.consentText.bind(e))),i.createElement(c.Checkbox,{ariaLabel:e.const("Checkbox to indicate agreement to privacy policy (desmos.com/privacy) and terms of service (desmos.com/terms)."),checked:function(){return e.privacyChecked},disabled:e.const(!1),onChange:function(){if(e.privacyChecked=!e.privacyChecked,!e.unmounted)return e.update()}},i.createElement("span",{class:i.const("terms-notice"),didMount:e.didMountAPrivacyNode.bind(e)})),i.createElement("div",{class:i.const("sign-in-options")},i.createElement(p,{predicate:function(){return e.isSubmittingForm}},function(){return i.createElement("div",{class:i.const("progress_indicator create-account-progress")},i.createElement("div",{class:i.const("dcg-spinner")}))}),i.createElement(p,{predicate:function(){return!e.isSubmittingForm}},function(){return i.createElement("button",{type:i.const("submit"),class:function(){return{"dcg-btn-green":!0,"dcg-disabled":!e.submitEnabled()}}},function(){return e.controller.t("Create Account")})}))))):i.createElement("span",null)}),i.createElement("div",{class:i.const("dcg-cookie-notice")},i.createElement("b",null,i.const("Note:")),i.const("Desmos uses cookies to enable persistence when you are signed in. If you do not wish to use cookies, please use Desmos without logging in."),i.createElement("a",{class:i.const("dcg-cookie-notice-learn-more"),href:i.const("/privacy"),target:i.const("_blank")},i.const("Learn More."))))))},t.prototype.didMountAPrivacyNode=function(e){var t=this.controller.t("Terms of Service"),n=this.controller.t("Privacy Policy"),r=this.controller.t("I have read, understand, and accept the __terms_of_use_link__ and __privacy_policy_link__.",{terms_of_use_link:"TERMSLINK",privacy_policy_link:"PRIVACYLINK",btn:this.controller.t("Create Account")});r=r.replace("TERMSLINK","<a href='/terms', target='_blank'>"+t+"</a>"),r=r.replace("PRIVACYLINK","<a href='/privacy', target='_blank'>"+n+"</a>"),e.innerHTML=r},t.prototype.submitEnabled=function(){if(!this.consentChecked||!this.privacyChecked)return!1;if(!this.$form)return!1;var e=this.$form.find('[name="password"]').val(),t=this.$form.find('[name="email"]').val(),n=this.$form.find('[name="name"]').val();return!!(e&&t&&n)},t.prototype.didMountForm=function(e){var t=this;this.$form=a(e),a(e).on("submit",function(n){n.preventDefault(),t.submitEnabled()&&t.submitForm(e)})},t.prototype.googleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.userController.googleLogin({fromUI:"create"})},t.prototype.appleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.userController.appleLogin({fromUI:"create"})},t.prototype.getGoogleLoginText=function(){return this.consentChecked&&this.privacyChecked?this.controller.t("Sign in with Google"):this.controller.t("Please consent above to sign in with Google")},t.prototype.getAppleLoginText=function(){return this.consentChecked&&this.privacyChecked?this.controller.t("Sign in with Apple"):this.controller.t("Please consent above to sign in with Apple")},t.prototype.submitForm=function(e){var t=this,r=a(e).serialize();this.formErrors=[],this.isSubmittingForm=!0,this.unmounted||this.update(),this.userController.createAccount(r).done(function(){if(!t.unmounted)return t.controller.dispatch({type:"close-modal"})}).fail(function(e){t.formErrors=n(e)}).always(function(){t.isSubmittingForm=!1,t.unmounted||t.update()})},t.prototype.updateView=function(e){this.selectedView=e,this.unmounted||this.update()},t.prototype.externalTitle=function(){return g?this.windowWidth>this.breakPoint?this.controller.t("External Account"):this.controller.t("External"):this.windowWidth>this.breakPoint?this.controller.t("Google Account"):this.controller.t("Google")},t.prototype.desmosTitle=function(){return this.windowWidth>this.breakPoint?this.controller.t("Email Address"):this.controller.t("Email")},t.prototype.measureWindow=function(){return this.windowWidth=a(window).width()},t.prototype.didMount=function(){var e=this;a(window).on("resize.create-account",s.throttle(function(){e.measureWindow(),e.update()},200))},t.prototype.didUnmount=function(){a(window).off("resize.create-account"),this.unmounted=!0},t.prototype.consentText=function(){return"I agree to let Desmos store and maintain the information I provide (e.g. login credentials, saved work) in order to provide and improve its service. To withdraw consent, you may delete your account at any time."},t}(i.Class);t.CreateAccountDialog=y}),define("calculator-shell/login-dialog",["require","exports","main/parse_json_errors","tslib","dcgview","./modal","lib/parse-query-params","jquery","underscore"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginDialog=void 0;var l=i.Components,u=l.If,d=l.For,p=l.Input,h=a.getQueryParams().appleSSO,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.email="",this.password="",this.isSubmittingForm=!1,this.formErrors=[]},t.prototype.template=function(){var e=this;return i.createElement(o.Modal,{controller:this.props.controller},i.createElement("div",{id:i.const("login-dialog"),class:i.const("account-modal-contents")},i.createElement("h1",null,function(){return e.controller.t("Sign In")}),i.createElement("div",{class:i.const("dcg-external-login-btn-container")},i.createElement(u,{predicate:function(){return window.googleAuthConnectionFailed}},function(){return i.createElement("div",{class:i.const("google_auth_unavailable")},function(){return e.controller.t("Google Login is not available on this device.")})}),i.createElement(u,{predicate:function(){return!window.googleAuthConnectionFailed}},function(){return i.createElement("div",{class:i.const("dcg-btn dcg-btn-gray-outline dcg-action-googlelogin external-login google-login"),role:i.const("button"),tabindex:i.const("0"),onTap:function(){return e.googleLogin()}},i.createElement("div",{class:i.const("dcg-google-icon dcg-external-login-logo")}),i.createElement("span",null,function(){return e.controller.t("Sign in with Google")}))}),i.createElement(u,{predicate:function(){return"button"===h}},function(){return i.createElement("div",{class:i.const("dcg-btn dcg-btn-gray-outline dcg-action-applelogin external-login apple-login"),role:i.const("button"),tabindex:i.const("0"),onTap:function(){return e.appleLogin()}},i.createElement("div",{class:i.const("dcg-apple-icon dcg-external-login-logo")}),i.createElement("span",null,function(){return e.controller.t("Sign in with Apple")}))}),i.createElement(u,{predicate:function(){return"link"===h}},function(){return i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),onTap:function(){return e.appleLogin()}},i.createElement("span",null,function(){return e.controller.t("Sign in with Apple")}))})),i.createElement("div",{class:i.const("bg-line")},i.createElement("span",null,function(){return e.controller.t("Or sign in with Desmos")})),i.createElement(u,{predicate:function(){return!!e.formErrors.length}},function(){return i.createElement(d,{each:function(){return c.map(e.formErrors,function(e){return JSON.stringify(e)})}},i.createElement("span",null,function(t){var n=JSON.parse(t).message;return i.createElement("div",{class:i.const("errors")},i.createElement("span",null,function(){return e.controller.t(n)}))}))}),i.createElement("form",{class:i.const("desmos-login dcg-action-submit"),didMount:this.didMountForm.bind(this)},i.createElement("div",{class:i.const("form_content_interior")},i.createElement("label",{for:i.const("email")},i.createElement("span",null,function(){return e.controller.t("Email")}),i.createElement(p,{type:i.const("email"),name:i.const("email"),class:i.const("input"),id:i.const("top_email"),"aria-label":function(){return e.controller.t("Email")},"aria-required":i.const("true"),required:i.const("required"),didMount:function(t){"keyboard"===e.controller.getModalDevice()&&t.focus()},value:function(){return e.email},onInput:function(t){e.email=t,e.unmounted||e.update()}})),i.createElement("label",{for:i.const("password")},i.createElement("span",null,function(){
return e.controller.t("Password")}),i.createElement("div",{class:i.const("input-container")},i.createElement(p,{type:i.const("password"),name:i.const("password"),class:i.const("input"),id:i.const("top_password"),"aria-label":function(){return e.controller.t("Password")},"aria-required":i.const("true"),required:i.const("required"),value:function(){return e.password},onInput:function(t){if(e.password=t,!e.unmounted)return e.update()}}),i.createElement("span",{class:i.const("password-recovery-link")},i.createElement("a",{role:i.const("link"),tabindex:i.const(0),class:i.const("dcg-action-recoverpassword"),onTap:function(){return e.controller.dispatch({type:"recover-password"})}},function(){return e.controller.t("Forgot your password?")})))),i.createElement("div",{class:i.const("sign-in-options")},i.createElement("span",null,i.createElement("a",{role:i.const("link"),tabindex:i.const(0),class:i.const("dcg-action-createaccount"),onTap:function(){return e.controller.dispatch({type:"create-account"})}},function(){return e.controller.t("Create an Account")}),function(){return e.controller.t("or")}),i.createElement(u,{predicate:function(){return e.isSubmittingForm}},function(){return i.createElement("div",{class:i.const("progress_indicator signin_progress_indicator")},i.createElement("div",{class:i.const("dcg-spinner")}))}),i.createElement(u,{predicate:function(){return!e.isSubmittingForm}},function(){return i.createElement("button",{type:i.const("submit"),class:i.const("dcg-btn-green")},function(){return e.controller.t("Sign In")})})),i.createElement("div",{class:i.const("dcg-cookie-notice")},i.createElement("b",null,i.const("Note:")),i.const(" Desmos uses cookies to enable persistence when you are signed in. If you do not wish to use cookies, please use Desmos without logging in."),i.createElement("a",{class:i.const("dcg-cookie-notice-learn-more"),href:i.const("/privacyfaqs"),target:i.const("_blank")},i.const("Learn More.")))))))},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.didMountForm=function(e){var t=this;s(e).on("submit",function(n){n.preventDefault(),t.submitForm(e)})},t.prototype.googleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.userController.googleLogin({fromUI:"login"})},t.prototype.appleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.userController.appleLogin({fromUI:"login"})},t.prototype.submitForm=function(e){var t=this,r=s(e).serialize();this.isSubmittingForm=!0,this.formErrors=[],this.userController.checkPendingDeletion(r).done(function(e){t._pendingDeletion=e.pendingDeletion}).fail(function(){t._pendingDeletion=!1}).always(function(){t.unmounted||(t.unmounted||t.update(),t.userController.desmosLogin(r).done(function(){t.unmounted||(t._pendingDeletion?t.controller.dispatch({type:"show-reenabled"}):t.controller.dispatch({type:"close-modal"}))}).fail(function(e){t.formErrors=n(e)}).always(function(){t.unmounted||(t.isSubmittingForm=!1,t.controller.dispatch({type:"trigger-render"}))}))})},t}(i.Class);t.LoginDialog=f}),define("calculator-shell/recover-password-dialog",["require","exports","main/parse_json_errors","tslib","dcgview","./modal","jquery","underscore"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecoverPasswordDialog=void 0;var c=i.Components,l=c.If,u=c.For,d=c.Input,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.email=this.userController.getEmail(),this.formErrors=[],this.isSubmittingForm=!1,this.didSendRecoveryEmail=!1},t.prototype.template=function(){var e=this;return i.createElement(o.Modal,{controller:this.props.controller},i.createElement("div",{id:i.const("recover-password-dialog")},i.createElement("h1",null,function(){return e.controller.t("Recover Password")}),i.createElement(l,{predicate:function(){return!!e.formErrors.length}},function(){return i.createElement(u,{each:function(){return s.map(e.formErrors,function(e){return JSON.stringify(e)})}},i.createElement("span",null,function(t){var n=JSON.parse(t).message;return i.createElement("div",{class:i.const("errors")},i.createElement("span",null,function(){return e.controller.t(n)}))}))}),i.createElement(l,{predicate:function(){return e.didSendRecoveryEmail}},function(){return i.createElement("div",{role:i.const("alert"),"aria-live":i.const("assertive"),"aria-atomic":i.const("true")},function(){return e.controller.t("Message sent. Please check your email for a password recovery link.")+" "},i.createElement("a",{href:i.const("#"),class:i.const("dcg-action-tryagain"),onTap:function(){return e.didSendRecoveryEmail=!1,e.controller.dispatch({type:"recover-password"})}},function(){return e.controller.t("Didn't work? Try again!")}))}),i.createElement(l,{predicate:function(){return!e.didSendRecoveryEmail}},function(){return i.createElement("form",{class:i.const("dcg-action-submit"),didMount:e.didMountForm.bind(e)},i.createElement("div",{class:i.const("form_content_interior")},i.createElement("div",{class:i.const("recovery-message")},function(){return e.controller.t("Enter your email address to get a password recovery link.")}),i.createElement("label",null,i.createElement("span",null,function(){return e.controller.t("Email:")}),i.createElement(d,{type:i.const("email"),name:i.const("email"),class:i.const("input"),id:i.const("recover_email"),required:i.const("required"),value:function(){return e.email},onInput:function(t){if(e.email=t,!e.unmounted)return e.update()}})),i.createElement("div",{class:i.const("sign-in-options")},i.createElement(l,{predicate:function(){return e.isSubmittingForm}},function(){return i.createElement("div",{class:i.const("progress_indicator create-account-progress")},i.createElement("div",{class:i.const("dcg-spinner")}))}),i.createElement(l,{predicate:function(){return!e.isSubmittingForm}},function(){return i.createElement("button",{type:i.const("submit"),class:i.const("dcg-btn dcg-btn-green")},function(){return e.controller.t("Recover Password")})}))))})))},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.didMountForm=function(e){var t=this;return a(e).on("submit",function(n){n.preventDefault(),t.submitForm(e)})},t.prototype.submitForm=function(e){var t=this,r=a(e).serialize();this.formErrors=[],this.isSubmittingForm=!0,this.userController.recoverPassword(r).done(function(){t.didSendRecoveryEmail=!0}).fail(function(e){t.formErrors=n(e)}).always(function(){t.isSubmittingForm=!1,t.unmounted||t.update()})},t}(i.Class);t.RecoverPasswordDialog=p}),define("loadcss!calculator-shell/hotkeys-dialog",function(){}),define("calculator-shell/hotkeys-dialog",["require","exports","tslib","dcgview","./modal","browser","dcgview-helpers/static-mathquill-view","jquery","loadcss!./hotkeys-dialog"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HotkeysDialog=void 0;var c=r.Components.If,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),null==this.controller.state.hotkeysDialog&&(this.controller.state.hotkeysDialog={shortcutOS:o.IS_APPLE?"mac":"windows"})},t.prototype.template=function(){var e=this;return r.createElement(i.Modal,{controller:this.props.controller},r.createElement("div",{id:r.const("dcg-hotkeys-dialog")},r.createElement("h1",null,function(){return e.controller.t("Keyboard Shortcuts")}),r.createElement("div",{class:r.const("dcg-toggle-container")},r.createElement("span",{class:function(){return{"dcg-action-toggleos":!0,"dcg-windows-option":!0,"dcg-selected":"windows"===e.getShortcutOS()}},role:r.const("button"),tabindex:r.const(0),"aria-pressed":function(){return"windows"===e.getShortcutOS()},onTap:function(){return e.setShortcutOS("windows")}},function(){return e.controller.t("Windows / ChromeOS Shortcuts")}),r.createElement("span",{class:function(){return{"dcg-action-toggleos":!0,"dcg-mac-option":!0,"dcg-selected":"mac"===e.getShortcutOS()}},role:r.const("button"),tabindex:r.const(0),"aria-pressed":function(){return"mac"===e.getShortcutOS()},onTap:function(){return e.setShortcutOS("mac")}},function(){return e.controller.t("Mac Shortcuts")})),r.createElement("div",{class:r.const("dcg-hotkey-container")},r.createElement("div",{class:r.const("dcg-hotkey-section")},r.createElement("h2",{class:r.const("dcg-hotkey-section-header")},function(){return e.controller.t("Common Actions")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},function(){return e.controller.t("Windows / ChromeOS Shortcut")}),r.createElement("th",{class:r.const("dcg-os-mac")},function(){return e.controller.t("Mac Shortcut")})),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Close a Dialog (like this one!)")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Esc"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Esc")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Open a Graph")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("O"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("O")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Save a Graph")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("S"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("S")))),r.createElement("tr",{class:r.const("hotkey-table-row")},r.createElement("td",null,function(){return e.controller.t("Print a Graph")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("P"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("P")))),r.createElement("tr",{class:r.const("hotkey-table-row")},r.createElement("td",null,function(){return e.controller.t("Focus the Expression List")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("E"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("E")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Add an Expression")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("X"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("X")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Add a Note")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("O"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("O")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Collapse / Expand Selected Folder")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Add a Folder")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("F"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("F")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Add an Image")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("I"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("I")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Add a Table")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("T"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("T")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Undo")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Z"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Z")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Redo")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Z"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Z")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Turn Edit List Mode On or Off")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("D"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("OPTION")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("D")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Open or Close the Graph Settings Menu")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("G"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("G")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Open or Close the Account Menu")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("A"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("A")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Open or Close the Help Menu")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("H"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("H")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Open or Close the Language Menu")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("L"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("L")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Open or Close the Share Menu")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("S"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("S"))))),r.createElement("h2",{class:r.const("dcg-hotkey-section-header")},function(){return e.controller.t("Expression Entry and Navigation")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},r.const("Windows \\x2F ChromeOS Shortcut")),r.createElement("th",{class:r.const("dcg-os-mac")},r.const("Mac Shortcut"))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Previous Expression")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Next Expression")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Remove Selected Empty Expression")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Backspace"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Delete")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Previous Character")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Next Character")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Numerator Within Fraction")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Denominator Within Fraction")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Exit Current Block")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Beginning of Current Block")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Home"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("End of Current Block")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("End"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Beginning of Current Expression")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Home"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("End of Current Expression")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("End"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Selection Left")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Selection Right")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Delete Selection")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Backspace"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Delete")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Select All")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("A"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("A")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Parent Block")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{
class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Focused Block")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Left-Adjacent Block")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Right-Adjacent Block")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Selection")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Answer")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("="))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement(c,{predicate:function(){return e.controller.isDecimalToFractionEnabled()}},function(){return r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Show Answer as Decimal or Fraction")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("F"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("F"))))})),r.createElement("h2",{class:r.const("dcg-hotkey-section-header")},function(){return e.controller.t("Graphs with Interactive Points")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},r.const("Windows \\x2F ChromeOS Shortcut")),r.createElement("th",{class:r.const("dcg-os-mac")},r.const("Mac Shortcut"))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Focus First Interactive Point On Screen")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("P"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("P")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Go to Next Interactive Point")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Go to Previous Interactive Point")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase X")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease X")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Y")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease Y")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase X by Larger Amount")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease X by Larger Amount")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Y by Larger Amount")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease Y by Larger Amount")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak X Coordinate")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("X"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("X")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Y Coordinate")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Y"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Y")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Label")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("L"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("L")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Color")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("C"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("C"))))),r.createElement("h2",{class:r.const("dcg-hotkey-section-header")},function(){return e.controller.t("Braille")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},function(){return e.controller.t("Windows / ChromeOS Shortcut")}),r.createElement("th",{class:r.const("dcg-os-mac")},function(){return e.controller.t("Mac Shortcut")})),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Switch to Nemeth")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("N"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("N")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Switch to UEB")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("U"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("U")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Switch to Print")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Q"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Q")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Turn Braille Typing On or Off")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("6"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("6")))))),r.createElement("div",{class:r.const("dcg-hotkey-section")},r.createElement("h2",{class:r.const("dcg-hotkey-section-header")},function(){return e.controller.t("Symbols")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},r.const("Windows \\x2F ChromeOS Shortcut")),r.createElement("th",{class:r.const("dcg-os-mac")},r.const("Mac Shortcut"))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("a^b")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("^")),function(){return"("+e.controller.t("usually")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("6")),r.const(")")),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("^")),function(){return"("+e.controller.t("usually")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("6")),r.const(")"))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("a_b")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("_")),function(){return"("+e.controller.t("usually")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("-")),r.const(")")),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("_")),function(){return"("+e.controller.t("usually")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("-")),r.const(")"))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\le")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("\\x3C")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("="))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("\\x3C")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("=")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\ge")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("\\x3E")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("="))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("\\x3E")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("=")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("a'")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("\\'"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("\\'")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\sqrt{a}")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("s")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("q")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("s")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("q")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\sqrt[3]{a}")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("c")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("b")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("c")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("b")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\sqrt[n]{a}")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("n")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("h")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("o")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("o")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("n")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("h")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("o")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("o")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\sum_{n=a}^b")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("s")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("u")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("m"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("s")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("u")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("m")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\int_a^b")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("i")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("n")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("i")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("n")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\prod_{n=a}^b")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("p")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("o")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("d"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("p")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("r")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("o")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("d")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\pi")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("p")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("i"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("p")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("i")))),r.createElement("tr",null,r.createElement("td",null,r.createElement(a.default,{latex:this.const("\\theta")})),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("h")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("e")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("a"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("h")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("e")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("t")),r.createElement("span",{class:r.const("dcg-key-command")},r.const("a"))))),r.createElement("h2",{class:r.const("dcg-hotkey-section-header")},function(){return e.controller.t("Audio Tracing")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},r.const("Windows \\x2F ChromeOS Shortcut")),r.createElement("th",{class:r.const("dcg-os-mac")},r.const("Mac Shortcut"))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Enable or Disable Audio Trace Mode")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("T"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("T")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Summarize Graph")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("S"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("S")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Previous Point")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("J"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("J")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Next Point")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("L"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("L")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Next Point of Interest")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Page Down")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("I"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("I")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Previous Point of Interest")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Page Up")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("K"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("K")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("First Point")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Home")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("U"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{
class:r.const("dcg-key-command")},r.const("Left Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("U")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Last Point")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("End")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("N"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("N")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Point of Interest Count")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("P"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("P")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak X Coordinate")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("X"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("X")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Y Coordinate")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Y"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Y")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Color")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("C"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("C")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Branch")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("B"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("B")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Type of Selected Point")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("T"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("T")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Origin")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("O"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("O")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Previous Curve")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Next Curve")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("COMMAND")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Hear Graph")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("H"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("H")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Hear Only Branch 1 Through 10")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("1")),r.const("-"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("0"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("1")),r.const("-"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("0")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Adjust Playback Speed (1 = slowest, 5 = fastest)")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("ALT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("1")),r.const("-"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("5"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Option")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("1")),r.const("-"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("5")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Volume")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("V"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("V")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease Volume")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("V"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("V")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Announce Active Slider Animations")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("A"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("A")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Toggle Slider Trace Mode")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("S"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("S")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease Value of Selected Slider When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("J"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("J")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease Value of Selected Slider by Larger Increment When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Page Down"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Value of Selected Slider When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("L"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("L")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Value of Selected Slider by Larger Increment When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Page Up"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Lowest Value of Selected Slider When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Home")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("U"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("U")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Move to Highest Value of Selected Slider When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("End")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("N"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")),function(){return e.controller.t("or")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("N")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Select Next Slider When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("K"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("K")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Select Previous Slider When in Slider Trace")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("I"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")),r.const(","),r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")),r.const(", or"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("I"))))),r.createElement("h2",{class:r.const("dcg-hotkey-section-header")},function(){return e.controller.t("Sliders")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},r.const("Windows \\x2F ChromeOS Shortcut")),r.createElement("th",{class:r.const("dcg-os-mac")},r.const("Mac Shortcut"))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease Value")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Decrease Value by Larger Increment")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Page Down"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Value")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Increase Value by Larger Increment")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Page Up"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Lowest Value")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Home"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Highest Value")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("End"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Fn")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))))),r.createElement("h2",{class:r.const("dcg-hotkey-section-header tables-section")},function(){return e.controller.t("Tables")}),r.createElement("table",null,r.createElement("tr",null,r.createElement("th",null,function(){return e.controller.t("Function")}),r.createElement("th",{class:r.const("dcg-os-windows")},r.const("Windows \\x2F ChromeOS Shortcut")),r.createElement("th",{class:r.const("dcg-os-mac")},r.const("Mac Shortcut"))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Previous Cell")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("SHIFT")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Next Cell")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Tab")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Previous Row")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Next Row")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Previous Column")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Next Column")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("First Row in Column")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Up Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Last Row in Column")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Down Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("First Column in Row")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Left Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Last Column in Row")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("Right Arrow")))),r.createElement("tr",null,r.createElement("td",null,function(){return e.controller.t("Speak Column Header")}),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-windows")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("H"))),r.createElement("td",{class:r.const("dcg-keyboard-shortcut dcg-os-mac")},r.createElement("span",{class:r.const("dcg-key-command")},r.const("CTRL")),r.const("+"),r.createElement("span",{class:r.const("dcg-key-command")},r.const("H")))))))))},t.prototype.getShortcutOS=function(){return this.controller.state.hotkeysDialog.shortcutOS},t.prototype.setShortcutOS=function(e){this.controller.state.hotkeysDialog.shortcutOS=e,this.unmounted||this.update()},t.prototype.didMount=function(){this.updateVisibleShortcuts()},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.didUpdate=function(){this.updateVisibleShortcuts()},t.prototype.updateVisibleShortcuts=function(){var e=this.getShortcutOS(),t=s(".dcg-os-mac"),n=s(".dcg-os-windows");"mac"===e?(t.show(),n.hide()):"windows"===e&&(t.hide(),n.show())},t}(r.Class);t.HotkeysDialog=l}),define("calculator-shell/unsupported-browser",["require","exports","tslib","dcgview","./modal"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedBrowserDialog=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement(i.Modal,{controller:this.props.controller},r.createElement("div",{id:r.const("unsupported-browser")},r.createElement("div",{id:r.const("unsupported-browser-title"),style:r.const("color:black; font-size:150%;")},function(){return e.controller.t("Unsupported Browser")}),r.createElement("div",{style:r.const("padding:20px 0px; color:#666")},function(){return e.controller.t("Desmos works best on your version of Android if you use the Chrome Browser.")},r.createElement("br",null),r.createElement("br",null),r.createElement("a",{href:r.const("https://play.google.com/store/apps/details?id=com.android.chrome")},function(){return e.controller.t("Click here to download Google Chrome.")},r.createElement("br",null),r.createElement("br",null)),r.createElement("div",{style:r.const("text-align: center; margin-top: 25px; margin-bottom:-16px")},r.createElement("a",{role:r.const("link"),tabindex:r.const("0"),class:r.const("dcg-btn dcg-action-hide dcg-do-not-blur"),onTap:function(){return e.controller.dispatch({type:"close-modal"})}},function(){return e.controller.t("Hide this warning.")})))))},t}(r.Class);t.UnsupportedBrowserDialog=o}),define("loadcss!accounts/delete-account",function(){}),define("accounts/delete-account",["require","exports","tslib","dcgview","jquery","analytics/looker","loadcss!./delete-account"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteAccount=void 0;var a=r.Components.If,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("delete-account-box")},r.createElement("div",{class:r.const("delete-title"),role:r.const("heading"),"aria-level":r.const("1")},function(){return e.controller.t("Are you sure you want to delete your account?")}),r.createElement("div",{class:r.const("delete-description")},function(){return e.controller.t("When you delete your account,")},r.createElement("span",{class:r.const("delete-important")},function(){return e.controller.t("we will retain your data for 30 days.")}),r.const(" "),function(){return e.controller.t("You can reactivate your account at any time during those 30 days by logging back in.")},r.const(" "),function(){return e.controller.t("If there's something about Desmos we can improve, please ")},r.createElement("a",{href:r.const("mailto:support@desmos.com"),class:r.const("blue-link")},function(){return e.controller.t("let us know")}),r.const("."),r.createElement("br",null),r.createElement("br",null),function(){return e.controller.t("We will send you a link to your email address (__email__) so you can delete your account.",{email:e.userController.getEmail()})}),r.createElement("form",{class:r.const("delete-account-form"),didMount:this.didMountDeleteForm.bind(this)},r.createElement("div",{class:r.const("account-error-container")},r.createElement(a,{predicate:function(){return!!e.errorMessage}},function(){return r.createElement("div",{class:r.const("form-error-message"),"aria-live":r.const("assertive"),"aria-atomic":r.const("true")},function(){return e.errorMessage})})),r.createElement("div",{class:r.const("actions")},r.createElement("div",{role:r.const("link"),tabindex:r.const(0),class:r.const("cancel-link"),onTap:function(){return o.logJSON("knox-consent-modal",{action:"cancel-delete-account"}),e.props.hideForm()}},function(){return e.controller.t("Cancel")}),r.createElement("button",{class:function(){return{"btn-red":!0,"action-submit":!0,"delete-account-button":!0,disabled:e.disabled}},"aria-disabled":function(){return e.disabled},type:r.const("submit")},function(){return e.controller.t("Send Delete Account Email")}))))},t.prototype.onAccountDeleted=function(){return this.props.submitForm()},t.prototype.onAccountDeletionFailed=function(){if(this.errorMessage=this.controller.SOMETHING_WENT_WRONG,!this.unmounted)return this.update()},t.prototype.doDeleteAccount=function(){this.disabled||(o.logJSON("knox-consent-modal",{action:"send-delete-account-email"}),this.userController.initiateAccountDeletion().done(this.onAccountDeleted.bind(this)).fail(this.onAccountDeletionFailed.bind(this)))},t.prototype.didUnmount=function(){return this.unmounted=!0},t.prototype.didMountDeleteForm=function(e){var t=this;return i(e).on("submit",function(e){e.preventDefault(),t.doDeleteAccount()})},t}(r.Class);t.DeleteAccount=s}),define("loadcss!accounts/email-settings",function(){}),define("accounts/email-settings",["require","exports","tslib","dcgview","loadcss!./email-settings"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmailSettings=void 0;var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.formStatus=0,this.emailDisabled=null},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("email-field")},r.createElement(i,{predicate:function(){return 0===e.formStatus}},function(){return r.createElement("div",{class:r.const("email-list")},r.createElement("div",{class:r.const("input-label")},function(){return e.controller.t("Email:")}),r.createElement("div",{class:r.const("email")},r.createElement("div",{class:r.const("email-message-container")},function(){return e.userController.getEmail()},r.createElement("div",{class:r.const("message-container")},r.createElement("div",{role:r.const("link"),tabindex:r.const(0),class:r.const("blue-link change-email"),onTap:function(){return e.setFormStatus(1)}},function(){return e.controller.t("Change Email Address")})))))}),r.createElement(i,{predicate:function(){return 1===e.formStatus}},function(){return r.createElement("div",{class:r.const("change-email-container")},r.createElement("div",{class:r.const("change-email-description")},function(){return e.controller.t("We will send a Change Email link to __emailAddress__.",{emailAddress:e.userController.getEmail()})}),r.createElement("div",{class:r.const("account-error-container")},r.createElement(i,{predicate:function(){return!!e.errorMessage}},function(){return r.createElement("div",{class:r.const("form-error-message"),"aria-live":r.const("assertive"),"aria-atomic":r.const("true")},function(){return e.errorMessage})})),r.createElement("div",{class:r.const("actions-container")},r.createElement("span",{role:r.const("link"),tabindex:r.const(0),class:r.const("cancel-link"),onTap:function(){return e.setFormStatus(0)}},function(){return e.controller.t("Cancel")}),r.createElement("button",{class:function(){return{"btn-blue":!0,"action-submit":!0,"change-email-button":!0,disabled:e.emailDisabled}},"aria-disabled":function(){return e.disabled},type:r.const("submit"),onTap:function(){return e.emailDisabled||e.sendChangeEmail()}},function(){return e.controller.t("Send Email")})))}),r.createElement(i,{predicate:function(){return 3===e.formStatus}},function(){return r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),
class:r.const("email-sent-notice")},r.createElement("div",{class:r.const("email-sent-container")},r.createElement("i",{class:function(){return{"dcg-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":r.const("true")}),function(){return e.controller.t("Email sent")}),r.createElement("div",null,function(){return e.controller.t("Please check __emailAddress__ for the Change Email link.",{emailAddress:e.userController.getEmail()})}))}))},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.setToast=function(e){var t=this;this.toastMessage||(this.toastMessage=e,this.unmounted||this.update(),setTimeout(function(){t.toastMessage=null,t.unmounted||t.update()},5e3),2===this.formStatus&&setTimeout(function(){t.setFormStatus(0),t.unmounted||t.update()},5200))},t.prototype.setFormStatus=function(e){this.formStatus=e,this.toastMessage=null,this.errorMessage=null,this.update()},t.prototype.onEmailSent=function(){var e=this;this.formStatus=3,this.emailDisabled=null,this.unmounted||this.update(),setTimeout(function(){e.formStatus=0,e.unmounted||e.update()},5e3),setTimeout(function(){e.formStatus=0,e.unmounted||e.update()},5200)},t.prototype.onEmailSendingFailed=function(){this.errorMessage=this.controller.SOMETHING_WENT_WRONG,this.emailDisabled=null,this.unmounted||this.update()},t.prototype.sendChangeEmail=function(){this.emailDisabled=!0,this.unmounted||this.update(),this.userController.initiateEmailChange().done(this.onEmailSent.bind(this)).fail(this.onEmailSendingFailed.bind(this))},t}(r.Class);t.EmailSettings=o}),define("loadcss!accounts/profile-info",function(){}),define("accounts/profile-info",["require","exports","tslib","dcgview","./delete-account","./email-settings","analytics/looker","loadcss!./profile-info"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileInfo=void 0;var s=r.Components,c=s.If,l=s.Input,u=s.Switch,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.deleteAccount=0},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("profile-info account-settings-section")},r.createElement(u,{key:function(){return e.deleteAccount}},function(t){switch(t){case 0:return r.createElement("div",null,r.createElement("div",{class:r.const("name-and-email")},r.createElement("div",{class:r.const("name-field")},r.createElement("div",{class:r.const("input-label")},function(){return e.controller.t("Name:")}),r.createElement(l,{class:r.const("name-input blue-outline"),didMount:e.didMountName.bind(e),onInput:e.onNameInput.bind(e),"aria-label":function(){return e.controller.t("Name:")},name:r.const("name"),value:function(){return e.name},autocomplete:r.const("off")}),r.createElement("div",{class:r.const("actions-container")},r.createElement(c,{predicate:function(){return e.showSavedNotice}},function(){return r.createElement("span",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("saved-notice")},r.createElement("i",{class:function(){return{"dcg-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":r.const("true")}),function(){return e.controller.t("Saved!")})}),r.createElement("div",{role:r.const("button"),tabindex:r.const(0),class:function(){return{"btn-blue":!0,"action-submit":!0,"change-name-button":!0,disabled:e.nameFieldDisabled()}},"aria-disabled":function(){return e.disabled},onTap:e.onSaveName.bind(e)},function(){return e.controller.t("Save")})))),r.createElement(o.EmailSettings,{controller:e.props.controller}),r.createElement("div",{role:r.const("link"),tabindex:r.const(0),class:r.const("delete-account-link"),onTap:function(){return e.confirmDeletion()}},function(){return e.controller.t("Delete your Desmos account?")}));case 1:return r.createElement(i.DeleteAccount,{hideForm:function(){return e.setDeleteAccount(0)},submitForm:function(){return e.setDeleteAccount(2)},controller:e.props.controller});case 2:return r.createElement("div",{class:r.const("email-sent-notice")},r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("email-sent-container")},r.createElement("i",{class:function(){return{"dcg-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":r.const("true")}),function(){return e.controller.t("Email sent")}),r.createElement("div",null,function(){return e.controller.t("Please check your email (__emailAddress__) for the link to delete your account.",{emailAddress:e.userController.getEmail()})}))}}))},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.onSaveName=function(){this.nameFieldDisabled()||this.userController.setName(this.name).done(this.onSaved.bind(this))},t.prototype.nameFieldDisabled=function(){return!this.name||this.name===this.previousName},t.prototype.onNameInput=function(e){this.name=e,this.unmounted||this.update()},t.prototype.didMountName=function(){this.name=this.userController.getFullName(),this.previousName=this.name;var e=this.previousName;this.onNameInput(e)},t.prototype.onSaved=function(){var e=this;this.showSavedNotice=!0,this.previousName=this.name,this.unmounted||this.update(),setTimeout(function(){e.showSavedNotice=!1,e.unmounted||e.update()},3e3)},t.prototype.setDeleteAccount=function(e){var t=this;this.deleteAccount=e,2===e&&setTimeout(function(){t.userController.logout().done(t.controller.closeModal.bind(t.controller))},5e3),this.unmounted||this.update()},t.prototype.confirmDeletion=function(){a.logJSON("knox-consent-modal",{action:"delete-account"}),this.setDeleteAccount(1),this.unmounted||this.update()},t}(r.Class);t.ProfileInfo=d}),define("loadcss!accounts/change-password",function(){}),define("accounts/change-password",["require","exports","tslib","dcgview","loadcss!./change-password"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangePassword=void 0;var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.mode=1},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("change-password account-settings-section")},r.createElement(i,{predicate:function(){return 1===e.mode}},function(){return r.createElement("div",{class:r.const("reset-by-email")},r.createElement("div",{class:r.const("email-description")},function(){return e.controller.t("We will send a link to your email address (__emailAddress__) so you can change your password.",{emailAddress:e.userController.getEmail()})}),r.createElement("div",{class:r.const("account-error-container")},r.createElement(i,{predicate:function(){return!!e.errorMessage}},function(){return r.createElement("div",{class:r.const("form-error-message"),"aria-live":r.const("assertive"),"aria-atomic":r.const("true")},function(){return e.errorMessage})})),r.createElement("div",{class:r.const("actions-container")},r.createElement("div",{role:r.const("button"),tabindex:r.const(0),class:function(){return{"btn-blue":!0,"action-submit":!0,"send-email-button":!0,disabled:e.emailDisabled}},"aria-disabled":function(){return e.emailDisabled},onTap:function(){return e.sendResetPasswordEmail()}},function(){return e.controller.t("Send Email")})))}),r.createElement(i,{predicate:function(){return 2===e.mode}},function(){return r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("email-sent-notice")},r.createElement("div",{class:r.const("email-sent-container")},r.createElement("i",{class:function(){return{"dcg-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":r.const("true")}),function(){return e.controller.t("Email sent")}),r.createElement("div",null,function(){return e.controller.t("Please check your email (__emailAddress__) for the link to change your password.",{emailAddress:e.userController.getEmail()})}))}))},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.onEmailSent=function(){var e=this;this.mode=2,this.unmounted||this.update(),setTimeout(function(){e.mode=0,e.unmounted||e.update()},5e3),setTimeout(function(){e.mode=1,e.unmounted||e.update()},5200)},t.prototype.onEmailSendingFailed=function(){this.errorMessage=this.controller.SOMETHING_WENT_WRONG,this.unmounted||this.update()},t.prototype.sendResetPasswordEmail=function(){this.userController.recoverPassword({email:this.userController.getEmail()}).done(this.onEmailSent.bind(this)).fail(this.onEmailSendingFailed.bind(this))},t}(r.Class);t.ChangePassword=o}),define("calculator-shell/account-settings-dialog",["require","exports","tslib","dcgview","./modal","jquery","underscore","accounts/profile-info","accounts/change-password","loadcss!accounts/shared-pillow-styles","loadcss!accounts/account-settings-modal"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountSettingsDialog=void 0;var l=r.Components.Switch,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.settingsView=0,this.breakPoint=660,this.measureWindow()},t.prototype.template=function(){var e=this;return r.createElement(i.Modal,{controller:this.props.controller},r.createElement("div",{class:r.const("account-modal-contents account-settings-modal")},r.createElement("div",{class:r.const("fixed-header")},r.createElement("h1",null,function(){return e.controller.t("Account Settings")})),r.createElement("div",{class:r.const("navigation-tabs"),role:r.const("navigation")},r.createElement("div",{role:r.const("link"),tabindex:r.const(0),class:function(){return{"menu-item-gray":!0,"profile-view-button":!0,selected:0===e.settingsView}},onTap:function(){return e.updateSettingsView(0)}},this.profileTitle.bind(this)),r.createElement("div",{role:r.const("link"),tabindex:r.const(0),class:function(){return{"menu-item-gray":!0,"password-view-button":!0,selected:1===e.settingsView}},onTap:function(){return e.updateSettingsView(1)}},this.passwordTitle.bind(this))),r.createElement("div",{class:r.const("content-container")},r.createElement(l,{key:function(){return e.settingsView}},function(t){return 0===t?r.createElement(s.ProfileInfo,{controller:e.props.controller}):1===t?r.createElement(c.ChangePassword,{controller:e.props.controller}):r.createElement("span",null)}))))},t.prototype.updateSettingsView=function(e){this.settingsView=e,this.unmounted||this.update()},t.prototype.profileTitle=function(){return this.windowWidth>this.breakPoint?this.controller.t("Profile Information"):this.controller.t("Profile")},t.prototype.passwordTitle=function(){return this.windowWidth>this.breakPoint?this.controller.t("Change Password"):this.controller.t("Password")},t.prototype.measureWindow=function(){return this.windowWidth=o(window).width()},t.prototype.didMount=function(){var e=this;o(window).on("resize.account-dialog",a.throttle(function(){e.measureWindow(),e.unmounted||e.update()},200))},t.prototype.didUnmount=function(){o(window).off("resize.account-dialog"),this.unmounted=!0},t}(r.Class);t.AccountSettingsDialog=u}),define("loadcss!accounts/change-email",function(){}),define("loadcss!accounts/account-update-modal",function(){}),define("accounts/change-email",["require","exports","tslib","dcgview","jquery","loadcss!./change-email","loadcss!./account-update-modal"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeEmail=void 0;var o=r.Components.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("change-email-form account-update-form")},r.createElement("div",{class:r.const("account-update-header"),role:r.const("heading"),"aria-level":r.const("1")},function(){return e.controller.t("Change your Desmos email address")}),r.createElement("div",{class:r.const("h4-container")},r.createElement("h4",null,function(){return e.controller.t("Set a new email address and password:")})),r.createElement("form",{didMount:this.didMountForm.bind(this),method:r.const("post")},r.createElement("input",{class:r.const("blue-outline new-email-input"),didMount:this.didMountNewEmail.bind(this),type:r.const("email"),"aria-label":function(){return e.controller.t("New Email Address")},name:r.const("newEmail"),placeholder:function(){return e.controller.t("New Email Address")},required:r.const("required")}),r.createElement("input",{class:r.const("blue-outline password-input"),didMount:this.didMountPassword.bind(this),type:r.const("password"),"aria-label":function(){return e.controller.t("Password")},name:r.const("password"),placeholder:function(){return e.controller.t("Password")},required:r.const("required")}),r.createElement("div",{class:r.const("account-error-container")},r.createElement(o,{predicate:function(){return!!e.errorMessage}},function(){return r.createElement("div",{class:r.const("form-error-message"),"aria-live":r.const("assertive"),"aria-atomic":r.const("true")},function(){return e.errorMessage})})),r.createElement("div",{class:r.const("form-submit-container")},r.createElement("button",{class:function(){return{"btn-blue":!0,disabled:e.disabled}},"aria-disabled":function(){return e.disabled},type:r.const("submit")},function(){return e.controller.t("Change Email and Password")}))))},t.prototype.updateDisabled=function(){var e=this.$password.val(),t=this.$newEmail.val();this.disabled=!(e&&t)},t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.didMountNewEmail=function(e){var t=this;this.$newEmail=i(e),this.$newEmail.on("input change",function(){t.updateDisabled(),t.unmounted||t.update()}),this.whenMountComplete()},t.prototype.didMountPassword=function(e){var t=this;this.$password=i(e),this.$password.on("input change",function(){t.updateDisabled(),t.unmounted||t.update()}),this.whenMountComplete()},t.prototype.didMountForm=function(e){var t=this;this.$form=i(e),this.$form.on("submit",function(e){e.preventDefault(),t.disabled||t.userController.setEmail({changeToken:t.getChangeToken(),password:t.$password.val(),newEmail:t.$newEmail.val()}).done(function(){t.controller.dispatch({type:"close-modal"}),history.replaceState(null,null,document.location.pathname)}).fail(function(e){409===e.status?t.errorMessage="Sorry, someone has already registered with this email address.":t.errorMessage=t.controller.SOMETHING_WENT_WRONG,t.unmounted||t.update()})}),this.whenMountComplete()},t.prototype.whenMountComplete=function(){this.$newEmail&&this.$password&&this.$form&&(this.updateDisabled(),this.unmounted||this.update())},t.prototype.getChangeToken=function(){return this.userController.getEmailChangeToken()},t}(r.Class);t.ChangeEmail=a}),define("calculator-shell/change-email-dialog",["require","exports","tslib","dcgview","./modal","accounts/change-email"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeEmailDialog=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){return r.createElement(i.Modal,{controller:this.props.controller},r.createElement(o.ChangeEmail,{controller:this.props.controller}))},t}(r.Class);t.ChangeEmailDialog=a}),define("loadcss!accounts/account-reenabled-modal",function(){}),define("calculator-shell/account-reenabled-dialog",["require","exports","tslib","dcgview","./modal","loadcss!accounts/account-reenabled-modal","loadcss!accounts/account-update-modal"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountReenabledDialog=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement(i.Modal,{controller:this.props.controller},r.createElement("div",{class:r.const("account-update-form account-reenabled-modal-contents")},r.createElement("div",{class:r.const("account-update-header"),role:r.const("heading"),"aria-level":r.const("1")},function(){return e.controller.t("Your account has been reactivated.")}),r.createElement("div",{class:r.const("reenabled-message")},function(){return e.controller.t("You previously requested to delete your account, but because you logged back in within 30 days, we will not delete your account. Welcome back!")}),r.createElement("div",{class:r.const("continue-button")},r.createElement("span",{role:r.const("link"),tabindex:r.const("0"),onTap:function(){return e.controller.dispatch({type:"close-modal"})},class:r.const("btn-blue continue-link")},function(){return e.controller.t("Continue to Desmos")}))))},t}(r.Class);t.AccountReenabledDialog=o}),define("lib/data-uri-to-blob",["require","exports"],function(e,t){"use strict";function n(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/),r=null!==n?n[1]:"",i=null!==t[1]?atob(t[1]):"",o=i.length,a=new Uint8Array(o);o--;)a[o]=i.charCodeAt(o);return new Blob([a],{type:r})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("lib/svg-string-to-blob",["require","exports"],function(e,t){"use strict";function n(e){if(-1===e.indexOf("xmlns="))throw new Error('Programming error: <svg> elements require the "xmlns" attribute to render properly');return new Blob([e],{type:"image/xml+svg;charset=utf-8"})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}),define("loadcss!calculator-shell/export-image-size-options",function(){}),define("calculator-shell/export-image-size-options",["require","exports","tslib","dcgview","jquery","./export-image-dialog","loadcss!./export-image-size-options"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r.Components.If,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{role:r.const("button"),tabindex:r.const("0"),"aria-pressed":function(){return e.isSelected()},class:function(){return{"dcg-option":!0,"dcg-selected":e.isSelected()}},onTap:function(){return e.selectSize()}},function(){return o.sizes[e.props.size()].name(e.props.controller())})},t.prototype.isSelected=function(){this.props.selectedSize(),this.props.size()},t.prototype.selectSize=function(){this.props.onSelectSize(this.props.size())},t}(r.Class),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.menuOpen=!1,this.unmounted=!1},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-export-image-size-options")},r.createElement("div",{role:r.const("button"),tabindex:r.const("0"),"aria-haspopup":r.const("true"),"aria-expanded":function(){return e.menuOpen},class:r.const("dcg-selected-option"),didMount:function(t){e.menuElement=t,"keyboard"===e.props.controller().getModalDevice()&&setTimeout(function(){e.menuElement.focus()},0)},onTap:this.bindFn(this.toggleMenu)},function(){return e.selected().name(e.props.controller())},r.createElement("i",{class:r.const("dcg-icon-caret-down")})),r.createElement(a,{predicate:function(){return e.menuOpen}},function(){return r.createElement("div",{class:r.const("dcg-options-positioning-container")},r.createElement("div",{class:r.const("dcg-options-container"),role:r.const("group"),"aria-label":function(){return e.props.controller().t("Size Options")}},r.createElement(s,{controller:e.props.controller,size:e.const("small_square"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement(s,{controller:e.props.controller,size:e.const("medium_square"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement(s,{controller:e.props.controller,size:e.const("large_square"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement(s,{controller:e.props.controller,size:e.const("medium_rectangle"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement(s,{controller:e.props.controller,size:e.const("large_rectangle"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement("h3",{class:r.const("dcg-embosser-title")},function(){return e.props.controller().t("Tactile Graphics Embossers")}),r.createElement(s,{controller:e.props.controller,size:e.const("vpmax8"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement(s,{controller:e.props.controller,size:e.const("vpmax11"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement(s,{controller:e.props.controller,size:e.const("etc8"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)}),r.createElement(s,{controller:e.props.controller,size:e.const("etc11"),selectedSize:e.props.selectedSize,onSelectSize:e.bindFn(e.selectSize)})))}))},t.prototype.closeMenu=function(){i(document).off(".export-image-size-options"),this.menuOpen=!1,this.unmounted||this.update()},t.prototype.didUnmount=function(){i(document).off(".export-image-size-options"),this.unmounted=!0},t.prototype.toggleMenu=function(){var e=this;if(this.menuOpen)return void this.closeMenu();this.menuOpen=!0,i(document).on("dcg-tap.export-image-size-options",function(t){i(t.target).closest(".dcg-export-image-size-options").length||e.closeMenu()}),this.unmounted||this.update()},t.prototype.selectSize=function(e){this.menuOpen=!1,this.props.selectSize(e),void 0!==this.menuElement&&"keyboard"===this.props.controller().getModalDevice()&&this.menuElement.focus()},t.prototype.selected=function(){return o.sizes[this.props.selectedSize()]},t}(r.Class);t.default=c}),define("loadcss!calculator-shell/export-image-dialog",function(){}),define("calculator-shell/export-image-dialog",["require","exports","api/calculator","config","tslib","dcgview","jquery","lib/data-uri-to-blob","lib/svg-string-to-blob","dcgview-helpers/download-button","./export-image-size-options","lib/export-braille-equations","graphing/braille-size-options","./modal","loadcss!./export-image-dialog"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h){"use strict";function f(e){return"vpmax8"===e||"vpmax11"===e||"etc8"===e||"etc11"===e}function m(e){switch(e){case"etc8":return"8.5 x 11.0";case"etc11":return"11.5 x 11.0";case"vpmax8":return"8.5 x 11";case"vpmax11":return"11.5 x 11";default:return e}}function g(e){function t(e,t){r.querySelectorAll(e).forEach(t)}var n=new DOMParser,r=n.parseFromString(e,"text/xml");return t(".dcg-svg-region",function(e){e.setAttribute("fill","black")}),t(".dcg-svg-label *",function(e){e.setAttribute("stroke","none"),e.setAttribute("fill","black")}),t(".dcg-svg-axis-value text",function(e){"none"!==e.getAttribute("stroke")?e.parentElement&&e.parentElement.removeChild(e):(e.setAttribute("font-family","Helvetica Neue"),e.setAttribute("font-weight","bold"))}),t(".dcg-svg-offcenter-axis-value",function(e){e.parentElement&&e.parentElement.removeChild(e)}),t(".dcg-svg-curve",function(e){e.setAttribute("stroke","black"),e.setAttribute("stroke-width","5"),e.setAttribute("stroke-opacity","1")}),t(".dcg-svg-point",function(e){e.setAttribute("stroke","black"),e.setAttribute("stroke-width","10"),e.setAttribute("stroke-opacity","1")}),t(".dcg-svg-background",function(e){var t=parseFloat(e.getAttribute("width")),n=parseFloat(e.getAttribute("height")),i=r.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d","M"+(t-3)+",3v"+(n-6)+"H3V3H"+(t-3)+" M"+t+",0H0v"+n+"h"+t+"V0L"+t+",0z"),e.parentElement.appendChild(i)}),t(".dcg-svg-axis-line",function(e){e.setAttribute("stroke","black"),e.setAttribute("stroke-width","4"),e.setAttribute("stroke-opacity","1")}),t(".dcg-svg-minor-gridline, .dcg-svg-major-gridline",function(e){e.setAttribute("stroke","black"),e.setAttribute("stroke-width","1"),e.setAttribute("stroke-opacity","1")}),r.firstChild.outerHTML}Object.defineProperty(t,"__esModule",{value:!0}),t.sizes=void 0;var y=o.Components,v=y.If,b=y.IfElse;t.sizes={};var x={left:0,top:0,right:0,bottom:0};t.sizes.small_square={width:160,height:160,margins:x,name:function(e){return e.t("Small Square")}},t.sizes.medium_square={width:400,height:400,margins:x,name:function(e){return e.t("Medium Square")}},t.sizes.large_square={width:1e3,height:1e3,margins:x,name:function(e){return e.t("Large Square")}},t.sizes.medium_rectangle={width:600,height:400,margins:x,name:function(e){return e.t("Medium Rectangle")}},t.sizes.large_rectangle={width:1200,height:800,margins:x,name:function(e){return e.t("Large Rectangle")}},t.sizes=i.__assign(i.__assign({},t.sizes),p.brailleSizes);var E=function(e){function p(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(p,e),p.prototype.init=function(){this.controller=this.props.controller(),this.thickness="thin",this.size="medium_square";var e=this.controller.api.controller.getBrailleMode();this.brailleMode="none"!==e?e:"nemeth",this.showDownloadButton=l.canDownload(),this.unmounted=!1,this.svgDropdownOpen=!1,this.markImagesDirty(),this.loaded=!1},p.prototype.template=function(){var e=this;return o.createElement(h.Modal,{controller:this.props.controller},o.createElement("div",{id:o.const("export-image-dialog")},o.createElement("h1",null,function(){return e.controller.t("Export Your Graph")}),o.createElement("div",{class:o.const("dcg-offscreen-calculator"),didMount:this.bindFn(this.didMountOffscreenCalc),willUnmount:this.bindFn(this.willUnmountOffscreenCalc),"aria-hidden":o.const("true")}),o.createElement("div",{class:o.const("dcg-columns")},o.createElement("div",{class:o.const("dcg-left-column")},o.createElement("div",{class:function(){return{"dcg-graph-preview":!0,"dcg-preview-loading":e.pngDirty}}},o.createElement(v,{predicate:function(){return e.loaded}},function(){return o.createElement("img",{class:o.const("dcg-graph-image"),didMount:e.bindFn(e.didMountGraphPreview),src:function(){return e.previewDataURL},alt:function(){return e.controller.t("Graph Preview")}})}),o.createElement(v,{predicate:function(){return e.pngDirty}},function(){return o.createElement("span",{class:o.const("dcg-loading-message")},o.createElement("span",{class:o.const("dcg-spinner")}),function(){return e.controller.t("Loading...")})}),o.createElement(v,{predicate:function(){return!e.pngDirty&&!e.isExportingBraille()}},function(){return o.createElement("span",{class:o.const("dcg-zoom-percentage")},e.bindFn(e.getZoom))}))),o.createElement("div",{class:o.const("dcg-right-column")},o.createElement("div",{role:o.const("heading"),"aria-level":o.const("2"),class:o.const("dcg-section-title")},function(){return e.controller.t("Size")}),o.createElement(u.default,{controller:this.props.controller,selectedSize:function(){return e.size},selectSize:this.bindFn(this.selectSize)}),o.createElement(v,{predicate:function(){return!e.isExportingBraille()}},function(){return o.createElement("div",null,o.createElement("div",{role:o.const("heading"),"aria-level":o.const("2"),class:o.const("dcg-section-title")},function(){return e.controller.t("Line Thickness")}),o.createElement("div",{role:o.const("group"),"aria-label":function(){return e.controller.t("Line Thickness")},class:o.const("dcg-button-group")},o.createElement("div",{role:o.const("button"),tabindex:o.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"thin"===e.thickness}},"aria-pressed":function(){return"thin"===e.thickness},onTap:function(){return e.selectThickness("thin")}},function(){return e.controller.t("Thin")}),o.createElement("div",{role:o.const("button"),tabindex:o.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"medium"===e.thickness}},"aria-pressed":function(){return"medium"===e.thickness},onTap:function(){return e.selectThickness("medium")}},function(){return e.controller.t("Medium")}),o.createElement("div",{role:o.const("button"),tabindex:o.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"thick"===e.thickness}},"aria-pressed":function(){return"thick"===e.thickness},onTap:function(){return e.selectThickness("thick")}},function(){return e.controller.t("Thick")})))}),o.createElement(v,{predicate:function(){return e.isExportingBraille()}},function(){return o.createElement("div",{class:o.const("braille-container")},o.createElement("div",{role:o.const("heading"),"aria-level":o.const("2"),class:o.const("dcg-section-title")},function(){return e.controller.t("Braille Mode")}),o.createElement("div",{role:o.const("group"),"aria-label":function(){return e.controller.t("Braille Mode")},class:o.const("dcg-button-group")},o.createElement("div",{role:o.const("button"),tabindex:o.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"nemeth"===e.brailleMode}},"aria-pressed":function(){return"nemeth"===e.brailleMode},onTap:function(){return e.selectBrailleMode("nemeth")}},function(){return e.controller.t("Nemeth")}),o.createElement("div",{role:o.const("button"),tabindex:o.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"ueb"===e.brailleMode}},"aria-pressed":function(){return"ueb"===e.brailleMode},onTap:function(){return e.selectBrailleMode("ueb")}},function(){return e.controller.t("UEB")})),o.createElement("div",{class:o.const("braille-instructions")},o.createElement("div",{role:o.const("heading"),"aria-level":o.const("2"),class:o.const("dcg-section-title")},function(){return e.controller.t("Embossing Instructions")}),o.createElement(v,{predicate:function(){return"vpmax8"===e.size||"vpmax11"===e.size}},function(){return o.createElement("ul",null,o.createElement("li",null,function(){return e.controller.t("Right click graph image and save to desktop.")}),o.createElement("li",null,function(){return e.controller.t('Right click image and select "print". Set paper\n                              size to '+m(e.size)+".")}))}),o.createElement(v,{predicate:function(){return"etc8"===e.size||"etc11"===e.size}},function(){return o.createElement("ul",null,o.createElement("li",null,function(){return e.controller.t("Save this image. Open Firebird, select File > Open\n                              > Image File, and open the image.")}),o.createElement("li",null,function(){return"Set paper size to "+m(e.size)+'. Then click "Edit"\n                              and select File > Emboss.'}))}),o.createElement("div",{class:o.const("dcg-feedback-link")},function(){return e.controller.t("Feedback? Email")},o.createElement("a",{class:o.const("blue-link"),href:o.const("mailto:accessibility@desmos.com")},o.const("accessibility@desmos.com")),o.const("."))))}),b(this.const(this.showDownloadButton),{true:function(){return o.createElement("div",null,o.createElement("div",{role:o.const("group"),"aria-label":function(){return e.controller.t("Image Download")},class:function(){return{"dcg-download-button-group":!0,"dcg-download-button-group-singleton":e.isExportingBraille()}}},o.createElement(l.default,{data:function(){return e.previewBlob},enabled:function(){return!e.pngDirty},filename:e.const("desmos-graph.png"),text:function(){return e.controller.t("Download PNG")}}),o.createElement(v,{predicate:function(){return!e.isExportingBraille()}},function(){return o.createElement("div",{role:o.const("button"),tabindex:function(){return e.svgDirty?-1:0},"aria-disabled":function(){return e.svgDirty},"aria-expanded":function(){return e.svgDropdownOpen},"aria-label":function(){return e.controller.t("SVG Options")},class:function(){return{"dcg-svg-dropdown":!0,"dcg-button":!0,"dcg-disabled":e.svgDirty}},onTap:e.bindFn(e.toggleSvgDropdown)},o.createElement("i",{class:o.const("dcg-icon-caret-down")}))})),o.createElement(v,{predicate:function(){return e.isExportingBraille()}
},function(){return o.createElement(l.default,{data:function(){return e.brailleBlob},enabled:function(){return!e.pngDirty},filename:e.const("desmos-equations.brl"),text:function(){return e.controller.t("Download Braille Equations")},isBraille:e.const(!0)})}),o.createElement(v,{predicate:function(){return e.svgDropdownOpen}},function(){return o.createElement("div",{class:o.const("dcg-svg-popover dcg-popover dcg-top"),didMount:e.bindFn(e.didMountSvgDropdown),willUnmount:e.bindFn(e.willUnmountSvgDropdown)},o.createElement("div",{class:o.const("dcg-popover-interior")},o.createElement(l.default,{data:function(){return e.svgBlob},enabled:function(){return!e.svgDirty},filename:e.const("desmos-graph.svg"),text:function(){return e.controller.t("Download SVG")},isSvg:e.const(!0)}),o.createElement("div",{class:o.const("dcg-beta-tag")},function(){return e.controller.t("Beta")})),o.createElement("div",{class:o.const("dcg-arrow")}))}))},false:function(){return o.createElement(v,{predicate:function(){return!e.isExportingBraille()}},function(){return o.createElement("div",{class:o.const("dcg-download-not-enabled-notice")},o.createElement("div",{role:o.const("heading"),"aria-level":o.const("2"),class:o.const("dcg-title")},function(){return e.controller.t("Download Instructions")}),function(){return e.controller.t("To download, right click on the image of the graph\n                        select &quot;Save As.&quot; You might also be able to\n                        click and drag the image onto your desktop.")})})}})))))},p.prototype.didMountSvgDropdown=function(e){var t=this;a(document).on("dcg-tap.svg-dropdown",function(n){var r=n.target,i=a(".dcg-svg-dropdown")[0];e&&i&&(i.contains(r)||e.contains(r)||t.closeSvgDropdown())})},p.prototype.willUnmountSvgDropdown=function(){a(document).off(".svg-dropdown")},p.prototype.didMountOffscreenCalc=function(e){var t=this;this.calculator=new n.Calculator(e,{expressions:!1,keypad:!1,branding:!1,border:!1,enableTabindex:!1}),this.calculator._calc.evaluator.notifyWhenSynced(function(){t.markImagesDirty(),t.updateIfMounted()}),this.calculator.setState(this.controller.api.getState())},p.prototype.willUnmountOffscreenCalc=function(){this.calculator&&this.calculator.destroy()},p.prototype.markImagesDirty=function(){this.pngDirty=!0,this.svgDirty=!0},p.prototype.selectSize=function(e){this.size=e,this.markImagesDirty(),this.updateIfMounted()},p.prototype.selectBrailleMode=function(e){this.brailleMode=e,this.markImagesDirty(),this.updateIfMounted()},p.prototype.getZoom=function(){return"Zoom: "+Math.min(100,Math.round(4e4/this.getWidth()))+"%"},p.prototype.selectThickness=function(e){this.thickness=e,this.markImagesDirty(),this.updateIfMounted()},p.prototype.didMountGraphPreview=function(e){this.previewImg=e},p.prototype.getGridOpacity=function(){switch(this.thickness){case"thick":return 1;case"medium":return.6;case"thin":return.4;default:return this.thickness}},p.prototype.getAxisWeight=function(){switch(this.thickness){case"thick":case"medium":return 2;case"thin":return 1.5;default:return this.thickness}},p.prototype.getGraphThickness=function(){switch(this.thickness){case"thick":return 5;case"medium":return 3.5;case"thin":return 2.5;default:return this.thickness}},p.prototype.getLabelSize=function(){if("small_square"===this.size)switch(this.thickness){case"thick":return 14;case"medium":return 12;case"thin":return 10;default:var e=this.thickness;return e}else switch(this.thickness){case"thick":return 20;case"medium":return 17;case"thin":return 14;default:var e=this.thickness;return e}},p.prototype.updateViewSettings=function(){if(void 0!==this.calculator&&void 0!==this.calculator._calc&&void 0!==this.calculator._calc.grapher&&void 0!==this.calculator._calc.grapher.settings){var e=this.calculator._calc.grapher.settings;this.isExportingBraille()||(e.majorAxisOpacity=this.getGridOpacity(),e.minorAxisOpacity=this.getGridOpacity()/2,e.axisLineOffset=0,e.setProperty("axisLineWidth",this.getAxisWeight()),e.labelSize=this.getLabelSize(),e.graphLineWidth=this.getGraphThickness(),e.pointLineWidth=3*this.getGraphThickness())}},p.prototype.getBackgroundSize=function(){switch(this.size){case"medium_rectangle":case"large_rectangle":return"contain";case"small_square":return t.sizes.small_square.width+"px "+t.sizes.small_square.height+"px";default:return"cover"}},p.prototype.getHeight=function(){return t.sizes[this.size].height},p.prototype.getWidth=function(){return t.sizes[this.size].width},p.prototype.didUnmount=function(){this.unmounted=!0},p.prototype.updateIfMounted=function(){this.unmounted||this.update()},p.prototype.updateGraphPreview=function(){var e=this;if((this.pngDirty||this.svgDirty)&&void 0!==this.calculator&&void 0!==this.calculator._calc&&void 0!==this.calculator._calc.grapher&&void 0!==this.calculator._calc.grapher.settings){this.updateViewSettings();var t={width:this.getWidth(),height:this.getHeight(),preserveAxisNumbers:!0,showLabels:!0,targetPixelRatio:2},n={braille:{embosserModel:this.size,brailleMode:this.brailleMode}};if(this.pngDirty){var o=this.isExportingBraille()?n:t;this.calculator.asyncScreenshot(o,function(t){e.previewDataURL=t,e.previewBlob=s.default(e.previewDataURL),e.pngDirty=!1,e.loaded=!0,e.updateIfMounted(),e.resizePreviewImg()})}if(this.svgDirty){var a=i.__assign(i.__assign({},t),{svg:!0}),l=r.get("worksheetSVG");l&&(a.targetPixelRatio=1),this.calculator.asyncScreenshot(a,function(t){l&&(t=g(t)),e.svgBlob=c.default(t),e.svgDirty=!1,e.updateIfMounted(),e.resizePreviewImg()})}}},p.prototype.updateBrailleEquations=function(){if(this.isExportingBraille()){var e=d.getBrailleEquationsGraphing(this.controller.api.controller,this.brailleMode);this.brailleBlob=new Blob([e],{type:"text/plain"})}},p.prototype.resizePreviewImg=function(){if(this.previewImg){var e=1;"etc8"!==this.size&&"etc11"!==this.size||(e=2),"vpmax8"!==this.size&&"vpmax11"!==this.size||(e=1.5);var t=Math.min(this.getWidth(),400),n=this.getHeight()/this.getWidth(),r=n*t;this.previewImg.width=t*e,this.previewImg.height=r*e}},p.prototype.willUpdate=function(){this.updateGraphPreview(),this.updateBrailleEquations()},p.prototype.isExportingBraille=function(){return f(this.size)},p.prototype.closeSvgDropdown=function(){this.svgDropdownOpen=!1,this.updateIfMounted()},p.prototype.toggleSvgDropdown=function(){this.svgDropdownOpen=!this.svgDropdownOpen,this.updateIfMounted()},p}(o.Class);t.default=E}),define("loadcss!calculator-shell/consent-dialog",function(){}),define("calculator-shell/consent-dialog",["require","exports","tslib","dcgview","analytics/looker","./modal","loadcss!./consent-dialog"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r.Components.If,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.openTime=Date.now(),i.logJSON("knox-consent-modal",{action:"show-consent-modal"}),r.createElement(o.Modal,{controller:this.props.controller},r.createElement("div",{role:r.const("heading"),"aria-level":r.const("1"),class:r.const("dcg-consent-header")},r.const("We value your privacy")),r.createElement("div",{class:r.const("dcg-consent-contents")},r.const("When you created your Desmos account, you gave us your name, email address, and password (unless you signed in with Google, in which case you gave us access to the name and email address associated with that account). You also gave us access to your saved work. To continue using your Desmos account, please consent below to the collection of this information.")),r.createElement("div",{class:r.const("dcg-consent-contents")},r.const("If you don't want Desmos to hold onto this information, you may delete your account from the Account Settings menu at any time.")),r.createElement("div",{class:r.const("dcg-consent-actions-container")},r.createElement("span",{role:r.const("button"),tabindex:r.const("0"),class:r.const("dcg-consent-account-settings"),onTap:this.bindFn(this.openAccountSettings)},r.const("Go to Account Settings")),r.createElement("div",{role:r.const("button"),tabindex:function(){return e.controller.isConsentingToCollection()?-1:0},"aria-disabled":function(){return e.controller.isConsentingToCollection()},class:function(){return{"dcg-btn-blue":!0,"dcg-disabled":e.controller.isConsentingToCollection()}},onTap:this.bindFn(this.consentToCollection)},r.const("Accept")),r.createElement(a,{predicate:function(){return e.controller.privacyConsentFailed()}},function(){return r.createElement("div",{"aria-live":r.const("polite"),"aria-atomic":r.const("true"),class:r.const("dcg-privacy-failure-notice")},function(){return e.controller.SOMETHING_WENT_WRONG})})))},t.prototype.openAccountSettings=function(){i.logJSON("knox-consent-modal",{action:"edit-account",ts:Date.now()-this.openTime}),this.dispatch({type:"edit-account"})},t.prototype.consentToCollection=function(){i.logJSON("knox-consent-modal",{action:"consent",ts:Date.now()-this.openTime}),this.dispatch({type:"consent-to-collection"})},t}(r.Class);t.default=s}),define("main/account_backend",["require","./backend","jquery"],function(e){"use strict";var t=e("./backend"),n=e("jquery");return{logout:function(){return t.post("/account/logout_xhr")},fetchUser:function(e){var n=function(){return t.post("/account/login_xhr",e)};return this.logout().then(n,n).then(this.getUserInfo)},getUserInfo:function(){return t.getJSON("/account/user_info")},askServerIfLoggedIn:function(){var e=n.Deferred();return t.getJSON("/account/user_info?no401").then(function(t){t&&!1===t.loggedIn?e.reject(t):e.resolve(t)},function(t){e.reject(t)}),e.promise()},checkPendingDeletion:function(e){return t.post("/account/check_account_status",e)},registerUser:function(e){return t.post("/account/register_xhr",e).then(this.getUserInfo)},editAccount:function(e){return t.post("/account/edit_account_xhr",e).then(this.getUserInfo)},setSubscriptions:function(e){return t.post("/account/change_subscriptions",{subscriptions:e}).then(this.getUserInfo)},setName:function(e){return t.post("/account/change_name",{name:e}).then(this.getUserInfo)},recoverPassword:function(e){return t.post("/account/recover_xhr",e)},initiateAccountDeletion:function(){return t.getJSON("/account/initiate_delete_account")},initiateEmailChange:function(){return t.getJSON("/account/initiate_email_change")},setEmail:function(e){return t.post("/account/set_email",e).then(this.getUserInfo)},setPrivacyConsent:function(){return t.post("/account/set_privacy_consent").then(this.getUserInfo)},verifyEmail:function(e){return t.post("/account/verify_email",{email:e})},submitArtContestEntry:function(e){return t.post("/account/submit_art_contest_entry",e)}}}),define("text!data/list-of-countries.json",[],function(){return'[\n  "Afganistan",\n  "Albania",\n  "Algeria",\n  "American Samoa",\n  "Andorra",\n  "Angola",\n  "Anguilla",\n  "Antigua & Barbuda",\n  "Argentina",\n  "Armenia",\n  "Aruba",\n  "Australia",\n  "Austria",\n  "Azerbaijan",\n  "Bahamas",\n  "Bahrain",\n  "Bangladesh",\n  "Barbados",\n  "Belarus",\n  "Belgium",\n  "Belize",\n  "Benin",\n  "Bermuda",\n  "Bhutan",\n  "Bolivia",\n  "Bonaire",\n  "Bosnia & Herzegovina",\n  "Botswana",\n  "Brazil",\n  "British Indian Ocean Ter",\n  "Brunei",\n  "Bulgaria",\n  "Burkina Faso",\n  "Burundi",\n  "Cambodia",\n  "Cameroon",\n  "Canada",\n  "Canary Islands",\n  "Cape Verde",\n  "Cayman Islands",\n  "Central African Republic",\n  "Chad",\n  "Channel Islands",\n  "Chile",\n  "China",\n  "Christmas Island",\n  "Cocos Island",\n  "Colombia",\n  "Comoros",\n  "Congo",\n  "Cook Islands",\n  "Costa Rica",\n  "Cote DIvoire",\n  "Croatia",\n  "Cuba",\n  "Curaco",\n  "Cyprus",\n  "Czech Republic",\n  "Denmark",\n  "Djibouti",\n  "Dominica",\n  "Dominican Republic",\n  "East Timor",\n  "Ecuador",\n  "Egypt",\n  "El Salvador",\n  "Equatorial Guinea",\n  "Eritrea",\n  "Estonia",\n  "Ethiopia",\n  "Falkland Islands",\n  "Faroe Islands",\n  "Fiji",\n  "Finland",\n  "France",\n  "French Guiana",\n  "French Polynesia",\n  "French Southern Ter",\n  "Gabon",\n  "Gambia",\n  "Georgia",\n  "Germany",\n  "Ghana",\n  "Gibraltar",\n  "Great Britain",\n  "Greece",\n  "Greenland",\n  "Grenada",\n  "Guadeloupe",\n  "Guam",\n  "Guatemala",\n  "Guinea",\n  "Guyana",\n  "Haiti",\n  "Hawaii",\n  "Honduras",\n  "Hong Kong",\n  "Hungary",\n  "Iceland",\n  "Indonesia",\n  "India",\n  "Iran",\n  "Iraq",\n  "Ireland",\n  "Isle of Man",\n  "Israel",\n  "Italy",\n  "Jamaica",\n  "Japan",\n  "Jordan",\n  "Kazakhstan",\n  "Kenya",\n  "Kiribati",\n  "Korea North",\n  "Korea Sout",\n  "Kuwait",\n  "Kyrgyzstan",\n  "Laos",\n  "Latvia",\n  "Lebanon",\n  "Lesotho",\n  "Liberia",\n  "Libya",\n  "Liechtenstein",\n  "Lithuania",\n  "Luxembourg",\n  "Macau",\n  "Macedonia",\n  "Madagascar",\n  "Malaysia",\n  "Malawi",\n  "Maldives",\n  "Mali",\n  "Malta",\n  "Marshall Islands",\n  "Martinique",\n  "Mauritania",\n  "Mauritius",\n  "Mayotte",\n  "Mexico",\n  "Midway Islands",\n  "Moldova",\n  "Monaco",\n  "Mongolia",\n  "Montserrat",\n  "Morocco",\n  "Mozambique",\n  "Myanmar",\n  "Nambia",\n  "Nauru",\n  "Nepal",\n  "Netherland Antilles",\n  "Netherlands",\n  "Nevis",\n  "New Caledonia",\n  "New Zealand",\n  "Nicaragua",\n  "Niger",\n  "Nigeria",\n  "Niue",\n  "Norfolk Island",\n  "Norway",\n  "Oman",\n  "Pakistan",\n  "Palau Island",\n  "Palestine",\n  "Panama",\n  "Papua New Guinea",\n  "Paraguay",\n  "Peru",\n  "Phillipines",\n  "Pitcairn Island",\n  "Poland",\n  "Portugal",\n  "Puerto Rico",\n  "Qatar",\n  "Republic of Montenegro",\n  "Republic of Serbia",\n  "Reunion",\n  "Romania",\n  "Russia",\n  "Rwanda",\n  "St Barthelemy",\n  "St Eustatius",\n  "St Helena",\n  "St Kitts-Nevis",\n  "St Lucia",\n  "St Maarten",\n  "St Pierre & Miquelon",\n  "St Vincent & Grenadines",\n  "Saipan",\n  "Samoa",\n  "Samoa American",\n  "San Marino",\n  "Sao Tome & Principe",\n  "Saudi Arabia",\n  "Senegal",\n  "Seychelles",\n  "Sierra Leone",\n  "Singapore",\n  "Slovakia",\n  "Slovenia",\n  "Solomon Islands",\n  "Somalia",\n  "South Africa",\n  "Spain",\n  "Sri Lanka",\n  "Sudan",\n  "Suriname",\n  "Swaziland",\n  "Sweden",\n  "Switzerland",\n  "Syria",\n  "Tahiti",\n  "Taiwan",\n  "Tajikistan",\n  "Tanzania",\n  "Thailand",\n  "Togo",\n  "Tokelau",\n  "Tonga",\n  "Trinidad & Tobago",\n  "Tunisia",\n  "Turkey",\n  "Turkmenistan",\n  "Turks & Caicos Is",\n  "Tuvalu",\n  "Uganda",\n  "United Kingdom",\n  "Ukraine",\n  "United Arab Erimates",\n  "United States",\n  "Uraguay",\n  "Uzbekistan",\n  "Vanuatu",\n  "Vatican City State",\n  "Venezuela",\n  "Vietnam",\n  "Virgin Islands (Brit)",\n  "Virgin Islands (USA)",\n  "Wake Island",\n  "Wallis & Futana Is",\n  "Yemen",\n  "Zaire",\n  "Zambia",\n  "Zimbabwe"\n]\n'}),define("loadcss!dcgview-helpers/searchable-dropdown",function(){}),define("dcgview-helpers/searchable-dropdown",["require","exports","tslib","dcgview","keys","lib/aria","loadcss!./searchable-dropdown"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r.Components,s=a.If,c=a.For,l=a.Input,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.filter=void 0,t.focusLocation=void 0,t.lastResultCount=0,t}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-search-container"),onKeydown:this.bindFn(this.onKeydown)},r.createElement(s,{predicate:this.props.renderWithInput},function(){return r.createElement("div",{role:r.const("search"),class:r.const("dcg-searchable-dropdown")},r.createElement(l,{didMount:e.bindFn(e.didMountInput),onInput:e.bindFn(e.onInputChange),value:e.bindFn(e.getFilterString),placeholder:function(){return e.props.placeholder()},manageFocus:e.const({shouldBeFocused:e.bindFn(e.shouldFilterBeFocused),onFocusedChanged:e.bindFn(e.onFilterFocusChange)})}),r.createElement(s,{predicate:function(){return e.shouldShowDeleteX()}},function(){return r.createElement("div",{class:r.const("dcg-remove-x dcg-do-not-blur")},r.createElement("span",{class:r.const("dcg-icon-remove"),onTap:e.bindFn(e.onDeleteXTapped)}))}))}),r.createElement(s,{predicate:function(){return e.getFilteredOptions().length>0}},function(){return r.createElement("div",{class:r.const("dcg-searchable-dropdown-list-container")},r.createElement(c,{each:function(){return e.getFilteredOptions()},key:function(e){return e.id+"-"+e.label}},r.createElement("div",{class:function(){return{"dcg-searchable-dropdown-list":!0,"dcg-do-not-blur":!0,"dcg-no-input":!e.props.renderWithInput()}},role:r.const("listbox"),"aria-label":r.const("Results")},function(t){return r.createElement("div",{class:r.const("dcg-searchable-dropdown-option"),role:r.const("option"),onTap:function(n){return e.selectOption(t,"keyboard"===n.device)},manageFocus:e.const({shouldBeFocused:function(){return e.shouldOptionBeFocused(t)},onFocusedChanged:function(n){return e.onOptionFocusChange(t,n)}}),tabindex:r.const(0)},e.const(t.label))})))}),r.createElement(s,{predicate:function(){return 0===e.getFilteredOptions().length}},function(){return r.createElement("div",{class:r.const("dcg-searchable-dropdown-list dcg-no-search-results")},r.const("No results."))}))},t.prototype.didMountInput=function(){this.focusFilter()},t.prototype.shouldShowDeleteX=function(){return!!this.getFilterString()},t.prototype.onDeleteXTapped=function(){this.filter=void 0,this.focusFilter(),this.update()},t.prototype.shouldFilterBeFocused=function(){return this.focusLocation&&"filter"===this.focusLocation.type},t.prototype.onFilterFocusChange=function(e){e?this.focusFilter():(this.filter=void 0,this.focusLocation=void 0,this.update())},t.prototype.shouldOptionBeFocused=function(e){return this.focusLocation&&"option"===this.focusLocation.type&&this.focusLocation.id===e.id},t.prototype.focusFilter=function(){this.focusLocation={type:"filter"},this.update()},t.prototype.focusOption=function(e){this.focusLocation={type:"option",id:e.id},this.update()},t.prototype.getFocusedOptionIndex=function(){if(!this.focusLocation)return-1;if("option"!==this.focusLocation.type)return-1;for(var e=this.focusLocation.id,t=this.getFilteredOptions(),n=0;n<t.length;n++){if(t[n].id===e)return n}return-1},t.prototype.onOptionFocusChange=function(e,t){t?this.focusOption(e):(this.focusLocation=void 0,this.update())},t.prototype.onKeydown=function(e){switch(i.lookup(e)){case i.ENTER:if(this.shouldFilterBeFocused()){var t=this.getFilteredOptions();1===t.length&&this.selectOption(t[0],!0)}break;case i.UP:this.moveFocusInDirection(-1)&&e.preventDefault();break;case i.DOWN:this.moveFocusInDirection(1)&&e.preventDefault();break;case i.HOME:e.preventDefault(),this.focusFirstOption();break;case i.END:e.preventDefault(),this.focusLastOption();break;case i.ESCAPE:this.props.onCancel();break;case i.TAB:e.shiftKey?this.moveFocusInDirection(-1)&&e.preventDefault():this.moveFocusInDirection(1)&&e.preventDefault()}},t.prototype.moveFocusInDirection=function(e){var t=this.getFilteredOptions(),n=this.getFocusedOptionIndex(),r=n+e;if(-1==r&&this.props.renderWithInput())return this.focusFilter(),!0;var i=t[r];return!!i&&(this.focusOption(i),!0)},t.prototype.focusFirstOption=function(){var e=this.getFilteredOptions();0!==e.length&&this.focusOption(e[0])},t.prototype.focusLastOption=function(){var e=this.getFilteredOptions();0!==e.length&&this.focusOption(e[e.length-1])},t.prototype.onInputChange=function(e){this.filter=e,this.update()},t.prototype.getFilterString=function(){return this.filter||""},t.prototype.selectOption=function(e,t){this.filter=void 0,this.focusLocation=void 0,this.update(),this.props.onChange({value:e.id,fromKeyboard:t})},t.prototype.getFilteredOptions=function(){var e=this.props.options(),t=(this.filter||"").toLowerCase().trim();return t&&(e=e.filter(function(e){return-1!==e.label.toLowerCase().indexOf(t)})),e},t.prototype.onUpdate=function(){var e=this.getFilteredOptions().length;if(this.focusLocation&&"filter"===this.focusLocation.type&&e!==this.lastResultCount)switch(e){case 0:o.alert("No results");break;case 1:o.alert("1 result");break;default:o.alert(e+" results")}this.lastResultCount=e},t}(r.Class);t.default=u}),define("loadcss!calculator-shell/contest-submission-dialog",function(){}),define("calculator-shell/contest-submission-dialog",["require","exports","main/account_backend","text!data/list-of-countries.json","tslib","dcgview","analytics/looker","../dcgview-helpers/searchable-dropdown","dcgview-helpers/checkbox","lib/aria","../lib/selectable-input","./modal","loadcss!spinner","loadcss!./contest-submission-dialog"],function(e,t,n,r,i,o,a,s,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=o.Components,h=p.If,f=p.IfElse,m=p.For,g=p.Input,y=p.SwitchUnion,v=JSON.parse(r).map(function(e){return{id:e,label:e}}),b={Austria:!0,Bulgaria:!0,Cyprus:!0,"Czech Republic":!0,France:!0,Greece:!0,Italy:!0,Lithuania:!0,Spain:!0,Croatia:!0,Germany:!0,Hungary:!0,Ireland:!0,Luxembourg:!0,Netherlands:!0,Poland:!0,Romania:!0,Slovakia:!0,Slovenia:!0},x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.didUnmount=function(){this.unmounted=!0},t.prototype.init=function(){this.controller=this.props.controller(),this.selectedData={},this.userOwnsGraph=!1,this.isSubmittingEntry=!1,this.controller.state.artContestURLFromShareMenu&&(this.overwriteGraphURL=this.controller.state.artContestURLFromShareMenu,this.controller.state.artContestURLFromShareMenu=void 0),a.logJSON("art-contest::open-modal",{from:this.overwriteGraphURL?"share":"top-bar"})},t.prototype.getScreen=function(){return this.shouldShowSaveAnimation()?"saving":this.shouldShowSaveFailed()?"save-failed":this.didSubmissionFail?"submit-failed":this.isSubmittingEntry?"submitting":this.didSubmissionSucceed?"submitted":this.userOwnsGraph&&this.isLoggedIn()?"form":"ask-intention"},t.prototype.template=function(){var e=this;return o.createElement(d.Modal,{controller:this.props.controller},o.createElement("div",{class:o.const("dcg-contest-submission-dialog")},y(function(){return e.getScreen()},{saving:function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},o.createElement("span",{class:o.const("dcg-spinner")}),function(){return e.controller.t("Saving graph...")}))},"save-failed":function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},function(){return e.controller.t("Error saving. Please try again later.")}))},submitting:function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},o.createElement("span",{class:o.const("dcg-spinner")}),function(){return e.controller.t("Submitting...")}))},"submit-failed":function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},e.bindFn(e.failSubmittingContent)))},submitted:function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-success"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},o.createElement("i",{class:o.const("dcg-icon-check")}),function(){return e.controller.t("Success!")},o.createElement("div",{class:o.const("dcg-save-animation-content")},e.bindFn(e.successContent))))},"ask-intention":function(){return o.createElement("div",null,o.createElement("div",{role:o.const("heading"),"aria-level":o.const("1"),class:o.const("dcg-contest-submission-title")},function(){return e.controller.t("Global Math Art Contest")}),o.createElement("div",{class:o.const("dcg-contest-about")},function(){return e.controller.t("\n  Want to share your awesome graph with the world?\n  Students ages 13-18 can enter our Global Math Art Contest before April 30th for a chance to be featured on our website\n  and win other prizes!\n          ")},o.const(" "),o.createElement("a",{class:o.const("blue-link"),href:function(){return e.getBlogPostURL()},target:o.const("_blank"),didMount:function(e){return e.focus()}},function(){return e.controller.t("Learn more.")})),o.createElement("div",null,f(function(){return!!e.getCannotSubmitReason()},{true:function(){return o.createElement("div",{class:o.const("dcg-login-notice")},function(){return e.getCannotSubmitReason()})},false:function(){return o.createElement("div",{class:o.const("dcg-btn-blue dcg-submit-this-graph-btn"),onTap:e.bindFn(e.chooseSubmitThisGraph),tabindex:o.const(0),role:o.const("button")},function(){return e.controller.t("Submit This Graph")})}}),o.createElement("div",{class:o.const("dcg-submit-for-others")},function(){return e.controller.t("Are you a teacher or guardian looking to submit your student's graph?")},o.const(" "),o.createElement("a",{class:o.const("blue-link"),href:function(){return e.getTranslatedGoogleFormURL()},target:o.const("_blank")},function(){return e.controller.t("Submit here.")}))))},form:function(){return o.createElement("div",null,o.createElement("div",{role:o.const("heading"),"aria-level":o.const("1"),class:o.const("dcg-contest-submission-title")},o.createElement("i",{class:o.const("dcg-icon-chevron-left"),onTap:e.bindFn(e.returnToOpeningScreen),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.t("Back")},didMount:function(e){return e.focus()}}),function(){return e.controller.t("Submit This Graph")}),o.createElement("div",{class:o.const("dcg-submission-form")},o.createElement("div",{class:o.const("dcg-section-title")},function(){return e.controller.t("Your Country")}),o.createElement(h,{predicate:function(){return!!e.getSelectedCountry()}},function(){return o.createElement("span",{class:o.const("blue-link dcg-clear-country"),onTap:function(){return e.setSelectedCountry(void 0)},tabindex:o.const(0),role:o.const("button"),"aria-label":function(){return e.controller.t("Clear Selected Country")}},function(){return e.controller.t("Clear")})}),f(function(){return!!e.getSelectedCountry()},{true:function(){return o.createElement("div",{class:o.const("dcg-your-country-name")},function(){return e.getSelectedCountry()})},false:function(){return o.createElement(s.default,{options:function(){return e.getListOfCountries()},onChange:function(t){return e.setSelectedCountry(t.value)},onCancel:function(){return e.setSelectedCountry(void 0)},renderWithInput:function(){return!0},placeholder:function(){return e.controller.t("Your Country")}})}}),o.createElement(h,{predicate:function(){return e.shouldShowAgeOptions()}},function(){return o.createElement("div",null,o.createElement("div",{class:o.const("dcg-section-title")},function(){return e.controller.t("Your Age Bracket")}),o.createElement(m,{each:e.bindFn(e.getAgeGroupKeys)},o.createElement("div",{class:o.const("dcg-segmented-container"),role:o.const("radiogroup"),"aria-label":o.const("Age Group")},function(t){return o.createElement("div",{class:function(){return{"dcg-radio-option":!0,"dcg-is-selected":e.getSelectedAgeGroup()===t}},role:o.const("radio"),tabindex:o.const(0),"aria-checked":function(){return e.getSelectedAgeGroup()===t},onTap:function(){return e.selectAgeGroup(t)}},function(){return e.getAgeGroupText(t)})})))}),o.createElement(h,{predicate:function(){return e.shouldShowConsentOptions()}},function(){return o.createElement("div",null,o.createElement("div",{class:o.const("dcg-section-title")},function(){return e.controller.t("Your Name & Email")}),o.createElement(g,{class:e.const("blue-outline"),onInput:function(t){return e.setUserName(t)},value:e.bindFn(e.getUserName),placeholder:function(){return e.controller.t("Full Name")},disabled:function(){return!1}}),o.createElement(g,{class:e.const("blue-outline"),onInput:function(t){return e.setUserEmail(t)},value:e.bindFn(e.getUserEmail),placeholder:function(){return e.controller.t("Email Address")},disabled:function(){return!1}}),o.createElement(c.Checkbox,{checked:e.bindFn(e.getConsentTicked),onChange:e.bindFn(e.toggleConsent),ariaLabel:function(){return e.controller.t("This is my original work and doesn't use copyrighted material.")}},function(){return e.controller.t("This is my original work and doesn't use copyrighted material.")}),o.createElement("div",{class:function(){return{"dcg-btn-blue":!0,"dcg-disabled":e.isSubmitButtonDisabled(),"dcg-submit-this-graph-btn":!0}},onTap:e.bindFn(e.submitEntry),tabindex:o.const(0)},function(){return e.controller.t("Submit This Graph")}))}),o.createElement(h,{predicate:function(){return e.shouldShowManualFormLink()}},function(){return o.createElement("div",{class:o.const("dcg-local-regulations-notice")},function(){return e.controller.t("Local regulations require you to submit your graph through your teacher or guardian. Share this link with them:")},o.createElement(u.SelectableInput,{controller:e.props.controller,link:function(){return e.getPopulatedFormURL()}}))})))}})))},t.prototype.getBlogPostURL=function(){var e=this.controller.languageController.getLanguage();if("zh-TW"===e)return"https://blog.desmos.com/articles/art-contest-launch-chinese-traditional/";switch((e||"").split("-")[0]){case"zh":return"https://blog.desmos.com/articles/art-contest-launch-chinese/";case"da":return"https://blog.desmos.com/articles/art-contest-launch-danish/";case"nl":return"https://blog.desmos.com/articles/art-contest-launch-dutch/";case"fr":return"https://blog.desmos.com/articles/art-contest-launch-french/";case"de":return"https://blog.desmos.com/articles/art-contest-launch-german/";case"it":return"https://blog.desmos.com/articles/art-contest-launch-italian/";case"ja":return"https://blog.desmos.com/articles/art-contest-launch-japanese/";case"ko":return"https://blog.desmos.com/articles/art-contest-launch-korean/";case"pt":return"https://blog.desmos.com/articles/art-contest-launch-portuguese/";case"ru":return"https://blog.desmos.com/articles/art-contest-launch-russian/";case"es":return"https://blog.desmos.com/articles/art-contest-launch-spanish/";case"sv":return"https://blog.desmos.com/articles/art-contest-launch-swedish/";case"th":return"https://blog.desmos.com/articles/art-contest-launch-thai/";case"no":return"https://blog.desmos.com/articles/art-contest-launch-norwegian/"}return"https://blog.desmos.com/articles/art-contest-launch/"},t.prototype.getTranslatedGoogleFormURL=function(){var e=this.controller.languageController.getLanguage();if("zh-TW"===e)return"https://docs.google.com/forms/d/e/1FAIpQLSfQrc3syhGAv8LH092gYtr-gwfY5vMRU93KgsRYlQJ-Ptd5FQ/viewform";switch((e||"").split("-")[0]){case"zh":return"https://docs.google.com/forms/d/1UPPXYjljSZ36GDk6RI_dTTwP5vfUswOxgpFXjXufkfc/viewform";case"da":return"https://docs.google.com/forms/d/18S5chWvqP2Ps686j-LyuK4eeIvyDW1AW9dwDfSN8cbI/viewform";case"nl":return"https://docs.google.com/forms/d/1K2iO84D0oSdzJ4NXm3IgMvudy89Kz2QzdTcW2QnHH8k/viewform";case"fr":return"https://docs.google.com/forms/d/1UbG10FXkCD6s3eOCNYx1L4in8oAFNqZekGQalX2PI8E/viewform";case"de":return"https://docs.google.com/forms/d/1WDHZerBQ_fJTIZKDhFQMFE55Jy_2qAMrTp8D3Mx_NBk/viewform";case"it":return"https://docs.google.com/forms/d/1lz2mxNcGZmLc5CnlsLbb9DAQ7DFBQJCzBs6ZQg3CeNI/viewform";case"ja":return"https://docs.google.com/forms/d/119ITA3RaWgA8pCGDJH40hG5_bx91duE0X9I0L-r0BkE/viewform";case"ko":return"https://docs.google.com/forms/d/14C-Lq79w2jH0t9WHqPk0YX5mNuuFrKPTfJF_LujIoVg/viewform";case"pt":return"https://docs.google.com/forms/d/1X1jilnHQOTzZOtJC-WQOATOsEK-nFLL-91DAwtkQ090/viewform";case"ru":return"https://docs.google.com/forms/d/1J0_amZaXl5zbG-KrVV-ckICDedWapGcPZRa4iEmbsaU/viewform";case"es":
return"https://docs.google.com/forms/d/12qP0AaLpaOBTwF024-61BGCjLKEHIc0GL_LKf61t4Ro/viewform";case"sv":return"https://docs.google.com/forms/d/1moU9I2FAC2ct_HSR5I1XU88NDUWD_yB5sIGxOBrfz2U/viewform";case"th":return"https://docs.google.com/forms/d/1UopMmjGp-j3VktImTNkXjZunErmfPtmhl7AyoCCYyvE/viewform";case"no":return"https://docs.google.com/forms/d/1l9GMWrtSZ9fHeltjv0VTCo1ZH5AFqSN1hG3ujRJAU70/viewform"}return"https://docs.google.com/forms/d/e/1FAIpQLSfOrkkB5yz-GWUoaZixSaF6BD2GQHkO1ScCpNEJmxWqiBw2lQ/viewform"},t.prototype.failSubmittingContent=function(){return this.controller.t("Error submitting. Please try again later.")},t.prototype.successContent=function(){return this.controller.t("Submission received.\n      If you'd like to revise your submission, feel free to resubmit anytime before April 30th.\n      We'll only look at the most recent submission. Congratulations, and keep graphing!")},t.prototype.returnToOpeningScreen=function(){this.userOwnsGraph=!1,this.selectedData={email:this.selectedData.email,name:this.selectedData.name},this.update()},t.prototype.getGraphURL=function(){if(this.overwriteGraphURL)return this.overwriteGraphURL;var e=this.controller.graphsController.currentGraph;return"https://www.desmos.com/calculator/"+(e&&e.hash||"")},t.prototype.overwriteEntry=function(){this.selectedData.overwrite=!0,this.submitEntry()},t.prototype.submitEntry=function(){var e=this;if(!this.isSubmitButtonDisabled()){this.didSubmissionFail=!1,this.isSubmittingEntry=!0;var t={name:this.getUserName(),email:this.getUserEmail(),url:this.getGraphURL(),ageGroup:this.getSelectedAgeGroup(),country:this.getSelectedCountry(),overwrite:!0};this.update(),a.logJSON("art-contest::submit-sending",t),n.submitArtContestEntry(t).done(function(t){t.previousSubmissionURL||(t.success?(e.didSubmissionSucceed=!0,l.alert(e.successContent()),a.logJSON("art-contest::submit-success",{})):(e.didSubmissionFail=!0,a.logJSON("art-contest::submit-failed",{}),l.alert(e.failSubmittingContent())))}).fail(function(){l.alert(e.failSubmittingContent()),e.didSubmissionFail=!0,a.logJSON("art-contest::submit-failed",{})}).always(function(){e.isSubmittingEntry=!1,e.unmounted||e.update()})}},t.prototype.shouldShowSaveAnimation=function(){return!!this.saveInProgress},t.prototype.shouldShowSaveFailed=function(){return!!this.didSaveFail},t.prototype.chooseSubmitThisGraph=function(){var e=this;if(this.overwriteGraphURL||!this.controller.graphsController.hasUnsavedChanges())return this.userOwnsGraph=!0,this.update(),void a.logJSON("art-contest::choose-form",{});this.saveInProgress=!0,a.logJSON("art-contest::save-sending",{}),this.update(),this.controller.graphsController.shareGraph().done(function(t){e.didSaveFail=!1,e.saveInProgress=!1,e.userOwnsGraph=!0,e.overwriteGraphURL="https://www.desmos.com/calculator/"+t.hash,a.logJSON("art-contest::save-success",{url:e.overwriteGraphURL})}).fail(function(){e.didSaveFail=!0,a.logJSON("art-contest::save-failed",{})}).always(function(){e.saveInProgress=!1,e.unmounted||e.update()})},t.prototype.isLoggedIn=function(){return this.controller.isLoggedIn()},t.prototype.getCannotSubmitReason=function(){return this.isLoggedIn()?this.controller.isGraphComplexEnoughForContest()?"":this.controller.t("Open one of your saved graphs or create a new one, and then submit it here! Max one entry per person."):this.controller.t("If you want to submit a graph you've made,\n  please sign in and open your graph.")},t.prototype.shouldShowSubmissionOptions=function(){return!this.userOwnsGraph||!this.isLoggedIn()},t.prototype.shouldShowManualFormLink=function(){return!!this.doesSelectedCountryDisableSubmission()},t.prototype.getPopulatedFormURL=function(){return"https://docs.google.com/forms/d/e/1FAIpQLSfOrkkB5yz-GWUoaZixSaF6BD2GQHkO1ScCpNEJmxWqiBw2lQ/viewform?usp=pp_url&entry.1008123120="+this.getSelectedCountry()+"&entry.47693622="+this.getGraphURL()},t.prototype.doesSelectedCountryDisableSubmission=function(){var e=this.getSelectedCountry();return!!e&&!!b[e]},t.prototype.shouldShowCountryOptions=function(){return!this.shouldShowSubmissionOptions()},t.prototype.shouldShowAgeOptions=function(){return!!this.shouldShowCountryOptions()&&(!!this.getSelectedCountry()&&!this.doesSelectedCountryDisableSubmission())},t.prototype.getAgeGroupKeys=function(){return["13-14","15-16","17-18"]},t.prototype.getAgeGroupText=function(e){switch(e){case"13-14":return this.controller.t("Age 13–14");case"15-16":return this.controller.t("Age 15–16");case"17-18":return this.controller.t("Age 17–18");default:return e}},t.prototype.getSelectedAgeGroup=function(){return this.selectedData.ageGroup},t.prototype.selectAgeGroup=function(e){this.selectedData.ageGroup!==e&&(this.selectedData.ageGroup=e,this.update(),a.logJSON("art-contest::select-age",{ageGroup:e}))},t.prototype.setSelectedCountry=function(e){this.selectedData={country:e,name:this.controller.userController.name,email:this.controller.userController.email},this.update(),a.logJSON("art-contest::select-country",{country:e})},t.prototype.getSelectedCountry=function(){return this.selectedData.country},t.prototype.getUserName=function(){return this.selectedData.name||""},t.prototype.setUserName=function(e){this.selectedData.name=e,this.update()},t.prototype.getUserEmail=function(){return this.selectedData.email||""},t.prototype.setUserEmail=function(e){this.selectedData.email=e,this.update()},t.prototype.getConsentTicked=function(){return!!this.selectedData.consent},t.prototype.getOverwriteTicked=function(){return!!this.selectedData.overwrite},t.prototype.toggleConsent=function(){this.selectedData.consent=!this.selectedData.consent,this.update(),a.logJSON("art-contest::toggle-consent",{consent:this.selectedData.consent})},t.prototype.isSubmitButtonDisabled=function(){return!!this.isSubmittingEntry||(!this.selectedData.country||(!this.selectedData.ageGroup||(!this.selectedData.email||(!this.selectedData.name||!this.selectedData.consent))))},t.prototype.shouldShowConsentOptions=function(){return!(!this.selectedData.country||!this.selectedData.ageGroup)},t.prototype.getListOfCountries=function(){return v},t}(o.Class);t.default=x}),define("loadcss!modals",function(){}),define("calculator-shell/modals",["require","exports","tslib","dcgview","./save-dialog","./create-account-dialog","./login-dialog","./recover-password-dialog","./hotkeys-dialog","./unsupported-browser","./account-settings-dialog","./change-email-dialog","./account-reenabled-dialog","./export-image-dialog","./consent-dialog","./contest-submission-dialog","loadcss!modals"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Modals=void 0;var g=r.Components,y=g.If,v=g.Switch,b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement(y,{predicate:function(){return e.controller.hasOpenModal()}},function(){return r.createElement("div",{role:r.const("dialog"),class:function(){return{"dcg-modal-container":!0,"dcg-wide-modal":"hotkeys"===e.controller.getOpenModal(),"dcg-fixed-width-height":"export-image"===e.controller.getOpenModal(),"dcg-export-modal":"export-image"===e.controller.getOpenModal()}}},r.createElement("div",{class:r.const("dcg-modal-background"),onTap:function(){return e.controller.dispatch({type:"close-modal"})}}),r.createElement("div",{class:r.const("modal dcg-state-modals")},r.createElement(y,{predicate:function(){return"consent-dialog"!==e.controller.getOpenModal()}},function(){return r.createElement("span",{role:r.const("link"),tabindex:r.const(0),"aria-label":r.const("Close Dialog"),class:r.const("action-close-modal close-modal internal-close"),onTap:function(){return e.controller.dispatch({type:"close-modal"})},didMount:function(t){if("hotkeys"===e.controller.getOpenModal())return t.focus()}},r.createElement("i",{class:r.const("dcg-icon-remove")}))}),r.createElement(v,{key:function(){return e.controller.getOpenModal()}},function(t){return"save"===t?r.createElement(i.SaveDialog,{controller:e.props.controller}):"export-image"===t?r.createElement(h.default,{controller:e.props.controller}):"login"===t?r.createElement(a.LoginDialog,{controller:e.props.controller}):"create-account"===t?r.createElement(o.CreateAccountDialog,{controller:e.props.controller}):"recover-password"===t?r.createElement(s.RecoverPasswordDialog,{controller:e.props.controller}):"hotkeys"===t?r.createElement(c.HotkeysDialog,{controller:e.props.controller}):"unsupported-browser"===t?r.createElement(l.UnsupportedBrowserDialog,{controller:e.props.controller}):"account-settings"===t?r.createElement(u.AccountSettingsDialog,{controller:e.props.controller}):"change-email"===t?r.createElement(d.ChangeEmailDialog,{controller:e.props.controller}):"account-reenabled"===t?r.createElement(p.AccountReenabledDialog,{controller:e.props.controller}):"consent-dialog"===t?r.createElement(f.default,{controller:e.props.controller}):"contest-submission"===t?r.createElement(m.default,{controller:e.props.controller}):r.createElement("div",null)})),r.createElement("span",{role:r.const("link"),tabindex:r.const(0),onTap:function(){return e.controller.dispatch({type:"close-modal"})},"aria-label":r.const("Close Dialog"),class:r.const("action-close-modal close-modal external-close")},r.createElement("i",{class:r.const("dcg-icon-remove")})))})},t}(r.Class);t.Modals=b}),define("vendor/fake-xml-http-request",[],function(){function e(e){var t;if("undefined"!=typeof DOMParser){t=(new DOMParser).parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t}function t(e,t){t.addEventListener(e,function(n){var r=t["on"+e];r&&"function"==typeof r&&r.call(n.target,n)})}function n(){this._eventListeners={};for(var e=["loadstart","progress","load","abort","loadend"],n=e.length-1;n>=0;n--)t(e[n],this)}function r(){n.call(this),this.readyState=r.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this.upload=new n}function i(e){if(e.readyState!==r.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function o(e){if(e.readyState==r.DONE)throw new Error("Request done")}function a(e){if(e.async&&e.readyState!=r.HEADERS_RECEIVED)throw new Error("No headers received")}function s(e){if("string"!=typeof e){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var c=function(e,t,n,r){this.type=e,this.bubbles=t,this.cancelable=n,this.target=r};c.prototype={stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}};var l={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},u={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};n.prototype={addEventListener:function(e,t){this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push(t)},removeEventListener:function(e,t){for(var n=this._eventListeners[e]||[],r=0,i=n.length;r<i;++r)if(n[r]==t)return n.splice(r,1)},dispatchEvent:function(e){for(var t=e.type,n=this._eventListeners[t]||[],r=0;r<n.length;r++)"function"==typeof n[r]?n[r].call(this,e):n[r].handleEvent(e);return!!e.defaultPrevented},_progress:function(e,t,n){var r=new c("progress");r.target=this,r.lengthComputable=e,r.loaded=t,r.total=n,this.dispatchEvent(r)}},r.prototype=new n,r.UNSENT=0,r.OPENED=1,r.HEADERS_RECEIVED=2,r.LOADING=3,r.DONE=4;var d={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,async:!0,withCredentials:!1,open:function(e,t,n,i,o){this.method=e,this.url=t,this.async="boolean"!=typeof n||n,this.username=i,this.password=o,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,this._readyStateChange(r.OPENED)},setRequestHeader:function(e,t){if(i(this),u[e]||/^(Sec-|Proxy-)/.test(e))throw new Error('Refused to set unsafe header "'+e+'"');this.requestHeaders[e]?this.requestHeaders[e]+=","+t:this.requestHeaders[e]=t},send:function(e){if(i(this),!/^(get|head)$/i.test(this.method)){var t=!1;Object.keys(this.requestHeaders).forEach(function(e){"content-type"===e.toLowerCase()&&(t=!0)}),t||(e||"").toString().match("FormData")||(this.requestHeaders["Content-Type"]="text/plain;charset=UTF-8"),this.requestBody=e}this.errorFlag=!1,this.sendFlag=this.async,this._readyStateChange(r.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new c("loadstart",!1,!1,this)),r.onSend&&r.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>r.UNSENT&&this.sendFlag&&(this._readyStateChange(r.DONE),this.sendFlag=!1),this.readyState=r.UNSENT,this.dispatchEvent(new c("abort",!1,!1,this)),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(e){if(this.readyState<r.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(e))return null;e=e.toLowerCase();for(var t in this.responseHeaders)if(t.toLowerCase()==e)return this.responseHeaders[t];return null},getAllResponseHeaders:function(){if(this.readyState<r.HEADERS_RECEIVED)return"";var e="";for(var t in this.responseHeaders)this.responseHeaders.hasOwnProperty(t)&&!/^Set-Cookie2?$/i.test(t)&&(e+=t+": "+this.responseHeaders[t]+"\r\n");return e},overrideMimeType:function(e){"string"==typeof e&&(this.forceMimeType=e.toLowerCase())},_readyStateChange:function(e){this.readyState=e,"function"==typeof this.onreadystatechange&&this.onreadystatechange(new c("readystatechange")),this.dispatchEvent(new c("readystatechange")),this.readyState==r.DONE&&(this.dispatchEvent(new c("load",!1,!1,this)),this.dispatchEvent(new c("loadend",!1,!1,this)))},_setResponseHeaders:function(e){this.responseHeaders={};for(var t in e)e.hasOwnProperty(t)&&(this.responseHeaders[t]=e[t]);this.forceMimeType&&(this.responseHeaders["Content-Type"]=this.forceMimeType),this.async?this._readyStateChange(r.HEADERS_RECEIVED):this.readyState=r.HEADERS_RECEIVED},_setResponseBody:function(t){o(this),a(this),s(t);var n=this.chunkSize||10,i=0;this.responseText="";do{this.async&&this._readyStateChange(r.LOADING),this.responseText+=t.substring(i,i+n),i+=n}while(i<t.length);var c=this.getResponseHeader("Content-Type");if(this.responseText&&(!c||/(text\/xml)|(application\/xml)|(\+xml)/.test(c)))try{this.responseXML=e(this.responseText)}catch(e){}this.async?this._readyStateChange(r.DONE):this.readyState=r.DONE},respond:function(e,t,n){this._setResponseHeaders(t||{}),this.status="number"==typeof e?e:200,this.statusText=l[this.status],this._setResponseBody(n||"")}};for(var p in d)r.prototype[p]=d[p];return r}),define("lib/app-bridge",["require","jquery","underscore_model","browser","lib/conditional_blur","vendor/fake-xml-http-request","pjs","console","main/backend"],function(e){"use strict";function t(){window.XMLHttpRequest=s,s.onSend=function(e){var t=m+"";m+=1,f[t]=e,c.methods.proxyXHR(JSON.stringify({id:t,url:e.url,method:e.method,headers:e.requestHeaders,body:e.requestBody}))}}function n(e){var t=r(e.target).closest("a[href]")[0];if(t&&"file:"===t.protocol){var n=t.getAttribute("href");"/"!==n[0]&&(n="/"+n),t.setAttribute("href",h.baseURL+n)}}var r=e("jquery"),i=e("underscore_model").UnderscoreModel,o=e("browser"),a=e("lib/conditional_blur").default,s=e("vendor/fake-xml-http-request"),c=null,l=null,u=e("pjs"),d=e("console"),p=!1,h=e("main/backend"),f={},m=0;if(o.IS_IOS){var g=[],y=[],v=function(e){var t=y.length?y.pop():g.length;return g[t]=e,t},b=function(e){var t=g[e];return g[e]=null,y.push(e),t};c={loaded:!1,methods:{},queuedMethodCalls:[]},r(function(){var e=[];window.ObjC_callback=function(r){c.loaded=!0,r.split(" ").forEach(function(t){c.methods[t]=function(r,i){var o=i?v(i):-1;e.push("desmos:"+t+"/"+o+"/"+encodeURIComponent(r)),1===e.length&&n.attr("src",e[0])}}),this.ObjC_callback=function(t,r){try{-1!==t&&b(t)(r)}finally{e.shift(),e.length>0&&n.attr("src",e[0])}},c.methods.proxyXHR&&t(),c.queuedMethodCalls.forEach(function(e){w[e.methodName].apply(w,e.args)})};var n=r('<iframe id="objc-bridge" style="position:absolute; left: -1000px; z-index: -1" src="desmos:loaded"/>').appendTo(document.body)})}else o.IS_ANDROID?l=window.Android:p=!0;var x=u(i,function(e,t){e.init=function(){t.init.call(this),this.heartbeatTimeout=null,this.observeEvent("started resumed",function(e){this.gaEvent(e+":"+this.versionNumber),this.incrementHeartbeat(0)}.bind(this)),-1!==document.location.search.indexOf("simulateVersionNumber")&&(this.versionNumber="?.?.?")},e.heartbeat=function(e){clearTimeout(this.heartbeatTimeout),this.gaEvent("heartbeat-"+10*e),this.incrementHeartbeat(e)},e.incrementHeartbeat=function(e){clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=setTimeout(function(){this.heartbeat(e+1)}.bind(this),6e5)},e._started=function(e,t){this.appId=e,this.versionNumber=t,this.triggerEvent("started")},e._resumed=function(){this.triggerEvent("resumed")},e.handleAndroidBackButtonAndReturnIfShouldMoveToBackground=function(){var e=window.Calc&&window.Calc.controller;return e&&e.isKeypadOpen()?(a(),"false"):(e=window.MainController,e&&e.handleAndroidBackButton()?"false":"true")},e.isInApp=function(){return window.platform&&"www"!==window.platform},e.onGoogleAuthResult=function(e){this.triggerEvent("onGoogleAuthResult",e)},e.onAppleAuthResult=function(e){this.triggerEvent("onAppleAuthResult",e)},e.onObjCXHRProxyResult=function(e){var t=e.id,n=f[t];delete f[t],n.respond(e.status,e.headers,e.body)},e.sendAnalyticsEvent=function(e,t){this.sendSerializedAnalyticsEvent(JSON.stringify({type:e,payload:t}))}}),E=["hideLoadingScreen","gaEvent","openGoogleLogin","openAppleLogin","logout","saveCookies","deleteCookies","startSingleAppMode","endSingleAppMode","setWWWSubdomain","sendSerializedAnalyticsEvent","sendStoredLogsToDesmos"],w=new x;return E.forEach(function(e){w[e]=function(){p||(l?l[e]?l[e].apply(l,arguments):d.log("call to missing Android method",e,arguments):c&&(c.loaded?c.methods[e]?c.methods[e].apply(c,arguments):d.log("call to missing ObjC method",e,arguments):c.queuedMethodCalls.push({methodName:e,args:arguments})))}}),p||(window.AppBridge=w,document.addEventListener("click",n,!0)),w}),define("loadcss!mygraphs/item",function(){}),define("mygraphs/item",["require","exports","tslib","dcgview","jquery","loadcss!./item"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Item=void 0;var o=r.Components.If,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"saved-graph":!0,"graph-link-container":!0,"dcg-selected":e.props.isSelected()}},onTap:function(t){t.wasHandled()||e.props.onTap(t)}},r.createElement(o,{predicate:function(){return!e.props.isDeletingGraph()&&!e.props.didDeleteGraphFail()}},function(){return r.createElement("div",{role:r.const("link"),tabindex:r.const(0),class:function(){return{"graph-link":!0,"dcg-action-preview-graph":!0,"example-graph":e.props.isExample()}},didMount:e.bindFn(e.onMount)},r.createElement("span",{class:r.const("dcg-thumb"),style:e.const({"background-image":"url("+e.props.getThumbURL()+")"})}),r.createElement("span",{class:r.const("dcg-title")},e.props.getTitle),r.createElement("span",null),r.createElement("span",{class:r.const("date")},function(){return e.props.isExample()?e.props.t("example"):e.props.getDisplayDate()}))}),r.createElement(o,{predicate:this.props.isDeletingGraph},function(){return r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("deleting"),handleEvent:r.const("true"),onTap:function(){e.props.canCancelDelete()&&e.props.cancelDeleteGraph()}},function(){return e.props.t("Deleting...")},r.createElement(o,{predicate:e.props.canCancelDelete},function(){return r.createElement("div",{role:r.const("button"),tabindex:r.const(0),class:r.const("cancel-delete")},function(){return e.props.t("Cancel")})}))}),r.createElement(o,{predicate:this.props.didDeleteGraphFail},function(){return r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("retry-delete"),handleEvent:r.const("true")},function(){return e.props.t("Error deleting.")},r.createElement("a",{role:r.const("button"),tabindex:r.const(0),class:r.const("dcg-action-removegraph"),onTap:e.props.requestDeleteGraph},function(){return e.props.t("Try again")}),function(){return e.props.t("or")},r.createElement("a",{role:r.const("button"),tabindex:r.const(0),class:r.const("dcg-action-cancelremovegraph"),onTap:e.props.cancelDeleteGraph},function(){return e.props.t("Cancel")}))}),r.createElement(o,{predicate:function(){return!e.props.isExample()&&!e.props.isDeletingGraph()&&!e.props.didDeleteGraphFail()}},function(){return r.createElement("span",{class:r.const("actions"),handleEvent:r.const("true")},r.createElement("span",{role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return e.props.t("Delete __graphTitle__",{graphTitle:e.props.getTitle()})},class:r.const("dcg-action-removegraph"),onTap:e.props.requestDeleteGraph},r.createElement("i",{class:r.const("dcg-icon-remove")})))}))},t.prototype.didUpdate=function(){this.props.isSelected()&&this.$node.focus()},t.prototype.onMount=function(e){var t=this;this.$node=i(e),this.$node.on("focus",function(){t.props.isSelected()||t.props.onFocus()})},t}(r.Class);t.Item=a}),define("loadcss!mygraphs/save-btn",function(){}),define("mygraphs/save-btn",["require","exports","tslib","dcgview","loadcss!./save-btn"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveBtn=void 0;var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.shouldShowSaveButton=function(){return!this.props.isSaving()&&!this.props.didSaveRecentlySucceed()&&!this.props.didSaveRecentlyFail()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("save-btn-container")},r.createElement(i,{predicate:function(){return e.shouldShowSaveButton()}},function(){return r.createElement("div",{class:r.const("save-button")},r.createElement("span",{role:r.const("button"),onTap:e.props.onTap,class:function(){return{"dcg-btn-green":e.props.didGraphChange(),"disabled-save-btn":!e.props.didGraphChange()}},"aria-disabled":function(){return!e.props.didGraphChange()},tabindex:function(){return e.props.didGraphChange()?0:-1}},function(){return e.props.t("Save")}))}),r.createElement(i,{predicate:this.props.isSaving},function(){return r.createElement("div",{class:r.const("save-saving")},r.createElement("span",{class:r.const("dcg-spinner-dark")}))}),r.createElement(i,{predicate:this.props.didSaveRecentlyFail},function(){return r.createElement("div",{class:r.const("save-error"),"aria-live":r.const("assertive"),"aria-atomic":r.const("true")},r.createElement("i",{class:r.const("dcg-icon-remove")}),r.const(" "),function(){return e.props.t("error")})}),r.createElement(i,{predicate:this.props.didSaveRecentlySucceed},function(){return r.createElement("div",{class:r.const("save-success")},r.createElement("i",{class:r.const("dcg-icon-check")}),r.const(" "),function(){return e.props.t("saved")})}))},t}(r.Class);t.SaveBtn=o}),define("loadcss!mygraphs/graph-in-progress",function(){}),define("mygraphs/graph-in-progress",["require","exports","tslib","dcgview","./save-btn","loadcss!./item","loadcss!./graph-in-progress"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphInProgress=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("graph-link-container graph-in-progress")},r.createElement("div",{role:r.const("link"),"aria-label":function(){return e.props.t("Save")},class:r.const("graph-link dcg-action-preview-graph"),onTap:this.props.openSaveDialog},r.createElement("span",{class:r.const("dcg-thumb"),style:function(){return{"background-image":"url("+e.props.getThumbnail()+")"}}}),r.createElement("span",{class:r.const("dcg-title")},this.props.getTitle),r.createElement("span",{class:r.const("date")},function(){return e.props.didGraphChange()?e.props.wasCurrentGraphEverSaved()?e.props.t("last saved: "+e.props.getDisplayDate()):e.props.t("unsaved graph"):e.props.t("no unsaved changes")})),r.createElement(i.SaveBtn,{didGraphChange:this.props.didGraphChange,isSaving:this.props.isSaving,didSaveRecentlySucceed:this.props.didSaveRecentlySucceed,didSaveRecentlyFail:this.props.didSaveRecentlyFail,onTap:this.props.simpleSave,t:this.props.t.bind(this.props)}))},t.prototype.shouldUpdate=function(){return this.props.isOpen()},t}(r.Class);t.GraphInProgress=o}),define("loadcss!mygraphs/user-bar",function(){}),define("mygraphs/user-bar",["require","exports","tslib","dcgview","jquery","loadcss!./user-bar"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserBar=void 0;var o=r.Components,a=o.Input,s=o.If,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.willUpdate=function(){this.props.isSearching()||this.setSearchValue("")},t.prototype.setSearchValue=function(e){this.searchValue!==e&&(this.searchValue=e,this.props.updateFilter(e))},t.prototype.init=function(){this.controller=this.props.controller(),this.searchValue=""},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-user-bar")},r.createElement(s,{predicate:function(){return!e.props.isSearching()}},function(){return r.createElement("span",{role:r.const("button"),tabindex:r.const(0),class:r.const("dcg-action-toggle-dropdown"),"aria-expanded":e.props.isDropdownOpen,onTap:e.props.toggleDropdown,didMount:e.bindFn(e.didMountDropdown)},r.createElement("span",{class:r.const("dcg-variable-name")},function(){return e.controller.userController.getFirstName()}),r.createElement("span",{class:r.const("dcg-caret-container"),style:function(){return{transform:e.props.isDropdownOpen()?"rotate(-180deg)":"rotate(0)"}}},r.createElement("i",{class:r.const("dcg-icon-chevron-down")})))}),r.createElement(s,{predicate:function(){return!e.props.isDropdownOpen()}},function(){return r.createElement("div",{role:r.const("search"),class:function(){return{"search-container":!0,"search-open":e.props.isSearching()}}},r.createElement("i",{class:r.const("dcg-icon-search search-icon")}),r.createElement(a,{placeholder:function(){return e.props.t("search by title")},onInput:e.bindFn(e.setSearchValue),onFocus:e.props.openSearch,value:function(){return e.searchValue},didMount:e.bindFn(e.didMountSearch)}),r.createElement("span",{role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return e.props.t("Search")},class:r.const("dcg-icon-remove dcg-action-close-search"),onTap:function(t){t.preventDefault(),e.props.closeSearch()}}))}))},t.prototype.didMountDropdown=function(e){i(e).on("touchstart",function(e){return e.preventDefault()})},t.prototype.didMountSearch=function(e){var t=this;i(e).on("blur",function(){i(e).val()||t.props.closeSearch()})},t}(r.Class);t.UserBar=c}),define("loadcss!mygraphs/load-graph-view",function(){}),define("mygraphs/load-graph-view",["require","exports","tslib","dcgview","loadcss!./load-graph-view"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadGraphView=void 0;var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-loading-container")},r.createElement(i,{predicate:function(){return!e.props.didDataLoadFail()}},function(){return r.createElement("div",{class:r.const("dcg-graph-loading")},r.createElement("div",{class:r.const("pulsing-message")},function(){return e.props.t("Loading...")}),r.createElement("div",{role:r.const("link"),tabindex:r.const("0"),class:r.const("cancel-while-loading"),onTap:e.props.onCancel},function(){return e.props.t("Cancel")}))}),r.createElement(i,{predicate:function(){return e.props.didDataLoadFail()}},function(){return r.createElement("div",{class:r.const("dcg-graph-loading-error"),"aria-live":r.const("assertive"),"aria-atomic":r.const("true")},r.createElement("div",{class:r.const("dcg-graph-loading-error-title")},function(){return e.props.t("Error loading graph")}),r.createElement("div",{class:r.const("dcg-graph-loading-error-subtitle")},function(){return e.props.t("Check your internet connection?")}),r.createElement("div",{class:r.const("dcg-graph-loading-error-options")},r.createElement("span",{role:r.const("button"),tabindex:r.const("0"),class:r.const("dcg-action-try-again dcg-btn-blue dcg-btn-medium"),onTap:e.props.requestLoadGraphData},function(){return e.props.t("Try Again")}),function(){return e.props.t("or")},r.createElement("span",{role:r.const("button"),tabindex:r.const("0"),class:r.const("dcg-action-cancel dcg-btn-light-gray dcg-btn-medium"),onTap:e.props.onCancel},function(){return e.props.t("Cancel")})))}))},t}(r.Class);t.LoadGraphView=o}),define("loadcss!mygraphs/graph-preview",function(){}),define("mygraphs/graph-preview",["require","exports","tslib","dcgview","jquery","mygraphs/load-graph-view","loadcss!./graph-preview"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphPreview=void 0;var a=r.Components.If,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didMountGraphPreview=function(e){return this.$graphPreview=i(e),this.updateGraphPreviewTop()},t.prototype.didMountArrow=function(e){return this.$arrow=i(e),this.updateArrowTop()},t.prototype.didMountCalc=function(e){return this.previewCalc=this.props.makeAPI(e),this.updatePreviewCalc()},t.prototype.didUpdate=function(){return this.updateGraphPreviewTop(),this.updateArrowTop(),this.updatePreviewCalc()},t.prototype.updateGraphPreviewTop=function(){return this.$graphPreview.css("top",this.getTopOffset()+"px")},t.prototype.updateArrowTop=function(){this.$arrow.css("top",this.getArrowOffset()+"px")},t.prototype.updatePreviewCalc=function(){var e=this.props.getGraphData();e!==this.cachedGraphData&&(this.cachedGraphData=e,this.previewCalc.setState(e),this.previewCalc.resize())},t.prototype.getMaxTop=function(){return i(window).height()-this.$graphPreview.outerHeight()-10},t.prototype.getIdealTop=function(){var e=this.props.alignToNode();return null==e?null:i(e).offset().top+.5*i(e).outerHeight()-60},t.prototype.getTopOffset=function(){var e=this.getIdealTop();if(null==e)return 0;var t=this.getMaxTop();return Math.min(e,t)},t.prototype.getArrowOffset=function(){var e=this.getIdealTop();return null==e?60:60+e-this.getTopOffset()},t.prototype.template=function(){var e=this
;return r.createElement("div",{class:r.const("graph-preview"),didMount:this.didMountGraphPreview.bind(this)},r.createElement("span",{role:r.const("button"),tabindex:r.const("0"),class:r.const("dcg-pull-right dcg-btn-light-gray dcg-action-cancel"),onTap:this.props.onCancel},function(){return e.props.t("Cancel")}),r.createElement("h4",{class:r.const("dcg-title")},this.props.getTitle),r.createElement("div",{class:r.const("preview-graph-area")},r.createElement(a,{predicate:function(){return!e.props.getGraphData()}},function(){return r.createElement(o.LoadGraphView,{didDataLoadFail:e.props.didDataLoadFail,onCancel:e.props.onCancel,requestLoadGraphData:e.props.requestLoadGraphData,t:e.props.t.bind(e.props)})}),r.createElement("div",{didMount:this.didMountCalc.bind(this),class:function(){return{"dcg-preview-calculator":!0,"dcg-visible":e.props.getGraphData()}}}),r.createElement("div",{class:function(){return{"screenshot-clickjack":!0,"dcg-action-open-graph":!0,"dcg-visible":e.props.getGraphData()}}},r.createElement("span",{role:r.const("button"),tabindex:r.const("0"),class:r.const("dcg-action-open-graph dcg-open-graph-btn dcg-btn-blue"),onTap:this.props.onOpenGraph},this.props.getOpenText))),r.createElement("div",{class:r.const("active-arrow"),didMount:this.didMountArrow.bind(this)},r.createElement("div",{class:r.const("dcg-graphic")})))},t}(r.Class);t.GraphPreview=s}),define("loadcss!mygraphs/syncing-status-bar",function(){}),define("mygraphs/syncing-status-bar",["require","exports","tslib","dcgview","loadcss!./syncing-status-bar"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncingStatusBar=void 0;var i=r.Components.If,o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"syncing-status-bar":!0,visible:e.props.isSyncingGraphs()||e.props.didSyncFail()}}},r.createElement(i,{predicate:this.props.isSyncingGraphs},function(){return r.createElement("div",{class:r.const("syncing-status-text")},r.createElement("span",{class:r.const("dcg-pulse")},function(){return e.props.t("updating graphs...")}))}),r.createElement(i,{predicate:function(){return!e.props.isSyncingGraphs()&&!e.props.didSyncFail()}},function(){return r.createElement("div",{class:r.const("success-status-text")},r.createElement("i",{class:r.const("dcg-icon-check")}),r.const(" "),function(){return e.props.t("synced!")})}),r.createElement(i,{predicate:this.props.didSyncFail},function(){return r.createElement("div",{class:r.const("error-status-text"),onTap:e.props.requestSyncGraphs},function(){return e.props.t("offline. click to try again.")})}))},t}(r.Class);t.SyncingStatusBar=o}),define("loadcss!mygraphs/account-dropdown",function(){}),define("mygraphs/account-dropdown",["require","exports","tslib","dcgview","loadcss!./account-dropdown"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountDropdown=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-dropdown":!0,"dcg-is-open":e.props.isOpen()}}},r.createElement("div",{role:r.const("link"),tabindex:r.const("0"),class:r.const("dcg-dropdown-link"),onTap:this.props.onEditAccount},function(){return e.props.t("Account Settings")}),r.createElement("div",{role:r.const("link"),tabindex:r.const("0"),onTap:this.props.onLogout,class:r.const("dcg-dropdown-link")},function(){return e.props.t("Sign Out")}),r.createElement("div",{class:r.const("dcg-mygraphs-legal")},r.createElement("a",{href:r.const("/terms"),target:r.const("_blank")},function(){return e.props.t("Terms of Service")}),r.const("|"),r.createElement("a",{href:r.const("/privacy"),target:r.const("_blank")},function(){return e.props.t("Privacy Policy")})))},t}(r.Class);t.AccountDropdown=i}),define("loadcss!mygraphs/account-reminder",function(){}),define("mygraphs/account-reminder",["require","exports","tslib","dcgview","loadcss!./account-reminder"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountReminder=void 0;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller()},t.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-account-reminder")},r.createElement("a",{role:r.const("link"),tabindex:r.const("0"),class:r.const("dcg-btn-light-gray dcg-action-createaccount"),onTap:this.props.onCreateAccount},function(){return e.controller.t("Create Account")}),function(){return e.controller.t("or")},r.createElement("a",{role:r.const("link"),tabindex:r.const("0"),class:r.const("dcg-action-login"),onTap:this.props.onSignIn},function(){return e.controller.t("Sign In")}),r.createElement("div",null,function(){return e.getToSaveYourText()}))},t.prototype.getToSaveYourText=function(){return"graphing"===this.controller.product?this.controller.t("to save your graphs!"):"geometry"===this.controller.product?this.controller.t("to save your constructions!"):""},t}(r.Class);t.AccountReminder=i}),define("mygraphs/heading",["require","exports","tslib","dcgview"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.template=function(){var e=this;return r.createElement("div",{role:r.const("heading"),"aria-level":r.const("1"),class:r.const("dcg-mygraphs-section-title")},function(){return e.props.title()})},t}(r.Class);t.default=i}),define("loadcss!mygraphs/mygraphs",function(){}),define("mygraphs/mygraphs",["require","exports","tslib","dcgview","jquery","underscore","mygraphs/item","mygraphs/graph-in-progress","mygraphs/user-bar","mygraphs/graph-preview","mygraphs/syncing-status-bar","mygraphs/account-dropdown","mygraphs/account-reminder","mygraphs/load-graph-view","scroll_helpers","mygraphs/heading","keys","loadcss!./mygraphs"],function(e,t,n,r,i,o,a,s,c,l,u,d,p,h,f,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mygraphs=void 0;var y=r.Components,v=y.If,b=y.For,x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.didUpdate=function(){this.previewGraph&&f.scrollVisible(i(this.getSelectedNode()),this.$scrollableNode,60)&&this.update()},t.prototype.didMountScrollable=function(e){var t=this;this.$scrollableNode=i(e),this.$scrollableNode.on("focusin",function(e){if(null!=t.previewGraph&&!i(e.target).hasClass("graph-link"))return t.previewItem(null)}),i(window).on("keydown",function(e){if(!t.props.isOpen())return!0;switch(g.lookup(e)){case g.UP:return t.selectUp(e);case g.DOWN:return t.selectDown(e)}});var n=o.throttle(this.hidePreviewIfTooScrolled.bind(this),200);this.$scrollableNode.on("scroll",n),this.debouncedFetchSelectedGraph=o.debounce(this.fetchSelectedGraph.bind(this),200)},t.prototype.fetchSelectedGraph=function(){return this.props.graphsController().loadDataForGraph(this.previewGraph)},t.prototype.hidePreviewIfTooScrolled=function(){if(null!=this.previewGraph){var e=i(this.getSelectedNode()),t=i(this.findRootNode()).find(".active-arrow"),n=e.offset().top+.5*e.height(),r=t.offset().top;Math.abs(n-r)>10&&this.previewItem(null)}},t.prototype.toggleDropdown=function(){1===this.state?this.state=0:this.state=1,this.previewItem(null)},t.prototype.openSearch=function(){this.state=2,this.previewItem(null)},t.prototype.closeSearch=function(){this.state=0,this.previewItem(null)},t.prototype.updateFilter=function(e){this.filter=e,this.update()},t.prototype.getMaxGraphs=function(){return this.maxGraphs||50},t.prototype.getCountRemaining=function(){return this.getSavedGraphs().length-this.getMaxGraphs()},t.prototype.showMoreGraphs=function(e){var t=this.getMaxGraphs();if(this.getCountRemaining()<2*t?this.maxGraphs=1/0:this.maxGraphs=2*t,this.update(),"keyboard"===(null!=e?e.device:void 0)){var n=this.getSavedAndExampleGraphs(),r=null!=n?n[t]:void 0;r&&this.previewItem(r)}},t.prototype.getSelectedNode=function(){return i(".dcg-mygraphs .graph-link-container.dcg-selected")[0]},t.prototype.selectUp=function(e){if(null!=this.previewGraph){e.preventDefault();var t=this.getSavedAndExampleGraphs();if(t.length){var n=null!=this.previewGraph?this.previewGraph.hash:void 0,r=o.indexOf(o.pluck(t,"hash"),n),i=null!=t?t[r-1]:void 0;i?i&&this.previewItem(i):null!=this.$newGraph&&this.$newGraph.focus()}}},t.prototype.selectDown=function(e){if(null!=this.previewGraph){var t=this.getSavedAndExampleGraphs();if(t.length){e.preventDefault();var n=null!=this.previewGraph?this.previewGraph.hash:void 0,r=o.indexOf(o.pluck(t,"hash"),n),i=null!=t?t[r+1]:void 0;i&&(!i.example&&r+1>=this.getMaxGraphs()&&this.showMoreGraphs(),this.previewItem(i))}}},t.prototype.getFilter=function(){return 2===this.state&&null!=this.filter?this.filter:""},t.prototype.getSavedGraphs=function(){return this.props.graphsController().getSavedGraphs()},t.prototype.getExampleGraphs=function(){return this.props.graphsController().getExampleGraphs()},t.prototype.getSavedAndExampleGraphs=function(){return this.props.graphsController().getSavedAndExampleGraphs()},t.prototype.filterGraphs=function(e){var t=this,n=this.getFilter().toLowerCase();return n?e.filter(function(e){return t.sanitizeTitle(e.title).toLowerCase().indexOf(n)>=0}):e},t.prototype.sliceGraphs=function(e){return e.slice(0,this.getMaxGraphs())},t.prototype.canShowMore=function(e){return e.length>this.getMaxGraphs()},t.prototype.onFocusGraph=function(e){this.skipPreview()||this.previewItem(e)},t.prototype.onTapGraph=function(e,t){this.skipPreview()||"keyboard"===t.device?this.openGraphWithCover(e):this.previewGraph!==e&&this.previewItem(e)},t.prototype.previewItem=function(e){this.previewGraph&&(this.previewGraph=null),e&&(this.previewGraph=e,this.debouncedFetchSelectedGraph()),this.update()},t.prototype.skipPreview=function(){var e=window.platform;return i("body").width()<650||"ios"===e||"android"===e},t.prototype.onOpenPreviewGraph=function(){if(null!=this.previewGraph){var e=this.previewGraph;this.previewItem(null),this.props.onOpenGraph(e)}},t.prototype.openGraphWithCover=function(e){var t=this;if(this.graphWithCover=e,this.previewItem(null),null!=e)return setTimeout(function(){t.props.graphsController().loadGraphImmediately(e).done(function(){t.graphWithCover&&t.props.openGraphBehindCover(e).then(function(){t.graphWithCover=null,t.update()})}).always(function(){t.update()})},250)},t.prototype.cancelLoadGraphWithCover=function(){this.graphWithCover=null,this.update()},t.prototype.didDataLoadFail=function(e){return this.props.graphsController().didDataLoadFail(e)},t.prototype.willUpdate=function(){this.props.isOpen()&&this.userController.isLoggedIn()||(this.state=0)},t.prototype.didMountNewGraph=function(e){var t=this;return this.$newGraph=i(e),this.$newGraph.on("keydown",function(e){if(g.lookup(e)===g.DOWN){var n=t.getSavedAndExampleGraphs();return t.previewItem(n[0]),e.preventDefault(),e.stopPropagation()}})},t.prototype.sanitizeTitle=function(e){return e||this.graphsController.getUntitledString()},t.prototype.template=function(){var e=this;return this.state=0,this.controller=this.props.controller(),this.userController=this.controller.userController,this.graphsController=this.controller.graphsController,r.createElement("div",{class:function(){return{"dcg-mygraphs":!0,"logged-in":e.userController.isLoggedIn(),"preview-mode":!!e.props.previewMode(),"maintenance-mode":!!e.props.maintenanceMode()}}},r.createElement("div",{class:r.const("dcg-resources-container")},r.createElement(v,{predicate:function(){return e.props.accountsEnabled()&&!e.userController.isLoggedIn()&&!e.props.previewMode()&&!e.props.maintenanceMode()}},function(){return r.createElement(p.AccountReminder,{onCreateAccount:e.props.onCreateAccount,onSignIn:e.props.onSignIn,controller:e.props.controller})}),r.createElement(v,{predicate:function(){return e.userController.isLoggedIn()}},function(){return r.createElement("div",null,r.createElement(v,{predicate:function(){return e.userController.isLoggedIn()&&0===e.state}},function(){return r.createElement(u.SyncingStatusBar,{isSyncingGraphs:function(){return e.props.graphsController().isSyncing()},didSyncFail:function(){return e.props.graphsController().didSyncFail()},requestSyncGraphs:e.props.refreshGraphs,t:e.controller.t})}),r.createElement(c.UserBar,{controller:e.props.controller,isDropdownOpen:function(){return 1===e.state},toggleDropdown:e.toggleDropdown.bind(e),openSearch:e.openSearch.bind(e),closeSearch:e.closeSearch.bind(e),updateFilter:e.updateFilter.bind(e),isSearching:function(){return 2===e.state},t:e.controller.t}))}),r.createElement("div",{class:r.const("dcg-scrollable"),didMount:this.didMountScrollable.bind(this)},r.createElement("div",{class:r.const("dcg-scrollable-interior")},r.createElement(v,{predicate:this.props.maintenanceMode},function(){return r.createElement("div",{class:r.const("maintenance-mode")},function(){return e.controller.t("Desmos is temporarily in maintenance mode. You can open example graphs, but won't be able to sign in, open your graphs, or save any changes. We're so sorry for the inconvenience.")})}),r.createElement(v,{predicate:this.props.previewMode},function(){return r.createElement("div",{class:r.const("maintenance-mode")},function(){var t;return null===(t=e.props.previewMode())||void 0===t?void 0:t.message},r.createElement("br",null),r.createElement("a",{role:r.const("link"),tabindex:r.const("0"),class:r.const("dcg-btn-green"),href:function(){var t;return null===(t=e.props.previewMode())||void 0===t?void 0:t.url},target:r.const("_blank")},function(){return e.controller.t("Share your thoughts!")}))}),r.createElement(v,{predicate:function(){return 2!==e.state}},function(){return r.createElement("div",{role:r.const("link"),tabindex:r.const("0"),class:r.const("new-blank-graph dcg-action-newblankgraph"),onTap:function(){return e.previewItem(null),e.props.openBlankGraph()},didMount:e.didMountNewGraph.bind(e)},r.createElement("div",{class:r.const("new-blank-graph-inner")},r.createElement("span",{class:r.const("dcg-add-blank")},r.const("+")),r.const(" "),function(){return"geometry"===e.props.controller().getProduct()?e.controller.t("New Construction"):e.controller.t("New Blank Graph")}))}),r.createElement(v,{predicate:function(){return!e.props.maintenanceMode()&&!e.props.previewMode()&&e.userController.isLoggedIn()&&2!==e.state}},function(){return r.createElement("div",null,r.createElement(m.default,{title:function(){return"geometry"===e.props.controller().getProduct()?e.controller.t("Current Construction"):e.controller.t("Current Graph")}}),r.createElement(s.GraphInProgress,{getTitle:function(){return e.getPreviewTitle()},getDisplayDate:function(){return e.controller.unpack(e.props.graphsController().getCurrentDisplayDate())},isOpen:e.props.isOpen,getThumbnail:e.props.getThumbnail,didGraphChange:e.props.didGraphChange,simpleSave:function(){return e.props.simpleSave(),e.previewItem(null)},openSaveDialog:function(){return e.props.openSaveDialog(),e.previewItem(null)},wasCurrentGraphEverSaved:function(){return e.props.graphsController().wasCurrentGraphEverSaved()},isSaving:function(){return e.props.graphsController().isSaving()},didSaveRecentlySucceed:function(){return e.props.graphsController().didSaveSucceed()},didSaveRecentlyFail:function(){return e.props.graphsController().didSaveFail()},t:e.controller.t}))}),r.createElement(v,{predicate:function(){return e.userController.isLoggedIn()}},function(){return r.createElement(m.default,{title:function(){return"geometry"===e.props.controller().getProduct()?e.controller.t("Saved Constructions"):e.controller.t("Saved Graphs")}})}),r.createElement(b,{each:function(){return e.sliceGraphs(e.filterGraphs(e.getSavedGraphs()))},key:function(e){return e.getCollectionKey()}},r.createElement("div",null,function(t){return r.createElement(a.Item,{onTap:function(n){return e.onTapGraph(t,n)},onFocus:function(){return e.onFocusGraph(t)},cancelDeleteGraph:function(){return e.props.graphsController().cancelDeleteGraph(t)},requestDeleteGraph:function(){return e.previewItem(null),e.props.graphsController().requestDeleteGraph(t)},isDeletingGraph:function(){return e.props.graphsController().isDeletingGraph(t)},canCancelDelete:function(){return e.props.graphsController().canCancelDelete(t)},didDeleteGraphFail:function(){return e.props.graphsController().didDeleteGraphFail(t)},isSelected:function(){return t===e.previewGraph},isExample:r.const(!1),getDisplayDate:function(){return e.controller.unpack(t.displayDate())},getTitle:function(){return e.sanitizeTitle(t.title)},getThumbURL:function(){return t.thumbURL},t:e.controller.t})})),r.createElement(v,{predicate:function(){return e.userController.isLoggedIn()&&0===e.filterGraphs(e.getSavedGraphs()).length}},function(){return r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("no-matches")},function(){return 2===e.state?e.controller.t("No saved graphs match your search."):e.controller.t("No saved graphs yet.")})}),r.createElement(v,{predicate:function(){return e.canShowMore(e.filterGraphs(e.getSavedGraphs()))}},function(){return r.createElement("div",{class:r.const("dcg-show-more-graphs"),onTap:e.showMoreGraphs.bind(e),role:r.const("button"),tabindex:r.const(0)},function(){return e.controller.t("__count__ more...",{count:e.getCountRemaining()})})}),r.createElement(m.default,{title:function(){return e.controller.t("Examples")}}),r.createElement(b,{each:function(){return e.filterGraphs(e.getExampleGraphs())},key:function(e){return e.getCollectionKey()}},r.createElement("div",null,function(t){return r.createElement(a.Item,{onTap:function(n){return e.onTapGraph(t,n)},onFocus:function(){return e.onFocusGraph(t)},cancelDeleteGraph:function(){},requestDeleteGraph:function(){},isDeletingGraph:r.const(!1),didDeleteGraphFail:r.const(!1),canCancelDelete:r.const(!1),isSelected:function(){return t===e.previewGraph},isExample:r.const(!0),getDisplayDate:function(){return e.controller.unpack(t.displayDate())},getTitle:function(){return e.sanitizeTitle(t.title)},getThumbURL:function(){return t.thumbURL},t:e.controller.t})})),r.createElement(v,{predicate:function(){return!!e.getFilter()&&0===e.filterGraphs(e.getExampleGraphs()).length}},function(){return r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("no-matches")},function(){return e.controller.t("No examples match your search.")})}),r.createElement("div",{class:r.const("dcg-mygraphs-legal")},r.createElement("a",{href:r.const("/terms"),target:r.const("_blank")},function(){return e.controller.t("Terms of Service")}),r.const("|"),r.createElement("a",{href:r.const("/privacy"),target:r.const("_blank")},function(){return e.controller.t("Privacy Policy")}),r.createElement(v,{predicate:function(){return!!e.props.versionNumber()}},function(){return r.createElement("div",{class:r.const("dcg-version")},function(){return e.controller.t("Version")},r.const(" "),e.props.versionNumber)})))),r.createElement(v,{predicate:function(){return e.previewGraph}},function(){return r.createElement(l.GraphPreview,{alignToNode:function(){return e.getSelectedNode()},getTitle:function(){if(null!=e.previewGraph)return e.sanitizeTitle(e.previewGraph.title)},getGraphData:function(){return null!=e.previewGraph?e.previewGraph.graphData:void 0},onCancel:function(){return e.previewItem(null)},didDataLoadFail:function(){return e.didDataLoadFail(e.previewGraph)},requestLoadGraphData:e.fetchSelectedGraph.bind(e),onOpenGraph:e.onOpenPreviewGraph.bind(e),t:e.controller.t,makeAPI:e.props.makeAPI,getOpenText:function(){return e.controller.getOpenText()}})}),r.createElement(v,{predicate:function(){return e.userController.isLoggedIn()}},function(){return r.createElement("div",null,r.createElement(v,{predicate:function(){return e.userController.isLoggedIn()&&0===e.state}},function(){return r.createElement(u.SyncingStatusBar,{isSyncingGraphs:function(){return e.props.graphsController().isSyncing()},didSyncFail:function(){return e.props.graphsController().didSyncFail()},requestSyncGraphs:e.props.refreshGraphs,t:e.controller.t})}),r.createElement(d.AccountDropdown,{isOpen:function(){return 1===e.state},onEditAccount:e.props.onEditAccount,onLogout:e.props.onLogout,t:e.controller.t}))})),r.createElement(v,{predicate:this.props.isOpen},function(){return r.createElement("div",{role:r.const("link"),tabindex:r.const(0),class:r.const("dcg-resources-cover dcg-action-close-resources"),style:function(){return{opacity:null!=e.previewGraph?.6:0}},onTap:function(){return null!=e.previewGraph?e.previewItem(null):e.props.closeDrawer()},"aria-label":function(){return null!=e.previewGraph?e.controller.t("Close Graph Preview"):e.controller.t("Close Graph List")}})}),r.createElement(v,{predicate:function(){return null!=e.graphWithCover}},function(){return r.createElement("div",{class:r.const("dcg-fullscreen-loading-container")},r.createElement(v,{predicate:function(){return null!=(null!=e.graphWithCover?e.graphWithCover.graphData:void 0)}},function(){return r.createElement("div",{"aria-live":r.const("assertive"),"aria-atomic":r.const("true"),class:r.const("dcg-graph-loading")},r.createElement("div",{class:r.const("pulsing-message")},function(){return e.controller.t("Opening...")}),r.createElement("div",{class:r.const("slow-loading")},function(){return e.getSlowLoadingText()}))}),r.createElement(v,{predicate:function(){return null==(null!=e.graphWithCover?e.graphWithCover.graphData:void 0)}},function(){return r.createElement(h.LoadGraphView,{didDataLoadFail:function(){return e.didDataLoadFail(e.graphWithCover)},onCancel:e.cancelLoadGraphWithCover.bind(e),requestLoadGraphData:function(){return e.openGraphWithCover(e.graphWithCover)},t:e.controller.t})}))}))},t.prototype.getPreviewTitle=function(){return this.graphsController.getCurrentGraphTitle()||this.graphsController.getUntitledString()},t.prototype.getSlowLoadingText=function(){return"graphing"===this.graphsController.product?this.controller.t("This can take a little while for big graphs..."):"geometry"===this.graphsController.product?this.controller.t("This can take a little while for big constructions..."):""},t}(r.Class);t.Mygraphs=x}),define("mygraphs/wrapper",["require","exports","lib/app-bridge","tslib","dcgview","./mygraphs"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MygraphsWrapper=void 0;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController,this.userController=this.controller.userController,this.mygraphsController=this.controller.mygraphsController},t.prototype.template=function(){var e=this;return i.createElement(o.Mygraphs,{isOpen:function(){return e.mygraphsController.isMygraphsOpen()},graphsController:function(){return e.graphsController},maintenanceMode:function(){return e.controller.isInMaintenanceMode()},previewMode:function(){return e.controller.getPreviewParams()},accountsEnabled:this.const(!0),controller:function(){return e.controller},closeDrawer:function(){return e.controller.dispatch({type:"close-mygraphs"})},openBlankGraph:function(){return e.mygraphsController.openBlankGraph()},onOpenGraph:function(t){return e.mygraphsController.onOpenGraph(t)},openGraphBehindCover:function(t){return e.mygraphsController.openGraphBehindCover(t)},onLogout:function(){return e.userController.logout()},onEditAccount:function(){return e.controller.dispatch({type:"edit-account"})},onCreateAccount:function(){return e.controller.dispatch({type:"create-account"})},onSignIn:function(){return e.controller.dispatch({type:"launch-login"})},refreshGraphs:function(){return e.graphsController.refreshGraphs()},getThumbnail:function(){return e.mygraphsController.getThumbnail()},simpleSave:function(){return e.controller.simpleSave()},openSaveDialog:function(){return e.controller.openSaveDialog()},versionNumber:function(){return n.versionNumber},didGraphChange:function(){return e.graphsController.hasUnsavedChanges()},makeAPI:this.props.makeAPI})},t}(i.Class);t.MygraphsWrapper=a}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("vendor/bugsnag",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.bugsnag=e()}}(function(){function e(){return e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.apply(this,arguments)}function t(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}function r(){return be((Math.random()*Te<<0).toString(Ie),Ce)}function i(){return ke=ke<Te?ke:0,++ke-1}function o(){return"c"+(new Date).getTime().toString(Ie)+be(i().toString(Ie),Ce)+Me()+(r()+r())}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function s(e){return e instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(e))}function c(e){return"[Throws: "+(e?e.message:"?")+"]"}function l(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1}function u(e,t){for(var n=0,r=e.length;n<r;n++)if(0===t.indexOf(e[n]))return!0;return!1}function d(e,t){for(var n=0,r=e.length;n<r;n++){if("string"==typeof e[n]&&e[n]===t)return!0;if(e[n]&&"function"==typeof e[n].test&&e[n].test(t))return!0}return!1}function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function h(e,t){try{return e[t]}catch(e){return c(e)}}function f(e,t,n){function r(e,a){function f(){return a.length>Ke&&o>We}if(o++,a.length>He)return Ye;if(f())return Ye;if(null===e||"object"!=typeof e)return e;if(l(i,e))return"[Circular]";if(i.push(e),"function"==typeof e.toJSON)try{o--;var m=r(e.toJSON(),a);return i.pop(),m}catch(e){return c(e)}if(s(e)){o--;var g=r({name:e.name,message:e.message},a);return i.pop(),g}if(p(e)){for(var y=[],v=0,b=e.length;v<b;v++){if(f()){y.push(Ye);break}y.push(r(e[v],a.concat("[]")))}return i.pop(),y}var x={};try{for(var E in e)if(Object.prototype.hasOwnProperty.call(e,E))if(u(n,a.join("."))&&d(t,E))x[E]="[Filtered]";else{if(f()){x[E]=Ye;break}x[E]=r(h(e,E),a.concat(E))}}catch(e){}return i.pop(),x}var i=[],o=0;return r(e,[])}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function b(e,t){var n=[e.tagName];if(e.id&&n.push("#"+e.id),e.className&&e.className.length&&n.push("."+e.className.split(" ").join(".")),!t.document.querySelectorAll||!Array.prototype.indexOf)return n.join("");try{if(1===t.document.querySelectorAll(n.join("")).length)return n.join("")}catch(e){return n.join("")}if(e.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(e.parentNode.childNodes,e)+1;n.push(":nth-child("+r+")")}return 1===t.document.querySelectorAll(n.join("")).length?n.join(""):e.parentNode?b(e.parentNode,t)+" > "+n.join(""):n.join("")}function x(e,t){return e&&e.length<=t?e:e.slice(0,t-"(...)".length)+"(...)"}function E(){if(!Nt(qt(),this[Ot])){var e={status:this.status,request:this[Ft]+" "+this[Ot]};this.status>=400?kt.leaveBreadcrumb("XMLHttpRequest failed",e,At):kt.leaveBreadcrumb("XMLHttpRequest succeeded",e,At)}}function w(){Nt(qt(),this[Ot])||kt.leaveBreadcrumb("XMLHttpRequest error",{request:this[Ft]+" "+this[Ot]},At)}function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}var M,k=function(e,t,n){for(var r=n,i=0,o=e.length;i<o;i++)r=t(r,e[i],i,e);return r},C=function(e,t){return k(e,function(e,n,r,i){return t(n,r,i)?e.concat(n):e},[])},I=function(e,t){return k(e,function(e,n,r,i){return e.concat(t(n,r,i))},[])},T=function(e,t){return k(e,function(e,n,r,i){return!0===e||n===t},!1)},L=!{toString:null}.propertyIsEnumerable("toString"),D=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],P=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);if(!L)return n;for(var r=0,i=D.length;r<i;r++)Object.prototype.hasOwnProperty.call(e,D[r])&&n.push(D[r]);return n},A=function(e){return"[object Array]"===Object.prototype.toString.call(e)},O=function(e){return e<10?"0"+e:e},F=function(){var e=new Date;return e.getUTCFullYear()+"-"+O(e.getUTCMonth()+1)+"-"+O(e.getUTCDate())+"T"+O(e.getUTCHours())+":"+O(e.getUTCMinutes())+":"+O(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},N={map:I,reduce:k,filter:C,includes:T,keys:P,isArray:A,isoDate:F},q={};q.intRange=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1/0),function(n){return"number"==typeof n&&parseInt(""+n,10)===n&&n>=e&&n<=t}},q.stringWithLength=function(e){return"string"==typeof e&&!!e.length};var R={},B=N.filter,j=N.reduce,V=N.keys,U=N.isArray,G=N.includes,z=q.intRange,H=q.stringWithLength;R.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:H},appVersion:{defaultValue:function(){return null},message:"should be a string",validate:function(e){return null===e||H(e)}},appType:{defaultValue:function(){return null},message:"should be a string",validate:function(e){return null===e||H(e)}},autoNotify:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},beforeSend:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:function(e){return"function"==typeof e||U(e)&&B(e,function(e){return"function"==typeof e}).length===e.length}},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }. sessions is optional if autoCaptureSessions=false",validate:function(e,t){return e&&"object"==typeof e&&H(e.notify)&&(!1===t.autoCaptureSessions||H(e.sessions))&&0===B(V(e),function(e){return!G(["notify","sessions"],e)}).length}},autoCaptureSessions:{defaultValue:function(e,t){return void 0===t.endpoints||!!t.endpoints&&!!t.endpoints.sessions},message:"should be true|false",
validate:function(e){return!0===e||!1===e}},notifyReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return null===e||U(e)&&B(e,function(e){return"string"==typeof e}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return"string"==typeof e&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"should be a number ≤40",validate:function(e){return z(0,40)(e)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return"boolean"==typeof e}},user:{defaultValue:function(){return null},message:"(object) user should be an object",validate:function(e){return"object"==typeof e}},metaData:{defaultValue:function(){return null},message:"should be an object",validate:function(e){return"object"==typeof e}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&j(["debug","info","warn","error"],function(t,n){return t&&"function"==typeof e[n]},!0)}},filters:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return U(e)&&e.length===B(e,function(e){return"string"==typeof e||e&&"function"==typeof e.test}).length}}},R.mergeDefaults=function(e,t){if(!e||!t)throw new Error("opts and schema objects are required");return j(V(t),function(n,r){return n[r]=void 0!==e[r]?e[r]:t[r].defaultValue(e[r],e),n},{})},R.validate=function(e,t){if(!e||!t)throw new Error("opts and schema objects are required");var n=j(V(t),function(n,r){return t[r].validate(e[r],e)?n:n.concat({key:r,message:t[r].message,value:e[r]})},[]);return{valid:!n.length,errors:n}};var W=R.schema,K=N.map,Y=q.stringWithLength,X={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"should be set",validate:Y},logger:e({},W.logger,{defaultValue:function(){return"undefined"!=typeof console&&"function"==typeof console.debug?$():void 0}})},$=function(){var e={},t=console.log;return K(["debug","info","warn","error"],function(n){var r=console[n];e[n]="function"==typeof r?r.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")}),e},Q=N.isoDate,Z=function(){function e(e,t,n,r){void 0===e&&(e="[anonymous]"),void 0===t&&(t={}),void 0===n&&(n="manual"),void 0===r&&(r=Q()),this.type=n,this.name=e,this.metaData=t,this.timestamp=r}return e.prototype.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},e}(),J=Z,ee=function(e,t,n){var r=e.length,i=0,o=function(){if(i>=r)return n(null,!1);t(e[i],function(e,t){return e?n(e,!1):!0===t?n(null,!0):(i++,void o())})};o()},te=function(e){return e.app&&"string"==typeof e.app.releaseStage?e.app.releaseStage:e.config.releaseStage},ne=t,re=ne,ie=function(e,t){return function(n,r){if("function"!=typeof n)return r(null,!1);try{if(2!==n.length){var i=n(e);return i&&"function"==typeof i.then?i.then(function(t){return setTimeout(function(){return r(null,oe(e,t))},0)},function(e){setTimeout(function(){return t(e),r(null,!1)})}):r(null,oe(e,i))}n(e,function(n,i){if(n)return t(n),r(null,!1);r(null,oe(e,i))})}catch(e){t(e),r(null,!1)}}},oe=function(e,t){return e.isIgnored()||!1===t},ae={};!function(e,t){"use strict";"function"==typeof M&&M.amd?M("stackframe",[],t):"object"==typeof ae?ae=t():e.StackFrame=t()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}function r(e){if(e instanceof Object)for(var n=0;n<c.length;n++)e.hasOwnProperty(c[n])&&void 0!==e[c[n]]&&this["set"+t(c[n])](e[c[n]])}var i=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],a=["fileName","functionName","source"],s=["args"],c=i.concat(o,a,s);r.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof r)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new r(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var l=0;l<i.length;l++)r.prototype["get"+t(i[l])]=n(i[l]),r.prototype["set"+t(i[l])]=function(e){return function(t){this[e]=Boolean(t)}}(i[l]);for(var u=0;u<o.length;u++)r.prototype["get"+t(o[u])]=n(o[u]),r.prototype["set"+t(o[u])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(o[u]);for(var d=0;d<a.length;d++)r.prototype["get"+t(a[d])]=n(a[d]),r.prototype["set"+t(a[d])]=function(e){return function(t){this[e]=String(t)}}(a[d]);return r});var se={};!function(e,t){"use strict";"function"==typeof M&&M.amd?M("error-stack-parser",["stackframe"],t):"object"==typeof se?se=t(ae):e.ErrorStackParser=t(e.StackFrame)}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,n=t.exec(e.replace(/[\(\)]/g,""));return[n[1],n[2]||void 0,n[3]||void 0]},parseV8OrIE:function(t){return t.stack.split("\n").filter(function(e){return!!e.match(n)},this).map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,o=["eval","<anonymous>"].indexOf(r[0])>-1?void 0:r[0];return new e({functionName:i,fileName:o,lineNumber:r[1],columnNumber:r[2],source:t})},this)},parseFFOrSafari:function(t){return t.stack.split("\n").filter(function(e){return!e.match(r)},this).map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=t.match(n),i=r&&r[1]?r[1]:void 0,o=this.extractLocation(t.replace(n,""));return new e({functionName:i,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],o=2,a=r.length;o<a;o+=2){var s=n.exec(r[o]);s&&i.push(new e({fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],o=0,a=r.length;o<a;o+=2){var s=n.exec(r[o]);s&&i.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:r[o]}))}return i},parseOpera11:function(n){return n.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this).map(function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:a,args:s,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})},this)}}});var ce=se,le=function(e){return!(!e||!e.stack&&!e.stacktrace&&!e["opera#sourceloc"]||"string"!=typeof(e.stack||e.stacktrace||e["opera#sourceloc"])||e.stack===e.name+": "+e.message)},ue={};!function(e,t){"use strict";"function"==typeof M&&M.amd?M("stack-generator",["stackframe"],t):"object"==typeof ue?ue=t(ae):e.StackGenerator=t(e.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],r=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(r=t.maxStackSize);for(var i=arguments.callee;i&&n.length<r&&i.arguments;){for(var o=new Array(i.arguments.length),a=0;a<o.length;++a)o[a]=i.arguments[a];/function(?:\s+([\w$]+))+\s*\(/.test(i.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:o})):n.push(new e({args:o}));try{i=i.caller}catch(e){break}}return n}}});var de=N.reduce,pe=N.filter,he=function(){function e(e,t,n,r,i){void 0===n&&(n=[]),void 0===r&&(r=ge()),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=r,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=ye(e,"[no error class]"),this.errorMessage=ye(t,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=de(n,function(e,t){var n=fe(t);try{return"{}"===JSON.stringify(n)?e:e.concat(n)}catch(t){return e}},[]),this.user=void 0,this.session=void 0,this.originalError=i}var t=e.prototype;return t.ignore=function(){this._ignored=!0},t.isIgnored=function(){return this._ignored},t.updateMetaData=function(e){var t;if(!e)return this;var r;return null===(arguments.length<=1?void 0:arguments[1])?this.removeMetaData(e):null===(arguments.length<=2?void 0:arguments[2])?this.removeMetaData(e,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]):("object"==typeof(arguments.length<=1?void 0:arguments[1])&&(r=arguments.length<=1?void 0:arguments[1]),"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(t={},t[arguments.length<=1?void 0:arguments[1]]=arguments.length<=2?void 0:arguments[2],r=t),r?(this.metaData[e]||(this.metaData[e]={}),this.metaData[e]=n({},this.metaData[e],r),this):this)},t.removeMetaData=function(e,t){return"string"!=typeof e?this:t?this.metaData[e]?(delete this.metaData[e][t],this):this:(delete this.metaData[e],this)},t.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request,session:this.session}},e}(),fe=function(e){var t={file:e.fileName,method:me(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return t.lineNumber>-1&&!t.file&&!t.method&&(t.file="global code"),t},me=function(e){return/^global code$/i.test(e)?"global code":e},ge=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},ye=function(e,t){return"string"==typeof e&&e?e:t};he.getStacktrace=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),le(e)?ce.parse(e).slice(t):pe(ue.backtrace(),function(e){return-1===(e.functionName||"").indexOf("StackGenerator$$")}).slice(1+n)},he.ensureReport=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=0),e.__isBugsnagReport)return e;try{var r=he.getStacktrace(e,t,1+n);return new he(e.name,e.message,r,void 0,e)}catch(t){return new he(e.name,e.message,[],void 0,e)}};var ve=he,be=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},xe="object"==typeof window?window:self,Ee=0;for(var we in xe)Object.hasOwnProperty.call(xe,we)&&Ee++;var _e=navigator.mimeTypes?navigator.mimeTypes.length:0,Se=be((_e+navigator.userAgent.length).toString(36)+Ee.toString(36),4),Me=function(){return Se},ke=0,Ce=4,Ie=36,Te=Math.pow(Ie,Ce);o.fingerprint=Me;var Le=o,De=N.isoDate,Pe=function(){function e(){this.id=Le(),this.startedAt=De(),this._handled=0,this._unhandled=0}var t=e.prototype;return t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t.trackError=function(e){this[e._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),Ae=Pe,Oe=N.map,Fe=N.includes,Ne=N.isArray,qe=function(){function e(t){if(!(t&&t.name&&t.version&&t.url))throw new Error("`notifier` argument is required");this.notifier=t,this._configured=!1,this._opts={},this.config={},this._delivery={sendSession:function(){},sendReport:function(){}},this._logger={debug:function(){},info:function(){},warn:function(){},error:function(){}},this._plugins={},this._session=null,this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagClient=e,this.BugsnagReport=ve,this.BugsnagBreadcrumb=J,this.BugsnagSession=Ae;var n=this,r=this.notify;this.notify=function(){return r.apply(n,arguments)}}var t=e.prototype;return t.setOptions=function(e){this._opts=a({},this._opts,e)},t.configure=function(e){void 0===e&&(e=R.schema);var t=R.mergeDefaults(this._opts,e),n=R.validate(t,e);if(!0==!n.valid)throw new Error(je(n.errors));return"function"==typeof t.beforeSend&&(t.beforeSend=[t.beforeSend]),t.appVersion&&(this.app.version=t.appVersion),t.appType&&(this.app.type=t.appType),t.metaData&&(this.metaData=t.metaData),t.user&&(this.user=t.user),t.logger&&this.logger(t.logger),this.config=a({},this.config,t),this._configured=!0,this},t.use=function(e){if(!this._configured)throw new Error("client not configured");e.configSchema&&this.configure(e.configSchema);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=e.init.apply(e,[this].concat(n));return e.name&&(this._plugins["~"+e.name+"~"]=i),this},t.getPlugin=function(e){return this._plugins["~"+e+"~"]},t.delivery=function(e){return this._delivery=e,this},t.logger=function(e,t){return this._logger=e,this},t.sessionDelegate=function(e){return this._sessionDelegate=e,this},t.startSession=function(){return this._sessionDelegate?this._sessionDelegate.startSession(this):(this._logger.warn("No session implementation is installed"),this)},t.leaveBreadcrumb=function(e,t,n,r){if(!this._configured)throw new Error("client not configured");if(e=e||void 0,n="string"==typeof n?n:void 0,r="string"==typeof r?r:void 0,t="object"==typeof t&&null!==t?t:void 0,"string"==typeof e||t){var i=new J(e,t,n,r);return this.breadcrumbs.push(i),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},t.notify=function(e,t,n){var r=this;if(void 0===t&&(t={}),void 0===n&&(n=function(){}),!this._configured)throw new Error("client not configured");var i=te(this),o=Re(e,t,this._logger),s=o.err,c=o.errorFramesToSkip,l=o._opts;l&&(t=l),"object"==typeof t&&null!==t||(t={});var u=ve.ensureReport(s,c,2);if(u.app=a({},{releaseStage:i},u.app,this.app),u.context=u.context||t.context||this.context||void 0,u.device=a({},u.device,this.device,t.device),u.request=a({},u.request,this.request,t.request),u.user=a({},u.user,this.user,t.user),u.metaData=a({},u.metaData,this.metaData,t.metaData),u.breadcrumbs=this.breadcrumbs.slice(0),this._session&&(this._session.trackError(u),u.session=this._session),void 0!==t.severity&&(u.severity=t.severity,u._handledState.severityReason={type:"userSpecifiedSeverity"}),Ne(this.config.notifyReleaseStages)&&!Fe(this.config.notifyReleaseStages,i))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),n(null,u);var d=u.severity,p=[].concat(t.beforeSend).concat(this.config.beforeSend),h=function(e){r._logger.error("Error occurred in beforeSend callback, continuing anyway…"),r._logger.error(e)};ee(p,ie(u,h),function(e,t){if(e&&h(e),t)return r._logger.debug("Report not sent due to beforeSend callback"),n(null,u);r.config.autoBreadcrumbs&&r.leaveBreadcrumb(u.errorClass,{errorClass:u.errorClass,errorMessage:u.errorMessage,severity:u.severity},"error"),d!==u.severity&&(u._handledState.severityReason={type:"userCallbackSetSeverity"}),r._delivery.sendReport(r._logger,r.config,{apiKey:u.apiKey||r.config.apiKey,notifier:r.notifier,events:[u]},function(e){return n(e,u)})})},e}(),Re=function(e,t,n){var r,i,o=function(e){var t=Ve(e);return n.warn("Usage error. "+t),new Error("Bugsnag usage error. "+t)},a=0;switch(typeof e){case"string":"string"==typeof t?(r=o("string/string"),i={metaData:{notifier:{notifyArgs:[e,t]}}}):(r=new Error(String(e)),a=3);break;case"number":case"boolean":r=new Error(String(e));break;case"function":r=o("function");break;case"object":null!==e&&(re(e)||e.__isBugsnagReport)?r=e:null!==e&&Be(e)?(r=new Error(e.message||e.errorMessage),r.name=e.name||e.errorClass,a=3):r=o(null===e?"null":"unsupported object");break;default:r=o("nothing")}return{err:r,errorFramesToSkip:a,_opts:i}},Be=function(e){return!("string"!=typeof e.name&&"string"!=typeof e.errorClass||"string"!=typeof e.message&&"string"!=typeof e.errorMessage)},je=function(e){return"Bugsnag configuration error\n"+Oe(e,function(e){return'"'+e.key+'" '+e.message+" \n    got "+Ue(e.value)}).join("\n\n")},Ve=function(e){return"notify() expected error/opts parameters, got "+e},Ue=function(e){return"object"==typeof e?JSON.stringify(e):String(e)},Ge=qe,ze=function(e,t,n,r){var i=r&&r.filterKeys?r.filterKeys:[],o=r&&r.filterPaths?r.filterPaths:[];return JSON.stringify(f(e,i,o),t,n)},He=20,We=25e3,Ke=8,Ye="...",Xe={},$e=["events.[].app","events.[].metaData","events.[].user","events.[].breadcrumbs","events.[].request","events.[].device"],Qe=["device","app","user"];Xe.report=function(e,t){var n=ze(e,null,null,{filterPaths:$e,filterKeys:t});if(n.length>1e6&&(delete e.events[0].metaData,e.events[0].metaData={notifier:"WARNING!\nSerialized payload was "+n.length/1e6+"MB (limit = 1MB)\nmetaData was removed"},n=ze(e,null,null,{filterPaths:$e,filterKeys:t}),n.length>1e6))throw new Error("payload exceeded 1MB limit");return n},Xe.session=function(e,t){var n=ze(e,null,null,{filterPaths:Qe,filterKeys:t});if(n.length>1e6)throw new Error("payload exceeded 1MB limit");return n};var Ze={},Je=N.isoDate;Ze=function(e){return void 0===e&&(e=window),{sendReport:function(t,n,r,i){void 0===i&&(i=function(){});var o=et(n,"notify","4",e),a=new e.XDomainRequest;a.onload=function(){i(null)},a.open("POST",o),setTimeout(function(){try{a.send(Xe.report(r,n.filters))}catch(e){t.error(e),i(e)}},0)},sendSession:function(t,n,r,i){void 0===i&&(i=function(){});var o=et(n,"sessions","1",e),a=new e.XDomainRequest;a.onload=function(){i(null)},a.open("POST",o),setTimeout(function(){try{a.send(Xe.session(r,n.filters))}catch(e){t.error(e),i(e)}},0)}}};var et=function(e,t,n,r){return tt(e.endpoints[t],r.location.protocol)+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(Je())},tt=Ze._matchPageProtocol=function(e,t){return"http:"===t?e.replace(/^https:/,"http:"):e},nt=N.isoDate,rt=function(e){return void 0===e&&(e=window),{sendReport:function(t,n,r,i){void 0===i&&(i=function(){});try{var o=n.endpoints.notify,a=new e.XMLHttpRequest;a.onreadystatechange=function(){a.readyState===e.XMLHttpRequest.DONE&&i(null)},a.open("POST",o),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Bugsnag-Api-Key",r.apiKey||n.apiKey),a.setRequestHeader("Bugsnag-Payload-Version","4"),a.setRequestHeader("Bugsnag-Sent-At",nt()),a.send(Xe.report(r,n.filters))}catch(e){t.error(e)}},sendSession:function(t,n,r,i){void 0===i&&(i=function(){});try{var o=n.endpoints.sessions,a=new e.XMLHttpRequest;a.onreadystatechange=function(){a.readyState===e.XMLHttpRequest.DONE&&i(null)},a.open("POST",o),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Bugsnag-Api-Key",n.apiKey),a.setRequestHeader("Bugsnag-Payload-Version","1"),a.setRequestHeader("Bugsnag-Sent-At",nt()),a.send(Xe.session(r,n.filters))}catch(e){t.error(e)}}}},it={init:function(e,t){void 0===t&&(t=window),e.config.beforeSend.unshift(function(e){e.context||(e.context=t.location.pathname)})}},ot=N.isoDate,at={init:function(e,t){void 0===t&&(t=navigator);var n={locale:t.browserLanguage||t.systemLanguage||t.userLanguage||t.language,userAgent:t.userAgent};e.device=m({},n,e.device),e.config.beforeSend.unshift(function(e){e.device=m({},e.device,{time:ot()})})}},st={init:function(e,t){void 0===t&&(t=window),e.config.beforeSend.unshift(function(e){e.request&&e.request.url||(e.request=g({},e.request,{url:t.location.href}))})}},ct=N.isArray,lt=N.includes,ut={init:function(e){return e.sessionDelegate(dt)}},dt={startSession:function(e){var t=e;t._session=new e.BugsnagSession;var n=te(t);return ct(t.config.notifyReleaseStages)&&!lt(t.config.notifyReleaseStages,n)?(t._logger.warn("Session not sent due to releaseStage/notifyReleaseStages configuration"),t):t.config.endpoints.sessions?(t._delivery.sendSession(t._logger,t.config,{notifier:t.notifier,device:t.device,app:y({},{releaseStage:n},t.app),sessions:[{id:t._session.id,startedAt:t._session.startedAt,user:t.user}]}),t):(t._logger.warn("Session not sent due to missing endpoints.sessions configuration"),t)}},pt={init:function(e){e.config.collectUserIp||e.config.beforeSend.push(function(e){e.user&&void 0===e.user.id&&delete e.user.id,e.user=v({id:"[NOT COLLECTED]"},e.user),e.request=v({clientIp:"[NOT COLLECTED]"},e.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}}}},ht={},ft=N.map,mt=N.reduce,gt=N.filter;ht.init=function(e){var t=/^dev(elopment)?$/.test(e.config.releaseStage),n=!1===e.config.consoleBreadcrumbsEnabled,r=(!1===e.config.autoBreadcrumbs||t)&&!0!==e.config.consoleBreadcrumbsEnabled;n||r||ft(yt,function(t){var n=console[t];console[t]=function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];e.leaveBreadcrumb("Console output",mt(i,function(e,t,n){var r="[Unknown value]";try{r=String(t)}catch(e){}if("[object Object]"===r)try{r=JSON.stringify(t)}catch(e){}return e["["+n+"]"]=r,e},{severity:0===t.indexOf("group")?"log":t}),"log"),n.apply(console,i)},console[t]._restore=function(){console[t]=n}})},ht.configSchema={consoleBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}};var yt=gt(["log","debug","info","warn","error"],function(e){return"undefined"!=typeof console&&"function"==typeof console[e]}),vt={},bt=N.reduce;vt={init:function(e,t,n){void 0===t&&(t=document),void 0===n&&(n=window);var r="",i=!1,o=function(){return t.documentElement.outerHTML},a=n.location.href,s=function(e){var t=e.stacktrace[0];if(!t||!t.file||!t.lineNumber)return t;if(t.file.replace(/#.*$/,"")!==a.replace(/#.*$/,""))return t;i&&r||(r=o());var n=["\x3c!-- DOC START --\x3e"].concat(r.split("\n")),s=wt(n,t.lineNumber-1),c=s.script,l=s.start,u=bt(c,function(e,n,r){return Math.abs(l+r+1-t.lineNumber)>10?e:(e[""+(l+r+1)]=n,e)},{});t.code=u,e.updateMetaData("script",{content:c.join("\n")})};r=o();var c=t.onreadystatechange;t.onreadystatechange=function(){"interactive"===t.readyState&&(r=o(),i=!0),"function"==typeof c&&c.apply(this,arguments)},e.config.beforeSend.unshift(s)}};var xt=/^.*<script.*?>/,Et=/<\/script>.*$/,wt=vt.extractScriptContent=function(e,t){for(var n=t;n<e.length&&!Et.test(e[n]);)n++;for(var r=n;n>0&&!xt.test(e[n]);)n--;var i=n,o=e.slice(i,r+1);return o[0]=o[0].replace(xt,""),o[o.length-1]=o[o.length-1].replace(Et,""),{script:o,start:i}},_t={init:function(e,t){if(void 0===t&&(t=window),"addEventListener"in t){var n=!1===e.config.interactionBreadcrumbsEnabled,r=!1===e.config.autoBreadcrumbs&&!0!==e.config.interactionBreadcrumbsEnabled;n||r||t.addEventListener("click",function(n){var r,i;try{r=St(n.target),i=b(n.target,t)}catch(t){r="[hidden]",i="[hidden]",e._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/y94fq5zm")}e.leaveBreadcrumb("UI click",{targetText:r,targetSelector:i},"user")},!0)}},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}}},St=function(e){var t=e.textContent||e.innerText||"";return t||"submit"!==e.type&&"button"!==e.type||(t=e.value),t=t.replace(/^\s+|\s+$/g,""),x(t,140)},Mt={};Mt.init=function(e,t){if(void 0===t&&(t=window),"addEventListener"in t){var n=!1===e.config.navigationBreadcrumbsEnabled,r=!1===e.config.autoBreadcrumbs&&!0!==e.config.navigationBreadcrumbsEnabled;if(!n&&!r){var i=function(t){return function(){return e.leaveBreadcrumb(t,{},"navigation")}};t.addEventListener("pagehide",i("Page hidden"),!0),t.addEventListener("pageshow",i("Page shown"),!0),t.addEventListener("load",i("Page loaded"),!0),t.document.addEventListener("DOMContentLoaded",i("DOMContentLoaded"),!0),t.addEventListener("load",function(){return t.addEventListener("popstate",i("Navigated back"),!0)}),t.addEventListener("hashchange",function(n){var r=n.oldURL?{from:It(n.oldURL,t),to:It(n.newURL,t),state:Dt(t)}:{to:It(t.location.href,t)};e.leaveBreadcrumb("Hash changed",r,"navigation")},!0),t.history.replaceState&&Lt(e,t.history,"replaceState",t),t.history.pushState&&Lt(e,t.history,"pushState",t),e.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}}},Mt.configSchema={navigationBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}};var kt,Ct,It=function(e,t){var n=t.document.createElement("A");return n.href=e,""+n.pathname+n.search+n.hash},Tt=function(e,t,n,r){var i=It(e.location.href,e);return{title:n,state:t,prevState:Dt(e),to:r||i,from:i}},Lt=function(e,t,n,r){var i=t[n];t[n]=function(o,a,s){e.leaveBreadcrumb("History "+n,Tt(r,o,a,s),"navigation"),"function"==typeof e.refresh&&e.refresh(),e.config.autoCaptureSessions&&e.startSession(),i.apply(t,[o,a].concat(void 0!==s?s:[]))},t[n]._restore=function(){t[n]=i}},Dt=function(e){try{return e.history.state}catch(e){}},Pt={},At="request",Ot="BS~~U",Ft="BS~~M",Nt=N.includes,qt=function(){return[kt.config.endpoints.notify,kt.config.endpoints.sessions]};Pt.init=function(e,t){void 0===t&&(t=window);var n=!1===e.config.networkBreadcrumbsEnabled,r=!1===e.config.autoBreadcrumbs&&!0!==e.config.networkBreadcrumbsEnabled;n||r||(kt=e,Ct=t,Rt(),Bt())},Pt.configSchema={networkBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}};var Rt=function(){if("addEventListener"in Ct.XMLHttpRequest.prototype){var e=Ct.XMLHttpRequest.prototype.open;Ct.XMLHttpRequest.prototype.open=function(t,n){this[Ot]=n,this[Ft]=t,this["BS~~S"]&&(this.removeEventListener("load",E),this.removeEventListener("error",w)),this.addEventListener("load",E),this.addEventListener("error",w),this["BS~~S"]=!0,e.apply(this,arguments)}}},Bt=function(){if("fetch"in Ct){var e=Ct.fetch;Ct.fetch=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0],o=n[1],a="GET";return o&&o.method&&(a=o.method),new Promise(function(t,r){e.apply(void 0,n).then(function(e){jt(e,a,i),t(e)}).catch(function(e){Vt(a,i),r(e)})})}}},jt=function(e,t,n){var r={status:e.status,request:t+" "+n};e.status>=400?kt.leaveBreadcrumb("fetch() failed",r,At):kt.leaveBreadcrumb("fetch() succeeded",r,At)},Vt=function(e,t){kt.leaveBreadcrumb("fetch() error",{request:e+" "+t},At)},Ut=q.intRange,Gt={init:function(e){var t=0;e.config.beforeSend.push(function(n){if(t>=e.config.maxEvents)return n.ignore();t++}),e.refresh=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer ≤100",validate:function(e){return Ut(1,100)(e)}}}},zt={},Ht=N.map;zt={init:function(e){e.config.beforeSend.push(function(e){e.stacktrace=Ht(e.stacktrace,function(e){return _({},e,{file:Kt(e.file)})})})}};var Wt,Kt=zt._strip=function(e){return"string"==typeof e?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},Yt={init:function(e,t){function n(t,n,i,o,a){if(0===i&&/Script error\.?/.test(t))e._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/y94fq5zm");else{var s,c={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}};if(a)a.name&&a.message?s=new e.BugsnagReport(a.name,a.message,Xt(e.BugsnagReport.getStacktrace(a),n,i,o),c,a):(s=new e.BugsnagReport("window.onerror",String(a),Xt(e.BugsnagReport.getStacktrace(a,1),n,i,o),c,a),s.updateMetaData("window onerror",{error:a}));else if("object"!=typeof t||null===t||n&&"string"==typeof n||i||o||a)s=new e.BugsnagReport("window.onerror",String(t),Xt(e.BugsnagReport.getStacktrace(a,1),n,i,o),c,t),s.updateMetaData("window onerror",{event:t});else{var l=t.type?"Event: "+t.type:"window.onerror",u=t.message||t.detail||"";s=new e.BugsnagReport(l,u,e.BugsnagReport.getStacktrace(new Error,1).slice(1),c,t),s.updateMetaData("window onerror",{event:t,extraParameters:n})}e.notify(s)}"function"==typeof r&&r.apply(this,arguments)}void 0===t&&(t=window);var r=t.onerror;t.onerror=n}},Xt=function(e,t,n,r){var i=e[0];return i?(i.fileName||"string"!=typeof t||i.setFileName(t),!i.lineNumber&&$t(n)&&i.setLineNumber(n),i.columnNumber||($t(r)?i.setColumnNumber(r):window.event&&$t(window.event.errorCharacter)&&i.setColumnNumber(window.event.errorCharacter)),e):e},$t=function(e){return"number"==typeof e&&"NaN"!==String.call(e)},Qt={},Zt=N.reduce;Qt.init=function(e,t){void 0===t&&(t=window);var n=function(t){var n=t.reason,r=!1;try{t.detail&&t.detail.reason&&(n=t.detail.reason,r=!0)}catch(e){}var i,o={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}};if(n&&le(n))i=new e.BugsnagReport(n.name,n.message,ce.parse(n),o,n),r&&(i.stacktrace=Zt(i.stacktrace,en(n),[]));else{i=new e.BugsnagReport(n&&n.name?n.name:"UnhandledRejection",n&&n.message?n.message:'Rejection reason was not an Error. See "Promise" tab for more detail.',[],o,n),i.updateMetaData("promise","rejection reason",Jt(n))}e.notify(i)};"addEventListener"in t?t.addEventListener("unhandledrejection",n):t.onunhandledrejection=function(e,t){n({detail:{reason:e,promise:t}})},Wt=n};var Jt=function(e){if(null===e||void 0===e)return"undefined (or null)";if(re(e)){var t;return t={},t[Object.prototype.toString.call(e)]={name:e.name,message:e.message,code:e.code,stack:e.stack},t}return e},en=function(e){return function(t,n){return n.file===e.toString()?t:(n.method&&(n.method=n.method.replace(/^\s+/,"")),t.concat(n))}},tn={},nn=N.map,rn=S({},R.schema,X);return tn=function(e){"string"==typeof e&&(e={apiKey:e});var t=[];e.sessionTrackingEnabled&&(t.push("deprecated option sessionTrackingEnabled is now called autoCaptureSessions"),e.autoCaptureSessions=e.sessionTrackingEnabled),!e.endpoint&&!e.sessionEndpoint||e.endpoints||(t.push("deprecated options endpoint/sessionEndpoint are now configured in the endpoints object"),e.endpoints={notify:e.endpoint,sessions:e.sessionEndpoint}),e.endpoints&&e.endpoints.notify&&!e.endpoints.sessions&&t.push("notify endpoint is set but sessions endpoint is not. No sessions will be sent.");var n=new Ge({name:"Bugsnag JavaScript",version:"6.1.0",url:"https://github.com/bugsnag/bugsnag-js"});return n.setOptions(e),n.delivery(window.XDomainRequest?Ze():rt()),n.configure(rn),nn(t,function(e){return n._logger.warn(e)}),n.use(at),n.use(it),n.use(st),n.use(vt),n.use(Gt),n.use(ut),n.use(pt),n.use(zt),!1!==n.config.autoNotify&&(n.use(Yt),n.use(Qt)),n.use(Mt),n.use(_t),n.use(Pt),n.use(ht),n._logger.debug("Loaded!"),n.config.autoCaptureSessions?n.startSession():n},tn.Bugsnag={Client:Ge,Report:ve,Session:Ae,Breadcrumb:J},tn.default=tn,tn}),
define("main/user_controller",["require","exports","main/account_backend","tslib","jquery","lib/urlparser","lib/underscore-shim"],function(e,t,n,r,i,o,a){"use strict";function s(e){if(!e)return"";if(e.match(/[\d@_&\.\']/))return e;var t=e.split(" ");return t[0].length>=3?t[0]:e}Object.defineProperty(t,"__esModule",{value:!0}),t.computeFirstName=t.UserController=void 0;var c=function(e){function t(){var t=e.call(this)||this;return t.loggedIn=!1,t.logoutFailed=!1,t.loggingOut=!1,t.consentingToPrivacy=!1,t.privacyConsentFailed=!1,t.name="",t.email="",t.teacher=!1,t.verificationStatus="",t.subscriptions=[],t.privacyConsent=null,i.ajaxSetup({statusCode:{401:function(){return t.logout()}}}),t}return r.__extends(t,e),t.prototype.desmosLogin=function(e){return n.fetchUser(e).done(this.completeLogin.bind(this))},t.prototype.googleLogin=function(e){this.triggerEvent("googleLogin",e)},t.prototype.appleLogin=function(e){this.triggerEvent("appleLogin",e)},t.prototype.askServerIfLoggedIn=function(){return n.askServerIfLoggedIn().then(this.completeLogin.bind(this),this.logout.bind(this))},t.prototype.driveCallback=function(){return this.askServerIfLoggedIn()},t.prototype.createAccount=function(e){return n.registerUser(e).done(this.completeLogin.bind(this))},t.prototype.checkPendingDeletion=function(e){return n.checkPendingDeletion(e)},t.prototype.editAccount=function(e){var t=this;return n.editAccount(e).done(function(e){t.name=e.name||"",t.email=e.email||"",t.triggerEvent("userUpdated",void 0),t.triggerEvent("triggerRender",void 0)})},t.prototype.isTeacher=function(){return!!this.teacher},t.prototype.setSubscriptions=function(e){var t=this;return n.setSubscriptions(e).done(function(e){t.subscriptions=e.subscriptions||[],t.triggerEvent("userUpdated",void 0),t.triggerEvent("triggerRender",void 0)})},t.prototype.setName=function(e){var t=this;return n.setName(e).done(function(e){t.name=e.name||"",t.triggerEvent("userUpdated",void 0),t.triggerEvent("triggerRender",void 0)})},t.prototype.recoverPassword=function(e){return n.recoverPassword(e)},t.prototype.completeLogin=function(e){this.loggedIn=!0,this.name=e.name||"",this.email=e.email||"",this.subscriptions=e.subscriptions||[],this.verificationStatus=e.verificationStatus||"",this.privacyConsent=e.privacyConsent,this.teacher=!!e.isTeacher,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)},t.prototype.logout=function(){var e=this;return this.loggingOut=!0,this.triggerEvent("logout",void 0),this.triggerEvent("triggerRender",void 0),n.logout().done(this.completeLogout.bind(this)).fail(this._onLogoutFailure.bind(this)).always(function(){e.loggingOut=!1,e.triggerEvent("triggerRender",void 0)})},t.prototype.completeLogout=function(){this.loggedIn=!1,this.logoutFailed=!1,this.email="",this.name="",this.subscriptions=[],this.verificationStatus="",this.privacyConsent=null,this.teacher=!1,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)},t.prototype._onLogoutFailure=function(){var e=this;this.logoutFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(function(){e.logoutFailed=!1,e.triggerEvent("triggerRender",void 0)},2e3)},t.prototype.initiateAccountDeletion=function(){return n.initiateAccountDeletion()},t.prototype.getEmailChangeToken=function(){return o.getParameter(location.search,"changeToken")},t.prototype.initiateEmailChange=function(){return n.initiateEmailChange()},t.prototype.setEmail=function(e){var t=this;return n.setEmail(e).done(function(){t.email=e.newEmail||"",t.verificationStatus="VERIFYING",t.triggerEvent("userUpdated",void 0),t.triggerEvent("triggerRender",void 0)})},t.prototype.verifyEmail=function(){return n.verifyEmail(this.getEmail())},t.prototype.setPrivacyConsent=function(){var e=this;return this.consentingToPrivacy=!0,this.triggerEvent("triggerRender",void 0),n.setPrivacyConsent().done(this.completePrivacyConsent.bind(this)).fail(this.onPrivacyConsentFailure.bind(this)).always(function(){e.consentingToPrivacy=!1,e.triggerEvent("triggerRender",void 0)})},t.prototype.completePrivacyConsent=function(e){this.privacyConsent=e.privacyConsent,this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)},t.prototype.onPrivacyConsentFailure=function(){var e=this;this.privacyConsentFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(function(){e.privacyConsentFailed=!1,e.triggerEvent("triggerRender",void 0)},2e3)},t.prototype.didPrivacyConsentFail=function(){return!!this.privacyConsentFailed},t.prototype.isConsentingToPrivacy=function(){return!!this.consentingToPrivacy},t.prototype.isLoggedIn=function(){return!!this.loggedIn},t.prototype.isLoggingOut=function(){return!!this.loggingOut},t.prototype.didLogoutFail=function(){return!!this.logoutFailed},t.prototype.getEmail=function(){return this.email},t.prototype.getFirstName=function(){return s(this.name)},t.prototype.getFullName=function(){return this.name},t.prototype.getSubscriptions=function(){return this.subscriptions},t.prototype.getVerificationStatus=function(){return this.verificationStatus},t.prototype.hasConsentedToCollection=function(){return!!this.privacyConsent},t.prototype.getUserAsJSON=function(){return this.isLoggedIn()?{email:this.email,name:this.name,verificationStatus:this.verificationStatus,subscriptions:this.subscriptions,privacyConsent:this.privacyConsent}:void 0},t}(a.UnderscoreModelShim);t.UserController=c,t.computeFirstName=s}),define("main/calculator_3d_backend",["require","main/graph","./backend"],function(e){"use strict";var t=e("main/graph"),n=e("./backend");return{saveGraph:function(e,r){if(!r.hasOwnProperty("myGraphs"))throw new Error("Argument Error: saveGraph options must specify myGraphs");if(!r.hasOwnProperty("isUpdate"))throw new Error("Argument Error: saveGraph options must specify isUpdate");var i={parent_hash:e.parentHash,thumb_data:e.thumbURL,graph_hash:e.hash,my_graphs:r.myGraphs,is_update:r.isUpdate,title:e.title||void 0};return i.state=e.graphData,n.post("/api/v1/calculator_3d/save",i).then(function(n){return t.updateFromSync(e,n),e})},getGraphs:function(){return n.getJSON("/api/v1/calculator_3d/my_graphs")},removeGraph:function(e){return n.post("/api/v1/calculator_3d/my_graphs/remove",{hash:e.hash})}}}),define("main/geometry_backend",["require","main/graph","./backend"],function(e){"use strict";var t=e("main/graph"),n=e("./backend");return{saveConstruction:function(e,r){if(!r.hasOwnProperty("myConstructions"))throw new Error("Argument Error: saveConstruction options must specify myConstructions");if(!r.hasOwnProperty("isUpdate"))throw new Error("Argument Error: saveConstruction options must specify isUpdate");var i={state:e.graphData,parent_hash:e.parentHash,thumb_data:e.thumbURL,hash:e.hash,my_constructions:r.myConstructions,is_update:r.isUpdate,title:e.title||void 0};return n.post("/api/v1/geometry/save",i).then(function(n){return t.updateFromSync(e,n),e})},getConstructions:function(){return n.getJSON("/api/v1/geometry/my_constructions")},removeConstruction:function(e){return n.post("/api/v1/geometry/my_constructions/remove",{hash:e.hash})}}}),define("lib/random_hash",["require","exports","module"],function(e,t){"use strict";function n(e){this.bauArc4=new o(i(e))}function r(e){return e&s-1}function i(e){var t,n=e+"",i=[],o=0;for(t=0;t<n.length;t++)i[r(t)]=r((o^=19*i[r(t)])+n.charCodeAt(t));return i}function o(e){var t,n,i=this,o=e.length,a=0,c=i.i=i.j=i.m=0;for(i.S=[],i.c=[],o||(e=[o++]);a<s;)i.S[a]=a++;for(a=0;a<s;a++)t=i.S[a],c=r(c+t+e[a%o]),n=i.S[c],i.S[a]=n,i.S[c]=t;i.g=function(e){var t=i.S,n=r(i.i+1),o=t[n],a=r(i.j+o),c=t[a];t[n]=c,t[a]=o;for(var l=t[r(o+c)];--e;)n=r(n+1),o=t[n],a=r(a+o),c=t[a],t[n]=c,t[a]=o,l=l*s+t[r(o+c)];return i.i=n,i.j=a,l},i.g(s)}n.prototype.g=function(e){for(var t=Array(e),n=0;n<e;n++)t[n]=this.bauArc4.g(1);return t};var a,s=256,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=c.toLowerCase(),u=function(e){if(!e||!e.length||e.length<32)throw new Error("You must supply a seed to RandomHashFactory. It should have at least 128 bits of entropy, but was "+e);var t=new n(e);this.next=function(){for(var e,n=Array(10),r=0;r<10;)(e=t.g(1)[0]>>2)<62&&(n[r]=l[e],r++);return n.join("")},this.nextSeed=function(){for(var e=t.g(16),n=Array(16),r=0;r<16;r++)n[r]=e[r].toString(16),1===n[r].length&&(n[r]="0"+n[r]);return n.join("")}};return t.next=function(){if(!a)throw"Random Hash Factory not initialized";return a.next()},t.nextSeed=function(){if(!a)throw"Random Hash Factory not initialized";return a.nextSeed()},t.init=function(e){a=new u(e)},t}),define("main/graphs_controller",["require","jquery","underscore","pjs","main/graph","main/calculator_backend","main/calculator_3d_backend","main/geometry_backend","main/parse_json_errors","underscore_model","lib/random_hash","lib/animation-frame","bugsnag"],function(e){"use strict";var t=e("jquery"),n=e("underscore"),r=e("pjs"),i=e("main/graph"),o=e("main/calculator_backend"),a=e("main/calculator_3d_backend"),s=e("main/geometry_backend"),c=e("main/parse_json_errors"),l=e("underscore_model").UnderscoreModel,u=e("lib/random_hash"),d=e("lib/animation-frame"),p=e("bugsnag");return r(l,function(e,r){e.init=function(e,t,o,a,s){r.init.call(this),this.product=s,this.api=e,this.t=t,this.previousGraph=void 0,this.recoveryParentHash=void 0,this.randomHash=u,this._seedRandom(a),this.__savedGraphs=[];var c=o.map(i.fromAjax);this.__exampleGraphs=n.filter(c,function(e){return!e.easterEgg}),this.__easterEggGraphs=n.filter(c,function(e){return!!e.easterEgg}),this.__graphInfoCache={},this.__exampleGraphs.forEach(function(e){this._addGraphToCache(e)}.bind(this)),this.__easterEggGraphs.forEach(function(e){this._addGraphToCache(e)}.bind(this)),this.lastSync=void 0,this.lastSaveFailureMessage="",this.recentSaveFailure=!1,this.recentSaveSuccess=!1,this.saving=!1,this.syncError=!1,this.isLoadingGraphs=!1,this.currentGraph=i(),this._enableLoadingGraphStates()},e._seedRandom=function(e){if(!e)return void alert(this.t("Something went wrong, please report this to desmos.com support. (Error __error_num__)",{error_num:"77361"}));var t=new Date,n=""+e+t.getTime()+t.getMilliseconds();this.randomHash.init(n)},e.requestDeleteGraph=function(e){var t=this._getCachedGraphInfo(e);t.canCancelDelete=!0,t.deleteTimeout=setTimeout(this._deleteGraph.bind(this,e),3e3),t.isDeletingGraph=!0,t.didDeleteGraphFail=!1,this.triggerEvent("listChanged"),this.triggerEvent("triggerRender")},e._removeGraphByHash=function(e){var t=n.indexOf(n.pluck(this.__savedGraphs,"hash"),e);-1!==t&&this.__savedGraphs.splice(t,1)},e._deleteGraph=function(e){var t=this,n=e.hash,r=this._getCachedGraphInfo(e);r.canCancelDelete=!1,t.triggerEvent("listChanged"),t.triggerEvent("triggerRender");var i;switch(this.product){case"graphing":i=o.removeGraph(e);break;case"graphing3d":i=a.removeGraph(e);break;case"geometry":i=s.removeConstruction(e)}i.done(function(){t._removeGraphByHash(n)}).fail(function(){r.didDeleteGraphFail=!0}).always(function(){r.isDeletingGraph=!1,t.triggerEvent("listChanged"),t.triggerEvent("triggerRender")})},e.cancelDeleteGraph=function(e){var t=this._getCachedGraphInfo(e);clearTimeout(t.deleteTimeout),t.isDeletingGraph=!1,t.didDeleteGraphFail=!1,t.canCancelDelete=!1,this.triggerEvent("listChanged"),this.triggerEvent("triggerRender")},e.millisecondsSinceSync=function(){return this.lastSync?Date.now()-this.lastSync:1/0},e.clear=function(){this.lastSync=void 0,this.setSavedGraphsFromJSON([])},e.dismissSaveError=function(){this.recentSaveFailure=!1,this.triggerEvent("triggerRender")},e._triggerSaveSuccess=function(){this.saving=!1,this.recentSaveSuccess=!0,this.lastSaveFailureMessage=void 0,this.triggerEvent("triggerRender"),this.recentSaveTimeout=setTimeout(function(){this.recentSaveSuccess=!1,this.triggerEvent("triggerRender")}.bind(this),3e3)},e._triggerSaveError=function(e){var t=e.length&&e[0].message?this.t(e[0].message):this.t("Unexpected error.");this.saving=!1,this.recentSaveFailure=!0,this.lastSaveFailureMessage=t,this.triggerEvent("triggerRender"),this.recentSaveTimeout=setTimeout(this.dismissSaveError.bind(this),6e4)},e._updateGraphData=function(e){var t=JSON.stringify(this.api.getState());e.setProperty("graphData",t),e.setProperty("parentHash",e.hash),e.setProperty("recoveryParentHash",this.recoveryParentHash);var n=this.randomHash.next();e.setProperty("hash",n),this.recoveryParentHash=n;var r=this.api.screenshot({width:200,height:200,targetPixelRatio:2});e.setProperty("thumbURL",r)},e._clearSaveTimeout=function(){this.recentSaveFailure=!1,this.recentSaveSuccess=!1,this.lastSaveFailureMessage=void 0,this.triggerEvent("triggerRender"),clearTimeout(this.recentSaveTimeout)},e.save=function(e){var t=this,n=e&&e.newTitle,r=!(!e||!e.saveCopy);n&&(t.currentGraph.title=n),t._clearSaveTimeout(),t.saving=!0,t.triggerEvent("triggerRender");var i=this.currentGraph.copy();t._updateGraphData(i);var l,u=!r&&t.wasCurrentGraphEverSaved();switch(this.product){case"graphing":l=o.saveGraph(i,{myGraphs:!0,isUpdate:u});break;case"graphing3d":l=a.saveGraph(i,{myGraphs:!0,isUpdate:u});break;case"geometry":l=s.saveConstruction(i,{myConstructions:!0,isUpdate:u})}l.done(function(e){t.currentGraph=e.copy(),t._onCurrentGraphChanged(),t.triggerEvent("clearUnsavedChanges"),t.triggerEvent("triggerRender"),u&&t._removeGraphByHash(e.parentHash),t.__savedGraphs.unshift(e),t._addGraphToCache(e),t.triggerEvent("listChanged"),t.triggerEvent("triggerRender"),t._triggerSaveSuccess()}).fail(function(e){t._triggerSaveError(c(e))})},e.shareGraph=function(){var e=this.currentGraph.copy();this._updateGraphData(e);var t;switch(this.product){case"graphing":t=o.saveGraph(e,{myGraphs:!1,isUpdate:!1});break;case"graphing3d":t=a.saveGraph(e,{myGraphs:!1,isUpdate:!1});break;case"geometry":t=s.saveConstruction(e,{myConstructions:!1,isUpdate:!1})}return t},e.saveRecoveryGraph=function(){var e=this.currentGraph.copy(),t=JSON.stringify(this.api.getState());e.setProperty("graphData",t),e.setProperty("parentHash",e.hash),e.setProperty("recoveryParentHash",this.recoveryParentHash);var n=this.randomHash.next()+this.randomHash.next();e.setProperty("hash",n),this.recoveryParentHash=n;var r=this.api.screenshot({width:200,height:200,targetPixelRatio:2});return e.setProperty("thumbURL",r),o.saveGraph(e,{myGraphs:!1,isUpdate:!1,recovery:!0})},e.isCurrentGraphTitled=function(){return!!this.currentGraph.title},e.wasCurrentGraphEverSaved=function(){var e=this.currentGraph;if(!e||!e.hash)return!1;var t=e.hash;return n.any(this.__savedGraphs,function(e){return e.hash===t})},e.refreshGraphs=function(){var e=this;e.isLoadingGraphs=!0,e.syncError=!1,e.triggerEvent("triggerRender");var t;switch(this.product){case"graphing":t=o.getGraphs();break;case"graphing3d":t=a.getGraphs();break;case"geometry":t=s.getConstructions()}t.done(function(t){e.lastSync=Date.now(),e.setSavedGraphsFromJSON(t.myGraphs||t.myConstructions)}).fail(function(){e.syncError=!0,e.triggerEvent("onSyncError")}).always(function(){e.isLoadingGraphs=!1,e.triggerEvent("triggerRender")})},e.getSavedGraphs=function(){return this.__savedGraphs.slice(0)},e.getExampleGraphs=function(){return this.__exampleGraphs.slice(0)},e.getEasterEggGraphs=function(e){return n.filter(this.__easterEggGraphs,function(t){return t.easterEgg===e})},e.getSavedAndExampleGraphs=function(){return this.__savedGraphs.concat(this.__exampleGraphs)},e.setSavedGraphsFromJSON=function(e){e||(e=[]),this.__savedGraphs=e.map(function(e){var t=i.fromAjax(e),n=this._getCachedGraphInfo(t);return n?n.graph:(this._addGraphToCache(t),t)}.bind(this)),this._lazyLoadGraphStates(),this.triggerEvent("listChanged"),this.triggerEvent("triggerRender")},e.getSavedGraphsAsJSON=function(){return this.__savedGraphs.map(i.toAjax)},e._enableLoadingGraphStates=function(){clearTimeout(this.__loadNextGraphStateTimeout);var e=function(){this._loadNextGraphState(),this.__loadNextGraphStateTimeout=setTimeout(e,50)}.bind(this);e()},e._disableLoadingGraphStates=function(){clearTimeout(this.__loadNextGraphStateTimeout)},e._loadNextGraphState=function(){if(!this.__currentAjaxRequest){var e=this._dequeueGraphInfo();e&&(this.__currentAjaxRequest=this.loadGraphImmediately(e.graph),this.__currentAjaxRequest.always(function(){this.__currentAjaxRequest=void 0}.bind(this)))}},e.loadGraphImmediately=function(e){var n=t.Deferred();if(!e.graphData){var r=this._getSameSchemeURL(e.stateURL),i=this._getCachedGraphInfo(e);return i.isDataLoading=!0,t.getJSON(r).done(function(t){e.graphData=t,i.didDataLoadFail=!1,n.resolve(t)}).fail(function(e){i.didDataLoadFail=!0,n.reject(e)}.bind(this)).always(function(e){i.isDataLoading=!1,this.triggerEvent("listChanged"),this.triggerEvent("triggerRender")}.bind(this))}return d.requestAnimationFrame(function(){n.resolve()}),n},e._getSameSchemeURL=function(e){return window.location.protocol,e},e._getCachedGraphInfo=function(e){return e&&this.__graphInfoCache[e.getCollectionKey()]},e._addGraphToCache=function(e){this.__graphInfoCache[e.getCollectionKey()]={graph:e}},e._enqueueGraphInfo=function(e){this.__nextAjaxRequestPriority||(this.__nextAjaxRequestPriority=0),e.ajaxPriority=++this.__nextAjaxRequestPriority},e._dequeueGraphInfo=function(){var e=n.max(this.__graphInfoCache,"ajaxPriority");return n.isObject(e)?(delete e.ajaxPriority,e):null},e.loadDataForGraph=function(e){if(e){var t=this._getCachedGraphInfo(e);if(!t)throw new Error('graphsController does not have a reference to graph with hash "'+e.hash+'"');t.graph.graphData||(t.isDataLoading=!0,t.didDataLoadFail=!1,this._enqueueGraphInfo(t),this.triggerEvent("triggerRender"))}},e._lazyLoadGraphStates=function(){for(var e=this.getSavedAndExampleGraphs(),t=Math.min(20,e.length)-1;t>=0;t--)this.loadDataForGraph(e[t])},e.didDataLoadFail=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.didDataLoadFail)},e.didDeleteGraphFail=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.didDeleteGraphFail)},e.isDeletingGraph=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.isDeletingGraph)},e.canCancelDelete=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.canCancelDelete)},e.loadGraph=function(e){this.previousGraph=this.currentGraph?this.currentGraph.copy():i(),this.previousGraph.graphData=JSON.stringify(this.api.getState());var t=e.copy();delete t.example,this.api.setState(t.graphData,{forceExpressionsOpen:!0}),this.currentGraph=t,this._onCurrentGraphChanged(),this.recoveryParentHash=this.currentGraph.hash,this.triggerEvent("clearUndoRedo"),this.triggerEvent("clearUnsavedChanges"),this.triggerEvent("triggerRender")},e.restorePreviousGraph=function(){this.loadGraph(this.previousGraph||i())},e.clearGraph=function(){this.loadGraph(i()),this.triggerEvent("onClearGraph")},e._onCurrentGraphChanged=function(){var e=this.currentGraph;e.title?document.title=e.title:"graphing"===this.product?document.title=this.t("Desmos | Graphing Calculator"):"graphing3d"===this.product?document.title=this.t("Desmos | 3D Graphing Calculator"):document.title=this.t("Desmos | Geometry"),this._replaceState(e)},e._replaceState=function(e){if(window.history&&history.replaceState){var t=e.getURL();t&&(window.location.search&&(t+=window.location.search),t!==window.location.href&&history.replaceState(e.hash,e.title,t))}},e.toast=function(e,t){this.triggerEvent("toast",{message:e,opts:t})},e.clearGraphByUserAction=function(){var e,t=this;if(this.currentGraph.hash)return this.clearGraph(),e="geometry"===this.product?this.t("New construction created."):this.t("New graph created."),void this.toast(e,{undoCallback:function(){t.restorePreviousGraph(),t._replaceState(t.currentGraph)}});var n=this.api.getState();this.clearGraph(),e="geometry"===this.product?this.t("Construction Cleared."):this.t("Graph cleared."),this.toast(e,{undoCallback:function(){t.api.setState(n,{forceExpressionsOpen:!0})}})},e.getSaveFailureMessage=function(){return this.lastSaveFailureMessage||""},e.isSaving=function(){return!!this.saving},e.didSaveFail=function(){return!!this.recentSaveFailure},e.didSaveSucceed=function(){return!!this.recentSaveSuccess},e.isSyncing=function(){return!!this.isLoadingGraphs},e.didSyncFail=function(){return!!this.syncError},e.getCurrentDisplayDate=function(){return this.currentGraph.displayDate()},e.getCurrentGraphTitle=function(){return this.currentGraph.title},e.getUntitledString=function(){return"geometry"===this.product?this.t("Untitled"):"graphing"===this.product?this.t("Untitled Graph"):"graphing3d"===this.product?this.t("Untitled Graph"):(p.notify("Unknown product: "+this.product),"Untitled")},e.hasUnsavedChanges=function(){return this.api.hasUnsavedChanges()}})}),define("main/language_controller",["require","exports","lib/i18n","lib/urlparser"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this._language=n.detectLanguage(),this.Calc=e;var r=this.Calc._calc.controller.getGraphSettings().config;r.observe("language",function(){var e=r.language;n.fetchLanguage(e).then(function(){t._language=e})})}return e.prototype.t=function(e,t){return n.t(e,t,this._language)},e.prototype.s=function(e,t){return n.s(e,t,this._language)},e.prototype.raw=function(e,t){return n.raw(e,t)},e.prototype.unpack=function(e){return n.unpack(e,this._language)},e.prototype.getLanguage=function(){return this._language},e.prototype.updateUrl=function(e){if(window.history&&history.replaceState){var t=location.origin,n=location.pathname,i=location.search,o=location.hash,a=r.setParameter(i,"lang",e),s=""+t+n+a+o;history.replaceState(null,"",s)}},e.prototype.fetchAndSetLanguage=function(e){var t=this;n.fetchLanguage(e).then(function(){t._language=e,t.Calc.updateSettings({language:e}),t.updateUrl(e)})},e}();t.default=i}),define("main/mygraphs_controller",["require","pjs","jquery","underscore_model","lib/aria","lib/conditional_blur","analytics/looker"],function(e){"use strict";var t=e("pjs"),n=e("jquery"),r=e("underscore_model").UnderscoreModel,i=e("lib/aria"),o=e("lib/conditional_blur").default,a=e("analytics/looker").logJSON;return t(r,function(e,t){e.init=function(e,n,r){t.init.call(this),this.graphsController=e,this.api=n,this.t=r,this.isOpen=!1},e.isMygraphsOpen=function(){return this.isOpen},e.openMygraphs=function(e){this.isOpen=!0,n("body").addClass("resources-open"),a("user-action::open-my-graphs",{product:this.graphsController.product}),i.alert(this.t("Open graph")),o(),e&&"keyboard"===e.device&&n(".dcg-action-newblankgraph").focus(),this.triggerEvent("onOpenMygraphs")},e.closeMygraphs=function(){this.isOpen=!1,n("body").removeClass("resources-open")},e.openBlankGraph=function(){this.closeMygraphs(),this.graphsController.clearGraphByUserAction(),this.triggerEvent("triggerRender")},e.onOpenGraph=function(e){this.graphsController.loadGraph(e.copy()),this._concludeOpenGraph(e)},e.toast=function(e,t){this.triggerEvent("toast",{message:e,opts:t})},e._concludeOpenGraph=function(e){var t=e.title||this.graphsController.getUntitledString(),n=this.t("Opened '__graphTitle__'",{graphTitle:t});this.toast(n,{undoCallback:function(){this.graphsController.restorePreviousGraph()}.bind(this)}),this.closeMygraphs(),this.triggerEvent("triggerRender")},e.openGraphBehindCover=function(e){this.graphsController.loadGraph(e.copy());var t=n.Deferred();return"graphing"===this.graphsController.product||"graphing3d"===this.graphsController.product?(this.api._calc.evaluator.notifyWhenSynced(function(){t.resolve()}),setTimeout(function(){t.resolve()},6e3)):"geometry"===this.graphsController.product&&t.resolve(),t.then(function(){this._concludeOpenGraph(e)}.bind(this)),t.promise()},e.getThumbnail=function(){return this.api.screenshot({width:200,height:200,targetPixelRatio:2})}})}),define("tours/tour_controller",["require","pjs","tours/all_tours","lib/urlparser","lib/i18n","jquery"],function(e){"use strict";var t=e("pjs"),n=e("tours/all_tours"),r=e("lib/urlparser"),i=e("lib/i18n"),o=e("jquery");return t(function(e,t){e.init=function(e){this.tourManager=e._calc.tourManager,this.Calc=e._calc,this.tourManager.closingMsg=["<b>__endingMessage__</b><br>",i.t("This message will self-destruct in __seconds__...")].join("")},e.shouldPopupTour=function(e){if(this.Calc.controller.getItemCount()>3)return!0;var t=n[e].tour(this.Calc);return!!t.shouldPopup&&t.shouldPopup()},e.startTour=function(e,t){if(e&&n[e]){var r=n[e].tour(this.Calc);this.tourManager.currentTour&&this.tourManager.stopTour(),this.tourManager.startTour(r)}},e.startTourFromUrl=function(){if(o(".dcg-expressionitem").length<2)return void setTimeout(this.startTourFromUrl.bind(this),100);var e=r.getParameter(location.search,"tour");this.startTour(e,"url")},e.setCalc=function(e){this.Calc=e}})}),define("calculator-shell/controller",["require","exports","config","jquery","underscore","flux","browser","keys","bugsnag"],function(e,t,n,r,i,o,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;var l=function(){function e(e){var t=this;this.userController=e.userController,this.graphsController=e.graphsController,this.tourController=e.tourController,this.languageController=e.languageController,this.mygraphsController=e.mygraphsController,this.api=e.api,this.t=e.t,this.raw=e.raw,this.s=e.s,this.unpack=e.unpack,this.product=e.product,this.SOMETHING_WENT_WRONG=this.t("Sorry! Something went wrong. Please try again later."),this._openModal="none",this._modalDevice="none",this._openMenu="none",this.state={},this.hookupControllers(),this.hookupHotkeys(),this.dispatcher=new o.Dispatcher,this.dispatch=function(e){return c.leaveBreadcrumb("dispatch::header-controller",e),t.dispatcher.dispatch(e)},this.dispatcher.register(function(e){var n=e.type,r=e.payload;switch(n){case"show-print-dialog":break;case"save-graph":t.saveGraph(e.device,r);break;case"edit-title":t.launchEditTitle();break;case"launch-login":t.showModal("login",e.device);break;case"edit-account":t.showModal("account-settings",e.device);break;case"export-image":t.showModal("export-image",e.device);break;case"launch-change-email":t.showModal("change-email");break;case"create-account":t.showModal("create-account",e.device);break;case"unsupported-browser":t.showModal("unsupported-browser");break;case"show-consent-dialog":t.showModal("consent-dialog");break;case"recover-password":t.showModal("recover-password");break;case"close-modal":t.closeModal();break;case"show-hotkeys":t.showModal("hotkeys");break;case"show-reenabled":t.showModal("account-reenabled");break;case"toggle-menu":t.setOpenMenu(r);break;case"open-mygraphs":t.mygraphsController.openMygraphs(e);break;case"close-mygraphs":t.mygraphsController.closeMygraphs();break;case"consent-to-collection":t.consentToCollection();break;case"open-contest-modal":t.showModal("contest-submission")}return t.triggerRender()}),this.lastRecoveryState={},this.checkRecoveryState()}return e.prototype.triggerRender=function(){},e.prototype.hookupControllers=function(){var e=this;this.mygraphsController.observeEvent("onOpenMygraphs",function(){if(e.isLoggedIn()&&e.graphsController.millisecondsSinceSync()>12e4)return e.graphsController.refreshGraphs()}),this.mygraphsController.observeEvent("triggerRender",function(){e.triggerRender()}),this.userController.observeEvent("loginChanged",function(){e.isLoggedIn()?e.graphsController.refreshGraphs():e.graphsController.clear(),e.mustConsentToCollection()&&e.showModal("consent-dialog")}),this.userController.observeEvent("userUpdated",function(){"consent-dialog"===e.getOpenModal()&&e.closeModal()}),this.userController.observeEvent("triggerRender",function(){e.triggerRender()}),this.graphsController.observeEvent("triggerRender",function(){e.triggerRender()})},e.prototype.hookupHotkeys=function(){var e=this;r(document).on("keydown",function(t){var n=t.ctrlKey,r=t.metaKey,i=t.altKey;if(a.IS_APPLE?!n&&r&&!i:n&&!r&&!i)switch(s.lookupChar(t)){case"S":return t.shiftKey?e.dispatch({type:"edit-title"}):e.dispatch({type:"save-graph",device:"keyboard"}),!1;case"O":return e.dispatch({type:"open-mygraphs",device:"keyboard"}),!1}})},e.prototype.disablePrintAndExport=function(){this._disablePrintAndExport=!0},e.prototype.shouldDisablePrintAndExport=function(){return!!this._disablePrintAndExport},e.prototype.getOpenMenu=function(){return this._openMenu},e.prototype.getOpenModal=function(){return this._openModal},e.prototype.hasOpenModal=function(){return"none"!==this._openModal},e.prototype.getModalDevice=function(){return this._modalDevice},e.prototype.closeModal=function(){this._openModal=this.mustConsentToCollection()?"consent-dialog":"none",this.triggerRender()},e.prototype.closeMenu=function(){this._openMenu="none"},e.prototype.showModal=function(e,t){this.closeMenu(),this._modalDevice=t||"none",this._openModal=e},e.prototype.setOpenMenu=function(e){var t=this.getOpenMenu();this._openMenu=e===t?"none":e},e.prototype.getProduct=function(){return this.product},e.prototype.saveRecoveryState=function(){if(this.userController.isLoggedIn()&&this.graphsController.hasUnsavedChanges()){var e=this.graphsController.api.getState();i.isEqual(e,this.lastRecoveryState)||(this.graphsController.saveRecoveryGraph(),this.lastRecoveryState=e)}},e.prototype.checkRecoveryState=function(){var e=this;setTimeout(function(){e.checkRecoveryState(),e.saveRecoveryState()},3e5)},e.prototype.isLoggedIn=function(){return this.userController.isLoggedIn()},e.prototype.hasConsentedToCollection=function(){return this.userController.hasConsentedToCollection()},e.prototype.isInMaintenanceMode=function(){return n.get("maintenance")},e.prototype.getPreviewParams=function(){return n.get("previewMode")?{url:n.get("previewFeedbackUrl"),message:n.get("previewMessage")}:null},e.prototype.isDecimalToFractionEnabled=function(){return!!n.get("decimalToFraction")},e.prototype.saveGraph=function(e,t){this.isLoggedIn()?(this.graphsController.save({newTitle:null!=t?t.title:void 0,saveCopy:!!(null!=t?t.saveAs:void 0)}),this.closeModal()):this.showModal("create-account",e)},e.prototype.simpleSave=function(){this.graphsController.isCurrentGraphTitled()||this.openSaveDialog(),this.graphsController.save(),this.dispatch({type:"trigger-render"})},e.prototype.openSaveDialog=function(){this.showModal("save"),this.dispatch({type:"trigger-render"})},e.prototype.launchEditTitle=function(){this.closeMenu(),null!=this.getPreviewParams()||this.isInMaintenanceMode()||(this.isLoggedIn()?this.showModal("save"):this.showModal("create-account"))},e.prototype.getOpenText=function(){return"graphing"===this.product?this.t("Open Graph"):"graphing3d"===this.product?this.t("Open Graph"):"geometry"===this.product?this.t("Open Construction"):""},e.prototype.isConsentingToCollection=function(){return this.userController.isConsentingToPrivacy()},e.prototype.privacyConsentFailed=function(){return this.userController.didPrivacyConsentFail()},e.prototype.mustConsentToCollection=function(){return this.isLoggedIn()&&!this.hasConsentedToCollection()},e.prototype.consentToCollection=function(){return this.userController.setPrivacyConsent()},e.prototype.isArtContestEnabled=function(){return!1},e.prototype.isGraphComplexEnoughForContest=function(){var e=this.api.getState(),t=e.expressions.list;return 1!==t.length||("expression"!==t[0].type||!!t[0].latex)},e}();t.Controller=l}),define("main/globalhotkeys",["require","exports","browser","keys","jquery","lib/aria"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=0,s=function(){function e(e,t,n){this.__id=a++,this.controller=e,this.headerController=t,this.userController=t.userController,this.mygraphsController=t.mygraphsController,this.instanceHotkeys=n,this.startListening()}return e.prototype.remove=function(){this.stopListening()},e.prototype.startListening=function(){var e=this;this.isListening||(i(document).on("keydown.dcg-global-keyboard-listener-"+this.__id,function(t){return e.handleGlobalKeydown(t)}),this.isListening=!0)},
e.prototype.stopListening=function(){this.isListening&&(i(document).off("keydown.dcg-global-keyboard-listener-"+this.__id),this.isListening=!1)},e.prototype.handleGlobalKeydown=function(e){var t=!1;if(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||r.lookup(e)!==r.ESCAPE){if(r.isHelp(e))e.preventDefault(),e.stopPropagation(),t=!0,this.headerController.dispatch({type:"show-hotkeys"});else if(e.ctrlKey&&(e.altKey||e.metaKey)&&!e.shiftKey)if("A"===r.lookupChar(e))if(e.preventDefault(),e.stopPropagation(),t=!0,this.userController.isLoggedIn())this.focusElement(i(document).find(".dcg-account-link"),this.controller.t("Unable to activate account menu"));else{var n=i(document).find(".dcg-sign-in");this.triggerKeyboardTapEvent(n)}else"L"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),t=!0,this.focusElement(i(document).find(".dcg-action-language"),this.controller.t("Unable to activate language menu"))):"H"===r.lookupChar(e)?(e.preventDefault(),e.stopPropagation(),t=!0,this.focusElement(i(document).find(".dcg-action-help"),this.controller.t("Unable to activate help menu"))):"S"===r.lookupChar(e)&&(e.preventDefault(),e.stopPropagation(),t=!0,this.focusElement(i(document).find(".dcg-action-share"),this.controller.t("Unable to activate share menu")))}else t=this.handleEscape(e);t||this.instanceHotkeys.handleKeydown(e)},e.prototype.handleEscape=function(e){var t,r=!1,o=i(".action-close-modal:visible"),a=!!o.length,s=i(".graph-preview"),c=!!s.length,l=i(".dcg-action-close-resources:visible"),u=this.mygraphsController.isMygraphsOpen();if(a?t=o:(c||u)&&(t=l),t){if(this.triggerKeyboardTapEvent(t),!n.IS_MOBILE)if(c||a&&u)a&&u&&i(".new-blank-graph").focus();else{var d=this.controller.getSelectedItem();if(d)this.controller.dispatch({type:"move-focus-to-item",id:d.id});else{var p=this.controller.getItemModelByIndex(0);p&&this.controller.dispatch({type:"move-focus-to-item",id:p.id})}}e.preventDefault(),e.stopPropagation(),r=!0}return r},e.prototype.triggerKeyboardTapEvent=function(e){var t=i.Event("dcg-tap");t.device="keyboard",e.trigger(t)},e.prototype.focusElement=function(e,t){e.length?this.triggerKeyboardTapEvent(e):t&&o.alert(t)},e}();t.default=s}),define("loadcss!main",function(){}),define("main/instantiate-top-level-components",["require","config","underscore","main/user_controller","main/graphs_controller","main/language_controller","main/mygraphs_controller","tours/tour_controller","calculator-shell/controller","main/globalhotkeys","browser","ipad.scrollfix","loadcss!main","api/calculator"],function(e){"use strict";var t=e("config"),n=e("underscore"),r=e("main/user_controller").UserController,i=e("main/graphs_controller"),o=e("main/language_controller").default,a=e("main/mygraphs_controller"),s=e("tours/tour_controller"),c=e("calculator-shell/controller").Controller,l=e("main/globalhotkeys").default,u=e("browser"),d=e("ipad.scrollfix");e("loadcss!main");var p=e("api/calculator");return function(e){var h=t.all(),f=JSON.parse(e.exampleGraphsRaw);h.disableScrollFix||d.limitScrollOnDocument(),h.redrawSlowly=!u.IS_MOBILE,h.border=!1,h.disableScrollFix=!0,h.showHamburger=!0,e.calcOptions&&(h=n.extend(h,e.calcOptions));var m=document.getElementById("graph-container"),g=p.Calculator(m,h,e.onCalcReady),y=s(g);window.tourController=y;var v=new o(g),b=new r,x=v.t.bind(v),E=v.s.bind(v),w=v.raw.bind(v),_=v.unpack.bind(v),S=i(g,x,f,e.seed,"graphing");S.observeEvent("driveAccessError",function(e,t){g._calc.controller.dispatch({type:"toast/show",toast:{message:'Error saving. <a href="'+t.authorizeUrl+'" target="_blank" class="dcg-action-hide">Click here</a> to re-authorize Desmos to save graphs to Google Drive.',toastStyle:"error",hideAfter:0}})});var M=a(S,g,x);window.userController=b,S.observeEvent("onClearGraph",function(){g.focusFirstExpression()}),M.observeEvent("toast",function(e,t){var n={message:t.message};for(var r in t.opts)t.opts.hasOwnProperty(r)&&(n[r]=t.opts[r]);g._calc.controller.dispatch({type:"toast/show",toast:n})}),S.observeEvent("toast",function(e,t){var n={message:t.message};for(var r in t.opts)t.opts.hasOwnProperty(r)&&(n[r]=t.opts[r]);g._calc.controller.dispatch({type:"toast/show",toast:n})}),S.observeEvent("clearUnsavedChanges",function(){g._calc.controller.dispatch({type:"clear-unsaved-changes"})}),S.observeEvent("clearUndoRedo",function(){g._calc.controller.dispatch({type:"clear-undoredo-history"})});var k=!1;g._calc.controller.subToChanges(function(){var e=g._calc.controller.hasUnsavedChanges();e!==k&&I.triggerRender(),k=e}),g.controller.getGraphSettings().config.observe("language",function(){I.triggerRender()}),g.hasUnsavedChanges=function(){return g._calc.controller.hasUnsavedChanges()};var C;g.controller.triggerEasterEgg=function(e){var t="betchacant"===e?g.controller.t("Challenge accepted..."):g.controller.t("Loading..."),n=S.getEasterEggGraphs(e);0!==n.length&&(C=Math.floor(Math.random()*n.length),g.controller.dispatch({type:"toast/show",toast:{message:t,hideAfter:0,toastStyle:"cover"}}),S.loadGraphImmediately(n[C]).done(function(){M.openGraphBehindCover(n[C])}))},!1!==t.get("expressions")&&(g.controller.triggerClearGraph=function(){S.clearGraphByUserAction()},g.observeEvent("openDrawer",function(){I.dispatch({type:"open-mygraphs"})}));var I=new c({userController:b,graphsController:S,tourController:y,languageController:v,mygraphsController:M,api:g,t:x,s:E,raw:w,unpack:_,product:"graphing"});return g._calc.globalHotkeys=new l(g._calc.controller,I,g._calc.instanceHotkeys),{Calc:g,userController:b,graphsController:S,tourController:y,headerController:I}}}),define("main/calc_desktop",["require","jquery","browser","main/load_data","config","loadcss!print","lib/i18n","main/graph","text!example_graphs","api/calculator","main/external-login-popup","dcgview","calculator-shell/wrapper","calculator-shell/modals","mygraphs/wrapper","main/disable-dragdrop-events","vendor/bugsnag","bugsnag","./instantiate-top-level-components"],function(e){"use strict";function t(t){function a(e,t){return v._calc.controller.t(e,t)}var g=e("./instantiate-top-level-components")({seed:i.seed,modalContainer:"body",exampleGraphsRaw:c,calcOptions:{pasteGraphLink:!0}}),v=g.Calc;v._calc.controller.setBugsnagContext("main-controller"),v.updateSettings({language:t});var b=g.userController,x=g.graphsController,E=g.tourController,w=g.headerController;if(y.setBeforeSendCB(function(e){var t=v._calc.controller.stateStack;t&&t.serializeForBugsnag&&(e.metaData.states=t.serializeForBugsnag())}),u.listenForLoginRequests(b,a),o.get("no_navigation_warning")||n(window).on("beforeunload",function(){if(v.hasUnsavedChanges())return a("Are you sure you want to leave this graph? Your unsaved work will be lost.")}),i.user&&b.completeLogin(i.user,"load"),i.graph?x.loadGraph(s.fromAjax(i.graph)):(x.clearGraph(),i.latex&&v.setExpression({latex:i.latex})),E.startTourFromUrl(),b.getEmailChangeToken()&&w.dispatch({type:"launch-change-email"}),w.triggerRender=function(){v.viewWrapper&&v.viewWrapper.update(),v.modalsView&&v.modalsView.update(),v.myGraphsWrapper&&v.myGraphsWrapper.update(),b.getEmailChangeToken()&&"change-email"!==w.getOpenModal()&&history.replaceState(null,null,document.location.pathname)},v.viewWrapper=d.mountToNode(p,document.getElementById("dcg-header-container"),{controller:function(){return w}}),v.modalsView=d.mountToNode(h,document.getElementById("dcg-modal-container"),{controller:function(){return w}}),v.myGraphsWrapper=d.mountToNode(f,document.getElementById("mygraphs-container"),{controller:d.const(w),makeAPI:function(e){return new l.Calculator(e,{settingsMenu:!1,keypad:!1,zoomButtons:!1,branding:!1,border:!1,disableScrollFix:!0,expressions:!1})}}),!r.IS_ANDROID||r.IS_CHROME||r.IS_FIREFOX||w.dispatch({type:"unsupported-browser"}),document.location.search.match(/(\?|\&)create_account/)?(history.replaceState(null,null,document.location.pathname),b.isLoggedIn()?v._calc.controller.dispatch({type:"toast/show",toast:{message:a("Logged in successfully!")}}):w.dispatch({type:"create-account"})):document.location.search.match(/(\?|\&)login/)?(history.replaceState(null,null,document.location.pathname),b.isLoggedIn()?v._calc.controller.dispatch({type:"toast/show",toast:{message:a("Logged in successfully!")}}):w.dispatch({type:"launch-login"})):document.location.search.match(/(\?|\&)reset_password/)&&(history.replaceState(null,null,document.location.pathname),b.isLoggedIn()?v._calc.controller.dispatch({type:"toast/show",toast:{message:a("Logged in successfully!")}}):w.dispatch({type:"recover-password"})),window.matchMedia){window.matchMedia("print").addListener(function(e){e.matches?v._calc.controller.dispatch({type:"enter-printmode"}):v._calc.controller.dispatch({type:"exit-printmode"})})}return m(n(document)),v}var n=e("jquery"),r=e("browser"),i=e("main/load_data"),o=e("config");e("loadcss!print");var a=e("lib/i18n"),s=e("main/graph"),c=e("text!example_graphs"),l=e("api/calculator"),u=e("main/external-login-popup"),d=e("dcgview"),p=e("calculator-shell/wrapper").ViewWrapper,h=e("calculator-shell/modals").Modals,f=e("mygraphs/wrapper").MygraphsWrapper,m=e("main/disable-dragdrop-events").default,g=e("vendor/bugsnag"),y=e("bugsnag");o.get("testing")||y.init(g);var v=a.detectLanguage();return a.fetchLanguage(v).then(function(){return t(v)},function(){return t("en")})}),define("main/noconflict",["require","jquery","underscore"],function(e){"use strict";var t=e("jquery"),n=e("underscore");return"undefined"==typeof Desmos&&(Desmos={}),function(){Desmos.$=t,Desmos._=n,Desmos.$.noConflict(!0)}}),define("toplevel/calculator_desktop",["require","testbridge","touchtracking","main/calc_desktop","main/noconflict"],function(e){"use strict";e("testbridge"),e("touchtracking").monitor(document.body);var t=e("main/calc_desktop");return e("main/noconflict")(),t});